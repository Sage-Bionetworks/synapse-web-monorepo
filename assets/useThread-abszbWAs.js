import{r as l,an as c,am as d,aH as y,aI as o,aa as i}from"./iframe-DCJ7skCF.js";function q(e){const{data:a,isLoading:r}=h(e),{data:n,isLoading:t}=g(a,{enabled:!!a}),{mutate:s}=K(),{mutate:u}=m(),T=l.useCallback(()=>{a&&(a?.isPinned?u(a):s(a))},[u,s,a]);return{threadData:a,threadBody:n,togglePin:T,isLoading:t||r}}function h(e,a){const{accessToken:r,keyFactory:n}=c();return d({...a,queryKey:n.getThreadQueryKey(e),queryFn:()=>i.getThread(e,r)})}function g(e,a){const{accessToken:r,keyFactory:n}=c(),t=async()=>{const s=await i.getThreadMessageUrl(e?.messageKey,r);return(await fetch(s.messageUrl,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text()};return d({...a,queryKey:n.getThreadBodyQueryKey(e?.id,e?.messageKey),queryFn:t})}function F(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.putThreadTitle(r,t),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getAllForumThreadsQueryKey(t.forumId)}),await a.invalidateQueries({queryKey:n.getThreadQueryKey(s.threadId)}),e?.onSuccess&&await e.onSuccess(t,s,u)}})}function k(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.putThreadMessage(r,t),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getThreadQueryKey(s.threadId)}),e?.onSuccess&&await e.onSuccess(t,s,u)}})}function S(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.postThread(r,t),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getAllForumThreadsQueryKey(t.forumId)}),e?.onSuccess&&await e.onSuccess(t,s,u)}})}function w(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.deleteThread(r,t.id),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getAllForumThreadsQueryKey(s.forumId)}),await a.invalidateQueries({queryKey:n.getThreadQueryKey(s.id)}),e?.onSuccess&&await e.onSuccess(t,s,u)}})}function C(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.restoreThread(r,t.id),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getAllForumThreadsQueryKey(s.forumId)}),await a.invalidateQueries({queryKey:n.getThreadQueryKey(s.id)}),e?.onSuccess&&await e.onSuccess(t,s,u)}})}function K(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.pinThread(r,t.id),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getAllForumThreadsQueryKey(s.forumId)}),await a.invalidateQueries({queryKey:n.getThreadQueryKey(s.id)})}})}function m(e){const a=y(),{accessToken:r,keyFactory:n}=c();return o({...e,mutationFn:t=>i.unPinThread(r,t.id),onSuccess:async(t,s,u)=>{await a.invalidateQueries({queryKey:n.getAllForumThreadsQueryKey(s.forumId)}),await a.invalidateQueries({queryKey:n.getThreadQueryKey(s.id)})}})}export{w as a,C as b,F as c,k as d,S as e,q as u};
