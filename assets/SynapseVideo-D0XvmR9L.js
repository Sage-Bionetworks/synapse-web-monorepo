import{an as H,r as c,j as t,d6 as U,h_ as f,F as h,dB as _}from"./iframe-CJCPT_yY.js";function v({params:e}){const{accessToken:d,isAuthenticated:m}=H(),[o,y]=c.useState(),[S,x]=c.useState(),[I,V]=c.useState(),u=e.width??"",g=e.height??"";return c.useEffect(()=>{const j=async()=>{if(e.videoId)y(`https://www.youtube.com/embed/${e.videoId}`);else if(e.vimeoId)y(`https://player.vimeo.com/video/${e.vimeoId}`);else{const a=e.oggSynapseId||e.mp4SynapseId||e.webmSynapseId,r=await f(d,a),n=[{associateObjectId:a,associateObjectType:h.FileEntity,fileHandleId:r.dataFileHandleId}];let p;if(e.vttSynapseId){const s=await f(d,e.vttSynapseId);p=s.dataFileHandleId,n.push({associateObjectId:e.vttSynapseId,associateObjectType:h.FileEntity,fileHandleId:s.dataFileHandleId})}w(n,r.dataFileHandleId,p)}},w=(a,r,n)=>{_({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:a},d).then(s=>{const l=s.requestedFiles.find(i=>i.fileHandleId===r);if(l!=null&&l.preSignedURL&&x(l.preSignedURL),n){const i=s.requestedFiles.find(F=>F.fileHandleId===n);i!=null&&i.preSignedURL&&V(i.preSignedURL)}}).catch(s=>{console.error("Error on getting video ",s)})};j()},[o,e,d,g,u]),!m&&!o?t.jsxs("p",{children:["You will need to",t.jsx("button",{"data-testid":"video-login",className:`${U} sign-in-btn default
              `,children:"Sign in"}),"in for access to that resource."]}):S?t.jsxs("video",{controls:!0,width:u,height:g,"data-testid":"synapse-video-url",crossOrigin:"anonymous",children:[t.jsx("source",{src:S}),I&&t.jsx("track",{src:I,kind:"subtitles",default:!0}),"It does not support the HTML5 Video element."]}):o?t.jsx("iframe",{title:"video frame",src:o,width:u,height:g}):t.jsx(t.Fragment,{})}try{v.displayName="SynapseVideo",v.__docgenInfo={description:"",displayName:"SynapseVideo",props:{params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ width?: string; height?: string; videoId?: string; vimeoId?: string; oggSynapseId?: string; mp4SynapseId?: string; webmSynapseId?: string; vttSynapseId?: string; }"}}}}}catch{}export{v as S};
