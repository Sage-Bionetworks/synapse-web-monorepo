import{ao as G,an as $,V as H,j as e,ei as V,a1 as K,ej as z,W as y,Y as D,$ as J,a2 as W,gX as X,r as h,eN as Z,c7 as ee,B as Q,bs as re,ai as te,jQ as oe,jR as se,jS as ae,jT as ne,jU as ie,jV as w}from"./iframe-05B79XZ4.js";import{S as pe}from"./SynapseSearchResultsCard-DrO-Z4C1.js";import{S as k}from"./Search-BC-xYvng.js";import{u as ue}from"./useSearch-BkczK3uz.js";import{D as P}from"./searchDefaults-D5zNn59N.js";import{I as le}from"./InputAdornment-D9pjaW7D.js";import"./index-Chi_LkuB.js";import"./EntityIcon-B3iK79ZU.js";import"./FavoriteButton-DlfXSCXj.js";import"./useFavorites-p0A8Ei1a.js";import"./useInfiniteQuery-BL4rT7lo.js";import"./InfiniteQueryUtils-CKlRW-xB.js";import"./DropdownMenu-BfWmaMkc.js";import"./MenuItem-CVPsdyof.js";import"./ListItemIcon-e_NB9SQd.js";import"./ListItemText-DFs7kTvm.js";import"./ProgrammaticInstructionsModal-DOWuP6U6.js";import"./ConfirmationDialog-Bn0uFIx_.js";import"./DialogBase-DuQ9TKuQ.js";import"./Close-DqDldpZI.js";import"./HelpPopover-CaC791WE.js";import"./MarkdownPopover-DBcqFb8R.js";import"./LightTooltip-DHbNXpmV.js";import"./MarkdownSynapse-9V8zeGJ5.js";import"./SkeletonButton-DSpQmtG3.js";import"./SkeletonInlineBlock-DysL0dN-.js";import"./SkeletonTable-CUmGP5q5.js";import"./SkeletonParagraph-CCYsd3b9.js";import"./Tabs-k8jHFQpO.js";import"./KeyboardArrowRight-vZyOK3Cc.js";import"./ModalDownload-BwHBo3jh.js";import"./index-k9iUf9L-.js";import"./enums-CXAymB4G.js";import"./_baseIteratee-DXgMmV7G.js";import"./isString-CO1VSkJm.js";import"./_arrayReduce-CrxnWFSq.js";import"./_baseEach-DDJYCD3q.js";import"./uniq-DLebYPQT.js";import"./forEach-CWOCpBhE.js";import"./pickBy-B2D8woLZ.js";import"./Add-9tZ-Fp5O.js";import"./Grid-DxtXvbXE.js";import"./ListItem-BDJ8bk3W.js";import"./listItemButtonClasses-BcaI3SIE.js";import"./ArrowUpward-odLR4ewL.js";import"./ContentCopy-RVDyLpJ4.js";import"./FormControlLabel-Bw9mk1Z6.js";import"./Checkbox-DMe8JDwK.js";import"./SwitchBase-a3tunUWH.js";import"./FormGroup-Ce6ZtnjO.js";import"./RadioGroup-Ck6-wrTD.js";import"./Radio-DjM_illo.js";import"./Slider-D4NG1Owe.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-C148XJoK.js";import"./SynapseFormRadioWidget-7Q7VtpXl.js";import"./useDownloadList-C1MnlUuF.js";import"./waitForAsyncResult-CJtXQwKI.js";import"./useEntity-BBgR9ZOs.js";import"./useQueries-DXkCjI1X.js";import"./useSuspenseQuery-DXOpFrh-.js";import"./useEntityBundle-Cw4P0fYX.js";import"./DownloadConfirmationUtils-Cp4jkoXM.js";import"./useHasAccess-CZUuOVWK.js";import"./AccessIcon-D3SBq7Ip.js";import"./AccessRequirementList-CV65PdSr.js";import"./useAccessRequirements-D8KrmOhE.js";import"./index-Daq82rHX.js";import"./_baseOrderBy-Go6U-7AU.js";import"./_baseMap-Y6mqOJtS.js";import"./groupBy-zO3xe8JE.js";import"./_createAggregator-C5Prnb_K.js";import"./EntityLink-BBX8SjB1.js";import"./useGetEntityHeaders-De81WEe9.js";import"./ErrorChip-DQODkJAm.js";import"./Chip-MTPGu8Dp.js";import"./UserOrTeamBadge-COfT8vtk.js";import"./UserBadge-CDJVlHlx.js";import"./useUserBundle-xFwWr3d6.js";import"./Card-ejUAG1yu.js";import"./TeamBadge-CO8-8NXt.js";import"./useRealmPrincipals-CjyVyGCP.js";import"./UnmanagedACTAccessRequirementItem-LtZXDUz0.js";import"./RequirementItem-CM07ZYK9.js";import"./LockTwoTone-C1pkySjB.js";import"./UserSearchBoxV2-DdHl4Hn4.js";import"./useDebouncedEffect-dJx6gLeH.js";import"./use-deep-compare-effect.esm-1sKVwYDA.js";import"./without-CTlc1-G3.js";import"./Select-aab027f3.esm-CFbRzQx1.js";import"./defineProperty-Cp4flQ_6.js";import"./toPropertyKey-C9c9JG92.js";import"./ManagedACTAccessRequirementItemView-Bc6f8raH.js";import"./SelfSignAccessRequirementItem-HRVbWfje.js";import"./DataAccessRequestAccessorsFilesForm-DXOhZHdH.js";import"./useDataAccessSubmission-B-HrFx-Z.js";import"./UploadDocumentField-BANmOo3a.js";import"./FileUpload-BO0qLffc.js";import"./ManagedACTAccessRequirementFormWikiWrapper-DkLZHhtn.js";import"./GridLegacy-CCIhejqE.js";import"./ResearchProjectForm-0xaTtxD5.js";import"./TextFieldWithWordLimit-B9-hheL2.js";import"./AuthenticatedRequirement-Cfh95erH.js";import"./CertificationRequirement-BI_Ff60y.js";import"./TwoFactorAuthEnabledRequirement-D7BNpS3B.js";import"./ValidationRequirement-Dag3AMI1.js";function ce(t,p){const{synapseClient:r,keyFactory:a}=G();return $({...p,queryKey:a.getSuggestionQueryKey(t),queryFn:()=>r.searchServicesClient.postRepoV1Suggestion({suggestionQuery:t})})}const me=H(e.jsx("path",{d:"M7 6h10l-5.01 6.3zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"})),de="_didYouMeanContainer_1wx9h_1",ge="_didYouMeanSuggestion_1wx9h_8",ye="_searchIcon_1wx9h_14",he="_suggestionText_1wx9h_18",xe="_didYouMeanCurrentlyShowing_1wx9h_23",fe="_didYouMeanArrowContainer_1wx9h_27",Se="_didYouMeanText_1wx9h_33",d={didYouMeanContainer:de,didYouMeanSuggestion:ge,searchIcon:ye,suggestionText:he,didYouMeanCurrentlyShowing:xe,didYouMeanArrowContainer:fe,didYouMeanText:Se};function b({entityIds:t,dataCatalogEntityId:p="syn61609402",sourceAppConfigTableID:r="syn45291362"}){const a=t.length>0?[{concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter",columnName:"id",operator:V.IN,values:t}]:[],{data:n}=K({entityId:p,query:{sql:`SELECT appId, link FROM ${p}`,additionalFilters:a},partMask:W,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest"},{enabled:t.length>0}),i=n?.responseBody?.queryResult?.queryResults,o=!!i&&i?.rows.length>0,c=i?.rows.map(u=>u.values[0]),j=c&&c.length>0?[{concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter",columnName:"appId",operator:V.IN,values:c}]:[],x=z(r,j),C=!!x&&x.length>0;return!o||!C?null:e.jsx(e.Fragment,{children:x.map((u,N)=>e.jsxs(y,{sx:{display:"flex",padding:"32px",backgroundColor:"secondary.100",borderRadius:"8px",transition:"background-color 0.3s",justifyContent:"space-between",alignItems:"center",gap:"50px",boxShadow:"0 4px 10px 0 rgba(0, 0, 0, 0.10), 0 1px 1px 0 rgba(0, 0, 0, 0.05)"},children:[e.jsx(y,{children:e.jsxs(D,{variant:"smallText1",sx:{color:"grey.900",mt:"4px",lineHeight:"20px"},children:["Looks like you’re searching for information about"," ",u.shortDescription," ",e.jsxs(J,{component:"a",href:u.appURL,target:"_blank",rel:"noopener noreferrer",sx:{color:f=>`${f.palette.grey[900]} !important`,textDecorationColor:f=>`${f.palette.grey[900]} !important`},children:["Visit the ",u.friendlyName]}),". ",u.description]})}),e.jsx(y,{sx:{"> *":{height:"48px",width:"auto"}},children:u?.logo})]},N))})}try{b.displayName="SearchPagePortalBanners",b.__docgenInfo={description:"Portal banner based on entities found in the first page of search results.",displayName:"SearchPagePortalBanners",props:{entityIds:{defaultValue:null,description:"",name:"entityIds",required:!0,type:{name:"string[]"}},dataCatalogEntityId:{defaultValue:{value:"syn61609402"},description:"",name:"dataCatalogEntityId",required:!1,type:{name:"string"}},sourceAppConfigTableID:{defaultValue:{value:"syn45291362"},description:"",name:"sourceAppConfigTableID",required:!1,type:{name:"string"}}}}}catch{}function E(t){const{query:r,setQuery:a}=t;X({title:`Search: ${r?.queryTerm?.join(" ")}`});const[n,i]=h.useState(r?.queryTerm?.join(" ")||"");h.useEffect(()=>{i(r?.queryTerm?.join(" ")||"")},[r]);const{data:o,isLoading:c,error:j,fetchNextPage:x,hasNextPage:C,isFetchingNextPage:u}=ue(r?{...r,size:50,returnFields:["path"]}:{queryTerm:[],size:50,returnFields:["path"]},{enabled:!!r?.queryTerm?.[0]}),N=s=>{i(s.target.value)},f=()=>{if(a){const s={...P,queryTerm:n?n.split(" ").map(l=>l.trim()).filter(Boolean):[]};a(s)}},{data:A}=ce({searchTerm:r?.queryTerm},{enabled:!!r?.queryTerm?.[0]}),S=h.useMemo(()=>{const s=A?.suggestions,l=r?.queryTerm||[];if(!s)return null;const m=new Map;let g=!1;for(const _ of s){const F=_.key,q=Array.from(_.values??[]).reduce((T,I)=>I.score===void 0||I.score<.75?T:!T||I.score>T.score?I:T,null);q?.term&&q.term!==F&&(m.set(F,q.term),g=!0)}return g?l.map(_=>m.get(_)||_).join(" "):null},[A,r?.queryTerm]),L=h.useMemo(()=>{if(!o?.pages||o.pages.length===0)return[];const s=new Set,l=o.pages[0];if(l?.hits){for(const g of l.hits)if(g.id&&s.add(g.id),g.path?.path)for(const R of g.path.path.slice(1))R.id&&s.add(R.id)}return Array.from(s)},[o]),U=()=>{if(a&&S){const s={...P,queryTerm:S.split(" ").map(l=>l.trim()).filter(Boolean)};a(s)}},B=o?.pages?.[0]?.hits?.length===0,O=Z.test(r?.queryTerm?.[0]||"");return e.jsxs(y,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(y,{sx:{display:"flex",flexDirection:"column",height:"200px",bgcolor:s=>s.palette.primary.dark,py:"40px",px:"80px",gap:"16px"},children:[e.jsx(ee,{placeholder:"Search…",value:n,onChange:N,onKeyDown:s=>{s.key==="Enter"&&f()},slotProps:{input:{startAdornment:e.jsx(le,{position:"start",children:e.jsx(k,{sx:{color:"secondary.600"}})})}}}),e.jsx(Q,{variant:"outlined",endIcon:e.jsx(me,{}),sx:{py:"10px",px:"20px",width:"200px",bgcolor:"grey.700",color:"white","&:hover":{boxShadow:"none",color:"white"}},children:"Filter By"})]}),e.jsxs(y,{sx:{padding:"30px"},children:[B&&e.jsxs("div",{className:d.didYouMeanCurrentlyShowing,children:[" ","No results found for ",e.jsx("b",{children:r?.queryTerm?.join(" ")}),"."]}),o&&!O&&S&&!B&&e.jsxs("div",{className:d.didYouMeanContainer,children:[e.jsxs("div",{className:d.didYouMeanCurrentlyShowing,children:["Currently showing results for ",e.jsx("b",{children:r?.queryTerm?.join(" ")}),"."]}),e.jsxs("div",{className:d.didYouMeanSuggestion,children:[e.jsx(k,{sx:{color:"grey.600"},className:d.searchIcon}),e.jsxs(D,{variant:"body1",className:d.didYouMeanText,children:["Search for ",e.jsx("b",{className:d.suggestionText,children:S})," ","instead?"]}),e.jsx(re,{className:d.didYouMeanArrowContainer,onClick:U,"aria-label":`Search for ${S} instead`,sx:{borderColor:"primary.main",svg:{color:"primary.main"}},children:e.jsx(te,{})})]})]}),e.jsxs(y,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"25px"},children:[c&&e.jsx("div",{children:"Loading..."}),j&&e.jsxs("div",{children:["Error: ",j.message]}),e.jsx(b,{entityIds:L}),o&&o.pages&&o.pages.map((s,l)=>s.hits.map(m=>e.jsx(pe,{entityId:m.id,name:m.name,entityType:m.node_type,modifiedOn:m.modified_on},m.id+"-"+l))),C&&e.jsx(Q,{onClick:()=>{x()},loading:u,variant:"contained",sx:{mt:2},children:u?"Loading more...":"Load More"})]})]})]})}try{E.displayName="SynapseSearchPageResults",E.__docgenInfo={description:"",displayName:"SynapseSearchPageResults",props:{query:{defaultValue:null,description:"",name:"query",required:!1,type:{name:"SearchQuery"}},setQuery:{defaultValue:null,description:"",name:"setQuery",required:!1,type:{name:"(newQuery: SearchQuery) => void"}}}}}catch{}function v(t){const{children:p,routerBaseName:r="/SearchV2:default",useMemoryRouter:a=!1}=t,n=h.useMemo(()=>[{path:"/",element:e.jsx(e.Fragment,{children:p})}],[p,a]),i=h.useMemo(()=>a?oe(n,{basename:r}):se(n,{basename:r}),[a,n,r]);return a?e.jsx(ae,{router:i}):e.jsx(ne,{router:i})}try{v.displayName="SynapseSearchPageRouter",v.__docgenInfo={description:"",displayName:"SynapseSearchPageRouter",props:{routerBaseName:{defaultValue:null,description:"",name:"routerBaseName",required:!1,type:{name:"string"}},useMemoryRouter:{defaultValue:null,description:"",name:"useMemoryRouter",required:!1,type:{name:"boolean"}}}}}catch{}function _e(){const[t,p]=ie(),r=t.get(w)||"";let a={};try{a=r?JSON.parse(r):{}}catch(o){console.error("Error parsing search query from URL:",o)}const n={...P,...a},i=o=>{p(c=>(o&&o.queryTerm&&o.queryTerm.length>0?c.set(w,JSON.stringify(o)):c.delete(w),c))};return e.jsx(E,{query:n,setQuery:i})}function Y(t){return e.jsx(v,{...t,children:e.jsx(_e,{})})}try{Y.displayName="SynapseSearchPage",Y.__docgenInfo={description:"",displayName:"SynapseSearchPage",props:{routerBaseName:{defaultValue:null,description:"",name:"routerBaseName",required:!1,type:{name:"string"}},useMemoryRouter:{defaultValue:null,description:"",name:"useMemoryRouter",required:!1,type:{name:"boolean"}}}}}catch{}const _t={title:"Components/SynapseSearch/SynapseSearchPage",component:Y,parameters:{stack:"production",requireLogin:!1},args:{useMemoryRouter:!0,routerBaseName:"/"}},M={};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:"{} satisfies Story",...M.parameters?.docs?.source}}};const jt=["Page"];export{M as Page,jt as __namedExportsOrder,_t as default};
