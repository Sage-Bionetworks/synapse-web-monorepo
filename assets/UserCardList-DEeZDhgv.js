import{j as l}from"./jsx-runtime-Du8NFWEI.js";import{R as p}from"./index-Dl6G-zuu.js";import{g as f,a as d}from"./UserBadge-BHTGGiBp.js";import{M as R}from"./SynapseConstants-BVYQRCsB.js";import{C as h}from"./index-S3N2_v0E.js";import{w as y}from"./without-CoE-JBMm.js";class c extends p.Component{constructor(e){super(e),this.state={userProfileMap:{}},this.update=this.update.bind(this)}componentDidMount(){const{list:e}=this.props;this.update(e)}componentDidUpdate(e){const s=e.list,i=y(this.props.list.filter(a=>a),...s);i.length>0&&this.update(i)}update(e){f(e.filter(s=>!!s)).then(s=>{const i={};s.list.forEach(a=>{const{ownerId:n}=a;i[n]=a}),this.setState({userProfileMap:{...this.state.userProfileMap,...i}})}).catch(s=>{console.error("Error on batch call =",s)})}manuallyExtractData(e){const s=e.queryResult.queryResults.headers.findIndex(t=>t.name==="firstName"),i=e.queryResult.queryResults.headers.findIndex(t=>t.name==="lastName"),a=e.queryResult.queryResults.headers.findIndex(t=>t.name==="institution"),n=e.queryResult.queryResults.headers.findIndex(t=>t.columnType===h.USERID);return e.queryResult.queryResults.rows.filter(t=>!t.values[n]).map(t=>{const r=t.values;return{firstName:r[s]??"",lastName:r[i]??"",company:r[a]??void 0,ownerId:null,userName:r[s]?r[s][0]??"":""}})}render(){const{size:e=R,data:s,list:i}=this.props,{userProfileMap:a={}}=this.state,n=s&&this.manuallyExtractData(s);let u=0;return l.jsx("div",{className:"SRC-card-grid-row",children:i.map(t=>{const r=t!=null?a[t]:null;if(r)return l.jsx("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:l.jsx(d,{size:e,preSignedURL:r.clientPreSignedURL,userProfile:r})},JSON.stringify(r));const o=n&&n[u];return o?(u+=1,l.jsx("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:l.jsx(d,{disableLink:!0,hideEmail:!0,size:e,userProfile:o})},JSON.stringify(o))):!1})})}}try{c.displayName="UserCardList",c.__docgenInfo={description:"",displayName:"UserCardList",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"(string | null)[]"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"QueryResultBundle"}}}}}catch{}export{c as U};
