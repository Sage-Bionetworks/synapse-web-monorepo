import{j,b$ as fr,V as yr,am as gr,r as we,dG as Fe,d4 as $r,di as Se,d0 as Oe,ct as wr,cu as jr,ay as kr,dH as br}from"./iframe-DOA--ypP.js";import{l as vr}from"./useEntity-CbdSqMq0.js";import{u as Ar,b as Ir,a as Er}from"./useSchema-CrR7_2-L.js";import{g as It}from"./index-Chi_LkuB.js";import"./SkeletonButton-SLwBY3oR.js";import"./SkeletonInlineBlock-BSyES9P5.js";import{S as xr}from"./SkeletonTable-BN8TQIoy.js";import"./SkeletonParagraph-CKHoRTTC.js";function De(e){const{annotationKey:t,title:r,description:n}=e;return r==t&&!n?t:j.jsx(fr,{placement:"left",title:j.jsxs(j.Fragment,{children:[r!=t&&j.jsx("p",{children:j.jsxs("strong",{children:["Annotation Key: ",t]})}),j.jsx("p",{children:n})]}),children:j.jsx(yr,{component:"span",sx:o=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:"15%",textDecorationColor:o.palette.secondary.main,textUnderlineOffset:"4px",cursor:"pointer"}),children:r})})}try{De.displayName="EntityAnnotationKey",De.__docgenInfo={description:"A component used to display an Entity annotation key.",displayName:"EntityAnnotationKey",props:{annotationKey:{defaultValue:null,description:"The key of the annotation",name:"annotationKey",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"An optional title of the annotation",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"An optional",name:"description",required:!1,type:{name:"string"}}}}}catch{}function Sr(e){if(!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return!1;const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e}const je="[a-fA-F0-9]",re="[a-zA-Z0-9-._~]",D="[!$&'()*+,;=]",Z=`%${je}${je}`,fe="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",ze=`${fe}\\.${fe}\\.${fe}\\.${fe}`,w=`${je}{1,4}`,z=`(?:${w}:${w}|${ze})`,Or=`(?:(?:${w}:){6}${z}|::(?:${w}:){5}${z}|(?:${w})?::(?:${w}:){4}${z}|(?:(?:${w}:){0,1}${w})?::(?:${w}:){3}${z}|(?:(?:${w}:){0,2}${w})?::(?:${w}:){2}${z}|(?:(?:${w}:){0,3}${w})?::(?:${w}:){1}${z}|(?:(?:${w}:){0,4}${w})?::${z}|(?:(?:${w}:){0,5}${w})?::${w}|(?:(?:${w}:){0,6}${w})?::)`,Pr=`v${je}+\\.(?:${re}|${D}|:)+`,Et=`\\[(?:${Or}|${Pr})\\]`,ne="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",xt=":(?<port>\\d*)",Rr=`(?:${re}|${Z}|${D})*?`,_r=`(?<host>${Et}|${ze}|${Rr})`,Tr=`(?<userinfo>(?:${re}|${Z}|${D}|:)*)`,Be=`(?:${re}|${Z}|${D}|:|@)`,St=`${Be}*?`,Ot=`(?:/${St})*`,Ge=`(?<authority>(?:${Tr}@)?${_r}(?:${xt})?)`,Je=`(?<path>${Ot})`,Ze=`(?<path2>(?!//)${St}${Ot})`,We=`(?:\\?(?<query>(?:${Be}|/|\\?)*))?`,Pt=`(?:#(?<fragment>(?:${Be}|/|\\?)*))?`,Nr=`^${ne}:(?://${Ge}${Je}|${Ze})${We}${Pt}$`,Fr=`^(?:${ne}:|)(?://${Ge}${Je}|${Ze})${We}${Pt}$`,Dr=`^${ne}:(?://${Ge}${Je}|${Ze})${We}$`,le="[a-zA-Z0-9\\-._~\\u{A0}-\\u{D7FF}\\u{F900}-\\u{FDCF}\\u{FDF0}-\\u{FFEF}\\u{10000}-\\u{1FFFD}\\u{20000}-\\u{2FFFD}\\u{30000}-\\u{3FFFD}\\u{40000}-\\u{4FFFD}\\u{50000}-\\u{5FFFD}\\u{60000}-\\u{6FFFD}\\u{70000}-\\u{7FFFD}\\u{80000}-\\u{8FFFD}\\u{90000}-\\u{9FFFD}\\u{A0000}-\\u{AFFFD}\\u{B0000}-\\u{BFFFD}\\u{C0000}-\\u{CFFFD}\\u{D0000}-\\u{DFFFD}\\u{E1000}-\\u{EFFFD}]",Ur="[\\u{E000}-\\u{F8FF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}]",Mr=`(?:${le}|${Z}|${D})*?`,qr=`(?<host>${Et}|${ze}|${Mr})`,Vr=`(?<userinfo>(?:${le}|${Z}|${D}|:)*)`,Xe=`(?:${le}|${Z}|${D}|:|@)`,Rt=`${Xe}*?`,_t=`(?:/${Rt})*`,He=`(?<authority>(?:${Vr}@)?${qr}(?:${xt})?)`,Qe=`(?<path>${_t})`,Ye=`(?<path2>(?!//)${Rt}${_t})`,et=`(?:\\?(?<query>(?:${Xe}|${Ur}|/|\\?)*))?`,Tt=`(?:#(?<fragment>(?:${Xe}|/|\\?)*))?`,Nt=`^${ne}:(?://${He}${Qe}|${Ye})${et}${Tt}$`,Ft=`^(?:${ne}:|)(?://${He}${Qe}|${Ye})${et}${Tt}$`,Dt=`^${ne}:(?://${He}${Qe}|${Ye})${et}$`,Cr=e=>(t,r)=>{const n=e.parseReference(t);if(n.scheme===void 0){const o=e.parseAbsolute(r);n.scheme=o.scheme,n.authority===void 0&&(n.authority=o.authority,n.path===""?(n.path=o.path,n.query??=o.query):n.path.startsWith("/")||(n.path=Lr(n.path,o)))}return Ut(e,n)},Lr=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const r=t.path.lastIndexOf("/");return r===-1?e:t.path.slice(0,r+1)+e}},Kr=/^\.?\.\/|^\.\.?$/,zr=/^\/\.(?:\/|$)/,Br=/^\/\.\.(?:\/|$)/,Gr=e=>{let t="";for(;e.length>0;)if(Kr.test(e))e=pt(e);else if(zr.test(e))e=dt(e);else if(Br.test(e))e=dt(e),t=Jr(t);else{const r=Zr(e);e=pt(e),t+=r}return t},pt=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},dt=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},Jr=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},Zr=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},Ut=(e,t)=>{let r=t.scheme.toLowerCase()+":";return r+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),r+=e.normalizePath(t.path),r+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),r+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),r},Mt=new RegExp(Z,"g"),qt=e=>t=>{const r=parseInt(t.slice(1),16),n=String.fromCharCode(r);return e(n)?n:t.toUpperCase()};RegExp.prototype.test.bind(new RegExp(`${re}|${D}|[:@]`));const Wr=RegExp.prototype.test.bind(new RegExp(`${le}|${D}|[:@]`,"u")),Xr=e=>t=>Gr(t).replaceAll(Mt,qt(e));RegExp.prototype.test.bind(new RegExp(`${re}|${D}|[:@/?]`));const mt=RegExp.prototype.test.bind(new RegExp(`${le}|${D}|[:@/?]`,"u")),lt=e=>t=>t.replaceAll(Mt,qt(e));RegExp.prototype.test.bind(new RegExp(Nr));RegExp.prototype.test.bind(new RegExp(Fr));RegExp.prototype.test.bind(new RegExp(Dr));RegExp.prototype.test.bind(new RegExp(Nt,"u"));RegExp.prototype.test.bind(new RegExp(Ft,"u"));RegExp.prototype.test.bind(new RegExp(Dt,"u"));const tt=(e,t)=>r=>{const n=e.exec(r);if(n===null)throw Error(`Invalid ${t}: ${r}`);const o=n.groups;return o.authority===void 0&&(o.path=o.path2),delete o.path2,o},rt=tt(new RegExp(Nt,"u"),"IRI"),Vt=tt(new RegExp(Ft,"u"),"IRI-reference"),Hr=tt(new RegExp(Dt,"u"),"absolute-IRI"),Ct={iri:{parseAbsolute:Hr,parseReference:Vt,parse:rt,normalizePath:Xr(Wr),normalizeQuery:lt(mt),normalizeFragment:lt(mt)}},Qr=e=>t=>{const r=e.parse(t);return delete r.fragment,Ut(e,r)},C=Qr(Ct.iri),ce=Cr(Ct.iri),Yr="",ke=function*(e){if(e.length>0&&!e.startsWith("/"))throw Error("Invalid JSON Pointer");let t=1,r=0;for(;r<e.length;){const n=e.indexOf("/",t);r=n===-1?e.length:n;const o=e.slice(t,r);t=r+1,yield rn(o)}},en=(e,t=void 0)=>{if(t===void 0){const r=[...ke(e)];return n=>ut(r,n)}else return ut(ke(e),t)},ut=(e,t)=>{let r=Yr;for(const n of e)t=on(t,n,r),r=J(n,r);return t},J=(e,t)=>t+"/"+tn(e),tn=e=>e.toString().replace(/~/g,"~0").replace(/\//g,"~1"),rn=e=>e.toString().replace(/~1/g,"/").replace(/~0/g,"~"),nn=(e,t)=>Array.isArray(e)?t==="-"?e.length:parseInt(t,10):t,on=(e,t,r="")=>{if(e===void 0)throw TypeError(`Value at '${r}' is undefined and does not have property '${t}'`);if(e===null)throw TypeError(`Value at '${r}' is null and does not have property '${t}'`);if(sn(e))throw TypeError(`Value at '${r}' is a ${typeof e} and does not have property '${t}'`);{const n=nn(e,t);if(Object.hasOwn(e,n))return e[n]}},sn=e=>e===null||typeof e!="object",Lt=e=>{const t=typeof e;switch(t){case"number":case"string":case"boolean":case"undefined":return t;case"object":if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype)return"object";default:{const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JSON compatible type: ${r}`)}}},nt=e=>{const t=e.indexOf("#"),r=t===-1?e.length:t;return e.slice(0,r)},Kt=e=>decodeURIComponent(Vt(e).fragment||""),be={},zt=e=>{if(e.indexOf("#")!==-1){const t=nt(e);return{...be[t],id:e}}return be[e]},an=(e,t)=>{const r=Bt(e,t);if(!r)throw Error(`Encountered unknown keyword '${e}'`);const n=zt(r);if(!n)throw Error(`Encountered unsupported keyword ${e}. You can provide an implementation for the '${r}' keyword using the 'addKeyword' function.`);return n},c=e=>{be[e.id]=e},ge={},q=(e,t)=>{ge[e]=t},Q={},Bt=(e,t)=>{const r=Gt(t);return r.keywords[e]??(r.allowUnknownKeywords||e.startsWith("x-")?`https://json-schema.org/keyword/unknown#${e}`:void 0)},b=(e,t)=>{const r=Gt(e);for(const n in r.keywords)if(r.keywords[n]===t)return n},Gt=e=>{if(!(e in Q))throw Error(`Encountered unknown dialect '${e}'`);return Q[e]},ot=(e,t,r=!1,n=!0)=>{Q[e]={keywords:{},allowUnknownKeywords:r,persistentDialects:Q[e]?.persistentDialects||n};for(const o in t)if(o in ge)for(const s in ge[o]){let i=ge[o][s];!(i in be)&&!t[o]&&(i=`https://json-schema.org/keyword/unknown#${s}`),Q[e].keywords[s]=i}else if(!r||t[o])throw delete Q[e],Error(`Unrecognized vocabulary: ${o}. You can define this vocabulary with the 'defineVocabulary' function.`)};var ye={};var ht;function cn(){if(ht)return ye;ht=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,r=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,o=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;ye.format=i,ye.parse=a;function i(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var y=m.parameters,k=m.type;if(!k||!s.test(k))throw new TypeError("invalid type");var g=k;if(y&&typeof y=="object")for(var A,F=Object.keys(y).sort(),I=0;I<F.length;I++){if(A=F[I],!r.test(A))throw new TypeError("invalid parameter name");g+="; "+A+"="+f(y[A])}return g}function a(m){if(!m)throw new TypeError("argument string is required");var y=typeof m=="object"?d(m):m;if(typeof y!="string")throw new TypeError("argument string is required to be a string");var k=y.indexOf(";"),g=k!==-1?y.slice(0,k).trim():y.trim();if(!s.test(g))throw new TypeError("invalid media type");var A=new h(g.toLowerCase());if(k!==-1){var F,I,S;for(e.lastIndex=k;I=e.exec(y);){if(I.index!==k)throw new TypeError("invalid parameter format");k+=I[0].length,F=I[1].toLowerCase(),S=I[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(n,"$1"))),A.parameters[F]=S}if(k!==y.length)throw new TypeError("invalid parameter format")}return A}function d(m){var y;if(typeof m.getHeader=="function"?y=m.getHeader("content-type"):typeof m.headers=="object"&&(y=m.headers&&m.headers["content-type"]),typeof y!="string")throw new TypeError("content-type header is missing from object");return y}function f(m){var y=String(m);if(r.test(y))return y;if(y.length>0&&!t.test(y))throw new TypeError("invalid parameter value");return'"'+y.replace(o,"\\$1")+'"'}function h(m){this.parameters=Object.create(null),this.type=m}return ye}var Jt=cn();const pn=It(Jt),pe={},Zt=(e,t)=>{pe[e]=t},dn=e=>{const t=e.headers.get("content-type");if(t===null)throw new yn("The media type of the response could not be determined. Make sure the response includes a 'Content-Type' header.",{cause:e});const r=Jt.parse(t);for(const n in pe)if(un(n,r.type))return pe[n].parse(e);throw new fn(r.type,`'${r.type}' is not supported. Use the 'addMediaTypePlugin' function to add support for this media type.`,{cause:e})},mn="A-Za-z",Pe=`[!#$%&'*\\-_.^\`|~\\d${mn}]+`,ln=`(?<type>${Pe})/(?<subType>${Pe}(?:\\+(?<suffix>${Pe}))?)`,ft=new RegExp(ln),un=(e,t)=>{if(e===t)return!0;const r=ft.exec(e)?.groups;if(!r)throw Error(`Unable to parse media-range: ${e}`);const n=ft.exec(t)?.groups;if(!n)throw Error(`Unable to parse media-type: ${t}`);return(r.type===n.type||r.type==="*")&&(r.subType===n.subType||r.subType==="*"||r.subType===n.suffix)},hn=()=>{let e="";for(const t in pe)e=yt(e,t,pe[t].quality);return yt(e,"*/*","0.001")},yt=(e,t,r)=>(e.length>0&&(e+=", "),e+=t,r&&(e+=`; q=${r}`),e);class fn extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.mediaType=t}}class yn extends Error{constructor(t=void 0){super(t),this.name=this.constructor.name}}const gn=(e,t=void 0)=>JSON.parse(e,(r,n)=>{const o=n!==null&&typeof n.$ref=="string"?new G(n.$ref):n;return t?t(r,o):o});class G{#e;#t;constructor(t,r=void 0){this.#e=t,this.#t=r??{$ref:t}}get href(){return this.#e}toJSON(){return this.#t}}const Wt=e=>{const t=typeof e;switch(t){case"bigint":return"number";case"number":case"string":case"boolean":case"undefined":return t;case"object":if(e instanceof G)return"reference";if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)return"object";default:{const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JRef compatible type: ${r}`)}}},$n={parse:async e=>({baseUri:e.url,root:gn(await e.text()),anchorLocation:wn}),fileMatcher:e=>/[^/]\.jref$/.test(e)},wn=e=>decodeURI(e||""),Ue={},Xt=(e,t)=>{Ue[e]=t},jn=(e,t)=>{e=ce(e,t);const{scheme:r}=rt(e);if(!(r in Ue))throw new kn(r,`The '${r}:' URI scheme is not supported. Use the 'addUriSchemePlugin' function to add support for '${r}:' URIs.`);return Ue[r].retrieve(e,t)};class kn extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.scheme=t}}const bn=new Set([200,203]),vn=async e=>{const t=await fetch(e,{headers:{Accept:hn()}});if(t.status>=400)throw new gt(t,`Failed to retrieve '${e}'`);if(!bn.has(t.status))throw new gt(t,"Unsupported HTTP response status code");return t},Ht={retrieve:vn};class gt extends Error{constructor(t,r=void 0){super(`${t.status} ${t.statusText}${r?` -- ${r}`:""}`),this.name=this.constructor.name,this.response=t}}var Qt=An;function An(e,t){return function r(){t==null&&(t=e.length);var n=[].slice.call(arguments);return n.length>=t?e.apply(this,n):function(){return r.apply(this,n.concat([].slice.call(arguments)))}}}const In=()=>globalThis.document?.location?.toString()??"",st=async(e,t={_cache:{}})=>{const r=t.document?.baseUri??In();e=ce(e,r);const n=C(e),{fragment:o}=rt(e),s=t._cache[n]??t.document?.embedded?.[n];if(s)t.document=s,t.uri=e,t.cursor=t.document.anchorLocation(o);else{try{const i=await jn(e,r);t.document=await dn(i),t.uri=i.url+(o===void 0?"":`#${o}`),t.cursor=t.document.anchorLocation(o)}catch(i){const a=t.uri?` Referenced from '${t.uri}'.`:"";throw new xn(`Unable to load resource '${e}'.${a}`,i)}t._cache[n]=t.document}return t._value=en(t.cursor,t.document.root),Yt(t)},Yt=e=>Wt(l(e))==="reference"?st(l(e).href,e):e,l=e=>e._value,T=e=>Wt(e._value),er=(e,t)=>e in t._value,it=e=>e._value.length,R=Qt((e,t)=>Yt({...t,cursor:J(`${e}`,t.cursor),_value:t._value[e]})),V=async function*(e){for(let t=0;t<l(e).length;t++)yield R(t,e)},Me=function*(e){for(const t in l(e))yield t},En=async function*(e){for(const t in l(e))yield R(t,e)},L=async function*(e){for(const t in l(e))yield[t,await R(t,e)]};class xn extends Error{constructor(t,r){super(t,{cause:r}),this.name=this.constructor.name}}Zt("application/reference+json",$n);Xt("http",Ht);Xt("https",Ht);const Sn={parse:async e=>{const t=pn.parse(e.headers.get("content-type")??""),r=t.parameters.schema??t.parameters.profile;return ve(await e.json(),e.url,r)},fileMatcher:async e=>/(\.|\/)schema\.json$/.test(e)},de={},tr=async(e,t=void 0)=>{t||(t={_cache:{}});for(const n in de)n in t._cache||(t._cache[n]=de[n]);const r=await st(e,{...t});if(typeof r.document.dialectId!="string")throw Error(`The document at ${r.document.baseUri} is not a schema.`);return r},U=(e,t,r)=>{e=structuredClone(e);const n=ve(e,t,r);if(n.baseUri in de)throw Error(`A schema has already been registered for '${n.baseUri}. You can use 'unregisterSchema' to remove the old schema before registering the new one.`);if(n.baseUri.startsWith("file:"))throw Error(`Registering a schema with a 'file:' URI scheme is not allowed: ${n.baseUri}`);de[t?C(t):n.baseUri]=n},On=e=>e in de,ve=(e,t,r,n={})=>{if(typeof e.$schema=="string"&&(r=e.$schema,delete e.$schema),!r)throw Error("Unable to determine a dialect for the schema. The dialect can be declared in a number of ways, but the recommended way is to use the '$schema' keyword in your schema.");r=C(r);const o=b(r,"https://json-schema.org/keyword/draft-04/id"),s=b(r,"https://json-schema.org/keyword/id")||o;if(!e[s]&&!t)throw Error(`Unable to determine an identifier for the schema. Use the '${s}' keyword or pass a retrievalUri when loading the schema.`);const i=ce(e[s]??"",t??"");t=C(i),o&&i.length>t.length?e[s]="#"+Kt(i):delete e[s];const a=b(r,"https://json-schema.org/keyword/vocabulary");if(Lt(e[a])==="object"){const m=e[a]["https://json-schema.org/draft/2019-09/vocab/core"]||e[a]["https://json-schema.org/draft/2020-12/vocab/core"];ot(t,e[a],m,!1),delete e[a]}const d={"":""},f={},h=b(r,"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor");return e[h]===!0&&(f[""]=`${t}#`),delete e[h],n[t]={baseUri:t,dialectId:r,root:qe(e,t,r,"",n,d,f),anchorLocation:m=>{if(m===void 0)return"";if(m=decodeURI(m),m[0]==="/")return m;if(m in d)return d[m];throw Error(`No such anchor '${t}#${encodeURI(m)}'`)},anchors:d,dynamicAnchors:f,embedded:n},n[t]},qe=(e,t,r,n,o,s,i)=>{if(Lt(e)==="object"){const a=typeof e.$schema=="string"?C(e.$schema):r,d=b(a,"https://json-schema.org/keyword/id");if(typeof e[d]=="string"){const g=C(ce(e[d],t));return e[d]=g,o[g]=ve(e,g,a,o),new G(g,{})}const f=b(a,"https://json-schema.org/keyword/draft-04/id");if(typeof e[f]=="string")if(e[f][0]==="#"){const g=decodeURIComponent(e[f].slice(1));s[g]=n,delete e[f]}else{const g=C(ce(e[f],t));return e[f]=g,o[g]=ve(e,g,a,o),new G(g,{})}const h=b(r,"https://json-schema.org/keyword/draft-04/ref");if(typeof e[h]=="string")return new G(e[h],e);const m=b(r,"https://json-schema.org/keyword/anchor");typeof e[m]=="string"&&(s[e[m]]=n,delete e[m]);const y=b(r,"https://json-schema.org/keyword/dynamicAnchor");typeof e[y]=="string"&&(i[e[y]]=`${t}#${encodeURI(n)}`,delete e[y]);const k=b(r,"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor");typeof e[k]=="string"&&(i[e[k]]=`${t}#${encodeURI(n)}`,s[e[k]]=n,delete e[k]);for(const g in e){const A=b(r,"https://json-schema.org/keyword/ref");g===A&&typeof e[g]=="string"?e[g]=new G(e[g],e[g]):e[g]=qe(e[g],t,r,J(g,n),o,s,i)}}else if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=qe(e[a],t,r,J(a,n),o,s,i);return e},Ae=e=>`${e.document.baseUri}#${encodeURI(e.cursor)}`,oe=(e=>(...t)=>{const r=e.length===1?e(t[0]):e(t[0],t[1]),n=t[e.length];return n===void 0?r:r(n)}),Pn=oe(e=>function*(t){for(const r of t)yield e(r)}),E=oe(e=>async function*(t){for await(const r of t)yield e(r)}),rr=oe(e=>function*(t){let r=0;for(const n of t)r++>=e&&(yield n)}),Rn=e=>{const r=sr(e).next();return r.done?void 0:r.value},$t=function*(){},nr=function*(e,t){const r=sr(t);for(const n of e)yield[n,r.next().value]},_n=function*(...e){for(const t of e)yield*t},or=oe(((e,t)=>r=>{for(const n of r)t=e(t,n);return t})),Tn=oe(e=>t=>{for(const r of t)if(e(r))return!0;return!1}),_=async e=>{const t=[];for await(const r of e)t.push(r);return t},Ve=async e=>{const t=Object.create(null);for await(const[r,n]of e)t[r]=n;return t},Nn=oe(e=>t=>{let r=Rn(t)??"";for(const n of t)r+=e+n;return r}),sr=e=>{if(typeof e?.[Symbol.iterator]=="function")return e[Symbol.iterator]();throw TypeError("`iter` is not iterable")},x=((e,...t)=>or((r,n)=>n(r),e,t)),Y=(e,t="",r="",n=void 0)=>{const o=typeof e;switch(o){case"number":case"string":case"boolean":return ae(t,r,e,o,[],n);case"object":if(e===null)return ae(t,r,e,"null",[],n);if(Array.isArray(e)){const s=ae(t,r,e,"array",[],n);return s.children=e.map((i,a)=>Y(i,t,J(a,r),s)),s}else if(Object.getPrototypeOf(e)===Object.prototype){const s=ae(t,r,e,"object",[],n);return s.children=Object.entries(e).map(i=>{const a=J(i[0],r),d=ae(t,a,void 0,"property",[],s);return d.children[0]=Y(i[0],t,"*"+a,d),d.children[1]=Y(i[1],t,a,d),d}),s}else if(e instanceof G)return Y(e.toJSON(),t,r,n);default:{const s=o==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":o;throw Error(`Not a JSON compatible type: ${s}`)}}},ae=(e,t,r,n,o,s)=>{const i={baseUri:e?C(e):"",pointer:t,value:r,type:n,children:o,parent:s,annotations:{}};return i.root=s?.root??i,i},Fn=(e,t)=>{const r=nt(e);if(r!==t.baseUri&&r!=="")throw Error(`Reference '${e}' is not local to '${t.baseUri}'`);let n=!1,o=Kt(e);o.startsWith("*")&&(o=o.slice(1),n=!0);const s=or((i,a)=>(a=a==="-"&&u(i)==="array"?Ee(i):a,Dn(a,i)),t.root,ke(o));return n?s.parent.children[0]:s},me=e=>`${e.baseUri}#${encodeURI(e.pointer)}`,v=e=>e.value,u=e=>e.type,te=(e,t)=>e in t.value,Dn=(e,t)=>{switch(t.type){case"object":return t.children.find(n=>v(n.children[0])===e)?.children[1];case"array":{const r=parseInt(e,10);return t.children[r]}default:return}},M=function*(e){e.type==="array"&&(yield*e.children)},at=function*(e){if(e.type==="object")for(const t of e.children)yield t.children[0]},ue=function*(e){if(e.type==="object")for(const t of e.children)t.children.length===2&&(yield t.children)},Ee=e=>{if(e.type==="array")return e.children.length},ee={};let Un=0;const Mn=(e,t)=>{e in ee||(ee[e]={});const r=`pubsub_subscription_${Un++}`;return ee[e][r]=t,r},qn=async(e,t)=>{const r=[];for(const n in ee)if(n===e||e.startsWith(`${n}.`))for(const o in ee[n])r.push(ee[e][o](e,t));await Promise.all(r)};let ir;const Vn=()=>ir,Cn=e=>{ir=e};class Ln extends Error{constructor(t){super("Invalid Schema"),this.name=this.constructor.name,this.output=t}}const Kn="https://json-schema.org/evaluation/validate",zn=async(e,t)=>{await qn("validate.metaValidate",e),e.document.baseUri in t.metaData||(t.metaData[e.document.baseUri]={dynamicAnchors:e.document.dynamicAnchors});const r=Ae(e);if(!(r in t)){t[r]=!1;const n=l(e);if(!["object","boolean"].includes(typeof n))throw Error(`No schema found at '${r}'`);t[r]=typeof n=="boolean"?n:await x(L(e),E(async([o,s])=>{const i=an(o,e.document.dialectId);i.plugin&&t.plugins.add(i.plugin);const a=await i.compile(s,t,e);return[i.id,J(o,Ae(e)),a]}),_)}return r},Bn=(e,t,r)=>{let n=!0;for(const o of r.plugins)o.beforeSchema?.(e,t,r);if(typeof r.ast[e]=="boolean")n=r.ast[e];else for(const o of r.ast[e]){const[s,,i]=o,a=zt(s),d={ast:r.ast,plugins:r.plugins};for(const h of r.plugins)h.beforeKeyword?.(o,t,d,r,a);const f=a.interpret(i,t,d);f||(n=!1);for(const h of r.plugins)h.afterKeyword?.(o,t,d,f,r,a)}for(const o of r.plugins)o.afterSchema?.(e,t,r,n);return n},p={id:Kn,compile:zn,interpret:Bn};class Gn{beforeSchema(t,r,n){n.errors??=[]}beforeKeyword(t,r,n){n.errors=[]}afterKeyword(t,r,n,o,s,i){if(!o){if(!i.simpleApplicator){const[a,d]=t;s.errors.push({keyword:a,absoluteKeywordLocation:d,instanceLocation:me(r)})}s.errors.push(...n.errors)}}afterSchema(t,r,n,o){typeof n.ast[t]=="boolean"&&!o&&n.errors.push({keyword:p.id,absoluteKeywordLocation:t,instanceLocation:me(r)}),this.errors=n.errors}}class Jn{beforeSchema(t,r,n){n.errors??=[]}beforeKeyword(t,r,n){n.errors=[]}afterKeyword(t,r,n,o,s){if(!o){const[i,a]=t,d={keyword:i,absoluteKeywordLocation:a,instanceLocation:me(r)};s.errors.push(d),n.errors.length>0&&(d.errors=n.errors)}}afterSchema(t,r,n,o){typeof n.ast[t]=="boolean"&&!o&&n.errors.push({keyword:p.id,absoluteKeywordLocation:t,instanceLocation:me(r)}),this.errors=n.errors}}const $e="FLAG",Ce="BASIC",Zn="DETAILED";Cn($e);const ar=async e=>{const t={metaData:{},plugins:new Set},r=await p.compile(e,t);return{ast:t,schemaUri:r}},cr=Qt(({ast:e,schemaUri:t},r,n=$e)=>{const o=typeof n=="string"?n:n.outputFormat??$e,s=n.plugins??[],i={ast:e,plugins:[...e.plugins,...s]};let a;switch(o){case $e:break;case Ce:a=new Gn,i.plugins.push(a);break;case Zn:a=new Jn,i.plugins.push(a);break;default:throw Error(`Unsupported output format '${o}'`)}const d=p.interpret(t,r,i);return!d&&a?{valid:d,errors:a.errors}:{valid:d}}),Re={};Mn("validate.metaValidate",async(e,t)=>{if(!t.document.validated){if(t.document.validated=!0,!(t.document.dialectId in Re)){const o=await tr(t.document.dialectId,t),s=await ar(o);Re[t.document.dialectId]=cr(s)}const r=Y(t.document.root,t.document.baseUri),n=Re[t.document.dialectId](r,Vn());if(!n.valid)throw new Ln(n)}});class Wn{beforeSchema(t,r,n){n.annotations??=[],n.schemaAnnotations=[]}beforeKeyword(t,r,n){n.annotations=[]}afterKeyword(t,r,n,o,s,i){if(o){const[a,d,f]=t,h=i.annotation?.(f,r,n);h!==void 0&&s.schemaAnnotations.push({keyword:a,absoluteKeywordLocation:d,instanceLocation:me(r),annotation:h}),s.schemaAnnotations.push(...n.annotations)}}afterSchema(t,r,n,o){o&&n.annotations.push(...n.schemaAnnotations),this.annotations=n.annotations}}const Xn="https://json-schema.org/keyword/additionalProperties",Hn=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/properties"),o=await R(n,r),s=T(o)==="object"?Pn(h=>"^"+Qn(h)+"$",Me(o)):$t(),i=b(e.document.dialectId,"https://json-schema.org/keyword/patternProperties"),a=await R(i,r),d=T(a)==="object"?Me(a):$t(),f=x(_n(s,d),Nn("|"))||"(?!)";return[new RegExp(f,"u"),await p.compile(e,t)]},Qn=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Yn=([e,t],r,n)=>{if(u(r)!=="object")return!0;let o=!0;for(const[s,i]of ue(r)){const a=v(s);e.test(a)||(p.interpret(t,i,n)||(o=!1),n.evaluatedProperties?.add(a))}return o},eo=!0,to={id:Xn,compile:Hn,interpret:Yn,simpleApplicator:eo},ro="https://json-schema.org/keyword/allOf",no=(e,t)=>x(V(e),E(r=>p.compile(r,t)),_),oo=(e,t,r,n,o)=>{let s=!0;for(const i of e)p.interpret(i,t,r,n,o)||(s=!1);return s},so=!0,io={id:ro,compile:no,interpret:oo,simpleApplicator:so},ao={id:"https://json-schema.org/keyword/anchor"},co="https://json-schema.org/keyword/anyOf",po=(e,t)=>x(V(e),E(r=>p.compile(r,t)),_),mo=(e,t,r,n,o)=>e.filter(i=>p.interpret(i,t,r,n,o)).length>0,lo={id:co,compile:po,interpret:mo},uo="https://json-schema.org/keyword/conditional",ho=(e,t)=>x(V(e),pr,E(r=>p.compile(r,t)),_),fo=(e,t,r)=>{for(let n=0;n<e.length;n+=2){const o=p.interpret(e[n],t,r);if(n+1===e.length)return o;if(o)return p.interpret(e[n+1],t,r)}return!0},pr=async function*(e,t=1){for await(const r of e)t>0&&T(r)==="array"?yield*pr(V(r),t-1):yield r},yo={id:uo,compile:ho,interpret:fo};var _e,wt;function go(){return wt||(wt=1,_e={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify}),_e}var Te,jt;function B(){return jt||(jt=1,Te={isArray:Array.isArray,assign:Object.assign,isObject:e=>typeof e=="object",isFunction:e=>typeof e=="function",isBoolean:e=>typeof e=="boolean",isRegex:e=>e instanceof RegExp,keys:Object.keys}),Te}var Ne,kt;function $o(){if(kt)return Ne;kt=1;const e=go(),t=B().isFunction,r=B().isBoolean,n=B().isObject,o=B().isArray,s=B().isRegex,i=B().assign,a=B().keys;function d(h){return h==null?h:s(h)?h.toString():h.toJSON?h.toJSON():h}function f(h,m){m=m||i({},e),t(m)&&(m={compare:m});const y=m.space||e.space,k=r(m.cycles)?m.cycles:e.cycles,g=m.replacer||e.replacer,A=m.stringify||e.stringify,F=m.compare&&(function(S){return function(W){return function(X,$){const P={key:X,value:W[X]},H={key:$,value:W[$]};return S(P,H)}}})(m.compare);k||A(h);const I=[];return(function S(W,X,$,P){const H=y?`
`+new Array(P+1).join(y):"",ur=y?": ":":";if($=d($),$=g.call(W,X,$),$!==void 0){if(!n($)||$===null)return A($);if(o($)){const se=[];for(let K=0;K<$.length;K++){const ie=S($,K,$[K],P+1)||A(null);se.push(H+y+ie)}return"["+se.join(",")+H+"]"}else{if(k){if(I.indexOf($)!==-1)return A("[Circular]");I.push($)}const se=a($).sort(F&&F($)),K=[];for(let ie=0;ie<se.length;ie++){const xe=se[ie],ct=S($,xe,$[xe],P+1);if(!ct)continue;const hr=A(xe)+ur+ct;K.push(H+y+hr)}return I.splice(I.indexOf($),1),"{"+K.join(",")+H+"}"}}})({"":h},"",h,0)}return Ne=f,Ne}var wo=$o();const he=It(wo),jo="https://json-schema.org/keyword/const",ko=e=>he(l(e)),bo=(e,t)=>he(v(t))===e,vo={id:jo,compile:ko,interpret:bo},Ao="https://json-schema.org/keyword/contains",Io=async(e,t,r)=>{const n=await p.compile(e,t),o=b(e.document.dialectId,"https://json-schema.org/keyword/minContains"),s=await R(o,r),i=T(s)==="number"?l(s):1,a=b(e.document.dialectId,"https://json-schema.org/keyword/maxContains"),d=await R(a,r),f=T(d)==="number"?l(d):Number.MAX_SAFE_INTEGER;return{contains:n,minContains:i,maxContains:f}},Eo=({contains:e,minContains:t,maxContains:r},n,o)=>{if(u(n)!=="array")return!0;let s=0,i=0;for(const a of M(n))p.interpret(e,a,o)&&(s++,o.evaluatedItems?.add(i)),i++;return s>=t&&s<=r},xo={id:Ao,compile:Io,interpret:Eo},So="https://json-schema.org/keyword/comment",Oo=()=>{},Po=()=>!0,Ro={id:So,compile:Oo,interpret:Po},_o="https://json-schema.org/keyword/contentEncoding",To=e=>l(e),No=()=>!0,Fo=(e,t)=>{if(u(t)==="string")return e},Do={id:_o,compile:To,interpret:No,annotation:Fo},Uo="https://json-schema.org/keyword/contentMediaType",Mo=e=>l(e),qo=()=>!0,Vo=(e,t)=>{if(u(t)==="string")return e},Co={id:Uo,compile:Mo,interpret:qo,annotation:Vo},Lo="https://json-schema.org/keyword/contentSchema",Ko=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/contentMediaType"),o=await R(n,r);if(l(o)!==void 0)return l(e)},zo=()=>!0,Bo=(e,t)=>{if(!(!e||u(t)!=="string"))return e},Go={id:Lo,compile:Ko,interpret:zo,annotation:Bo},Jo="https://json-schema.org/keyword/default",Zo=e=>l(e),Wo=()=>!0,Xo=e=>e,Ho={id:Jo,compile:Zo,interpret:Wo,annotation:Xo},Qo="https://json-schema.org/keyword/definitions",Yo=(e,t)=>x(En(e),E(r=>p.compile(r,t)),_),es=()=>!0,ts={id:Qo,compile:Yo,interpret:es},rs="https://json-schema.org/keyword/dependentRequired",ns=e=>x(L(e),E(([t,r])=>[t,l(r)]),_),os=(e,t)=>{if(u(t)!=="object")return!0;let r=!0;for(const[n,o]of e)te(n,t)&&!o.every(s=>te(s,t))&&(r=!1);return r},ss={id:rs,compile:ns,interpret:os},is="https://json-schema.org/keyword/dependentSchemas",as=(e,t)=>x(L(e),E(async([r,n])=>[r,await p.compile(n,t)]),_),cs=(e,t,r)=>{if(u(t)!=="object")return!0;let n=!0;for(const[o,s]of e)te(o,t)&&!p.interpret(s,t,r)&&(n=!1);return n},ps=!0,ds={id:is,compile:as,interpret:cs,simpleApplicator:ps},ms="https://json-schema.org/keyword/deprecated",ls=e=>l(e),us=()=>!0,hs=e=>e,fs={id:ms,compile:ls,interpret:us,annotation:hs},ys="https://json-schema.org/keyword/description",gs=e=>l(e),$s=()=>!0,ws=e=>e,js={id:ys,compile:gs,interpret:$s,annotation:ws},ks={id:"https://json-schema.org/keyword/dynamicAnchor"},bs="https://json-schema.org/keyword/dynamicRef",vs=async(e,t)=>{const r=l(e),n=await st(e.document.baseUri,e);return await p.compile(n,t),r},As=(e,t,r)=>{if(!(e in r.dynamicAnchors))throw Error(`No dynamic anchor found for "${e}"`);return p.interpret(r.dynamicAnchors[e],t,r)},Is=!0,Es={beforeSchema(e,t,r){r.dynamicAnchors={...r.ast.metaData[nt(e)].dynamicAnchors,...r.dynamicAnchors}},beforeKeyword(e,t,r,n){r.dynamicAnchors=n.dynamicAnchors}},xs={id:bs,compile:vs,interpret:As,simpleApplicator:Is,plugin:Es},Ss="https://json-schema.org/keyword/else",Os=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/if");if(er(n,r)){const o=await R(n,r);return[await p.compile(o,t),await p.compile(e,t)]}else return[]},Ps=([e,t],r,n)=>e===void 0||p.interpret(e,r,{...n,plugins:n.ast.plugins})||p.interpret(t,r,n),Rs=!0,_s={id:Ss,compile:Os,interpret:Ps,simpleApplicator:Rs},Ts="https://json-schema.org/keyword/enum",Ns=e=>x(V(e),E(l),E(he),_),Fs=(e,t)=>{const r=he(v(t));return e.some(n=>r===n)},Ds={id:Ts,compile:Ns,interpret:Fs},Us="https://json-schema.org/keyword/examples",Ms=e=>l(e),qs=()=>!0,Vs=e=>e,Cs={id:Us,compile:Ms,interpret:qs,annotation:Vs},Ls="https://json-schema.org/keyword/exclusiveMaximum",Ks=e=>l(e),zs=(e,t)=>u(t)!=="number"||v(t)<e,Bs={id:Ls,compile:Ks,interpret:zs},Gs="https://json-schema.org/keyword/exclusiveMinimum",Js=e=>l(e),Zs=(e,t)=>u(t)!=="number"||v(t)>e,Ws={id:Gs,compile:Js,interpret:Zs},Xs="https://json-schema.org/keyword/format",Hs=e=>l(e),Qs=()=>!0,Ys=e=>e,ei={id:Xs,compile:Hs,interpret:Qs,annotation:Ys},ti={id:"https://json-schema.org/keyword/id"},ri="https://json-schema.org/keyword/if",ni=(e,t)=>p.compile(e,t),oi=(e,t,r)=>(p.interpret(e,t,r),!0),si=!0,ii={id:ri,compile:ni,interpret:oi,simpleApplicator:si},ai=()=>{const e=N(!1),t=N(!0);return O(e,t),{start:e,end:t}},ci=e=>{const t=N(!1),r=N(!0);return hi(t,r,e),{start:t,end:r}},pi=(e,t)=>e===void 0?t:(O(e.end,t.start),e.end.isEnd=!1,{start:e.start,end:t.end}),di=(e,t)=>{const r=N(!1);O(r,e.start),O(r,t.start);const n=N(!0);return O(e.end,n),e.end.isEnd=!1,O(t.end,n),t.end.isEnd=!1,{start:r,end:n}},mi=e=>{const t=N(!1),r=N(!0);return O(t,r),O(t,e.start),O(e.end,r),O(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},li=e=>{const t=N(!1),r=N(!0);return O(t,r),O(t,e.start),O(e.end,r),e.end.isEnd=!1,{start:t,end:r}},ui=e=>{const t=N(!1),r=N(!0);return O(t,e.start),O(e.end,r),O(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},O=(e,t)=>{e.epsilonTransitions.push(t)},hi=(e,t,r)=>{e.transition[r]=t},N=e=>({isEnd:e,transition:{},epsilonTransitions:[]}),fi="https://json-schema.org/keyword/itemPattern",dr=async(e,t)=>{const r=[[]];let n=r[0];for await(const o of V(e))if(T(o)==="string"){const s=l(o);if(s==="*")n.push(mi(n.pop()));else if(s==="?")n.push(li(n.pop()));else if(s==="+")n.push(ui(n.pop()));else if(s==="|")n=[],r.push(n);else throw Error(`Unsupported pattern syntax: ${s}`)}else{const s=T(o)==="array"?dr(o,t):ci(await p.compile(o,t));n.push(await s)}return it(e)===0?ai():r.map(o=>o.reduce(pi)).reduce(di)},yi=(e,t,r)=>{if(u(t)!=="array")return!0;let n=[];Le(e.start,n,[]);for(const o of M(t)){const s=[];for(const i of n){const a=gi(i.transition,o,r);a&&Le(a,s,[])}n=s}return!!n.find(o=>o.isEnd)},Le=(e,t,r)=>{if(e.epsilonTransitions.length)for(const n of e.epsilonTransitions)r.find(o=>o===n)||(r.push(n),Le(n,t,r));else t.push(e)},gi=(e,t,r)=>{for(const n in e)if(p.interpret(n,t,r))return e[n]},$i={id:fi,compile:dr,interpret:yi},wi="https://json-schema.org/keyword/items",ji=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/prefixItems"),o=await R(n,r);return[T(o)==="array"?it(o):0,await p.compile(e,t)]},ki=([e,t],r,n)=>{if(u(r)!=="array")return!0;let o=!0,s=e;for(const i of rr(e,M(r)))p.interpret(t,i,n)||(o=!1),n.evaluatedItems?.add(s),s++;return o},bi=!0,vi={id:wi,compile:ji,interpret:ki,simpleApplicator:bi},Ai="https://json-schema.org/keyword/maxContains",Ii=e=>l(e),Ei=()=>!0,xi={id:Ai,compile:Ii,interpret:Ei},Si="https://json-schema.org/keyword/maxItems",Oi=e=>l(e),Pi=(e,t)=>u(t)!=="array"||Ee(t)<=e,Ri={id:Si,compile:Oi,interpret:Pi},_i="https://json-schema.org/keyword/maxLength",Ti=e=>l(e),Ni=(e,t)=>u(t)!=="string"||[...v(t)].length<=e,Fi={id:_i,compile:Ti,interpret:Ni},Di="https://json-schema.org/keyword/maxProperties",Ui=e=>l(e),Mi=(e,t)=>u(t)!=="object"||[...at(t)].length<=e,qi={id:Di,compile:Ui,interpret:Mi},Vi="https://json-schema.org/keyword/maximum",Ci=e=>l(e),Li=(e,t)=>u(t)!=="number"||v(t)<=e,Ki={id:Vi,compile:Ci,interpret:Li},zi="https://json-schema.org/keyword/minContains",Bi=e=>l(e),Gi=()=>!0,Ji={id:zi,compile:Bi,interpret:Gi},Zi="https://json-schema.org/keyword/minItems",Wi=e=>l(e),Xi=(e,t)=>u(t)!=="array"||Ee(t)>=e,Hi={id:Zi,compile:Wi,interpret:Xi},Qi="https://json-schema.org/keyword/minLength",Yi=e=>l(e),ea=(e,t)=>u(t)!=="string"||[...v(t)].length>=e,ta={id:Qi,compile:Yi,interpret:ea},ra="https://json-schema.org/keyword/minProperties",na=e=>l(e),oa=(e,t)=>u(t)!=="object"||[...at(t)].length>=e,sa={id:ra,compile:na,interpret:oa},ia="https://json-schema.org/keyword/minimum",aa=e=>l(e),ca=(e,t)=>u(t)!=="number"||v(t)>=e,pa={id:ia,compile:aa,interpret:ca},da="https://json-schema.org/keyword/multipleOf",ma=e=>l(e),la=(e,t)=>{if(u(t)!=="number")return!0;const r=v(t)%e;return bt(0,r)||bt(e,r)},bt=(e,t)=>Math.abs(e-t)<11920929e-14,ua={id:da,compile:ma,interpret:la},ha="https://json-schema.org/keyword/not",fa=(...e)=>p.compile(...e),ya=(...e)=>!p.interpret(...e),ga={id:ha,compile:fa,interpret:ya},$a="https://json-schema.org/keyword/oneOf",wa=(e,t)=>x(V(e),E(r=>p.compile(r,t)),_),ja=(e,t,r)=>{let n=0;for(const o of e)p.interpret(o,t,r)&&n++;return n===1},ka={id:$a,compile:wa,interpret:ja},ba="https://json-schema.org/keyword/pattern",va=e=>new RegExp(l(e),"u"),Aa=(e,t)=>u(t)!=="string"||e.test(v(t)),Ia={id:ba,compile:va,interpret:Aa},Ea="https://json-schema.org/keyword/patternProperties",xa=(e,t)=>x(L(e),E(async([r,n])=>[new RegExp(r,"u"),await p.compile(n,t)]),_),Sa=(e,t,r)=>{if(u(t)!=="object")return!0;let n=!0;for(const[o,s]of e)for(const[i,a]of ue(t)){const d=v(i);o.test(d)&&(p.interpret(s,a,r)||(n=!1),r.evaluatedProperties?.add(d))}return n},Oa=!0,Pa={id:Ea,compile:xa,interpret:Sa,simpleApplicator:Oa},Ra="https://json-schema.org/keyword/prefixItems",_a=(e,t)=>x(V(e),E(r=>p.compile(r,t)),_),Ta=(e,t,r)=>{if(u(t)!=="array")return!0;let n=!0,o=0;const s=Ee(t);for(const[i,a]of nr(e,M(t))){if(o>=s)break;p.interpret(i,a,r)||(n=!1),r.evaluatedItems?.add(o),o++}return n},Na=!0,Fa={id:Ra,compile:_a,interpret:Ta,simpleApplicator:Na},Da="https://json-schema.org/keyword/properties",Ua=(e,t)=>x(L(e),E(async([r,n])=>[r,await p.compile(n,t)]),Ve),Ma=(e,t,r)=>{if(u(t)!=="object")return!0;let n=!0;for(const[o,s]of ue(t)){const i=v(o);i in e&&(p.interpret(e[i],s,r)||(n=!1),r.evaluatedProperties?.add(i))}return n},qa=!0,Va={id:Da,compile:Ua,interpret:Ma,simpleApplicator:qa},Ca="https://json-schema.org/keyword/propertyDependencies",La=(e,t)=>x(L(e),E(async([r,n])=>[r,await x(L(n),E(async([o,s])=>[o,await p.compile(s,t)]),Ve)]),Ve),Ka=(e,t,r)=>{if(u(t)!=="object")return!0;let n=!0;const o=v(t);for(const[s,i]of Object.entries(e)){const a=o[s];te(s,t)&&a in i&&!p.interpret(i[a],t,r)&&(n=!1)}return n},za=!0,Ba={id:Ca,compile:La,interpret:Ka,simpleApplicator:za},Ga="https://json-schema.org/keyword/propertyNames",Ja=(e,t)=>p.compile(e,t),Za=(e,t,r)=>{if(u(t)!=="object")return!0;let n=!0;for(const o of at(t))p.interpret(e,o,r)||(n=!1);return n},Wa=!0,Xa={id:Ga,compile:Ja,interpret:Za,simpleApplicator:Wa},Ha="https://json-schema.org/keyword/readOnly",Qa=e=>l(e),Ya=()=>!0,ec=e=>e,tc={id:Ha,compile:Qa,interpret:Ya,annotation:ec},rc="https://json-schema.org/keyword/ref",nc=(...e)=>p.compile(...e),oc=(...e)=>p.interpret(...e),sc=!0,ic={id:rc,compile:nc,interpret:oc,simpleApplicator:sc},ac="https://json-schema.org/keyword/requireAllExcept",cc=async(e,t,r)=>{const n=await l(e),o=b(e.document.dialectId,"https://json-schema.org/keyword/properties"),s=await R(o,r),i=T(s)==="object"?Me(s):[],a=new Set(i);return n.forEach(d=>i.remove(d)),[...a]},pc=(e,t)=>u(t)!=="object"||e.every(r=>Object.hasOwn(v(t),r)),dc={id:ac,compile:cc,interpret:pc},mc="https://json-schema.org/keyword/required",lc=e=>l(e),uc=(e,t)=>u(t)!=="object"||e.every(r=>Object.hasOwn(v(t),r)),hc={id:mc,compile:lc,interpret:uc},fc="https://json-schema.org/keyword/title",yc=e=>l(e),gc=()=>!0,$c=e=>e,wc={id:fc,compile:yc,interpret:gc,annotation:$c},jc="https://json-schema.org/keyword/then",kc=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/if");if(er(n,r)){const o=await R(n,r);return[await p.compile(o,t),await p.compile(e,t)]}else return[]},bc=([e,t],r,n)=>e===void 0||!p.interpret(e,r,{...n,plugins:n.ast.plugins})||p.interpret(t,r,n),vc=!0,Ac={id:jc,compile:kc,interpret:bc,simpleApplicator:vc},Ic="https://json-schema.org/keyword/type",Ec=e=>l(e),xc=(e,t)=>typeof e=="string"?vt(t)(e):e.some(vt(t)),vt=e=>t=>t==="integer"?u(e)==="number"&&Number.isInteger(v(e)):u(e)===t,Sc={id:Ic,compile:Ec,interpret:xc},Oc="https://json-schema.org/keyword/unevaluatedItems",Pc=async(e,t,r)=>[Ae(r),await p.compile(e,t)],Rc=([e,t],r,n)=>{if(u(r)!=="array"||n.rootSchema===e)return!0;const o=new Tc(e);p.interpret(e,r,{...n,plugins:[...n.ast.plugins,o]});const s=o.evaluatedItems;let i=!0,a=0;for(const d of M(r))s.has(a)||(p.interpret(t,d,n)||(i=!1),n.evaluatedItems?.add(a)),a++;return i},_c=!0;class Tc{constructor(t){this.rootSchema=t}beforeSchema(t,r,n){n.evaluatedItems??=new Set,n.schemaEvaluatedItems??=new Set}beforeKeyword(t,r,n){n.rootSchema=this.rootSchema,n.evaluatedItems=new Set}afterKeyword(t,r,n,o,s){if(o)for(const i of n.evaluatedItems)s.schemaEvaluatedItems.add(i)}afterSchema(t,r,n,o){if(o)for(const s of n.schemaEvaluatedItems)n.evaluatedItems.add(s);this.evaluatedItems=n.evaluatedItems}}const Nc={id:Oc,compile:Pc,interpret:Rc,simpleApplicator:_c},Fc="https://json-schema.org/keyword/unevaluatedProperties",Dc=async(e,t,r)=>[Ae(r),await p.compile(e,t)],Uc=([e,t],r,n)=>{if(u(r)!=="object"||n.rootSchema===e)return!0;const o=new qc(e);p.interpret(e,r,{...n,plugins:[...n.ast.plugins,o]});const s=o.evaluatedProperties;let i=!0;for(const[a,d]of ue(r)){const f=v(a);s.has(f)||(p.interpret(t,d,n)||(i=!1),n.evaluatedProperties?.add(f))}return i},Mc=!0;class qc{constructor(t){this.rootSchema=t}beforeSchema(t,r,n){n.evaluatedProperties??=new Set,n.schemaEvaluatedProperties??=new Set}beforeKeyword(t,r,n){n.rootSchema=this.rootSchema,n.evaluatedProperties=new Set}afterKeyword(t,r,n,o,s){if(o)for(const i of n.evaluatedProperties)s.schemaEvaluatedProperties.add(i)}afterSchema(t,r,n,o){if(o)for(const s of n.schemaEvaluatedProperties)n.evaluatedProperties.add(s);this.evaluatedProperties=n.evaluatedProperties}}const Vc={id:Fc,compile:Dc,interpret:Uc,simpleApplicator:Mc},Cc="https://json-schema.org/keyword/uniqueItems",Lc=e=>l(e),Kc=(e,t)=>{if(u(t)!=="array"||e===!1)return!0;const r=v(t).map(he);return new Set(r).size===r.length},zc={id:Cc,compile:Lc,interpret:Kc},Bc="https://json-schema.org/keyword/unknown",Gc=e=>[[...ke(e.cursor)].pop(),l(e)],Jc=()=>!0,Zc=([,e])=>e,Wc={id:Bc,compile:Gc,interpret:Jc,annotation:Zc},Xc={id:"https://json-schema.org/keyword/vocabulary"},Hc="https://json-schema.org/keyword/writeOnly",Qc=e=>l(e),Yc=()=>!0,ep=e=>e,tp={id:Hc,compile:Qc,interpret:Yc,annotation:ep};Zt("application/schema+json",Sn);c(to);c(io);c(ao);c(lo);c(yo);c(vo);c(xo);c(Ro);c(Do);c(Co);c(Go);c(Ho);c(ts);c(ss);c(ds);c(fs);c(js);c(ks);c(xs);c(_s);c(Ds);c(Cs);c(Bs);c(Ws);c(ei);c(ti);c(ii);c($i);c(vi);c(xi);c(Ri);c(Fi);c(qi);c(Ki);c(Ji);c(Hi);c(ta);c(sa);c(pa);c(ua);c(ga);c(ka);c(Ia);c(Pa);c(Fa);c(Va);c(Ba);c(Xa);c(tc);c(ic);c(dc);c(hc);c(wc);c(Ac);c(Sc);c(Nc);c(Vc);c(zc);c(Wc);c(Xc);c(tp);const rp={$schema:"https://json-schema.org/validation",$vocabulary:{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/unevaluated":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0},title:"Core and Validation specifications meta-schema",$dynamicAnchor:"meta",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}]},np={$schema:"https://json-schema.org/validation",title:"Core vocabulary meta-schema",$dynamicAnchor:"meta",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{$ref:"#/$defs/anchor"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{$ref:"#/$defs/anchor"},$dynamicAnchor:{$ref:"#/$defs/anchor"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},$defs:{anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"}}},op={$schema:"https://json-schema.org/validation",title:"Applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"meta"},contains:{$dynamicRef:"meta"},itemPattern:{$ref:"#/$defs/itemPattern"},additionalProperties:{$dynamicRef:"meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"meta"}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"},propertyNames:{format:"regex"}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"meta"}},propertyDependencies:{type:"object",additionalProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},propertyNames:{$dynamicRef:"meta"},if:{$dynamicRef:"meta"},then:{$dynamicRef:"meta"},else:{$dynamicRef:"meta"},conditional:{type:"array",items:{if:{type:"array"},then:{items:{$dynamicRef:"meta"}},else:{$dynamicRef:"meta"}}},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"meta"}},itemPattern:{type:"array",itemPattern:[[{if:{type:"array"},then:{$ref:"#/$defs/itemPattern"},else:{$dynamicRef:"meta"}},{enum:["?","*","+"]},"?","|",{const:"|"}],"*"]}}},sp={$schema:"https://json-schema.org/validation",title:"Validation vocabulary meta-schema",$dynamicAnchor:"meta",properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeInteger"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeInteger"},uniqueItems:{type:"boolean"},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger"},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeInteger"},required:{$ref:"#/$defs/stringArray"},optional:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0}}},ip={$schema:"https://json-schema.org/validation",title:"Meta-data vocabulary meta-schema",$dynamicAnchor:"meta",properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean"},readOnly:{type:"boolean"},writeOnly:{type:"boolean"},examples:{type:"array"}}},ap={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for annotation results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},cp={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for assertion results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},pp={$schema:"https://json-schema.org/validation",title:"Content vocabulary meta-schema",$dynamicAnchor:"meta",properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"meta"}}},dp={$schema:"https://json-schema.org/validation",title:"Unevaluated applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{unevaluatedItems:{$dynamicRef:"meta"},unevaluatedProperties:{$dynamicRef:"meta"}}};q("https://json-schema.org/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});q("https://json-schema.org/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",minContains:"https://json-schema.org/keyword/minContains",maxContains:"https://json-schema.org/keyword/maxContains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",conditional:"https://json-schema.org/keyword/conditional",items:"https://json-schema.org/keyword/items",itemPattern:"https://json-schema.org/keyword/itemPattern",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyDependencies:"https://json-schema.org/keyword/propertyDependencies",propertyNames:"https://json-schema.org/keyword/propertyNames"});q("https://json-schema.org/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",requireAllExcept:"https://json-schema.org/keyword/requireAllExcept",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});q("https://json-schema.org/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});q("https://json-schema.org/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});q("https://json-schema.org/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});q("https://json-schema.org/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});q("https://json-schema.org/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});const mr="https://json-schema.org/validation";ot(mr,{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0,"https://json-schema.org/vocab/unevaluated":!0});U(rp,mr);U(np,"https://json-schema.org/meta/core");U(op,"https://json-schema.org/meta/applicator");U(sp,"https://json-schema.org/meta/validation");U(ip,"https://json-schema.org/meta/meta-data");U(ap,"https://json-schema.org/meta/format-annotation");U(cp,"https://json-schema.org/meta/format-assertion");U(pp,"https://json-schema.org/meta/content");U(dp,"https://json-schema.org/meta/unevaluated");const mp={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},lp="https://json-schema.org/keyword/draft-04/additionalItems",up=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/draft-04/items"),o=await R(n,r);return[T(o)==="array"?it(o):Number.MAX_SAFE_INTEGER,await p.compile(e,t)]},hp=([e,t],r,n)=>{if(u(r)!=="array")return!0;let o=!0,s=e;for(const i of rr(e,M(r)))p.interpret(t,i,n)||(o=!1),n.evaluatedItems?.add(s),s++;return o},fp=!0,yp={id:lp,compile:up,interpret:hp,simpleApplicator:fp},gp="https://json-schema.org/keyword/draft-06/contains",$p=(e,t)=>p.compile(e,t),wp=(e,t,r)=>u(t)!=="array"||Tn(n=>p.interpret(e,n,r),M(t)),jp={id:gp,compile:$p,interpret:wp},kp="https://json-schema.org/keyword/draft-04/dependencies",bp=(e,t)=>x(L(e),E(async([r,n])=>[r,T(n)==="array"?l(n):await p.compile(n,t)]),_),vp=(e,t,r)=>u(t)!=="object"?!0:e.every(([n,o])=>te(n,t)?Array.isArray(o)?o.every(s=>te(s,t)):p.interpret(o,t,r):!0),Ap={id:kp,compile:bp,interpret:vp},Ip="https://json-schema.org/keyword/draft-04/items",Ep=(e,t)=>T(e)==="array"?x(V(e),E(r=>p.compile(r,t)),_):p.compile(e,t),xp=(e,t,r)=>{if(u(t)!=="array")return!0;let n=!0,o=0;if(typeof e=="string")for(const s of M(t))p.interpret(e,s,r)||(n=!1),r.evaluatedItems?.add(o++);else for(const[s,i]of nr(e,M(t))){if(!i)break;p.interpret(s,i,r)||(n=!1),r.evaluatedItems?.add(o),o++}return n},Sp=!0,Op={id:Ip,compile:Ep,interpret:xp,simpleApplicator:Sp},Pp={id:"https://json-schema.org/keyword/draft-04/id"},Rp={id:"https://json-schema.org/keyword/draft-04/ref"};c(yp);c(jp);c(Ap);c(Pp);c(Op);c(Rp);const Ke="http://json-schema.org/draft-07/schema";q(Ke,{$id:"https://json-schema.org/keyword/draft-04/id",$ref:"https://json-schema.org/keyword/draft-04/ref",$comment:"https://json-schema.org/keyword/comment",additionalItems:"https://json-schema.org/keyword/draft-04/additionalItems",additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",const:"https://json-schema.org/keyword/const",contains:"https://json-schema.org/keyword/draft-06/contains",contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",default:"https://json-schema.org/keyword/default",definitions:"https://json-schema.org/keyword/definitions",dependencies:"https://json-schema.org/keyword/draft-04/dependencies",description:"https://json-schema.org/keyword/description",enum:"https://json-schema.org/keyword/enum",examples:"https://json-schema.org/keyword/examples",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",format:"https://json-schema.org/keyword/format",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/draft-04/items",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",pattern:"https://json-schema.org/keyword/pattern",patternProperties:"https://json-schema.org/keyword/patternProperties",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames",readOnly:"https://json-schema.org/keyword/readOnly",required:"https://json-schema.org/keyword/required",title:"https://json-schema.org/keyword/title",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems",writeOnly:"https://json-schema.org/keyword/writeOnly"});ot(Ke,{[Ke]:!0},!0);U(mp);const _p="https://json-schema.org/validation",Tp=(e,t,r=_p)=>{const n=Bt(t,r);return e.annotations[n]??[]};class Np extends Error{constructor(t){super("Validation Error"),this.name=this.constructor.name,this.output=t}}const Fp=async(e,t=void 0,r=void 0)=>{const n=await tr(e),o=await ar(n),s=(i,a)=>Dp(o,Y(i),a);return t===void 0?s:s(t,r)},Dp=(e,t,r=Ce)=>{const n=new Wn,o=r.plugins??[],s=cr(e,t,{outputFormat:typeof r=="string"?r:r.outputFormat??Ce,plugins:[n,...o]});if(!s.valid)throw new Np(s);for(const i of n.annotations){const a=Fn(i.instanceLocation,t),d=i.keyword;a.annotations[d]||(a.annotations[d]=[]),a.annotations[d].unshift(i.annotation)}return t};function lr(e,t,r){if(t){for(const[n,o]of ue(t))if(v(n)===e)return Tp(o,r)[0]}}function Up(e,t){if(t){const r=lr(e,t,"title");if(r)return r}return e}function Mp(e,t){if(t)return lr(e,t,"description")}function qp(e){const[t,r]=we.useState(!1);return we.useEffect(()=>{if(e&&e.$id)if(On(e.$id))r(!0);else try{U(e),r(!0)}catch(n){console.error("Unable to register JSON Schema in @hyperjump/json-schema:",n)}},[e]),t}function Vp(e,t){const r=qp(t);return gr({queryKey:["getAnnotatedInstance",{json:e,schema:t,schemaIsRegistered:r}],queryFn:()=>{if(e&&t&&r)try{return Fp(t.$id,e)}catch(n){console.error("Could not create annotated schema instance:",n)}return null},enabled:!!(t&&e)})}function Ie(e){return typeof e=="number"||typeof e=="boolean"?e.toString():Sr(e)?br(Fe(e)):e}function At(e){const{entityId:t,versionNumber:r}=e,[n,o]=we.useState(!1),{data:s,isLoading:i,refetch:a}=vr(t,r,!0),d=s?.entityMetadata,f=s?.annotations,{data:h,isLoading:m}=Ar(t),{data:y,isLoading:k}=Ir(h?.jsonSchemaVersionInfo.$id,{enabled:!!h}),{data:g,isLoading:A}=Vp(s?.entity,y),{data:F,refetch:I}=Er(t,{enabled:!!h}),S=!!h,W=!!d&&!!F&&Fe(d.modifiedOn).diff(Fe(F.validatedOn))>0,X=we.useCallback(async()=>{o(!0);const P=[void a(),void I()];await Promise.allSettled(P),o(!1)},[a,I]);return i||m||k||A||n?j.jsx(xr,{numRows:3,numCols:2}):j.jsxs(j.Fragment,{children:[d&&f&&$r(f)?j.jsxs("div",{className:"placeholder",children:["This"," ",Se(Oe(d.concreteType))," ","has no annotations."]}):null,j.jsx("table",{className:"AnnotationsTable",children:j.jsxs("tbody",{children:[f&&Object.keys(f).map(P=>j.jsxs("tr",{className:"AnnotationsTable__Row",children:[j.jsx("td",{className:"AnnotationsTable__Row__Key",children:j.jsx(De,{annotationKey:P,title:Up(P,g),description:Mp(P,g)})}),j.jsx("td",{className:"AnnotationsTable__Row__Value",children:Array.isArray(f[P])?f[P].map(Ie).join(", "):Ie(f[P])})]},P)),S?j.jsxs("tr",{className:"AnnotationsTable__Row",children:[j.jsx("td",{className:"AnnotationsTable__Row__Key Schema",children:"Validation Schema"}),j.jsx("td",{className:"AnnotationsTable__Row__Value",children:j.jsx("a",{href:`${wr(jr.REPO_ENDPOINT)}/repo/v1/schema/type/registered/${h.jsonSchemaVersionInfo.$id}`,target:"_blank",rel:"noopener noreferrer",children:h.jsonSchemaVersionInfo.schemaName})})]}):null]})}),d&&S&&W&&j.jsx(kr,{variant:"warning",description:`This ${Se(Oe(d.concreteType))} has changed since it has been last validated. If this ${Se(Oe(d.concreteType))} is expected to have annotations derived from the Validation Schema, they may not yet be visible.`,primaryButtonConfig:{text:"Reload Annotations",onClick:()=>{X()}},isGlobal:!1})]})}try{Ie.displayName="getDisplayedAnnotation",Ie.__docgenInfo={description:"",displayName:"getDisplayedAnnotation",props:{}}}catch{}try{At.displayName="AnnotationsTable",At.__docgenInfo={description:"",displayName:"AnnotationsTable",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}export{At as A,Ie as g};
