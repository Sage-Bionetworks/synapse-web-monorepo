var NC=Object.defineProperty;var IC=(e,t,n)=>t in e?NC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var We=(e,t,n)=>(IC(e,typeof t!="symbol"?t+"":t,n),n);import{j as v,a as L,F as G}from"./jsx-runtime-095bf462.js";import{r as TC,i as PC,a as RC}from"./jsx-runtime_commonjs-proxy-27924edb.js";import{r as R,R as z}from"./index-8db94870.js";import{g as Nt,c as Yr}from"./_commonjsHelpers-042e6b4d.js";import{a$ as _i,u as je,b0 as AC,az as Ei,b1 as kC,b2 as ub,b3 as Qa,b4 as $C,b5 as FC,b6 as pp,b7 as DC,b8 as or,b9 as OC,k as cb,a0 as Lc,ba as qC,S as db,a as LC,bb as jh,bc as fb,bd as Ci,be as As,bf as pb,bg as VC,bh as hb,bi as MC,bj as BC,bk as xi,bl as mb,bm as vb,bn as gb,E as hp,bo as Wn,bp as UC,l as ta,bq as yb,br as bb,bs as wb,bt as Sb,bu as Qh,bv as zC,bw as HC,aA as WC,bx as jC,by as QC,bz as _b,bA as GC,i as Eb,bB as YC,bC as XC}from"./EntityTypeUtils-3a924f0d.js";import{P as sr,g as KC,B as ZC}from"./getEndpoint-ac94413e.js";import{W as ks}from"./WideButton-7f7b7884.js";import{j as Cb,T as JC,M as e1,S as ko,k as da,l as $s,m as Fs,n as Ds,o as fa,p as Os,q as mp,V as Ga,r as qs,s as t1,t as r1,u as n1,i as vp,v as a1,w as i1,c as xb,B as gp,x as o1,y as Nb,O as Vc,z as Gh,G as s1,F as l1,C as Yh}from"./SynapseConstants-a1d83293.js";import{S as Ls,l as yp}from"./LoadingScreen-f2cda167.js";import{u as u1,U as ra,a as Ib,g as c1}from"./UserCard-596908cb.js";import{A as bp}from"./Alert-fbdd8ab9.js";import{p as d1,S as Tb,D as f1}from"./RegularExpressions-bc0adf55.js";import{u as pa}from"./react-intersection-observer.modern-64b519d2.js";import{u as Pb}from"./useInfiniteQuery-703d7d75.js";import{f as Ya}from"./DateFormatter-4492cdb0.js";import{d as lr}from"./dayjs.min-8d4ef725.js";import{S as wp}from"./SkeletonTable-afd37548.js";import{S as mn}from"./Skeleton-3aad52b9.js";import{u as p1,a as $o,T as Et,t as Mc}from"./Tooltip-72c76487.js";import{T as Oe}from"./Typography-0933b2f6.js";import{E as Xh}from"./EntityIcon-d757b320.js";import{I as De,S as h1,a as m1,t as v1,H as g1}from"./IconSvg-d63801e0.js";import{c as Vs}from"./_commonjs-dynamic-modules-302442b1.js";import{_ as y1,a as Rb,b as b1,c as Ab,k as Ms,d as w1,e as S1,f as _1,g as E1,h as kb,i as C1,j as x1,l as N1,m as $b,n as Fb,o as Db,u as Ob,p as I1}from"./uniq-db6de665.js";import{d as Rn,e as qb,f as ha,a as ur,g as Jr,h as T1,j as P1,k as Lb,l as Vb,n as Sp,o as _p,p as R1,q as Ep,r as en,s as A1,c as k1,t as Cp,u as Ni,v as $1,w as F1,x as D1,b as Mb,y as xp,z as Np,A as O1,B as Bb,C as Ub,D as q1,E as L1,F as V1,G as M1,H as Bs,I as B1,J as U1,K as z1,L as zb,M as Hb,_ as H1}from"./mapValues-e7962af0.js";import{b as W1,c as Ip}from"./isPlainObject-c3b03d84.js";import{t as j1,r as Q1}from"./now-26f68cf8.js";import"./index-8ce4a492.js";import{d as G1,i as Fa,u as Y1,a as X1,t as K1}from"./unCamelCase-5fc6f9ab.js";import{u as Z1}from"./useGetEntityHeaders-de8a94d3.js";import{d as Xr,C as J1}from"./ToastMessage-def67892.js";import{_ as tn}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as Ce}from"./extends-98964cd2.js";import{g as ma,a as va,s as mt,x as Qt,u as ga,b as Vt,e as ya,k as On}from"./styled-f64e11ba.js";import{k as Wb,c as jb}from"./emotion-react.browser.esm-4b1ddfee.js";import{c as Qb,P as Gb}from"./factory-51364b46.js";import{p as rn,a as Yb,g as Tp}from"./sqlFunctions-3d50de6b.js";import{u as Ii}from"./useEntity-00b527f4.js";import{T as Fo,N as ex,I as Kh}from"./SynapseTableConstants-942d2b0b.js";import{u as Do,a as Xb,b as tx}from"./use-deep-compare-effect.esm-cb3aaa60.js";import{u as rx,a as nx}from"./useDownloadList-58d8f607.js";import{u as Kb,a as Zb,b as ax}from"./useGetQueryResultBundle-3264c451.js";import{i as Jb,r as ew,h as tw,a as rw}from"./queryUtils-d4349a5f.js";import{i as Oo,a as qo,C as ix,b as ox,c as sx}from"./QueryFilter-569d16b8.js";import{c as Br}from"./cloneDeep-1e88cb0d.js";import{s as lx}from"./NoSearchResults-460db635.js";import{s as ux}from"./NoData-59ea70fa.js";import{C as pe,U as cx}from"./UserCardList-790bbf03.js";import{P as Fe}from"./index-58d3fd43.js";import{_ as dx}from"./pick-6f8f3a0d.js";import{g as fx}from"./sortBy-db69fbf4.js";import{B as Gt}from"./Button-891a522f.js";import{D as dt,E as Cn,C as Pp,a as px,S as hx}from"./ElementWithTooltip-c0e7e2c7.js";import{L as Xt}from"./Link-2921f78c.js";import{B as ut}from"./Box-13f1aabd.js";import"./react-is.production.min-a192e302.js";import{u as Us}from"./useTheme-14d0ce71.js";import{d as Bc,o as nw}from"./ownerWindow-2c76219e.js";import{c as An}from"./Clear-72bafe95.js";import{B as Rp}from"./ButtonBase-4f599170.js";import{u as $l}from"./TransitionGroupContext-0df7f063.js";import{o as mx}from"./isHostComponent-fa76b8d9.js";import{Q as vx}from"./QueryCount-bd576cc1.js";import{S as gx}from"./SvgIcon-4c933a0b.js";import{I as zs}from"./Icon-065eff33.js";import{u as Ba,S as yx}from"./UserSearchBoxV2-90fa7e80.js";import{u as bx}from"./uniqueId-4d05949d.js";import{R as wx}from"./RadioGroup-bf0fed90.js";import{R as Sx}from"./RangeSlider-209042a9.js";import{S as Ti}from"./Stack-98e16f53.js";import{r as _x}from"./react-sizeme-0d7fb727.js";import{g as Ex}from"./ColorGradient-fc5a110b.js";import{S as Cx}from"./SelectionCriteriaPill-a5538aba.js";import{_ as xx,e as Zh,f as Fl,v as Nx,b as Jh,g as Ix,i as Tx,u as Px,S as Rx,d as Ax}from"./Select-457c486b.esm-39815c2e.js";import{I as kx}from"./IconList-574f380f.js";import{B as $x}from"./Button-5637ed55.js";import{a as Fx,b as Ap,c as aw,d as Dx,e as Ox,f as qx,g as Lx,h as iw}from"./useAccessRequirements-00151ee8.js";import{a as ow,R as Vx}from"./RestrictionInformation-4ed2591e.js";import{S as Mx}from"./StandaloneLoginForm-7422c220.js";import{D as Xa,a as Ka,b as kp}from"./DialogTitle-b2b86bbe.js";import{I as Hs}from"./IconButton-74239a2b.js";import{A as cn}from"./Alert-61691a15.js";import{R as Bx}from"./ResearchProjectForm-df0402a3.js";import{D as Ux}from"./DataAccessRequestAccessorsFilesForm-b5a6c591.js";import{A as zx}from"./AuthenticatedRequirement-76d40cc3.js";import{C as Hx}from"./CertificationRequirement-53216dcf.js";import{V as Wx}from"./ValidationRequirement-2db16099.js";import{T as jx}from"./TwoFactorAuthEnabledRequirement-fa8888ab.js";import{R as $p,a as nr}from"./RequirementItem-476964f5.js";import{S as Pt}from"./ManagedACTAccessRequirementStatus-9671fe8d.js";import{M as sw}from"./Dialog-f99dbb4e.js";import{E as Uc}from"./EntityLink-e9bf4803.js";import{e as ji}from"./_MapCache-61b5eb93.js";import{u as Qx,U as Gx}from"./UserOrTeamBadge-1ece14f1.js";import{S as Yx}from"./SynapseVideo-9509f19b.js";let qn;function lw(){if(qn)return qn;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),qn="reverse",e.scrollLeft>0?qn="default":(e.scrollLeft=1,e.scrollLeft===0&&(qn="negative")),document.body.removeChild(e),qn}function em(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(lw()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function Xx(e){return ma("MuiCircularProgress",e)}va("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Kx=["className","color","disableShrink","size","style","thickness","value","variant"];let Ws=e=>e,tm,rm,nm,am;const Ar=44,Zx=Wb(tm||(tm=Ws`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Jx=Wb(rm||(rm=Ws`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),eN=e=>{const{classes:t,variant:n,color:a,disableShrink:r}=e,i={root:["root",n,`color${Qt(a)}`],svg:["svg"],circle:["circle",`circle${Qt(n)}`,r&&"circleDisableShrink"]};return ya(i,Xx,t)},tN=mt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Qt(n.color)}`]]}})(({ownerState:e,theme:t})=>Ce({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&jb(nm||(nm=Ws`
      animation: ${0} 1.4s linear infinite;
    `),Zx)),rN=mt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),nN=mt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Qt(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ce({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&jb(am||(am=Ws`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Jx)),aN=R.forwardRef(function(t,n){const a=ga({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:s=40,style:l,thickness:c=3.6,value:u=0,variant:d="indeterminate"}=a,f=tn(a,Kx),p=Ce({},a,{color:i,disableShrink:o,size:s,thickness:c,value:u,variant:d}),h=eN(p),m={},g={},b={};if(d==="determinate"){const E=2*Math.PI*((Ar-c)/2);m.strokeDasharray=E.toFixed(3),b["aria-valuenow"]=Math.round(u),m.strokeDashoffset=`${((100-u)/100*E).toFixed(3)}px`,g.transform="rotate(-90deg)"}return v(tN,Ce({className:Vt(h.root,r),style:Ce({width:s,height:s},g,l),ownerState:p,ref:n,role:"progressbar"},b,f,{children:v(rN,{className:h.svg,ownerState:p,viewBox:`${Ar/2} ${Ar/2} ${Ar} ${Ar}`,children:v(nN,{className:h.circle,style:m,ownerState:p,cx:Ar,cy:Ar,r:(Ar-c)/2,fill:"none",strokeWidth:c})})}))}),iN=aN;function oN(e){return ma("MuiPagination",e)}va("MuiPagination",["root","ul","outlined","text"]);const sN=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function lN(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:a=1,defaultPage:r=1,disabled:i=!1,hideNextButton:o=!1,hidePrevButton:s=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:d=!1,siblingCount:f=1}=e,p=tn(e,sN),[h,m]=p1({controlled:c,default:r,name:n,state:"page"}),g=(T,P)=>{c||m(P),l&&l(T,P)},b=(T,P)=>{const k=P-T+1;return Array.from({length:k},(A,I)=>T+I)},E=b(1,Math.min(t,a)),y=b(Math.max(a-t+1,t+1),a),_=Math.max(Math.min(h-f,a-t-f*2-1),t+2),S=Math.min(Math.max(h+f,t+f*2+2),y.length>0?y[0]-2:a-1),w=[...u?["first"]:[],...s?[]:["previous"],...E,..._>t+2?["start-ellipsis"]:t+1<a-t?[t+1]:[],...b(_,S),...S<a-t-1?["end-ellipsis"]:a-t>t?[a-t]:[],...y,...o?[]:["next"],...d?["last"]:[]],C=T=>{switch(T){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return a;default:return null}},N=w.map(T=>typeof T=="number"?{onClick:P=>{g(P,T)},type:"page",page:T,selected:T===h,disabled:i,"aria-current":T===h?"true":void 0}:{onClick:P=>{g(P,C(T))},type:T,page:C(T),selected:!1,disabled:i||T.indexOf("ellipsis")===-1&&(T==="next"||T==="last"?h>=a:h<=1)});return Ce({items:N},p)}function uN(e){return ma("MuiPaginationItem",e)}const cN=va("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Lt=cN,im=An(v("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),om=An(v("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),sm=An(v("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),lm=An(v("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),dN=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],uw=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Qt(n.size)}`],n.variant==="text"&&t[`text${Qt(n.color)}`],n.variant==="outlined"&&t[`outlined${Qt(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},fN=e=>{const{classes:t,color:n,disabled:a,selected:r,size:i,shape:o,type:s,variant:l}=e,c={root:["root",`size${Qt(i)}`,l,o,n!=="standard"&&`${l}${Qt(n)}`,a&&"disabled",r&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return ya(c,uN,t)},pN=mt("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:uw})(({theme:e,ownerState:t})=>Ce({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Lt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),hN=mt(Rp,{name:"MuiPaginationItem",slot:"Root",overridesResolver:uw})(({theme:e,ownerState:t})=>Ce({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Lt.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Lt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Lt.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:On(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Lt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:On(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Lt.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>Ce({},t.variant==="text"&&{[`&.${Lt.selected}`]:Ce({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Lt.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Lt.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Lt.selected}`]:Ce({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:On(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:On(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:On(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Lt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:On(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Lt.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),mN=mt("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>Ce({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),vN=R.forwardRef(function(t,n){const a=ga({props:t,name:"MuiPaginationItem"}),{className:r,color:i="standard",component:o,components:s={},disabled:l=!1,page:c,selected:u=!1,shape:d="circular",size:f="medium",slots:p={},type:h="page",variant:m="text"}=a,g=tn(a,dN),b=Ce({},a,{color:i,disabled:l,selected:u,shape:d,size:f,type:h,variant:m}),E=Us(),y=fN(b),S=(E.direction==="rtl"?{previous:p.next||s.next||lm,next:p.previous||s.previous||sm,last:p.first||s.first||im,first:p.last||s.last||om}:{previous:p.previous||s.previous||sm,next:p.next||s.next||lm,first:p.first||s.first||im,last:p.last||s.last||om})[h];return h==="start-ellipsis"||h==="end-ellipsis"?v(pN,{ref:n,ownerState:b,className:Vt(y.root,r),children:"â€¦"}):L(hN,Ce({ref:n,ownerState:b,component:o,disabled:l,className:Vt(y.root,r)},g,{children:[h==="page"&&c,S?v(mN,{as:S,ownerState:b,className:y.icon}):null]}))}),gN=vN,yN=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],bN=e=>{const{classes:t,variant:n}=e;return ya({root:["root",n],ul:["ul"]},oN,t)},wN=mt("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),SN=mt("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function _N(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const EN=R.forwardRef(function(t,n){const a=ga({props:t,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:o="standard",count:s=1,defaultPage:l=1,disabled:c=!1,getItemAriaLabel:u=_N,hideNextButton:d=!1,hidePrevButton:f=!1,renderItem:p=N=>v(gN,Ce({},N)),shape:h="circular",showFirstButton:m=!1,showLastButton:g=!1,siblingCount:b=1,size:E="medium",variant:y="text"}=a,_=tn(a,yN),{items:S}=lN(Ce({},a,{componentName:"Pagination"})),w=Ce({},a,{boundaryCount:r,color:o,count:s,defaultPage:l,disabled:c,getItemAriaLabel:u,hideNextButton:d,hidePrevButton:f,renderItem:p,shape:h,showFirstButton:m,showLastButton:g,siblingCount:b,size:E,variant:y}),C=bN(w);return v(wN,Ce({"aria-label":"pagination navigation",className:Vt(C.root,i),ownerState:w,ref:n},_,{children:v(SN,{className:C.ul,ownerState:w,children:S.map((N,T)=>v("li",{children:p(Ce({},N,{color:o,"aria-label":u(N.type,N.page,N.selected),shape:h,size:E,variant:y}))},T))})}))}),CN=EN;function xN(e){return ma("MuiTab",e)}const NN=va("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),ln=NN,IN=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],TN=e=>{const{classes:t,textColor:n,fullWidth:a,wrapped:r,icon:i,label:o,selected:s,disabled:l}=e,c={root:["root",i&&o&&"labelIcon",`textColor${Qt(n)}`,a&&"fullWidth",r&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return ya(c,xN,t)},PN=mt(Rp,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Qt(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>Ce({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${ln.iconWrapper}`]:Ce({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${ln.selected}`]:{opacity:1},[`&.${ln.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${ln.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${ln.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${ln.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${ln.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),RN=R.forwardRef(function(t,n){const a=ga({props:t,name:"MuiTab"}),{className:r,disabled:i=!1,disableFocusRipple:o=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:f,onClick:p,onFocus:h,selected:m,selectionFollowsFocus:g,textColor:b="inherit",value:E,wrapped:y=!1}=a,_=tn(a,IN),S=Ce({},a,{disabled:i,disableFocusRipple:o,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:s,textColor:b,wrapped:y}),w=TN(S),C=l&&d&&R.isValidElement(l)?R.cloneElement(l,{className:Vt(w.iconWrapper,l.props.className)}):l,N=P=>{!m&&f&&f(P,E),p&&p(P)},T=P=>{g&&!m&&f&&f(P,E),h&&h(P)};return L(PN,Ce({focusRipple:!o,className:Vt(w.root,r),ref:n,role:"tab","aria-selected":m,disabled:i,onClick:N,onFocus:T,ownerState:S,tabIndex:m?0:-1},_,{children:[c==="top"||c==="start"?L(R.Fragment,{children:[C,d]}):L(R.Fragment,{children:[d,C]}),u]}))}),Dl=RN,AN=An(v("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),kN=An(v("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function $N(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function FN(e,t,n,a={},r=()=>{}){const{ease:i=$N,duration:o=300}=a;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=f=>{if(c){r(new Error("Animation cancelled"));return}s===null&&(s=f);const p=Math.min(1,(f-s)/o);if(t[e]=i(p)*(n-l)+l,p>=1){requestAnimationFrame(()=>{r(null)});return}requestAnimationFrame(d)};return l===n?(r(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}const DN=["onChange"],ON={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function qN(e){const{onChange:t}=e,n=tn(e,DN),a=R.useRef(),r=R.useRef(null),i=()=>{a.current=r.current.offsetHeight-r.current.clientHeight};return R.useEffect(()=>{const o=Bc(()=>{const l=a.current;i(),l!==a.current&&t(a.current)}),s=nw(r.current);return s.addEventListener("resize",o),()=>{o.clear(),s.removeEventListener("resize",o)}},[t]),R.useEffect(()=>{i(),t(a.current)},[t]),v("div",Ce({style:ON,ref:r},n))}function LN(e){return ma("MuiTabScrollButton",e)}const VN=va("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),MN=VN,BN=["className","slots","slotProps","direction","orientation","disabled"],UN=e=>{const{classes:t,orientation:n,disabled:a}=e;return ya({root:["root",n,a&&"disabled"]},LN,t)},zN=mt(Rp,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>Ce({width:40,flexShrink:0,opacity:.8,[`&.${MN.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),HN=R.forwardRef(function(t,n){var a,r;const i=ga({props:t,name:"MuiTabScrollButton"}),{className:o,slots:s={},slotProps:l={},direction:c}=i,u=tn(i,BN),f=Us().direction==="rtl",p=Ce({isRtl:f},i),h=UN(p),m=(a=s.StartScrollButtonIcon)!=null?a:AN,g=(r=s.EndScrollButtonIcon)!=null?r:kN,b=$o({elementType:m,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p}),E=$o({elementType:g,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p});return v(zN,Ce({component:"div",className:Vt(h.root,o),ref:n,role:null,ownerState:p,tabIndex:null},u,{children:c==="left"?v(m,Ce({},b)):v(g,Ce({},E))}))}),WN=HN;function jN(e){return ma("MuiTabs",e)}const QN=va("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Ol=QN,GN=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],um=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,cm=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Qi=(e,t,n)=>{let a=!1,r=n(e,t);for(;r;){if(r===e.firstChild){if(a)return;a=!0}const i=r.disabled||r.getAttribute("aria-disabled")==="true";if(!r.hasAttribute("tabindex")||i)r=n(e,r);else{r.focus();return}}},YN=e=>{const{vertical:t,fixed:n,hideScrollbar:a,scrollableX:r,scrollableY:i,centered:o,scrollButtonsHideMobile:s,classes:l}=e;return ya({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",r&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[r&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},jN,l)},XN=mt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ol.scrollButtons}`]:t.scrollButtons},{[`& .${Ol.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>Ce({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${Ol.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),KN=mt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>Ce({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),ZN=mt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>Ce({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),JN=mt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>Ce({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),eI=mt(qN,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),dm={},tI=R.forwardRef(function(t,n){const a=ga({props:t,name:"MuiTabs"}),r=Us(),i=r.direction==="rtl",{"aria-label":o,"aria-labelledby":s,action:l,centered:c=!1,children:u,className:d,component:f="div",allowScrollButtonsMobile:p=!1,indicatorColor:h="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:b=WN,scrollButtons:E="auto",selectionFollowsFocus:y,slots:_={},slotProps:S={},TabIndicatorProps:w={},TabScrollButtonProps:C={},textColor:N="primary",value:T,variant:P="standard",visibleScrollbar:k=!1}=a,A=tn(a,GN),I=P==="scrollable",x=g==="vertical",F=x?"scrollTop":"scrollLeft",O=x?"top":"left",$=x?"bottom":"right",V=x?"clientHeight":"clientWidth",q=x?"height":"width",B=Ce({},a,{component:f,allowScrollButtonsMobile:p,indicatorColor:h,orientation:g,vertical:x,scrollButtons:E,textColor:N,variant:P,visibleScrollbar:k,fixed:!I,hideScrollbar:I&&!k,scrollableX:I&&!x,scrollableY:I&&x,centered:c&&!I,scrollButtonsHideMobile:!p}),j=YN(B),Q=$o({elementType:_.StartScrollButtonIcon,externalSlotProps:S.startScrollButtonIcon,ownerState:B}),X=$o({elementType:_.EndScrollButtonIcon,externalSlotProps:S.endScrollButtonIcon,ownerState:B}),[Y,Z]=R.useState(!1),[J,ae]=R.useState(dm),[ie,ye]=R.useState({start:!1,end:!1}),[oe,ge]=R.useState({overflow:"hidden",scrollbarWidth:0}),Re=new Map,me=R.useRef(null),te=R.useRef(null),he=()=>{const K=me.current;let re;if(K){const Ie=K.getBoundingClientRect();re={clientWidth:K.clientWidth,scrollLeft:K.scrollLeft,scrollTop:K.scrollTop,scrollLeftNormalized:em(K,r.direction),scrollWidth:K.scrollWidth,top:Ie.top,bottom:Ie.bottom,left:Ie.left,right:Ie.right}}let Ee;if(K&&T!==!1){const Ie=te.current.children;if(Ie.length>0){const Qe=Ie[Re.get(T)];Ee=Qe?Qe.getBoundingClientRect():null}}return{tabsMeta:re,tabMeta:Ee}},we=$l(()=>{const{tabsMeta:K,tabMeta:re}=he();let Ee=0,Ie;if(x)Ie="top",re&&K&&(Ee=re.top-K.top+K.scrollTop);else if(Ie=i?"right":"left",re&&K){const Xe=i?K.scrollLeftNormalized+K.clientWidth-K.scrollWidth:K.scrollLeft;Ee=(i?-1:1)*(re[Ie]-K[Ie]+Xe)}const Qe={[Ie]:Ee,[q]:re?re[q]:0};if(isNaN(J[Ie])||isNaN(J[q]))ae(Qe);else{const Xe=Math.abs(J[Ie]-Qe[Ie]),Dt=Math.abs(J[q]-Qe[q]);(Xe>=1||Dt>=1)&&ae(Qe)}}),ne=(K,{animation:re=!0}={})=>{re?FN(F,me.current,K,{duration:r.transitions.duration.standard}):me.current[F]=K},Ye=K=>{let re=me.current[F];x?re+=K:(re+=K*(i?-1:1),re*=i&&lw()==="reverse"?-1:1),ne(re)},ke=()=>{const K=me.current[V];let re=0;const Ee=Array.from(te.current.children);for(let Ie=0;Ie<Ee.length;Ie+=1){const Qe=Ee[Ie];if(re+Qe[V]>K){Ie===0&&(re=K);break}re+=Qe[V]}return re},ze=()=>{Ye(-1*ke())},lt=()=>{Ye(ke())},$e=R.useCallback(K=>{ge({overflow:null,scrollbarWidth:K})},[]),ee=()=>{const K={};K.scrollbarSizeListener=I?v(eI,{onChange:$e,className:Vt(j.scrollableX,j.hideScrollbar)}):null;const re=ie.start||ie.end,Ee=I&&(E==="auto"&&re||E===!0);return K.scrollButtonStart=Ee?v(b,Ce({slots:{StartScrollButtonIcon:_.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Q},orientation:g,direction:i?"right":"left",onClick:ze,disabled:!ie.start},C,{className:Vt(j.scrollButtons,C.className)})):null,K.scrollButtonEnd=Ee?v(b,Ce({slots:{EndScrollButtonIcon:_.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:X},orientation:g,direction:i?"left":"right",onClick:lt,disabled:!ie.end},C,{className:Vt(j.scrollButtons,C.className)})):null,K},ce=$l(K=>{const{tabsMeta:re,tabMeta:Ee}=he();if(!(!Ee||!re)){if(Ee[O]<re[O]){const Ie=re[F]+(Ee[O]-re[O]);ne(Ie,{animation:K})}else if(Ee[$]>re[$]){const Ie=re[F]+(Ee[$]-re[$]);ne(Ie,{animation:K})}}}),fe=$l(()=>{if(I&&E!==!1){const{scrollTop:K,scrollHeight:re,clientHeight:Ee,scrollWidth:Ie,clientWidth:Qe}=me.current;let Xe,Dt;if(x)Xe=K>1,Dt=K<re-Ee-1;else{const Ot=em(me.current,r.direction);Xe=i?Ot<Ie-Qe-1:Ot>1,Dt=i?Ot>1:Ot<Ie-Qe-1}(Xe!==ie.start||Dt!==ie.end)&&ye({start:Xe,end:Dt})}});R.useEffect(()=>{const K=Bc(()=>{me.current&&(we(),fe())}),re=nw(me.current);re.addEventListener("resize",K);let Ee;return typeof ResizeObserver<"u"&&(Ee=new ResizeObserver(K),Array.from(te.current.children).forEach(Ie=>{Ee.observe(Ie)})),()=>{K.clear(),re.removeEventListener("resize",K),Ee&&Ee.disconnect()}},[we,fe]);const Ne=R.useMemo(()=>Bc(()=>{fe()}),[fe]);R.useEffect(()=>()=>{Ne.clear()},[Ne]),R.useEffect(()=>{Z(!0)},[]),R.useEffect(()=>{we(),fe()}),R.useEffect(()=>{ce(dm!==J)},[ce,J]),R.useImperativeHandle(l,()=>({updateIndicator:we,updateScrollButtons:fe}),[we,fe]);const ve=v(JN,Ce({},w,{className:Vt(j.indicator,w.className),ownerState:B,style:Ce({},J,w.style)}));let pt=0;const Se=R.Children.map(u,K=>{if(!R.isValidElement(K))return null;const re=K.props.value===void 0?pt:K.props.value;Re.set(re,pt);const Ee=re===T;return pt+=1,R.cloneElement(K,Ce({fullWidth:P==="fullWidth",indicator:Ee&&!Y&&ve,selected:Ee,selectionFollowsFocus:y,onChange:m,textColor:N,value:re},pt===1&&T===!1&&!K.props.tabIndex?{tabIndex:0}:{}))}),He=K=>{const re=te.current,Ee=mx(re).activeElement;if(Ee.getAttribute("role")!=="tab")return;let Qe=g==="horizontal"?"ArrowLeft":"ArrowUp",Xe=g==="horizontal"?"ArrowRight":"ArrowDown";switch(g==="horizontal"&&i&&(Qe="ArrowRight",Xe="ArrowLeft"),K.key){case Qe:K.preventDefault(),Qi(re,Ee,cm);break;case Xe:K.preventDefault(),Qi(re,Ee,um);break;case"Home":K.preventDefault(),Qi(re,null,um);break;case"End":K.preventDefault(),Qi(re,null,cm);break}},Me=ee();return L(XN,Ce({className:Vt(j.root,d),ownerState:B,ref:n,as:f},A,{children:[Me.scrollButtonStart,Me.scrollbarSizeListener,L(KN,{className:j.scroller,ownerState:B,style:{overflow:oe.overflow,[x?`margin${i?"Left":"Right"}`:"marginBottom"]:k?void 0:-oe.scrollbarWidth},ref:me,onScroll:Ne,children:[v(ZN,{"aria-label":o,"aria-labelledby":s,"aria-orientation":g==="vertical"?"vertical":null,className:j.flexContainer,ownerState:B,onKeyDown:He,ref:te,role:"tablist",children:Se}),Y&&ve]}),Me.scrollButtonEnd]}))}),rI=tI;var cw=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(cw||{}),nI=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(nI||{});const aI=_i("org.sagebionetworks.repo.model.TermsOfUseAccessRequirement"),iI="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",oI="org.sagebionetworks.repo.model.file.S3FileHandle",Fp=_i(oI,iI),sI="org.sagebionetworks.repo.model.file.ExternalFileHandle",lI="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",uI="org.sagebionetworks.repo.model.file.ProxyFileHandle",cI=_i(uI,lI,sI),dI="org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",fI="org.sagebionetworks.repo.model.table.FacetColumnRangeRequest",zc=_i(dI),pI=_i(fI),hI=An(v("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp");function mI(e,t){const{accessToken:n,keyFactory:a}=je(),r={accessRequirementId:e};return Pb(a.getApprovedSubmissionInfoQueryKey(r),async i=>await AC({...r,nextPageToken:i.pageParam},n),{...t,getNextPageParam:i=>i.nextPageToken})}function dw(e,t,n=Cb,a){const{accessToken:r,keyFactory:i}=je();return Ei(i.getEntityBundleQueryKey(e,t,n),()=>kC(e,n,t,r),a)}function vI(e,t){const{accessToken:n,keyFactory:a}=je();return Ei(a.getEntityChildrenQueryKey(e,!1),()=>ub(e,n),t)}function fj(e,t){const{accessToken:n,keyFactory:a}=je();return Pb(a.getEntityChildrenQueryKey(e,!0),async r=>await ub({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}var Dp={},gI=PC;Object.defineProperty(Dp,"__esModule",{value:!0});var fw=Dp.default=void 0,yI=gI(TC()),bI=RC,wI=(0,yI.default)((0,bI.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");fw=Dp.default=wI;var Hc={exports:{}},nt={},Wc={exports:{}},kn={};function pw(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function SI(e,t,n){}function _I(e,t,n){}var EI=/javascript\s*\:/img;function CI(e,t){return EI.test(t)?"":t}kn.whiteList=pw();kn.getDefaultWhiteList=pw;kn.onAttr=SI;kn.onIgnoreAttr=_I;kn.safeAttrValue=CI;var xI={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,r;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,r=e.length;a<r;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Na=xI;function NI(e,t){e=Na.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,a=!1,r=0,i=0,o="";function s(){if(!a){var u=Na.trim(e.slice(r,i)),d=u.indexOf(":");if(d!==-1){var f=Na.trim(u.slice(0,d)),p=Na.trim(u.slice(d+1));if(f){var h=t(r,o.length,f,p,u);h&&(o+=h+"; ")}}}r=i+1}for(;i<n;i++){var l=e[i];if(l==="/"&&e[i+1]==="*"){var c=e.indexOf("*/",i+2);if(c===-1)break;i=c+1,r=i+1,a=!1}else l==="("?a=!0:l===")"?a=!1:l===";"?a||s():l===`
`&&s()}return Na.trim(o)}var II=NI,Gi=kn,TI=II;function fm(e){return e==null}function PI(e){var t={};for(var n in e)t[n]=e[n];return t}function hw(e){e=PI(e||{}),e.whiteList=e.whiteList||Gi.whiteList,e.onAttr=e.onAttr||Gi.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Gi.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Gi.safeAttrValue,this.options=e}hw.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,a=n.whiteList,r=n.onAttr,i=n.onIgnoreAttr,o=n.safeAttrValue,s=TI(e,function(l,c,u,d,f){var p=a[u],h=!1;if(p===!0?h=p:typeof p=="function"?h=p(d):p instanceof RegExp&&(h=p.test(d)),h!==!0&&(h=!1),d=o(u,d),!!d){var m={position:c,sourcePosition:l,source:f,isWhite:h};if(h){var g=r(u,d,m);return fm(g)?u+":"+d:g}else{var g=i(u,d,m);if(!fm(g))return g}}});return s};var RI=hw;(function(e,t){var n=kn,a=RI;function r(o,s){var l=new a(s);return l.process(o)}t=e.exports=r,t.FilterCSS=a;for(var i in n)t[i]=n[i];typeof window<"u"&&(window.filterCSS=e.exports)})(Wc,Wc.exports);var Op=Wc.exports,qp={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,r;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,r=e.length;a<r;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},AI=Op.FilterCSS,kI=Op.getDefaultWhiteList,Lo=qp;function mw(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var vw=new AI;function $I(e,t,n){}function FI(e,t,n){}function DI(e,t,n){}function OI(e,t,n){}function gw(e){return e.replace(LI,"&lt;").replace(VI,"&gt;")}function qI(e,t,n,a){if(n=Ew(n),t==="href"||t==="src"){if(n=Lo.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Yi.lastIndex=0,Yi.test(n))return""}else if(t==="style"){if(pm.lastIndex=0,pm.test(n)||(hm.lastIndex=0,hm.test(n)&&(Yi.lastIndex=0,Yi.test(n))))return"";a!==!1&&(a=a||vw,n=a.process(n))}return n=Cw(n),n}var LI=/</g,VI=/>/g,MI=/"/g,BI=/&quot;/g,UI=/&#([a-zA-Z0-9]*);?/gim,zI=/&colon;?/gim,HI=/&newline;?/gim,Yi=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,pm=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,hm=/u\s*r\s*l\s*\(.*/gi;function yw(e){return e.replace(MI,"&quot;")}function bw(e){return e.replace(BI,'"')}function ww(e){return e.replace(UI,function(n,a){return a[0]==="x"||a[0]==="X"?String.fromCharCode(parseInt(a.substr(1),16)):String.fromCharCode(parseInt(a,10))})}function Sw(e){return e.replace(zI,":").replace(HI," ")}function _w(e){for(var t="",n=0,a=e.length;n<a;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Lo.trim(t)}function Ew(e){return e=bw(e),e=ww(e),e=Sw(e),e=_w(e),e}function Cw(e){return e=yw(e),e=gw(e),e}function WI(){return""}function jI(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function a(o){return n?!0:Lo.indexOf(e,o)!==-1}var r=[],i=!1;return{onIgnoreTag:function(o,s,l){if(a(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return r.push([i!==!1?i:l.position,u]),i=!1,c}else return i||(i=l.position),"[removed]";else return t(o,s,l)},remove:function(o){var s="",l=0;return Lo.forEach(r,function(c){s+=o.slice(l,c[0]),l=c[1]}),s+=o.slice(l),s}}}function QI(e){for(var t="",n=0;n<e.length;){var a=e.indexOf("<!--",n);if(a===-1){t+=e.slice(n);break}t+=e.slice(n,a);var r=e.indexOf("-->",a);if(r===-1)break;n=r+3}return t}function GI(e){var t=e.split("");return t=t.filter(function(n){var a=n.charCodeAt(0);return a===127?!1:a<=31?a===10||a===13:!0}),t.join("")}nt.whiteList=mw();nt.getDefaultWhiteList=mw;nt.onTag=$I;nt.onIgnoreTag=FI;nt.onTagAttr=DI;nt.onIgnoreTagAttr=OI;nt.safeAttrValue=qI;nt.escapeHtml=gw;nt.escapeQuote=yw;nt.unescapeQuote=bw;nt.escapeHtmlEntities=ww;nt.escapeDangerHtml5Entities=Sw;nt.clearNonPrintableCharacter=_w;nt.friendlyAttrValue=Ew;nt.escapeAttrValue=Cw;nt.onIgnoreTagStripAll=WI;nt.StripTagBody=jI;nt.stripCommentTag=QI;nt.stripBlankChar=GI;nt.cssFilter=vw;nt.getDefaultCSSWhiteList=kI;var js={},Or=qp;function YI(e){var t=Or.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Or.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function XI(e){return e.slice(0,2)==="</"}function KI(e,t,n){var a="",r=0,i=!1,o=!1,s=0,l=e.length,c="",u="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(i===!1){if(d==="<"){i=s;continue}}else if(o===!1){if(d==="<"){a+=n(e.slice(r,s)),i=s,r=s;continue}if(d===">"||s===l-1){a+=n(e.slice(r,i)),u=e.slice(i,s+1),c=YI(u),a+=t(i,a.length,c,u,XI(u)),r=s+1,i=!1;continue}if(d==='"'||d==="'")for(var f=1,p=e.charAt(s-f);p.trim()===""||p==="=";){if(p==="="){o=d;continue e}p=e.charAt(s-++f)}}else if(d===o){o=!1;continue}}return r<l&&(a+=n(e.substr(r))),a}var ZI=/[^a-zA-Z0-9\\_:.-]/gim;function JI(e,t){var n=0,a=0,r=[],i=!1,o=e.length;function s(f,p){if(f=Or.trim(f),f=f.replace(ZI,"").toLowerCase(),!(f.length<1)){var h=t(f,p||"");h&&r.push(h)}}for(var l=0;l<o;l++){var c=e.charAt(l),u,d;if(i===!1&&c==="="){i=e.slice(n,l),n=l+1,a=e.charAt(n)==='"'||e.charAt(n)==="'"?n:tT(e,l+1);continue}if(i!==!1&&l===a){if(d=e.indexOf(c,l+1),d===-1)break;u=Or.trim(e.slice(a+1,d)),s(i,u),i=!1,l=d,n=l+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(d=eT(e,l),d===-1){u=Or.trim(e.slice(n,l)),s(u),i=!1,n=l+1;continue}else{l=d-1;continue}else if(d=rT(e,l-1),d===-1){u=Or.trim(e.slice(n,l)),u=mm(u),s(i,u),i=!1,n=l+1;continue}else continue}return n<e.length&&(i===!1?s(e.slice(n)):s(i,mm(Or.trim(e.slice(n))))),Or.trim(r.join(" "))}function eT(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function tT(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function rT(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function nT(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function mm(e){return nT(e)?e.substr(1,e.length-2):e}js.parseTag=KI;js.parseAttr=JI;var aT=Op.FilterCSS,zt=nt,xw=js,iT=xw.parseTag,oT=xw.parseAttr,Eo=qp;function Xi(e){return e==null}function sT(e){var t=Eo.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Eo.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Eo.trim(e.slice(0,-1))),{html:e,closing:n}}function lT(e){var t={};for(var n in e)t[n]=e[n];return t}function uT(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(a){return a.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Nw(e){e=lT(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=zt.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=uT(e.whiteList||e.allowList):e.whiteList=zt.whiteList,e.onTag=e.onTag||zt.onTag,e.onTagAttr=e.onTagAttr||zt.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||zt.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||zt.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||zt.safeAttrValue,e.escapeHtml=e.escapeHtml||zt.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new aT(e.css))}Nw.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,a=n.whiteList,r=n.onTag,i=n.onIgnoreTag,o=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=t.cssFilter;n.stripBlankChar&&(e=zt.stripBlankChar(e)),n.allowCommentTag||(e=zt.stripCommentTag(e));var d=!1;n.stripIgnoreTagBody&&(d=zt.StripTagBody(n.stripIgnoreTagBody,i),i=d.onIgnoreTag);var f=iT(e,function(p,h,m,g,b){var E={sourcePosition:p,position:h,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(a,m)},y=r(m,g,E);if(!Xi(y))return y;if(E.isWhite){if(E.isClosing)return"</"+m+">";var _=sT(g),S=a[m],w=oT(_.html,function(C,N){var T=Eo.indexOf(S,C)!==-1,P=o(m,C,N,T);return Xi(P)?T?(N=l(m,C,N,u),N?C+'="'+N+'"':C):(P=s(m,C,N,T),Xi(P)?void 0:P):P});return g="<"+m,w&&(g+=" "+w),_.closing&&(g+=" /"),g+=">",g}else return y=i(m,g,E),Xi(y)?c(g):y},c);return d&&(f=d.remove(f)),f};var cT=Nw;(function(e,t){var n=nt,a=js,r=cT;function i(s,l){var c=new r(l);return c.process(s)}t=e.exports=i,t.filterXSS=i,t.FilterXSS=r,function(){for(var s in n)t[s]=n[s];for(var l in a)t[l]=a[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Hc,Hc.exports);var dT=Hc.exports;const Iw=Nt(dT),Tw={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function jc(e){let t="";const{align:n="",highlight:a=""}=e,r=a==="true",i=n.toLowerCase();i==="left"&&(t+="floatleft "),i==="right"&&(t+="floatright ");const o=i==="center",s=r?"secondary":"neutral",l=v(ks,{href:e.url,className:t,variant:"contained",color:s,sx:{"&:hover":{backgroundColor:r?void 0:"secondary.main",color:"white"},...!o&&e.url&&{margin:"20px 20px 20px 0px"}},children:e.text});return o?v("div",{style:{textAlign:"center"},children:l}):v("span",{children:l})}try{jc.displayName="MarkdownButton",jc.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}}}catch{}async function fT(e,t,n){const a=new Set;try{let r=await Qa(n,e,t);for(;$C(r);){if(a.has(r.id))throw new Error("Link forms a cycle.");a.add(r.id),r=await Qa(n,r.linksTo.targetId,r.linksTo.targetVersionNumber)}return r}catch(r){throw new Error(`${e} could not be resolved.
${r.message}`)}}function pT(e,t,n){const{accessToken:a}=je();return Ei(["resolveLinkEntity",e,t],()=>fT(e,t,a),n)}function hT(e,t,n){const{accessToken:a,keyFactory:r}=je();return Ei(r.getIsUserMemberOfTeamQueryKey(e,t),()=>FC(e,t,a),n)}function mT(e){const{rawHtml:t,isLoading:n,isTrusted:a}=e;return R.useMemo(()=>{if(!n)return a?t:Iw(t,Tw)},[n,a,t])}function Qc(e){const{createdByUserId:t,rawHtml:n}=e,a=R.useRef(null),[r,i]=R.useState(100),{data:o,isLoading:s}=hT(JC,t),l=()=>{if(a!=null&&a.current&&(a!=null&&a.current.contentWindow)){let d=a.current.contentWindow.document.body.scrollHeight;d<450&&(d=450),(!r||Math.abs(d-r)>70)&&i(d+50)}};R.useEffect(()=>{setInterval(()=>{l()},500)},[n]);const u=mT({rawHtml:n,isLoading:s,isTrusted:!!o});return s?v(Ls,{}):L(G,{children:[n!==u&&v(bp,{variant:"info",dismissible:!1,show:!0,transition:!1,children:"Limited rendering only."}),v("iframe",{ref:a,srcDoc:u,height:`${r}px`,style:{border:0,width:"100%"}})]})}try{Qc.displayName="HtmlPreview",Qc.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}}}catch{}var rt=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(rt||{});const vT=30*e1;function Vo(e){const{fileHandle:t,fileHandleAssociation:n,previewType:a}=e,r={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:i,isLoading:o}=u1(t,r,vT,{useErrorBoundary:!0});return o?v(Ls,{}):a===rt.HTML?v(Qc,{rawHtml:i,createdByUserId:t.createdBy}):(a!==rt.NONE&&console.warn(`Rendering a preview of type ${a} is not supported in Portals`),v(G,{}))}try{Vo.displayName="FileHandleContentRenderer",Vo.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}}}catch{}const Pw=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],gT=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],yT=[".ogv",".ogg"],bT=[...gT,...yT,".webm"],wT=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],ST=[".md",".markdown",".rmd"];function _T(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function ET(e){if(!Fp(e))return rt.NONE;const t=_T(e.fileName);return t&&bT.includes(t)?rt.VIDEO:t===".ipynb"?rt.IPYNB:Pw.includes(e.contentType)?rt.IMAGE:e.contentType==="text/html"?rt.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?rt.PDF:t&&wT.includes(t)?rt.CODE:t&&ST.includes(t)?rt.MARKDOWN:e.contentType==="image/tiff"?rt.TIFF:rt.NONE}function CT(e,t){const n=e.contentType;return Fp(e)?Pw.includes(e.contentType)?rt.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?rt.ZIP:rt.CSV:n.toLowerCase()==="text/tab-separated-values"?rt.TAB:rt.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?rt.PDF:rt.NONE:rt.NONE}function Gc(e){const{bundle:t}=e,{accessToken:n}=je(),a=!!n;if(!pp(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const r=t.entity.dataFileHandleId,i=t.fileHandles.find(s=>s.id===r);if(!i&&!a)return v(bp,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:v(DC,{})});if(i){const s=ET(i);if(s!==rt.NONE)return v(Vo,{fileHandle:i,fileHandleAssociation:{fileHandleId:r,associateObjectId:t.entity.id,associateObjectType:or.FileEntity},previewType:s})}const o=t.fileHandles.find(s=>Fp(s)&&s.isPreview);if(o&&i){const s=CT(o,i);if(s!==rt.NONE)return v(Vo,{fileHandle:o,fileHandleAssociation:{fileHandleId:o.id,associateObjectId:t.entity.id,associateObjectType:or.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{Gc.displayName="FileEntityPreview",Gc.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle"}}}}}catch{}function Yc(e){const{entityId:t,versionNumber:n}=e,{data:a,isLoading:r}=pT(t,n),i=a&&pp(a),{data:o,isLoading:s}=dw(a==null?void 0:a.id,a==null?void 0:a.versionNumber,Cb,{enabled:!!i,useErrorBoundary:!0});if(r||s)return v(Ls,{});if(i)return v(Gc,{bundle:o});throw new Error(`${t} is not a File and cannot be previewed.`)}try{Yc.displayName="EntityPreview",Yc.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function Xc(e){const t=d1(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt(e.versionNumber??""),a=t.targetId,r=Number.isNaN(n)?t.targetVersionNumber:n;return v(Yc,{entityId:a,versionNumber:r})}try{Xc.displayName="MarkdownEntityPreview",Xc.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}}}catch{}const Kc=({info:e})=>v(G,{children:e&&L("p",{className:"SubmissionInfoCard",children:[v("strong",{children:" Project Lead: "})," ",v("span",{children:e.projectLead})," ",v("br",{}),v("strong",{children:" Institution: "})," ",v("span",{children:e.institution})," ",v("br",{}),v("strong",{children:" Data Access Request Submitted By: "})," ",v(ra,{ownerId:e.submittedBy,size:ko})," ",v("br",{}),L("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Ya(lr(e.modifiedOn),"M/D/YYYY"),"):"]}),v(xt,{markdown:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>L("div",{children:[v(ra,{ownerId:t.userId,size:ko})," ",t.type]},`${t.userId}-${t.type}`))]})}),Mo=()=>L("p",{className:"SubmissionInfoCard",children:[v(wp,{numCols:1,numRows:4}),v(mn,{variant:"rectangular",width:"100%",height:80})]});try{Kc.displayName="SubmissionInfoCard",Kc.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}try{Mo.displayName="LoadingSubmissionInfoCard",Mo.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}}}catch{}const Zc=e=>{const{accessRequirementId:t}=e,{ref:n,inView:a}=pa(),{data:r,status:i,isLoading:o,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:c}=mI(t,{useErrorBoundary:!0});R.useEffect(()=>{i==="success"&&!l&&s&&c&&a&&c()},[i,s,l,c,a]);const u=(r==null?void 0:r.pages.flatMap(d=>d.results))??[];return L(G,{children:[u.length>0&&L("div",{className:"IDUReport",children:[u.map(d=>L(z.Fragment,{children:[v(Kc,{info:d}),v("hr",{})]},JSON.stringify(d))),v("div",{ref:n})]}),(o||l)&&L(G,{children:[v(Mo,{}),v(Mo,{})]})]})};try{Zc.displayName="IDUReport",Zc.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function Jc(e){const{accessRestrictionId:t}=e;return v(Zc,{accessRequirementId:t})}try{Jc.displayName="MarkdownIDUReport",Jc.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}function It(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,a;n<e.length;n++)(a=It(e[n]))!==""&&(t+=(t&&" ")+a);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const vm=e=>{let t;const n=new Set,a=(l,c)=>{const u=typeof l=="function"?l(t):l;if(!Object.is(u,t)){const d=t;t=c??typeof u!="object"?u:Object.assign({},t,u),n.forEach(f=>f(t,d))}},r=()=>t,s={setState:a,getState:r,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(a,r,s),s},xT=e=>e?vm(e):vm;var Rw={exports:{}},Aw={},kw={exports:{}},$w={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=R;function NT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var IT=typeof Object.is=="function"?Object.is:NT,TT=na.useState,PT=na.useEffect,RT=na.useLayoutEffect,AT=na.useDebugValue;function kT(e,t){var n=t(),a=TT({inst:{value:n,getSnapshot:t}}),r=a[0].inst,i=a[1];return RT(function(){r.value=n,r.getSnapshot=t,ql(r)&&i({inst:r})},[e,n,t]),PT(function(){return ql(r)&&i({inst:r}),e(function(){ql(r)&&i({inst:r})})},[e]),AT(n),n}function ql(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!IT(e,n)}catch{return!0}}function $T(e,t){return t()}var FT=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$T:kT;$w.useSyncExternalStore=na.useSyncExternalStore!==void 0?na.useSyncExternalStore:FT;kw.exports=$w;var DT=kw.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=R,OT=DT;function qT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var LT=typeof Object.is=="function"?Object.is:qT,VT=OT.useSyncExternalStore,MT=Qs.useRef,BT=Qs.useEffect,UT=Qs.useMemo,zT=Qs.useDebugValue;Aw.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var i=MT(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=UT(function(){function l(p){if(!c){if(c=!0,u=p,p=a(p),r!==void 0&&o.hasValue){var h=o.value;if(r(h,p))return d=h}return d=p}if(h=d,LT(u,p))return h;var m=a(p);return r!==void 0&&r(h,m)?h:(u=p,d=m)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,a,r]);var s=VT(e,i[0],i[1]);return BT(function(){o.hasValue=!0,o.value=s},[s]),zT(s),s};Rw.exports=Aw;var HT=Rw.exports;const WT=Nt(HT),{useSyncExternalStoreWithSelector:jT}=WT;function QT(e,t=e.getState,n){const a=jT(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return R.useDebugValue(a),a}function kt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,r]of e)if(!Object.is(r,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Object.is(e[n[a]],t[n[a]]))return!1;return!0}var GT={value:()=>{}};function Gs(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new Co(n)}function Co(e){this._=e}function YT(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",r=n.indexOf(".");if(r>=0&&(a=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}Co.prototype=Gs.prototype={constructor:Co,on:function(e,t){var n=this._,a=YT(e+"",n),r,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((r=(e=a[i]).type)&&(r=XT(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(r=(e=a[i]).type)n[r]=gm(n[r],e.name,t);else if(t==null)for(r in n)n[r]=gm(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Co(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),a=0,r,i;a<r;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,r=i.length;a<r;++a)i[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)}};function XT(e,t){for(var n=0,a=e.length,r;n<a;++n)if((r=e[n]).name===t)return r.value}function gm(e,t,n){for(var a=0,r=e.length;a<r;++a)if(e[a].name===t){e[a]=GT,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var ed="http://www.w3.org/1999/xhtml";const ym={svg:"http://www.w3.org/2000/svg",xhtml:ed,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ys(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ym.hasOwnProperty(t)?{space:ym[t],local:e}:e}function KT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ed&&t.documentElement.namespaceURI===ed?t.createElement(e):t.createElementNS(n,e)}}function ZT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fw(e){var t=Ys(e);return(t.local?ZT:KT)(t)}function JT(){}function Lp(e){return e==null?JT:function(){return this.querySelector(e)}}function eP(e){typeof e!="function"&&(e=Lp(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,s=a[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new $t(a,this._parents)}function tP(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rP(){return[]}function Dw(e){return e==null?rP:function(){return this.querySelectorAll(e)}}function nP(e){return function(){return tP(e.apply(this,arguments))}}function aP(e){typeof e=="function"?e=nP(e):e=Dw(e);for(var t=this._groups,n=t.length,a=[],r=[],i=0;i<n;++i)for(var o=t[i],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(a.push(e.call(l,l.__data__,c,o)),r.push(l));return new $t(a,r)}function Ow(e){return function(){return this.matches(e)}}function qw(e){return function(t){return t.matches(e)}}var iP=Array.prototype.find;function oP(e){return function(){return iP.call(this.children,e)}}function sP(){return this.firstElementChild}function lP(e){return this.select(e==null?sP:oP(typeof e=="function"?e:qw(e)))}var uP=Array.prototype.filter;function cP(){return Array.from(this.children)}function dP(e){return function(){return uP.call(this.children,e)}}function fP(e){return this.selectAll(e==null?cP:dP(typeof e=="function"?e:qw(e)))}function pP(e){typeof e!="function"&&(e=Ow(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,s=a[r]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new $t(a,this._parents)}function Lw(e){return new Array(e.length)}function hP(){return new $t(this._enter||this._groups.map(Lw),this._parents)}function Bo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bo.prototype={constructor:Bo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function mP(e){return function(){return e}}function vP(e,t,n,a,r,i){for(var o=0,s,l=t.length,c=i.length;o<c;++o)(s=t[o])?(s.__data__=i[o],a[o]=s):n[o]=new Bo(e,i[o]);for(;o<l;++o)(s=t[o])&&(r[o]=s)}function gP(e,t,n,a,r,i,o){var s,l,c=new Map,u=t.length,d=i.length,f=new Array(u),p;for(s=0;s<u;++s)(l=t[s])&&(f[s]=p=o.call(l,l.__data__,s,t)+"",c.has(p)?r[s]=l:c.set(p,l));for(s=0;s<d;++s)p=o.call(e,i[s],s,i)+"",(l=c.get(p))?(a[s]=l,l.__data__=i[s],c.delete(p)):n[s]=new Bo(e,i[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function yP(e){return e.__data__}function bP(e,t){if(!arguments.length)return Array.from(this,yP);var n=t?gP:vP,a=this._parents,r=this._groups;typeof e!="function"&&(e=mP(e));for(var i=r.length,o=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=a[c],d=r[c],f=d.length,p=wP(e.call(u,u&&u.__data__,c,a)),h=p.length,m=s[c]=new Array(h),g=o[c]=new Array(h),b=l[c]=new Array(f);n(u,d,m,g,b,p,t);for(var E=0,y=0,_,S;E<h;++E)if(_=m[E]){for(E>=y&&(y=E+1);!(S=g[y])&&++y<h;);_._next=S||null}}return o=new $t(o,a),o._enter=s,o._exit=l,o}function wP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function SP(){return new $t(this._exit||this._groups.map(Lw),this._parents)}function _P(e,t,n){var a=this.enter(),r=this,i=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),a&&r?a.merge(r).order():r}function EP(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,r=n.length,i=a.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var c=n[l],u=a[l],d=c.length,f=s[l]=new Array(d),p,h=0;h<d;++h)(p=c[h]||u[h])&&(f[h]=p);for(;l<r;++l)s[l]=n[l];return new $t(s,this._parents)}function CP(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],r=a.length-1,i=a[r],o;--r>=0;)(o=a[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function xP(e){e||(e=NP);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,a=n.length,r=new Array(a),i=0;i<a;++i){for(var o=n[i],s=o.length,l=r[i]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new $t(r,this._parents).order()}function NP(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function IP(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function TP(){return Array.from(this)}function PP(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],r=0,i=a.length;r<i;++r){var o=a[r];if(o)return o}return null}function RP(){let e=0;for(const t of this)++e;return e}function AP(){return!this.node()}function kP(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var r=t[n],i=0,o=r.length,s;i<o;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function $P(e){return function(){this.removeAttribute(e)}}function FP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DP(e,t){return function(){this.setAttribute(e,t)}}function OP(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qP(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function LP(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function VP(e,t){var n=Ys(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?FP:$P:typeof t=="function"?n.local?LP:qP:n.local?OP:DP)(n,t))}function Vw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MP(e){return function(){this.style.removeProperty(e)}}function BP(e,t,n){return function(){this.style.setProperty(e,t,n)}}function UP(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function zP(e,t,n){return arguments.length>1?this.each((t==null?MP:typeof t=="function"?UP:BP)(e,t,n??"")):aa(this.node(),e)}function aa(e,t){return e.style.getPropertyValue(t)||Vw(e).getComputedStyle(e,null).getPropertyValue(t)}function HP(e){return function(){delete this[e]}}function WP(e,t){return function(){this[e]=t}}function jP(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function QP(e,t){return arguments.length>1?this.each((t==null?HP:typeof t=="function"?jP:WP)(e,t)):this.node()[e]}function Mw(e){return e.trim().split(/^|\s+/)}function Vp(e){return e.classList||new Bw(e)}function Bw(e){this._node=e,this._names=Mw(e.getAttribute("class")||"")}Bw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Uw(e,t){for(var n=Vp(e),a=-1,r=t.length;++a<r;)n.add(t[a])}function zw(e,t){for(var n=Vp(e),a=-1,r=t.length;++a<r;)n.remove(t[a])}function GP(e){return function(){Uw(this,e)}}function YP(e){return function(){zw(this,e)}}function XP(e,t){return function(){(t.apply(this,arguments)?Uw:zw)(this,e)}}function KP(e,t){var n=Mw(e+"");if(arguments.length<2){for(var a=Vp(this.node()),r=-1,i=n.length;++r<i;)if(!a.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?XP:t?GP:YP)(n,t))}function ZP(){this.textContent=""}function JP(e){return function(){this.textContent=e}}function eR(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function tR(e){return arguments.length?this.each(e==null?ZP:(typeof e=="function"?eR:JP)(e)):this.node().textContent}function rR(){this.innerHTML=""}function nR(e){return function(){this.innerHTML=e}}function aR(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function iR(e){return arguments.length?this.each(e==null?rR:(typeof e=="function"?aR:nR)(e)):this.node().innerHTML}function oR(){this.nextSibling&&this.parentNode.appendChild(this)}function sR(){return this.each(oR)}function lR(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uR(){return this.each(lR)}function cR(e){var t=typeof e=="function"?e:Fw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dR(){return null}function fR(e,t){var n=typeof e=="function"?e:Fw(e),a=t==null?dR:typeof t=="function"?t:Lp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function pR(){var e=this.parentNode;e&&e.removeChild(this)}function hR(){return this.each(pR)}function mR(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vR(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gR(e){return this.select(e?vR:mR)}function yR(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bR(e){return function(t){e.call(this,t,this.__data__)}}function wR(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function SR(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++a]=i;++a?t.length=a:delete this.__on}}}function _R(e,t,n){return function(){var a=this.__on,r,i=bR(t);if(a){for(var o=0,s=a.length;o<s;++o)if((r=a[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function ER(e,t,n){var a=wR(e+""),r,i=a.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<i;++r)if((o=a[r]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?_R:SR,r=0;r<i;++r)this.each(s(a[r],t,n));return this}function Hw(e,t,n){var a=Vw(e),r=a.CustomEvent;typeof r=="function"?r=new r(t,n):(r=a.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function CR(e,t){return function(){return Hw(this,e,t)}}function xR(e,t){return function(){return Hw(this,e,t.apply(this,arguments))}}function NR(e,t){return this.each((typeof t=="function"?xR:CR)(e,t))}function*IR(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],r=0,i=a.length,o;r<i;++r)(o=a[r])&&(yield o)}var Ww=[null];function $t(e,t){this._groups=e,this._parents=t}function Pi(){return new $t([[document.documentElement]],Ww)}function TR(){return this}$t.prototype=Pi.prototype={constructor:$t,select:eP,selectAll:aP,selectChild:lP,selectChildren:fP,filter:pP,data:bP,enter:hP,exit:SP,join:_P,merge:EP,selection:TR,order:CP,sort:xP,call:IP,nodes:TP,node:PP,size:RP,empty:AP,each:kP,attr:VP,style:zP,property:QP,classed:KP,text:tR,html:iR,raise:sR,lower:uR,append:cR,insert:fR,remove:hR,clone:gR,datum:yR,on:ER,dispatch:NR,[Symbol.iterator]:IR};function Wt(e){return typeof e=="string"?new $t([[document.querySelector(e)]],[document.documentElement]):new $t([[e]],Ww)}function PR(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rr(e,t){if(e=PR(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const RR={passive:!1},Za={capture:!0,passive:!1};function Ll(e){e.stopImmediatePropagation()}function Yn(e){e.preventDefault(),e.stopImmediatePropagation()}function jw(e){var t=e.document.documentElement,n=Wt(e).on("dragstart.drag",Yn,Za);"onselectstart"in t?n.on("selectstart.drag",Yn,Za):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qw(e,t){var n=e.document.documentElement,a=Wt(e).on("dragstart.drag",null);t&&(a.on("click.drag",Yn,Za),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ki=e=>()=>e;function td(e,{sourceEvent:t,subject:n,target:a,identifier:r,active:i,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}td.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function AR(e){return!e.ctrlKey&&!e.button}function kR(){return this.parentNode}function $R(e,t){return t??{x:e.x,y:e.y}}function FR(){return navigator.maxTouchPoints||"ontouchstart"in this}function DR(){var e=AR,t=kR,n=$R,a=FR,r={},i=Gs("start","drag","end"),o=0,s,l,c,u,d=0;function f(_){_.on("mousedown.drag",p).filter(a).on("touchstart.drag",g).on("touchmove.drag",b,RR).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(_,S){if(!(u||!e.call(this,_,S))){var w=y(this,t.call(this,_,S),_,S,"mouse");w&&(Wt(_.view).on("mousemove.drag",h,Za).on("mouseup.drag",m,Za),jw(_.view),Ll(_),c=!1,s=_.clientX,l=_.clientY,w("start",_))}}function h(_){if(Yn(_),!c){var S=_.clientX-s,w=_.clientY-l;c=S*S+w*w>d}r.mouse("drag",_)}function m(_){Wt(_.view).on("mousemove.drag mouseup.drag",null),Qw(_.view,c),Yn(_),r.mouse("end",_)}function g(_,S){if(e.call(this,_,S)){var w=_.changedTouches,C=t.call(this,_,S),N=w.length,T,P;for(T=0;T<N;++T)(P=y(this,C,_,S,w[T].identifier,w[T]))&&(Ll(_),P("start",_,w[T]))}}function b(_){var S=_.changedTouches,w=S.length,C,N;for(C=0;C<w;++C)(N=r[S[C].identifier])&&(Yn(_),N("drag",_,S[C]))}function E(_){var S=_.changedTouches,w=S.length,C,N;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<w;++C)(N=r[S[C].identifier])&&(Ll(_),N("end",_,S[C]))}function y(_,S,w,C,N,T){var P=i.copy(),k=rr(T||w,S),A,I,x;if((x=n.call(_,new td("beforestart",{sourceEvent:w,target:f,identifier:N,active:o,x:k[0],y:k[1],dx:0,dy:0,dispatch:P}),C))!=null)return A=x.x-k[0]||0,I=x.y-k[1]||0,function F(O,$,V){var q=k,B;switch(O){case"start":r[N]=F,B=o++;break;case"end":delete r[N],--o;case"drag":k=rr(V||$,S),B=o;break}P.call(O,_,new td(O,{sourceEvent:$,subject:x,target:f,identifier:N,active:B,x:k[0]+A,y:k[1]+I,dx:k[0]-q[0],dy:k[1]-q[1],dispatch:P}),C)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Ki(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:Ki(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Ki(_),f):n},f.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:Ki(!!_),f):a},f.on=function(){var _=i.on.apply(i,arguments);return _===i?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function Mp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Gw(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Ri(){}var Ja=.7,Uo=1/Ja,Xn="\\s*([+-]?\\d+)\\s*",ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OR=/^#([0-9a-f]{3,8})$/,qR=new RegExp(`^rgb\\(${Xn},${Xn},${Xn}\\)$`),LR=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),VR=new RegExp(`^rgba\\(${Xn},${Xn},${Xn},${ei}\\)$`),MR=new RegExp(`^rgba\\(${ir},${ir},${ir},${ei}\\)$`),BR=new RegExp(`^hsl\\(${ei},${ir},${ir}\\)$`),UR=new RegExp(`^hsla\\(${ei},${ir},${ir},${ei}\\)$`),bm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mp(Ri,ti,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wm,formatHex:wm,formatHex8:zR,formatHsl:HR,formatRgb:Sm,toString:Sm});function wm(){return this.rgb().formatHex()}function zR(){return this.rgb().formatHex8()}function HR(){return Yw(this).formatHsl()}function Sm(){return this.rgb().formatRgb()}function ti(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=OR.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_m(t):n===3?new _t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qR.exec(e))?new _t(t[1],t[2],t[3],1):(t=LR.exec(e))?new _t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=VR.exec(e))?Zi(t[1],t[2],t[3],t[4]):(t=MR.exec(e))?Zi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=BR.exec(e))?xm(t[1],t[2]/100,t[3]/100,1):(t=UR.exec(e))?xm(t[1],t[2]/100,t[3]/100,t[4]):bm.hasOwnProperty(e)?_m(bm[e]):e==="transparent"?new _t(NaN,NaN,NaN,0):null}function _m(e){return new _t(e>>16&255,e>>8&255,e&255,1)}function Zi(e,t,n,a){return a<=0&&(e=t=n=NaN),new _t(e,t,n,a)}function WR(e){return e instanceof Ri||(e=ti(e)),e?(e=e.rgb(),new _t(e.r,e.g,e.b,e.opacity)):new _t}function rd(e,t,n,a){return arguments.length===1?WR(e):new _t(e,t,n,a??1)}function _t(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Mp(_t,rd,Gw(Ri,{brighter(e){return e=e==null?Uo:Math.pow(Uo,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ja:Math.pow(Ja,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _t(vn(this.r),vn(this.g),vn(this.b),zo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Em,formatHex:Em,formatHex8:jR,formatRgb:Cm,toString:Cm}));function Em(){return`#${pn(this.r)}${pn(this.g)}${pn(this.b)}`}function jR(){return`#${pn(this.r)}${pn(this.g)}${pn(this.b)}${pn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cm(){const e=zo(this.opacity);return`${e===1?"rgb(":"rgba("}${vn(this.r)}, ${vn(this.g)}, ${vn(this.b)}${e===1?")":`, ${e})`}`}function zo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pn(e){return e=vn(e),(e<16?"0":"")+e.toString(16)}function xm(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jt(e,t,n,a)}function Yw(e){if(e instanceof jt)return new jt(e.h,e.s,e.l,e.opacity);if(e instanceof Ri||(e=ti(e)),!e)return new jt;if(e instanceof jt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,r=Math.min(t,n,a),i=Math.max(t,n,a),o=NaN,s=i-r,l=(i+r)/2;return s?(t===i?o=(n-a)/s+(n<a)*6:n===i?o=(a-t)/s+2:o=(t-n)/s+4,s/=l<.5?i+r:2-i-r,o*=60):s=l>0&&l<1?0:o,new jt(o,s,l,e.opacity)}function QR(e,t,n,a){return arguments.length===1?Yw(e):new jt(e,t,n,a??1)}function jt(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Mp(jt,QR,Gw(Ri,{brighter(e){return e=e==null?Uo:Math.pow(Uo,e),new jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ja:Math.pow(Ja,e),new jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,r=2*n-a;return new _t(Vl(e>=240?e-240:e+120,r,a),Vl(e,r,a),Vl(e<120?e+240:e-120,r,a),this.opacity)},clamp(){return new jt(Nm(this.h),Ji(this.s),Ji(this.l),zo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zo(this.opacity);return`${e===1?"hsl(":"hsla("}${Nm(this.h)}, ${Ji(this.s)*100}%, ${Ji(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nm(e){return e=(e||0)%360,e<0?e+360:e}function Ji(e){return Math.max(0,Math.min(1,e||0))}function Vl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xw=e=>()=>e;function GR(e,t){return function(n){return e+n*t}}function YR(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function XR(e){return(e=+e)==1?Kw:function(t,n){return n-t?YR(t,n,e):Xw(isNaN(t)?n:t)}}function Kw(e,t){var n=t-e;return n?GR(e,n):Xw(isNaN(e)?t:e)}const Im=function e(t){var n=XR(t);function a(r,i){var o=n((r=rd(r)).r,(i=rd(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),c=Kw(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return a.gamma=e,a}(1);function qr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var nd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ml=new RegExp(nd.source,"g");function KR(e){return function(){return e}}function ZR(e){return function(t){return e(t)+""}}function JR(e,t){var n=nd.lastIndex=Ml.lastIndex=0,a,r,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(a=nd.exec(e))&&(r=Ml.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(a=a[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:qr(a,r)})),n=Ml.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?ZR(l[0].x):KR(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}var Tm=180/Math.PI,ad={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zw(e,t,n,a,r,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*a)&&(n-=e*l,a-=t*l),(s=Math.sqrt(n*n+a*a))&&(n/=s,a/=s,l/=s),e*a<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Tm,skewX:Math.atan(l)*Tm,scaleX:o,scaleY:s}}var eo;function eA(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ad:Zw(t.a,t.b,t.c,t.d,t.e,t.f)}function tA(e){return e==null||(eo||(eo=document.createElementNS("http://www.w3.org/2000/svg","g")),eo.setAttribute("transform",e),!(e=eo.transform.baseVal.consolidate()))?ad:(e=e.matrix,Zw(e.a,e.b,e.c,e.d,e.e,e.f))}function Jw(e,t,n,a){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,p,h){if(c!==d||u!==f){var m=p.push("translate(",null,t,null,n);h.push({i:m-4,x:qr(c,d)},{i:m-2,x:qr(u,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,a)-2,x:qr(c,u)})):u&&d.push(r(d)+"rotate("+u+a)}function s(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,a)-2,x:qr(c,u)}):u&&d.push(r(d)+"skewX("+u+a)}function l(c,u,d,f,p,h){if(c!==d||u!==f){var m=p.push(r(p)+"scale(",null,",",null,")");h.push({i:m-4,x:qr(c,d)},{i:m-2,x:qr(u,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),s(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(p){for(var h=-1,m=f.length,g;++h<m;)d[(g=f[h]).i]=g.x(p);return d.join("")}}}var rA=Jw(eA,"px, ","px)","deg)"),nA=Jw(tA,", ",")",")"),aA=1e-12;function Pm(e){return((e=Math.exp(e))+1/e)/2}function iA(e){return((e=Math.exp(e))-1/e)/2}function oA(e){return((e=Math.exp(2*e))-1)/(e+1)}const sA=function e(t,n,a){function r(i,o){var s=i[0],l=i[1],c=i[2],u=o[0],d=o[1],f=o[2],p=u-s,h=d-l,m=p*p+h*h,g,b;if(m<aA)b=Math.log(f/c)/t,g=function(C){return[s+C*p,l+C*h,c*Math.exp(t*C*b)]};else{var E=Math.sqrt(m),y=(f*f-c*c+a*m)/(2*c*n*E),_=(f*f-c*c-a*m)/(2*f*n*E),S=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(_*_+1)-_);b=(w-S)/t,g=function(C){var N=C*b,T=Pm(S),P=c/(n*E)*(T*oA(t*N+S)-iA(S));return[s+P*p,l+P*h,c*T/Pm(t*N+S)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return r.rho=function(i){var o=Math.max(.001,+i),s=o*o,l=s*s;return e(o,s,l)},r}(Math.SQRT2,2,4);var ia=0,Da=0,Ia=0,e0=1e3,Ho,Oa,Wo=0,xn=0,Xs=0,ri=typeof performance=="object"&&performance.now?performance:Date,t0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bp(){return xn||(t0(lA),xn=ri.now()+Xs)}function lA(){xn=0}function jo(){this._call=this._time=this._next=null}jo.prototype=r0.prototype={constructor:jo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bp():+n)+(t==null?0:+t),!this._next&&Oa!==this&&(Oa?Oa._next=this:Ho=this,Oa=this),this._call=e,this._time=n,id()},stop:function(){this._call&&(this._call=null,this._time=1/0,id())}};function r0(e,t,n){var a=new jo;return a.restart(e,t,n),a}function uA(){Bp(),++ia;for(var e=Ho,t;e;)(t=xn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ia}function Rm(){xn=(Wo=ri.now())+Xs,ia=Da=0;try{uA()}finally{ia=0,dA(),xn=0}}function cA(){var e=ri.now(),t=e-Wo;t>e0&&(Xs-=t,Wo=e)}function dA(){for(var e,t=Ho,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ho=n);Oa=e,id(a)}function id(e){if(!ia){Da&&(Da=clearTimeout(Da));var t=e-xn;t>24?(e<1/0&&(Da=setTimeout(Rm,e-ri.now()-Xs)),Ia&&(Ia=clearInterval(Ia))):(Ia||(Wo=ri.now(),Ia=setInterval(cA,e0)),ia=1,t0(Rm))}}function Am(e,t,n){var a=new jo;return t=t==null?0:+t,a.restart(r=>{a.stop(),e(r+t)},t,n),a}var fA=Gs("start","end","cancel","interrupt"),pA=[],n0=0,km=1,od=2,xo=3,$m=4,sd=5,No=6;function Ks(e,t,n,a,r,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;hA(e,n,{name:t,index:a,group:r,on:fA,tween:pA,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:n0})}function Up(e,t){var n=Zt(e,t);if(n.state>n0)throw new Error("too late; already scheduled");return n}function cr(e,t){var n=Zt(e,t);if(n.state>xo)throw new Error("too late; already running");return n}function Zt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hA(e,t,n){var a=e.__transition,r;a[t]=n,n.timer=r0(i,0,n.time);function i(c){n.state=km,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,p;if(n.state!==km)return l();for(u in a)if(p=a[u],p.name===n.name){if(p.state===xo)return Am(o);p.state===$m?(p.state=No,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete a[u]):+u<t&&(p.state=No,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete a[u])}if(Am(function(){n.state===xo&&(n.state=$m,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=od,n.on.call("start",e,e.__data__,n.index,n.group),n.state===od){for(n.state=xo,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=sd,1),d=-1,f=r.length;++d<f;)r[d].call(e,u);n.state===sd&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=No,n.timer.stop(),delete a[t];for(var c in a)return;delete e.__transition}}function Io(e,t){var n=e.__transition,a,r,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((a=n[o]).name!==t){i=!1;continue}r=a.state>od&&a.state<sd,a.state=No,a.timer.stop(),a.on.call(r?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[o]}i&&delete e.__transition}}function mA(e){return this.each(function(){Io(this,e)})}function vA(e,t){var n,a;return function(){var r=cr(this,e),i=r.tween;if(i!==n){a=n=i;for(var o=0,s=a.length;o<s;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}r.tween=a}}function gA(e,t,n){var a,r;if(typeof n!="function")throw new Error;return function(){var i=cr(this,e),o=i.tween;if(o!==a){r=(a=o).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}i.tween=r}}function yA(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=Zt(this.node(),n).tween,r=0,i=a.length,o;r<i;++r)if((o=a[r]).name===e)return o.value;return null}return this.each((t==null?vA:gA)(n,e,t))}function zp(e,t,n){var a=e._id;return e.each(function(){var r=cr(this,a);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Zt(r,a).value[t]}}function a0(e,t){var n;return(typeof t=="number"?qr:t instanceof ti?Im:(n=ti(t))?(t=n,Im):JR)(e,t)}function bA(e){return function(){this.removeAttribute(e)}}function wA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function SA(e,t,n){var a,r=n+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===a?i:i=t(a=o,n)}}function _A(e,t,n){var a,r=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===a?i:i=t(a=o,n)}}function EA(e,t,n){var a,r,i;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===a&&l===r?i:(r=l,i=t(a=o,s)))}}function CA(e,t,n){var a,r,i;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===a&&l===r?i:(r=l,i=t(a=o,s)))}}function xA(e,t){var n=Ys(e),a=n==="transform"?nA:a0;return this.attrTween(e,typeof t=="function"?(n.local?CA:EA)(n,a,zp(this,"attr."+e,t)):t==null?(n.local?wA:bA)(n):(n.local?_A:SA)(n,a,t))}function NA(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IA(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function TA(e,t){var n,a;function r(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&IA(e,i)),n}return r._value=t,r}function PA(e,t){var n,a;function r(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&NA(e,i)),n}return r._value=t,r}function RA(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=Ys(e);return this.tween(n,(a.local?TA:PA)(a,t))}function AA(e,t){return function(){Up(this,e).delay=+t.apply(this,arguments)}}function kA(e,t){return t=+t,function(){Up(this,e).delay=t}}function $A(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AA:kA)(t,e)):Zt(this.node(),t).delay}function FA(e,t){return function(){cr(this,e).duration=+t.apply(this,arguments)}}function DA(e,t){return t=+t,function(){cr(this,e).duration=t}}function OA(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?FA:DA)(t,e)):Zt(this.node(),t).duration}function qA(e,t){if(typeof t!="function")throw new Error;return function(){cr(this,e).ease=t}}function LA(e){var t=this._id;return arguments.length?this.each(qA(t,e)):Zt(this.node(),t).ease}function VA(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;cr(this,e).ease=n}}function MA(e){if(typeof e!="function")throw new Error;return this.each(VA(this._id,e))}function BA(e){typeof e!="function"&&(e=Ow(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,s=a[r]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new xr(a,this._parents,this._name,this._id)}function UA(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,r=n.length,i=Math.min(a,r),o=new Array(a),s=0;s<i;++s)for(var l=t[s],c=n[s],u=l.length,d=o[s]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(d[p]=f);for(;s<a;++s)o[s]=t[s];return new xr(o,this._parents,this._name,this._id)}function zA(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function HA(e,t,n){var a,r,i=zA(t)?Up:cr;return function(){var o=i(this,e),s=o.on;s!==a&&(r=(a=s).copy()).on(t,n),o.on=r}}function WA(e,t){var n=this._id;return arguments.length<2?Zt(this.node(),n).on.on(e):this.each(HA(n,e,t))}function jA(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function QA(){return this.on("end.remove",jA(this._id))}function GA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lp(e));for(var a=this._groups,r=a.length,i=new Array(r),o=0;o<r;++o)for(var s=a[o],l=s.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,Ks(c[f],t,n,f,c,Zt(u,n)));return new xr(i,this._parents,t,n)}function YA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dw(e));for(var a=this._groups,r=a.length,i=[],o=[],s=0;s<r;++s)for(var l=a[s],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=e.call(u,u.__data__,d,l),p,h=Zt(u,n),m=0,g=f.length;m<g;++m)(p=f[m])&&Ks(p,t,n,m,f,h);i.push(f),o.push(u)}return new xr(i,o,t,n)}var XA=Pi.prototype.constructor;function KA(){return new XA(this._groups,this._parents)}function ZA(e,t){var n,a,r;return function(){var i=aa(this,e),o=(this.style.removeProperty(e),aa(this,e));return i===o?null:i===n&&o===a?r:r=t(n=i,a=o)}}function i0(e){return function(){this.style.removeProperty(e)}}function JA(e,t,n){var a,r=n+"",i;return function(){var o=aa(this,e);return o===r?null:o===a?i:i=t(a=o,n)}}function ek(e,t,n){var a,r,i;return function(){var o=aa(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),aa(this,e))),o===l?null:o===a&&l===r?i:(r=l,i=t(a=o,s))}}function tk(e,t){var n,a,r,i="style."+t,o="end."+i,s;return function(){var l=cr(this,e),c=l.on,u=l.value[i]==null?s||(s=i0(t)):void 0;(c!==n||r!==u)&&(a=(n=c).copy()).on(o,r=u),l.on=a}}function rk(e,t,n){var a=(e+="")=="transform"?rA:a0;return t==null?this.styleTween(e,ZA(e,a)).on("end.style."+e,i0(e)):typeof t=="function"?this.styleTween(e,ek(e,a,zp(this,"style."+e,t))).each(tk(this._id,e)):this.styleTween(e,JA(e,a,t),n).on("end.style."+e,null)}function nk(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function ak(e,t,n){var a,r;function i(){var o=t.apply(this,arguments);return o!==r&&(a=(r=o)&&nk(e,o,n)),a}return i._value=t,i}function ik(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,ak(e,t,n??""))}function ok(e){return function(){this.textContent=e}}function sk(e){return function(){var t=e(this);this.textContent=t??""}}function lk(e){return this.tween("text",typeof e=="function"?sk(zp(this,"text",e)):ok(e==null?"":e+""))}function uk(e){return function(t){this.textContent=e.call(this,t)}}function ck(e){var t,n;function a(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&uk(r)),t}return a._value=e,a}function dk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ck(e))}function fk(){for(var e=this._name,t=this._id,n=o0(),a=this._groups,r=a.length,i=0;i<r;++i)for(var o=a[i],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=Zt(l,t);Ks(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new xr(a,this._parents,e,n)}function pk(){var e,t,n=this,a=n._id,r=n.size();return new Promise(function(i,o){var s={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=cr(this,a),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&i()})}var hk=0;function xr(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function o0(){return++hk}var vr=Pi.prototype;xr.prototype={constructor:xr,select:GA,selectAll:YA,selectChild:vr.selectChild,selectChildren:vr.selectChildren,filter:BA,merge:UA,selection:KA,transition:fk,call:vr.call,nodes:vr.nodes,node:vr.node,size:vr.size,empty:vr.empty,each:vr.each,on:WA,attr:xA,attrTween:RA,style:rk,styleTween:ik,text:lk,textTween:dk,remove:QA,tween:yA,delay:$A,duration:OA,ease:LA,easeVarying:MA,end:pk,[Symbol.iterator]:vr[Symbol.iterator]};function mk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vk={time:null,delay:0,duration:250,ease:mk};function gk(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function yk(e){var t,n;e instanceof xr?(t=e._id,e=e._name):(t=o0(),(n=vk).time=Bp(),e=e==null?null:e+"");for(var a=this._groups,r=a.length,i=0;i<r;++i)for(var o=a[i],s=o.length,l,c=0;c<s;++c)(l=o[c])&&Ks(l,e,t,c,o,n||gk(l,t));return new xr(a,this._parents,e,t)}Pi.prototype.interrupt=mA;Pi.prototype.transition=yk;const to=e=>()=>e;function bk(e,{sourceEvent:t,target:n,transform:a,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:r}})}function wr(e,t,n){this.k=e,this.x=t,this.y=n}wr.prototype={constructor:wr,scale:function(e){return e===1?this:new wr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hr=new wr(1,0,0);wr.prototype;function Bl(e){e.stopImmediatePropagation()}function Ta(e){e.preventDefault(),e.stopImmediatePropagation()}function wk(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Sk(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Fm(){return this.__zoom||Hr}function _k(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ek(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ck(e,t,n){var a=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function xk(){var e=wk,t=Sk,n=Ck,a=_k,r=Ek,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=sA,c=Gs("start","zoom","end"),u,d,f,p=500,h=150,m=0,g=10;function b(x){x.property("__zoom",Fm).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",P).filter(r).on("touchstart.zoom",k).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(x,F,O,$){var V=x.selection?x.selection():x;V.property("__zoom",Fm),x!==V?S(x,F,O,$):V.interrupt().each(function(){w(this,arguments).event($).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},b.scaleBy=function(x,F,O,$){b.scaleTo(x,function(){var V=this.__zoom.k,q=typeof F=="function"?F.apply(this,arguments):F;return V*q},O,$)},b.scaleTo=function(x,F,O,$){b.transform(x,function(){var V=t.apply(this,arguments),q=this.__zoom,B=O==null?_(V):typeof O=="function"?O.apply(this,arguments):O,j=q.invert(B),Q=typeof F=="function"?F.apply(this,arguments):F;return n(y(E(q,Q),B,j),V,o)},O,$)},b.translateBy=function(x,F,O,$){b.transform(x,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),o)},null,$)},b.translateTo=function(x,F,O,$,V){b.transform(x,function(){var q=t.apply(this,arguments),B=this.__zoom,j=$==null?_(q):typeof $=="function"?$.apply(this,arguments):$;return n(Hr.translate(j[0],j[1]).scale(B.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof O=="function"?-O.apply(this,arguments):-O),q,o)},$,V)};function E(x,F){return F=Math.max(i[0],Math.min(i[1],F)),F===x.k?x:new wr(F,x.x,x.y)}function y(x,F,O){var $=F[0]-O[0]*x.k,V=F[1]-O[1]*x.k;return $===x.x&&V===x.y?x:new wr(x.k,$,V)}function _(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function S(x,F,O,$){x.on("start.zoom",function(){w(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event($).end()}).tween("zoom",function(){var V=this,q=arguments,B=w(V,q).event($),j=t.apply(V,q),Q=O==null?_(j):typeof O=="function"?O.apply(V,q):O,X=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),Y=V.__zoom,Z=typeof F=="function"?F.apply(V,q):F,J=l(Y.invert(Q).concat(X/Y.k),Z.invert(Q).concat(X/Z.k));return function(ae){if(ae===1)ae=Z;else{var ie=J(ae),ye=X/ie[2];ae=new wr(ye,Q[0]-ie[0]*ye,Q[1]-ie[1]*ye)}B.zoom(null,ae)}})}function w(x,F,O){return!O&&x.__zooming||new C(x,F)}function C(x,F){this.that=x,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,F),this.taps=0}C.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,F){return this.mouse&&x!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var F=Wt(this.that).datum();c.call(x,this.that,new bk(x,{sourceEvent:this.sourceEvent,target:b,type:x,transform:this.that.__zoom,dispatch:c}),F)}};function N(x,...F){if(!e.apply(this,arguments))return;var O=w(this,F).event(x),$=this.__zoom,V=Math.max(i[0],Math.min(i[1],$.k*Math.pow(2,a.apply(this,arguments)))),q=rr(x);if(O.wheel)(O.mouse[0][0]!==q[0]||O.mouse[0][1]!==q[1])&&(O.mouse[1]=$.invert(O.mouse[0]=q)),clearTimeout(O.wheel);else{if($.k===V)return;O.mouse=[q,$.invert(q)],Io(this),O.start()}Ta(x),O.wheel=setTimeout(B,h),O.zoom("mouse",n(y(E($,V),O.mouse[0],O.mouse[1]),O.extent,o));function B(){O.wheel=null,O.end()}}function T(x,...F){if(f||!e.apply(this,arguments))return;var O=x.currentTarget,$=w(this,F,!0).event(x),V=Wt(x.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",X,!0),q=rr(x,O),B=x.clientX,j=x.clientY;jw(x.view),Bl(x),$.mouse=[q,this.__zoom.invert(q)],Io(this),$.start();function Q(Y){if(Ta(Y),!$.moved){var Z=Y.clientX-B,J=Y.clientY-j;$.moved=Z*Z+J*J>m}$.event(Y).zoom("mouse",n(y($.that.__zoom,$.mouse[0]=rr(Y,O),$.mouse[1]),$.extent,o))}function X(Y){V.on("mousemove.zoom mouseup.zoom",null),Qw(Y.view,$.moved),Ta(Y),$.event(Y).end()}}function P(x,...F){if(e.apply(this,arguments)){var O=this.__zoom,$=rr(x.changedTouches?x.changedTouches[0]:x,this),V=O.invert($),q=O.k*(x.shiftKey?.5:2),B=n(y(E(O,q),$,V),t.apply(this,F),o);Ta(x),s>0?Wt(this).transition().duration(s).call(S,B,$,x):Wt(this).call(b.transform,B,$,x)}}function k(x,...F){if(e.apply(this,arguments)){var O=x.touches,$=O.length,V=w(this,F,x.changedTouches.length===$).event(x),q,B,j,Q;for(Bl(x),B=0;B<$;++B)j=O[B],Q=rr(j,this),Q=[Q,this.__zoom.invert(Q),j.identifier],V.touch0?!V.touch1&&V.touch0[2]!==Q[2]&&(V.touch1=Q,V.taps=0):(V.touch0=Q,q=!0,V.taps=1+!!u);u&&(u=clearTimeout(u)),q&&(V.taps<2&&(d=Q[0],u=setTimeout(function(){u=null},p)),Io(this),V.start())}}function A(x,...F){if(this.__zooming){var O=w(this,F).event(x),$=x.changedTouches,V=$.length,q,B,j,Q;for(Ta(x),q=0;q<V;++q)B=$[q],j=rr(B,this),O.touch0&&O.touch0[2]===B.identifier?O.touch0[0]=j:O.touch1&&O.touch1[2]===B.identifier&&(O.touch1[0]=j);if(B=O.that.__zoom,O.touch1){var X=O.touch0[0],Y=O.touch0[1],Z=O.touch1[0],J=O.touch1[1],ae=(ae=Z[0]-X[0])*ae+(ae=Z[1]-X[1])*ae,ie=(ie=J[0]-Y[0])*ie+(ie=J[1]-Y[1])*ie;B=E(B,Math.sqrt(ae/ie)),j=[(X[0]+Z[0])/2,(X[1]+Z[1])/2],Q=[(Y[0]+J[0])/2,(Y[1]+J[1])/2]}else if(O.touch0)j=O.touch0[0],Q=O.touch0[1];else return;O.zoom("touch",n(y(B,j,Q),O.extent,o))}}function I(x,...F){if(this.__zooming){var O=w(this,F).event(x),$=x.changedTouches,V=$.length,q,B;for(Bl(x),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),q=0;q<V;++q)B=$[q],O.touch0&&O.touch0[2]===B.identifier?delete O.touch0:O.touch1&&O.touch1[2]===B.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(B=rr(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<g)){var j=Wt(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return b.wheelDelta=function(x){return arguments.length?(a=typeof x=="function"?x:to(+x),b):a},b.filter=function(x){return arguments.length?(e=typeof x=="function"?x:to(!!x),b):e},b.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:to(!!x),b):r},b.extent=function(x){return arguments.length?(t=typeof x=="function"?x:to([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),b):t},b.scaleExtent=function(x){return arguments.length?(i[0]=+x[0],i[1]=+x[1],b):[i[0],i[1]]},b.translateExtent=function(x){return arguments.length?(o[0][0]=+x[0][0],o[1][0]=+x[1][0],o[0][1]=+x[0][1],o[1][1]=+x[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(x){return arguments.length?(n=x,b):n},b.duration=function(x){return arguments.length?(s=+x,b):s},b.interpolate=function(x){return arguments.length?(l=x,b):l},b.on=function(){var x=c.on.apply(c,arguments);return x===c?b:x},b.clickDistance=function(x){return arguments.length?(m=(x=+x)*x,b):Math.sqrt(m)},b.tapDistance=function(x){return arguments.length?(g=+x,b):g},b}const Zs=R.createContext(null),Nk=Zs.Provider,Kr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`},s0=Kr.error001();function it(e,t){const n=R.useContext(Zs);if(n===null)throw new Error(s0);return QT(n,e,t)}const vt=()=>{const e=R.useContext(Zs);if(e===null)throw new Error(s0);return R.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Ik=e=>e.userSelectionActive?"none":"all";function l0({position:e,children:t,className:n,style:a,...r}){const i=it(Ik),o=`${e}`.split("-");return v("div",{className:It(["react-flow__panel",n,...o]),style:{...a,pointerEvents:i},...r,children:t})}function Tk({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:v(l0,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Pk=({x:e,y:t,label:n,labelStyle:a={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...u})=>{const d=R.useRef(null),[f,p]=R.useState({x:0,y:0,width:0,height:0}),h=It(["react-flow__edge-textwrapper",c]);return R.useEffect(()=>{if(d.current){const m=d.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:L("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...u,children:[r&&v("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),v("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:a,children:n}),l]})};var Rk=R.memo(Pk);const Hp=e=>({width:e.offsetWidth,height:e.offsetHeight}),oa=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wp=(e={x:0,y:0},t)=>({x:oa(e.x,t[0][0],t[1][0]),y:oa(e.y,t[0][1],t[1][1])}),Dm=(e,t,n)=>e<t?oa(Math.abs(e-t),1,50)/50:e>n?-oa(Math.abs(e-n),1,50)/50:0,u0=(e,t)=>{const n=Dm(e.x,35,t.width-35)*20,a=Dm(e.y,35,t.height-35)*20;return[n,a]},c0=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ak=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),d0=({x:e,y:t,width:n,height:a})=>({x:e,y:t,x2:e+n,y2:t+a}),kk=({x:e,y:t,x2:n,y2:a})=>({x:e,y:t,width:n-e,height:a-t}),Om=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ld=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*a)},$k=e=>Mt(e.width)&&Mt(e.height)&&Mt(e.x)&&Mt(e.y),Mt=e=>!isNaN(e)&&isFinite(e),ct=Symbol.for("internals"),f0=["Enter"," ","Escape"],Fk=(e,t)=>{},Dk=e=>"nativeEvent"in e;function ud(e){var r,i;const t=Dk(e)?e.nativeEvent:e,n=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const p0=e=>"clientX"in e,Wr=(e,t)=>{var i,o;const n=p0(e),a=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ai=({path:e,labelX:t,labelY:n,label:a,labelStyle:r,labelShowBg:i,labelBgStyle:o,labelBgPadding:s,labelBgBorderRadius:l,style:c,markerEnd:u,markerStart:d,interactionWidth:f=20})=>L(G,{children:[v("path",{style:c,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:d}),f&&v("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),a&&Mt(t)&&Mt(n)?v(Rk,{x:t,y:n,label:a,labelStyle:r,labelShowBg:i,labelBgStyle:o,labelBgPadding:s,labelBgBorderRadius:l}):null]});Ai.displayName="BaseEdge";function Pa(e,t,n){return n===void 0?n:a=>{const r=t().edges.find(i=>i.id===e);r&&n(a,{...r})}}function h0({sourceX:e,sourceY:t,targetX:n,targetY:a}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,o=Math.abs(a-t)/2,s=a<t?a+o:a-o;return[i,s,r,o]}function m0({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:r,sourceControlY:i,targetControlX:o,targetControlY:s}){const l=e*.125+r*.375+o*.375+n*.125,c=t*.125+i*.375+s*.375+a*.125,u=Math.abs(l-e),d=Math.abs(c-t);return[l,c,u,d]}var Nn;(function(e){e.Strict="strict",e.Loose="loose"})(Nn||(Nn={}));var Kn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Kn||(Kn={}));var ni;(function(e){e.Partial="partial",e.Full="full"})(ni||(ni={}));var br;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(br||(br={}));var ai;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ai||(ai={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));function qm({pos:e,x1:t,y1:n,x2:a,y2:r}){return e===le.Left||e===le.Right?[.5*(t+a),n]:[t,.5*(n+r)]}function v0({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:a,targetY:r,targetPosition:i=le.Top}){const[o,s]=qm({pos:n,x1:e,y1:t,x2:a,y2:r}),[l,c]=qm({pos:i,x1:a,y1:r,x2:e,y2:t}),[u,d,f,p]=m0({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${o},${s} ${l},${c} ${a},${r}`,u,d,f,p]}const jp=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=le.Bottom,targetPosition:i=le.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,interactionWidth:m})=>{const[g,b,E]=v0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:i});return v(Ai,{path:g,labelX:b,labelY:E,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,interactionWidth:m})});jp.displayName="SimpleBezierEdge";const Lm={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},Ok=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Vm=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function qk({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:a=le.Top,center:r,offset:i}){const o=Lm[t],s=Lm[a],l={x:e.x+o.x*i,y:e.y+o.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},u=Ok({source:l,sourcePosition:t,target:c}),d=u.x!==0?"x":"y",f=u[d];let p=[],h,m;const[g,b,E,y]=h0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*s[d]===-1){h=r.x||g,m=r.y||b;const S=[{x:h,y:l.y},{x:h,y:c.y}],w=[{x:l.x,y:m},{x:c.x,y:m}];o[d]===f?p=d==="x"?S:w:p=d==="x"?w:S}else{const S=[{x:l.x,y:c.y}],w=[{x:c.x,y:l.y}];if(d==="x"?p=o.x===f?w:S:p=o.y===f?S:w,t!==a){const C=d==="x"?"y":"x",N=o[d]===s[C],T=l[C]>c[C],P=l[C]<c[C];(o[d]===1&&(!N&&T||N&&P)||o[d]!==1&&(!N&&P||N&&T))&&(p=d==="x"?S:w)}h=p[0].x,m=p[0].y}return[[e,l,...p,c,n],h,m,E,y]}function Lk(e,t,n,a){const r=Math.min(Vm(e,t)/2,Vm(t,n)/2,a),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+r*c},${o}Q ${i},${o} ${i},${o+r*u}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${o+r*l}Q ${i},${o} ${i+r*s},${o}`}function cd({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:a,targetY:r,targetPosition:i=le.Top,borderRadius:o=5,centerX:s,centerY:l,offset:c=20}){const[u,d,f,p,h]=qk({source:{x:e,y:t},sourcePosition:n,target:{x:a,y:r},targetPosition:i,center:{x:s,y:l},offset:c});return[u.reduce((g,b,E)=>{let y="";return E>0&&E<u.length-1?y=Lk(u[E-1],b,u[E+1],o):y=`${E===0?"M":"L"}${b.x} ${b.y}`,g+=y,g},""),d,f,p,h]}const Js=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:d=le.Bottom,targetPosition:f=le.Top,markerEnd:p,markerStart:h,pathOptions:m,interactionWidth:g})=>{const[b,E,y]=cd({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:a,targetPosition:f,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return v(Ai,{path:b,labelX:E,labelY:y,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:p,markerStart:h,interactionWidth:g})});Js.displayName="SmoothStepEdge";const Qp=R.memo(e=>{var t;return v(Js,{...e,pathOptions:R.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Qp.displayName="StepEdge";function Vk({sourceX:e,sourceY:t,targetX:n,targetY:a}){const[r,i,o,s]=h0({sourceX:e,sourceY:t,targetX:n,targetY:a});return[`M ${e},${t}L ${n},${a}`,r,i,o,s]}const Gp=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:p})=>{const[h,m,g]=Vk({sourceX:e,sourceY:t,targetX:n,targetY:a});return v(Ai,{path:h,labelX:m,labelY:g,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:p})});Gp.displayName="StraightEdge";function ro(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Mm({pos:e,x1:t,y1:n,x2:a,y2:r,c:i}){switch(e){case le.Left:return[t-ro(t-a,i),n];case le.Right:return[t+ro(a-t,i),n];case le.Top:return[t,n-ro(n-r,i)];case le.Bottom:return[t,n+ro(r-n,i)]}}function g0({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:a,targetY:r,targetPosition:i=le.Top,curvature:o=.25}){const[s,l]=Mm({pos:n,x1:e,y1:t,x2:a,y2:r,c:o}),[c,u]=Mm({pos:i,x1:a,y1:r,x2:e,y2:t,c:o}),[d,f,p,h]=m0({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${a},${r}`,d,f,p,h]}const Qo=R.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=le.Bottom,targetPosition:i=le.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,pathOptions:m,interactionWidth:g})=>{const[b,E,y]=g0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:i,curvature:m==null?void 0:m.curvature});return v(Ai,{path:b,labelX:E,labelY:y,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,interactionWidth:g})});Qo.displayName="BezierEdge";const Yp=R.createContext(null),Mk=Yp.Provider;Yp.Consumer;const Bk=()=>R.useContext(Yp),Uk=e=>"id"in e&&"source"in e&&"target"in e,zk=({source:e,sourceHandle:t,target:n,targetHandle:a})=>`reactflow__edge-${e}${t||""}-${n}${a||""}`,dd=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`,Hk=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Wk=(e,t)=>{if(!e.source||!e.target)return t;let n;return Uk(e)?n={...e}:n={...e,id:zk(e)},Hk(n,t)?t:t.concat(n)},y0=({x:e,y:t},[n,a,r],i,[o,s])=>{const l={x:(e-n)/r,y:(t-a)/r};return i?{x:o*Math.round(l.x/o),y:s*Math.round(l.y/s)}:l},jk=({x:e,y:t},[n,a,r])=>({x:e*r+n,y:t*r+a}),Zn=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],a=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-a};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-a}:r}},b0=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((a,r)=>{const{x:i,y:o}=Zn(r,t).positionAbsolute;return Ak(a,d0({x:i,y:o,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return kk(n)},w0=(e,t,[n,a,r]=[0,0,1],i=!1,o=!1,s=[0,0])=>{const l={x:(t.x-n)/r,y:(t.y-a)/r,width:t.width/r,height:t.height/r},c=[];return e.forEach(u=>{const{width:d,height:f,selectable:p=!0,hidden:h=!1}=u;if(o&&!p||h)return!1;const{positionAbsolute:m}=Zn(u,s),g={x:m.x,y:m.y,width:d||0,height:f||0},b=ld(l,g),E=typeof d>"u"||typeof f>"u"||d===null||f===null,y=i&&b>0,_=(d||0)*(f||0);(E||y||b>=_||u.dragging)&&c.push(u)}),c},Xp=(e,t)=>{const n=e.map(a=>a.id);return t.filter(a=>n.includes(a.source)||n.includes(a.target))},S0=(e,t,n,a,r,i=.1)=>{const o=t/(e.width*(1+i)),s=n/(e.height*(1+i)),l=Math.min(o,s),c=oa(l,a,r),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*c,p=n/2-d*c;return[f,p,c]},un=(e,t=0)=>e.transition().duration(t);function Bm(e,t,n,a){return(t[n]||[]).reduce((r,i)=>{var o,s;return`${e.id}-${i.id}-${n}`!==a&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((s=e.positionAbsolute)==null?void 0:s.y)??0)+i.y+i.height/2}),r},[])}function Qk(e,t,n){let a=null,r=1/0;return n.forEach(i=>{const o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));o<=t&&o<r&&(r=o,a=i)}),a}const Gk={source:null,target:null,sourceHandle:null,targetHandle:null};function _0(e,t,n,a,r,i,o,s){const l=i==="target",c=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:u,y:d}=Wr(e),f=s.elementFromPoint(u,d),p=f!=null&&f.classList.contains("react-flow__handle")?f:c,h={handleDomNode:p,isValid:!1,connection:Gk,endHandle:null};if(p){const m=E0(void 0,p),g=p.getAttribute("data-nodeid"),b=p.getAttribute("data-handleid"),E=p.classList.contains("connectable"),y=p.classList.contains("connectableend"),_={source:l?g:a,sourceHandle:l?b:r,target:l?a:g,targetHandle:l?r:b};h.connection=_,E&&y&&(n===Nn.Strict?l&&m==="source"||!l&&m==="target":g!==a||b!==r)&&(h.endHandle={nodeId:g,handleId:b,type:m},h.isValid=o(_))}return h}function Yk({nodes:e,nodeId:t,handleId:n,handleType:a}){return e.reduce((r,i)=>{if(i[ct]){const{handleBounds:o}=i[ct];let s=[],l=[];o&&(s=Bm(i,o,"source",`${t}-${n}-${a}`),l=Bm(i,o,"target",`${t}-${n}-${a}`)),r.push(...s,...l)}return r},[])}function E0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ul(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Xk(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function C0({event:e,handleId:t,nodeId:n,onConnect:a,isTarget:r,getState:i,setState:o,isValidConnection:s,edgeUpdaterType:l,onEdgeUpdateEnd:c}){const u=c0(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:p,connectionRadius:h,onConnectStart:m,panBy:g,getNodes:b,cancelConnection:E}=i();let y=0,_;const{x:S,y:w}=Wr(e),C=u==null?void 0:u.elementFromPoint(S,w),N=E0(l,C),T=f==null?void 0:f.getBoundingClientRect();if(!T||!N)return;let P,k=Wr(e,T),A=!1,I=null,x=!1,F=null;const O=Yk({nodes:b(),nodeId:n,handleId:t,handleType:N}),$=()=>{if(!p)return;const[B,j]=u0(k,T);g({x:B,y:j}),y=requestAnimationFrame($)};o({connectionPosition:k,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:t,type:N},connectionEndHandle:null}),m==null||m(e,{nodeId:n,handleId:t,handleType:N});function V(B){const{transform:j}=i();k=Wr(B,T),_=Qk(y0(k,j,!1,[1,1]),h,O),A||($(),A=!0);const Q=_0(B,_,d,n,t,r?"target":"source",s,u);if(F=Q.handleDomNode,I=Q.connection,x=Q.isValid,o({connectionPosition:_&&x?jk({x:_.x,y:_.y},j):k,connectionStatus:Xk(!!_,x),connectionEndHandle:Q.endHandle}),!_&&!x&&!F)return Ul(P);I.source!==I.target&&F&&(Ul(P),P=F,F.classList.add("connecting","react-flow__handle-connecting"),F.classList.toggle("valid",x),F.classList.toggle("react-flow__handle-valid",x))}function q(B){var j,Q;(_||F)&&I&&x&&(a==null||a(I)),(Q=(j=i()).onConnectEnd)==null||Q.call(j,B),l&&(c==null||c(B)),Ul(P),E(),cancelAnimationFrame(y),A=!1,x=!1,I=null,F=null,u.removeEventListener("mousemove",V),u.removeEventListener("mouseup",q),u.removeEventListener("touchmove",V),u.removeEventListener("touchend",q)}u.addEventListener("mousemove",V),u.addEventListener("mouseup",q),u.addEventListener("touchmove",V),u.addEventListener("touchend",q)}const Um=()=>!0,Kk=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Zk=(e,t,n)=>a=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:o}=a;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},x0=R.forwardRef(({type:e="source",position:t=le.Top,isValidConnection:n,isConnectable:a=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:o,onConnect:s,children:l,className:c,onMouseDown:u,onTouchStart:d,...f},p)=>{var T,P;const h=o||null,m=e==="target",g=vt(),b=Bk(),{connectOnClick:E,noPanClassName:y}=it(Kk,kt),{connecting:_,clickConnecting:S}=it(Zk(b,h,e));b||(P=(T=g.getState()).onError)==null||P.call(T,"010",Kr.error010());const w=k=>{const{defaultEdgeOptions:A,onConnect:I,hasDefaultEdges:x}=g.getState(),F={...A,...k};if(x){const{edges:O,setEdges:$}=g.getState();$(Wk(F,O))}I==null||I(F),s==null||s(F)},C=k=>{if(!b)return;const A=p0(k);r&&(A&&k.button===0||!A)&&C0({event:k,handleId:h,nodeId:b,onConnect:w,isTarget:m,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||Um}),A?u==null||u(k):d==null||d(k)},N=k=>{const{onClickConnectStart:A,onClickConnectEnd:I,connectionClickStartHandle:x,connectionMode:F,isValidConnection:O}=g.getState();if(!b||!x&&!r)return;if(!x){A==null||A(k,{nodeId:b,handleId:h,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:b,type:e,handleId:h}});return}const $=c0(k.target),V=n||O||Um,{connection:q,isValid:B}=_0(k,{nodeId:b,id:h,type:e},F,x.nodeId,x.handleId||null,x.type,V,$);B&&w(q),I==null||I(k),g.setState({connectionClickStartHandle:null})};return v("div",{"data-handleid":h,"data-nodeid":b,"data-handlepos":t,"data-id":`${b}-${h}-${e}`,className:It(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,c,{source:!m,target:m,connectable:a,connectablestart:r,connectableend:i,connecting:S,connectionindicator:a&&(r&&!_||i&&_)}]),onMouseDown:C,onTouchStart:C,onClick:E?N:void 0,ref:p,...f,children:l})});x0.displayName="Handle";var Go=R.memo(x0);const N0=({data:e,isConnectable:t,targetPosition:n=le.Top,sourcePosition:a=le.Bottom})=>L(G,{children:[v(Go,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,v(Go,{type:"source",position:a,isConnectable:t})]});N0.displayName="DefaultNode";var fd=R.memo(N0);const I0=({data:e,isConnectable:t,sourcePosition:n=le.Bottom})=>L(G,{children:[e==null?void 0:e.label,v(Go,{type:"source",position:n,isConnectable:t})]});I0.displayName="InputNode";var T0=R.memo(I0);const P0=({data:e,isConnectable:t,targetPosition:n=le.Top})=>L(G,{children:[v(Go,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});P0.displayName="OutputNode";var R0=R.memo(P0);const Kp=()=>null;Kp.displayName="GroupNode";const Jk=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),no=e=>e.id;function e$(e,t){return kt(e.selectedNodes.map(no),t.selectedNodes.map(no))&&kt(e.selectedEdges.map(no),t.selectedEdges.map(no))}const A0=R.memo(({onSelectionChange:e})=>{const t=vt(),{selectedNodes:n,selectedEdges:a}=it(Jk,e$);return R.useEffect(()=>{var i,o;const r={nodes:n,edges:a};e==null||e(r),(o=(i=t.getState()).onSelectionChange)==null||o.call(i,r)},[n,a,e]),null});A0.displayName="SelectionListener";const t$=e=>!!e.onSelectionChange;function r$({onSelectionChange:e}){const t=it(t$);return e||t?v(A0,{onSelectionChange:e}):null}const n$=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ln(e,t){R.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Pe(e,t,n){R.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const a$=({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:r,onConnectStart:i,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:h,minZoom:m,maxZoom:g,nodeExtent:b,onNodesChange:E,onEdgesChange:y,elementsSelectable:_,connectionMode:S,snapGrid:w,snapToGrid:C,translateExtent:N,connectOnClick:T,defaultEdgeOptions:P,fitView:k,fitViewOptions:A,onNodesDelete:I,onEdgesDelete:x,onNodeDrag:F,onNodeDragStart:O,onNodeDragStop:$,onSelectionDrag:V,onSelectionDragStart:q,onSelectionDragStop:B,noPanClassName:j,nodeOrigin:Q,rfId:X,autoPanOnConnect:Y,autoPanOnNodeDrag:Z,onError:J,connectionRadius:ae,isValidConnection:ie})=>{const{setNodes:ye,setEdges:oe,setDefaultNodesAndEdges:ge,setMinZoom:Re,setMaxZoom:me,setTranslateExtent:te,setNodeExtent:he,reset:we}=it(n$,kt),ne=vt();return R.useEffect(()=>{const Ye=a==null?void 0:a.map(ke=>({...ke,...P}));return ge(n,Ye),()=>{we()}},[]),Pe("defaultEdgeOptions",P,ne.setState),Pe("connectionMode",S,ne.setState),Pe("onConnect",r,ne.setState),Pe("onConnectStart",i,ne.setState),Pe("onConnectEnd",o,ne.setState),Pe("onClickConnectStart",s,ne.setState),Pe("onClickConnectEnd",l,ne.setState),Pe("nodesDraggable",c,ne.setState),Pe("nodesConnectable",u,ne.setState),Pe("nodesFocusable",d,ne.setState),Pe("edgesFocusable",f,ne.setState),Pe("edgesUpdatable",p,ne.setState),Pe("elementsSelectable",_,ne.setState),Pe("elevateNodesOnSelect",h,ne.setState),Pe("snapToGrid",C,ne.setState),Pe("snapGrid",w,ne.setState),Pe("onNodesChange",E,ne.setState),Pe("onEdgesChange",y,ne.setState),Pe("connectOnClick",T,ne.setState),Pe("fitViewOnInit",k,ne.setState),Pe("fitViewOnInitOptions",A,ne.setState),Pe("onNodesDelete",I,ne.setState),Pe("onEdgesDelete",x,ne.setState),Pe("onNodeDrag",F,ne.setState),Pe("onNodeDragStart",O,ne.setState),Pe("onNodeDragStop",$,ne.setState),Pe("onSelectionDrag",V,ne.setState),Pe("onSelectionDragStart",q,ne.setState),Pe("onSelectionDragStop",B,ne.setState),Pe("noPanClassName",j,ne.setState),Pe("nodeOrigin",Q,ne.setState),Pe("rfId",X,ne.setState),Pe("autoPanOnConnect",Y,ne.setState),Pe("autoPanOnNodeDrag",Z,ne.setState),Pe("onError",J,ne.setState),Pe("connectionRadius",ae,ne.setState),Pe("isValidConnection",ie,ne.setState),Ln(e,ye),Ln(t,oe),Ln(m,Re),Ln(g,me),Ln(N,te),Ln(b,he),null},zm={display:"none"},i$={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},k0="react-flow__node-desc",$0="react-flow__edge-desc",o$="react-flow__aria-live",s$=e=>e.ariaLiveMessage;function l$({rfId:e}){const t=it(s$);return v("div",{id:`${o$}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:i$,children:t})}function u$({rfId:e,disableKeyboardA11y:t}){return L(G,{children:[L("div",{id:`${k0}-${e}`,style:zm,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),v("div",{id:`${$0}-${e}`,style:zm,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&v(l$,{rfId:e})]})}const c$=(e,t,n)=>n===le.Left?e-t:n===le.Right?e+t:e,d$=(e,t,n)=>n===le.Top?e-t:n===le.Bottom?e+t:e,Hm="react-flow__edgeupdater",Wm=({position:e,centerX:t,centerY:n,radius:a=10,onMouseDown:r,onMouseEnter:i,onMouseOut:o,type:s})=>v("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:o,className:It([Hm,`${Hm}-${s}`]),cx:c$(t,a,e),cy:d$(n,a,e),r:a,stroke:"transparent",fill:"transparent"}),f$=()=>!0;var Vn=e=>{const t=({id:n,className:a,type:r,data:i,onClick:o,onEdgeDoubleClick:s,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:g,source:b,target:E,sourceX:y,sourceY:_,targetX:S,targetY:w,sourcePosition:C,targetPosition:N,elementsSelectable:T,hidden:P,sourceHandleId:k,targetHandleId:A,onContextMenu:I,onMouseEnter:x,onMouseMove:F,onMouseLeave:O,edgeUpdaterRadius:$,onEdgeUpdate:V,onEdgeUpdateStart:q,onEdgeUpdateEnd:B,markerEnd:j,markerStart:Q,rfId:X,ariaLabel:Y,isFocusable:Z,isUpdatable:J,pathOptions:ae,interactionWidth:ie})=>{const ye=R.useRef(null),[oe,ge]=R.useState(!1),[Re,me]=R.useState(!1),te=vt(),he=R.useMemo(()=>`url(#${dd(Q,X)})`,[Q,X]),we=R.useMemo(()=>`url(#${dd(j,X)})`,[j,X]);if(P)return null;const ne=He=>{const{edges:Me,addSelectedEdges:K}=te.getState();if(T&&(te.setState({nodesSelectionActive:!1}),K([n])),o){const re=Me.find(Ee=>Ee.id===n);o(He,re)}},Ye=Pa(n,te.getState,s),ke=Pa(n,te.getState,I),ze=Pa(n,te.getState,x),lt=Pa(n,te.getState,F),$e=Pa(n,te.getState,O),ee=(He,Me)=>{if(He.button!==0)return;const{edges:K,isValidConnection:re}=te.getState(),Ee=Me?E:b,Ie=(Me?A:k)||null,Qe=Me?"target":"source",Xe=re||f$,Dt=Me,Ot=K.find(pr=>pr.id===n);me(!0),q==null||q(He,Ot,Qe);const _a=pr=>{me(!1),B==null||B(pr,Ot,Qe)};C0({event:He,handleId:Ie,nodeId:Ee,onConnect:pr=>V==null?void 0:V(Ot,pr),isTarget:Dt,getState:te.getState,setState:te.setState,isValidConnection:Xe,edgeUpdaterType:Qe,onEdgeUpdateEnd:_a})},ce=He=>ee(He,!0),fe=He=>ee(He,!1),Ne=()=>ge(!0),ve=()=>ge(!1),pt=!T&&!o,Se=He=>{var Me;if(f0.includes(He.key)&&T){const{unselectNodesAndEdges:K,addSelectedEdges:re,edges:Ee}=te.getState();He.key==="Escape"?((Me=ye.current)==null||Me.blur(),K({edges:[Ee.find(Qe=>Qe.id===n)]})):re([n])}};return L("g",{className:It(["react-flow__edge",`react-flow__edge-${r}`,a,{selected:l,animated:c,inactive:pt,updating:oe}]),onClick:ne,onDoubleClick:Ye,onContextMenu:ke,onMouseEnter:ze,onMouseMove:lt,onMouseLeave:$e,onKeyDown:Z?Se:void 0,tabIndex:Z?0:void 0,role:Z?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${b} to ${E}`,"aria-describedby":Z?`${$0}-${X}`:void 0,ref:ye,children:[!Re&&v(e,{id:n,source:b,target:E,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,data:i,style:g,sourceX:y,sourceY:_,targetX:S,targetY:w,sourcePosition:C,targetPosition:N,sourceHandleId:k,targetHandleId:A,markerStart:he,markerEnd:we,pathOptions:ae,interactionWidth:ie}),J&&L(G,{children:[(J==="source"||J===!0)&&v(Wm,{position:C,centerX:y,centerY:_,radius:$,onMouseDown:ce,onMouseEnter:Ne,onMouseOut:ve,type:"source"}),(J==="target"||J===!0)&&v(Wm,{position:N,centerX:S,centerY:w,radius:$,onMouseDown:fe,onMouseEnter:Ne,onMouseOut:ve,type:"target"})]})]})};return t.displayName="EdgeWrapper",R.memo(t)};function p$(e){const t={default:Vn(e.default||Qo),straight:Vn(e.bezier||Gp),step:Vn(e.step||Qp),smoothstep:Vn(e.step||Js),simplebezier:Vn(e.simplebezier||jp)},n={},a=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=Vn(e[i]||Qo),r),n);return{...t,...a}}function jm(e,t,n=null){const a=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case le.Top:return{x:a+i/2,y:r};case le.Right:return{x:a+i,y:r+o/2};case le.Bottom:return{x:a+i/2,y:r+o};case le.Left:return{x:a,y:r+o/2}}}function Qm(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const h$=(e,t,n,a,r,i)=>{const o=jm(n,e,t),s=jm(i,a,r);return{sourceX:o.x,sourceY:o.y,targetX:s.x,targetY:s.y}};function m$({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:a,targetWidth:r,targetHeight:i,width:o,height:s,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+a,t.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=d0({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:s/l[2]}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),f=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*f)>0}function Gm(e){var a,r,i,o,s;const t=((a=e==null?void 0:e[ct])==null?void 0:a.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}function F0(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:F0(n,t):!1}function Ym(e,t,n){let a=e;do{if(a!=null&&a.matches(t))return!0;if(a===n.current)return!1;a=a.parentElement}while(a);return!1}function v$(e,t,n,a){return Array.from(e.values()).filter(r=>(r.selected||r.id===a)&&(!r.parentNode||!F0(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function D0(e,t,n,a,r=[0,0],i){let o=e.extent||a;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:u,y:d}=Zn(c,r).positionAbsolute;o=c&&Mt(u)&&Mt(d)&&Mt(c.width)&&Mt(c.height)?[[u+e.width*r[0],d+e.height*r[1]],[u+c.width-e.width+e.width*r[0],d+c.height-e.height+e.height*r[1]]]:o}else i==null||i("005",Kr.error005()),o=a;else if(e.extent&&e.parentNode){const c=n.get(e.parentNode),{x:u,y:d}=Zn(c,r).positionAbsolute;o=[[e.extent[0][0]+u,e.extent[0][1]+d],[e.extent[1][0]+u,e.extent[1][1]+d]]}let s={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);s=Zn(c,r).positionAbsolute}const l=o?Wp(t,o):t;return{position:{x:l.x-s.x,y:l.y-s.y},positionAbsolute:l}}function zl({nodeId:e,dragItems:t,nodeInternals:n}){const a=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?a.find(r=>r.id===e):a[0],a]}const Xm=(e,t,n,a)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),o=t.getBoundingClientRect(),s={x:o.width*a[0],y:o.height*a[1]};return i.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-o.left-s.x)/n,y:(c.top-o.top-s.y)/n,...Hp(l)}})};function Ra(e,t,n){return n===void 0?n:a=>{const r=t().nodeInternals.get(e);n(a,{...r})}}function pd({id:e,store:t,unselect:n=!1,nodeRef:a}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:s}=t.getState(),l=s.get(e);t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(i({nodes:[l]}),requestAnimationFrame(()=>{var c;return(c=a==null?void 0:a.current)==null?void 0:c.blur()})):r([e])}function g$(){const e=vt();return R.useCallback(({sourceEvent:n})=>{const{transform:a,snapGrid:r,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-a[0])/a[2],y:(s-a[1])/a[2]};return{xSnapped:i?r[0]*Math.round(l.x/r[0]):l.x,ySnapped:i?r[1]*Math.round(l.y/r[1]):l.y,...l}},[])}function Hl(e){return(t,n,a)=>e==null?void 0:e(t,a)}function O0({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:a,nodeId:r,isSelectable:i,selectNodesOnDrag:o}){const s=vt(),[l,c]=R.useState(!1),u=R.useRef([]),d=R.useRef({x:null,y:null}),f=R.useRef(0),p=R.useRef(null),h=R.useRef({x:0,y:0}),m=R.useRef(null),g=R.useRef(!1),b=g$();return R.useEffect(()=>{if(e!=null&&e.current){const E=Wt(e.current),y=({x:S,y:w})=>{const{nodeInternals:C,onNodeDrag:N,onSelectionDrag:T,updateNodePositions:P,nodeExtent:k,snapGrid:A,snapToGrid:I,nodeOrigin:x,onError:F}=s.getState();d.current={x:S,y:w};let O=!1;if(u.current=u.current.map(V=>{const q={x:S-V.distance.x,y:w-V.distance.y};I&&(q.x=A[0]*Math.round(q.x/A[0]),q.y=A[1]*Math.round(q.y/A[1]));const B=D0(V,q,C,k,x,F);return O=O||V.position.x!==B.position.x||V.position.y!==B.position.y,V.position=B.position,V.positionAbsolute=B.positionAbsolute,V}),!O)return;P(u.current,!0,!0),c(!0);const $=r?N:Hl(T);if($&&m.current){const[V,q]=zl({nodeId:r,dragItems:u.current,nodeInternals:C});$(m.current,V,q)}},_=()=>{if(!p.current)return;const[S,w]=u0(h.current,p.current);if(S!==0||w!==0){const{transform:C,panBy:N}=s.getState();d.current.x=(d.current.x??0)-S/C[2],d.current.y=(d.current.y??0)-w/C[2],y(d.current),N({x:S,y:w})}f.current=requestAnimationFrame(_)};if(t)E.on(".drag",null);else{const S=DR().on("start",w=>{var O;const{nodeInternals:C,multiSelectionActive:N,domNode:T,nodesDraggable:P,unselectNodesAndEdges:k,onNodeDragStart:A,onSelectionDragStart:I}=s.getState(),x=r?A:Hl(I);!o&&!N&&r&&((O=C.get(r))!=null&&O.selected||k()),r&&i&&o&&pd({id:r,store:s,nodeRef:e});const F=b(w);if(d.current=F,u.current=v$(C,P,F,r),x&&u.current){const[$,V]=zl({nodeId:r,dragItems:u.current,nodeInternals:C});x(w.sourceEvent,$,V)}p.current=(T==null?void 0:T.getBoundingClientRect())||null,h.current=Wr(w.sourceEvent,p.current)}).on("drag",w=>{const C=b(w),{autoPanOnNodeDrag:N}=s.getState();!g.current&&N&&(g.current=!0,_()),(d.current.x!==C.xSnapped||d.current.y!==C.ySnapped)&&u.current&&(m.current=w.sourceEvent,h.current=Wr(w.sourceEvent,p.current),y(C))}).on("end",w=>{if(c(!1),g.current=!1,cancelAnimationFrame(f.current),u.current){const{updateNodePositions:C,nodeInternals:N,onNodeDragStop:T,onSelectionDragStop:P}=s.getState(),k=r?T:Hl(P);if(C(u.current,!1,!1),k){const[A,I]=zl({nodeId:r,dragItems:u.current,nodeInternals:N});k(w.sourceEvent,A,I)}}}).filter(w=>{const C=w.target;return!w.button&&(!n||!Ym(C,`.${n}`,e))&&(!a||Ym(C,a,e))});return E.call(S),()=>{E.on(".drag",null)}}}},[e,t,n,a,i,s,r,o,b]),l}function q0(){const e=vt();return R.useCallback(n=>{const{nodeInternals:a,nodeExtent:r,updateNodePositions:i,getNodes:o,snapToGrid:s,snapGrid:l,onError:c,nodesDraggable:u}=e.getState(),d=o().filter(E=>E.selected&&(E.draggable||u&&typeof E.draggable>"u")),f=s?l[0]:5,p=s?l[1]:5,h=n.isShiftPressed?4:1,m=n.x*f*h,g=n.y*p*h,b=d.map(E=>{if(E.positionAbsolute){const y={x:E.positionAbsolute.x+m,y:E.positionAbsolute.y+g};s&&(y.x=l[0]*Math.round(y.x/l[0]),y.y=l[1]*Math.round(y.y/l[1]));const{positionAbsolute:_,position:S}=D0(E,y,a,r,void 0,c);E.position=S,E.positionAbsolute=_}return E});i(b,!0,!1)},[])}const Jn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Aa=e=>{const t=({id:n,type:a,data:r,xPos:i,yPos:o,xPosOrigin:s,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onContextMenu:h,onDoubleClick:m,style:g,className:b,isDraggable:E,isSelectable:y,isConnectable:_,isFocusable:S,selectNodesOnDrag:w,sourcePosition:C,targetPosition:N,hidden:T,resizeObserver:P,dragHandle:k,zIndex:A,isParent:I,noDragClassName:x,noPanClassName:F,initialized:O,disableKeyboardA11y:$,ariaLabel:V,rfId:q})=>{const B=vt(),j=R.useRef(null),Q=R.useRef(C),X=R.useRef(N),Y=R.useRef(a),Z=y||E||u||d||f||p,J=q0(),ae=Ra(n,B.getState,d),ie=Ra(n,B.getState,f),ye=Ra(n,B.getState,p),oe=Ra(n,B.getState,h),ge=Ra(n,B.getState,m),Re=he=>{if(y&&(!w||!E)&&pd({id:n,store:B,nodeRef:j}),u){const we=B.getState().nodeInternals.get(n);u(he,{...we})}},me=he=>{if(!ud(he))if(f0.includes(he.key)&&y){const we=he.key==="Escape";pd({id:n,store:B,unselect:we,nodeRef:j})}else!$&&E&&c&&Object.prototype.hasOwnProperty.call(Jn,he.key)&&(B.setState({ariaLiveMessage:`Moved selected node ${he.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),J({x:Jn[he.key].x,y:Jn[he.key].y,isShiftPressed:he.shiftKey}))};R.useEffect(()=>{if(j.current&&!T){const he=j.current;return P==null||P.observe(he),()=>P==null?void 0:P.unobserve(he)}},[T]),R.useEffect(()=>{const he=Y.current!==a,we=Q.current!==C,ne=X.current!==N;j.current&&(he||we||ne)&&(he&&(Y.current=a),we&&(Q.current=C),ne&&(X.current=N),B.getState().updateNodeDimensions([{id:n,nodeElement:j.current,forceUpdate:!0}]))},[n,a,C,N]);const te=O0({nodeRef:j,disabled:T||!E,noDragClassName:x,handleSelector:k,nodeId:n,isSelectable:y,selectNodesOnDrag:w});return T?null:v("div",{className:It(["react-flow__node",`react-flow__node-${a}`,{[F]:E},b,{selected:c,selectable:y,parent:I,dragging:te}]),ref:j,style:{zIndex:A,transform:`translate(${s}px,${l}px)`,pointerEvents:Z?"all":"none",visibility:O?"visible":"hidden",...g},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ae,onMouseMove:ie,onMouseLeave:ye,onContextMenu:oe,onClick:Re,onDoubleClick:ge,onKeyDown:S?me:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":$?void 0:`${k0}-${q}`,"aria-label":V,children:v(Mk,{value:n,children:v(e,{id:n,data:r,type:a,xPos:i,yPos:o,selected:c,isConnectable:_,sourcePosition:C,targetPosition:N,dragging:te,dragHandle:k,zIndex:A})})})};return t.displayName="NodeWrapper",R.memo(t)};function y$(e){const t={input:Aa(e.input||T0),default:Aa(e.default||fd),output:Aa(e.output||R0),group:Aa(e.group||Kp)},n={},a=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Aa(e[i]||fd),r),n);return{...t,...a}}const b$=({x:e,y:t,width:n,height:a,origin:r})=>!n||!a?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-a*r[1]},w$=typeof document<"u"?document:null;var ii=(e=null,t={target:w$})=>{const[n,a]=R.useState(!1),r=R.useRef(!1),i=R.useRef(new Set([])),[o,s]=R.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=c.reduce((d,f)=>d.concat(...f),[]);return[c,u]}return[[],[]]},[e]);return R.useEffect(()=>{var l,c;if(e!==null){const u=p=>{if(r.current=p.ctrlKey||p.metaKey||p.shiftKey,!r.current&&ud(p))return!1;const h=Zm(p.code,s);i.current.add(p[h]),Km(o,i.current,!1)&&(p.preventDefault(),a(!0))},d=p=>{if(!r.current&&ud(p))return!1;const h=Zm(p.code,s);Km(o,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(p[h]),r.current=!1},f=()=>{i.current.clear(),a(!1)};return(l=t==null?void 0:t.target)==null||l.addEventListener("keydown",u),(c=t==null?void 0:t.target)==null||c.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{var p,h;(p=t==null?void 0:t.target)==null||p.removeEventListener("keydown",u),(h=t==null?void 0:t.target)==null||h.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,a]),n};function Km(e,t,n){return e.filter(a=>n||a.length===t.size).some(a=>a.every(r=>t.has(r)))}function Zm(e,t){return t.includes(e)?"code":"key"}function L0(e,t,n,a){var o,s;if(!e.parentNode)return n;const r=t.get(e.parentNode),i=Zn(r,a);return L0(r,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=r[ct])==null?void 0:o.z)??0)>(n.z??0)?((s=r[ct])==null?void 0:s.z)??0:n.z??0},a)}function V0(e,t,n){e.forEach(a=>{var r;if(a.parentNode&&!e.has(a.parentNode))throw new Error(`Parent node ${a.parentNode} not found`);if(a.parentNode||n!=null&&n[a.id]){const{x:i,y:o,z:s}=L0(a,e,{...a.position,z:((r=a[ct])==null?void 0:r.z)??0},t);a.positionAbsolute={x:i,y:o},a[ct].z=s,n!=null&&n[a.id]&&(a[ct].isParent=!0)}})}function Wl(e,t,n,a){const r=new Map,i={},o=a?1e3:0;return e.forEach(s=>{var d;const l=(Mt(s.zIndex)?s.zIndex:0)+(s.selected?o:0),c=t.get(s.id),u={width:c==null?void 0:c.width,height:c==null?void 0:c.height,...s,positionAbsolute:{x:s.position.x,y:s.position.y}};s.parentNode&&(u.parentNode=s.parentNode,i[s.parentNode]=!0),Object.defineProperty(u,ct,{enumerable:!1,value:{handleBounds:(d=c==null?void 0:c[ct])==null?void 0:d.handleBounds,z:l}}),r.set(s.id,u)}),V0(r,n,i),r}function M0(e,t={}){const{getNodes:n,width:a,height:r,minZoom:i,maxZoom:o,d3Zoom:s,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!c&&u;if(s&&l&&(f||!t.initial)){const h=n().filter(g=>{var E;const b=t.includeHiddenNodes?g.width&&g.height:!g.hidden;return(E=t.nodes)!=null&&E.length?b&&t.nodes.some(y=>y.id===g.id):b}),m=h.every(g=>g.width&&g.height);if(h.length>0&&m){const g=b0(h,d),[b,E,y]=S0(g,a,r,t.minZoom??i,t.maxZoom??o,t.padding??.1),_=Hr.translate(b,E).scale(y);return typeof t.duration=="number"&&t.duration>0?s.transform(un(l,t.duration),_):s.transform(l,_),!0}}return!1}function S$(e,t){return e.forEach(n=>{const a=t.get(n.id);a&&t.set(a.id,{...a,[ct]:a[ct],selected:n.selected})}),new Map(t)}function _$(e,t){return t.map(n=>{const a=e.find(r=>r.id===n.id);return a&&(n.selected=a.selected),n})}function ao({changedNodes:e,changedEdges:t,get:n,set:a}){const{nodeInternals:r,edges:i,onNodesChange:o,onEdgesChange:s,hasDefaultNodes:l,hasDefaultEdges:c}=n();e!=null&&e.length&&(l&&a({nodeInternals:S$(e,r)}),o==null||o(e)),t!=null&&t.length&&(c&&a({edges:_$(t,i)}),s==null||s(t))}const Mn=()=>{},E$={zoomIn:Mn,zoomOut:Mn,zoomTo:Mn,getZoom:()=>1,setViewport:Mn,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mn,fitBounds:Mn,project:e=>e,viewportInitialized:!1},C$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),x$=()=>{const e=vt(),{d3Zoom:t,d3Selection:n}=it(C$,kt);return R.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(un(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(un(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(un(n,i==null?void 0:i.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[o,s,l]=e.getState().transform,c=Hr.translate(r.x??o,r.y??s).scale(r.zoom??l);t.transform(un(n,i==null?void 0:i.duration),c)},getViewport:()=>{const[r,i,o]=e.getState().transform;return{x:r,y:i,zoom:o}},fitView:r=>M0(e.getState,r),setCenter:(r,i,o)=>{const{width:s,height:l,maxZoom:c}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,d=s/2-r*u,f=l/2-i*u,p=Hr.translate(d,f).scale(u);t.transform(un(n,o==null?void 0:o.duration),p)},fitBounds:(r,i)=>{const{width:o,height:s,minZoom:l,maxZoom:c}=e.getState(),[u,d,f]=S0(r,o,s,l,c,(i==null?void 0:i.padding)??.1),p=Hr.translate(u,d).scale(f);t.transform(un(n,i==null?void 0:i.duration),p)},project:r=>{const{transform:i,snapToGrid:o,snapGrid:s}=e.getState();return y0(r,i,o,s)},viewportInitialized:!0}:E$,[t,n])};function el(){const e=x$(),t=vt(),n=R.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),a=R.useCallback(m=>t.getState().nodeInternals.get(m),[]),r=R.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(g=>({...g}))},[]),i=R.useCallback(m=>{const{edges:g=[]}=t.getState();return g.find(b=>b.id===m)},[]),o=R.useCallback(m=>{const{getNodes:g,setNodes:b,hasDefaultNodes:E,onNodesChange:y}=t.getState(),_=g(),S=typeof m=="function"?m(_):m;if(E)b(S);else if(y){const w=S.length===0?_.map(C=>({type:"remove",id:C.id})):S.map(C=>({item:C,type:"reset"}));y(w)}},[]),s=R.useCallback(m=>{const{edges:g=[],setEdges:b,hasDefaultEdges:E,onEdgesChange:y}=t.getState(),_=typeof m=="function"?m(g):m;if(E)b(_);else if(y){const S=_.length===0?g.map(w=>({type:"remove",id:w.id})):_.map(w=>({item:w,type:"reset"}));y(S)}},[]),l=R.useCallback(m=>{const g=Array.isArray(m)?m:[m],{getNodes:b,setNodes:E,hasDefaultNodes:y,onNodesChange:_}=t.getState();if(y){const w=[...b(),...g];E(w)}else if(_){const S=g.map(w=>({item:w,type:"add"}));_(S)}},[]),c=R.useCallback(m=>{const g=Array.isArray(m)?m:[m],{edges:b=[],setEdges:E,hasDefaultEdges:y,onEdgesChange:_}=t.getState();if(y)E([...b,...g]);else if(_){const S=g.map(w=>({item:w,type:"add"}));_(S)}},[]),u=R.useCallback(()=>{const{getNodes:m,edges:g=[],transform:b}=t.getState(),[E,y,_]=b;return{nodes:m().map(S=>({...S})),edges:g.map(S=>({...S})),viewport:{x:E,y,zoom:_}}},[]),d=R.useCallback(({nodes:m,edges:g})=>{const{nodeInternals:b,getNodes:E,edges:y,hasDefaultNodes:_,hasDefaultEdges:S,onNodesDelete:w,onEdgesDelete:C,onNodesChange:N,onEdgesChange:T}=t.getState(),P=(m||[]).map(F=>F.id),k=(g||[]).map(F=>F.id),A=E().reduce((F,O)=>{const $=!P.includes(O.id)&&O.parentNode&&F.find(q=>q.id===O.parentNode);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(P.includes(O.id)||$)&&F.push(O),F},[]),I=y.filter(F=>typeof F.deletable=="boolean"?F.deletable:!0),x=I.filter(F=>k.includes(F.id));if(A||x){const F=Xp(A,I),O=[...x,...F],$=O.reduce((V,q)=>(V.includes(q.id)||V.push(q.id),V),[]);if((S||_)&&(S&&t.setState({edges:y.filter(V=>!$.includes(V.id))}),_&&(A.forEach(V=>{b.delete(V.id)}),t.setState({nodeInternals:new Map(b)}))),$.length>0&&(C==null||C(O),T&&T($.map(V=>({id:V,type:"remove"})))),A.length>0&&(w==null||w(A),N)){const V=A.map(q=>({id:q.id,type:"remove"}));N(V)}}},[]),f=R.useCallback(m=>{const g=$k(m),b=g?null:t.getState().nodeInternals.get(m.id);return[g?m:Om(b),b,g]},[]),p=R.useCallback((m,g=!0,b)=>{const[E,y,_]=f(m);return E?(b||t.getState().getNodes()).filter(S=>{if(!_&&(S.id===y.id||!S.positionAbsolute))return!1;const w=Om(S),C=ld(w,E);return g&&C>0||C>=m.width*m.height}):[]},[]),h=R.useCallback((m,g,b=!0)=>{const[E]=f(m);if(!E)return!1;const y=ld(E,g);return b&&y>0||y>=m.width*m.height},[]);return R.useMemo(()=>({...e,getNodes:n,getNode:a,getEdges:r,getEdge:i,setNodes:o,setEdges:s,addNodes:l,addEdges:c,toObject:u,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:h}),[e,n,a,r,i,o,s,l,c,u,d,p,h])}var N$=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=vt(),{deleteElements:a}=el(),r=ii(e),i=ii(t);R.useEffect(()=>{if(r){const{edges:o,getNodes:s}=n.getState(),l=s().filter(u=>u.selected),c=o.filter(u=>u.selected);a({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[r]),R.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function I$(e){const t=vt();R.useEffect(()=>{let n;const a=()=>{var i,o;if(!e.current)return;const r=Hp(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Kr.error004())),t.setState({width:r.width||500,height:r.height||500})};return a(),window.addEventListener("resize",a),e.current&&(n=new ResizeObserver(()=>a()),n.observe(e.current)),()=>{window.removeEventListener("resize",a),n&&e.current&&n.unobserve(e.current)}},[])}const Zp={position:"absolute",width:"100%",height:"100%",top:0,left:0},T$=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,jl=e=>({x:e.x,y:e.y,zoom:e.k}),Bn=(e,t)=>e.target.closest(`.${t}`),Jm=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),P$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),R$=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:a,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:l=Kn.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:p,minZoom:h,maxZoom:m,zoomActivationKeyCode:g,preventScrolling:b=!0,children:E,noWheelClassName:y,noPanClassName:_})=>{const S=R.useRef(),w=vt(),C=R.useRef(!1),N=R.useRef(!1),T=R.useRef(null),P=R.useRef({x:0,y:0,zoom:0}),{d3Zoom:k,d3Selection:A,d3ZoomHandler:I,userSelectionActive:x}=it(P$,kt),F=ii(g),O=R.useRef(0);return I$(T),R.useEffect(()=>{if(T.current){const $=T.current.getBoundingClientRect(),V=xk().scaleExtent([h,m]).translateExtent(p),q=Wt(T.current).call(V),B=Hr.translate(f.x,f.y).scale(oa(f.zoom,h,m)),j=[[0,0],[$.width,$.height]],Q=V.constrain()(B,j,p);V.transform(q,Q),w.setState({d3Zoom:V,d3Selection:q,d3ZoomHandler:q.on("wheel.zoom"),transform:[Q.x,Q.y,Q.k],domNode:T.current.closest(".react-flow")})}},[]),R.useEffect(()=>{A&&k&&(o&&!F&&!x?A.on("wheel.zoom",$=>{if(Bn($,y))return!1;$.preventDefault(),$.stopImmediatePropagation();const V=A.property("__zoom").k||1;if($.ctrlKey&&i){const Q=rr($),X=-$.deltaY*($.deltaMode===1?.05:$.deltaMode?1:.002)*10,Y=V*Math.pow(2,X);k.scaleTo(A,Y,Q);return}const q=$.deltaMode===1?20:1,B=l===Kn.Vertical?0:$.deltaX*q,j=l===Kn.Horizontal?0:$.deltaY*q;k.translateBy(A,-(B/V)*s,-(j/V)*s)},{passive:!1}):typeof I<"u"&&A.on("wheel.zoom",function($,V){if(!b||Bn($,y))return null;$.preventDefault(),I.call(this,$,V)},{passive:!1}))},[x,o,l,A,k,I,F,i,b,y]),R.useEffect(()=>{k&&k.on("start",$=>{var q;if(!$.sourceEvent)return null;O.current=$.sourceEvent.button;const{onViewportChangeStart:V}=w.getState();if(C.current=!0,((q=$.sourceEvent)==null?void 0:q.type)==="mousedown"&&w.setState({paneDragging:!0}),t||V){const B=jl($.transform);P.current=B,V==null||V(B),t==null||t($.sourceEvent,B)}})},[k,t]),R.useEffect(()=>{k&&(x&&!C.current?k.on("zoom",null):x||k.on("zoom",$=>{const{onViewportChange:V}=w.getState();if(w.setState({transform:[$.transform.x,$.transform.y,$.transform.k]}),N.current=!!(a&&Jm(d,O.current??0)),e||V){const q=jl($.transform);V==null||V(q),e==null||e($.sourceEvent,q)}}))},[x,k,e,d,a]),R.useEffect(()=>{k&&k.on("end",$=>{if(!$.sourceEvent)return null;const{onViewportChangeEnd:V}=w.getState();if(C.current=!1,w.setState({paneDragging:!1}),a&&Jm(d,O.current??0)&&!N.current&&a($.sourceEvent),N.current=!1,(n||V)&&T$(P.current,$.transform)){const q=jl($.transform);P.current=q,clearTimeout(S.current),S.current=setTimeout(()=>{V==null||V(q),n==null||n($.sourceEvent,q)},o?150:0)}})},[k,o,d,n,a]),R.useEffect(()=>{k&&k.filter($=>{const V=F||r,q=i&&$.ctrlKey;if($.button===1&&$.type==="mousedown"&&(Bn($,"react-flow__node")||Bn($,"react-flow__edge")))return!0;if(!d&&!V&&!o&&!c&&!i||x||!c&&$.type==="dblclick"||Bn($,y)&&$.type==="wheel"||Bn($,_)&&$.type!=="wheel"||!i&&$.ctrlKey&&$.type==="wheel"||!V&&!o&&!q&&$.type==="wheel"||!d&&($.type==="mousedown"||$.type==="touchstart")||Array.isArray(d)&&!d.includes($.button)&&($.type==="mousedown"||$.type==="touchstart"))return!1;const B=Array.isArray(d)&&d.includes($.button)||!$.button||$.button<=1;return(!$.ctrlKey||$.type==="wheel")&&B})},[x,k,r,i,o,c,d,u,F]),v("div",{className:"react-flow__renderer",ref:T,style:Zp,children:E})},A$=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function k$(){const{userSelectionActive:e,userSelectionRect:t}=it(A$,kt);return e&&t?v("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ev(e,t){const n=e.find(a=>a.id===t.parentNode);if(n){const a=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(a>0||r>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),r>0&&(n.style.height+=r),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function B0(e,t){if(e.some(a=>a.type==="reset"))return e.filter(a=>a.type==="reset").map(a=>a.item);const n=e.filter(a=>a.type==="add").map(a=>a.item);return t.reduce((a,r)=>{const i=e.filter(s=>s.id===r.id);if(i.length===0)return a.push(r),a;const o={...r};for(const s of i)if(s)switch(s.type){case"select":{o.selected=s.selected;break}case"position":{typeof s.position<"u"&&(o.position=s.position),typeof s.positionAbsolute<"u"&&(o.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(o.dragging=s.dragging),o.expandParent&&ev(a,o);break}case"dimensions":{typeof s.dimensions<"u"&&(o.width=s.dimensions.width,o.height=s.dimensions.height),typeof s.updateStyle<"u"&&(o.style={...o.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(o.resizing=s.resizing),o.expandParent&&ev(a,o);break}case"remove":return a}return a.push(o),a},n)}function U0(e,t){return B0(e,t)}function $$(e,t){return B0(e,t)}const Lr=(e,t)=>({id:e,type:"select",selected:t});function jn(e,t){return e.reduce((n,a)=>{const r=t.includes(a.id);return!a.selected&&r?(a.selected=!0,n.push(Lr(a.id,!0))):a.selected&&!r&&(a.selected=!1,n.push(Lr(a.id,!1))),n},[])}const Ql=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},F$=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),z0=R.memo(({isSelecting:e,selectionMode:t=ni.Full,panOnDrag:n,onSelectionStart:a,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:s,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:u,children:d})=>{const f=R.useRef(null),p=vt(),h=R.useRef(0),m=R.useRef(0),g=R.useRef(),{userSelectionActive:b,elementsSelectable:E,dragging:y}=it(F$,kt),_=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),h.current=0,m.current=0},S=I=>{i==null||i(I),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},w=I=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){I.preventDefault();return}o==null||o(I)},C=s?I=>s(I):void 0,N=I=>{const{resetSelectedElements:x,domNode:F}=p.getState();if(g.current=F==null?void 0:F.getBoundingClientRect(),!E||!e||I.button!==0||I.target!==f.current||!g.current)return;const{x:O,y:$}=Wr(I,g.current);x(),p.setState({userSelectionRect:{width:0,height:0,startX:O,startY:$,x:O,y:$}}),a==null||a(I)},T=I=>{const{userSelectionRect:x,nodeInternals:F,edges:O,transform:$,onNodesChange:V,onEdgesChange:q,nodeOrigin:B,getNodes:j}=p.getState();if(!e||!g.current||!x)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Q=Wr(I,g.current),X=x.startX??0,Y=x.startY??0,Z={...x,x:Q.x<X?Q.x:X,y:Q.y<Y?Q.y:Y,width:Math.abs(Q.x-X),height:Math.abs(Q.y-Y)},J=j(),ae=w0(F,Z,$,t===ni.Partial,!0,B),ie=Xp(ae,O).map(oe=>oe.id),ye=ae.map(oe=>oe.id);if(h.current!==ye.length){h.current=ye.length;const oe=jn(J,ye);oe.length&&(V==null||V(oe))}if(m.current!==ie.length){m.current=ie.length;const oe=jn(O,ie);oe.length&&(q==null||q(oe))}p.setState({userSelectionRect:Z})},P=I=>{if(I.button!==0)return;const{userSelectionRect:x}=p.getState();!b&&x&&I.target===f.current&&(S==null||S(I)),p.setState({nodesSelectionActive:h.current>0}),_(),r==null||r(I)},k=I=>{b&&(p.setState({nodesSelectionActive:h.current>0}),r==null||r(I)),_()},A=E&&(e||b);return L("div",{className:It(["react-flow__pane",{dragging:y,selection:e}]),onClick:A?void 0:Ql(S,f),onContextMenu:Ql(w,f),onWheel:Ql(C,f),onMouseEnter:A?void 0:l,onMouseDown:A?N:void 0,onMouseMove:A?T:c,onMouseUp:A?P:void 0,onMouseLeave:A?k:u,ref:f,style:Zp,children:[d,v(k$,{})]})});z0.displayName="Pane";const D$=e=>{const t=e.getNodes().filter(n=>n.selected);return{...b0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function O$({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const a=vt(),{width:r,height:i,x:o,y:s,transformString:l,userSelectionActive:c}=it(D$,kt),u=q0(),d=R.useRef(null);if(R.useEffect(()=>{var h;n||(h=d.current)==null||h.focus({preventScroll:!0})},[n]),O0({nodeRef:d}),c||!r||!i)return null;const f=e?h=>{const m=a.getState().getNodes().filter(g=>g.selected);e(h,m)}:void 0,p=h=>{Object.prototype.hasOwnProperty.call(Jn,h.key)&&u({x:Jn[h.key].x,y:Jn[h.key].y,isShiftPressed:h.shiftKey})};return v("div",{className:It(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:v("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:r,height:i,top:s,left:o}})})}var q$=R.memo(O$);const L$=e=>e.nodesSelectionActive,H0=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:s,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:h,onSelectionEnd:m,multiSelectionKeyCode:g,panActivationKeyCode:b,zoomActivationKeyCode:E,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:w,panOnScrollSpeed:C,panOnScrollMode:N,zoomOnDoubleClick:T,panOnDrag:P,defaultViewport:k,translateExtent:A,minZoom:I,maxZoom:x,preventScrolling:F,onSelectionContextMenu:O,noWheelClassName:$,noPanClassName:V,disableKeyboardA11y:q})=>{const B=it(L$),j=ii(d),X=ii(b)||P,Y=j||f&&X!==!0;return N$({deleteKeyCode:s,multiSelectionKeyCode:g}),v(R$,{onMove:l,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:w,panOnScrollSpeed:C,panOnScrollMode:N,zoomOnDoubleClick:T,panOnDrag:!j&&X,defaultViewport:k,translateExtent:A,minZoom:I,maxZoom:x,zoomActivationKeyCode:E,preventScrolling:F,noWheelClassName:$,noPanClassName:V,children:L(z0,{onSelectionStart:h,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:X,isSelecting:!!Y,selectionMode:p,children:[e,B&&v(q$,{onSelectionContextMenu:O,noPanClassName:V,disableKeyboardA11y:q})]})})};H0.displayName="FlowRenderer";var V$=R.memo(H0);function M$(e){return it(R.useCallback(n=>e?w0(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}const B$=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),W0=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:a,elementsSelectable:r,updateNodeDimensions:i,onError:o}=it(B$,kt),s=M$(e.onlyRenderVisibleElements),l=R.useRef(),c=R.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const f=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));i(f)});return l.current=u,u},[]);return R.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),v("div",{className:"react-flow__nodes",style:Zp,children:s.map(u=>{var S,w;let d=u.type||"default";e.nodeTypes[d]||(o==null||o("003",Kr.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,p=!!(u.draggable||t&&typeof u.draggable>"u"),h=!!(u.selectable||r&&typeof u.selectable>"u"),m=!!(u.connectable||n&&typeof u.connectable>"u"),g=!!(u.focusable||a&&typeof u.focusable>"u"),b=e.nodeExtent?Wp(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,E=(b==null?void 0:b.x)??0,y=(b==null?void 0:b.y)??0,_=b$({x:E,y,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return v(f,{id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||le.Bottom,targetPosition:u.targetPosition||le.Top,hidden:u.hidden,xPos:E,yPos:y,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:p,isSelectable:h,isConnectable:m,isFocusable:g,resizeObserver:c,dragHandle:u.dragHandle,zIndex:((S=u[ct])==null?void 0:S.z)??0,isParent:!!((w=u[ct])!=null&&w.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel},u.id)})})};W0.displayName="NodeRenderer";var U$=R.memo(W0);const z$=[{level:0,isMaxLevel:!0,edges:[]}];function H$(e,t,n=!1){let a=-1;const r=e.reduce((o,s)=>{var u,d,f,p;const l=Mt(s.zIndex);let c=l?s.zIndex:0;return n&&(c=l?s.zIndex:Math.max(((d=(u=t.get(s.source))==null?void 0:u[ct])==null?void 0:d.z)||0,((p=(f=t.get(s.target))==null?void 0:f[ct])==null?void 0:p.z)||0)),o[c]?o[c].push(s):o[c]=[s],a=c>a?c:a,o},{}),i=Object.entries(r).map(([o,s])=>{const l=+o;return{edges:s,level:l,isMaxLevel:l===a}});return i.length===0?z$:i}function W$(e,t,n){const a=it(R.useCallback(r=>e?r.edges.filter(i=>{const o=t.get(i.source),s=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&m$({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:s.width,targetHeight:s.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return H$(a,t,n)}const j$=({color:e="none",strokeWidth:t=1})=>v("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),Q$=({color:e="none",strokeWidth:t=1})=>v("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),tv={[ai.Arrow]:j$,[ai.ArrowClosed]:Q$};function G$(e){const t=vt();return R.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(tv,e)?tv[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",Kr.error009(e)),null)},[e])}const Y$=({id:e,type:t,color:n,width:a=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:s="auto-start-reverse"})=>{const l=G$(t);return l?v("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:v(l,{color:n,strokeWidth:o})}):null},X$=({defaultColor:e,rfId:t})=>n=>{const a=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const s=dd(o,t);a.includes(s)||(r.push({id:s,color:o.color||e,...o}),a.push(s))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},j0=({defaultColor:e,rfId:t})=>{const n=it(R.useCallback(X$({defaultColor:e,rfId:t}),[e,t]),(a,r)=>!(a.length!==r.length||a.some((i,o)=>i.id!==r[o].id)));return v("defs",{children:n.map(a=>v(Y$,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})};j0.displayName="MarkerDefinitions";var K$=R.memo(j0);const Z$=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Q0=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:a,edgeTypes:r,noPanClassName:i,onEdgeUpdate:o,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:p,onEdgeUpdateStart:h,onEdgeUpdateEnd:m,children:g})=>{const{edgesFocusable:b,edgesUpdatable:E,elementsSelectable:y,width:_,height:S,connectionMode:w,nodeInternals:C,onError:N}=it(Z$,kt),T=W$(t,C,n);return _?L(G,{children:[T.map(({level:P,edges:k,isMaxLevel:A})=>L("svg",{style:{zIndex:P},width:_,height:S,className:"react-flow__edges react-flow__container",children:[A&&v(K$,{defaultColor:e,rfId:a}),v("g",{children:k.map(I=>{const[x,F,O]=Gm(C.get(I.source)),[$,V,q]=Gm(C.get(I.target));if(!O||!q)return null;let B=I.type||"default";r[B]||(N==null||N("011",Kr.error011(B)),B="default");const j=r[B]||r.default,Q=w===Nn.Strict?V.target:(V.target??[]).concat(V.source??[]),X=Qm(F.source,I.sourceHandle),Y=Qm(Q,I.targetHandle),Z=(X==null?void 0:X.position)||le.Bottom,J=(Y==null?void 0:Y.position)||le.Top,ae=!!(I.focusable||b&&typeof I.focusable>"u"),ie=typeof o<"u"&&(I.updatable||E&&typeof I.updatable>"u");if(!X||!Y)return N==null||N("008",Kr.error008(X,I)),null;const{sourceX:ye,sourceY:oe,targetX:ge,targetY:Re}=h$(x,X,Z,$,Y,J);return v(j,{id:I.id,className:It([I.className,i]),type:B,data:I.data,selected:!!I.selected,animated:!!I.animated,hidden:!!I.hidden,label:I.label,labelStyle:I.labelStyle,labelShowBg:I.labelShowBg,labelBgStyle:I.labelBgStyle,labelBgPadding:I.labelBgPadding,labelBgBorderRadius:I.labelBgBorderRadius,style:I.style,source:I.source,target:I.target,sourceHandleId:I.sourceHandle,targetHandleId:I.targetHandle,markerEnd:I.markerEnd,markerStart:I.markerStart,sourceX:ye,sourceY:oe,targetX:ge,targetY:Re,sourcePosition:Z,targetPosition:J,elementsSelectable:y,onEdgeUpdate:o,onContextMenu:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:p,onEdgeUpdateStart:h,onEdgeUpdateEnd:m,rfId:a,ariaLabel:I.ariaLabel,isFocusable:ae,isUpdatable:ie,pathOptions:"pathOptions"in I?I.pathOptions:void 0,interactionWidth:I.interactionWidth},I.id)})})]},P)),g]}):null};Q0.displayName="EdgeRenderer";var J$=R.memo(Q0);const eF=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function tF({children:e}){const t=it(eF);return v("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function rF(e){const t=el(),n=R.useRef(!1);R.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const nF={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},G0=({nodeId:e,handleType:t,style:n,type:a=br.Bezier,CustomComponent:r,connectionStatus:i})=>{var w,C,N;const{fromNode:o,handleId:s,toX:l,toY:c,connectionMode:u}=it(R.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),kt),d=(w=o==null?void 0:o[ct])==null?void 0:w.handleBounds;let f=d==null?void 0:d[t];if(u===Nn.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!o||!f)return null;const p=s?f.find(T=>T.id===s):f[0],h=p?p.x+p.width/2:(o.width??0)/2,m=p?p.y+p.height/2:o.height??0,g=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+h,b=(((N=o.positionAbsolute)==null?void 0:N.y)??0)+m,E=p==null?void 0:p.position,y=E?nF[E]:null;if(!E||!y)return null;if(r)return v(r,{connectionLineType:a,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:g,fromY:b,toX:l,toY:c,fromPosition:E,toPosition:y,connectionStatus:i});let _="";const S={sourceX:g,sourceY:b,sourcePosition:E,targetX:l,targetY:c,targetPosition:y};return a===br.Bezier?[_]=g0(S):a===br.Step?[_]=cd({...S,borderRadius:0}):a===br.SmoothStep?[_]=cd(S):a===br.SimpleBezier?[_]=v0(S):_=`M${g},${b} ${l},${c}`,v("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};G0.displayName="ConnectionLine";const aF=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function iF({containerStyle:e,style:t,type:n,component:a}){const{nodeId:r,handleType:i,nodesConnectable:o,width:s,height:l,connectionStatus:c}=it(aF,kt);return!(r&&i&&s&&o)?null:v("svg",{style:e,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:v("g",{className:It(["react-flow__connection",c]),children:v(G0,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:a,connectionStatus:c})})})}const Y0=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:a,onMoveEnd:r,onInit:i,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:m,onSelectionEnd:g,connectionLineType:b,connectionLineStyle:E,connectionLineComponent:y,connectionLineContainerStyle:_,selectionKeyCode:S,selectionOnDrag:w,selectionMode:C,multiSelectionKeyCode:N,panActivationKeyCode:T,zoomActivationKeyCode:P,deleteKeyCode:k,onlyRenderVisibleElements:A,elementsSelectable:I,selectNodesOnDrag:x,defaultViewport:F,translateExtent:O,minZoom:$,maxZoom:V,preventScrolling:q,defaultMarkerColor:B,zoomOnScroll:j,zoomOnPinch:Q,panOnScroll:X,panOnScrollSpeed:Y,panOnScrollMode:Z,zoomOnDoubleClick:J,panOnDrag:ae,onPaneClick:ie,onPaneMouseEnter:ye,onPaneMouseMove:oe,onPaneMouseLeave:ge,onPaneScroll:Re,onPaneContextMenu:me,onEdgeUpdate:te,onEdgeContextMenu:he,onEdgeMouseEnter:we,onEdgeMouseMove:ne,onEdgeMouseLeave:Ye,edgeUpdaterRadius:ke,onEdgeUpdateStart:ze,onEdgeUpdateEnd:lt,noDragClassName:$e,noWheelClassName:ee,noPanClassName:ce,elevateEdgesOnSelect:fe,disableKeyboardA11y:Ne,nodeOrigin:ve,nodeExtent:pt,rfId:Se})=>(rF(i),v(V$,{onPaneClick:ie,onPaneMouseEnter:ye,onPaneMouseMove:oe,onPaneMouseLeave:ge,onPaneContextMenu:me,onPaneScroll:Re,deleteKeyCode:k,selectionKeyCode:S,selectionOnDrag:w,selectionMode:C,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:N,panActivationKeyCode:T,zoomActivationKeyCode:P,elementsSelectable:I,onMove:n,onMoveStart:a,onMoveEnd:r,zoomOnScroll:j,zoomOnPinch:Q,zoomOnDoubleClick:J,panOnScroll:X,panOnScrollSpeed:Y,panOnScrollMode:Z,panOnDrag:ae,defaultViewport:F,translateExtent:O,minZoom:$,maxZoom:V,onSelectionContextMenu:h,preventScrolling:q,noDragClassName:$e,noWheelClassName:ee,noPanClassName:ce,disableKeyboardA11y:Ne,children:L(tF,{children:[v(J$,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:c,onEdgeUpdate:te,onlyRenderVisibleElements:A,onEdgeContextMenu:he,onEdgeMouseEnter:we,onEdgeMouseMove:ne,onEdgeMouseLeave:Ye,onEdgeUpdateStart:ze,onEdgeUpdateEnd:lt,edgeUpdaterRadius:ke,defaultMarkerColor:B,noPanClassName:ce,elevateEdgesOnSelect:!!fe,disableKeyboardA11y:Ne,rfId:Se,children:v(iF,{style:E,type:b,component:y,containerStyle:_})}),v("div",{className:"react-flow__edgelabel-renderer"}),v(U$,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:x,onlyRenderVisibleElements:A,noPanClassName:ce,noDragClassName:$e,disableKeyboardA11y:Ne,nodeOrigin:ve,nodeExtent:pt,rfId:Se})]})}));Y0.displayName="GraphView";var oF=R.memo(Y0);const hd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],kr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hd,nodeExtent:hd,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Nn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Fk,isValidConnection:void 0},sF=()=>xT((e,t)=>({...kr,setNodes:n=>{const{nodeInternals:a,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:Wl(n,a,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:a={}}=t();e({edges:n.map(r=>({...a,...r}))})},setDefaultNodesAndEdges:(n,a)=>{const r=typeof n<"u",i=typeof a<"u",o=r?Wl(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?a:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:a,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:s,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((m,g)=>{const b=r.get(g.id);if(b){const E=Hp(g.nodeElement);!!(E.width&&E.height&&(b.width!==E.width||b.height!==E.height||g.forceUpdate))&&(r.set(b.id,{...b,[ct]:{...b[ct],handleBounds:{source:Xm(".source",g.nodeElement,f,c),target:Xm(".target",g.nodeElement,f,c)}},...E}),m.push({id:b.id,type:"dimensions",dimensions:E}))}return m},[]);V0(r,c);const h=o||i&&!o&&M0(t,{initial:!0,...s});e({nodeInternals:new Map(r),fitViewOnInitDone:h}),(p==null?void 0:p.length)>0&&(a==null||a(p))},updateNodePositions:(n,a=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(s=>{const l={id:s.id,type:"position",dragging:r};return a&&(l.positionAbsolute=s.positionAbsolute,l.position=s.position),l});i(o)},triggerNodeChanges:n=>{const{onNodesChange:a,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:o,getNodes:s,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(i){const c=U0(n,s()),u=Wl(c,r,o,l);e({nodeInternals:u})}a==null||a(n)}},addSelectedNodes:n=>{const{multiSelectionActive:a,edges:r,getNodes:i}=t();let o,s=null;a?o=n.map(l=>Lr(l,!0)):(o=jn(i(),n),s=jn(r,[])),ao({changedNodes:o,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:a,edges:r,getNodes:i}=t();let o,s=null;a?o=n.map(l=>Lr(l,!0)):(o=jn(r,n),s=jn(i(),[])),ao({changedNodes:s,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:a}={})=>{const{edges:r,getNodes:i}=t(),o=n||i(),s=a||r,l=o.map(u=>(u.selected=!1,Lr(u.id,!1))),c=s.map(u=>Lr(u.id,!1));ao({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:a,maxZoom:r}=t();a==null||a.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:a,minZoom:r}=t();a==null||a.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var a;(a=t().d3Zoom)==null||a.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:a}=t(),i=a().filter(s=>s.selected).map(s=>Lr(s.id,!1)),o=n.filter(s=>s.selected).map(s=>Lr(s.id,!1));ao({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:a}=t();a.forEach(r=>{r.positionAbsolute=Wp(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(a)})},panBy:n=>{const{transform:a,width:r,height:i,d3Zoom:o,d3Selection:s,translateExtent:l}=t();if(!o||!s||!n.x&&!n.y)return;const c=Hr.translate(a[0]+n.x,a[1]+n.y).scale(a[2]),u=[[0,0],[r,i]],d=o==null?void 0:o.constrain()(c,u,l);o.transform(s,d)},cancelConnection:()=>e({connectionNodeId:kr.connectionNodeId,connectionHandleId:kr.connectionHandleId,connectionHandleType:kr.connectionHandleType,connectionStatus:kr.connectionStatus,connectionStartHandle:kr.connectionStartHandle,connectionEndHandle:kr.connectionEndHandle}),reset:()=>e({...kr})})),Jp=({children:e})=>{const t=R.useRef(null);return t.current||(t.current=sF()),v(Nk,{value:t.current,children:e})};Jp.displayName="ReactFlowProvider";const X0=({children:e})=>R.useContext(Zs)?v(G,{children:e}):v(Jp,{children:e});X0.displayName="ReactFlowWrapper";function rv(e,t){return R.useRef(null),R.useMemo(()=>t(e),[e])}const lF={input:T0,default:fd,output:R0,group:Kp},uF={default:Qo,straight:Gp,step:Qp,smoothstep:Js,simplebezier:jp},cF=[0,0],dF=[15,15],fF={x:0,y:0,zoom:1},pF={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},K0=R.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:r,nodeTypes:i=lF,edgeTypes:o=uF,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:h,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:b,onNodeMouseEnter:E,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:S,onNodeDoubleClick:w,onNodeDragStart:C,onNodeDrag:N,onNodeDragStop:T,onNodesDelete:P,onEdgesDelete:k,onSelectionChange:A,onSelectionDragStart:I,onSelectionDrag:x,onSelectionDragStop:F,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:V,connectionMode:q=Nn.Strict,connectionLineType:B=br.Bezier,connectionLineStyle:j,connectionLineComponent:Q,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:J=!1,selectionMode:ae=ni.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ye="Meta",zoomActivationKeyCode:oe="Meta",snapToGrid:ge=!1,snapGrid:Re=dF,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:te=!0,nodesDraggable:he,nodesConnectable:we,nodesFocusable:ne,nodeOrigin:Ye=cF,edgesFocusable:ke,edgesUpdatable:ze,elementsSelectable:lt,defaultViewport:$e=fF,minZoom:ee=.5,maxZoom:ce=2,translateExtent:fe=hd,preventScrolling:Ne=!0,nodeExtent:ve,defaultMarkerColor:pt="#b1b1b7",zoomOnScroll:Se=!0,zoomOnPinch:He=!0,panOnScroll:Me=!1,panOnScrollSpeed:K=.5,panOnScrollMode:re=Kn.Free,zoomOnDoubleClick:Ee=!0,panOnDrag:Ie=!0,onPaneClick:Qe,onPaneMouseEnter:Xe,onPaneMouseMove:Dt,onPaneMouseLeave:Ot,onPaneScroll:_a,onPaneContextMenu:Li,children:pr,onEdgeUpdate:Tl,onEdgeContextMenu:Pr,onEdgeDoubleClick:Pl,onEdgeMouseEnter:Vi,onEdgeMouseMove:Rl,onEdgeMouseLeave:Ea,onEdgeUpdateStart:Mi,onEdgeUpdateEnd:Al,edgeUpdaterRadius:Bi=10,onNodesChange:kl,onEdgesChange:Ui,noDragClassName:M="nodrag",noWheelClassName:D="nowheel",noPanClassName:U="nopan",fitView:W=!1,fitViewOptions:H,connectOnClick:se=!0,attributionPosition:de,proOptions:Ae,defaultEdgeOptions:Ge,elevateNodesOnSelect:et=!0,elevateEdgesOnSelect:Te=!1,disableKeyboardA11y:Be=!1,autoPanOnConnect:tt=!0,autoPanOnNodeDrag:be=!0,connectionRadius:Ke=20,isValidConnection:at,onError:Ze,style:er,id:Tt,...qt},Rr)=>{const hr=rv(i,y$),wt=rv(o,p$),St=Tt||"1";return v("div",{...qt,style:{...er,...pF},ref:Rr,className:It(["react-flow",r]),"data-testid":"rf__wrapper",id:Tt,children:L(X0,{children:[v(oF,{onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:E,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:S,onNodeDoubleClick:w,nodeTypes:hr,edgeTypes:wt,connectionLineType:B,connectionLineStyle:j,connectionLineComponent:Q,connectionLineContainerStyle:X,selectionKeyCode:Z,selectionOnDrag:J,selectionMode:ae,deleteKeyCode:Y,multiSelectionKeyCode:ye,panActivationKeyCode:ie,zoomActivationKeyCode:oe,onlyRenderVisibleElements:me,selectNodesOnDrag:te,defaultViewport:$e,translateExtent:fe,minZoom:ee,maxZoom:ce,preventScrolling:Ne,zoomOnScroll:Se,zoomOnPinch:He,zoomOnDoubleClick:Ee,panOnScroll:Me,panOnScrollSpeed:K,panOnScrollMode:re,panOnDrag:Ie,onPaneClick:Qe,onPaneMouseEnter:Xe,onPaneMouseMove:Dt,onPaneMouseLeave:Ot,onPaneScroll:_a,onPaneContextMenu:Li,onSelectionContextMenu:O,onSelectionStart:$,onSelectionEnd:V,onEdgeUpdate:Tl,onEdgeContextMenu:Pr,onEdgeDoubleClick:Pl,onEdgeMouseEnter:Vi,onEdgeMouseMove:Rl,onEdgeMouseLeave:Ea,onEdgeUpdateStart:Mi,onEdgeUpdateEnd:Al,edgeUpdaterRadius:Bi,defaultMarkerColor:pt,noDragClassName:M,noWheelClassName:D,noPanClassName:U,elevateEdgesOnSelect:Te,rfId:St,disableKeyboardA11y:Be,nodeOrigin:Ye,nodeExtent:ve}),v(a$,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:p,onConnectStart:h,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:b,nodesDraggable:he,nodesConnectable:we,nodesFocusable:ne,edgesFocusable:ke,edgesUpdatable:ze,elementsSelectable:lt,elevateNodesOnSelect:et,minZoom:ee,maxZoom:ce,nodeExtent:ve,onNodesChange:kl,onEdgesChange:Ui,snapToGrid:ge,snapGrid:Re,connectionMode:q,translateExtent:fe,connectOnClick:se,defaultEdgeOptions:Ge,fitView:W,fitViewOptions:H,onNodesDelete:P,onEdgesDelete:k,onNodeDragStart:C,onNodeDrag:N,onNodeDragStop:T,onSelectionDrag:x,onSelectionDragStart:I,onSelectionDragStop:F,noPanClassName:U,nodeOrigin:Ye,rfId:St,autoPanOnConnect:tt,autoPanOnNodeDrag:be,onError:Ze,connectionRadius:Ke,isValidConnection:at}),v(r$,{onSelectionChange:A}),pr,v(Tk,{proOptions:Ae,position:de}),v(u$,{rfId:St,disableKeyboardA11y:Be})]})})});K0.displayName="ReactFlow";function Z0(e){return t=>{const[n,a]=R.useState(t),r=R.useCallback(i=>a(o=>e(i,o)),[]);return[n,a,r]}}const hF=Z0(U0),mF=Z0($$);function vF(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function gF(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v("path",{d:"M0 0h32v4.2H0z"})})}function yF(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function bF(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function wF(){return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const qa=({children:e,className:t,...n})=>v("button",{type:"button",className:It(["react-flow__controls-button",t]),...n,children:e});qa.displayName="ControlButton";const SF=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,J0=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:a=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:o,onFitView:s,onInteractiveChange:l,className:c,children:u,position:d="bottom-left"})=>{const f=vt(),[p,h]=R.useState(!1),m=it(SF),{zoomIn:g,zoomOut:b,fitView:E}=el();if(R.useEffect(()=>{h(!0)},[]),!p)return null;const y=()=>{g(),i==null||i()},_=()=>{b(),o==null||o()},S=()=>{E(r),s==null||s()},w=()=>{f.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)};return L(l0,{className:It(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls",children:[t&&L(G,{children:[v(qa,{onClick:y,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:v(vF,{})}),v(qa,{onClick:_,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:v(gF,{})})]}),n&&v(qa,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:v(yF,{})}),a&&v(qa,{className:"react-flow__controls-interactive",onClick:w,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?v(wF,{}):v(bF,{})}),u]})};J0.displayName="Controls";var _F=R.memo(J0);const md=e=>{const{data:t}=OC(e.modifiedBy),n=Ya(lr(e.modifiedOn)),{name:a,description:r}=e;return R.useMemo(()=>L(G,{children:[a&&v(Et,{title:a,placement:"top",enterNextDelay:200,children:v("span",{children:v(Oe,{variant:"smallText1",className:"name",children:a})})}),r&&v(Et,{title:r,placement:"top",enterNextDelay:200,children:v("span",{children:v(Oe,{variant:"smallText1",className:"description",children:r})})}),t&&v(Ib,{userProfile:t}),v("div",{children:n})]}),[a,r,t,n])};try{md.displayName="ActivityNodeLabel",md.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const EF=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),vd=e=>{const{entityHeader:t}=e;if(t){const n=cb(t==null?void 0:t.type);if(n==Lc.FILE){const a=t.name.lastIndexOf(".");if(a>-1){const r=t.name.slice(a);if(EF.has(r.toLowerCase()))return v(De,{icon:"code"})}}else return v(Xh,{type:n,includeTooltip:!1})}return v(Xh,{type:Lc.FILE,includeTooltip:!1})};try{vd.displayName="ProvenanceEntityIcon",vd.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const gd=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return R.useMemo(()=>L(G,{children:[v("div",{children:v(vd,{entityHeader:e})}),L(G,{children:[v("div",{children:v(Et,{title:e.name,placement:"top",enterNextDelay:300,children:v("a",{href:`${sr.PORTAL}#!Synapse:${n}`,children:e.name})})}),qC(cb(e.type))&&L("div",{children:[L("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&v("div",{children:"(old version)"})]})]})]}),[e,n])};try{gd.displayName="EntityNodeLabel",gd.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}var eS={exports:{}};(function(e,t){(function(n,a){typeof Vs=="function"?e.exports=a():n.pluralize=a()})(Yr,function(){var n=[],a=[],r={},i={},o={};function s(m){return typeof m=="string"?new RegExp("^"+m+"$","i"):m}function l(m,g){return m===g?g:m===m.toLowerCase()?g.toLowerCase():m===m.toUpperCase()?g.toUpperCase():m[0]===m[0].toUpperCase()?g.charAt(0).toUpperCase()+g.substr(1).toLowerCase():g.toLowerCase()}function c(m,g){return m.replace(/\$(\d{1,2})/g,function(b,E){return g[E]||""})}function u(m,g){return m.replace(g[0],function(b,E){var y=c(g[1],arguments);return l(b===""?m[E-1]:b,y)})}function d(m,g,b){if(!m.length||r.hasOwnProperty(m))return g;for(var E=b.length;E--;){var y=b[E];if(y[0].test(g))return u(g,y)}return g}function f(m,g,b){return function(E){var y=E.toLowerCase();return g.hasOwnProperty(y)?l(E,y):m.hasOwnProperty(y)?l(E,m[y]):d(y,E,b)}}function p(m,g,b,E){return function(y){var _=y.toLowerCase();return g.hasOwnProperty(_)?!0:m.hasOwnProperty(_)?!1:d(_,_,b)===_}}function h(m,g,b){var E=g===1?h.singular(m):h.plural(m);return(b?g+" ":"")+E}return h.plural=f(o,i,n),h.isPlural=p(o,i,n),h.singular=f(i,o,a),h.isSingular=p(i,o,a),h.addPluralRule=function(m,g){n.push([s(m),g])},h.addSingularRule=function(m,g){a.push([s(m),g])},h.addUncountableRule=function(m){if(typeof m=="string"){r[m.toLowerCase()]=!0;return}h.addPluralRule(m,"$0"),h.addSingularRule(m,"$0")},h.addIrregularRule=function(m,g){g=g.toLowerCase(),m=m.toLowerCase(),o[m]=g,i[g]=m},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(m){return h.addIrregularRule(m[0],m[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(m){return h.addPluralRule(m[0],m[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(m){return h.addSingularRule(m[0],m[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eÃ©]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(eS);var CF=eS.exports;const xF=Nt(CF),yd=e=>{const{itemCount:t}=e;return R.useMemo(()=>v(G,{children:L("a",{children:["Show ",t," ",xF("item",t),"â€¦"]})}),[t])};try{yd.displayName="ExpandGraphNodeLabel",yd.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const NF=/^(.+?\.)?github\.com$/,IF=/^(.+?\.)?githubusercontent\.com$/,bd=e=>{const{url:t}=e;let n="link";const a=new URL(t),{hostname:r}=a;return(r.match(NF)||r.match(IF))&&(n="github"),v(De,{icon:n})};try{bd.displayName="ProvenanceExternalIcon",bd.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const wd=e=>R.useMemo(()=>L(G,{children:[v("div",{children:v(bd,{url:e.url})}),v(Et,{title:e.name,placement:"top",enterNextDelay:300,children:v("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{wd.displayName="ExternalGraphNodeLabel",wd.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var Gl,nv;function TF(){if(nv)return Gl;nv=1;var e=y1,t=4;function n(a){return e(a,t)}return Gl=n,Gl}var Yl,av;function eh(){if(av)return Yl;av=1;function e(t){return function(){return t}}return Yl=e,Yl}var PF=Rn;function RF(e,t){return function(n,a){if(n==null)return n;if(!PF(n))return e(n,a);for(var r=n.length,i=t?r:-1,o=Object(n);(t?i--:++i<r)&&a(o[i],i,o)!==!1;);return n}}var AF=RF,kF=qb,$F=AF,FF=$F(kF),tl=FF,DF=ha;function OF(e){return typeof e=="function"?e:DF}var tS=OF,qF=Rb,LF=tl,VF=tS,MF=ur;function BF(e,t){var n=MF(e)?qF:LF;return n(e,VF(t))}var th=BF,Xl,iv;function rS(){return iv||(iv=1,Xl=th),Xl}var Kl,ov;function UF(){if(ov)return Kl;ov=1;var e=tl;function t(n,a){var r=[];return e(n,function(i,o,s){a(i,o,s)&&r.push(i)}),r}return Kl=t,Kl}var Zl,sv;function nS(){if(sv)return Zl;sv=1;var e=T1,t=UF(),n=Jr,a=ur;function r(i,o){var s=a(i)?e:t;return s(i,n(o))}return Zl=r,Zl}var Jl,lv;function zF(){if(lv)return Jl;lv=1;var e=Object.prototype,t=e.hasOwnProperty;function n(a,r){return a!=null&&t.call(a,r)}return Jl=n,Jl}var eu,uv;function aS(){if(uv)return eu;uv=1;var e=zF(),t=P1;function n(a,r){return a!=null&&t(a,r,e)}return eu=n,eu}var HF=Lb,WF=Vb,jF=Sp,QF=ur,GF=Rn,YF=_p,XF=R1,KF=Ep,ZF="[object Map]",JF="[object Set]",eD=Object.prototype,tD=eD.hasOwnProperty;function rD(e){if(e==null)return!0;if(GF(e)&&(QF(e)||typeof e=="string"||typeof e.splice=="function"||YF(e)||KF(e)||jF(e)))return!e.length;var t=WF(e);if(t==ZF||t==JF)return!e.size;if(XF(e))return!HF(e).length;for(var n in e)if(tD.call(e,n))return!1;return!0}var iS=rD;const pj=Nt(iS);var tu,cv;function oS(){if(cv)return tu;cv=1;function e(t){return t===void 0}return tu=e,tu}var nD=tl,aD=Rn;function iD(e,t){var n=-1,a=aD(e)?Array(e.length):[];return nD(e,function(r,i,o){a[++n]=t(r,i,o)}),a}var sS=iD,ru,dv;function lS(){if(dv)return ru;dv=1;var e=en,t=Jr,n=sS,a=ur;function r(i,o){var s=a(i)?e:n;return s(i,t(o))}return ru=r,ru}var nu,fv;function oD(){if(fv)return nu;fv=1;function e(t,n,a,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(a=t[++i]);++i<o;)a=n(a,t[i],i,t);return a}return nu=e,nu}var au,pv;function sD(){if(pv)return au;pv=1;function e(t,n,a,r,i){return i(t,function(o,s,l){a=r?(r=!1,o):n(a,o,s,l)}),a}return au=e,au}var iu,hv;function uS(){if(hv)return iu;hv=1;var e=oD(),t=tl,n=Jr,a=sD(),r=ur;function i(o,s,l){var c=r(o)?e:a,u=arguments.length<3;return c(o,n(s),l,u,t)}return iu=i,iu}var ou,mv;function lD(){if(mv)return ou;mv=1;var e=A1,t=e("length");return ou=t,ou}var su,vv;function uD(){if(vv)return su;vv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",r=t+n+a,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+e+r+i+"]");function l(c){return s.test(c)}return su=l,su}var lu,gv;function cD(){if(gv)return lu;gv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",r=t+n+a,i="\\ufe0e\\ufe0f",o="["+e+"]",s="["+r+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",h=c+"?",m="["+i+"]?",g="(?:"+p+"(?:"+[u,d,f].join("|")+")"+m+h+")*",b=m+h+g,E="(?:"+[u+s+"?",s,d,f,o].join("|")+")",y=RegExp(l+"(?="+l+")|"+E+b,"g");function _(S){for(var w=y.lastIndex=0;y.test(S);)++w;return w}return lu=_,lu}var uu,yv;function dD(){if(yv)return uu;yv=1;var e=lD(),t=uD(),n=cD();function a(r){return t(r)?n(r):e(r)}return uu=a,uu}var cu,bv;function fD(){if(bv)return cu;bv=1;var e=Lb,t=Vb,n=Rn,a=W1,r=dD(),i="[object Map]",o="[object Set]";function s(l){if(l==null)return 0;if(n(l))return a(l)?r(l):l.length;var c=t(l);return c==i||c==o?l.size:e(l).length}return cu=s,cu}var du,wv;function pD(){if(wv)return du;wv=1;var e=Rb,t=b1,n=qb,a=Jr,r=k1,i=ur,o=_p,s=Cp,l=Ni,c=Ep;function u(d,f,p){var h=i(d),m=h||o(d)||c(d);if(f=a(f),p==null){var g=d&&d.constructor;m?p=h?new g:[]:l(d)?p=s(g)?t(r(d)):{}:p={}}return(m?e:n)(d,function(b,E,y){return f(p,b,E,y)}),p}return du=u,du}var Sv=$1,hD=Sp,mD=ur,_v=Sv?Sv.isConcatSpreadable:void 0;function vD(e){return mD(e)||hD(e)||!!(_v&&e&&e[_v])}var gD=vD,yD=F1,bD=gD;function cS(e,t,n,a,r){var i=-1,o=e.length;for(n||(n=bD),r||(r=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?cS(s,t-1,n,a,r):yD(r,s):a||(r[r.length]=s)}return r}var rl=cS;function wD(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var dS=wD,SD=dS,Ev=Math.max;function _D(e,t,n){return t=Ev(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,i=Ev(a.length-t,0),o=Array(i);++r<i;)o[r]=a[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=a[r];return s[t]=n(o),SD(e,this,s)}}var fS=_D,ED=eh(),Cv=D1,CD=ha,xD=Cv?function(e,t){return Cv(e,"toString",{configurable:!0,enumerable:!1,value:ED(t),writable:!0})}:CD,ND=xD,ID=800,TD=16,PD=Date.now;function RD(e){var t=0,n=0;return function(){var a=PD(),r=TD-(a-n);if(n=a,r>0){if(++t>=ID)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var AD=RD,kD=ND,$D=AD,FD=$D(kD),pS=FD,DD=ha,OD=fS,qD=pS;function LD(e,t){return qD(OD(e,t,DD),e+"")}var nn=LD,VD=Rn,MD=Mb;function BD(e){return MD(e)&&VD(e)}var nl=BD,UD=rl,zD=nn,HD=Ab,WD=nl,jD=zD(function(e){return HD(UD(e,1,WD,!0))}),hS=jD;const hj=Nt(hS);var fu,xv;function QD(){if(xv)return fu;xv=1;var e=en;function t(n,a){return e(a,function(r){return n[r]})}return fu=t,fu}var pu,Nv;function mS(){if(Nv)return pu;Nv=1;var e=QD(),t=xp;function n(a){return a==null?[]:e(a,t(a))}return pu=n,pu}var hu,Iv;function Ut(){if(Iv)return hu;Iv=1;var e;if(typeof Vs=="function")try{e={clone:TF(),constant:eh(),each:rS(),filter:nS(),has:aS(),isArray:ur,isEmpty:iS,isFunction:Cp,isUndefined:oS(),keys:xp,map:lS(),reduce:uS(),size:fD(),transform:pD(),union:hS,values:mS()}}catch{}return e||(e=window._),hu=e,hu}var mu,Tv;function rh(){if(Tv)return mu;Tv=1;var e=Ut();mu=r;var t="\0",n="\0",a="";function r(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(u){return this._label=u,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return e.keys(this._nodes)},r.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._in[d])})},r.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._out[d])})},r.prototype.setNodes=function(u,d){var f=arguments,p=this;return e.each(u,function(h){f.length>1?p.setNode(h,d):p.setNode(h)}),this},r.prototype.setNode=function(u,d){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},r.prototype.node=function(u){return this._nodes[u]},r.prototype.hasNode=function(u){return e.has(this._nodes,u)},r.prototype.removeNode=function(u){var d=this;if(e.has(this._nodes,u)){var f=function(p){d.removeEdge(d._edgeObjs[p])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(p){d.setParent(p)}),delete this._children[u]),e.each(e.keys(this._in[u]),f),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},r.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},r.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},r.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==n)return d}},r.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var d=this._children[u];if(d)return e.keys(d)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},r.prototype.predecessors=function(u){var d=this._preds[u];if(d)return e.keys(d)},r.prototype.successors=function(u){var d=this._sucs[u];if(d)return e.keys(d)},r.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return e.union(d,this.successors(u))},r.prototype.isLeaf=function(u){var d;return this.isDirected()?d=this.successors(u):d=this.neighbors(u),d.length===0},r.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(m,g){u(g)&&d.setNode(g,m)}),e.each(this._edgeObjs,function(m){d.hasNode(m.v)&&d.hasNode(m.w)&&d.setEdge(m,f.edge(m))});var p={};function h(m){var g=f.parent(m);return g===void 0||d.hasNode(g)?(p[m]=g,g):g in p?p[g]:h(g)}return this._isCompound&&e.each(d.nodes(),function(m){d.setParent(m,h(m))}),d},r.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return e.values(this._edgeObjs)},r.prototype.setPath=function(u,d){var f=this,p=arguments;return e.reduce(u,function(h,m){return p.length>1?f.setEdge(h,m,d):f.setEdge(h,m),m}),this},r.prototype.setEdge=function(){var u,d,f,p,h=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(u=m.v,d=m.w,f=m.name,arguments.length===2&&(p=arguments[1],h=!0)):(u=m,d=arguments[1],f=arguments[3],arguments.length>2&&(p=arguments[2],h=!0)),u=""+u,d=""+d,e.isUndefined(f)||(f=""+f);var g=s(this._isDirected,u,d,f);if(e.has(this._edgeLabels,g))return h&&(this._edgeLabels[g]=p),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[g]=h?p:this._defaultEdgeLabelFn(u,d,f);var b=l(this._isDirected,u,d,f);return u=b.v,d=b.w,Object.freeze(b),this._edgeObjs[g]=b,i(this._preds[d],u),i(this._sucs[u],d),this._in[d][g]=b,this._out[u][g]=b,this._edgeCount++,this},r.prototype.edge=function(u,d,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return this._edgeLabels[p]},r.prototype.hasEdge=function(u,d,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return e.has(this._edgeLabels,p)},r.prototype.removeEdge=function(u,d,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,d,f),h=this._edgeObjs[p];return h&&(u=h.v,d=h.w,delete this._edgeLabels[p],delete this._edgeObjs[p],o(this._preds[d],u),o(this._sucs[u],d),delete this._in[d][p],delete this._out[u][p],this._edgeCount--),this},r.prototype.inEdges=function(u,d){var f=this._in[u];if(f){var p=e.values(f);return d?e.filter(p,function(h){return h.v===d}):p}},r.prototype.outEdges=function(u,d){var f=this._out[u];if(f){var p=e.values(f);return d?e.filter(p,function(h){return h.w===d}):p}},r.prototype.nodeEdges=function(u,d){var f=this.inEdges(u,d);if(f)return f.concat(this.outEdges(u,d))};function i(u,d){u[d]?u[d]++:u[d]=1}function o(u,d){--u[d]||delete u[d]}function s(u,d,f,p){var h=""+d,m=""+f;if(!u&&h>m){var g=h;h=m,m=g}return h+a+m+a+(e.isUndefined(p)?t:p)}function l(u,d,f,p){var h=""+d,m=""+f;if(!u&&h>m){var g=h;h=m,m=g}var b={v:h,w:m};return p&&(b.name=p),b}function c(u,d){return s(u,d.v,d.w,d.name)}return mu}var vu,Pv;function GD(){return Pv||(Pv=1,vu="2.1.8"),vu}var gu,Rv;function YD(){return Rv||(Rv=1,gu={Graph:rh(),version:GD()}),gu}var yu,Av;function XD(){if(Av)return yu;Av=1;var e=Ut(),t=rh();yu={write:n,read:i};function n(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:a(o),edges:r(o)};return e.isUndefined(o.graph())||(s.value=e.clone(o.graph())),s}function a(o){return e.map(o.nodes(),function(s){var l=o.node(s),c=o.parent(s),u={v:s};return e.isUndefined(l)||(u.value=l),e.isUndefined(c)||(u.parent=c),u})}function r(o){return e.map(o.edges(),function(s){var l=o.edge(s),c={v:s.v,w:s.w};return e.isUndefined(s.name)||(c.name=s.name),e.isUndefined(l)||(c.value=l),c})}function i(o){var s=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(o.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return yu}var bu,kv;function KD(){if(kv)return bu;kv=1;var e=Ut();bu=t;function t(n){var a={},r=[],i;function o(s){e.has(a,s)||(a[s]=!0,i.push(s),e.each(n.successors(s),o),e.each(n.predecessors(s),o))}return e.each(n.nodes(),function(s){i=[],o(s),i.length&&r.push(i)}),r}return bu}var wu,$v;function vS(){if($v)return wu;$v=1;var e=Ut();wu=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var a=this._keyIndices[n];if(a!==void 0)return this._arr[a].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,a){var r=this._keyIndices;if(n=String(n),!e.has(r,n)){var i=this._arr,o=i.length;return r[n]=o,i.push({key:n,priority:a}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,a){var r=this._keyIndices[n];if(a>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[r].priority+" New: "+a);this._arr[r].priority=a,this._decrease(r)},t.prototype._heapify=function(n){var a=this._arr,r=2*n,i=r+1,o=n;r<a.length&&(o=a[r].priority<a[o].priority?r:o,i<a.length&&(o=a[i].priority<a[o].priority?i:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var a=this._arr,r=a[n].priority,i;n!==0&&(i=n>>1,!(a[i].priority<r));)this._swap(n,i),n=i},t.prototype._swap=function(n,a){var r=this._arr,i=this._keyIndices,o=r[n],s=r[a];r[n]=s,r[a]=o,i[s.key]=n,i[o.key]=a},wu}var Su,Fv;function gS(){if(Fv)return Su;Fv=1;var e=Ut(),t=vS();Su=a;var n=e.constant(1);function a(i,o,s,l){return r(i,String(o),s||n,l||function(c){return i.outEdges(c)})}function r(i,o,s,l){var c={},u=new t,d,f,p=function(h){var m=h.v!==d?h.v:h.w,g=c[m],b=s(h),E=f.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+b);E<g.distance&&(g.distance=E,g.predecessor=d,u.decrease(m,E))};for(i.nodes().forEach(function(h){var m=h===o?0:Number.POSITIVE_INFINITY;c[h]={distance:m},u.add(h,m)});u.size()>0&&(d=u.removeMin(),f=c[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(p);return c}return Su}var _u,Dv;function ZD(){if(Dv)return _u;Dv=1;var e=gS(),t=Ut();_u=n;function n(a,r,i){return t.transform(a.nodes(),function(o,s){o[s]=e(a,s,r,i)},{})}return _u}var Eu,Ov;function yS(){if(Ov)return Eu;Ov=1;var e=Ut();Eu=t;function t(n){var a=0,r=[],i={},o=[];function s(l){var c=i[l]={onStack:!0,lowlink:a,index:a++};if(r.push(l),n.successors(l).forEach(function(f){e.has(i,f)?i[f].onStack&&(c.lowlink=Math.min(c.lowlink,i[f].index)):(s(f),c.lowlink=Math.min(c.lowlink,i[f].lowlink))}),c.lowlink===c.index){var u=[],d;do d=r.pop(),i[d].onStack=!1,u.push(d);while(l!==d);o.push(u)}}return n.nodes().forEach(function(l){e.has(i,l)||s(l)}),o}return Eu}var Cu,qv;function JD(){if(qv)return Cu;qv=1;var e=Ut(),t=yS();Cu=n;function n(a){return e.filter(t(a),function(r){return r.length>1||r.length===1&&a.hasEdge(r[0],r[0])})}return Cu}var xu,Lv;function eO(){if(Lv)return xu;Lv=1;var e=Ut();xu=n;var t=e.constant(1);function n(r,i,o){return a(r,i||t,o||function(s){return r.outEdges(s)})}function a(r,i,o){var s={},l=r.nodes();return l.forEach(function(c){s[c]={},s[c][c]={distance:0},l.forEach(function(u){c!==u&&(s[c][u]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(u){var d=u.v===c?u.w:u.v,f=i(u);s[c][d]={distance:f,predecessor:c}})}),l.forEach(function(c){var u=s[c];l.forEach(function(d){var f=s[d];l.forEach(function(p){var h=f[c],m=u[p],g=f[p],b=h.distance+m.distance;b<g.distance&&(g.distance=b,g.predecessor=m.predecessor)})})}),s}return xu}var Nu,Vv;function bS(){if(Vv)return Nu;Vv=1;var e=Ut();Nu=t,t.CycleException=n;function t(a){var r={},i={},o=[];function s(l){if(e.has(i,l))throw new n;e.has(r,l)||(i[l]=!0,r[l]=!0,e.each(a.predecessors(l),s),delete i[l],o.push(l))}if(e.each(a.sinks(),s),e.size(r)!==a.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Nu}var Iu,Mv;function tO(){if(Mv)return Iu;Mv=1;var e=bS();Iu=t;function t(n){try{e(n)}catch(a){if(a instanceof e.CycleException)return!1;throw a}return!0}return Iu}var Tu,Bv;function wS(){if(Bv)return Tu;Bv=1;var e=Ut();Tu=t;function t(a,r,i){e.isArray(r)||(r=[r]);var o=(a.isDirected()?a.successors:a.neighbors).bind(a),s=[],l={};return e.each(r,function(c){if(!a.hasNode(c))throw new Error("Graph does not have node: "+c);n(a,c,i==="post",l,o,s)}),s}function n(a,r,i,o,s,l){e.has(o,r)||(o[r]=!0,i||l.push(r),e.each(s(r),function(c){n(a,c,i,o,s,l)}),i&&l.push(r))}return Tu}var Pu,Uv;function rO(){if(Uv)return Pu;Uv=1;var e=wS();Pu=t;function t(n,a){return e(n,a,"post")}return Pu}var Ru,zv;function nO(){if(zv)return Ru;zv=1;var e=wS();Ru=t;function t(n,a){return e(n,a,"pre")}return Ru}var Au,Hv;function aO(){if(Hv)return Au;Hv=1;var e=Ut(),t=rh(),n=vS();Au=a;function a(r,i){var o=new t,s={},l=new n,c;function u(f){var p=f.v===c?f.w:f.v,h=l.priority(p);if(h!==void 0){var m=i(f);m<h&&(s[p]=c,l.decrease(p,m))}}if(r.nodeCount()===0)return o;e.each(r.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),o.setNode(f)}),l.decrease(r.nodes()[0],0);for(var d=!1;l.size()>0;){if(c=l.removeMin(),e.has(s,c))o.setEdge(c,s[c]);else{if(d)throw new Error("Input graph is not connected: "+r);d=!0}r.nodeEdges(c).forEach(u)}return o}return Au}var ku,Wv;function iO(){return Wv||(Wv=1,ku={components:KD(),dijkstra:gS(),dijkstraAll:ZD(),findCycles:JD(),floydWarshall:eO(),isAcyclic:tO(),postorder:rO(),preorder:nO(),prim:aO(),tarjan:yS(),topsort:bS()}),ku}var $u,jv;function oO(){if(jv)return $u;jv=1;var e=YD();return $u={Graph:e.Graph,json:XD(),alg:iO(),version:e.version},$u}var Yo;if(typeof Vs=="function")try{Yo=oO()}catch{}Yo||(Yo=window.graphlib);var Jt=Yo,sO=Np,lO=Rn,uO=O1,cO=Ni;function dO(e,t,n){if(!cO(n))return!1;var a=typeof t;return(a=="number"?lO(n)&&uO(t,n.length):a=="string"&&t in n)?sO(n[t],e):!1}var al=dO,fO=nn,pO=Np,hO=al,mO=Ms,SS=Object.prototype,vO=SS.hasOwnProperty,gO=fO(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&hO(t[0],t[1],r)&&(a=1);++n<a;)for(var i=t[n],o=mO(i),s=-1,l=o.length;++s<l;){var c=o[s],u=e[c];(u===void 0||pO(u,SS[c])&&!vO.call(e,c))&&(e[c]=i[c])}return e}),_S=gO,Fu,Qv;function yO(){if(Qv)return Fu;Qv=1;var e=Jr,t=Rn,n=xp;function a(r){return function(i,o,s){var l=Object(i);if(!t(i)){var c=e(o);i=n(i),o=function(d){return c(l[d],d,l)}}var u=r(i,o,s);return u>-1?l[c?i[u]:u]:void 0}}return Fu=a,Fu}var Du,Gv;function ES(){if(Gv)return Du;Gv=1;var e=j1,t=1/0,n=17976931348623157e292;function a(r){if(!r)return r===0?r:0;if(r=e(r),r===t||r===-t){var i=r<0?-1:1;return i*n}return r===r?r:0}return Du=a,Du}var Ou,Yv;function bO(){if(Yv)return Ou;Yv=1;var e=ES();function t(n){var a=e(n),r=a%1;return a===a?r?a-r:a:0}return Ou=t,Ou}var qu,Xv;function wO(){if(Xv)return qu;Xv=1;var e=w1,t=Jr,n=bO(),a=Math.max;function r(i,o,s){var l=i==null?0:i.length;if(!l)return-1;var c=s==null?0:n(s);return c<0&&(c=a(l+c,0)),e(i,t(o),c)}return qu=r,qu}var Lu,Kv;function SO(){if(Kv)return Lu;Kv=1;var e=yO(),t=wO(),n=e(t);return Lu=n,Lu}var _O=rl;function EO(e){var t=e==null?0:e.length;return t?_O(e,1):[]}var nh=EO,Vu,Zv;function CO(){if(Zv)return Vu;Zv=1;var e=Bb,t=tS,n=Ms;function a(r,i){return r==null?r:e(r,t(i),n)}return Vu=a,Vu}function xO(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var CS=xO,Mu,Jv;function ah(){if(Jv)return Mu;Jv=1;var e=Ub;function t(n,a,r){for(var i=-1,o=n.length;++i<o;){var s=n[i],l=a(s);if(l!=null&&(c===void 0?l===l&&!e(l):r(l,c)))var c=l,u=s}return u}return Mu=t,Mu}var Bu,eg;function NO(){if(eg)return Bu;eg=1;function e(t,n){return t>n}return Bu=e,Bu}var Uu,tg;function IO(){if(tg)return Uu;tg=1;var e=ah(),t=NO(),n=ha;function a(r){return r&&r.length?e(r,n,t):void 0}return Uu=a,Uu}var TO=q1,PO=Np;function RO(e,t,n){(n!==void 0&&!PO(e[t],n)||n===void 0&&!(t in e))&&TO(e,t,n)}var xS=RO;function AO(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var NS=AO,kO=S1,$O=Ms;function FO(e){return kO(e,$O(e))}var DO=FO,rg=xS,OO=_1,qO=E1,LO=kb,VO=C1,ng=Sp,ag=ur,MO=nl,BO=_p,UO=Cp,zO=Ni,HO=Ip,WO=Ep,ig=NS,jO=DO;function QO(e,t,n,a,r,i,o){var s=ig(e,n),l=ig(t,n),c=o.get(l);if(c){rg(e,n,c);return}var u=i?i(s,l,n+"",e,t,o):void 0,d=u===void 0;if(d){var f=ag(l),p=!f&&BO(l),h=!f&&!p&&WO(l);u=l,f||p||h?ag(s)?u=s:MO(s)?u=LO(s):p?(d=!1,u=OO(l,!0)):h?(d=!1,u=qO(l,!0)):u=[]:HO(l)||ng(l)?(u=s,ng(s)?u=jO(s):(!zO(s)||UO(s))&&(u=VO(l))):d=!1}d&&(o.set(l,u),r(u,l,a,i,o),o.delete(l)),rg(e,n,u)}var GO=QO,YO=L1,XO=xS,KO=Bb,ZO=GO,JO=Ni,eq=Ms,tq=NS;function IS(e,t,n,a,r){e!==t&&KO(t,function(i,o){if(r||(r=new YO),JO(i))ZO(e,t,o,n,IS,a,r);else{var s=a?a(tq(e,o),i,o+"",e,t,r):void 0;s===void 0&&(s=i),XO(e,o,s)}},eq)}var ih=IS,rq=nn,nq=al;function aq(e){return rq(function(t,n){var a=-1,r=n.length,i=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(r--,i):void 0,o&&nq(n[0],n[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++a<r;){var s=n[a];s&&e(t,s,a,i)}return t})}var TS=aq,zu,og;function iq(){if(og)return zu;og=1;var e=ih,t=TS,n=t(function(a,r,i){e(a,r,i)});return zu=n,zu}var Hu,sg;function PS(){if(sg)return Hu;sg=1;function e(t,n){return t<n}return Hu=e,Hu}var Wu,lg;function oq(){if(lg)return Wu;lg=1;var e=ah(),t=PS(),n=ha;function a(r){return r&&r.length?e(r,n,t):void 0}return Wu=a,Wu}var ju,ug;function sq(){if(ug)return ju;ug=1;var e=ah(),t=Jr,n=PS();function a(r,i){return r&&r.length?e(r,t(i),n):void 0}return ju=a,ju}var lq=x1,uq=V1;function cq(e,t){return lq(e,t,function(n,a){return uq(e,a)})}var dq=cq,fq=nh,pq=fS,hq=pS;function mq(e){return hq(pq(e,void 0,fq),e+"")}var vq=mq,gq=dq,yq=vq,bq=yq(function(e,t){return e==null?{}:gq(e,t)}),RS=bq;const mj=Nt(RS);var Qu,cg;function wq(){if(cg)return Qu;cg=1;var e=Math.ceil,t=Math.max;function n(a,r,i,o){for(var s=-1,l=t(e((r-a)/(i||1)),0),c=Array(l);l--;)c[o?l:++s]=a,a+=i;return c}return Qu=n,Qu}var Gu,dg;function Sq(){if(dg)return Gu;dg=1;var e=wq(),t=al,n=ES();function a(r){return function(i,o,s){return s&&typeof s!="number"&&t(i,o,s)&&(o=s=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),s=s===void 0?i<o?1:-1:n(s),e(i,o,s,r)}}return Gu=a,Gu}var Yu,fg;function _q(){if(fg)return Yu;fg=1;var e=Sq(),t=e();return Yu=t,Yu}function Eq(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Cq=Eq,pg=Ub;function xq(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e===e,i=pg(e),o=t!==void 0,s=t===null,l=t===t,c=pg(t);if(!s&&!c&&!i&&e>t||i&&o&&l&&!s&&!c||a&&o&&l||!n&&l||!r)return 1;if(!a&&!i&&!c&&e<t||c&&n&&r&&!a&&!i||s&&n&&r||!o&&r||!l)return-1}return 0}var Nq=xq,Iq=Nq;function Tq(e,t,n){for(var a=-1,r=e.criteria,i=t.criteria,o=r.length,s=n.length;++a<o;){var l=Iq(r[a],i[a]);if(l){if(a>=s)return l;var c=n[a];return l*(c=="desc"?-1:1)}}return e.index-t.index}var Pq=Tq,Xu=en,Rq=M1,Aq=Jr,kq=sS,$q=Cq,Fq=Bs,Dq=Pq,Oq=ha,qq=ur;function Lq(e,t,n){t.length?t=Xu(t,function(i){return qq(i)?function(o){return Rq(o,i.length===1?i[0]:i)}:i}):t=[Oq];var a=-1;t=Xu(t,Fq(Aq));var r=kq(e,function(i,o,s){var l=Xu(t,function(c){return c(i)});return{criteria:l,index:++a,value:i}});return $q(r,function(i,o){return Dq(i,o,n)})}var Vq=Lq,Mq=rl,Bq=Vq,Uq=nn,hg=al,zq=Uq(function(e,t){if(e==null)return[];var n=t.length;return n>1&&hg(e,t[0],t[1])?t=[]:n>2&&hg(t[0],t[1],t[2])&&(t=[t[0]]),Bq(e,Mq(t,1),[])}),oh=zq,Ku,mg;function Hq(){if(mg)return Ku;mg=1;var e=B1,t=0;function n(a){var r=++t;return e(a)+r}return Ku=n,Ku}var Zu,vg;function Wq(){if(vg)return Zu;vg=1;function e(t,n,a){for(var r=-1,i=t.length,o=n.length,s={};++r<i;){var l=r<o?n[r]:void 0;a(s,t[r],l)}return s}return Zu=e,Zu}var Ju,gg;function jq(){if(gg)return Ju;gg=1;var e=N1,t=Wq();function n(a,r){return t(a||[],r||[],e)}return Ju=n,Ju}var Xo;if(typeof Vs=="function")try{Xo={cloneDeep:$b,constant:eh(),defaults:_S,each:rS(),filter:nS(),find:SO(),flatten:nh,forEach:th,forIn:CO(),has:aS(),isUndefined:oS(),last:CS,map:lS(),mapValues:U1,max:IO(),merge:iq(),min:oq(),minBy:sq(),now:Q1(),pick:RS,range:_q(),reduce:uS(),sortBy:oh,uniqueId:Hq(),values:mS(),zipObject:jq()}}catch{}Xo||(Xo=window._);var Je=Xo,Qq=il;function il(){var e={};e._next=e._prev=e,this._sentinel=e}il.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return AS(t),t};il.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&AS(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};il.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Gq)),n=n._prev;return"["+e.join(", ")+"]"};function AS(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Gq(e,t){if(e!=="_next"&&e!=="_prev")return t}var Sr=Je,Yq=Jt.Graph,Xq=Qq,Kq=Jq,Zq=Sr.constant(1);function Jq(e,t){if(e.nodeCount()<=1)return[];var n=t2(e,t||Zq),a=e2(n.graph,n.buckets,n.zeroIdx);return Sr.flatten(Sr.map(a,function(r){return e.outEdges(r.v,r.w)}),!0)}function e2(e,t,n){for(var a=[],r=t[t.length-1],i=t[0],o;e.nodeCount();){for(;o=i.dequeue();)ec(e,t,n,o);for(;o=r.dequeue();)ec(e,t,n,o);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(o=t[s].dequeue(),o){a=a.concat(ec(e,t,n,o,!0));break}}}return a}function ec(e,t,n,a,r){var i=r?[]:void 0;return Sr.forEach(e.inEdges(a.v),function(o){var s=e.edge(o),l=e.node(o.v);r&&i.push({v:o.v,w:o.w}),l.out-=s,Sd(t,n,l)}),Sr.forEach(e.outEdges(a.v),function(o){var s=e.edge(o),l=o.w,c=e.node(l);c.in-=s,Sd(t,n,c)}),e.removeNode(a.v),i}function t2(e,t){var n=new Yq,a=0,r=0;Sr.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),Sr.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,c=t(s),u=l+c;n.setEdge(s.v,s.w,u),r=Math.max(r,n.node(s.v).out+=c),a=Math.max(a,n.node(s.w).in+=c)});var i=Sr.range(r+a+3).map(function(){return new Xq}),o=a+1;return Sr.forEach(n.nodes(),function(s){Sd(i,o,n.node(s))}),{graph:n,buckets:i,zeroIdx:o}}function Sd(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var hn=Je,r2=Kq,n2={run:a2,undo:o2};function a2(e){var t=e.graph().acyclicer==="greedy"?r2(e,n(e)):i2(e);hn.forEach(t,function(a){var r=e.edge(a);e.removeEdge(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,hn.uniqueId("rev"))});function n(a){return function(r){return a.edge(r).weight}}}function i2(e){var t=[],n={},a={};function r(i){hn.has(a,i)||(a[i]=!0,n[i]=!0,hn.forEach(e.outEdges(i),function(o){hn.has(n,o.w)?t.push(o):r(o.w)}),delete n[i])}return hn.forEach(e.nodes(),r),t}function o2(e){hn.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})}var qe=Je,kS=Jt.Graph,Ct={addDummyNode:$S,simplify:s2,asNonCompoundGraph:l2,successorWeights:u2,predecessorWeights:c2,intersectRect:d2,buildLayerMatrix:f2,normalizeRanks:p2,removeEmptyRanks:h2,addBorderNode:m2,maxRank:FS,partition:v2,time:g2,notime:y2};function $S(e,t,n,a){var r;do r=qe.uniqueId(a);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function s2(e){var t=new kS().setGraph(e.graph());return qe.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),qe.forEach(e.edges(),function(n){var a=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t}function l2(e){var t=new kS({multigraph:e.isMultigraph()}).setGraph(e.graph());return qe.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),qe.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function u2(e){var t=qe.map(e.nodes(),function(n){var a={};return qe.forEach(e.outEdges(n),function(r){a[r.w]=(a[r.w]||0)+e.edge(r).weight}),a});return qe.zipObject(e.nodes(),t)}function c2(e){var t=qe.map(e.nodes(),function(n){var a={};return qe.forEach(e.inEdges(n),function(r){a[r.v]=(a[r.v]||0)+e.edge(r).weight}),a});return qe.zipObject(e.nodes(),t)}function d2(e,t){var n=e.x,a=e.y,r=t.x-n,i=t.y-a,o=e.width/2,s=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(i)*o>Math.abs(r)*s?(i<0&&(s=-s),l=s*r/i,c=s):(r<0&&(o=-o),l=o,c=o*i/r),{x:n+l,y:a+c}}function f2(e){var t=qe.map(qe.range(FS(e)+1),function(){return[]});return qe.forEach(e.nodes(),function(n){var a=e.node(n),r=a.rank;qe.isUndefined(r)||(t[r][a.order]=n)}),t}function p2(e){var t=qe.min(qe.map(e.nodes(),function(n){return e.node(n).rank}));qe.forEach(e.nodes(),function(n){var a=e.node(n);qe.has(a,"rank")&&(a.rank-=t)})}function h2(e){var t=qe.min(qe.map(e.nodes(),function(i){return e.node(i).rank})),n=[];qe.forEach(e.nodes(),function(i){var o=e.node(i).rank-t;n[o]||(n[o]=[]),n[o].push(i)});var a=0,r=e.graph().nodeRankFactor;qe.forEach(n,function(i,o){qe.isUndefined(i)&&o%r!==0?--a:a&&qe.forEach(i,function(s){e.node(s).rank+=a})})}function m2(e,t,n,a){var r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=a),$S(e,"border",r,t)}function FS(e){return qe.max(qe.map(e.nodes(),function(t){var n=e.node(t).rank;if(!qe.isUndefined(n))return n}))}function v2(e,t){var n={lhs:[],rhs:[]};return qe.forEach(e,function(a){t(a)?n.lhs.push(a):n.rhs.push(a)}),n}function g2(e,t){var n=qe.now();try{return t()}finally{console.log(e+" time: "+(qe.now()-n)+"ms")}}function y2(e,t){return t()}var DS=Je,b2=Ct,w2={run:S2,undo:E2};function S2(e){e.graph().dummyChains=[],DS.forEach(e.edges(),function(t){_2(e,t)})}function _2(e,t){var n=t.v,a=e.node(n).rank,r=t.w,i=e.node(r).rank,o=t.name,s=e.edge(t),l=s.labelRank;if(i!==a+1){e.removeEdge(t);var c,u,d;for(d=0,++a;a<i;++d,++a)s.points=[],u={width:0,height:0,edgeLabel:s,edgeObj:t,rank:a},c=b2.addDummyNode(e,"edge",u,"_d"),a===l&&(u.width=s.width,u.height=s.height,u.dummy="edge-label",u.labelpos=s.labelpos),e.setEdge(n,c,{weight:s.weight},o),d===0&&e.graph().dummyChains.push(c),n=c;e.setEdge(n,r,{weight:s.weight},o)}}function E2(e){DS.forEach(e.graph().dummyChains,function(t){var n=e.node(t),a=n.edgeLabel,r;for(e.setEdge(n.edgeObj,a);n.dummy;)r=e.successors(t)[0],e.removeNode(t),a.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height),t=r,n=e.node(t)})}var io=Je,ol={longestPath:C2,slack:x2};function C2(e){var t={};function n(a){var r=e.node(a);if(io.has(t,a))return r.rank;t[a]=!0;var i=io.min(io.map(e.outEdges(a),function(o){return n(o.w)-e.edge(o).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),r.rank=i}io.forEach(e.sources(),n)}function x2(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Ko=Je,N2=Jt.Graph,Zo=ol.slack,OS=I2;function I2(e){var t=new N2({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});for(var r,i;T2(t,e)<a;)r=P2(t,e),i=t.hasNode(r.v)?Zo(e,r):-Zo(e,r),R2(t,e,i);return t}function T2(e,t){function n(a){Ko.forEach(t.nodeEdges(a),function(r){var i=r.v,o=a===i?r.w:i;!e.hasNode(o)&&!Zo(t,r)&&(e.setNode(o,{}),e.setEdge(a,o,{}),n(o))})}return Ko.forEach(e.nodes(),n),e.nodeCount()}function P2(e,t){return Ko.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Zo(t,n)})}function R2(e,t,n){Ko.forEach(e.nodes(),function(a){t.node(a).rank+=n})}var Nr=Je,A2=OS,k2=ol.slack,$2=ol.longestPath,F2=Jt.alg.preorder,D2=Jt.alg.postorder,O2=Ct.simplify,q2=$n;$n.initLowLimValues=lh;$n.initCutValues=sh;$n.calcCutValue=qS;$n.leaveEdge=VS;$n.enterEdge=MS;$n.exchangeEdges=BS;function $n(e){e=O2(e),$2(e);var t=A2(e);lh(t),sh(t,e);for(var n,a;n=VS(t);)a=MS(t,e,n),BS(t,e,n,a)}function sh(e,t){var n=D2(e,e.nodes());n=n.slice(0,n.length-1),Nr.forEach(n,function(a){L2(e,t,a)})}function L2(e,t,n){var a=e.node(n),r=a.parent;e.edge(n,r).cutvalue=qS(e,t,n)}function qS(e,t,n){var a=e.node(n),r=a.parent,i=!0,o=t.edge(n,r),s=0;return o||(i=!1,o=t.edge(r,n)),s=o.weight,Nr.forEach(t.nodeEdges(n),function(l){var c=l.v===n,u=c?l.w:l.v;if(u!==r){var d=c===i,f=t.edge(l).weight;if(s+=d?f:-f,M2(e,n,u)){var p=e.edge(n,u).cutvalue;s+=d?-p:p}}}),s}function lh(e,t){arguments.length<2&&(t=e.nodes()[0]),LS(e,{},1,t)}function LS(e,t,n,a,r){var i=n,o=e.node(a);return t[a]=!0,Nr.forEach(e.neighbors(a),function(s){Nr.has(t,s)||(n=LS(e,t,n,s,a))}),o.low=i,o.lim=n++,r?o.parent=r:delete o.parent,n}function VS(e){return Nr.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function MS(e,t,n){var a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);var i=e.node(a),o=e.node(r),s=i,l=!1;i.lim>o.lim&&(s=o,l=!0);var c=Nr.filter(t.edges(),function(u){return l===yg(e,e.node(u.v),s)&&l!==yg(e,e.node(u.w),s)});return Nr.minBy(c,function(u){return k2(t,u)})}function BS(e,t,n,a){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(a.v,a.w,{}),lh(e),sh(e,t),V2(e,t)}function V2(e,t){var n=Nr.find(e.nodes(),function(r){return!t.node(r).parent}),a=F2(e,n);a=a.slice(1),Nr.forEach(a,function(r){var i=e.node(r).parent,o=t.edge(r,i),s=!1;o||(o=t.edge(i,r),s=!0),t.node(r).rank=t.node(i).rank+(s?o.minlen:-o.minlen)})}function M2(e,t,n){return e.hasEdge(t,n)}function yg(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var B2=ol,US=B2.longestPath,U2=OS,z2=q2,H2=W2;function W2(e){switch(e.graph().ranker){case"network-simplex":bg(e);break;case"tight-tree":Q2(e);break;case"longest-path":j2(e);break;default:bg(e)}}var j2=US;function Q2(e){US(e),U2(e)}function bg(e){z2(e)}var _d=Je,G2=Y2;function Y2(e){var t=K2(e);_d.forEach(e.graph().dummyChains,function(n){for(var a=e.node(n),r=a.edgeObj,i=X2(e,t,r.v,r.w),o=i.path,s=i.lca,l=0,c=o[l],u=!0;n!==r.w;){if(a=e.node(n),u){for(;(c=o[l])!==s&&e.node(c).maxRank<a.rank;)l++;c===s&&(u=!1)}if(!u){for(;l<o.length-1&&e.node(c=o[l+1]).minRank<=a.rank;)l++;c=o[l]}e.setParent(n,c),n=e.successors(n)[0]}})}function X2(e,t,n,a){var r=[],i=[],o=Math.min(t[n].low,t[a].low),s=Math.max(t[n].lim,t[a].lim),l,c;l=n;do l=e.parent(l),r.push(l);while(l&&(t[l].low>o||s>t[l].lim));for(c=l,l=a;(l=e.parent(l))!==c;)i.push(l);return{path:r.concat(i.reverse()),lca:c}}function K2(e){var t={},n=0;function a(r){var i=n;_d.forEach(e.children(r),a),t[r]={low:i,lim:n++}}return _d.forEach(e.children(),a),t}var _r=Je,Ed=Ct,Z2={run:J2,cleanup:rL};function J2(e){var t=Ed.addDummyNode(e,"root",{},"_root"),n=eL(e),a=_r.max(_r.values(n))-1,r=2*a+1;e.graph().nestingRoot=t,_r.forEach(e.edges(),function(o){e.edge(o).minlen*=r});var i=tL(e)+1;_r.forEach(e.children(),function(o){zS(e,t,r,i,a,n,o)}),e.graph().nodeRankFactor=r}function zS(e,t,n,a,r,i,o){var s=e.children(o);if(!s.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}var l=Ed.addBorderNode(e,"_bt"),c=Ed.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(l,o),u.borderTop=l,e.setParent(c,o),u.borderBottom=c,_r.forEach(s,function(d){zS(e,t,n,a,r,i,d);var f=e.node(d),p=f.borderTop?f.borderTop:d,h=f.borderBottom?f.borderBottom:d,m=f.borderTop?a:2*a,g=p!==h?1:r-i[o]+1;e.setEdge(l,p,{weight:m,minlen:g,nestingEdge:!0}),e.setEdge(h,c,{weight:m,minlen:g,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,l,{weight:0,minlen:r+i[o]})}function eL(e){var t={};function n(a,r){var i=e.children(a);i&&i.length&&_r.forEach(i,function(o){n(o,r+1)}),t[a]=r}return _r.forEach(e.children(),function(a){n(a,1)}),t}function tL(e){return _r.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function rL(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,_r.forEach(e.edges(),function(n){var a=e.edge(n);a.nestingEdge&&e.removeEdge(n)})}var tc=Je,nL=Ct,aL=iL;function iL(e){function t(n){var a=e.children(n),r=e.node(n);if(a.length&&tc.forEach(a,t),tc.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var i=r.minRank,o=r.maxRank+1;i<o;++i)wg(e,"borderLeft","_bl",n,r,i),wg(e,"borderRight","_br",n,r,i)}}tc.forEach(e.children(),t)}function wg(e,t,n,a,r,i){var o={width:0,height:0,rank:i,borderType:t},s=r[t][i-1],l=nL.addDummyNode(e,"border",o,n);r[t][i]=l,e.setParent(l,a),s&&e.setEdge(s,l,{weight:1})}var ar=Je,oL={adjust:sL,undo:lL};function sL(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&HS(e)}function lL(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&uL(e),(t==="lr"||t==="rl")&&(cL(e),HS(e))}function HS(e){ar.forEach(e.nodes(),function(t){Sg(e.node(t))}),ar.forEach(e.edges(),function(t){Sg(e.edge(t))})}function Sg(e){var t=e.width;e.width=e.height,e.height=t}function uL(e){ar.forEach(e.nodes(),function(t){rc(e.node(t))}),ar.forEach(e.edges(),function(t){var n=e.edge(t);ar.forEach(n.points,rc),ar.has(n,"y")&&rc(n)})}function rc(e){e.y=-e.y}function cL(e){ar.forEach(e.nodes(),function(t){nc(e.node(t))}),ar.forEach(e.edges(),function(t){var n=e.edge(t);ar.forEach(n.points,nc),ar.has(n,"x")&&nc(n)})}function nc(e){var t=e.x;e.x=e.y,e.y=t}var gr=Je,dL=fL;function fL(e){var t={},n=gr.filter(e.nodes(),function(s){return!e.children(s).length}),a=gr.max(gr.map(n,function(s){return e.node(s).rank})),r=gr.map(gr.range(a+1),function(){return[]});function i(s){if(!gr.has(t,s)){t[s]=!0;var l=e.node(s);r[l.rank].push(s),gr.forEach(e.successors(s),i)}}var o=gr.sortBy(n,function(s){return e.node(s).rank});return gr.forEach(o,i),r}var $r=Je,pL=hL;function hL(e,t){for(var n=0,a=1;a<t.length;++a)n+=mL(e,t[a-1],t[a]);return n}function mL(e,t,n){for(var a=$r.zipObject(n,$r.map(n,function(c,u){return u})),r=$r.flatten($r.map(t,function(c){return $r.sortBy($r.map(e.outEdges(c),function(u){return{pos:a[u.w],weight:e.edge(u).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var o=2*i-1;i-=1;var s=$r.map(new Array(o),function(){return 0}),l=0;return $r.forEach(r.forEach(function(c){var u=c.pos+i;s[u]+=c.weight;for(var d=0;u>0;)u%2&&(d+=s[u+1]),u=u-1>>1,s[u]+=c.weight;l+=c.weight*d})),l}var _g=Je,vL=gL;function gL(e,t){return _g.map(t,function(n){var a=e.inEdges(n);if(a.length){var r=_g.reduce(a,function(i,o){var s=e.edge(o),l=e.node(o.v);return{sum:i.sum+s.weight*l.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}var Rt=Je,yL=bL;function bL(e,t){var n={};Rt.forEach(e,function(r,i){var o=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};Rt.isUndefined(r.barycenter)||(o.barycenter=r.barycenter,o.weight=r.weight)}),Rt.forEach(t.edges(),function(r){var i=n[r.v],o=n[r.w];!Rt.isUndefined(i)&&!Rt.isUndefined(o)&&(o.indegree++,i.out.push(n[r.w]))});var a=Rt.filter(n,function(r){return!r.indegree});return wL(a)}function wL(e){var t=[];function n(i){return function(o){o.merged||(Rt.isUndefined(o.barycenter)||Rt.isUndefined(i.barycenter)||o.barycenter>=i.barycenter)&&SL(i,o)}}function a(i){return function(o){o.in.push(i),--o.indegree===0&&e.push(o)}}for(;e.length;){var r=e.pop();t.push(r),Rt.forEach(r.in.reverse(),n(r)),Rt.forEach(r.out,a(r))}return Rt.map(Rt.filter(t,function(i){return!i.merged}),function(i){return Rt.pick(i,["vs","i","barycenter","weight"])})}function SL(e,t){var n=0,a=0;e.weight&&(n+=e.barycenter*e.weight,a+=e.weight),t.weight&&(n+=t.barycenter*t.weight,a+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/a,e.weight=a,e.i=Math.min(t.i,e.i),t.merged=!0}var La=Je,_L=Ct,EL=CL;function CL(e,t){var n=_L.partition(e,function(u){return La.has(u,"barycenter")}),a=n.lhs,r=La.sortBy(n.rhs,function(u){return-u.i}),i=[],o=0,s=0,l=0;a.sort(xL(!!t)),l=Eg(i,r,l),La.forEach(a,function(u){l+=u.vs.length,i.push(u.vs),o+=u.barycenter*u.weight,s+=u.weight,l=Eg(i,r,l)});var c={vs:La.flatten(i,!0)};return s&&(c.barycenter=o/s,c.weight=s),c}function Eg(e,t,n){for(var a;t.length&&(a=La.last(t)).i<=n;)t.pop(),e.push(a.vs),n++;return n}function xL(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Mr=Je,NL=vL,IL=yL,TL=EL,PL=WS;function WS(e,t,n,a){var r=e.children(t),i=e.node(t),o=i?i.borderLeft:void 0,s=i?i.borderRight:void 0,l={};o&&(r=Mr.filter(r,function(h){return h!==o&&h!==s}));var c=NL(e,r);Mr.forEach(c,function(h){if(e.children(h.v).length){var m=WS(e,h.v,n,a);l[h.v]=m,Mr.has(m,"barycenter")&&AL(h,m)}});var u=IL(c,n);RL(u,l);var d=TL(u,a);if(o&&(d.vs=Mr.flatten([o,d.vs,s],!0),e.predecessors(o).length)){var f=e.node(e.predecessors(o)[0]),p=e.node(e.predecessors(s)[0]);Mr.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d}function RL(e,t){Mr.forEach(e,function(n){n.vs=Mr.flatten(n.vs.map(function(a){return t[a]?t[a].vs:a}),!0)})}function AL(e,t){Mr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Va=Je,kL=Jt.Graph,$L=FL;function FL(e,t,n){var a=DL(e),r=new kL({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(i){return e.node(i)});return Va.forEach(e.nodes(),function(i){var o=e.node(i),s=e.parent(i);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(r.setNode(i),r.setParent(i,s||a),Va.forEach(e[n](i),function(l){var c=l.v===i?l.w:l.v,u=r.edge(c,i),d=Va.isUndefined(u)?0:u.weight;r.setEdge(c,i,{weight:e.edge(l).weight+d})}),Va.has(o,"minRank")&&r.setNode(i,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),r}function DL(e){for(var t;e.hasNode(t=Va.uniqueId("_root")););return t}var OL=Je,qL=LL;function LL(e,t,n){var a={},r;OL.forEach(n,function(i){for(var o=e.parent(i),s,l;o;){if(s=e.parent(o),s?(l=a[s],a[s]=o):(l=r,r=o),l&&l!==o){t.setEdge(l,o);return}o=s}})}var jr=Je,VL=dL,ML=pL,BL=PL,UL=$L,zL=qL,HL=Jt.Graph,Cg=Ct,WL=jL;function jL(e){var t=Cg.maxRank(e),n=xg(e,jr.range(1,t+1),"inEdges"),a=xg(e,jr.range(t-1,-1,-1),"outEdges"),r=VL(e);Ng(e,r);for(var i=Number.POSITIVE_INFINITY,o,s=0,l=0;l<4;++s,++l){QL(s%2?n:a,s%4>=2),r=Cg.buildLayerMatrix(e);var c=ML(e,r);c<i&&(l=0,o=jr.cloneDeep(r),i=c)}Ng(e,o)}function xg(e,t,n){return jr.map(t,function(a){return UL(e,a,n)})}function QL(e,t){var n=new HL;jr.forEach(e,function(a){var r=a.graph().root,i=BL(a,r,n,t);jr.forEach(i.vs,function(o,s){a.node(o).order=s}),zL(a,n,i.vs)})}function Ng(e,t){jr.forEach(t,function(n){jr.forEach(n,function(a,r){e.node(a).order=r})})}var _e=Je,GL=Jt.Graph,YL=Ct,XL={positionX:JL,findType1Conflicts:jS,findType2Conflicts:QS,addConflict:uh,hasConflict:GS,verticalAlignment:YS,horizontalCompaction:XS,alignCoordinates:ZS,findSmallestWidthAlignment:KS,balance:JS};function jS(e,t){var n={};function a(r,i){var o=0,s=0,l=r.length,c=_e.last(i);return _e.forEach(i,function(u,d){var f=KL(e,u),p=f?e.node(f).order:l;(f||u===c)&&(_e.forEach(i.slice(s,d+1),function(h){_e.forEach(e.predecessors(h),function(m){var g=e.node(m),b=g.order;(b<o||p<b)&&!(g.dummy&&e.node(h).dummy)&&uh(n,m,h)})}),s=d+1,o=p)}),i}return _e.reduce(t,a),n}function QS(e,t){var n={};function a(i,o,s,l,c){var u;_e.forEach(_e.range(o,s),function(d){u=i[d],e.node(u).dummy&&_e.forEach(e.predecessors(u),function(f){var p=e.node(f);p.dummy&&(p.order<l||p.order>c)&&uh(n,f,u)})})}function r(i,o){var s=-1,l,c=0;return _e.forEach(o,function(u,d){if(e.node(u).dummy==="border"){var f=e.predecessors(u);f.length&&(l=e.node(f[0]).order,a(o,c,d,s,l),c=d,s=l)}a(o,c,o.length,l,i.length)}),o}return _e.reduce(t,r),n}function KL(e,t){if(e.node(t).dummy)return _e.find(e.predecessors(t),function(n){return e.node(n).dummy})}function uh(e,t,n){if(t>n){var a=t;t=n,n=a}var r=e[t];r||(e[t]=r={}),r[n]=!0}function GS(e,t,n){if(t>n){var a=t;t=n,n=a}return _e.has(e[t],n)}function YS(e,t,n,a){var r={},i={},o={};return _e.forEach(t,function(s){_e.forEach(s,function(l,c){r[l]=l,i[l]=l,o[l]=c})}),_e.forEach(t,function(s){var l=-1;_e.forEach(s,function(c){var u=a(c);if(u.length){u=_e.sortBy(u,function(m){return o[m]});for(var d=(u.length-1)/2,f=Math.floor(d),p=Math.ceil(d);f<=p;++f){var h=u[f];i[c]===c&&l<o[h]&&!GS(n,c,h)&&(i[h]=c,i[c]=r[c]=r[h],l=o[h])}}})}),{root:r,align:i}}function XS(e,t,n,a,r){var i={},o=ZL(e,t,n,r),s=r?"borderLeft":"borderRight";function l(d,f){for(var p=o.nodes(),h=p.pop(),m={};h;)m[h]?d(h):(m[h]=!0,p.push(h),p=p.concat(f(h))),h=p.pop()}function c(d){i[d]=o.inEdges(d).reduce(function(f,p){return Math.max(f,i[p.v]+o.edge(p))},0)}function u(d){var f=o.outEdges(d).reduce(function(h,m){return Math.min(h,i[m.w]-o.edge(m))},Number.POSITIVE_INFINITY),p=e.node(d);f!==Number.POSITIVE_INFINITY&&p.borderType!==s&&(i[d]=Math.max(i[d],f))}return l(c,o.predecessors.bind(o)),l(u,o.successors.bind(o)),_e.forEach(a,function(d){i[d]=i[n[d]]}),i}function ZL(e,t,n,a){var r=new GL,i=e.graph(),o=eV(i.nodesep,i.edgesep,a);return _e.forEach(t,function(s){var l;_e.forEach(s,function(c){var u=n[c];if(r.setNode(u),l){var d=n[l],f=r.edge(d,u);r.setEdge(d,u,Math.max(o(e,c,l),f||0))}l=c})}),r}function KS(e,t){return _e.minBy(_e.values(t),function(n){var a=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return _e.forIn(n,function(i,o){var s=tV(e,o)/2;a=Math.max(i+s,a),r=Math.min(i-s,r)}),a-r})}function ZS(e,t){var n=_e.values(t),a=_e.min(n),r=_e.max(n);_e.forEach(["u","d"],function(i){_e.forEach(["l","r"],function(o){var s=i+o,l=e[s],c;if(l!==t){var u=_e.values(l);c=o==="l"?a-_e.min(u):r-_e.max(u),c&&(e[s]=_e.mapValues(l,function(d){return d+c}))}})})}function JS(e,t){return _e.mapValues(e.ul,function(n,a){if(t)return e[t.toLowerCase()][a];var r=_e.sortBy(_e.map(e,a));return(r[1]+r[2])/2})}function JL(e){var t=YL.buildLayerMatrix(e),n=_e.merge(jS(e,t),QS(e,t)),a={},r;_e.forEach(["u","d"],function(o){r=o==="u"?t:_e.values(t).reverse(),_e.forEach(["l","r"],function(s){s==="r"&&(r=_e.map(r,function(d){return _e.values(d).reverse()}));var l=(o==="u"?e.predecessors:e.successors).bind(e),c=YS(e,r,n,l),u=XS(e,r,c.root,c.align,s==="r");s==="r"&&(u=_e.mapValues(u,function(d){return-d})),a[o+s]=u})});var i=KS(e,a);return ZS(a,i),JS(a,e.graph().align)}function eV(e,t,n){return function(a,r,i){var o=a.node(r),s=a.node(i),l=0,c;if(l+=o.width/2,_e.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=-o.width/2;break;case"r":c=o.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(o.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,_e.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":c=s.width/2;break;case"r":c=-s.width/2;break}return c&&(l+=n?c:-c),c=0,l}}function tV(e,t){return e.node(t).width}var Ma=Je,e_=Ct,rV=XL.positionX,nV=aV;function aV(e){e=e_.asNonCompoundGraph(e),iV(e),Ma.forEach(rV(e),function(t,n){e.node(n).x=t})}function iV(e){var t=e_.buildLayerMatrix(e),n=e.graph().ranksep,a=0;Ma.forEach(t,function(r){var i=Ma.max(Ma.map(r,function(o){return e.node(o).height}));Ma.forEach(r,function(o){e.node(o).y=a+i/2}),a+=i+n})}var xe=Je,Ig=n2,Tg=w2,oV=H2,sV=Ct.normalizeRanks,lV=G2,uV=Ct.removeEmptyRanks,Pg=Z2,cV=aL,Rg=oL,dV=WL,fV=nV,Zr=Ct,pV=Jt.Graph,hV=mV;function mV(e,t){var n=t&&t.debugTiming?Zr.time:Zr.notime;n("layout",function(){var a=n("  buildLayoutGraph",function(){return NV(e)});n("  runLayout",function(){vV(a,n)}),n("  updateInputGraph",function(){gV(e,a)})})}function vV(e,t){t("    makeSpaceForEdgeLabels",function(){IV(e)}),t("    removeSelfEdges",function(){OV(e)}),t("    acyclic",function(){Ig.run(e)}),t("    nestingGraph.run",function(){Pg.run(e)}),t("    rank",function(){oV(Zr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){TV(e)}),t("    removeEmptyRanks",function(){uV(e)}),t("    nestingGraph.cleanup",function(){Pg.cleanup(e)}),t("    normalizeRanks",function(){sV(e)}),t("    assignRankMinMax",function(){PV(e)}),t("    removeEdgeLabelProxies",function(){RV(e)}),t("    normalize.run",function(){Tg.run(e)}),t("    parentDummyChains",function(){lV(e)}),t("    addBorderSegments",function(){cV(e)}),t("    order",function(){dV(e)}),t("    insertSelfEdges",function(){qV(e)}),t("    adjustCoordinateSystem",function(){Rg.adjust(e)}),t("    position",function(){fV(e)}),t("    positionSelfEdges",function(){LV(e)}),t("    removeBorderNodes",function(){DV(e)}),t("    normalize.undo",function(){Tg.undo(e)}),t("    fixupEdgeLabelCoords",function(){$V(e)}),t("    undoCoordinateSystem",function(){Rg.undo(e)}),t("    translateGraph",function(){AV(e)}),t("    assignNodeIntersects",function(){kV(e)}),t("    reversePoints",function(){FV(e)}),t("    acyclic.undo",function(){Ig.undo(e)})}function gV(e,t){xe.forEach(e.nodes(),function(n){var a=e.node(n),r=t.node(n);a&&(a.x=r.x,a.y=r.y,t.children(n).length&&(a.width=r.width,a.height=r.height))}),xe.forEach(e.edges(),function(n){var a=e.edge(n),r=t.edge(n);a.points=r.points,xe.has(r,"x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var yV=["nodesep","edgesep","ranksep","marginx","marginy"],bV={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},wV=["acyclicer","ranker","rankdir","align"],SV=["width","height"],_V={width:0,height:0},EV=["minlen","weight","width","height","labeloffset"],CV={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},xV=["labelpos"];function NV(e){var t=new pV({multigraph:!0,compound:!0}),n=ic(e.graph());return t.setGraph(xe.merge({},bV,ac(n,yV),xe.pick(n,wV))),xe.forEach(e.nodes(),function(a){var r=ic(e.node(a));t.setNode(a,xe.defaults(ac(r,SV),_V)),t.setParent(a,e.parent(a))}),xe.forEach(e.edges(),function(a){var r=ic(e.edge(a));t.setEdge(a,xe.merge({},CV,ac(r,EV),xe.pick(r,xV)))}),t}function IV(e){var t=e.graph();t.ranksep/=2,xe.forEach(e.edges(),function(n){var a=e.edge(n);a.minlen*=2,a.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})}function TV(e){xe.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var a=e.node(t.v),r=e.node(t.w),i={rank:(r.rank-a.rank)/2+a.rank,e:t};Zr.addDummyNode(e,"edge-proxy",i,"_ep")}})}function PV(e){var t=0;xe.forEach(e.nodes(),function(n){var a=e.node(n);a.borderTop&&(a.minRank=e.node(a.borderTop).rank,a.maxRank=e.node(a.borderBottom).rank,t=xe.max(t,a.maxRank))}),e.graph().maxRank=t}function RV(e){xe.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function AV(e){var t=Number.POSITIVE_INFINITY,n=0,a=Number.POSITIVE_INFINITY,r=0,i=e.graph(),o=i.marginx||0,s=i.marginy||0;function l(c){var u=c.x,d=c.y,f=c.width,p=c.height;t=Math.min(t,u-f/2),n=Math.max(n,u+f/2),a=Math.min(a,d-p/2),r=Math.max(r,d+p/2)}xe.forEach(e.nodes(),function(c){l(e.node(c))}),xe.forEach(e.edges(),function(c){var u=e.edge(c);xe.has(u,"x")&&l(u)}),t-=o,a-=s,xe.forEach(e.nodes(),function(c){var u=e.node(c);u.x-=t,u.y-=a}),xe.forEach(e.edges(),function(c){var u=e.edge(c);xe.forEach(u.points,function(d){d.x-=t,d.y-=a}),xe.has(u,"x")&&(u.x-=t),xe.has(u,"y")&&(u.y-=a)}),i.width=n-t+o,i.height=r-a+s}function kV(e){xe.forEach(e.edges(),function(t){var n=e.edge(t),a=e.node(t.v),r=e.node(t.w),i,o;n.points?(i=n.points[0],o=n.points[n.points.length-1]):(n.points=[],i=r,o=a),n.points.unshift(Zr.intersectRect(a,i)),n.points.push(Zr.intersectRect(r,o))})}function $V(e){xe.forEach(e.edges(),function(t){var n=e.edge(t);if(xe.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function FV(e){xe.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function DV(e){xe.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),a=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(xe.last(n.borderLeft)),o=e.node(xe.last(n.borderRight));n.width=Math.abs(o.x-i.x),n.height=Math.abs(r.y-a.y),n.x=i.x+n.width/2,n.y=a.y+n.height/2}}),xe.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function OV(e){xe.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function qV(e){var t=Zr.buildLayerMatrix(e);xe.forEach(t,function(n){var a=0;xe.forEach(n,function(r,i){var o=e.node(r);o.order=i+a,xe.forEach(o.selfEdges,function(s){Zr.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:o.rank,order:i+ ++a,e:s.e,label:s.label},"_se")}),delete o.selfEdges})})}function LV(e){xe.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var a=e.node(n.e.v),r=a.x+a.width/2,i=a.y,o=n.x-r,s=a.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*o/3,y:i-s},{x:r+5*o/6,y:i-s},{x:r+o,y:i},{x:r+5*o/6,y:i+s},{x:r+2*o/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})}function ac(e,t){return xe.mapValues(xe.pick(e,t),Number)}function ic(e){var t={};return xe.forEach(e,function(n,a){t[a.toLowerCase()]=n}),t}var oo=Je,VV=Ct,MV=Jt.Graph,BV={debugOrdering:UV};function UV(e){var t=VV.buildLayerMatrix(e),n=new MV({compound:!0,multigraph:!0}).setGraph({});return oo.forEach(e.nodes(),function(a){n.setNode(a,{label:a}),n.setParent(a,"layer"+e.node(a).rank)}),oo.forEach(e.edges(),function(a){n.setEdge(a.v,a.w,{},a.name)}),oo.forEach(t,function(a,r){var i="layer"+r;n.setNode(i,{rank:"same"}),oo.reduce(a,function(o,s){return n.setEdge(o,s,{style:"invis"}),s})}),n}var zV="0.8.5",HV={graphlib:Jt,layout:hV,debug:BV,util:{time:Ct.time,notime:Ct.notime},version:zV};const t_=Nt(HV),WV=()=>L(G,{children:[v(Oe,{variant:"smallText1",className:"description",children:"Undefined"}),v(Pn,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),Cd=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return R.useMemo(()=>L(G,{children:[v("div",{children:v(De,{icon:"fileOutlined"})}),v("span",{children:n})]}),[n])};try{Cd.displayName="EntityPlaceholderNodeLabel",Cd.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var bt=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(bt||{});const Jo=e=>{const{type:t,data:n}=e;let a;switch(t){case"EntityNode":a=v(gd,{...n});break;case"EntityPlaceholderNode":a=v(Cd,{...n});break;case"ExternalNode":a=v(wd,{...n});break;case"ActivityNode":a=v(md,{...n});break;case"ExpandNode":a=v(yd,{...n});break;case"UndefinedNode":a=v(WV,{});break;default:a=L("p",{children:["Unrecognized node type: ",t]});break}const r={label:a,props:n,type:t};return{id:Ir(e),position:{x:100,y:100},data:r,connectable:!1,draggable:!1,className:`${t}`}},r_=(e,t)=>{const n=Ir(e),a=Ir(t);return{id:`${n}-${a}`,source:n,target:a,animated:!0,type:br.SimpleBezier,markerEnd:{type:ai.ArrowClosed}}},Ir=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},Hn=new t_.graphlib.Graph;Hn.setDefaultEdgeLabel(()=>({}));const Ag=e=>e.data.type=="ExpandNode"?30:100,kg=e=>e.data.type=="ExpandNode"?30:172,jV=(e,t,n)=>{const a=n==="LR";return Hn.setGraph({rankdir:n}),e.forEach(r=>{Hn.setNode(r.id,{width:kg(r),height:Ag(r)})}),t.forEach(r=>{Hn.setEdge(r.source,r.target)}),t_.layout(Hn),e.forEach(r=>{const i=Hn.node(r.id);return r.targetPosition=a?le.Left:le.Top,r.sourcePosition=a?le.Right:le.Bottom,r.position={x:i.x-kg(r)/2,y:i.y-Ag(r)/2},r}),{nodes:e,edges:t}},$g=(e,t)=>G1(e,t,Fa).length==0;try{Jo.displayName="getProvenanceNode",Jo.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{Ir.displayName="getNodeId",Ir.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const QV="org.sagebionetworks.repo.model.provenance.UsedEntity",Fg=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(r=>t.id==r.id&&t.versionNumber==r.versionNumber))!==void 0},n_=(e,t)=>t.find(a=>a.id===Ir(e))===void 0,GV=(e,t)=>{const n={type:bt.ENTITY,data:e};return t.find(a=>a.id===Ir(n))},YV=(e,t,n)=>n.find(r=>r.source===Ir(e)&&r.target===Ir(t))===void 0,ki=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:a,edgesCopy:r}=e;n_(t,a)&&a.push(Jo(t)),YV(t,n,r)&&r.push(r_(t,n))},XV=e=>{const{activity:t,entityHeader:n,nodesCopy:a,edgesCopy:r}=e,i={type:bt.ACTIVITY,data:t},o={type:bt.ENTITY,data:n};ki({newNodeProps:i,existingNodeProps:o,nodesCopy:a,edgesCopy:r})},KV=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:a,edgesCopy:r}=e,i={type:bt.EXPAND,data:{itemCount:n,entityHeader:t}},o={type:bt.ENTITY,data:t};ki({newNodeProps:i,existingNodeProps:o,nodesCopy:a,edgesCopy:r})},ZV=e=>{const{ref:t,activity:n,nodesCopy:a,edgesCopy:r}=e,i={type:bt.ENTITY_PLACEHOLDER,data:t},o={type:bt.ACTIVITY,data:n};ki({newNodeProps:i,existingNodeProps:o,nodesCopy:a,edgesCopy:r})},JV=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:a}=e,r={type:bt.UNDEFINED,data:t},i={type:bt.ENTITY,data:t};ki({newNodeProps:r,existingNodeProps:i,nodesCopy:n,edgesCopy:a})},eM=e=>{const{usedURL:t,activity:n,nodesCopy:a,edgesCopy:r}=e,i={type:bt.ACTIVITY,data:n},o={type:bt.EXTERNAL,data:t};ki({newNodeProps:o,existingNodeProps:i,nodesCopy:a,edgesCopy:r})},tM=e=>{const{entityHeader:t,activity:n,nodesCopy:a,edgesCopy:r}=e,i={type:bt.ENTITY,data:t};if(n_(i,a)&&(a.push(Jo(i)),n)){const o={type:bt.ACTIVITY,data:n};r.push(r_(i,o))}};const oc=400,sc=.85,rM=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:a=[],initialEdges:r=[],onNodesChangedListener:i,onEdgesChangedListener:o}=e,{accessToken:s}=je(),[l,c]=z.useState(a),[u,d]=z.useState(r),[f,p,h]=hF([]),[m,g,b]=mF([]),[E,y]=R.useState(),_=LC(),{data:S,isSuccess:w}=Z1(t,{useErrorBoundary:!0});if(w&&S&&S.totalNumberOfResults==0){const F=t.map(O=>O.targetId).join(",");_(`Unable to load provenance for the given Synapse IDs: ${F}`)}const C=S==null?void 0:S.results,[N,T]=z.useState(!1),P=el(),k=R.useCallback((F,O)=>{y(O)},[]),A=R.useCallback(async F=>{var B;const{entityHeader:O,nodesCopy:$,edgesCopy:V,usedInActivity:q}=F;tM({entityHeader:O,activity:q,nodesCopy:$,edgesCopy:V});try{const j=await jh(O.id,O.versionNumber,s);(!Fg({entityHeader:O,rootEntityHeaders:C})||j.used&&j.used.length>=oc)&&KV({entityHeader:O,itemCount:(B=j.used)==null?void 0:B.length,nodesCopy:$,edgesCopy:V})}catch(j){console.error(j),Fg({entityHeader:O,rootEntityHeaders:C})&&JV({entityHeader:O,nodesCopy:$,edgesCopy:V})}},[s,C]);R.useEffect(()=>{!N&&f.length>0&&setTimeout(()=>{if(C){const F=GV(C[0],f);if(F){const O=P.getZoom(),$=O>sc?sc:O;P==null||P.setCenter(F.position.x+150,F.position.y-30,{zoom:$,duration:0})}T(!0)}})},[N,f,P,C]);const I=R.useCallback(async F=>{const{entityHeader:O,nodesCopy:$,edgesCopy:V}=F;try{const q=await jh(O.id,O.versionNumber,s);if(XV({activity:q,entityHeader:O,nodesCopy:$,edgesCopy:V}),q.used&&q.used.length<oc){const B=[];q.used.forEach(Z=>{Z.concreteType==QV?B.push(Z.reference):eM({usedURL:Z,activity:q,nodesCopy:$,edgesCopy:V})});const j=await fb(B,s),{results:Q}=j;B.filter(Z=>Q.find(J=>J.id==Z.targetId)==null).forEach(Z=>{ZV({ref:Z,activity:q,nodesCopy:$,edgesCopy:V})});const Y=[];Q.forEach(Z=>{Y.push(A({entityHeader:Z,nodesCopy:$,edgesCopy:V,usedInActivity:q}))}),await Promise.allSettled(Y)}}catch(q){console.error(q)}},[s,A]);R.useEffect(()=>{if(C&&l.length==0){const F=[...l],O=[...u],$=[];C.forEach(V=>{const q=A({entityHeader:V,nodesCopy:F,edgesCopy:O});$.push(q);const B=I({entityHeader:V,nodesCopy:F,edgesCopy:O});$.push(B)}),Promise.allSettled($).finally(()=>{c(F),d(O)})}},[A,_,I,C,t,u,l]),R.useEffect(()=>{const F=E==null?void 0:E.data;if(E&&(F==null?void 0:F.type)==bt.EXPAND){const O=F.props;if(O.itemCount>oc){Xr("Web visualization does not support expanding this many items at this time.","danger");return}else{F.label=v(iN,{size:30});const $=l.filter(B=>B.id!=E.id),V=Xp([E],u)[0],q=u.filter(B=>B!=V);I({entityHeader:O.entityHeader,nodesCopy:$,edgesCopy:q}).finally(()=>{c($),d(q)})}y(void 0)}},[E,l,u,I]),R.useEffect(()=>{const{nodes:F,edges:O}=jV(l,u,"TB");$g(F,f)||(p(F),i&&i(F)),$g(O,m)||(g(O),o&&o(O))},[l,u,f,m,p,g,N,P,t,i,o]);const x=R.useCallback(F=>{F&&typeof F.deltaX<"u"&&typeof F.deltaY<"u"&&window.scrollTo(window.scrollX+F.deltaX,window.scrollY+F.deltaY)},[]);return v("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:v(K0,{defaultViewport:{x:0,y:0,zoom:sc},nodes:f,edges:m,onNodeClick:k,onNodesChange:h,onEdgesChange:b,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:x,children:v(_F,{})})})},xd=e=>v(db,{children:v(Jp,{children:v(rM,{...e})})});try{xd.displayName="ProvenanceGraph",xd.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge[]) => void)"}}}}}catch{}function Nd(e){const{entityList:t,displayHeightPx:n}=e,a=t.split(",").map(i=>{const o=i.split("/version/");return{targetId:o[0],targetVersionNumber:o.length>1?parseInt(o[1]):void 0}}),r=n?`${n}px`:void 0;return v(xd,{entityRefs:a,containerHeight:r})}try{Nd.displayName="MarkdownProvenanceGraph",Nd.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}}}catch{}class oi extends R.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&Qa(this.context.accessToken,t).then(n=>{const a=[{associateObjectId:t,associateObjectType:or.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(a,n.dataFileHandleId)})}getSynapseFiles(t,n){As({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(r=>{const{preSignedURL:i}=r.requestedFiles.filter(o=>o.fileHandleId===n)[0];this.setState({preSignedURL:i})}).catch(r=>{console.error("Error on getting image ",r)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:a}=n.filter(i=>i.fileName===t)[0],r=[{associateObjectId:this.props.wikiId,associateObjectType:or.WikiAttachment,fileHandleId:a}];this.getSynapseFiles(r,a)}}render(){const{params:t}=this.props,{align:n="",altText:a="synapse image"}=t;let r="auto";t.scale&&t.scale!=="100"&&(r=`${Number(t.scale)}%`);const i=n.toLowerCase();let o="";i==="left"&&(o="floatLeft"),i==="right"&&(o="floatright"),i==="center"&&(o="align-center");const s={width:r,height:r};return this.state.preSignedURL?v(R.Fragment,{children:v("img",{alt:a,className:"img-fluid  "+o,src:this.state.preSignedURL,style:s})}):null}}We(oi,"contextType",Ci);try{oi.displayName="SynapseImage",oi.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}}}catch{}const si=z.createContext(void 0),Id=({children:e,wikiContext:t})=>v(si.Provider,{value:t,children:e}),Dg=si.Consumer;function a_(){return R.useContext(si)??{}}try{si.displayName="SynapseWikiContext",si.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}}}catch{}try{Id.displayName="SynapseWikiContextProvider",Id.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}}}catch{}try{Dg.displayName="SynapseWikiContextConsumer",Dg.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}}}catch{}function Td(e){const{wikiId:t,wikiPage:n,fileHandles:a}=a_();return e.fileName?a?v(oi,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:a.list}):v(G,{}):e.synapseId?v(oi,{params:e,synapseId:e.synapseId}):v(G,{})}try{Td.displayName="MarkdownSynapseImage",Td.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}}}catch{}const nM=Qb(Gb);class es extends R.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:da,entityId:rn(t),query:{sql:t}};pb(n,this.context.accessToken).then(a=>{this.setState({isLoaded:!0,queryData:a})}).catch(a=>{console.log("Error on full table query ",a)})}showPlot(){var p,h;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:a,type:r,xaxistype:i,showlegend:o}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),c={showlegend:o,title:t};n&&(c.xaxis={title:n}),i&&(c.xaxis={...c.xaxis,xaxistype:i.toLowerCase()}),a&&(c.yaxis={title:a});const u=[],d=l?"v":"h",f=((p=s.queryData.queryResult)==null?void 0:p.queryResults.headers)??[];for(let m=0;m<f.length-1;m+=1)u[m]={orientation:d,name:f[m+1].name,type:r.toLowerCase(),x:[],y:[]};for(const m of((h=s.queryData.queryResult)==null?void 0:h.queryResults.rows)??[])for(let g=1;g<m.values.length;g+=1){const b=m.values;u[g-1].x.push(b[0]),u[g-1].y.push(b[g])}return v(nM,{layout:c,data:u})}render(){return this.state.isLoaded?this.showPlot():null}}We(es,"contextType",Ci);try{es.displayName="SynapsePlot",es.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}}}catch{}function Pd(e){const{ownerId:t,wikiId:n,wikiPage:a}=a_();return v(es,{ownerId:t,wikiId:n||(a==null?void 0:a.id),widgetparamsMapped:e})}try{Pd.displayName="MarkdownSynapsePlot",Pd.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}}}catch{}const aM=200,Og="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",qg="ESTIMATED_DOWNLOAD_SPEED",iM="syn12600511",oM=e=>new Promise((t,n)=>{const a=localStorage.getItem(Og),r=localStorage.getItem(qg);if(a&&r&&new Date().getTime()<Number(a)){t(Number(r));return}Qa(e,iM).then(i=>{const o=i,l={includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:o.id,associateObjectType:or.FileEntity,fileHandleId:o.dataFileHandleId}]};As(l,e).then(c=>{const u=c.requestedFiles[0].preSignedURL,d=c.requestedFiles[0].fileHandle,f=new Date().getTime();return VC(d,u).then(()=>{const p=d.contentSize/((new Date().getTime()-f-aM)/1e3),h=new Date().getTime();localStorage.setItem(Og,(h+1e3*60*5).toString()),localStorage.setItem(qg,p.toString()),t(p)})})}).catch(i=>n(i))}),gn=e=>v(mn,{style:{...e.style,display:"inline-block"},...e});try{gn.displayName="SkeletonInlineBlock",gn.__docgenInfo={description:"Skeleton with a display value of `inline-block`. MUI applies `display: block` with high specificity, so it's easiest to just apply the style to the component.",displayName:"SkeletonInlineBlock",props:{animation:{defaultValue:{value:"'pulse'"},description:"The animation.\nIf `false` the animation effect is disabled.",name:"animation",required:!1,type:{name:'false | "pulse" | "wave"'}},children:{defaultValue:null,description:"Optional children to infer width and height from.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SkeletonClasses> & Partial<ClassNameMap<never>>)"}},height:{defaultValue:null,description:`Height of the skeleton.
Useful when you don't want to adapt the skeleton to a text element but for instance a card.`,name:"height",required:!1,type:{name:"string | number"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},variant:{defaultValue:{value:"'text'"},description:"The type of content that will be rendered.",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"rounded"'},{value:'"rectangular"'},{value:'"circular"'}]}},width:{defaultValue:null,description:`Width of the skeleton.
Useful when the skeleton is inside an inline element with no width of its own.`,name:"width",required:!1,type:{name:"string | number"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}}}}}catch{}var i_={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Yr,function(){var n,a,r=1e3,i=6e4,o=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f={years:c,months:u,days:s,hours:o,minutes:i,seconds:r,milliseconds:1,weeks:6048e5},p=function(S){return S instanceof _},h=function(S,w,C){return new _(S,C,w.$l)},m=function(S){return a.p(S)+"s"},g=function(S){return S<0},b=function(S){return g(S)?Math.ceil(S):Math.floor(S)},E=function(S){return Math.abs(S)},y=function(S,w){return S?g(S)?{negative:!0,format:""+E(S)+w}:{negative:!1,format:""+S+w}:{negative:!1,format:""}},_=function(){function S(C,N,T){var P=this;if(this.$d={},this.$l=T,C===void 0&&(this.$ms=0,this.parseFromMilliseconds()),N)return h(C*f[m(N)],this);if(typeof C=="number")return this.$ms=C,this.parseFromMilliseconds(),this;if(typeof C=="object")return Object.keys(C).forEach(function(I){P.$d[m(I)]=C[I]}),this.calMilliseconds(),this;if(typeof C=="string"){var k=C.match(d);if(k){var A=k.slice(2).map(function(I){return I!=null?Number(I):0});return this.$d.years=A[0],this.$d.months=A[1],this.$d.weeks=A[2],this.$d.days=A[3],this.$d.hours=A[4],this.$d.minutes=A[5],this.$d.seconds=A[6],this.calMilliseconds(),this}}return this}var w=S.prototype;return w.calMilliseconds=function(){var C=this;this.$ms=Object.keys(this.$d).reduce(function(N,T){return N+(C.$d[T]||0)*f[T]},0)},w.parseFromMilliseconds=function(){var C=this.$ms;this.$d.years=b(C/c),C%=c,this.$d.months=b(C/u),C%=u,this.$d.days=b(C/s),C%=s,this.$d.hours=b(C/o),C%=o,this.$d.minutes=b(C/i),C%=i,this.$d.seconds=b(C/r),C%=r,this.$d.milliseconds=C},w.toISOString=function(){var C=y(this.$d.years,"Y"),N=y(this.$d.months,"M"),T=+this.$d.days||0;this.$d.weeks&&(T+=7*this.$d.weeks);var P=y(T,"D"),k=y(this.$d.hours,"H"),A=y(this.$d.minutes,"M"),I=this.$d.seconds||0;this.$d.milliseconds&&(I+=this.$d.milliseconds/1e3);var x=y(I,"S"),F=C.negative||N.negative||P.negative||k.negative||A.negative||x.negative,O=k.format||A.format||x.format?"T":"",$=(F?"-":"")+"P"+C.format+N.format+P.format+O+k.format+A.format+x.format;return $==="P"||$==="-P"?"P0D":$},w.toJSON=function(){return this.toISOString()},w.format=function(C){var N=C||"YYYY-MM-DDTHH:mm:ss",T={Y:this.$d.years,YY:a.s(this.$d.years,2,"0"),YYYY:a.s(this.$d.years,4,"0"),M:this.$d.months,MM:a.s(this.$d.months,2,"0"),D:this.$d.days,DD:a.s(this.$d.days,2,"0"),H:this.$d.hours,HH:a.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:a.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:a.s(this.$d.seconds,2,"0"),SSS:a.s(this.$d.milliseconds,3,"0")};return N.replace(l,function(P,k){return k||String(T[P])})},w.as=function(C){return this.$ms/f[m(C)]},w.get=function(C){var N=this.$ms,T=m(C);return T==="milliseconds"?N%=1e3:N=T==="weeks"?b(N/f[T]):this.$d[T],N===0?0:N},w.add=function(C,N,T){var P;return P=N?C*f[m(N)]:p(C)?C.$ms:h(C,this).$ms,h(this.$ms+P*(T?-1:1),this)},w.subtract=function(C,N){return this.add(C,N,!0)},w.locale=function(C){var N=this.clone();return N.$l=C,N},w.clone=function(){return h(this.$ms,this)},w.humanize=function(C){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!C)},w.milliseconds=function(){return this.get("milliseconds")},w.asMilliseconds=function(){return this.as("milliseconds")},w.seconds=function(){return this.get("seconds")},w.asSeconds=function(){return this.as("seconds")},w.minutes=function(){return this.get("minutes")},w.asMinutes=function(){return this.as("minutes")},w.hours=function(){return this.get("hours")},w.asHours=function(){return this.as("hours")},w.days=function(){return this.get("days")},w.asDays=function(){return this.as("days")},w.weeks=function(){return this.get("weeks")},w.asWeeks=function(){return this.as("weeks")},w.months=function(){return this.get("months")},w.asMonths=function(){return this.as("months")},w.years=function(){return this.get("years")},w.asYears=function(){return this.as("years")},S}();return function(S,w,C){n=C,a=C().$utils(),C.duration=function(P,k){var A=C.locale();return h(P,{$l:A},k)},C.isDuration=p;var N=w.prototype.add,T=w.prototype.subtract;w.prototype.add=function(P,k){return p(P)&&(P=P.asMilliseconds()),N.bind(this)(P,k)},w.prototype.subtract=function(P,k){return p(P)&&(P=P.asMilliseconds()),T.bind(this)(P,k)}}})})(i_);var sM=i_.exports;const lM=Nt(sM);var o_={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Yr,function(){return function(n,a,r){n=n||{};var i=a.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(c,u,d,f){return i.fromToBase(c,u,d,f)}r.en.relativeTime=o,i.fromToBase=function(c,u,d,f,p){for(var h,m,g,b=d.$locale().relativeTime||o,E=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=E.length,_=0;_<y;_+=1){var S=E[_];S.d&&(h=f?r(c).diff(d,S.d,!0):d.diff(c,S.d,!0));var w=(n.rounding||Math.round)(Math.abs(h));if(g=h>0,w<=S.r||!S.r){w<=1&&_>0&&(S=E[_-1]);var C=b[S.l];p&&(w=p(""+w)),m=typeof C=="string"?C.replace("%d",w):C(w,u,S.l,g);break}}if(u)return m;var N=g?b.future:b.past;return typeof N=="function"?N(m):N.replace("%s",m)},i.to=function(c,u){return s(c,u,this,!0)},i.from=function(c,u){return s(c,u,this)};var l=function(c){return c.$u?r.utc():r()};i.toNow=function(c){return this.to(l(this),c)},i.fromNow=function(c){return this.from(l(this),c)}}})})(o_);var uM=o_.exports;const cM=Nt(uM);lr.extend(lM);lr.extend(cM);function Rd(e){const{numFiles:t,numBytes:n}=e,{accessToken:a}=je(),[r,i]=R.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:o,downloadSpeed:s}=r;R.useEffect(()=>{a&&oM(a).then(h=>{i({isLoading:!1,downloadSpeed:h})})},[a]);const l=o||s===0||!n?0:n/s,c=l===0,u=c?"":lr.duration({seconds:l}).humanize(),d=t===0,f=d?"SRC-inactive":"SRC-primary-text-color",p=c?"SRC-inactive":"SRC-primary-text-color";return L("span",{className:"download-details-container",children:[L("span",{children:[v("span",{className:f,children:v(De,{icon:"file"})}),d?v(gn,{width:50}):L(G,{children:[" ",t,"Â files "]})]}),n&&v(Et,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Fo,placement:"top",children:L("span",{"data-testid":"numBytesUI",children:[v("span",{className:p,children:v(De,{icon:"database"})}),c?v(gn,{width:50}):hb(n)]})}),n&&v(Et,{title:"This is an estimate of how long package download will take.",enterNextDelay:Fo,placement:"top",children:L("span",{"data-testid":"downloadTimeEstimateUI",children:[v("span",{className:p,children:v(De,{icon:"clock"})}),o&&t>0?v(gn,{width:50}):u]})})]})}try{Rd.displayName="DownloadDetails",Rd.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}}}catch{}const In=R.createContext(void 0),ts=({children:e,queryContext:t})=>v(In.Provider,{value:t,children:e});function gt(){const e=R.useContext(In);if(e===void 0)throw new Error("useQueryContext must be used within a QueryWrapper");return e}function dM(){const e=R.useContext(In);if(e===void 0)throw new Error("usePaginatedQueryContext must be used within a QueryWrapper");return e}function fM(){const e=R.useContext(In);if(e===void 0)throw new Error("useInfiniteQueryContext must be used within a QueryWrapper");return e}const li=In.Consumer;try{In.displayName="QueryContext",In.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryContext",props:{}}}catch{}try{ts.displayName="QueryContextProvider",ts.__docgenInfo={description:"Provides data related to a Synapse table query, and functions for iterating through pages of the data.",displayName:"QueryContextProvider",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}}}}}catch{}try{li.displayName="QueryContextConsumer",li.__docgenInfo={description:"",displayName:"QueryContextConsumer",props:{}}}catch{}function s_(e,t){return`${e}${t}`}function pM(e,t){const n=window.location.search,a=`${e}=${t}`;return n?n.includes(`${e}=`)?window.location.search.slice(n.indexOf("?")+1).split("&").map(o=>o.split("=")[0]===e?`${a}`:o).join("&"):`${n.substr(1)}&${a}`:a}function hM(e,t){if(!window.location.search)return;const n=s_(e,t),r=window.location.search.slice(window.location.search.indexOf("?")+1).split("&").filter(i=>i.split("=")[0]===n).map(i=>i.split("=")[1])[0];return r?decodeURIComponent(r):void 0}function mM(e,t,n){const a=t!==void 0?s_(e,t):e,r=pM(a,n),i=window.location,o=`${i.protocol}//${i.hostname}${i.port?":"+i.port:""}${i.pathname}?${r}`;window.history.replaceState("object or string","Title",o)}function vM(e,t){const n=hM(e,t);let a;if(n){const r=JSON.parse(n);r.sql&&(a={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:$s|Fs|Ds|da|fa,entityId:rn(r.sql),query:r})}return a}function l_(e){const{initQueryRequest:t,componentIndex:n=0,shouldDeepLink:a=!1,onQueryChange:r}=e,[i,o]=R.useState(t);R.useEffect(()=>{const S=vM("QueryWrapper",n);S&&o(S)},[n]);const s=R.useCallback(()=>Br(i),[i]),l=R.useCallback(()=>Br(t),[t]),c=R.useCallback(S=>{let w;typeof S=="function"?w=S(s()):w=S;const C=Br(w);if(o(C),C.query){const N=JSON.stringify(C.query);if(a){const T=encodeURIComponent(N);mM("QueryWrapper",n,T)}r&&r(N)}},[n,s,r,a]),{entityId:u,versionNumber:d}=R.useMemo(()=>Yb(i.query.sql),[i.query.sql]),f=i.query.limit??Os,p=Math.ceil(((i.query.offset??0)+Number(f))/f),h=R.useCallback(S=>{c(w=>(w.query.limit=S,w))},[c]),m=R.useCallback(S=>{c(w=>(w.query.offset=(S-1)*f,w))},[f,c]),g=R.useCallback(()=>{c(t)},[t,c]);Do(()=>{i!=t&&g()},[t]);const b=R.useCallback(S=>{c(w=>(w.query.selectedFacets=(w.query.selectedFacets??[]).filter(C=>!Fa(C,S)),w))},[c]),E=R.useCallback((S,w)=>{c(C=>(C.query.selectedFacets=(C.query.selectedFacets??[]).map(N=>(zc(N)&&Fa(N,S)&&(N.facetValues=N.facetValues.filter(T=>T!==w)),N)).filter(N=>zc(N)?Array.isArray(N.facetValues)&&N.facetValues.length>0:!0),C))},[c]),y=R.useCallback(S=>{c(w=>(w.query.additionalFilters=(w.query.additionalFilters??[]).filter(C=>!Fa(C,S)),w))},[c]),_=R.useCallback((S,w)=>{c(C=>(C.query.additionalFilters=(C.query.additionalFilters??[]).map(N=>((Oo(N)||qo(N))&&Fa(N,S)&&(N.values=N.values.filter(T=>T!==w)),N)).filter(N=>Oo(N)||qo(N)?Array.isArray(N.values)&&N.values.length>0:!0),C))},[c]);return{entityId:u,versionNumber:d,getInitQueryRequest:l,getLastQueryRequest:s,setQuery:c,pageSize:f,currentPage:p,setPageSize:h,goToPage:m,resetQuery:g,removeSelectedFacet:b,removeValueFromSelectedFacet:E,removeQueryFilter:y,removeValueFromQueryFilter:_}}const dr="isShowingFacetFilters",fr="isHidingFacetFilters";function rs(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:a,lockedColumn:r,componentIndex:i,shouldDeepLink:o}=e,[s,l]=R.useState(void 0),{entityId:c,versionNumber:u,getInitQueryRequest:d,getLastQueryRequest:f,setQuery:p,currentPage:h,pageSize:m,goToPage:g,setPageSize:b,resetQuery:E,removeSelectedFacet:y,removeValueFromSelectedFacet:_,removeQueryFilter:S,removeValueFromQueryFilter:w}=l_({initQueryRequest:t,shouldDeepLink:o,componentIndex:i,onQueryChange:n}),C=R.useMemo(()=>f(),[f]),{data:N,isLoading:T,error:P,isPreviousData:k}=Kb(C,{keepPreviousData:!0},l),A=N==null?void 0:N.responseBody,I=T||k,{data:x}=Ii(c,u);Xb(()=>{A&&a&&a(JSON.stringify(A))},[A,a]);const F=A?Jb(A.facets,A.selectColumns):!0,O=R.useMemo(()=>ew(A,r),[A,r]),$=R.useMemo(()=>{const Q=f();return tw(Q.query,r)},[f,r]),V=R.useCallback(Q=>{var X;return((X=A==null?void 0:A.columnModels)==null?void 0:X.find(Y=>Y.name===Q))??null},[A==null?void 0:A.columnModels]),q={data:O,currentPage:h,pageSize:m,setPageSize:b,isLoadingNewBundle:I,getLastQueryRequest:f,getInitQueryRequest:d,error:P,entity:x,executeQueryRequest:p,isFacetsAvailable:F,asyncJobStatus:s,goToPage:g,hasResettableFilters:$,removeSelectedFacet:y,removeValueFromSelectedFacet:_,resetQuery:E,removeQueryFilter:S,removeValueFromQueryFilter:w,lockedColumn:r,getColumnModel:V},{children:B}=e;return v(ts,{queryContext:q,children:v("div",{className:`SRC-wrapper ${I?"SRC-logo-cursor":""} ${F?"has-facets":""}`,children:B})})}try{rs.displayName="QueryWrapper",rs.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"QueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}}}catch{}async function gM(e,t,n,a,r){try{const i={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:a};return await BC(i,e),Xr("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:r}}),t(),[0,""]}catch(i){return Xr(i.reason,"danger"),t(),[0,""]}}const Ua={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:L(G,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",v("br",{}),"If you donâ€™t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:L(G,{children:["Please ",v(MC,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},yM=e=>{switch(e.status){case 0:case 1:return L("div",{children:[v("span",{className:"spinner white"}),v("span",{className:"spinner__text",children:Ua[e.status].infoText})]});case 4:return v(G,{children:Ua[e.status].infoText});case 2:case 3:return L(G,{children:[v(Rd,{numFiles:e.fileCount,numBytes:e.fileSize}),v("span",{className:"download-confirmation-infoText",children:Ua[e.status].infoText})]});default:return v(G,{})}},Ad=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:a,topLevelControlsState:r})=>{const{accessToken:i,downloadCartPageUrl:o}=je(),{showDownloadConfirmation:s=!0}=r??{},[l,c]=R.useState(i?0:4),[u,d]=R.useState(0),[f,p]=R.useState(),{data:h,refetch:m}=rx(),g=e(),[b,E]=R.useState(!1),y=R.useCallback((A,I,x)=>{if(i&&x){const F=x.totalNumberOfFiles>0,O=A??0;c(F?3:2),d(O),p(I)}},[i]),{data:_,isSuccess:S}=vI({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Lc.FILE]});Do(()=>{S&&_&&h&&y(_.totalChildCount,_.sumFileSizesBytes,h)},[y,t,S,_,h]);const w=fa|mp,C={...g,partMask:w},{data:N}=Zb(C);Do(()=>{var A,I;if(N&&h){const x=(A=N.sumFileSizes)==null?void 0:A.greaterThan;y(N.queryCount,x||(I=N.sumFileSizes)==null?void 0:I.sumFileSizesBytes,h)}},[y,g,N,h]);const T=n?()=>n():()=>{a&&a(A=>({...A,showDownloadConfirmation:!1}))},P=async()=>{if(!i)c(4);else{c(1);const x=(await gM(i,T,g,t,()=>E(!0)))[0];c(x),m()}};b&&(window.location.href=o);const k=r==null?void 0:r.showFacetFilter;return v(G,{children:L(bp,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${Ua[l].className} ${s?"":"hidden"}
          ${k?dr:fr}
        `,children:[v(yM,{status:l,fileCount:u,fileSize:f}),L("div",{className:"download-confirmation-action",children:[l!==1&&v("button",{className:"btn btn-link",onClick:T,children:Ua[l].closeText}),(l===2||l===3)&&v("button",{type:"button",className:"btn btn-primary",onClick:()=>{P()},children:"Add"})]})]})})};try{Ad.displayName="DownloadConfirmation",Ad.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}}}catch{}function bM(){return L(G,{children:[v("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),v("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}var Qr=(e=>(e.INTERACTIVE="INTERACTIVE",e.STATIC="STATIC",e))(Qr||{});function wM(){return L("div",{className:"text-center",children:[lx,v("h4",{children:"No Matching Results"}),v("p",{children:"Try checking the spelling or removing filters."})]})}function SM(){return L("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[ux,v("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]})}const _M=()=>{try{return JSON.parse(sessionStorage.getItem(t1)||"")}catch{return[]}},EM=()=>{try{return JSON.parse(sessionStorage.getItem(r1)||"")}catch{return[]}},CM=()=>{try{return JSON.parse(sessionStorage.getItem(n1)||"")}catch{return[]}},xM=e=>{const t=_M().find(n=>n.id===e);return(t==null?void 0:t.name)??e},NM=e=>{const t=CM().find(n=>n.id===e);return(t==null?void 0:t.name)||e},IM=e=>{const t=EM().find(n=>n.ownerId===e);return(t==null?void 0:t.userName)||e},TM=(e,t)=>{if(e===Ga)return qs;switch(t){case pe.ENTITYID:case pe.ENTITYID_LIST:return xM(e);case pe.USERID:case pe.USERID_LIST:return IM(e);case pe.EVALUATIONID:return NM(e);default:return e}},ui=R.createContext(void 0),kd=({children:e,queryVisualizationContext:t})=>v(ui.Provider,{value:t,children:e});function ht(){const e=R.useContext(ui);if(e===void 0)throw new Error("useQueryVisualizationContext must be used within a QueryWrapper");return e}const ns=ui.Consumer;function ci(e){const{noContentPlaceholderType:t=Qr.INTERACTIVE}=e,{data:n,getLastQueryRequest:a,isFacetsAvailable:r,isLoadingNewBundle:i,hasResettableFilters:o}=gt(),{columnAliases:s={}}=e,[l,c]=R.useState({showColumnFilter:!0,showFacetFilter:!0,showFacetVisualization:e.defaultShowFacetVisualization??!0,showSearchBar:e.defaultShowSearchBar??!1,showDownloadConfirmation:!1,showColumnSelectDropdown:!1,showSqlEditor:!1});R.useEffect(()=>{r||c(_=>({..._,showFacetFilter:!1,showFacetVisualization:!1}))},[r]),R.useEffect(()=>{i&&p([])},[i]);const[u,d]=R.useState([]),[f,p]=R.useState([]),h=a(),m=tx(n==null?void 0:n.selectColumns);R.useEffect(()=>{d((m==null?void 0:m.slice(0,e.visibleColumnCount??1/0).map(_=>_.name))??[])},[m,h.query.sql,e.visibleColumnCount]);const g=R.useCallback(_=>{const S=localStorage.getItem("force-display-original-column-names")==="true";return!_||S?_:s[_]?s[_]:Y1(_)},[s]),b=R.useCallback(()=>{switch(t){case Qr.INTERACTIVE:return o?v(wM,{}):v(SM,{});case Qr.STATIC:default:return v(bM,{})}},[t,o]),E={topLevelControlsState:l,setTopLevelControlsState:c,columnsToShowInTable:u,setColumnsToShowInTable:d,selectedRowIndices:f,setSelectedRowIndices:p,rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,showLastUpdatedOn:e.showLastUpdatedOn,getColumnDisplayName:g,getDisplayValue:TM,NoContentPlaceholder:b},{children:y}=e;return v(kd,{queryVisualizationContext:E,children:y})}try{ci.displayName="QueryVisualizationWrapper",ci.__docgenInfo={description:`QueryVisualizationWrapper manages UI state for components that query tables in Synapse. That state can be accessed
or updated using QueryVisualizationContext. A QueryVisualizationWrapper must be used within a QueryWrapper.`,displayName:"QueryVisualizationWrapper",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},hiddenColumns:{defaultValue:null,description:"",name:"hiddenColumns",required:!1,type:{name:"string[]"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},defaultShowSearchBar:{defaultValue:null,description:"",name:"defaultShowSearchBar",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}try{ui.displayName="QueryVisualizationContext",ui.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryVisualizationContext",props:{}}}catch{}try{kd.displayName="QueryVisualizationContextProvider",kd.__docgenInfo={description:"Provides fields and functions related to visualizing a Synapse table query. For actual query data, see QueryContextProvider.",displayName:"QueryVisualizationContextProvider",props:{queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{ns.displayName="QueryVisualizationContextConsumer",ns.__docgenInfo={description:"",displayName:"QueryVisualizationContextConsumer",props:{}}}catch{}const lc=3,as=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:a}=gt(),{topLevelControlsState:{showSearchBar:r,showFacetFilter:i}}=ht(),[o,s]=R.useState(""),l=R.useRef(null),c=d=>{var f;if(d.preventDefault(),o.trim().length<lc)(f=l.current)==null||f.setCustomValidity(`Search term must have a minimum of ${lc} characters`);else{const p=a(),{additionalFilters:h=[]}=p.query,m={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:o};if(h.find(b=>b.concreteType==m.concreteType&&b.searchExpression==m.searchExpression))return;h.push(m),p.query.additionalFilters=h,n(p),s("")}},u=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return v("div",{className:`QueryWrapperSearchInput ${i?dr:fr}`,children:v(xi,{in:r,timeout:{enter:300,exit:300},children:L("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[L("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:c,children:[v("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:v(De,{icon:"search"})}),v("input",{ref:l,minLength:lc,onChange:u,placeholder:"Enter Search Terms",value:o,type:"text"}),o.length>0&&v("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:v(De,{icon:"close"})})]}),v("div",{className:"QueryWrapperSearchInput__helppopover",children:v(Pn,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{as.displayName="FullTextSearch",as.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}var so=function(e){return e&&e.Math==Math&&e},Fn=so(typeof globalThis=="object"&&globalThis)||so(typeof window=="object"&&window)||so(typeof self=="object"&&self)||so(typeof Yr=="object"&&Yr)||function(){return this}()||Function("return this")(),an=function(e){try{return!!e()}catch{return!0}},PM=an,sl=!PM(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),RM=sl,u_=Function.prototype,Lg=u_.apply,Vg=u_.call,AM=typeof Reflect=="object"&&Reflect.apply||(RM?Vg.bind(Lg):function(){return Vg.apply(Lg,arguments)}),c_=sl,d_=Function.prototype,$d=d_.call,kM=c_&&d_.bind.bind($d,$d),ba=c_?kM:function(e){return function(){return $d.apply(e,arguments)}},f_=ba,$M=f_({}.toString),FM=f_("".slice),p_=function(e){return FM($M(e),8,-1)},DM=p_,OM=ba,h_=function(e){if(DM(e)==="Function")return OM(e)},Fd=typeof document=="object"&&document.all,qM=typeof Fd>"u"&&Fd!==void 0,m_={all:Fd,IS_HTMLDDA:qM},v_=m_,LM=v_.all,Dn=v_.IS_HTMLDDA?function(e){return typeof e=="function"||e===LM}:function(e){return typeof e=="function"},g_={},VM=an,$i=!VM(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),MM=sl,lo=Function.prototype.call,ch=MM?lo.bind(lo):function(){return lo.apply(lo,arguments)},y_={},b_={}.propertyIsEnumerable,w_=Object.getOwnPropertyDescriptor,BM=w_&&!b_.call({1:2},1);y_.f=BM?function(t){var n=w_(this,t);return!!n&&n.enumerable}:b_;var S_=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},UM=ba,zM=an,HM=p_,uc=Object,WM=UM("".split),jM=zM(function(){return!uc("z").propertyIsEnumerable(0)})?function(e){return HM(e)=="String"?WM(e,""):uc(e)}:uc,__=function(e){return e==null},QM=__,GM=TypeError,E_=function(e){if(QM(e))throw GM("Can't call method on "+e);return e},YM=jM,XM=E_,C_=function(e){return YM(XM(e))},Mg=Dn,x_=m_,KM=x_.all,ll=x_.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:Mg(e)||e===KM}:function(e){return typeof e=="object"?e!==null:Mg(e)},N_={},cc=N_,dc=Fn,ZM=Dn,Bg=function(e){return ZM(e)?e:void 0},I_=function(e,t){return arguments.length<2?Bg(cc[e])||Bg(dc[e]):cc[e]&&cc[e][t]||dc[e]&&dc[e][t]},JM=ba,e3=JM({}.isPrototypeOf),t3=typeof navigator<"u"&&String(navigator.userAgent)||"",T_=Fn,fc=t3,Ug=T_.process,zg=T_.Deno,Hg=Ug&&Ug.versions||zg&&zg.version,Wg=Hg&&Hg.v8,Ht,is;Wg&&(Ht=Wg.split("."),is=Ht[0]>0&&Ht[0]<4?1:+(Ht[0]+Ht[1]));!is&&fc&&(Ht=fc.match(/Edge\/(\d+)/),(!Ht||Ht[1]>=74)&&(Ht=fc.match(/Chrome\/(\d+)/),Ht&&(is=+Ht[1])));var r3=is,jg=r3,n3=an,P_=!!Object.getOwnPropertySymbols&&!n3(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&jg&&jg<41}),a3=P_,R_=a3&&!Symbol.sham&&typeof Symbol.iterator=="symbol",i3=I_,o3=Dn,s3=e3,l3=R_,u3=Object,A_=l3?function(e){return typeof e=="symbol"}:function(e){var t=i3("Symbol");return o3(t)&&s3(t.prototype,u3(e))},c3=String,d3=function(e){try{return c3(e)}catch{return"Object"}},f3=Dn,p3=d3,h3=TypeError,k_=function(e){if(f3(e))return e;throw h3(p3(e)+" is not a function")},m3=k_,v3=__,g3=function(e,t){var n=e[t];return v3(n)?void 0:m3(n)},pc=ch,hc=Dn,mc=ll,y3=TypeError,b3=function(e,t){var n,a;if(t==="string"&&hc(n=e.toString)&&!mc(a=pc(n,e))||hc(n=e.valueOf)&&!mc(a=pc(n,e))||t!=="string"&&hc(n=e.toString)&&!mc(a=pc(n,e)))return a;throw y3("Can't convert object to primitive value")},$_={exports:{}},Qg=Fn,w3=Object.defineProperty,S3=function(e,t){try{w3(Qg,e,{value:t,configurable:!0,writable:!0})}catch{Qg[e]=t}return t},_3=Fn,E3=S3,Gg="__core-js_shared__",C3=_3[Gg]||E3(Gg,{}),x3=C3,Yg=x3;($_.exports=function(e,t){return Yg[e]||(Yg[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.27.2",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"});var N3=$_.exports,I3=E_,T3=Object,F_=function(e){return T3(I3(e))},P3=ba,R3=F_,A3=P3({}.hasOwnProperty),dh=Object.hasOwn||function(t,n){return A3(R3(t),n)},k3=ba,$3=0,F3=Math.random(),D3=k3(1 .toString),O3=function(e){return"Symbol("+(e===void 0?"":e)+")_"+D3(++$3+F3,36)},q3=Fn,L3=N3,Xg=dh,V3=O3,M3=P_,B3=R_,Qn=q3.Symbol,vc=L3("wks"),U3=B3?Qn.for||Qn:Qn&&Qn.withoutSetter||V3,z3=function(e){return Xg(vc,e)||(vc[e]=M3&&Xg(Qn,e)?Qn[e]:U3("Symbol."+e)),vc[e]},H3=ch,Kg=ll,Zg=A_,W3=g3,j3=b3,Q3=z3,G3=TypeError,Y3=Q3("toPrimitive"),X3=function(e,t){if(!Kg(e)||Zg(e))return e;var n=W3(e,Y3),a;if(n){if(t===void 0&&(t="default"),a=H3(n,e,t),!Kg(a)||Zg(a))return a;throw G3("Can't convert object to primitive value")}return t===void 0&&(t="number"),j3(e,t)},K3=X3,Z3=A_,D_=function(e){var t=K3(e,"string");return Z3(t)?t:t+""},J3=Fn,Jg=ll,Dd=J3.document,e4=Jg(Dd)&&Jg(Dd.createElement),t4=function(e){return e4?Dd.createElement(e):{}},r4=$i,n4=an,a4=t4,O_=!r4&&!n4(function(){return Object.defineProperty(a4("div"),"a",{get:function(){return 7}}).a!=7}),i4=$i,o4=ch,s4=y_,l4=S_,u4=C_,c4=D_,d4=dh,f4=O_,ey=Object.getOwnPropertyDescriptor;g_.f=i4?ey:function(t,n){if(t=u4(t),n=c4(n),f4)try{return ey(t,n)}catch{}if(d4(t,n))return l4(!o4(s4.f,t,n),t[n])};var p4=an,h4=Dn,m4=/#|\.prototype\./,Fi=function(e,t){var n=g4[v4(e)];return n==b4?!0:n==y4?!1:h4(t)?p4(t):!!t},v4=Fi.normalize=function(e){return String(e).replace(m4,".").toLowerCase()},g4=Fi.data={},y4=Fi.NATIVE="N",b4=Fi.POLYFILL="P",w4=Fi,ty=h_,S4=k_,_4=sl,E4=ty(ty.bind),C4=function(e,t){return S4(e),t===void 0?e:_4?E4(e,t):function(){return e.apply(t,arguments)}},q_={},x4=$i,N4=an,I4=x4&&N4(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),T4=ll,P4=String,R4=TypeError,A4=function(e){if(T4(e))return e;throw R4(P4(e)+" is not an object")},k4=$i,$4=O_,F4=I4,uo=A4,ry=D_,D4=TypeError,gc=Object.defineProperty,O4=Object.getOwnPropertyDescriptor,yc="enumerable",bc="configurable",wc="writable";q_.f=k4?F4?function(t,n,a){if(uo(t),n=ry(n),uo(a),typeof t=="function"&&n==="prototype"&&"value"in a&&wc in a&&!a[wc]){var r=O4(t,n);r&&r[wc]&&(t[n]=a.value,a={configurable:bc in a?a[bc]:r[bc],enumerable:yc in a?a[yc]:r[yc],writable:!1})}return gc(t,n,a)}:gc:function(t,n,a){if(uo(t),n=ry(n),uo(a),$4)try{return gc(t,n,a)}catch{}if("get"in a||"set"in a)throw D4("Accessors not supported");return"value"in a&&(t[n]=a.value),t};var q4=$i,L4=q_,V4=S_,M4=q4?function(e,t,n){return L4.f(e,t,V4(1,n))}:function(e,t,n){return e[t]=n,e},co=Fn,B4=AM,U4=h_,z4=Dn,H4=g_.f,W4=w4,Un=N_,j4=C4,zn=M4,ny=dh,Q4=function(e){var t=function(n,a,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,a)}return new e(n,a,r)}return B4(e,this,arguments)};return t.prototype=e.prototype,t},L_=function(e,t){var n=e.target,a=e.global,r=e.stat,i=e.proto,o=a?co:r?co[n]:(co[n]||{}).prototype,s=a?Un:Un[n]||zn(Un,n,{})[n],l=s.prototype,c,u,d,f,p,h,m,g,b;for(f in t)c=W4(a?f:n+(r?".":"#")+f,e.forced),u=!c&&o&&ny(o,f),h=s[f],u&&(e.dontCallGetSet?(b=H4(o,f),m=b&&b.value):m=o[f]),p=u&&m?m:t[f],!(u&&typeof h==typeof p)&&(e.bind&&u?g=j4(p,co):e.wrap&&u?g=Q4(p):i&&z4(p)?g=U4(p):g=p,(e.sham||p&&p.sham||h&&h.sham)&&zn(g,"sham",!0),zn(s,f,g),i&&(d=n+"Prototype",ny(Un,d)||zn(Un,d,{}),zn(Un[d],f,p),e.real&&l&&(c||!l[f])&&zn(l,f,p)))},G4=Math.ceil,Y4=Math.floor,X4=Math.trunc||function(t){var n=+t;return(n>0?Y4:G4)(n)},K4=X4,V_=function(e){var t=+e;return t!==t||t===0?0:K4(t)},Z4=V_,J4=Math.max,e5=Math.min,M_=function(e,t){var n=Z4(e);return n<0?J4(n+t,0):e5(n,t)},t5=V_,r5=Math.min,n5=function(e){return e>0?r5(t5(e),9007199254740991):0},a5=n5,B_=function(e){return a5(e.length)},i5=C_,o5=M_,s5=B_,ay=function(e){return function(t,n,a){var r=i5(t),i=s5(r),o=o5(a,i),s;if(e&&n!=n){for(;i>o;)if(s=r[o++],s!=s)return!0}else for(;i>o;o++)if((e||o in r)&&r[o]===n)return e||o||0;return!e&&-1}},l5={includes:ay(!0),indexOf:ay(!1)},u5=L_,c5=l5.includes,d5=an,f5=d5(function(){return!Array(1).includes()});u5({target:"Array",proto:!0,forced:f5},{includes:function(t){return c5(this,t,arguments.length>1?arguments[1]:void 0)}});var p5=I_,U_=p5,h5=U_,m5=h5("Array","includes");const v5=Nt(m5);var z_={exports:{}},Ve={};/** @license React v16.9.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(Ve,"__esModule",{value:!0});var yt=typeof Symbol=="function"&&Symbol.for,fh=yt?Symbol.for("react.element"):60103,ph=yt?Symbol.for("react.portal"):60106,ul=yt?Symbol.for("react.fragment"):60107,cl=yt?Symbol.for("react.strict_mode"):60108,dl=yt?Symbol.for("react.profiler"):60114,fl=yt?Symbol.for("react.provider"):60109,pl=yt?Symbol.for("react.context"):60110,hh=yt?Symbol.for("react.async_mode"):60111,hl=yt?Symbol.for("react.concurrent_mode"):60111,ml=yt?Symbol.for("react.forward_ref"):60112,vl=yt?Symbol.for("react.suspense"):60113,g5=yt?Symbol.for("react.suspense_list"):60120,gl=yt?Symbol.for("react.memo"):60115,yl=yt?Symbol.for("react.lazy"):60116,y5=yt?Symbol.for("react.fundamental"):60117,b5=yt?Symbol.for("react.responder"):60118;function Ft(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fh:switch(e=e.type,e){case hh:case hl:case ul:case dl:case cl:case vl:return e;default:switch(e=e&&e.$$typeof,e){case pl:case ml:case fl:return e;default:return t}}case yl:case gl:case ph:return t}}}function H_(e){return Ft(e)===hl}Ve.typeOf=Ft;Ve.AsyncMode=hh;Ve.ConcurrentMode=hl;Ve.ContextConsumer=pl;Ve.ContextProvider=fl;Ve.Element=fh;Ve.ForwardRef=ml;Ve.Fragment=ul;Ve.Lazy=yl;Ve.Memo=gl;Ve.Portal=ph;Ve.Profiler=dl;Ve.StrictMode=cl;Ve.Suspense=vl;Ve.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ul||e===hl||e===dl||e===cl||e===vl||e===g5||typeof e=="object"&&e!==null&&(e.$$typeof===yl||e.$$typeof===gl||e.$$typeof===fl||e.$$typeof===pl||e.$$typeof===ml||e.$$typeof===y5||e.$$typeof===b5)};Ve.isAsyncMode=function(e){return H_(e)||Ft(e)===hh};Ve.isConcurrentMode=H_;Ve.isContextConsumer=function(e){return Ft(e)===pl};Ve.isContextProvider=function(e){return Ft(e)===fl};Ve.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fh};Ve.isForwardRef=function(e){return Ft(e)===ml};Ve.isFragment=function(e){return Ft(e)===ul};Ve.isLazy=function(e){return Ft(e)===yl};Ve.isMemo=function(e){return Ft(e)===gl};Ve.isPortal=function(e){return Ft(e)===ph};Ve.isProfiler=function(e){return Ft(e)===dl};Ve.isStrictMode=function(e){return Ft(e)===cl};Ve.isSuspense=function(e){return Ft(e)===vl};z_.exports=Ve;var iy=z_.exports,w5=z1;function S5(e,t){return w5(e,t)}var W_=S5,_5=Ab;function E5(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?_5(e,void 0,t):[]}var j_=E5,C5=zb,x5=Fb,N5=Db,I5=en,T5=Bs,oy=Hb,P5=Math.min;function R5(e,t,n){for(var a=n?N5:x5,r=e[0].length,i=e.length,o=i,s=Array(i),l=1/0,c=[];o--;){var u=e[o];o&&t&&(u=I5(u,T5(t))),l=P5(u.length,l),s[o]=!n&&(t||r>=120&&u.length>=120)?new C5(o&&u):void 0}u=e[0];var d=-1,f=s[0];e:for(;++d<r&&c.length<l;){var p=u[d],h=t?t(p):p;if(p=n||p!==0?p:0,!(f?oy(f,h):a(c,h,n))){for(o=i;--o;){var m=s[o];if(!(m?oy(m,h):a(e[o],h,n)))continue e}f&&f.push(h),c.push(p)}}return c}var Q_=R5,A5=nl;function k5(e){return A5(e)?e:[]}var G_=k5,$5=en,F5=Q_,D5=nn,O5=G_,q5=CS,L5=D5(function(e){var t=q5(e),n=$5(e,O5);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?F5(n,void 0,t):[]}),Y_=L5,V5=H1,M5=Mb,B5="[object Boolean]";function U5(e){return e===!0||e===!1||M5(e)&&V5(e)==B5}var z5=U5,Kt=W_,H5=oh,mh=Ob,sy=j_,W5=_S,j5=Y_,os=Ip,Sc=z5,ly=e=>Array.isArray(e)?e:[e],Bt=e=>e===void 0,fo=e=>os(e)||Array.isArray(e)?Object.keys(e):[],Gn=(e,t)=>e.hasOwnProperty(t),sa=e=>H5(mh(e)),uy=e=>Bt(e)||Array.isArray(e)&&e.length===0,Q5=(e,t,n,a)=>t&&Gn(t,n)&&e&&Gn(e,n)&&a(e[n],t[n]),_c=(e,t)=>Bt(e)&&t===0||Bt(t)&&e===0||Kt(e,t),G5=(e,t)=>Bt(e)&&t===!1||Bt(t)&&e===!1||Kt(e,t),cy=e=>Bt(e)||Kt(e,{})||e===!0,po=e=>Bt(e)||Kt(e,{}),dy=e=>Bt(e)||os(e)||e===!0||e===!1;function fy(e,t){return uy(e)&&uy(t)?!0:Kt(sa(e),sa(t))}function Y5(e,t){return e=ly(e),t=ly(t),Kt(sa(e),sa(t))}function To(e,t,n,a){var r=mh(fo(e).concat(fo(t)));return po(e)&&po(t)?!0:po(e)&&fo(t).length||po(t)&&fo(e).length?!1:r.every(function(i){var o=e[i],s=t[i];return Array.isArray(o)&&Array.isArray(s)?Kt(sa(e),sa(t)):Array.isArray(o)&&!Array.isArray(s)||Array.isArray(s)&&!Array.isArray(o)?!1:Q5(e,t,i,a)})}function X5(e,t,n,a){return os(e)&&os(t)?a(e,t):Array.isArray(e)&&Array.isArray(t)?To(e,t,n,a):Kt(e,t)}function Ec(e,t,n,a){var r=sy(e,a),i=sy(t,a),o=j5(r,i,a);return o.length===Math.max(r.length,i.length)}var K5={title:Kt,uniqueItems:G5,minLength:_c,minItems:_c,minProperties:_c,required:fy,enum:fy,type:Y5,items:X5,anyOf:Ec,allOf:Ec,oneOf:Ec,properties:To,patternProperties:To,dependencies:To},Z5=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],J5=["additionalProperties","additionalItems","contains","propertyNames","not"];function Od(e,t,n){if(n=W5(n,{ignore:[]}),cy(e)&&cy(t))return!0;if(!dy(e)||!dy(t))throw new Error("Either of the values are not a JSON schema.");if(e===t)return!0;if(Sc(e)&&Sc(t))return e===t;if(e===void 0&&t===!1||t===void 0&&e===!1||Bt(e)&&!Bt(t)||!Bt(e)&&Bt(t))return!1;var a=mh(Object.keys(e).concat(Object.keys(t)));if(n.ignore.length&&(a=a.filter(i=>n.ignore.indexOf(i)===-1)),!a.length)return!0;function r(i,o){return Od(i,o,n)}return a.every(function(i){var o=e[i],s=t[i];if(J5.indexOf(i)!==-1)return Od(o,s,n);var l=K5[i];if(l||(l=Kt),Kt(o,s))return!0;if(Z5.indexOf(i)===-1&&(!Gn(e,i)&&Gn(t,i)||Gn(e,i)&&!Gn(t,i)))return o===s;var c=l(o,s,i,r);if(!Sc(c))throw new Error("Comparer must return true or false");return c})}var e6=Od;function t6(e){return Object.prototype.toString.call(e)==="[object Array]"}var vh=Array.isArray||t6;function r6(e){return(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")&&e.valueOf()===e.valueOf()}var n6=r6,a6=n6;function i6(e){return a6(e)&&e%1===0}var o6=i6,s6=vh,l6=o6;function u6(e){var t;if(!s6(e)||(t=e.length,!t))return!1;for(var n=0;n<t;n++)if(!l6(e[n]))return!1;return!0}var X_=u6;function c6(e){return typeof e=="function"}var K_=c6,d6=vh,py=X_,f6=K_,ho=Math.pow(2,31)-1;function hy(e,t){var n=1,a;if(e===0)return t;if(t===0)return e;for(;e%2===0&&t%2===0;)e=e/2,t=t/2,n=n*2;for(;e%2===0;)e=e/2;for(;t;){for(;t%2===0;)t=t/2;e>t&&(a=t,t=e,e=a),t=t-e}return n*e}function my(e,t){var n=0,a;if(e===0)return t;if(t===0)return e;for(;!(e&1)&&!(t&1);)e>>>=1,t>>>=1,n++;for(;!(e&1);)e>>>=1;for(;t;){for(;!(t&1);)t>>>=1;e>t&&(a=t,t=e,e=a),t=t-e}return e<<n}function p6(){var e=arguments.length,t,n,a,r,i,o,s;for(t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(py(t)){if(e===2)return i=t[0],o=t[1],i<0&&(i=-i),o<0&&(o=-o),i<=ho&&o<=ho?my(i,o):hy(i,o);a=t}else if(d6(t[0]))if(e>1){if(a=t[0],n=t[1],!f6(n))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+n+"`.")}else a=t[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+t[0]+"`.");if(r=a.length,r<2)return null;if(n){for(i=new Array(r),s=0;s<r;s++)i[s]=n(a[s],s);a=i}if(e<3&&!py(a))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+a+"`.");for(s=0;s<r;s++)i=a[s],i<0&&(a[s]=-i);for(i=a[0],s=1;s<r;s++)o=a[s],o<=ho&&i<=ho?i=my(i,o):i=hy(i,o);return i}var h6=p6,vy=h6,m6=vh,gy=X_,v6=K_;function g6(){var e=arguments.length,t,n,a,r,i,o,s;for(t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(gy(t)){if(e===2)return i=t[0],o=t[1],i<0&&(i=-i),o<0&&(o=-o),i===0||o===0?0:i/vy(i,o)*o;a=t}else if(m6(t[0]))if(e>1){if(a=t[0],n=t[1],!v6(n))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+n+"`.")}else a=t[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+t[0]+"`.");if(r=a.length,r<2)return null;if(n){for(i=new Array(r),s=0;s<r;s++)i[s]=n(a[s],s);a=i}if(e<3&&!gy(a))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+a+"`.");for(s=0;s<r;s++)i=a[s],i<0&&(a[s]=-i);for(i=a[0],s=1;s<r;s++){if(o=a[s],i===0||o===0)return 0;i=i/vy(i,o)*o}return i}var y6=g6,b6=ih,yy=Ni;function Z_(e,t,n,a,r,i){return yy(e)&&yy(t)&&(i.set(t,e),b6(e,t,void 0,Z_,i),i.delete(t)),e}var w6=Z_,S6=ih,_6=TS,E6=_6(function(e,t,n,a){S6(e,t,n,a)}),C6=E6,x6=dS,N6=nn,I6=w6,T6=C6,P6=N6(function(e){return e.push(void 0,I6),x6(T6,void 0,e)}),R6=P6,A6=rl,k6=1/0;function $6(e){var t=e==null?0:e.length;return t?A6(e,k6):[]}var F6=$6,D6=en,O6=Q_,q6=nn,L6=G_,V6=q6(function(e){var t=D6(e,L6);return t.length&&t[0]===e[0]?O6(t):[]}),M6=V6;function B6(e,t,n,a){for(var r=n-1,i=e.length;++r<i;)if(a(e[r],t))return r;return-1}var U6=B6,z6=en,H6=I1,W6=U6,j6=Bs,Q6=kb,G6=Array.prototype,by=G6.splice;function Y6(e,t,n,a){var r=a?W6:H6,i=-1,o=t.length,s=e;for(e===t&&(t=Q6(t)),n&&(s=z6(e,j6(n)));++i<o;)for(var l=0,c=t[i],u=n?n(c):c;(l=r(s,u,l,a))>-1;)s!==e&&by.call(s,l,1),by.call(e,l,1);return e}var X6=Y6,K6=X6;function Z6(e,t){return e&&e.length&&t&&t.length?K6(e,t):e}var J6=Z6,eB=zb,tB=Fb,rB=Db,nB=en,aB=Bs,iB=Hb,oB=200;function sB(e,t,n,a){var r=-1,i=tB,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=nB(t,aB(n))),a?(i=rB,o=!1):t.length>=oB&&(i=iB,o=!1,t=new eB(t));e:for(;++r<s;){var u=e[r],d=n==null?u:n(u);if(u=a||u!==0?u:0,o&&d===d){for(var f=c;f--;)if(t[f]===d)continue e;l.push(u)}else i(t,d,a)||l.push(u)}return l}var lB=sB,uB=lB,cB=nn,dB=nl,fB=cB(function(e,t){return dB(e)?uB(e,t):[]}),pB=fB,J_=$b,di=e6,hB=y6,mB=R6,gh=nh,yh=F6,vB=M6,gB=Y_,qd=W_,fi=Ip,wy=J6,eE=oh,tE=th,bh=Ob,yn=j_,yB=pB,Sy=(e,...t)=>yB.apply(null,[e].concat(gh(t))),bB=e=>yr(oE,e),wB=e=>yr(sE,e),yr=(e,t)=>e.indexOf(t)!==-1,SB=e=>!dn(e).length&&e!==!1&&e!==!0,Ld=e=>fi(e)||e===!0||e===!1,_B=e=>e===!1,rE=e=>e===!0,bl=(e,t,n)=>n(e),nE=e=>eE(bh(yh(e))),Tn=e=>e!==void 0,wh=e=>bh(yh(e.map(dn))),wa=e=>e[0],EB=e=>nE(e),Di=e=>Math.max.apply(Math,e),Oi=e=>Math.min.apply(Math,e),CB=e=>e.some(rE),xB=e=>yn(gh(e),qd);function NB(e){return function(t,n){return di({[e]:t},{[e]:n})}}function aE(e){if(Array.isArray(e.allOf)){var t=e.allOf;return delete e.allOf,[e].concat(t.map(function(n){return aE(n)}))}else return[e]}function Sh(e,t){return e.map(function(n){return n&&n[t]})}function IB(e,t){return e.map(function(n){if(n)if(Array.isArray(n.items)){var a=n.items[t];if(Ld(a))return a;if(n.hasOwnProperty("additionalItems"))return n.additionalItems}else return n.items})}function TB(e,t){return e.map(function(n,a){try{return t(n,a)}catch{return}}).filter(Tn)}function PB(e){return e.map(function(t){if(t)return Array.isArray(t.items)?t.additionalItems:t.items})}function dn(e){return fi(e)||Array.isArray(e)?Object.keys(e):[]}function Vd(e,t){if(t=t||[],!e.length)return t;var n=e.slice(0).shift(),a=e.slice(1);return t.length?Vd(a,gh(t.map(r=>n.map(i=>[i].concat(r))))):Vd(a,n.map(r=>r))}function RB(e,t){return Array.isArray(e)?(e.splice.apply(e,[0,0].concat(t)),e):t}function iE(e,t){var n;try{n=e.map(function(a){return JSON.stringify(a,null,2)}).join(`
`)}catch{n=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+`". They are probably incompatible. Values: 
`+n)}function AB(e){for(var t in e)e.hasOwnProperty(t)&&SB(e[t])&&delete e[t];return e}function Md(e,t,n){return function(a,r){if(r===void 0)throw new Error("You need to call merger with a key for the property name or index if array.");return r=String(r),e(a,null,n.concat(t,r))}}function _y(e,t,n,a,r,i){if(e.length){var o=r.resolvers[t];if(!o)throw new Error("No resolver found for "+t);var s=yn(n.map(function(d){return e.reduce(function(f,p){return d[p]!==void 0&&(f[p]=d[p]),f},{})}).filter(Tn),di),l=t==="properties"?oE:sE,c=l.reduce(function(d,f){return yr(Bd,f)?d[f]=Md(a,f,i):d[f]=function(p){return a(p,null,i.concat(f))},d},{});t==="items"&&(c.itemsArray=Md(a,"items",i),c.items=function(d){return a(d,null,i.concat("items"))});var u=o(s,i.concat(t),c,r);return fi(u)||iE(s,i.concat(t)),AB(u)}}function Cc(e,t,n){var a=wh(n||e),r=n?IB:Sh;return a.reduce(function(i,o){var s=r(e,o),l=yn(s.filter(Tn),di);return i[o]=t(l,o),i},n?[]:{})}function kB(e){tE(e,function(t,n){t===!1&&delete e[n]})}function $B(e){tE(e,function(t,n){t===!1&&e.splice(n,1)})}function FB(e){return{required:e}}var oE=["properties","patternProperties","additionalProperties"],sE=["items","additionalItems"],Bd=["properties","patternProperties","definitions","dependencies"],Ey=["anyOf","oneOf"],DB=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Ue={type(e){if(e.some(Array.isArray)){var t=e.map(function(a){return Array.isArray(a)?a:[a]}),n=vB.apply(null,t);if(n.length===1)return n[0];if(n.length>1)return bh(n)}},properties(e,t,n,a){a.ignoreAdditionalProperties||(e.forEach(function(i){var o=e.filter(u=>u!==i),s=dn(i.properties),l=dn(i.patternProperties),c=l.map(u=>new RegExp(u));o.forEach(function(u){var d=dn(u.properties),f=d.filter(h=>c.some(m=>m.test(h))),p=Sy(d,s,f);p.forEach(function(h){u.properties[h]=n.properties([u.properties[h],i.additionalProperties],h)})})}),e.forEach(function(i){var o=e.filter(l=>l!==i),s=dn(i.patternProperties);i.additionalProperties===!1&&o.forEach(function(l){var c=dn(l.patternProperties),u=Sy(c,s);u.forEach(d=>delete l.patternProperties[d])})}));var r={additionalProperties:n.additionalProperties(e.map(i=>i.additionalProperties)),patternProperties:Cc(e.map(i=>i.patternProperties),n.patternProperties),properties:Cc(e.map(i=>i.properties),n.properties)};return r.additionalProperties===!1&&kB(r.properties),r},dependencies(e,t,n){var a=wh(e);return a.reduce(function(r,i){var o=Sh(e,i),s=yn(o.filter(Tn),qd),l=s.filter(Array.isArray);if(l.length){if(l.length===s.length)r[i]=nE(s);else{var c=s.filter(Ld),u=l.map(FB);r[i]=n(c.concat(u),i)}return r}return s=yn(s,di),r[i]=n(s,i),r},{})},items(e,t,n){var a=e.map(s=>s.items),r=a.filter(Tn),i={};r.every(Ld)?i.items=n.items(a):i.items=Cc(e,n.itemsArray,a);var o;return r.every(Array.isArray)?o=e.map(s=>s.additionalItems):r.some(Array.isArray)&&(o=PB(e)),o&&(i.additionalItems=n.additionalItems(o)),i.additionalItems===!1&&Array.isArray(i.items)&&$B(i.items),i},oneOf(e,t,n){var a=Vd(J_(e)),r=TB(a,n),i=yn(r,di);if(i.length)return i},not(e){return{anyOf:e}},pattern(e,t,n,a,r){var i=t.pop();r(e.map(function(o){return{[i]:o}}))},multipleOf(e){for(var t=e.slice(0),n=1;t.some(a=>!Number.isInteger(a));)t=t.map(a=>a*10),n=n*10;return hB(t)/n},enum(e){var t=gB.apply(null,e.concat(qd));if(t.length)return eE(t)}};Ue.$id=wa;Ue.$ref=wa;Ue.$schema=wa;Ue.additionalItems=bl;Ue.additionalProperties=bl;Ue.anyOf=Ue.oneOf;Ue.contains=bl;Ue.default=wa;Ue.definitions=Ue.dependencies;Ue.description=wa;Ue.examples=xB;Ue.exclusiveMaximum=Oi;Ue.exclusiveMinimum=Di;Ue.maximum=Oi;Ue.maxItems=Oi;Ue.maxLength=Oi;Ue.maxProperties=Oi;Ue.minimum=Di;Ue.minItems=Di;Ue.minLength=Di;Ue.minProperties=Di;Ue.propertyNames=bl;Ue.required=EB;Ue.title=wa;Ue.uniqueItems=CB;function _h(e,t,n){t=mB(t,{ignoreAdditionalProperties:!1,resolvers:Ue});function a(o,s,l){o=J_(o.filter(Tn)),l=l||[];var c=fi(s)?s:{};if(!o.length)return;if(o.some(_B))return!1;if(o.every(rE))return!0;o=o.filter(fi);var u=wh(o);if(yr(u,"allOf"))return _h({allOf:o},t);var d=u.filter(bB);wy(u,d);var f=u.filter(wB);wy(u,f),u.forEach(function(h){var m=Sh(o,h),g=yn(m.filter(Tn),NB(h));if(g.length===1&&yr(Ey,h))c[h]=g[0].map(function(_){return a([_],_)});else if(g.length===1&&!yr(Bd,h)&&!yr(DB,h))c[h]=g[0];else{var b=t.resolvers[h]||t.resolvers.defaultResolver;if(!b)throw new Error("No resolver found for key "+h+". You can provide a resolver for this keyword in the options, or provide a default resolver.");var E;yr(Bd,h)||yr(Ey,h)?E=Md(a,h,l):E=function(_){return a(_,null,l.concat(h))};var y=!1;c[h]=b(g,l.concat(h),E,t,function(_){return y=Array.isArray(_),p(_)}),c[h]===void 0&&!y?iE(g,l.concat(h)):c[h]===void 0&&delete c[h]}}),Object.assign(c,_y(d,"properties",o,a,t,l)),Object.assign(c,_y(f,"items",o,a,t,l));function p(h){c.allOf=RB(c.allOf,h)}return c}var r=yh(aE(e)),i=a(r,e);return i}_h.options={resolvers:Ue};var OB=_h;const qB=Nt(OB);var LB=F_,Cy=M_,VB=B_,MB=function(t){for(var n=LB(this),a=VB(n),r=arguments.length,i=Cy(r>1?arguments[1]:void 0,a),o=r>2?arguments[2]:void 0,s=o===void 0?a:Cy(o,a);s>i;)n[i++]=t;return n},BB=L_,UB=MB;BB({target:"Array",proto:!0},{fill:UB});var zB=U_,HB=zB("Array","fill"),WB=HB,jB=WB,QB=jB,GB=QB,YB=GB,XB=YB,KB=XB;const ZB=Nt(KB);var wl={},JB=/~/,e9=/~[01]/g;function t9(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function lE(e){return JB.test(e)?e.replace(e9,t9):e}function r9(e,t,n){for(var a,r,i=1,o=t.length;i<o;){if(t[i]==="constructor"||t[i]==="prototype"||t[i]==="__proto__")return e;if(a=lE(t[i++]),r=o>i,typeof e[a]>"u"&&(Array.isArray(e)&&a==="-"&&(a=e.length),r&&(t[i]!==""&&t[i]<1/0||t[i]==="-"?e[a]=[]:e[a]={})),!r)break;e=e[a]}var s=e[a];return n===void 0?delete e[a]:e[a]=n,s}function Eh(e){if(typeof e=="string"){if(e=e.split("/"),e[0]==="")return e;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(e)){for(const t of e)if(typeof t!="string"&&typeof t!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function uE(e,t){if(typeof e!="object")throw new Error("Invalid input object.");t=Eh(t);var n=t.length;if(n===1)return e;for(var a=1;a<n;){if(e=e[lE(t[a++])],n===a)return e;if(typeof e!="object"||e===null)return}}function cE(e,t,n){if(typeof e!="object")throw new Error("Invalid input object.");if(t=Eh(t),t.length===0)throw new Error("Invalid JSON pointer for set.");return r9(e,t,n)}function n9(e){var t=Eh(e);return{get:function(n){return uE(n,t)},set:function(n,a){return cE(n,t,a)}}}wl.get=uE;wl.set=cE;wl.compile=n9;var Ud={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,a){a(t)})(Yr,function(n){function a(){for(var M=arguments.length,D=Array(M),U=0;U<M;U++)D[U]=arguments[U];if(D.length>1){D[0]=D[0].slice(0,-1);for(var W=D.length-1,H=1;H<W;++H)D[H]=D[H].slice(1,-1);return D[W]=D[W].slice(1),D.join("")}else return D[0]}function r(M){return"(?:"+M+")"}function i(M){return M===void 0?"undefined":M===null?"null":Object.prototype.toString.call(M).split(" ").pop().split("]").shift().toLowerCase()}function o(M){return M.toUpperCase()}function s(M){return M!=null?M instanceof Array?M:typeof M.length!="number"||M.split||M.setInterval||M.call?[M]:Array.prototype.slice.call(M):[]}function l(M,D){var U=M;if(D)for(var W in D)U[W]=D[W];return U}function c(M){var D="[A-Za-z]",U="[0-9]",W=a(U,"[A-Fa-f]"),H=r(r("%[EFef]"+W+"%"+W+W+"%"+W+W)+"|"+r("%[89A-Fa-f]"+W+"%"+W+W)+"|"+r("%"+W+W)),se="[\\:\\/\\?\\#\\[\\]\\@]",de="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ae=a(se,de),Ge=M?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",et=M?"[\\uE000-\\uF8FF]":"[]",Te=a(D,U,"[\\-\\.\\_\\~]",Ge);r(D+a(D,U,"[\\+\\-\\.]")+"*"),r(r(H+"|"+a(Te,de,"[\\:]"))+"*");var Be=r(r("25[0-5]")+"|"+r("2[0-4]"+U)+"|"+r("1"+U+U)+"|"+r("0?[1-9]"+U)+"|0?0?"+U),tt=r(Be+"\\."+Be+"\\."+Be+"\\."+Be),be=r(W+"{1,4}"),Ke=r(r(be+"\\:"+be)+"|"+tt),at=r(r(be+"\\:")+"{6}"+Ke),Ze=r("\\:\\:"+r(be+"\\:")+"{5}"+Ke),er=r(r(be)+"?\\:\\:"+r(be+"\\:")+"{4}"+Ke),Tt=r(r(r(be+"\\:")+"{0,1}"+be)+"?\\:\\:"+r(be+"\\:")+"{3}"+Ke),qt=r(r(r(be+"\\:")+"{0,2}"+be)+"?\\:\\:"+r(be+"\\:")+"{2}"+Ke),Rr=r(r(r(be+"\\:")+"{0,3}"+be)+"?\\:\\:"+be+"\\:"+Ke),hr=r(r(r(be+"\\:")+"{0,4}"+be)+"?\\:\\:"+Ke),wt=r(r(r(be+"\\:")+"{0,5}"+be)+"?\\:\\:"+be),St=r(r(r(be+"\\:")+"{0,6}"+be)+"?\\:\\:"),sn=r([at,Ze,er,Tt,qt,Rr,hr,wt,St].join("|")),mr=r(r(Te+"|"+H)+"+");r("[vV]"+W+"+\\."+a(Te,de,"[\\:]")+"+"),r(r(H+"|"+a(Te,de))+"*");var Ca=r(H+"|"+a(Te,de,"[\\:\\@]"));return r(r(H+"|"+a(Te,de,"[\\@]"))+"+"),r(r(Ca+"|"+a("[\\/\\?]",et))+"*"),{NOT_SCHEME:new RegExp(a("[^]",D,U,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(a("[^\\%\\:]",Te,de),"g"),NOT_HOST:new RegExp(a("[^\\%\\[\\]\\:]",Te,de),"g"),NOT_PATH:new RegExp(a("[^\\%\\/\\:\\@]",Te,de),"g"),NOT_PATH_NOSCHEME:new RegExp(a("[^\\%\\/\\@]",Te,de),"g"),NOT_QUERY:new RegExp(a("[^\\%]",Te,de,"[\\:\\@\\/\\?]",et),"g"),NOT_FRAGMENT:new RegExp(a("[^\\%]",Te,de,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(a("[^]",Te,de),"g"),UNRESERVED:new RegExp(Te,"g"),OTHER_CHARS:new RegExp(a("[^\\%]",Te,Ae),"g"),PCT_ENCODED:new RegExp(H,"g"),IPV4ADDRESS:new RegExp("^("+tt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+sn+")"+r(r("\\%25|\\%(?!"+W+"{2})")+"("+mr+")")+"?\\]?$")}}var u=c(!1),d=c(!0),f=function(){function M(D,U){var W=[],H=!0,se=!1,de=void 0;try{for(var Ae=D[Symbol.iterator](),Ge;!(H=(Ge=Ae.next()).done)&&(W.push(Ge.value),!(U&&W.length===U));H=!0);}catch(et){se=!0,de=et}finally{try{!H&&Ae.return&&Ae.return()}finally{if(se)throw de}}return W}return function(D,U){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return M(D,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(M){if(Array.isArray(M)){for(var D=0,U=Array(M.length);D<M.length;D++)U[D]=M[D];return U}else return Array.from(M)},h=2147483647,m=36,g=1,b=26,E=38,y=700,_=72,S=128,w="-",C=/^xn--/,N=/[^\0-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,A=Math.floor,I=String.fromCharCode;function x(M){throw new RangeError(P[M])}function F(M,D){for(var U=[],W=M.length;W--;)U[W]=D(M[W]);return U}function O(M,D){var U=M.split("@"),W="";U.length>1&&(W=U[0]+"@",M=U[1]),M=M.replace(T,".");var H=M.split("."),se=F(H,D).join(".");return W+se}function $(M){for(var D=[],U=0,W=M.length;U<W;){var H=M.charCodeAt(U++);if(H>=55296&&H<=56319&&U<W){var se=M.charCodeAt(U++);(se&64512)==56320?D.push(((H&1023)<<10)+(se&1023)+65536):(D.push(H),U--)}else D.push(H)}return D}var V=function(D){return String.fromCodePoint.apply(String,p(D))},q=function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:m},B=function(D,U){return D+22+75*(D<26)-((U!=0)<<5)},j=function(D,U,W){var H=0;for(D=W?A(D/y):D>>1,D+=A(D/U);D>k*b>>1;H+=m)D=A(D/k);return A(H+(k+1)*D/(D+E))},Q=function(D){var U=[],W=D.length,H=0,se=S,de=_,Ae=D.lastIndexOf(w);Ae<0&&(Ae=0);for(var Ge=0;Ge<Ae;++Ge)D.charCodeAt(Ge)>=128&&x("not-basic"),U.push(D.charCodeAt(Ge));for(var et=Ae>0?Ae+1:0;et<W;){for(var Te=H,Be=1,tt=m;;tt+=m){et>=W&&x("invalid-input");var be=q(D.charCodeAt(et++));(be>=m||be>A((h-H)/Be))&&x("overflow"),H+=be*Be;var Ke=tt<=de?g:tt>=de+b?b:tt-de;if(be<Ke)break;var at=m-Ke;Be>A(h/at)&&x("overflow"),Be*=at}var Ze=U.length+1;de=j(H-Te,Ze,Te==0),A(H/Ze)>h-se&&x("overflow"),se+=A(H/Ze),H%=Ze,U.splice(H++,0,se)}return String.fromCodePoint.apply(String,U)},X=function(D){var U=[];D=$(D);var W=D.length,H=S,se=0,de=_,Ae=!0,Ge=!1,et=void 0;try{for(var Te=D[Symbol.iterator](),Be;!(Ae=(Be=Te.next()).done);Ae=!0){var tt=Be.value;tt<128&&U.push(I(tt))}}catch(xa){Ge=!0,et=xa}finally{try{!Ae&&Te.return&&Te.return()}finally{if(Ge)throw et}}var be=U.length,Ke=be;for(be&&U.push(w);Ke<W;){var at=h,Ze=!0,er=!1,Tt=void 0;try{for(var qt=D[Symbol.iterator](),Rr;!(Ze=(Rr=qt.next()).done);Ze=!0){var hr=Rr.value;hr>=H&&hr<at&&(at=hr)}}catch(xa){er=!0,Tt=xa}finally{try{!Ze&&qt.return&&qt.return()}finally{if(er)throw Tt}}var wt=Ke+1;at-H>A((h-se)/wt)&&x("overflow"),se+=(at-H)*wt,H=at;var St=!0,sn=!1,mr=void 0;try{for(var Ca=D[Symbol.iterator](),Uh;!(St=(Uh=Ca.next()).done);St=!0){var zh=Uh.value;if(zh<H&&++se>h&&x("overflow"),zh==H){for(var zi=se,Hi=m;;Hi+=m){var Wi=Hi<=de?g:Hi>=de+b?b:Hi-de;if(zi<Wi)break;var Hh=zi-Wi,Wh=m-Wi;U.push(I(B(Wi+Hh%Wh,0))),zi=A(Hh/Wh)}U.push(I(B(zi,0))),de=j(se,wt,Ke==be),se=0,++Ke}}}catch(xa){sn=!0,mr=xa}finally{try{!St&&Ca.return&&Ca.return()}finally{if(sn)throw mr}}++se,++H}return U.join("")},Y=function(D){return O(D,function(U){return C.test(U)?Q(U.slice(4).toLowerCase()):U})},Z=function(D){return O(D,function(U){return N.test(U)?"xn--"+X(U):U})},J={version:"2.1.0",ucs2:{decode:$,encode:V},decode:Q,encode:X,toASCII:Z,toUnicode:Y},ae={};function ie(M){var D=M.charCodeAt(0),U=void 0;return D<16?U="%0"+D.toString(16).toUpperCase():D<128?U="%"+D.toString(16).toUpperCase():D<2048?U="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():U="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),U}function ye(M){for(var D="",U=0,W=M.length;U<W;){var H=parseInt(M.substr(U+1,2),16);if(H<128)D+=String.fromCharCode(H),U+=3;else if(H>=194&&H<224){if(W-U>=6){var se=parseInt(M.substr(U+4,2),16);D+=String.fromCharCode((H&31)<<6|se&63)}else D+=M.substr(U,6);U+=6}else if(H>=224){if(W-U>=9){var de=parseInt(M.substr(U+4,2),16),Ae=parseInt(M.substr(U+7,2),16);D+=String.fromCharCode((H&15)<<12|(de&63)<<6|Ae&63)}else D+=M.substr(U,9);U+=9}else D+=M.substr(U,3),U+=3}return D}function oe(M,D){function U(W){var H=ye(W);return H.match(D.UNRESERVED)?H:W}return M.scheme&&(M.scheme=String(M.scheme).replace(D.PCT_ENCODED,U).toLowerCase().replace(D.NOT_SCHEME,"")),M.userinfo!==void 0&&(M.userinfo=String(M.userinfo).replace(D.PCT_ENCODED,U).replace(D.NOT_USERINFO,ie).replace(D.PCT_ENCODED,o)),M.host!==void 0&&(M.host=String(M.host).replace(D.PCT_ENCODED,U).toLowerCase().replace(D.NOT_HOST,ie).replace(D.PCT_ENCODED,o)),M.path!==void 0&&(M.path=String(M.path).replace(D.PCT_ENCODED,U).replace(M.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,ie).replace(D.PCT_ENCODED,o)),M.query!==void 0&&(M.query=String(M.query).replace(D.PCT_ENCODED,U).replace(D.NOT_QUERY,ie).replace(D.PCT_ENCODED,o)),M.fragment!==void 0&&(M.fragment=String(M.fragment).replace(D.PCT_ENCODED,U).replace(D.NOT_FRAGMENT,ie).replace(D.PCT_ENCODED,o)),M}function ge(M){return M.replace(/^0*(.*)/,"$1")||"0"}function Re(M,D){var U=M.match(D.IPV4ADDRESS)||[],W=f(U,2),H=W[1];return H?H.split(".").map(ge).join("."):M}function me(M,D){var U=M.match(D.IPV6ADDRESS)||[],W=f(U,3),H=W[1],se=W[2];if(H){for(var de=H.toLowerCase().split("::").reverse(),Ae=f(de,2),Ge=Ae[0],et=Ae[1],Te=et?et.split(":").map(ge):[],Be=Ge.split(":").map(ge),tt=D.IPV4ADDRESS.test(Be[Be.length-1]),be=tt?7:8,Ke=Be.length-be,at=Array(be),Ze=0;Ze<be;++Ze)at[Ze]=Te[Ze]||Be[Ke+Ze]||"";tt&&(at[be-1]=Re(at[be-1],D));var er=at.reduce(function(wt,St,sn){if(!St||St==="0"){var mr=wt[wt.length-1];mr&&mr.index+mr.length===sn?mr.length++:wt.push({index:sn,length:1})}return wt},[]),Tt=er.sort(function(wt,St){return St.length-wt.length})[0],qt=void 0;if(Tt&&Tt.length>1){var Rr=at.slice(0,Tt.index),hr=at.slice(Tt.index+Tt.length);qt=Rr.join(":")+"::"+hr.join(":")}else qt=at.join(":");return se&&(qt+="%"+se),qt}else return M}var te=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,he="".match(/(){0}/)[1]===void 0;function we(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U={},W=D.iri!==!1?d:u;D.reference==="suffix"&&(M=(D.scheme?D.scheme+":":"")+"//"+M);var H=M.match(te);if(H){he?(U.scheme=H[1],U.userinfo=H[3],U.host=H[4],U.port=parseInt(H[5],10),U.path=H[6]||"",U.query=H[7],U.fragment=H[8],isNaN(U.port)&&(U.port=H[5])):(U.scheme=H[1]||void 0,U.userinfo=M.indexOf("@")!==-1?H[3]:void 0,U.host=M.indexOf("//")!==-1?H[4]:void 0,U.port=parseInt(H[5],10),U.path=H[6]||"",U.query=M.indexOf("?")!==-1?H[7]:void 0,U.fragment=M.indexOf("#")!==-1?H[8]:void 0,isNaN(U.port)&&(U.port=M.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?H[4]:void 0)),U.host&&(U.host=me(Re(U.host,W),W)),U.scheme===void 0&&U.userinfo===void 0&&U.host===void 0&&U.port===void 0&&!U.path&&U.query===void 0?U.reference="same-document":U.scheme===void 0?U.reference="relative":U.fragment===void 0?U.reference="absolute":U.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==U.reference&&(U.error=U.error||"URI is not a "+D.reference+" reference.");var se=ae[(D.scheme||U.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!se||!se.unicodeSupport)){if(U.host&&(D.domainHost||se&&se.domainHost))try{U.host=J.toASCII(U.host.replace(W.PCT_ENCODED,ye).toLowerCase())}catch(de){U.error=U.error||"Host's domain name can not be converted to ASCII via punycode: "+de}oe(U,u)}else oe(U,W);se&&se.parse&&se.parse(U,D)}else U.error=U.error||"URI can not be parsed.";return U}function ne(M,D){var U=D.iri!==!1?d:u,W=[];return M.userinfo!==void 0&&(W.push(M.userinfo),W.push("@")),M.host!==void 0&&W.push(me(Re(String(M.host),U),U).replace(U.IPV6ADDRESS,function(H,se,de){return"["+se+(de?"%25"+de:"")+"]"})),(typeof M.port=="number"||typeof M.port=="string")&&(W.push(":"),W.push(String(M.port))),W.length?W.join(""):void 0}var Ye=/^\.\.?\//,ke=/^\/\.(\/|$)/,ze=/^\/\.\.(\/|$)/,lt=/^\/?(?:.|\n)*?(?=\/|$)/;function $e(M){for(var D=[];M.length;)if(M.match(Ye))M=M.replace(Ye,"");else if(M.match(ke))M=M.replace(ke,"/");else if(M.match(ze))M=M.replace(ze,"/"),D.pop();else if(M==="."||M==="..")M="";else{var U=M.match(lt);if(U){var W=U[0];M=M.slice(W.length),D.push(W)}else throw new Error("Unexpected dot segment condition")}return D.join("")}function ee(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=D.iri?d:u,W=[],H=ae[(D.scheme||M.scheme||"").toLowerCase()];if(H&&H.serialize&&H.serialize(M,D),M.host&&!U.IPV6ADDRESS.test(M.host)){if(D.domainHost||H&&H.domainHost)try{M.host=D.iri?J.toUnicode(M.host):J.toASCII(M.host.replace(U.PCT_ENCODED,ye).toLowerCase())}catch(Ae){M.error=M.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+Ae}}oe(M,U),D.reference!=="suffix"&&M.scheme&&(W.push(M.scheme),W.push(":"));var se=ne(M,D);if(se!==void 0&&(D.reference!=="suffix"&&W.push("//"),W.push(se),M.path&&M.path.charAt(0)!=="/"&&W.push("/")),M.path!==void 0){var de=M.path;!D.absolutePath&&(!H||!H.absolutePath)&&(de=$e(de)),se===void 0&&(de=de.replace(/^\/\//,"/%2F")),W.push(de)}return M.query!==void 0&&(W.push("?"),W.push(M.query)),M.fragment!==void 0&&(W.push("#"),W.push(M.fragment)),W.join("")}function ce(M,D){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},W=arguments[3],H={};return W||(M=we(ee(M,U),U),D=we(ee(D,U),U)),U=U||{},!U.tolerant&&D.scheme?(H.scheme=D.scheme,H.userinfo=D.userinfo,H.host=D.host,H.port=D.port,H.path=$e(D.path||""),H.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(H.userinfo=D.userinfo,H.host=D.host,H.port=D.port,H.path=$e(D.path||""),H.query=D.query):(D.path?(D.path.charAt(0)==="/"?H.path=$e(D.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?H.path="/"+D.path:M.path?H.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+D.path:H.path=D.path,H.path=$e(H.path)),H.query=D.query):(H.path=M.path,D.query!==void 0?H.query=D.query:H.query=M.query),H.userinfo=M.userinfo,H.host=M.host,H.port=M.port),H.scheme=M.scheme),H.fragment=D.fragment,H}function fe(M,D,U){var W=l({scheme:"null"},U);return ee(ce(we(M,W),we(D,W),W,!0),W)}function Ne(M,D){return typeof M=="string"?M=ee(we(M,D),D):i(M)==="object"&&(M=we(ee(M,D),D)),M}function ve(M,D,U){return typeof M=="string"?M=ee(we(M,U),U):i(M)==="object"&&(M=ee(M,U)),typeof D=="string"?D=ee(we(D,U),U):i(D)==="object"&&(D=ee(D,U)),M===D}function pt(M,D){return M&&M.toString().replace(!D||!D.iri?u.ESCAPE:d.ESCAPE,ie)}function Se(M,D){return M&&M.toString().replace(!D||!D.iri?u.PCT_ENCODED:d.PCT_ENCODED,ye)}var He={scheme:"http",domainHost:!0,parse:function(D,U){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},serialize:function(D,U){var W=String(D.scheme).toLowerCase()==="https";return(D.port===(W?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D}},Me={scheme:"https",domainHost:He.domainHost,parse:He.parse,serialize:He.serialize};function K(M){return typeof M.secure=="boolean"?M.secure:String(M.scheme).toLowerCase()==="wss"}var re={scheme:"ws",domainHost:!0,parse:function(D,U){var W=D;return W.secure=K(W),W.resourceName=(W.path||"/")+(W.query?"?"+W.query:""),W.path=void 0,W.query=void 0,W},serialize:function(D,U){if((D.port===(K(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var W=D.resourceName.split("?"),H=f(W,2),se=H[0],de=H[1];D.path=se&&se!=="/"?se:void 0,D.query=de,D.resourceName=void 0}return D.fragment=void 0,D}},Ee={scheme:"wss",domainHost:re.domainHost,parse:re.parse,serialize:re.serialize},Ie={},Qe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Xe="[0-9A-Fa-f]",Dt=r(r("%[EFef]"+Xe+"%"+Xe+Xe+"%"+Xe+Xe)+"|"+r("%[89A-Fa-f]"+Xe+"%"+Xe+Xe)+"|"+r("%"+Xe+Xe)),Ot="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",_a="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Li=a(_a,'[\\"\\\\]'),pr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Tl=new RegExp(Qe,"g"),Pr=new RegExp(Dt,"g"),Pl=new RegExp(a("[^]",Ot,"[\\.]",'[\\"]',Li),"g"),Vi=new RegExp(a("[^]",Qe,pr),"g"),Rl=Vi;function Ea(M){var D=ye(M);return D.match(Tl)?D:M}var Mi={scheme:"mailto",parse:function(D,U){var W=D,H=W.to=W.path?W.path.split(","):[];if(W.path=void 0,W.query){for(var se=!1,de={},Ae=W.query.split("&"),Ge=0,et=Ae.length;Ge<et;++Ge){var Te=Ae[Ge].split("=");switch(Te[0]){case"to":for(var Be=Te[1].split(","),tt=0,be=Be.length;tt<be;++tt)H.push(Be[tt]);break;case"subject":W.subject=Se(Te[1],U);break;case"body":W.body=Se(Te[1],U);break;default:se=!0,de[Se(Te[0],U)]=Se(Te[1],U);break}}se&&(W.headers=de)}W.query=void 0;for(var Ke=0,at=H.length;Ke<at;++Ke){var Ze=H[Ke].split("@");if(Ze[0]=Se(Ze[0]),U.unicodeSupport)Ze[1]=Se(Ze[1],U).toLowerCase();else try{Ze[1]=J.toASCII(Se(Ze[1],U).toLowerCase())}catch(er){W.error=W.error||"Email address's domain name can not be converted to ASCII via punycode: "+er}H[Ke]=Ze.join("@")}return W},serialize:function(D,U){var W=D,H=s(D.to);if(H){for(var se=0,de=H.length;se<de;++se){var Ae=String(H[se]),Ge=Ae.lastIndexOf("@"),et=Ae.slice(0,Ge).replace(Pr,Ea).replace(Pr,o).replace(Pl,ie),Te=Ae.slice(Ge+1);try{Te=U.iri?J.toUnicode(Te):J.toASCII(Se(Te,U).toLowerCase())}catch(Ke){W.error=W.error||"Email address's domain name can not be converted to "+(U.iri?"Unicode":"ASCII")+" via punycode: "+Ke}H[se]=et+"@"+Te}W.path=H.join(",")}var Be=D.headers=D.headers||{};D.subject&&(Be.subject=D.subject),D.body&&(Be.body=D.body);var tt=[];for(var be in Be)Be[be]!==Ie[be]&&tt.push(be.replace(Pr,Ea).replace(Pr,o).replace(Vi,ie)+"="+Be[be].replace(Pr,Ea).replace(Pr,o).replace(Rl,ie));return tt.length&&(W.query=tt.join("&")),W}},Al=/^([^\:]+)\:(.*)/,Bi={scheme:"urn",parse:function(D,U){var W=D.path&&D.path.match(Al),H=D;if(W){var se=U.scheme||H.scheme||"urn",de=W[1].toLowerCase(),Ae=W[2],Ge=se+":"+(U.nid||de),et=ae[Ge];H.nid=de,H.nss=Ae,H.path=void 0,et&&(H=et.parse(H,U))}else H.error=H.error||"URN can not be parsed.";return H},serialize:function(D,U){var W=U.scheme||D.scheme||"urn",H=D.nid,se=W+":"+(U.nid||H),de=ae[se];de&&(D=de.serialize(D,U));var Ae=D,Ge=D.nss;return Ae.path=(H||U.nid)+":"+Ge,Ae}},kl=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ui={scheme:"urn:uuid",parse:function(D,U){var W=D;return W.uuid=W.nss,W.nss=void 0,!U.tolerant&&(!W.uuid||!W.uuid.match(kl))&&(W.error=W.error||"UUID is not valid."),W},serialize:function(D,U){var W=D;return W.nss=(D.uuid||"").toLowerCase(),W}};ae[He.scheme]=He,ae[Me.scheme]=Me,ae[re.scheme]=re,ae[Ee.scheme]=Ee,ae[Mi.scheme]=Mi,ae[Bi.scheme]=Bi,ae[Ui.scheme]=Ui,n.SCHEMES=ae,n.pctEncChar=ie,n.pctDecChars=ye,n.parse=we,n.removeDotSegments=$e,n.serialize=ee,n.resolveComponents=ce,n.resolve=fe,n.normalize=Ne,n.equal=ve,n.escapeComponent=pt,n.unescapeComponent=Se,Object.defineProperty(n,"__esModule",{value:!0})})})(Ud,Ud.exports);var a9=Ud.exports,Ch=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var a,r,i;if(Array.isArray(t)){if(a=t.length,a!=n.length)return!1;for(r=a;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),a=i.length,a!==Object.keys(n).length)return!1;for(r=a;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=a;r--!==0;){var o=i[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},i9=function(t){for(var n=0,a=t.length,r=0,i;r<a;)n++,i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<a&&(i=t.charCodeAt(r),(i&64512)==56320&&r++);return n},Sa={copy:o9,checkDataType:zd,checkDataTypes:s9,coerceToTypes:l9,toHash:xh,getProperty:Nh,escapeQuotes:Ih,equal:Ch,ucs2length:i9,varOccurences:d9,varReplace:f9,schemaHasRules:p9,schemaHasRulesExcept:h9,schemaUnknownRules:m9,toQuotedString:Hd,getPathExpr:v9,getPath:g9,getData:w9,unescapeFragment:S9,unescapeJsonPointer:Ph,escapeFragment:_9,escapeJsonPointer:Th};function o9(e,t){t=t||{};for(var n in e)t[n]=e[n];return t}function zd(e,t,n,a){var r=a?" !== ":" === ",i=a?" || ":" && ",o=a?"!":"",s=a?"":"!";switch(e){case"null":return t+r+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+r+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+r+'"number"'+i+s+"("+t+" % 1)"+i+t+r+t+(n?i+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+r+'"'+e+'"'+(n?i+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+r+'"'+e+'"'}}function s9(e,t,n){switch(e.length){case 1:return zd(e[0],t,n,!0);default:var a="",r=xh(e);r.array&&r.object&&(a=r.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var i in r)a+=(a?" && ":"")+zd(i,t,n,!0);return a}}var xy=xh(["string","number","integer","boolean","null"]);function l9(e,t){if(Array.isArray(t)){for(var n=[],a=0;a<t.length;a++){var r=t[a];(xy[r]||e==="array"&&r==="array")&&(n[n.length]=r)}if(n.length)return n}else{if(xy[t])return[t];if(e==="array"&&t==="array")return["array"]}}function xh(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var u9=/^[a-z$_][a-z$_0-9]*$/i,c9=/'|\\/g;function Nh(e){return typeof e=="number"?"["+e+"]":u9.test(e)?"."+e:"['"+Ih(e)+"']"}function Ih(e){return e.replace(c9,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function d9(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0}function f9(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")}function p9(e,t){if(typeof e=="boolean")return!e;for(var n in e)if(t[n])return!0}function h9(e,t,n){if(typeof e=="boolean")return!e&&n!="not";for(var a in e)if(a!=n&&t[a])return!0}function m9(e,t){if(typeof e!="boolean"){for(var n in e)if(!t[n])return n}}function Hd(e){return"'"+Ih(e)+"'"}function v9(e,t,n,a){var r=n?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return dE(e,r)}function g9(e,t,n){var a=Hd(n?"/"+Th(t):Nh(t));return dE(e,a)}var y9=/^\/(?:[^~]|~0|~1)*$/,b9=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function w9(e,t,n){var a,r,i,o;if(e==="")return"rootData";if(e[0]=="/"){if(!y9.test(e))throw new Error("Invalid JSON-pointer: "+e);r=e,i="rootData"}else{if(o=e.match(b9),!o)throw new Error("Invalid JSON-pointer: "+e);if(a=+o[1],r=o[2],r=="#"){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return n[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(i="data"+(t-a||""),!r)return i}for(var s=i,l=r.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(i+=Nh(Ph(u)),s+=" && "+i)}return s}function dE(e,t){return e=='""'?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function S9(e){return Ph(decodeURIComponent(e))}function _9(e){return encodeURIComponent(Th(e))}function Th(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Ph(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var E9=Sa,fE=C9;function C9(e){E9.copy(e,this)}var pE={exports:{}},Ur=pE.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var a=typeof n=="function"?n:n.pre||function(){},r=n.post||function(){};Po(t,a,r,e,"",e)};Ur.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Ur.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ur.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ur.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Po(e,t,n,a,r,i,o,s,l,c){if(a&&typeof a=="object"&&!Array.isArray(a)){t(a,r,i,o,s,l,c);for(var u in a){var d=a[u];if(Array.isArray(d)){if(u in Ur.arrayKeywords)for(var f=0;f<d.length;f++)Po(e,t,n,d[f],r+"/"+u+"/"+f,i,r,u,a,f)}else if(u in Ur.propsKeywords){if(d&&typeof d=="object")for(var p in d)Po(e,t,n,d[p],r+"/"+u+"/"+x9(p),i,r,u,a,p)}else(u in Ur.keywords||e.allKeys&&!(u in Ur.skipKeywords))&&Po(e,t,n,d,r+"/"+u,i,r,u,a)}n(a,r,i,o,s,l,c)}}function x9(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var N9=pE.exports,qi=a9,Ny=Ch,Sl=Sa,ss=fE,I9=N9,Rh=on;on.normalizeId=Gr;on.fullPath=ls;on.url=us;on.ids=k9;on.inlineRef=Wd;on.schema=_l;function on(e,t,n){var a=this._refs[n];if(typeof a=="string")if(this._refs[a])a=this._refs[a];else return on.call(this,e,t,a);if(a=a||this._schemas[n],a instanceof ss)return Wd(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var r=_l.call(this,t,n),i,o,s;return r&&(i=r.schema,t=r.root,s=r.baseId),i instanceof ss?o=i.validate||e.call(this,i.schema,t,void 0,s):i!==void 0&&(o=Wd(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),o}function _l(e,t){var n=qi.parse(t),a=mE(n),r=ls(this._getId(e.schema));if(Object.keys(e.schema).length===0||a!==r){var i=Gr(a),o=this._refs[i];if(typeof o=="string")return T9.call(this,e,o,n);if(o instanceof ss)o.validate||this._compile(o),e=o;else if(o=this._schemas[i],o instanceof ss){if(o.validate||this._compile(o),i==Gr(t))return{schema:o,root:e,baseId:r};e=o}else return;if(!e.schema)return;r=ls(this._getId(e.schema))}return hE.call(this,n,r,e.schema,e)}function T9(e,t,n){var a=_l.call(this,e,t);if(a){var r=a.schema,i=a.baseId;e=a.root;var o=this._getId(r);return o&&(i=us(i,o)),hE.call(this,n,i,r,e)}}var P9=Sl.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function hE(e,t,n,a){if(e.fragment=e.fragment||"",e.fragment.slice(0,1)=="/"){for(var r=e.fragment.split("/"),i=1;i<r.length;i++){var o=r[i];if(o){if(o=Sl.unescapeFragment(o),n=n[o],n===void 0)break;var s;if(!P9[o]&&(s=this._getId(n),s&&(t=us(t,s)),n.$ref)){var l=us(t,n.$ref),c=_l.call(this,a,l);c&&(n=c.schema,a=c.root,t=c.baseId)}}}if(n!==void 0&&n!==a.schema)return{schema:n,root:a,baseId:t}}}var R9=Sl.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Wd(e,t){if(t===!1)return!1;if(t===void 0||t===!0)return jd(e);if(t)return Qd(e)<=t}function jd(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t=e[n],typeof t=="object"&&!jd(t))return!1}else for(var a in e)if(a=="$ref"||(t=e[a],typeof t=="object"&&!jd(t)))return!1;return!0}function Qd(e){var t=0,n;if(Array.isArray(e)){for(var a=0;a<e.length;a++)if(n=e[a],typeof n=="object"&&(t+=Qd(n)),t==1/0)return 1/0}else for(var r in e){if(r=="$ref")return 1/0;if(R9[r])t++;else if(n=e[r],typeof n=="object"&&(t+=Qd(n)+1),t==1/0)return 1/0}return t}function ls(e,t){t!==!1&&(e=Gr(e));var n=qi.parse(e);return mE(n)}function mE(e){return qi.serialize(e).split("#")[0]+"#"}var A9=/#\/?$/;function Gr(e){return e?e.replace(A9,""):""}function us(e,t){return t=Gr(t),qi.resolve(e,t)}function k9(e){var t=Gr(this._getId(e)),n={"":t},a={"":ls(t,!1)},r={},i=this;return I9(e,{allKeys:!0},function(o,s,l,c,u,d,f){if(s!==""){var p=i._getId(o),h=n[c],m=a[c]+"/"+u;if(f!==void 0&&(m+="/"+(typeof f=="number"?f:Sl.escapeFragment(f))),typeof p=="string"){p=h=Gr(h?qi.resolve(h,p):p);var g=i._refs[p];if(typeof g=="string"&&(g=i._refs[g]),g&&g.schema){if(!Ny(o,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=Gr(m))if(p[0]=="#"){if(r[p]&&!Ny(o,r[p]))throw new Error('id "'+p+'" resolves to more than one schema');r[p]=o}else i._refs[p]=m}n[s]=h,a[s]=m}}),r}var xc=Rh,Ah={Validation:Iy($9),MissingRef:Iy(kh)};function $9(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}kh.message=function(e,t){return"can't resolve reference "+t+" from id "+e};function kh(e,t,n){this.message=n||kh.message(e,t),this.missingRef=xc.url(e,t),this.missingSchema=xc.normalizeId(xc.fullPath(this.missingRef))}function Iy(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var vE=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,a=t.cmp&&function(i){return function(o){return function(s,l){var c={key:s,value:o[s]},u={key:l,value:o[l]};return i(c,u)}}}(t.cmp),r=[];return function i(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var s,l;if(Array.isArray(o)){for(l="[",s=0;s<o.length;s++)s&&(l+=","),l+=i(o[s])||"null";return l+"]"}if(o===null)return"null";if(r.indexOf(o)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=r.push(o)-1,u=Object.keys(o).sort(a&&a(o));for(l="",s=0;s<u.length;s++){var d=u[s],f=i(o[d]);f&&(l&&(l+=","),l+=JSON.stringify(d)+":"+f)}return r.splice(c,1),"{"+l+"}"}}(e)},gE=function(t,n,a){var r="",i=t.schema.$async===!0,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),s=t.self._getId(t.schema);if(t.opts.strictKeywords){var l=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(l){var c="unknown keyword: "+l;if(t.opts.strictKeywords==="log")t.logger.warn(c);else throw new Error(c)}}if(t.isTop&&(r+=" var validate = ",i&&(t.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(t.opts.sourceCode||t.opts.processCode)&&(r+=" "+("/*# sourceURL="+s+" */")+" ")),typeof t.schema=="boolean"||!(o||t.schema.$ref)){var n="false schema",u=t.level,d=t.dataLevel,f=t.schema[n],p=t.schemaPath+t.util.getProperty(n),h=t.errSchemaPath+"/"+n,S=!t.opts.allErrors,N,m="data"+(d||""),_="valid"+u;if(t.schema===!1){t.isTop?S=!0:r+=" var "+_+" = false; ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(N||"false schema")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&S?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?i?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+_+" = true; ";return t.isTop&&(r+=" }; return validate; "),r}if(t.isTop){var E=t.isTop,u=t.level=0,d=t.dataLevel=0,m="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],t.schema.default!==void 0&&t.opts.useDefaults&&t.opts.strictDefaults){var y="default is ignored in the schema root";if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var u=t.level,d=t.dataLevel,m="data"+(d||"");if(s&&(t.baseId=t.resolve.url(t.baseId,s)),i&&!t.async)throw new Error("async schema in sync schema");r+=" var errs_"+u+" = errors;"}var _="valid"+u,S=!t.opts.allErrors,w="",C="",N,T=t.schema.type,P=Array.isArray(T);if(T&&t.opts.nullable&&t.schema.nullable===!0&&(P?T.indexOf("null")==-1&&(T=T.concat("null")):T!="null"&&(T=[T,"null"],P=!0)),P&&T.length==1&&(T=T[0],P=!1),t.schema.$ref&&o){if(t.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');t.opts.extendRefs!==!0&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(r+=" "+t.RULES.all.$comment.code(t,"$comment")),T){if(t.opts.coerceTypes)var k=t.util.coerceToTypes(t.opts.coerceTypes,T);var A=t.RULES.types[T];if(k||P||A===!0||A&&!ke(A)){var p=t.schemaPath+".type",h=t.errSchemaPath+"/type",p=t.schemaPath+".type",h=t.errSchemaPath+"/type",I=P?"checkDataTypes":"checkDataType";if(r+=" if ("+t.util[I](T,m,t.opts.strictNumbers,!0)+") { ",k){var x="dataType"+u,F="coerced"+u;r+=" var "+x+" = typeof "+m+"; var "+F+" = undefined; ",t.opts.coerceTypes=="array"&&(r+=" if ("+x+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+x+" = typeof "+m+"; if ("+t.util.checkDataType(t.schema.type,m,t.opts.strictNumbers)+") "+F+" = "+m+"; } "),r+=" if ("+F+" !== undefined) ; ";var O=k;if(O)for(var $,V=-1,q=O.length-1;V<q;)$=O[V+=1],$=="string"?r+=" else if ("+x+" == 'number' || "+x+" == 'boolean') "+F+" = '' + "+m+"; else if ("+m+" === null) "+F+" = ''; ":$=="number"||$=="integer"?(r+=" else if ("+x+" == 'boolean' || "+m+" === null || ("+x+" == 'string' && "+m+" && "+m+" == +"+m+" ",$=="integer"&&(r+=" && !("+m+" % 1)"),r+=")) "+F+" = +"+m+"; "):$=="boolean"?r+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+F+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+F+" = true; ":$=="null"?r+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+F+" = null; ":t.opts.coerceTypes=="array"&&$=="array"&&(r+=" else if ("+x+" == 'string' || "+x+" == 'number' || "+x+" == 'boolean' || "+m+" == null) "+F+" = ["+m+"]; ");r+=" else {   ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(N||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",P?r+=""+T.join(","):r+=""+T,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",P?r+=""+T.join(","):r+=""+T,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&S?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+F+" !== undefined) {  ";var B=d?"data"+(d-1||""):"parentData",j=d?t.dataPathArr[d]:"parentDataProperty";r+=" "+m+" = "+F+"; ",d||(r+="if ("+B+" !== undefined)"),r+=" "+B+"["+j+"] = "+F+"; } "}else{var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(N||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",P?r+=""+T.join(","):r+=""+T,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",P?r+=""+T.join(","):r+=""+T,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&S?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(t.schema.$ref&&!o)r+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",S&&(r+=" } if (errors === ",E?r+="0":r+="errs_"+u,r+=") { ",C+="}");else{var Q=t.RULES;if(Q){for(var A,X=-1,Y=Q.length-1;X<Y;)if(A=Q[X+=1],ke(A)){if(A.type&&(r+=" if ("+t.util.checkDataType(A.type,m,t.opts.strictNumbers)+") { "),t.opts.useDefaults){if(A.type=="object"&&t.schema.properties){var f=t.schema.properties,Z=Object.keys(f),J=Z;if(J)for(var ae,ie=-1,ye=J.length-1;ie<ye;){ae=J[ie+=1];var oe=f[ae];if(oe.default!==void 0){var ge=m+t.util.getProperty(ae);if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+ge;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else r+=" if ("+ge+" === undefined ",t.opts.useDefaults=="empty"&&(r+=" || "+ge+" === null || "+ge+" === '' "),r+=" ) "+ge+" = ",t.opts.useDefaults=="shared"?r+=" "+t.useDefault(oe.default)+" ":r+=" "+JSON.stringify(oe.default)+" ",r+="; "}}}else if(A.type=="array"&&Array.isArray(t.schema.items)){var Re=t.schema.items;if(Re){for(var oe,V=-1,me=Re.length-1;V<me;)if(oe=Re[V+=1],oe.default!==void 0){var ge=m+"["+V+"]";if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+ge;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else r+=" if ("+ge+" === undefined ",t.opts.useDefaults=="empty"&&(r+=" || "+ge+" === null || "+ge+" === '' "),r+=" ) "+ge+" = ",t.opts.useDefaults=="shared"?r+=" "+t.useDefault(oe.default)+" ":r+=" "+JSON.stringify(oe.default)+" ",r+="; "}}}}var te=A.rules;if(te){for(var he,we=-1,ne=te.length-1;we<ne;)if(he=te[we+=1],ze(he)){var Ye=he.code(t,he.keyword,A.type);Ye&&(r+=" "+Ye+" ",S&&(w+="}"))}}if(S&&(r+=" "+w+" ",w=""),A.type&&(r+=" } ",T&&T===A.type&&!k)){r+=" else { ";var p=t.schemaPath+".type",h=t.errSchemaPath+"/type",g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(N||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",P?r+=""+T.join(","):r+=""+T,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",P?r+=""+T.join(","):r+=""+T,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&S?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}S&&(r+=" if (errors === ",E?r+="0":r+="errs_"+u,r+=") { ",C+="}")}}}S&&(r+=" "+C+" "),E?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+_+" = errors === errs_"+u+";";function ke($e){for(var ee=$e.rules,ce=0;ce<ee.length;ce++)if(ze(ee[ce]))return!0}function ze($e){return t.schema[$e.keyword]!==void 0||$e.implements&&lt($e)}function lt($e){for(var ee=$e.implements,ce=0;ce<ee.length;ce++)if(t.schema[ee[ce]]!==void 0)return!0}return r},mo=Rh,cs=Sa,yE=Ah,F9=vE,Ty=gE,D9=cs.ucs2length,O9=Ch,q9=yE.Validation,L9=Gd;function Gd(e,t,n,a){var r=this,i=this._opts,o=[void 0],s={},l=[],c={},u=[],d={},f=[];t=t||{schema:e,refVal:o,refs:s};var p=V9.call(this,e,t,a),h=this._compilations[p.index];if(p.compiling)return h.callValidate=y;var m=this._formats,g=this.RULES;try{var b=_(e,t,n,a);h.validate=b;var E=h.callValidate;return E&&(E.schema=b.schema,E.errors=null,E.refs=b.refs,E.refVal=b.refVal,E.root=b.root,E.$async=b.$async,i.sourceCode&&(E.source=b.source)),b}finally{M9.call(this,e,t,a)}function y(){var I=h.validate,x=I.apply(this,arguments);return y.errors=I.errors,x}function _(I,x,F,O){var $=!x||x&&x.schema==I;if(x.schema!=t.schema)return Gd.call(r,I,x,F,O);var V=I.$async===!0,q=Ty({isTop:!0,schema:I,isRoot:$,baseId:O,root:x,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:yE.MissingRef,RULES:g,validate:Ty,util:cs,resolve:mo,resolveRef:S,usePattern:P,useDefault:k,useCustomRule:A,opts:i,formats:m,logger:r.logger,self:r});q=vo(o,z9)+vo(l,B9)+vo(u,U9)+vo(f,H9)+q,i.processCode&&(q=i.processCode(q,I));var B;try{var j=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",q);B=j(r,g,m,t,o,u,f,O9,D9,q9),o[0]=B}catch(Q){throw r.logger.error("Error compiling schema, function code:",q),Q}return B.schema=I,B.errors=null,B.refs=s,B.refVal=o,B.root=$?B:x,V&&(B.$async=!0),i.sourceCode===!0&&(B.source={code:q,patterns:l,defaults:u}),B}function S(I,x,F){x=mo.url(I,x);var O=s[x],$,V;if(O!==void 0)return $=o[O],V="refVal["+O+"]",T($,V);if(!F&&t.refs){var q=t.refs[x];if(q!==void 0)return $=t.refVal[q],V=w(x,$),T($,V)}V=w(x);var B=mo.call(r,_,t,x);if(B===void 0){var j=n&&n[x];j&&(B=mo.inlineRef(j,i.inlineRefs)?j:Gd.call(r,j,t,n,I))}if(B===void 0)C(x);else return N(x,B),T(B,V)}function w(I,x){var F=o.length;return o[F]=x,s[I]=F,"refVal"+F}function C(I){delete s[I]}function N(I,x){var F=s[I];o[F]=x}function T(I,x){return typeof I=="object"||typeof I=="boolean"?{code:x,schema:I,inline:!0}:{code:x,$async:I&&!!I.$async}}function P(I){var x=c[I];return x===void 0&&(x=c[I]=l.length,l[x]=I),"pattern"+x}function k(I){switch(typeof I){case"boolean":case"number":return""+I;case"string":return cs.toQuotedString(I);case"object":if(I===null)return"null";var x=F9(I),F=d[x];return F===void 0&&(F=d[x]=u.length,u[F]=I),"default"+F}}function A(I,x,F,O){if(r._opts.validateSchema!==!1){var $=I.definition.dependencies;if($&&!$.every(function(J){return Object.prototype.hasOwnProperty.call(F,J)}))throw new Error("parent schema must have all required keywords: "+$.join(","));var V=I.definition.validateSchema;if(V){var q=V(x);if(!q){var B="keyword schema is invalid: "+r.errorsText(V.errors);if(r._opts.validateSchema=="log")r.logger.error(B);else throw new Error(B)}}}var j=I.definition.compile,Q=I.definition.inline,X=I.definition.macro,Y;if(j)Y=j.call(r,x,F,O);else if(X)Y=X.call(r,x,F,O),i.validateSchema!==!1&&r.validateSchema(Y,!0);else if(Q)Y=Q.call(r,O,I.keyword,x,F);else if(Y=I.definition.validate,!Y)return;if(Y===void 0)throw new Error('custom keyword "'+I.keyword+'"failed to compile');var Z=f.length;return f[Z]=Y,{code:"customRule"+Z,validate:Y}}}function V9(e,t,n){var a=bE.call(this,e,t,n);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:n},{index:a,compiling:!1})}function M9(e,t,n){var a=bE.call(this,e,t,n);a>=0&&this._compilations.splice(a,1)}function bE(e,t,n){for(var a=0;a<this._compilations.length;a++){var r=this._compilations[a];if(r.schema==e&&r.root==t&&r.baseId==n)return a}return-1}function B9(e,t){return"var pattern"+e+" = new RegExp("+cs.toQuotedString(t[e])+");"}function U9(e){return"var default"+e+" = defaults["+e+"];"}function z9(e,t){return t[e]===void 0?"":"var refVal"+e+" = refVal["+e+"];"}function H9(e){return"var customRule"+e+" = customRules["+e+"];"}function vo(e,t){if(!e.length)return"";for(var n="",a=0;a<e.length;a++)n+=t(a,e);return n}var wE={exports:{}},El=wE.exports=function(){this._cache={}};El.prototype.put=function(t,n){this._cache[t]=n};El.prototype.get=function(t){return this._cache[t]};El.prototype.del=function(t){delete this._cache[t]};El.prototype.clear=function(){this._cache={}};var W9=wE.exports,j9=Sa,Q9=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,G9=[0,31,28,31,30,31,30,31,31,30,31,30,31],Y9=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,SE=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,X9=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,K9=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,_E=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,EE=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,CE=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,xE=/^(?:\/(?:[^~/]|~0|~1)*)*$/,NE=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,IE=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Z9=Cl;function Cl(e){return e=e=="full"?"full":"fast",j9.copy(Cl[e])}Cl.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":_E,url:EE,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:SE,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:RE,uuid:CE,"json-pointer":xE,"json-pointer-uri-fragment":NE,"relative-json-pointer":IE};Cl.full={date:TE,time:PE,"date-time":tU,uri:nU,"uri-reference":K9,"uri-template":_E,url:EE,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:SE,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:RE,uuid:CE,"json-pointer":xE,"json-pointer-uri-fragment":NE,"relative-json-pointer":IE};function J9(e){return e%4===0&&(e%100!==0||e%400===0)}function TE(e){var t=e.match(Q9);if(!t)return!1;var n=+t[1],a=+t[2],r=+t[3];return a>=1&&a<=12&&r>=1&&r<=(a==2&&J9(n)?29:G9[a])}function PE(e,t){var n=e.match(Y9);if(!n)return!1;var a=n[1],r=n[2],i=n[3],o=n[5];return(a<=23&&r<=59&&i<=59||a==23&&r==59&&i==60)&&(!t||o)}var eU=/t|\s/i;function tU(e){var t=e.split(eU);return t.length==2&&TE(t[0])&&PE(t[1],!0)}var rU=/\/|:/;function nU(e){return rU.test(e)&&X9.test(e)}var aU=/[^\\]\\Z/;function RE(e){if(aU.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var iU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.errSchemaPath+"/"+n,c=!t.opts.allErrors,u="data"+(o||""),d="valid"+i,f,p;if(s=="#"||s=="#/")t.isRoot?(f=t.async,p="validate"):(f=t.root.schema.$async===!0,p="root.refVal[0]");else{var h=t.resolveRef(t.baseId,s,t.isRoot);if(h===void 0){var m=t.MissingRefError.message(t.baseId,s);if(t.opts.missingRefs=="fail"){t.logger.error(m);var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { ref: '"+t.util.escapeQuotes(s)+"' } ",t.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(s)+"' "),t.opts.verbose&&(r+=" , schema: "+t.util.toQuotedString(s)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&c?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ")}else if(t.opts.missingRefs=="ignore")t.logger.warn(m),c&&(r+=" if (true) { ");else throw new t.MissingRefError(t.baseId,s,m)}else if(h.inline){var E=t.util.copy(t);E.level++;var y="valid"+E.level;E.schema=h.schema,E.schemaPath="",E.errSchemaPath=s;var _=t.validate(E).replace(/validate\.schema/g,h.code);r+=" "+_+" ",c&&(r+=" if ("+y+") { ")}else f=h.$async===!0||t.async&&h.$async!==!1,p=h.code}if(p){var g=g||[];g.push(r),r="",t.opts.passContext?r+=" "+p+".call(this, ":r+=" "+p+"( ",r+=" "+u+", (dataPath || '')",t.errorPath!='""'&&(r+=" + "+t.errorPath);var S=o?"data"+(o-1||""):"parentData",w=o?t.dataPathArr[o]:"parentDataProperty";r+=" , "+S+" , "+w+", rootData)  ";var C=r;if(r=g.pop(),f){if(!t.async)throw new Error("async schema referenced by sync schema");c&&(r+=" var "+d+"; "),r+=" try { await "+C+"; ",c&&(r+=" "+d+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(r+=" "+d+" = false; "),r+=" } ",c&&(r+=" if ("+d+") { ")}else r+=" if (!"+C+") { if (vErrors === null) vErrors = "+p+".errors; else vErrors = vErrors.concat("+p+".errors); errors = vErrors.length; } ",c&&(r+=" else { ")}return r},oU=function(t,n,a){var r=" ",i=t.schema[n],o=t.schemaPath+t.util.getProperty(n),s=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,c=t.util.copy(t),u="";c.level++;var d="valid"+c.level,f=c.baseId,p=!0,h=i;if(h)for(var m,g=-1,b=h.length-1;g<b;)m=h[g+=1],(t.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:t.util.schemaHasRules(m,t.RULES.all))&&(p=!1,c.schema=m,c.schemaPath=o+"["+g+"]",c.errSchemaPath=s+"/"+g,r+="  "+t.validate(c)+" ",c.baseId=f,l&&(r+=" if ("+d+") { ",u+="}"));return l&&(p?r+=" if (true) { ":r+=" "+u.slice(0,-1)+" "),r},sU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),m="";h.level++;var g="valid"+h.level,b=s.every(function(N){return t.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:t.util.schemaHasRules(N,t.RULES.all)});if(b){var E=h.baseId;r+=" var "+p+" = errors; var "+f+" = false;  ";var y=t.compositeRule;t.compositeRule=h.compositeRule=!0;var _=s;if(_)for(var S,w=-1,C=_.length-1;w<C;)S=_[w+=1],h.schema=S,h.schemaPath=l+"["+w+"]",h.errSchemaPath=c+"/"+w,r+="  "+t.validate(h)+" ",h.baseId=E,r+=" "+f+" = "+f+" || "+g+"; if (!"+f+") { ",m+="}";t.compositeRule=h.compositeRule=y,r+=" "+m+" if (!"+f+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else u&&(r+=" if (true) { ");return r},lU=function(t,n,a){var r=" ",i=t.schema[n],o=t.errSchemaPath+"/"+n;t.opts.allErrors;var s=t.util.toQuotedString(i);return t.opts.$comment===!0?r+=" console.log("+s+");":typeof t.opts.$comment=="function"&&(r+=" self._opts.$comment("+s+", "+t.util.toQuotedString(o)+", validate.root.schema);"),r},uU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data;p&&(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; "),p||(r+=" var schema"+i+" = validate.schema"+l+";"),r+="var "+f+" = equal("+d+", schema"+i+"); if (!"+f+") {   ";var h=h||[];h.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var m=r;return r=h.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r},cU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),m="";h.level++;var g="valid"+h.level,b="i"+i,E=h.dataLevel=t.dataLevel+1,y="data"+E,_=t.baseId,S=t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all);if(r+="var "+p+" = errors;var "+f+";",S){var w=t.compositeRule;t.compositeRule=h.compositeRule=!0,h.schema=s,h.schemaPath=l,h.errSchemaPath=c,r+=" var "+g+" = false; for (var "+b+" = 0; "+b+" < "+d+".length; "+b+"++) { ",h.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var C=d+"["+b+"]";h.dataPathArr[E]=b;var N=t.validate(h);h.baseId=_,t.util.varOccurences(N,y)<2?r+=" "+t.util.varReplace(N,y,C)+" ":r+=" var "+y+" = "+C+"; "+N+" ",r+=" if ("+g+") break; }  ",t.compositeRule=h.compositeRule=w,r+=" "+m+" if (!"+g+") {"}else r+=" if ("+d+".length == 0) {";var T=T||[];T.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var P=r;return r=T.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",S&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),t.opts.allErrors&&(r+=" } "),r},dU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t),h="";p.level++;var m="valid"+p.level,g={},b={},E=t.opts.ownProperties;for(w in s)if(w!="__proto__"){var y=s[w],_=Array.isArray(y)?b:g;_[w]=y}r+="var "+f+" = errors;";var S=t.errorPath;r+="var missing"+i+";";for(var w in b)if(_=b[w],_.length){if(r+=" if ( "+d+t.util.getProperty(w)+" !== undefined ",E&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(w)+"') "),u){r+=" && ( ";var C=_;if(C)for(var N,T=-1,P=C.length-1;T<P;){N=C[T+=1],T&&(r+=" || ");var k=t.util.getProperty(N),A=d+k;r+=" ( ( "+A+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(N)+"') "),r+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?N:k)+") ) "}r+=")) {  ";var I="missing"+i,x="' + "+I+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(S,I,!0):S+" + "+I);var F=F||[];F.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+_.length+", deps: '"+t.util.escapeQuotes(_.length==1?_[0]:_.join(", "))+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should have ",_.length==1?r+="property "+t.util.escapeQuotes(_[0]):r+="properties "+t.util.escapeQuotes(_.join(", ")),r+=" when property "+t.util.escapeQuotes(w)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var O=r;r=F.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var $=_;if($)for(var N,V=-1,q=$.length-1;V<q;){N=$[V+=1];var k=t.util.getProperty(N),x=t.util.escapeQuotes(N),A=d+k;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(S,N,t.opts.jsonPointers)),r+=" if ( "+A+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(N)+"') "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(w)+"', missingProperty: '"+x+"', depsCount: "+_.length+", deps: '"+t.util.escapeQuotes(_.length==1?_[0]:_.join(", "))+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should have ",_.length==1?r+="property "+t.util.escapeQuotes(_[0]):r+="properties "+t.util.escapeQuotes(_.join(", ")),r+=" when property "+t.util.escapeQuotes(w)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",u&&(h+="}",r+=" else { ")}t.errorPath=S;var B=p.baseId;for(var w in g){var y=g[w];(t.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:t.util.schemaHasRules(y,t.RULES.all))&&(r+=" "+m+" = true; if ( "+d+t.util.getProperty(w)+" !== undefined ",E&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(w)+"') "),r+=") { ",p.schema=y,p.schemaPath=l+t.util.getProperty(w),p.errSchemaPath=c+"/"+t.util.escapeFragment(w),r+="  "+t.validate(p)+" ",p.baseId=B,r+=" }  ",u&&(r+=" if ("+m+") { ",h+="}"))}return u&&(r+="   "+h+" if ("+f+" == errors) {"),r},fU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data;p&&(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var h="i"+i,m="schema"+i;p||(r+=" var "+m+" = validate.schema"+l+";"),r+="var "+f+";",p&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=""+f+" = false;for (var "+h+"=0; "+h+"<"+m+".length; "+h+"++) if (equal("+d+", "+m+"["+h+"])) { "+f+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+f+") {   ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r},pU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||"");if(t.opts.format===!1)return u&&(r+=" if (true) { "),r;var f=t.opts.$data&&s&&s.$data,p;f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s;var h=t.opts.unknownFormats,m=Array.isArray(h);if(f){var g="format"+i,b="isObject"+i,E="formatType"+i;r+=" var "+g+" = formats["+p+"]; var "+b+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+E+" = "+b+" && "+g+".type || 'string'; if ("+b+") { ",t.async&&(r+=" var async"+i+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" (",h!="ignore"&&(r+=" ("+p+" && !"+g+" ",m&&(r+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),r+=") || "),r+=" ("+g+" && "+E+" == '"+a+"' && !(typeof "+g+" == 'function' ? ",t.async?r+=" (async"+i+" ? await "+g+"("+d+") : "+g+"("+d+")) ":r+=" "+g+"("+d+") ",r+=" : "+g+".test("+d+"))))) {"}else{var g=t.formats[s];if(!g){if(h=="ignore")return t.logger.warn('unknown format "'+s+'" ignored in schema at path "'+t.errSchemaPath+'"'),u&&(r+=" if (true) { "),r;if(m&&h.indexOf(s)>=0)return u&&(r+=" if (true) { "),r;throw new Error('unknown format "'+s+'" is used in schema at path "'+t.errSchemaPath+'"')}var b=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,E=b&&g.type||"string";if(b){var y=g.async===!0;g=g.validate}if(E!=a)return u&&(r+=" if (true) { "),r;if(y){if(!t.async)throw new Error("async format in sync schema");var _="formats"+t.util.getProperty(s)+".validate";r+=" if (!(await "+_+"("+d+"))) { "}else{r+=" if (! ";var _="formats"+t.util.getProperty(s);b&&(_+=".validate"),typeof g=="function"?r+=" "+_+"("+d+") ":r+=" "+_+".test("+d+") ",r+=") { "}}var S=S||[];S.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { format:  ",f?r+=""+p:r+=""+t.util.toQuotedString(s),r+="  } ",t.opts.messages!==!1&&(r+=` , message: 'should match format "`,f?r+="' + "+p+" + '":r+=""+t.util.escapeQuotes(s),r+=`"' `),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var w=r;return r=S.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r},hU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t);h.level++;var m="valid"+h.level,g=t.schema.then,b=t.schema.else,E=g!==void 0&&(t.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:t.util.schemaHasRules(g,t.RULES.all)),y=b!==void 0&&(t.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:t.util.schemaHasRules(b,t.RULES.all)),_=h.baseId;if(E||y){var S;h.createErrors=!1,h.schema=s,h.schemaPath=l,h.errSchemaPath=c,r+=" var "+p+" = errors; var "+f+" = true;  ";var w=t.compositeRule;t.compositeRule=h.compositeRule=!0,r+="  "+t.validate(h)+" ",h.baseId=_,h.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",t.compositeRule=h.compositeRule=w,E?(r+=" if ("+m+") {  ",h.schema=t.schema.then,h.schemaPath=t.schemaPath+".then",h.errSchemaPath=t.errSchemaPath+"/then",r+="  "+t.validate(h)+" ",h.baseId=_,r+=" "+f+" = "+m+"; ",E&&y?(S="ifClause"+i,r+=" var "+S+" = 'then'; "):S="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+m+") { ",y&&(h.schema=t.schema.else,h.schemaPath=t.schemaPath+".else",h.errSchemaPath=t.errSchemaPath+"/else",r+="  "+t.validate(h)+" ",h.baseId=_,r+=" "+f+" = "+m+"; ",E&&y?(S="ifClause"+i,r+=" var "+S+" = 'else'; "):S="'else'",r+=" } "),r+=" if (!"+f+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { failingKeyword: "+S+" } ",t.opts.messages!==!1&&(r+=` , message: 'should match "' + `+S+` + '" schema' `),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r},mU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),m="";h.level++;var g="valid"+h.level,b="i"+i,E=h.dataLevel=t.dataLevel+1,y="data"+E,_=t.baseId;if(r+="var "+p+" = errors;var "+f+";",Array.isArray(s)){var S=t.schema.additionalItems;if(S===!1){r+=" "+f+" = "+d+".length <= "+s.length+"; ";var w=c;c=t.errSchemaPath+"/additionalItems",r+="  if (!"+f+") {   ";var C=C||[];C.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var N=r;r=C.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+N+"]); ":r+=" validate.errors = ["+N+"]; return false; ":r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c=w,u&&(m+="}",r+=" else { ")}var T=s;if(T){for(var P,k=-1,A=T.length-1;k<A;)if(P=T[k+=1],t.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:t.util.schemaHasRules(P,t.RULES.all)){r+=" "+g+" = true; if ("+d+".length > "+k+") { ";var I=d+"["+k+"]";h.schema=P,h.schemaPath=l+"["+k+"]",h.errSchemaPath=c+"/"+k,h.errorPath=t.util.getPathExpr(t.errorPath,k,t.opts.jsonPointers,!0),h.dataPathArr[E]=k;var x=t.validate(h);h.baseId=_,t.util.varOccurences(x,y)<2?r+=" "+t.util.varReplace(x,y,I)+" ":r+=" var "+y+" = "+I+"; "+x+" ",r+=" }  ",u&&(r+=" if ("+g+") { ",m+="}")}}if(typeof S=="object"&&(t.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:t.util.schemaHasRules(S,t.RULES.all))){h.schema=S,h.schemaPath=t.schemaPath+".additionalItems",h.errSchemaPath=t.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+d+".length > "+s.length+") {  for (var "+b+" = "+s.length+"; "+b+" < "+d+".length; "+b+"++) { ",h.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var I=d+"["+b+"]";h.dataPathArr[E]=b;var x=t.validate(h);h.baseId=_,t.util.varOccurences(x,y)<2?r+=" "+t.util.varReplace(x,y,I)+" ":r+=" var "+y+" = "+I+"; "+x+" ",u&&(r+=" if (!"+g+") break; "),r+=" } }  ",u&&(r+=" if ("+g+") { ",m+="}")}}else if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){h.schema=s,h.schemaPath=l,h.errSchemaPath=c,r+="  for (var "+b+" = 0; "+b+" < "+d+".length; "+b+"++) { ",h.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var I=d+"["+b+"]";h.dataPathArr[E]=b;var x=t.validate(h);h.baseId=_,t.util.varOccurences(x,y)<2?r+=" "+t.util.varReplace(x,y,I)+" ":r+=" var "+y+" = "+I+"; "+x+" ",u&&(r+=" if (!"+g+") break; "),r+=" }"}return u&&(r+=" "+m+" if ("+p+" == errors) {"),r},Py=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,_,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s;var h=n=="maximum",m=h?"exclusiveMaximum":"exclusiveMinimum",g=t.schema[m],b=t.opts.$data&&g&&g.$data,E=h?"<":">",y=h?">":"<",_=void 0;if(!(f||typeof s=="number"||s===void 0))throw new Error(n+" must be number");if(!(b||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(m+" must be number or boolean");if(b){var S=t.util.getData(g.$data,o,t.dataPathArr),w="exclusive"+i,C="exclType"+i,N="exclIsNumber"+i,T="op"+i,P="' + "+T+" + '";r+=" var schemaExcl"+i+" = "+S+"; ",S="schemaExcl"+i,r+=" var "+w+"; var "+C+" = typeof "+S+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ";var _=m,k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: '"+m+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var A=r;r=k.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+A+"]); ":r+=" validate.errors = ["+A+"]; return false; ":r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+C+" == 'number' ? ( ("+w+" = "+p+" === undefined || "+S+" "+E+"= "+p+") ? "+d+" "+y+"= "+S+" : "+d+" "+y+" "+p+" ) : ( ("+w+" = "+S+" === true) ? "+d+" "+y+"= "+p+" : "+d+" "+y+" "+p+" ) || "+d+" !== "+d+") { var op"+i+" = "+w+" ? '"+E+"' : '"+E+"='; ",s===void 0&&(_=m,c=t.errSchemaPath+"/"+m,p=S,f=b)}else{var N=typeof g=="number",P=E;if(N&&f){var T="'"+P+"'";r+=" if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" ( "+p+" === undefined || "+g+" "+E+"= "+p+" ? "+d+" "+y+"= "+g+" : "+d+" "+y+" "+p+" ) || "+d+" !== "+d+") { "}else{N&&s===void 0?(w=!0,_=m,c=t.errSchemaPath+"/"+m,p=g,y+="="):(N&&(p=Math[h?"min":"max"](g,s)),g===(N?p:!0)?(w=!0,_=m,c=t.errSchemaPath+"/"+m,y+="="):(w=!1,P+="="));var T="'"+P+"'";r+=" if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+d+" "+y+" "+p+" || "+d+" !== "+d+") { "}}_=_||n;var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { comparison: "+T+", limit: "+p+", exclusive: "+w+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be "+P+" ",f?r+="' + "+p:r+=""+p+"'"),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var A=r;return r=k.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+A+"]); ":r+=" validate.errors = ["+A+"]; return false; ":r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r},Ry=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,m,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");var h=n=="maxItems"?">":"<";r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+d+".length "+h+" "+p+") { ";var m=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(m||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have ",n=="maxItems"?r+="more":r+="fewer",r+=" than ",f?r+="' + "+p+" + '":r+=""+s,r+=" items' "),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},Ay=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,m,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");var h=n=="maxLength"?">":"<";r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),t.opts.unicode===!1?r+=" "+d+".length ":r+=" ucs2length("+d+") ",r+=" "+h+" "+p+") { ";var m=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be ",n=="maxLength"?r+="longer":r+="shorter",r+=" than ",f?r+="' + "+p+" + '":r+=""+s,r+=" characters' "),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},ky=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,m,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");var h=n=="maxProperties"?">":"<";r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" Object.keys("+d+").length "+h+" "+p+") { ";var m=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(m||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have ",n=="maxProperties"?r+="more":r+="fewer",r+=" than ",f?r+="' + "+p+" + '":r+=""+s,r+=" properties' "),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},vU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");r+="var division"+i+";if (",f&&(r+=" "+p+" !== undefined && ( typeof "+p+" != 'number' || "),r+=" (division"+i+" = "+d+" / "+p+", ",t.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+t.opts.multipleOfPrecision+" ":r+=" division"+i+" !== parseInt(division"+i+") ",r+=" ) ",f&&(r+="  )  "),r+=" ) {   ";var h=h||[];h.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { multipleOf: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",f?r+="' + "+p:r+=""+p+"'"),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var m=r;return r=h.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},gU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t);p.level++;var h="valid"+p.level;if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){p.schema=s,p.schemaPath=l,p.errSchemaPath=c,r+=" var "+f+" = errors;  ";var m=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.createErrors=!1;var g;p.opts.allErrors&&(g=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+t.validate(p)+" ",p.createErrors=!0,g&&(p.opts.allErrors=g),t.compositeRule=p.compositeRule=m,r+=" if ("+h+") {   ";var b=b||[];b.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var E=r;r=b.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ");return r},yU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),m="";h.level++;var g="valid"+h.level,b=h.baseId,E="prevValid"+i,y="passingSchemas"+i;r+="var "+p+" = errors , "+E+" = false , "+f+" = false , "+y+" = null; ";var _=t.compositeRule;t.compositeRule=h.compositeRule=!0;var S=s;if(S)for(var w,C=-1,N=S.length-1;C<N;)w=S[C+=1],(t.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:t.util.schemaHasRules(w,t.RULES.all))?(h.schema=w,h.schemaPath=l+"["+C+"]",h.errSchemaPath=c+"/"+C,r+="  "+t.validate(h)+" ",h.baseId=b):r+=" var "+g+" = true; ",C&&(r+=" if ("+g+" && "+E+") { "+f+" = false; "+y+" = ["+y+", "+C+"]; } else { ",m+="}"),r+=" if ("+g+") { "+f+" = "+E+" = true; "+y+" = "+C+"; }";return t.compositeRule=h.compositeRule=_,r+=""+m+"if (!"+f+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",t.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",t.opts.allErrors&&(r+=" } "),r},bU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s;var h=f?"(new RegExp("+p+"))":t.usePattern(s);r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" !"+h+".test("+d+") ) {   ";var m=m||[];m.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { pattern:  ",f?r+=""+p:r+=""+t.util.toQuotedString(s),r+="  } ",t.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,f?r+="' + "+p+" + '":r+=""+t.util.escapeQuotes(s),r+=`"' `),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},wU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t),h="";p.level++;var m="valid"+p.level,g="key"+i,b="idx"+i,E=p.dataLevel=t.dataLevel+1,y="data"+E,_="dataProperties"+i,S=Object.keys(s||{}).filter(V),w=t.schema.patternProperties||{},C=Object.keys(w).filter(V),N=t.schema.additionalProperties,T=S.length||C.length,P=N===!1,k=typeof N=="object"&&Object.keys(N).length,A=t.opts.removeAdditional,I=P||k||A,x=t.opts.ownProperties,F=t.baseId,O=t.schema.required;if(O&&!(t.opts.$data&&O.$data)&&O.length<t.opts.loopRequired)var $=t.util.toHash(O);function V(ve){return ve!=="__proto__"}if(r+="var "+f+" = errors;var "+m+" = true;",x&&(r+=" var "+_+" = undefined;"),I){if(x?r+=" "+_+" = "+_+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+_+".length; "+b+"++) { var "+g+" = "+_+"["+b+"]; ":r+=" for (var "+g+" in "+d+") { ",T){if(r+=" var isAdditional"+i+" = !(false ",S.length)if(S.length>8)r+=" || validate.schema"+l+".hasOwnProperty("+g+") ";else{var q=S;if(q)for(var B,j=-1,Q=q.length-1;j<Q;)B=q[j+=1],r+=" || "+g+" == "+t.util.toQuotedString(B)+" "}if(C.length){var X=C;if(X)for(var Y,Z=-1,J=X.length-1;Z<J;)Y=X[Z+=1],r+=" || "+t.usePattern(Y)+".test("+g+") "}r+=" ); if (isAdditional"+i+") { "}if(A=="all")r+=" delete "+d+"["+g+"]; ";else{var ae=t.errorPath,ie="' + "+g+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers)),P)if(A)r+=" delete "+d+"["+g+"]; ";else{r+=" "+m+" = false; ";var ye=c;c=t.errSchemaPath+"/additionalProperties";var oe=oe||[];oe.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { additionalProperty: '"+ie+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var ge=r;r=oe.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+ge+"]); ":r+=" validate.errors = ["+ge+"]; return false; ":r+=" var err = "+ge+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=ye,u&&(r+=" break; ")}else if(k)if(A=="failing"){r+=" var "+f+" = errors;  ";var Re=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.schema=N,p.schemaPath=t.schemaPath+".additionalProperties",p.errSchemaPath=t.errSchemaPath+"/additionalProperties",p.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var me=d+"["+g+"]";p.dataPathArr[E]=g;var te=t.validate(p);p.baseId=F,t.util.varOccurences(te,y)<2?r+=" "+t.util.varReplace(te,y,me)+" ":r+=" var "+y+" = "+me+"; "+te+" ",r+=" if (!"+m+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+g+"]; }  ",t.compositeRule=p.compositeRule=Re}else{p.schema=N,p.schemaPath=t.schemaPath+".additionalProperties",p.errSchemaPath=t.errSchemaPath+"/additionalProperties",p.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var me=d+"["+g+"]";p.dataPathArr[E]=g;var te=t.validate(p);p.baseId=F,t.util.varOccurences(te,y)<2?r+=" "+t.util.varReplace(te,y,me)+" ":r+=" var "+y+" = "+me+"; "+te+" ",u&&(r+=" if (!"+m+") break; ")}t.errorPath=ae}T&&(r+=" } "),r+=" }  ",u&&(r+=" if ("+m+") { ",h+="}")}var he=t.opts.useDefaults&&!t.compositeRule;if(S.length){var we=S;if(we)for(var B,ne=-1,Ye=we.length-1;ne<Ye;){B=we[ne+=1];var ke=s[B];if(t.opts.strictKeywords?typeof ke=="object"&&Object.keys(ke).length>0||ke===!1:t.util.schemaHasRules(ke,t.RULES.all)){var ze=t.util.getProperty(B),me=d+ze,lt=he&&ke.default!==void 0;p.schema=ke,p.schemaPath=l+ze,p.errSchemaPath=c+"/"+t.util.escapeFragment(B),p.errorPath=t.util.getPath(t.errorPath,B,t.opts.jsonPointers),p.dataPathArr[E]=t.util.toQuotedString(B);var te=t.validate(p);if(p.baseId=F,t.util.varOccurences(te,y)<2){te=t.util.varReplace(te,y,me);var $e=me}else{var $e=y;r+=" var "+y+" = "+me+"; "}if(lt)r+=" "+te+" ";else{if($&&$[B]){r+=" if ( "+$e+" === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(B)+"') "),r+=") { "+m+" = false; ";var ae=t.errorPath,ye=c,ee=t.util.escapeQuotes(B);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(ae,B,t.opts.jsonPointers)),c=t.errSchemaPath+"/required";var oe=oe||[];oe.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+ee+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ee+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var ge=r;r=oe.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+ge+"]); ":r+=" validate.errors = ["+ge+"]; return false; ":r+=" var err = "+ge+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=ye,t.errorPath=ae,r+=" } else { "}else u?(r+=" if ( "+$e+" === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(B)+"') "),r+=") { "+m+" = true; } else { "):(r+=" if ("+$e+" !== undefined ",x&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(B)+"') "),r+=" ) { ");r+=" "+te+" } "}}u&&(r+=" if ("+m+") { ",h+="}")}}if(C.length){var ce=C;if(ce)for(var Y,fe=-1,Ne=ce.length-1;fe<Ne;){Y=ce[fe+=1];var ke=w[Y];if(t.opts.strictKeywords?typeof ke=="object"&&Object.keys(ke).length>0||ke===!1:t.util.schemaHasRules(ke,t.RULES.all)){p.schema=ke,p.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(Y),p.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(Y),x?r+=" "+_+" = "+_+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+_+".length; "+b+"++) { var "+g+" = "+_+"["+b+"]; ":r+=" for (var "+g+" in "+d+") { ",r+=" if ("+t.usePattern(Y)+".test("+g+")) { ",p.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var me=d+"["+g+"]";p.dataPathArr[E]=g;var te=t.validate(p);p.baseId=F,t.util.varOccurences(te,y)<2?r+=" "+t.util.varReplace(te,y,me)+" ":r+=" var "+y+" = "+me+"; "+te+" ",u&&(r+=" if (!"+m+") break; "),r+=" } ",u&&(r+=" else "+m+" = true; "),r+=" }  ",u&&(r+=" if ("+m+") { ",h+="}")}}}return u&&(r+=" "+h+" if ("+f+" == errors) {"),r},SU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t),h="";p.level++;var m="valid"+p.level;if(r+="var "+f+" = errors;",t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){p.schema=s,p.schemaPath=l,p.errSchemaPath=c;var g="key"+i,b="idx"+i,E="i"+i,y="' + "+g+" + '",_=p.dataLevel=t.dataLevel+1,S="data"+_,w="dataProperties"+i,C=t.opts.ownProperties,N=t.baseId;C&&(r+=" var "+w+" = undefined; "),C?r+=" "+w+" = "+w+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+w+".length; "+b+"++) { var "+g+" = "+w+"["+b+"]; ":r+=" for (var "+g+" in "+d+") { ",r+=" var startErrs"+i+" = errors; ";var T=g,P=t.compositeRule;t.compositeRule=p.compositeRule=!0;var k=t.validate(p);p.baseId=N,t.util.varOccurences(k,S)<2?r+=" "+t.util.varReplace(k,S,T)+" ":r+=" var "+S+" = "+T+"; "+k+" ",t.compositeRule=p.compositeRule=P,r+=" if (!"+m+") { for (var "+E+"=startErrs"+i+"; "+E+"<errors; "+E+"++) { vErrors["+E+"].propertyName = "+g+"; }   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",t.opts.messages!==!1&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),u&&(r+=" break; "),r+=" } }"}return u&&(r+=" "+h+" if ("+f+" == errors) {"),r},_U=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data;p&&(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var h="schema"+i;if(!p)if(s.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var m=[],g=s;if(g)for(var b,E=-1,y=g.length-1;E<y;){b=g[E+=1];var _=t.schema.properties[b];_&&(t.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:t.util.schemaHasRules(_,t.RULES.all))||(m[m.length]=b)}}else var m=s;if(p||m.length){var S=t.errorPath,w=p||m.length>=t.opts.loopRequired,C=t.opts.ownProperties;if(u)if(r+=" var missing"+i+"; ",w){p||(r+=" var "+h+" = validate.schema"+l+"; ");var N="i"+i,T="schema"+i+"["+N+"]",P="' + "+T+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(S,T,t.opts.jsonPointers)),r+=" var "+f+" = true; ",p&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=" for (var "+N+" = 0; "+N+" < "+h+".length; "+N+"++) { "+f+" = "+d+"["+h+"["+N+"]] !== undefined ",C&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+h+"["+N+"]) "),r+="; if (!"+f+") break; } ",p&&(r+="  }  "),r+="  if (!"+f+") {   ";var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var A=r;r=k.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+A+"]); ":r+=" validate.errors = ["+A+"]; return false; ":r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var I=m;if(I)for(var x,N=-1,F=I.length-1;N<F;){x=I[N+=1],N&&(r+=" || ");var O=t.util.getProperty(x),$=d+O;r+=" ( ( "+$+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(x)+"') "),r+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?x:O)+") ) "}r+=") {  ";var T="missing"+i,P="' + "+T+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(S,T,!0):S+" + "+T);var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var A=r;r=k.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+A+"]); ":r+=" validate.errors = ["+A+"]; return false; ":r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(w){p||(r+=" var "+h+" = validate.schema"+l+"; ");var N="i"+i,T="schema"+i+"["+N+"]",P="' + "+T+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(S,T,t.opts.jsonPointers)),p&&(r+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),r+=" for (var "+N+" = 0; "+N+" < "+h+".length; "+N+"++) { if ("+d+"["+h+"["+N+"]] === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+h+"["+N+"]) "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var V=m;if(V)for(var x,q=-1,B=V.length-1;q<B;){x=V[q+=1];var O=t.util.getProperty(x),P=t.util.escapeQuotes(x),$=d+O;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(S,x,t.opts.jsonPointers)),r+=" if ( "+$+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(x)+"') "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=S}else u&&(r+=" if (true) {");return r},EU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data,h;if(p?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",h="schema"+i):h=s,(s||p)&&t.opts.uniqueItems!==!1){p&&(r+=" var "+f+"; if ("+h+" === false || "+h+" === undefined) "+f+" = true; else if (typeof "+h+" != 'boolean') "+f+" = false; else { "),r+=" var i = "+d+".length , "+f+" = true , j; if (i > 1) { ";var m=t.schema.items&&t.schema.items.type,g=Array.isArray(m);if(!m||m=="object"||m=="array"||g&&(m.indexOf("object")>=0||m.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+f+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var b="checkDataType"+(g?"s":"");r+=" if ("+t.util[b](m,"item",t.opts.strictNumbers,!0)+") continue; ",g&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",p&&(r+="  }  "),r+=" if (!"+f+") {   ";var E=E||[];E.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { i: i, j: j } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(r+=" , schema:  ",p?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var y=r;r=E.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r},CU={$ref:iU,allOf:oU,anyOf:sU,$comment:lU,const:uU,contains:cU,dependencies:dU,enum:fU,format:pU,if:hU,items:mU,maximum:Py,minimum:Py,maxItems:Ry,minItems:Ry,maxLength:Ay,minLength:Ay,maxProperties:ky,minProperties:ky,multipleOf:vU,not:gU,oneOf:yU,pattern:bU,properties:wU,propertyNames:SU,required:_U,uniqueItems:EU,validate:gE},$y=CU,Nc=Sa.toHash,xU=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],n=["type","$comment"],a=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return t.all=Nc(n),t.types=Nc(r),t.forEach(function(i){i.rules=i.rules.map(function(o){var s;if(typeof o=="object"){var l=Object.keys(o)[0];s=o[l],o=l,s.forEach(function(u){n.push(u),t.all[u]=!0})}n.push(o);var c=t.all[o]={keyword:o,code:$y[o],implements:s};return c}),t.all.$comment={keyword:"$comment",code:$y.$comment},i.type&&(t.types[i.type]=i)}),t.keywords=Nc(n.concat(a)),t.custom={},t},Fy=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],NU=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var a=t[n].split("/"),r=e,i;for(i=1;i<a.length;i++)r=r[a[i]];for(i=0;i<Fy.length;i++){var o=Fy[i],s=r[o];s&&(r[o]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},IU=Ah.MissingRef,TU=AE;function AE(e,t,n){var a=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof t=="function"&&(n=t,t=void 0);var r=i(e).then(function(){var s=a._addSchema(e,void 0,t);return s.validate||o(s)});return n&&r.then(function(s){n(null,s)},n),r;function i(s){var l=s.$schema;return l&&!a.getSchema(l)?AE.call(a,{$ref:l},!0):Promise.resolve()}function o(s){try{return a._compile(s)}catch(c){if(c instanceof IU)return l(c);throw c}function l(c){var u=c.missingSchema;if(p(u))throw new Error("Schema "+u+" is loaded but "+c.missingRef+" cannot be resolved");var d=a._loadingSchemas[u];return d||(d=a._loadingSchemas[u]=a._opts.loadSchema(u),d.then(f,f)),d.then(function(h){if(!p(u))return i(h).then(function(){p(u)||a.addSchema(h,u,void 0,t)})}).then(function(){return o(s)});function f(){delete a._loadingSchemas[u]}function p(h){return a._refs[h]||a._schemas[h]}}}}var PU=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d,f="data"+(o||""),p="valid"+i,h="errs__"+i,m=t.opts.$data&&s&&s.$data,g;m?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",g="schema"+i):g=s;var b=this,E="definition"+i,y=b.definition,_="",S,w,C,N,T;if(m&&y.$data){T="keywordValidate"+i;var P=y.validateSchema;r+=" var "+E+" = RULES.custom['"+n+"'].definition; var "+T+" = "+E+".validate;"}else{if(N=t.useCustomRule(b,s,t.schema,t),!N)return;g="validate.schema"+l,T=N.code,S=y.compile,w=y.inline,C=y.macro}var k=T+".errors",A="i"+i,I="ruleErr"+i,x=y.async;if(x&&!t.async)throw new Error("async keyword in sync schema");if(w||C||(r+=""+k+" = null;"),r+="var "+h+" = errors;var "+p+";",m&&y.$data&&(_+="}",r+=" if ("+g+" === undefined) { "+p+" = true; } else { ",P&&(_+="}",r+=" "+p+" = "+E+".validateSchema("+g+"); if ("+p+") { ")),w)y.statements?r+=" "+N.validate+" ":r+=" "+p+" = "+N.validate+"; ";else if(C){var F=t.util.copy(t),_="";F.level++;var O="valid"+F.level;F.schema=N.validate,F.schemaPath="";var $=t.compositeRule;t.compositeRule=F.compositeRule=!0;var V=t.validate(F).replace(/validate\.schema/g,T);t.compositeRule=F.compositeRule=$,r+=" "+V}else{var q=q||[];q.push(r),r="",r+="  "+T+".call( ",t.opts.passContext?r+="this":r+="self",S||y.schema===!1?r+=" , "+f+" ":r+=" , "+g+" , "+f+" , validate.schema"+t.schemaPath+" ",r+=" , (dataPath || '')",t.errorPath!='""'&&(r+=" + "+t.errorPath);var B=o?"data"+(o-1||""):"parentData",j=o?t.dataPathArr[o]:"parentDataProperty";r+=" , "+B+" , "+j+" , rootData )  ";var Q=r;r=q.pop(),y.errors===!1?(r+=" "+p+" = ",x&&(r+="await "),r+=""+Q+"; "):x?(k="customErrors"+i,r+=" var "+k+" = null; try { "+p+" = await "+Q+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } "):r+=" "+k+" = null; "+p+" = "+Q+"; "}if(y.modifying&&(r+=" if ("+B+") "+f+" = "+B+"["+j+"];"),r+=""+_,y.valid)u&&(r+=" if (true) { ");else{r+=" if ( ",y.valid===void 0?(r+=" !",C?r+=""+O:r+=""+p):r+=" "+!y.valid+" ",r+=") { ",d=b.keyword;var q=q||[];q.push(r),r="";var q=q||[];q.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+b.keyword+"' } ",t.opts.messages!==!1&&(r+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var X=r;r=q.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+X+"]); ":r+=" validate.errors = ["+X+"]; return false; ":r+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Y=r;r=q.pop(),w?y.errors?y.errors!="full"&&(r+="  for (var "+A+"="+h+"; "+A+"<errors; "+A+"++) { var "+I+" = vErrors["+A+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(r+=" "+I+".schema = "+g+"; "+I+".data = "+f+"; "),r+=" } "):y.errors===!1?r+=" "+Y+" ":(r+=" if ("+h+" == errors) { "+Y+" } else {  for (var "+A+"="+h+"; "+A+"<errors; "+A+"++) { var "+I+" = vErrors["+A+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(r+=" "+I+".schema = "+g+"; "+I+".data = "+f+"; "),r+=" } } "):C?(r+="   var err =   ",t.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+b.keyword+"' } ",t.opts.messages!==!1&&(r+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):y.errors===!1?r+=" "+Y+" ":(r+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+A+"="+h+"; "+A+"<errors; "+A+"++) { var "+I+" = vErrors["+A+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+t.errorPath+";  "+I+'.schemaPath = "'+c+'";  ',t.opts.verbose&&(r+=" "+I+".schema = "+g+"; "+I+".data = "+f+"; "),r+=" } } else { "+Y+" } "),r+=" } ",u&&(r+=" else { ")}return r};const RU="http://json-schema.org/draft-07/schema#",AU="http://json-schema.org/draft-07/schema#",kU="Core schema meta-schema",$U={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},FU=["object","boolean"],DU={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},kE={$schema:RU,$id:AU,title:kU,definitions:$U,type:FU,properties:DU,default:!0};var Dy=kE,OU={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Dy.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Dy.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},qU=/^[a-z_$][a-z0-9_$-]*$/i,LU=PU,VU=OU,MU={add:BU,get:UU,remove:zU,validate:Yd};function BU(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!qU.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var r=0;r<a.length;r++)o(e,a[r],t);else o(e,a,t);var i=t.metaSchema;i&&(t.$data&&this._opts.$data&&(i={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(i,!0))}n.keywords[e]=n.all[e]=!0;function o(s,l,c){for(var u,d=0;d<n.length;d++){var f=n[d];if(f.type==l){u=f;break}}u||(u={type:l,rules:[]},n.push(u));var p={keyword:s,definition:c,custom:!0,code:LU,implements:c.implements};u.rules.push(p),n.custom[s]=p}return this}function UU(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1}function zU(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var a=t[n].rules,r=0;r<a.length;r++)if(a[r].keyword==e){a.splice(r,1);break}return this}function Yd(e,t){Yd.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(VU,!0);if(n(e))return!0;if(Yd.errors=n.errors,t)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}const HU="http://json-schema.org/draft-07/schema#",WU="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",jU="Meta-schema for $data reference (JSON Schema extension proposal)",QU="object",GU=["$data"],YU={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},XU=!1,KU={$schema:HU,$id:WU,description:jU,type:QU,required:GU,properties:YU,additionalProperties:XU};var $E=L9,bn=Rh,ZU=W9,FE=fE,JU=vE,ez=Z9,tz=xU,DE=NU,OE=Sa,rz=ot;ot.prototype.validate=az;ot.prototype.compile=iz;ot.prototype.addSchema=oz;ot.prototype.addMetaSchema=sz;ot.prototype.validateSchema=lz;ot.prototype.getSchema=cz;ot.prototype.removeSchema=fz;ot.prototype.addFormat=wz;ot.prototype.errorsText=bz;ot.prototype._addSchema=pz;ot.prototype._compile=hz;ot.prototype.compileAsync=TU;var xl=MU;ot.prototype.addKeyword=xl.add;ot.prototype.getKeyword=xl.get;ot.prototype.removeKeyword=xl.remove;ot.prototype.validateKeyword=xl.validate;var qE=Ah;ot.ValidationError=qE.Validation;ot.MissingRefError=qE.MissingRef;ot.$dataMetaSchema=DE;var ds="http://json-schema.org/draft-07/schema",Oy=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],nz=["/properties"];function ot(e){if(!(this instanceof ot))return new ot(e);e=this._opts=OE.copy(e)||{},Nz(this),this._schemas={},this._refs={},this._fragments={},this._formats=ez(e.format),this._cache=e.cache||new ZU,this._loadingSchemas={},this._compilations=[],this.RULES=tz(),this._getId=mz(e),e.loopRequired=e.loopRequired||1/0,e.errorDataPath=="property"&&(e._errorDataPathProperty=!0),e.serialize===void 0&&(e.serialize=JU),this._metaOpts=xz(this),e.formats&&Ez(this),e.keywords&&Cz(this),Sz(this),typeof e.meta=="object"&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),_z(this)}function az(e,t){var n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);n=a.validate||this._compile(a)}var r=n(t);return n.$async!==!0&&(this.errors=n.errors),r}function iz(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)}function oz(e,t,n,a){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.addSchema(e[r],void 0,n,a);return this}var i=this._getId(e);if(i!==void 0&&typeof i!="string")throw new Error("schema id must be string");return t=bn.normalizeId(t||i),VE(this,t),this._schemas[t]=this._addSchema(e,n,a,!0),this}function sz(e,t,n){return this.addSchema(e,t,n,!0),this}function lz(e,t){var n=e.$schema;if(n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this._opts.defaultMeta||uz(this),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(n,e);if(!a&&t){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return a}function uz(e){var t=e._opts.meta;return e._opts.defaultMeta=typeof t=="object"?e._getId(t)||t:e.getSchema(ds)?ds:void 0,e._opts.defaultMeta}function cz(e){var t=LE(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return dz(this,e)}}function dz(e,t){var n=bn.schema.call(e,{schema:{}},t);if(n){var a=n.schema,r=n.root,i=n.baseId,o=$E.call(e,a,r,void 0,i);return e._fragments[t]=new FE({ref:t,fragment:!0,schema:a,root:r,baseId:i,validate:o}),o}}function LE(e,t){return t=bn.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function fz(e){if(e instanceof RegExp)return go(this,this._schemas,e),go(this,this._refs,e),this;switch(typeof e){case"undefined":return go(this,this._schemas),go(this,this._refs),this._cache.clear(),this;case"string":var t=LE(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,a=n?n(e):e;this._cache.del(a);var r=this._getId(e);r&&(r=bn.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function go(e,t,n){for(var a in t){var r=t[a];!r.meta&&(!n||n.test(a))&&(e._cache.del(r.cacheKey),delete t[a])}}function pz(e,t,n,a){if(typeof e!="object"&&typeof e!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,i=r?r(e):e,o=this._cache.get(i);if(o)return o;a=a||this._opts.addUsedSchema!==!1;var s=bn.normalizeId(this._getId(e));s&&a&&VE(this,s);var l=this._opts.validateSchema!==!1&&!t,c;l&&!(c=s&&s==bn.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=bn.ids.call(this,e),d=new FE({id:s,schema:e,localRefs:u,cacheKey:i,meta:n});return s[0]!="#"&&a&&(this._refs[s]=d),this._cache.put(i,d),l&&c&&this.validateSchema(e,!0),d}function hz(e,t){if(e.compiling)return e.validate=r,r.schema=e.schema,r.errors=null,r.root=t||r,e.schema.$async===!0&&(r.$async=!0),r;e.compiling=!0;var n;e.meta&&(n=this._opts,this._opts=this._metaOpts);var a;try{a=$E.call(this,e.schema,t,e.localRefs)}catch(i){throw delete e.validate,i}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function r(){var i=e.validate,o=i.apply(this,arguments);return r.errors=i.errors,o}}function mz(e){switch(e.schemaId){case"auto":return yz;case"id":return vz;default:return gz}}function vz(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function gz(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function yz(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function bz(e,t){if(e=e||this.errors,!e)return"No errors";t=t||{};for(var n=t.separator===void 0?", ":t.separator,a=t.dataVar===void 0?"data":t.dataVar,r="",i=0;i<e.length;i++){var o=e[i];o&&(r+=a+o.dataPath+" "+o.message+n)}return r.slice(0,-n.length)}function wz(e,t){return typeof t=="string"&&(t=new RegExp(t)),this._formats[e]=t,this}function Sz(e){var t;if(e._opts.$data&&(t=KU,e.addMetaSchema(t,t.$id,!0)),e._opts.meta!==!1){var n=kE;e._opts.$data&&(n=DE(n,nz)),e.addMetaSchema(n,ds,!0),e._refs["http://json-schema.org/schema"]=ds}}function _z(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}function Ez(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}function Cz(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}function VE(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function xz(e){for(var t=OE.copy(e._opts),n=0;n<Oy.length;n++)delete t[Oy[n]];return t}function Nz(e){var t=e._opts.logger;if(t===!1)e.logger={log:Ic,warn:Ic,error:Ic};else{if(t===void 0&&(t=console),!(typeof t=="object"&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function Ic(){}const Iz=Nt(rz);let Tz=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function qy(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ME(e,t,n){return t&&qy(e.prototype,t),n&&qy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(){return ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ue.apply(this,arguments)}function Tr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Xd(e,t)}function Xd(e,t){return Xd=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Xd(e,t)}function ft(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,i;for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Pz(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BE(e){var t=Pz(e,"string");return typeof t=="symbol"?t:String(t)}function za(e){var t=e.type,n=t===void 0?"default":t,a=e.icon,r=e.className,i=ft(e,["type","icon","className"]);return z.createElement("button",ue({type:"button",className:"btn btn-"+n+" "+r},i),z.createElement("i",{className:"glyphicon glyphicon-"+a}))}function $h(e){var t=e.className,n=e.onClick,a=e.disabled;return z.createElement("div",{className:"row"},z.createElement("p",{className:"col-xs-3 col-xs-offset-9 text-right "+t},z.createElement(za,{type:"info",icon:"plus",className:"btn-add col-xs-12","aria-label":"Add",tabIndex:"0",onClick:n,disabled:a})))}var Rz=Fe.shape({ArrayFieldTemplate:Fe.elementType,FieldTemplate:Fe.elementType,ObjectFieldTemplate:Fe.elementType,definitions:Fe.object.isRequired,rootSchema:Fe.object,fields:Fe.objectOf(Fe.elementType).isRequired,formContext:Fe.object.isRequired,widgets:Fe.objectOf(Fe.oneOfType([Fe.func,Fe.object])).isRequired});Fe.bool,Fe.bool,Fe.object,Fe.any,Fe.object,Fe.func,Fe.func.isRequired,Fe.func,Fe.string,Fe.bool,Rz.isRequired,Fe.bool,Fe.object.isRequired,Fe.bool,Fe.bool,Fe.bool;var Vr=UE(),Ly=null,Vy=null,Kd="__rjsf_rootSchema";function UE(){var e=new Iz({errorDataPath:"property",allErrors:!0,multipleOfPrecision:8,schemaId:"auto",unknownFormats:"ignore"});return e.addFormat("data-url",/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/),e.addFormat("color",/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/),e}function Az(e){return e.length?e.reduce(function(t,n){var a=n.property,r=n.message,i=K1(a),o=t;i.length>0&&i[0]===""&&i.splice(0,1);for(var c=i.slice(0),s=Array.isArray(c),l=0,c=s?c:c[Symbol.iterator]();;){var u;if(s){if(l>=c.length)break;u=c[l++]}else{if(l=c.next(),l.done)break;u=l.value}var d=u;d in o||(o[d]={}),o=o[d]}return Array.isArray(o.__errors)?o.__errors=o.__errors.concat(r):r&&(o.__errors=[r]),t},{}):{}}function fn(e,t){t===void 0&&(t="root");var n=[];return"__errors"in e&&(n=n.concat(e.__errors.map(function(a){return{stack:t+": "+a}}))),Object.keys(e).reduce(function(a,r){return r!=="__errors"&&(a=a.concat(fn(e[r],r))),a},n)}function Zd(e){var t={__errors:[],addError:function(a){this.__errors.push(a)}};return st(e)?Object.keys(e).reduce(function(n,a){var r;return ue({},n,(r={},r[a]=Zd(e[a]),r))},t):Array.isArray(e)?e.reduce(function(n,a,r){var i;return ue({},n,(i={},i[r]=Zd(a),i))},t):t}function zE(e){return Object.keys(e).reduce(function(t,n){var a;if(n==="addError")return t;if(n==="__errors"){var r;return ue({},t,(r={},r[n]=e[n],r))}return ue({},t,(a={},a[n]=zE(e[n]),a))},{})}function kz(e){return e===void 0&&(e=[]),e===null?[]:e.map(function(t){var n=t.dataPath,a=t.keyword,r=t.message,i=t.params,o=t.schemaPath,s=""+n;return{name:a,property:s,message:r,params:i,stack:(s+" "+r).trim(),schemaPath:o}})}function HE(e,t,n,a,r,i){r===void 0&&(r=[]),i===void 0&&(i={});var o=t;e=Nl(t,e,o,!0);var s=!Yt(Vy,r),l=!Yt(Ly,i);(s||l)&&(Vr=UE()),r&&s&&Array.isArray(r)&&(Vr.addMetaSchema(r),Vy=r),i&&l&&st(i)&&(Object.keys(i).forEach(function(b){Vr.addFormat(b,i[b])}),Ly=i);var c=null;try{Vr.validate(t,e)}catch(b){c=b}var u=kz(Vr.errors);Vr.errors=null;var d=c&&c.message&&typeof c.message=="string"&&c.message.includes("no schema with key or ref ");d&&(u=[].concat(u,[{stack:c.message}])),typeof a=="function"&&(u=a(u));var f=Az(u);if(d&&(f=ue({},f,{$schema:{__errors:[c.message]}})),typeof n!="function")return{errors:u,errorSchema:f};var p=n(e,Zd(e)),h=zE(p),m=zr(f,h,!0),g=fn(m);return{errors:g,errorSchema:m}}function Jd(e){var t=e;if(e.constructor===Object){t=ue({},e);for(var n in t){var a=t[n];n==="$ref"&&typeof a=="string"&&a.startsWith("#")?t[n]=Kd+a:t[n]=Jd(a)}}else if(Array.isArray(e)){t=[].concat(e);for(var r=0;r<t.length;r++)t[r]=Jd(t[r])}return t}function ef(e,t,n){try{return Vr.addSchema(n,Kd).validate(Jd(e),t)}catch{return!1}finally{Vr.removeSchema(Kd)}}var Fh="__additional_property",Tc={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function $z(e,t,n){if(!e.additionalProperties)return!1;var a=At(t),r=a.expandable;return r===!1?r:e.maxProperties!==void 0?Object.keys(n).length<e.maxProperties:!0}function la(e){var t=e.type;return!t&&e.const?pi(e.const):!t&&e.enum?"string":!t&&(e.properties||e.additionalProperties)?"object":t instanceof Array&&t.length===2&&t.includes("null")?t.find(function(n){return n!=="null"}):t}function Cr(e,t,n){n===void 0&&(n={});var a=la(e);function r(s){if(!s.MergedWidget){var l=s.defaultProps&&s.defaultProps.options||{};s.MergedWidget=function(c){var u=c.options,d=u===void 0?{}:u,f=ft(c,["options"]);return z.createElement(s,ue({options:ue({},l,d)},f))}}return s.MergedWidget}if(typeof t=="function"||iy.isForwardRef(z.createElement(t))||iy.isMemo(t))return r(t);if(typeof t!="string")throw new Error("Unsupported widget definition: "+typeof t);if(n.hasOwnProperty(t)){var i=n[t];return Cr(e,i,n)}if(!Tc.hasOwnProperty(a))throw new Error('No widget for type "'+a+'"');if(Tc[a].hasOwnProperty(t)){var o=n[Tc[a][t]];return Cr(e,o,n)}throw new Error('No widget "'+t+'" for type "'+a+'"')}function Fz(e,t,n){n===void 0&&(n={});try{return Cr(e,t,n),!0}catch(a){if(a.message&&(a.message.startsWith("No widget")||a.message.startsWith("Unsupported widget")))return!1;throw a}}function Fr(e,t,n,a,r){a===void 0&&(a={}),r===void 0&&(r=!1);var i=st(e)?e:{},o=st(a)?a:{},s=t;if(st(s)&&st(i.default))s=zr(s,i.default);else if("default"in i)s=i.default;else if("$ref"in i){var l=Oh(i.$ref,n);return Fr(l,s,n,o,r)}else if("dependencies"in i){var c=GE(i,n,o);return Fr(c,s,n,o,r)}else rf(i)?s=i.items.map(function(h,m){return Fr(h,Array.isArray(t)?t[m]:void 0,n,o,r)}):"oneOf"in i?i=i.oneOf[hi(void 0,i.oneOf,n)]:"anyOf"in i&&(i=i.anyOf[hi(void 0,i.anyOf,n)]);switch(typeof s>"u"&&(s=i.default),la(i)){case"object":return Object.keys(i.properties||{}).reduce(function(h,m){var g=Fr(i.properties[m],(s||{})[m],n,(o||{})[m],r);return(r||g!==void 0)&&(h[m]=g),h},{});case"array":if(Array.isArray(s)&&(s=s.map(function(h,m){return Fr(i.items[m]||i.additionalItems||{},h,n)})),Array.isArray(a)&&(s=a.map(function(h,m){return Fr(i.items,(s||{})[m],n,h)})),i.minItems){if(Dh(i,n))return s||[];var u=s?s.length:0;if(i.minItems>u){var d=s||[],f=Array.isArray(i.items)?i.additionalItems:i.items,p=ZB(new Array(i.minItems-u),Fr(f,f.defaults,n));return d.concat(p)}}}return s}function Nl(e,t,n,a){if(n===void 0&&(n={}),a===void 0&&(a=!1),!st(e))throw new Error("Invalid schema: "+e);var r=Le(e,n,t),i=Fr(r,e.default,n,t,a);return typeof t>"u"?i:st(t)||Array.isArray(t)?tf(i,t):t===0||t===!1||t===""?t:t||i}function tf(e,t){if(Array.isArray(t))return Array.isArray(e)||(e=[]),t.map(function(a,r){return e[r]?tf(e[r],a):a});if(st(t)){var n=Object.assign({},e);return Object.keys(t).reduce(function(a,r){return a[r]=tf(e?e[r]:{},t[r]),a},n)}else return t}function At(e){return Object.keys(e).filter(function(t){return t.indexOf("ui:")===0}).reduce(function(t,n){var a,r=e[n];return n==="ui:widget"&&st(r)?(console.warn("Setting options via ui:widget object is deprecated, use ui:options instead"),ue({},t,r.options||{},{widget:r.component})):n==="ui:options"&&st(r)?ue({},t,r):ue({},t,(a={},a[n.substring(3)]=r,a))},{})}function Dz(e){var t=At(e),n={props:{disabled:!1},submitText:"Submit",norender:!1};return t&&t.submitButtonOptions?Object.assign({},n,t.submitButtonOptions):n}function Oz(e,t,n){var a=At(t),r=a.label,i=r===void 0?!0:r,o=la(e);return o==="array"&&(i=Dh(e,n)||WE(e,t,n)||jE(t)),o==="object"&&(i=!1),o==="boolean"&&!t["ui:widget"]&&(i=!1),t["ui:field"]&&(i=!1),i}function st(e){return typeof File<"u"&&e instanceof File?!1:typeof e=="object"&&e!==null&&!Array.isArray(e)}function zr(e,t,n){n===void 0&&(n=!1);var a=Object.assign({},e);return Object.keys(t).reduce(function(r,i){var o=e?e[i]:{},s=t[i];return e&&e.hasOwnProperty(i)&&st(s)?r[i]=zr(o,s,n):n&&Array.isArray(o)&&Array.isArray(s)?r[i]=o.concat(s):r[i]=s,r},a)}function Ha(e){if(e!==""){if(e===null)return null;if(/\.$/.test(e)||/\.0$/.test(e))return e;var t=Number(e),n=typeof t=="number"&&!Number.isNaN(t);return/\.\d*0$/.test(e)?e:n?t:e}}function qz(e,t){if(!Array.isArray(t))return e;var n=function(d){return d.reduce(function(f,p){return f[p]=!0,f},{})},a=function(d){return d.length>1?"properties '"+d.join("', '")+"'":"property '"+d[0]+"'"},r=n(e),i=t.filter(function(u){return u==="*"||r[u]}),o=n(i),s=e.filter(function(u){return!o[u]}),l=i.indexOf("*");if(l===-1){if(s.length)throw new Error("uiSchema order list does not contain "+a(s));return i}if(l!==i.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");var c=[].concat(i);return c.splice.apply(c,[l,1].concat(s)),c}function Lz(e){return Array.isArray(e.enum)&&e.enum.length===1||e.hasOwnProperty("const")}function Vz(e){if(Array.isArray(e.enum)&&e.enum.length===1)return e.enum[0];if(e.hasOwnProperty("const"))return e.const;throw new Error("schema cannot be inferred as a constant")}function fs(e,t){t===void 0&&(t={});var n=Le(e,t),a=n.oneOf||n.anyOf;return Array.isArray(n.enum)?!0:Array.isArray(a)?a.every(function(r){return Lz(r)}):!1}function Dh(e,t){return t===void 0&&(t={}),!e.uniqueItems||!e.items?!1:fs(e.items,t)}function WE(e,t,n){if(n===void 0&&(n={}),t["ui:widget"]==="files")return!0;if(e.items){var a=Le(e.items,n);return a.type==="string"&&a.format==="data-url"}return!1}function rf(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every(function(t){return st(t)})}function jE(e){return"widget"in At(e)&&At(e).widget!=="hidden"}function My(e){return e.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),st(e.additionalItems)}function ps(e){if(e.enum)return e.enum.map(function(n,a){var r=e.enumNames&&e.enumNames[a]||String(n);return{label:r,value:n}});var t=e.oneOf||e.anyOf;return t.map(function(n){var a=Vz(n),r=n.title||String(a);return{schema:n,label:r,value:a}})}function Oh(e,t){t===void 0&&(t={});var n=e;if(e.startsWith("#"))e=decodeURIComponent(e.substring(1));else throw new Error("Could not find a definition for "+n+".");var a=wl.get(t,e);if(a===void 0)throw new Error("Could not find a definition for "+n+".");return a.hasOwnProperty("$ref")?Oh(a.$ref,t):a}var pi=function(t){if(Array.isArray(t))return"array";if(typeof t=="string")return"string";if(t==null)return"null";if(typeof t=="boolean")return"boolean";if(isNaN(t)){if(typeof t=="object")return"object"}else return"number";return"string"};function Mz(e,t,n){return t===void 0&&(t={}),n===void 0&&(n={}),e=ue({},e,{properties:ue({},e.properties)}),n=st(n)?n:{},Object.keys(n).forEach(function(a){if(!e.properties.hasOwnProperty(a)){var r;e.additionalProperties.hasOwnProperty("$ref")?r=Le({$ref:e.additionalProperties.$ref},t,n):e.additionalProperties.hasOwnProperty("type")?r=ue({},e.additionalProperties):r={type:pi(n[a])},e.properties[a]=r,e.properties[a][Fh]=!0}}),e}var Bz=function(t,n,a){var r=t.if,i=t.then,o=t.else,s=ft(t,["if","then","else"]),l=ef(r,a,n)?i:o;return Le(l?Il(s,Le(l,n,a)):s,n,a)};function Uz(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),e.hasOwnProperty("$ref"))return QE(e,t,n);if(e.hasOwnProperty("dependencies")){var a=GE(e,t,n);return Le(a,t,n)}else return e.hasOwnProperty("allOf")?ue({},e,{allOf:e.allOf.map(function(r){return Le(r,t,n)})}):e}function QE(e,t,n){var a=Oh(e.$ref,t),r=ft(e,["$ref"]);return Le(ue({},a,r),t,n)}function Le(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),!st(e))return{};var a=Uz(e,t,n);if(e.hasOwnProperty("if"))return Bz(e,t,n);if(a.properties){var r={};Object.entries(a.properties).forEach(function(l){var c=l[0],u=l[1],d=n&&n[c],f=st(d)?d:{},p=Le(u,t,f);r[c]=p,u!==p&&a.properties!==r&&(a=ue({},a,{properties:r}))})}if("allOf"in e)try{a=qB(ue({},a,{allOf:a.allOf}))}catch(l){console.warn(`could not merge subschemas in allOf:
`+l);var i=a,o=ft(i,["allOf"]);return o}var s=a.hasOwnProperty("additionalProperties")&&a.additionalProperties!==!1;return s?Mz(a,t,n):a}function GE(e,t,n){var a=e.dependencies,r=a===void 0?{}:a,i=ft(e,["dependencies"]);return"oneOf"in i?i=i.oneOf[hi(n,i.oneOf,t)]:"anyOf"in i&&(i=i.anyOf[hi(n,i.anyOf,t)]),YE(r,i,t,n)}function YE(e,t,n,a){for(var r in e)if(a[r]!==void 0&&!(t.properties&&!(r in t.properties))){var i=e[r],o=ft(e,[r].map(BE));return Array.isArray(i)?t=zz(t,i):st(i)&&(t=Hz(t,n,a,r,i)),YE(o,t,n,a)}return t}function zz(e,t){if(!t)return e;var n=Array.isArray(e.required)?Array.from(new Set([].concat(e.required,t))):t;return ue({},e,{required:n})}function Hz(e,t,n,a,r){var i=Le(r,t,n),o=i.oneOf,s=ft(i,["oneOf"]);if(e=Il(e,s),o===void 0)return e;if(!Array.isArray(o))throw new Error("invalid: it is some "+typeof o+" instead of an array");var l=o.map(function(c){return c.hasOwnProperty("$ref")?QE(c,t,n):c});return Wz(e,t,n,a,l)}function Wz(e,t,n,a,r){var i=r.filter(function(u){if(!u.properties)return!1;var d=u.properties[a];if(d){var f,p={type:"object",properties:(f={},f[a]=d,f)},h=HE(n,p),m=h.errors;return m.length===0}});if(i.length!==1)return console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),e;var o=i[0],s=o.properties,l=ft(s,[a].map(BE)),c=ue({},o,{properties:l});return Il(e,Le(c,t,n))}function Il(e,t){var n=Object.assign({},e);return Object.keys(t).reduce(function(a,r){var i=e?e[r]:{},o=t[r];return e&&e.hasOwnProperty(r)&&st(o)?a[r]=Il(i,o):e&&t&&(la(e)==="object"||la(t)==="object")&&r==="required"&&Array.isArray(i)&&Array.isArray(o)?a[r]=X1(i,o):a[r]=o,a},n)}function yo(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function Yt(e,t,n,a){if(n===void 0&&(n=[]),a===void 0&&(a=[]),e===t)return!0;if(typeof e=="function"||typeof t=="function")return!0;if(typeof e!="object"||typeof t!="object")return!1;if(e===null||t===null)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(yo(e)||yo(t)){if(!(yo(e)&&yo(t)))return!1;var r=Array.prototype.slice;return Yt(r.call(e),r.call(t),n,a)}else{if(e.constructor!==t.constructor)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length===0&&o.length===0)return!0;if(i.length!==o.length)return!1;for(var s=n.length;s--;)if(n[s]===e)return a[s]===t;n.push(e),a.push(t),i.sort(),o.sort();for(var l=i.length-1;l>=0;l--)if(i[l]!==o[l])return!1;for(var c,u=i.length-1;u>=0;u--)if(c=i[u],!Yt(e[c],t[c],n,a))return!1;return n.pop(),a.pop(),!0}}function qh(e,t,n){var a=e.props,r=e.state;return!Yt(a,t)||!Yt(r,n)}function wn(e,t,n,a,r,i){a===void 0&&(a={}),r===void 0&&(r="root"),i===void 0&&(i="_");var o={$id:t||r};if("$ref"in e||"dependencies"in e||"allOf"in e){var s=Le(e,n,a);return wn(s,t,n,a,r,i)}if("items"in e&&!e.items.$ref)return wn(e.items,t,n,a,r,i);if(e.type!=="object")return o;for(var l in e.properties||{}){var c=e.properties[l],u=o.$id+i+l;o[l]=wn(st(c)?c:{},u,n,(a||{})[l],r,i)}return o}function Wa(e,t,n,a){t===void 0&&(t=""),a===void 0&&(a={});var r={$name:t.replace(/^\./,"")};if("$ref"in e||"dependencies"in e||"allOf"in e){var i=Le(e,n,a);return Wa(i,t,n,a)}if(e.hasOwnProperty("additionalProperties")&&(r.__rjsf_additionalProperties=!0),e.hasOwnProperty("items")&&Array.isArray(a))a.forEach(function(s,l){r[l]=Wa(e.items,t+"."+l,n,s)});else if(e.hasOwnProperty("properties"))for(var o in e.properties)r[o]=Wa(e.properties[o],t+"."+o,n,(a||{})[o]);return r}function ka(e,t){if(t===void 0&&(t=!0),!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};var n=new Date(e);if(Number.isNaN(n.getTime()))throw new Error("Unable to parse date "+e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:t?n.getUTCHours():0,minute:t?n.getUTCMinutes():0,second:t?n.getUTCSeconds():0}}function By(e,t){var n=e.year,a=e.month,r=e.day,i=e.hour,o=i===void 0?0:i,s=e.minute,l=s===void 0?0:s,c=e.second,u=c===void 0?0:c;t===void 0&&(t=!0);var d=Date.UTC(n,a-1,r,o,l,u),f=new Date(d).toJSON();return t?f:f.slice(0,10)}function jz(e){if(!e)return"";var t=new Date(e),n=Dr(t.getFullYear(),4),a=Dr(t.getMonth()+1,2),r=Dr(t.getDate(),2),i=Dr(t.getHours(),2),o=Dr(t.getMinutes(),2),s=Dr(t.getSeconds(),2),l=Dr(t.getMilliseconds(),3);return n+"-"+a+"-"+r+"T"+i+":"+o+":"+s+"."+l}function Qz(e){if(e)return new Date(e).toJSON()}function Dr(e,t){for(var n=String(e);n.length<t;)n="0"+n;return n}function Gz(e){var t=e.split(","),n=t[0].split(";"),a=n[0].replace("data:",""),r=n.filter(function(u){return u.split("=")[0]==="name"}),i;r.length!==1?i="unknown":i=r[0].split("=")[1];for(var o=atob(t[1]),s=[],l=0;l<o.length;l++)s.push(o.charCodeAt(l));var c=new window.Blob([new Uint8Array(s)],{type:a});return{blob:c,name:i}}function XE(e){var t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||e.minimum===0)&&(t.min=e.minimum),(e.maximum||e.maximum===0)&&(t.max=e.maximum),t}function hi(e,t,n){if(e===void 0)return 0;for(var a=0;a<t.length;a++){var r=t[a];if(r.properties){var i={anyOf:Object.keys(r.properties).map(function(l){return{required:[l]}})},o=void 0;if(r.anyOf){var s=ue({},r);s.allOf?s.allOf=s.allOf.slice():s.allOf=[],s.allOf.push(i),o=s}else o=Object.assign({},r,i);if(delete o.required,ef(o,e,n))return a}else if(ef(r,e,n))return a}return 0}function Ro(e){return e.const||e.enum&&e.enum.length===1&&e.enum[0]===!0?!0:e.anyOf&&e.anyOf.length===1?Ro(e.anyOf[0]):e.oneOf&&e.oneOf.length===1?Ro(e.oneOf[0]):e.allOf?e.allOf.some(Ro):!1}function KE(e){var t=e.TitleField,n=e.idSchema,a=e.title,r=e.required;if(!a)return null;var i=n.$id+"__title";return z.createElement(t,{id:i,title:a,required:r})}function Yz(e){var t=e.DescriptionField,n=e.idSchema,a=e.description;if(!a)return null;var r=n.$id+"__description";return z.createElement(t,{id:r,description:a})}function ZE(e){var t={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return z.createElement("div",{key:e.key,className:e.className},z.createElement("div",{className:e.hasToolbar?"col-xs-9":"col-xs-12"},e.children),e.hasToolbar&&z.createElement("div",{className:"col-xs-3 array-item-toolbox"},z.createElement("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"}},(e.hasMoveUp||e.hasMoveDown)&&z.createElement(za,{icon:"arrow-up","aria-label":"Move up",className:"array-item-move-up",tabIndex:"-1",style:t,disabled:e.disabled||e.readonly||!e.hasMoveUp,onClick:e.onReorderClick(e.index,e.index-1)}),(e.hasMoveUp||e.hasMoveDown)&&z.createElement(za,{icon:"arrow-down",className:"array-item-move-down","aria-label":"Move down",tabIndex:"-1",style:t,disabled:e.disabled||e.readonly||!e.hasMoveDown,onClick:e.onReorderClick(e.index,e.index+1)}),e.hasRemove&&z.createElement(za,{type:"danger",icon:"remove","aria-label":"Remove",className:"array-item-remove",tabIndex:"-1",style:t,disabled:e.disabled||e.readonly,onClick:e.onDropIndexClick(e.index)}))))}function Xz(e){return z.createElement("fieldset",{className:e.className,id:e.idSchema.$id},z.createElement(KE,{key:"array-field-title-"+e.idSchema.$id,TitleField:e.TitleField,idSchema:e.idSchema,title:e.uiSchema["ui:title"]||e.title,required:e.required}),(e.uiSchema["ui:description"]||e.schema.description)&&z.createElement("div",{className:"field-description",key:"field-description-"+e.idSchema.$id},e.uiSchema["ui:description"]||e.schema.description),z.createElement("div",{className:"row array-item-list",key:"array-item-list-"+e.idSchema.$id},e.items&&e.items.map(ZE)),e.canAdd&&z.createElement($h,{className:"array-item-add",onClick:e.onAddClick,disabled:e.disabled||e.readonly}))}function Kz(e){return z.createElement("fieldset",{className:e.className,id:e.idSchema.$id},z.createElement(KE,{key:"array-field-title-"+e.idSchema.$id,TitleField:e.TitleField,idSchema:e.idSchema,title:e.uiSchema["ui:title"]||e.title,required:e.required}),(e.uiSchema["ui:description"]||e.schema.description)&&z.createElement(Yz,{key:"array-field-description-"+e.idSchema.$id,DescriptionField:e.DescriptionField,idSchema:e.idSchema,description:e.uiSchema["ui:description"]||e.schema.description}),z.createElement("div",{className:"row array-item-list",key:"array-item-list-"+e.idSchema.$id},e.items&&e.items.map(function(t){return ZE(t)})),e.canAdd&&z.createElement($h,{className:"array-item-add",onClick:e.onAddClick,disabled:e.disabled||e.readonly}))}function nf(){return Tz()}function Uy(e){return Array.isArray(e)?e.map(function(t){return{key:nf(),item:t}}):[]}function $a(e){return e.map(function(t){return t.item})}var JE=function(e){Tr(t,e);function t(a){var r;r=e.call(this,a)||this,r._getNewFormDataRow=function(){var s=r.props,l=s.schema,c=s.registry,u=c.rootSchema,d=l.items;return rf(l)&&My(l)&&(d=l.additionalItems),Nl(d,void 0,u)},r.onAddClick=function(s){s&&s.preventDefault();var l=r.props.onChange,c={key:nf(),item:r._getNewFormDataRow()},u=[].concat(r.state.keyedFormData,[c]);r.setState({keyedFormData:u,updatedKeyedFormData:!0},function(){return l($a(u))})},r.onAddIndexClick=function(s){return function(l){l&&l.preventDefault();var c=r.props.onChange,u={key:nf(),item:r._getNewFormDataRow()},d=[].concat(r.state.keyedFormData);d.splice(s,0,u),r.setState({keyedFormData:d,updatedKeyedFormData:!0},function(){return c($a(d))})}},r.onDropIndexClick=function(s){return function(l){l&&l.preventDefault();var c=r.props.onChange,u=r.state.keyedFormData,d;if(r.props.errorSchema){d={};var f=r.props.errorSchema;for(var p in f)p=parseInt(p),p<s?d[p]=f[p]:p>s&&(d[p-1]=f[p])}var h=u.filter(function(m,g){return g!==s});r.setState({keyedFormData:h,updatedKeyedFormData:!0},function(){return c($a(h),d)})}},r.onReorderClick=function(s,l){return function(c){c&&(c.preventDefault(),c.target.blur());var u=r.props.onChange,d;if(r.props.errorSchema){d={};var f=r.props.errorSchema;for(var p in f)p==s?d[l]=f[s]:p==l?d[s]=f[l]:d[p]=f[p]}var h=r.state.keyedFormData;function m(){var b=h.slice();return b.splice(s,1),b.splice(l,0,h[s]),b}var g=m();r.setState({keyedFormData:g},function(){return u($a(g),d)})}},r.onChangeForIndex=function(s){return function(l,c){var u,d=r.props,f=d.formData,p=d.onChange,h=f.map(function(m,g){var b=typeof l>"u"?null:l;return s===g?b:m});p(h,c&&r.props.errorSchema&&ue({},r.props.errorSchema,(u={},u[s]=c,u)))}},r.onSelectChange=function(s){r.props.onChange(s)};var i=a.formData,o=Uy(i);return r.state={keyedFormData:o,updatedKeyedFormData:!1},r}t.getDerivedStateFromProps=function(r,i){if(i.updatedKeyedFormData)return{updatedKeyedFormData:!1};var o=r.formData||[],s=i.keyedFormData||[],l=o.length===s.length?s.map(function(c,u){return{key:c.key,item:o[u]}}):Uy(o);return{keyedFormData:l}};var n=t.prototype;return n.isItemRequired=function(r){return Array.isArray(r.type)?!v5(r.type,"null"):r.type!=="null"},n.canAddItem=function(r){var i=this.props,o=i.schema,s=i.uiSchema,l=At(s),c=l.addable;return c!==!1&&(o.maxItems!==void 0?c=r.length<o.maxItems:c=!0),c},n.render=function(){var r=this.props,i=r.schema,o=r.uiSchema,s=r.idSchema,l=r.registry,c=l.rootSchema;if(!i.hasOwnProperty("items")){var u=l.fields,d=u.UnsupportedField;return z.createElement(d,{schema:i,idSchema:s,reason:"Missing items definition"})}return Dh(i,c)?this.renderMultiSelect():jE(o)?this.renderCustomWidget():rf(i)?this.renderFixedArray():WE(i,o,c)?this.renderFiles():this.renderNormalArray()},n.renderNormalArray=function(){var r=this,i=this.props,o=i.schema,s=i.uiSchema,l=i.errorSchema,c=i.idSchema,u=i.name,d=i.required,f=i.disabled,p=i.readonly,h=i.hideError,m=i.autofocus,g=i.registry,b=i.onBlur,E=i.onFocus,y=i.idPrefix,_=i.idSeparator,S=_===void 0?"_":_,w=i.rawErrors,C=o.title===void 0?u:o.title,N=g.ArrayFieldTemplate,T=g.rootSchema,P=g.fields,k=g.formContext,A=P.TitleField,I=P.DescriptionField,x=Le(o.items,T),F=$a(this.state.keyedFormData),O={canAdd:this.canAddItem(F),items:this.state.keyedFormData.map(function(V,q){var B=V.key,j=V.item,Q=Le(o.items,T,j),X=l?l[q]:void 0,Y=c.$id+S+q,Z=wn(Q,Y,T,j,y,S);return r.renderArrayFieldItem({key:B,index:q,canMoveUp:q>0,canMoveDown:q<F.length-1,itemSchema:Q,itemIdSchema:Z,itemErrorSchema:X,itemData:j,itemUiSchema:s.items,autofocus:m&&q===0,onBlur:b,onFocus:E})}),className:"field field-array field-array-of-"+x.type,DescriptionField:I,disabled:f,idSchema:c,uiSchema:s,onAddClick:this.onAddClick,readonly:p,hideError:h,required:d,schema:o,title:C,TitleField:A,formContext:k,formData:F,rawErrors:w,registry:g},$=s["ui:ArrayFieldTemplate"]||N||Kz;return z.createElement($,O)},n.renderCustomWidget=function(){var r=this.props,i=r.schema,o=r.idSchema,s=r.uiSchema,l=r.disabled,c=r.readonly,u=r.hideError,d=r.required,f=r.placeholder,p=r.autofocus,h=r.onBlur,m=r.onFocus,g=r.formData,b=r.registry,E=r.rawErrors,y=r.name,_=b.widgets,S=b.formContext,w=i.title||y,C=ue({},At(s)),N=C.widget,T=ft(C,["widget"]),P=Cr(i,N,_);return z.createElement(P,{id:o&&o.$id,multiple:!0,onChange:this.onSelectChange,onBlur:h,onFocus:m,options:T,schema:i,uiSchema:s,registry:b,value:g,disabled:l,readonly:c,hideError:u,required:d,label:w,placeholder:f,formContext:S,autofocus:p,rawErrors:E})},n.renderMultiSelect=function(){var r=this.props,i=r.schema,o=r.idSchema,s=r.uiSchema,l=r.formData,c=r.disabled,u=r.readonly,d=r.required,f=r.placeholder,p=r.autofocus,h=r.onBlur,m=r.onFocus,g=r.registry,b=r.rawErrors,E=r.name,y=this.props.formData,_=g.widgets,S=g.rootSchema,w=g.formContext,C=Le(i.items,S,l),N=i.title||E,T=ps(C),P=ue({},At(s),{enumOptions:T}),k=P.widget,A=k===void 0?"select":k,I=ft(P,["widget"]),x=Cr(i,A,_);return z.createElement(x,{id:o&&o.$id,multiple:!0,onChange:this.onSelectChange,onBlur:h,onFocus:m,options:I,schema:i,uiSchema:s,registry:g,value:y,disabled:c,readonly:u,required:d,label:N,placeholder:f,formContext:w,autofocus:p,rawErrors:b})},n.renderFiles=function(){var r=this.props,i=r.schema,o=r.uiSchema,s=r.idSchema,l=r.name,c=r.disabled,u=r.readonly,d=r.autofocus,f=r.onBlur,p=r.onFocus,h=r.registry,m=r.rawErrors,g=i.title||l,b=this.props.formData,E=h.widgets,y=h.formContext,_=At(o),S=_.widget,w=S===void 0?"files":S,C=ft(_,["widget"]),N=Cr(i,w,E);return z.createElement(N,{options:C,id:s&&s.$id,multiple:!0,onChange:this.onSelectChange,onBlur:f,onFocus:p,schema:i,uiSchema:o,title:g,value:b,disabled:c,readonly:u,registry:h,formContext:y,autofocus:d,rawErrors:m})},n.renderFixedArray=function(){var r=this,i=this.props,o=i.schema,s=i.uiSchema,l=i.formData,c=i.errorSchema,u=i.idPrefix,d=i.idSeparator,f=d===void 0?"_":d,p=i.idSchema,h=i.name,m=i.required,g=i.disabled,b=i.readonly,E=i.autofocus,y=i.registry,_=i.onBlur,S=i.onFocus,w=i.rawErrors,C=o.title||h,N=this.props.formData,T=y.ArrayFieldTemplate,P=y.rootSchema,k=y.fields,A=y.formContext,I=k.TitleField,x=o.items.map(function(V,q){return Le(V,P,l[q])}),F=My(o)?Le(o.additionalItems,P,l):null;(!N||N.length<x.length)&&(N=N||[],N=N.concat(new Array(x.length-N.length)));var O={canAdd:this.canAddItem(N)&&F,className:"field field-array field-array-fixed-items",disabled:g,idSchema:p,formData:l,items:this.state.keyedFormData.map(function(V,q){var B=V.key,j=V.item,Q=q>=x.length,X=Q?Le(o.additionalItems,P,j):x[q],Y=p.$id+f+q,Z=wn(X,Y,P,j,u,f),J=Q?s.additionalItems||{}:Array.isArray(s.items)?s.items[q]:s.items||{},ae=c?c[q]:void 0;return r.renderArrayFieldItem({key:B,index:q,canRemove:Q,canMoveUp:q>=x.length+1,canMoveDown:Q&&q<N.length-1,itemSchema:X,itemData:j,itemUiSchema:J,itemIdSchema:Z,itemErrorSchema:ae,autofocus:E&&q===0,onBlur:_,onFocus:S})}),onAddClick:this.onAddClick,readonly:b,required:m,registry:y,schema:o,uiSchema:s,title:C,TitleField:I,formContext:A,rawErrors:w},$=s["ui:ArrayFieldTemplate"]||T||Xz;return z.createElement($,O)},n.renderArrayFieldItem=function(r){var i=r.key,o=r.index,s=r.canRemove,l=s===void 0?!0:s,c=r.canMoveUp,u=c===void 0?!0:c,d=r.canMoveDown,f=d===void 0?!0:d,p=r.itemSchema,h=r.itemData,m=r.itemUiSchema,g=r.itemIdSchema,b=r.itemErrorSchema,E=r.autofocus,y=r.onBlur,_=r.onFocus,S=r.rawErrors,w=this.props,C=w.disabled,N=w.readonly,T=w.uiSchema,P=w.registry,k=P.fields.SchemaField,A=At(T),I=A.orderable,x=I===void 0?!0:I,F=A.removable,O=F===void 0?!0:F,$={moveUp:x&&u,moveDown:x&&f,remove:O&&l};return $.toolbar=Object.keys($).some(function(V){return $[V]}),{children:z.createElement(k,{index:o,schema:p,uiSchema:m,formData:h,errorSchema:b,idPrefix:this.props.idPrefix,idSeparator:this.props.idSeparator,idSchema:g,required:this.isItemRequired(p),onChange:this.onChangeForIndex(o),onBlur:y,onFocus:_,registry:this.props.registry,disabled:this.props.disabled,readonly:this.props.readonly,hideError:this.props.hideError,autofocus:E,rawErrors:S}),className:"array-item",disabled:C,hasToolbar:$.toolbar,hasMoveUp:$.moveUp,hasMoveDown:$.moveDown,hasRemove:$.remove,index:o,key:i,onAddIndexClick:this.onAddIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:N}},ME(t,[{key:"itemTitle",get:function(){var r=this.props.schema;return r.items.title||r.items.description||"Item"}}]),t}(R.Component);JE.defaultProps={uiSchema:{},formData:[],idSchema:{},required:!1,disabled:!1,readonly:!1,autofocus:!1};function eC(e){var t=e.schema,n=e.name,a=e.uiSchema,r=e.idSchema,i=e.formData,o=e.registry,s=e.required,l=e.disabled,c=e.readonly,u=e.autofocus,d=e.onChange,f=e.onFocus,p=e.onBlur,h=e.rawErrors,m=t.title,g=o.widgets,b=o.formContext,E=o.fields,y=At(a),_=y.widget,S=_===void 0?"checkbox":_,w=ft(y,["widget"]),C=Cr(t,S,g),N;return Array.isArray(t.oneOf)?N=ps({oneOf:t.oneOf.map(function(T){return ue({},T,{title:T.title||(T.const===!0?"Yes":"No")})})}):N=ps({enum:t.enum||[!0,!1],enumNames:t.enumNames||(t.enum&&t.enum[0]===!1?["No","Yes"]:["Yes","No"])}),z.createElement(C,{options:ue({},w,{enumOptions:N}),schema:t,uiSchema:a,id:r&&r.$id,onChange:d,onFocus:f,onBlur:p,label:m===void 0?n:m,value:i,required:s,disabled:l,readonly:c,registry:o,formContext:b,autofocus:u,rawErrors:h,DescriptionField:E.DescriptionField})}eC.defaultProps={uiSchema:{},disabled:!1,readonly:!1,autofocus:!1};function Zz(e){var t=e.id,n=e.description;return n?typeof n=="string"?z.createElement("p",{id:t,className:"field-description"},n):z.createElement("div",{id:t,className:"field-description"},n):null}var af=function(e){Tr(t,e);function t(a){var r;r=e.call(this,a)||this,r.onOptionChange=function(l){var c=parseInt(l,10),u=r.props,d=u.formData,f=u.onChange,p=u.options,h=u.registry,m=h.rootSchema,g=Le(p[c],m,d),b=void 0;if(pi(d)==="object"&&(g.type==="object"||g.properties)){b=Object.assign({},d);var E=p.slice();E.splice(c,1);for(var S=E,y=Array.isArray(S),_=0,S=y?S:S[Symbol.iterator]();;){var w;if(y){if(_>=S.length)break;w=S[_++]}else{if(_=S.next(),_.done)break;w=_.value}var C=w;if(C.properties)for(var N in C.properties)b.hasOwnProperty(N)&&delete b[N]}}f(Nl(p[c],b,m)),r.setState({selectedOption:parseInt(l,10)})};var i=r.props,o=i.formData,s=i.options;return r.state={selectedOption:r.getMatchingOption(o,s)},r}var n=t.prototype;return n.componentDidUpdate=function(r,i){if(!Yt(this.props.formData,r.formData)&&this.props.idSchema.$id===r.idSchema.$id){var o=this.getMatchingOption(this.props.formData,this.props.options);if(!i||o===this.state.selectedOption)return;this.setState({selectedOption:o})}},n.getMatchingOption=function(r,i){var o=this.props.registry.rootSchema,s=hi(r,i,o);return s!==0?s:this&&this.state?this.state.selectedOption:0},n.render=function(){var r=this.props,i=r.baseType,o=r.disabled,s=r.readonly,l=r.hideError,c=r.errorSchema,u=r.formData,d=r.idPrefix,f=r.idSeparator,p=r.idSchema,h=r.onBlur,m=r.onChange,g=r.onFocus,b=r.options,E=r.registry,y=r.uiSchema,_=r.schema,S=E.fields.SchemaField,w=E.widgets,C=this.state.selectedOption,N=At(y),T=N.widget,P=T===void 0?"select":T,k=ft(N,["widget"]),A=Cr({type:"number"},P,w),I=b[C]||null,x;I&&(x=I.type?I:Object.assign({},I,{type:i}));var F=b.map(function(O,$){return{label:O.title||"Option "+($+1),value:$}});return z.createElement("div",{className:"panel panel-default panel-body"},z.createElement("div",{className:"form-group"},z.createElement(A,ue({id:""+p.$id+(_.oneOf?"__oneof_select":"__anyof_select"),schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:h,onFocus:g,value:C,options:{enumOptions:F},registry:E},k))),I!==null&&z.createElement(S,{schema:x,uiSchema:y,errorSchema:c,idSchema:p,idPrefix:d,idSeparator:f,formData:u,onChange:m,onBlur:h,onFocus:g,registry:E,disabled:o,readonly:s,hideError:l}))},t}(R.Component);af.defaultProps={disabled:!1,readonly:!1,hideError:!1,errorSchema:{},idSchema:{},uiSchema:{}};var Jz=/\.([0-9]*0)*$/,eH=/[0.]0*$/,tC=function(e){Tr(t,e);function t(a){var r;return r=e.call(this,a)||this,r.handleChange=function(i){r.setState({lastValue:i}),(""+i).charAt(0)==="."&&(i="0"+i);var o=typeof i=="string"&&i.match(Jz)?Ha(i.replace(eH,"")):Ha(i);r.props.onChange(o)},r.state={lastValue:a.value},r}var n=t.prototype;return n.render=function(){var r=this.props.registry.fields.StringField,i=this.props,o=i.formData,s=ft(i,["formData"]),l=this.state.lastValue,c=o;if(typeof l=="string"&&typeof c=="number"){var u=new RegExp((""+c).replace(".","\\.")+"\\.?0*$");l.match(u)&&(c=l)}return z.createElement(r,ue({},s,{formData:c,onChange:this.handleChange}))},t}(z.Component);tC.defaultProps={uiSchema:{}};function tH(e){var t=e.TitleField,n=e.DescriptionField;return z.createElement("fieldset",{id:e.idSchema.$id},(e.uiSchema["ui:title"]||e.title)&&z.createElement(t,{id:e.idSchema.$id+"__title",title:e.title||e.uiSchema["ui:title"],required:e.required,formContext:e.formContext}),e.description&&z.createElement(n,{id:e.idSchema.$id+"__description",description:e.description,formContext:e.formContext}),e.properties.map(function(a){return a.content}),$z(e.schema,e.uiSchema,e.formData)&&z.createElement($h,{className:"object-property-expand",onClick:e.onAddClick(e.schema),disabled:e.disabled||e.readonly}))}var rC=function(e){Tr(t,e);function t(){for(var a,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,a.state={wasPropertyKeyModified:!1,additionalProperties:{}},a.onPropertyChange=function(s,l){return l===void 0&&(l=!1),function(c,u){var d,f;c===void 0&&l&&(c="");var p=ue({},a.props.formData,(d={},d[s]=c,d));a.props.onChange(p,u&&a.props.errorSchema&&ue({},a.props.errorSchema,(f={},f[s]=u,f)))}},a.onDropPropertyClick=function(s){return function(l){l.preventDefault();var c=a.props,u=c.onChange,d=c.formData,f=ue({},d);delete f[s],u(f)}},a.getAvailableKey=function(s,l){for(var c=0,u=s;l.hasOwnProperty(u);)u=s+"-"+ ++c;return u},a.onKeyChange=function(s){return function(l,c){var u,d;if(s!==l){l=a.getAvailableKey(l,a.props.formData);var f=ue({},a.props.formData),p=(u={},u[s]=l,u),h=Object.keys(f).map(function(g){var b,E=p[g]||g;return b={},b[E]=f[g],b}),m=Object.assign.apply(Object,[{}].concat(h));a.setState({wasPropertyKeyModified:!0}),a.props.onChange(m,c&&a.props.errorSchema&&ue({},a.props.errorSchema,(d={},d[l]=c,d)))}}},a.handleAddClick=function(s){return function(){var l=s.additionalProperties.type,c=ue({},a.props.formData);if(s.additionalProperties.hasOwnProperty("$ref")){var u=a.props.registry,d=Le({$ref:s.additionalProperties.$ref},u.rootSchema,a.props.formData);l=d.type}c[a.getAvailableKey("newKey",c)]=a.getDefaultValue(l),a.props.onChange(c)}},a}var n=t.prototype;return n.isRequired=function(r){var i=this.props.schema;return Array.isArray(i.required)&&i.required.indexOf(r)!==-1},n.getDefaultValue=function(r){switch(r){case"string":return"New Value";case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return"New Value"}},n.render=function(){var r=this,i=this.props,o=i.uiSchema,s=i.formData,l=i.errorSchema,c=i.idSchema,u=i.name,d=i.required,f=i.disabled,p=i.readonly,h=i.hideError,m=i.idPrefix,g=i.idSeparator,b=i.onBlur,E=i.onFocus,y=i.registry,_=y.rootSchema,S=y.fields,w=y.formContext,C=S.SchemaField,N=S.TitleField,T=S.DescriptionField,P=Le(this.props.schema,_,s),k=P.title===void 0?u:P.title,A=o["ui:description"]||P.description,I;try{var x=Object.keys(P.properties||{});I=qz(x,o["ui:order"])}catch($){return z.createElement("div",null,z.createElement("p",{className:"config-error",style:{color:"red"}},"Invalid ",u||"root"," object field configuration:",z.createElement("em",null,$.message),"."),z.createElement("pre",null,JSON.stringify(P)))}var F=o["ui:ObjectFieldTemplate"]||y.ObjectFieldTemplate||tH,O={title:o["ui:title"]||k,description:A,TitleField:N,DescriptionField:T,properties:I.map(function($){var V=P.properties[$].hasOwnProperty(Fh),q=V?o.additionalProperties:o[$],B=q&&q["ui:widget"]==="hidden";return{content:z.createElement(C,{key:$,name:$,required:r.isRequired($),schema:P.properties[$],uiSchema:q,errorSchema:l[$],idSchema:c[$],idPrefix:m,idSeparator:g,formData:(s||{})[$],wasPropertyKeyModified:r.state.wasPropertyKeyModified,onKeyChange:r.onKeyChange($),onChange:r.onPropertyChange($,V),onBlur:b,onFocus:E,registry:y,disabled:f,readonly:p,hideError:h,onDropPropertyClick:r.onDropPropertyClick}),name:$,readonly:p,disabled:f,required:d,hidden:B}}),readonly:p,disabled:f,required:d,idSchema:c,uiSchema:o,schema:P,formData:s,formContext:w,registry:y};return z.createElement(F,ue({},O,{onAddClick:this.handleAddClick}))},t}(R.Component);rC.defaultProps={uiSchema:{},formData:{},errorSchema:{},idSchema:{},required:!1,disabled:!1,readonly:!1};var rH="*",nH={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function aH(e,t,n,a){var r=t["ui:field"];if(typeof r=="function")return r;if(typeof r=="string"&&r in a)return a[r];var i=nH[la(e)];return!i&&(e.anyOf||e.oneOf)?function(){return null}:i in a?a[i]:function(){var o=a.UnsupportedField;return z.createElement(o,{schema:e,idSchema:n,reason:"Unknown field type "+e.type})}}function nC(e){var t=e.label,n=e.required,a=e.id;return t?z.createElement("label",{className:"control-label",htmlFor:a},t,n&&z.createElement("span",{className:"required"},rH)):null}function iH(e){var t=e.id,n=e.label,a=e.onChange;return z.createElement("input",{className:"form-control",type:"text",id:t,onBlur:function(i){return a(i.target.value)},defaultValue:n})}function oH(e){var t=e.id,n=e.help;return n?typeof n=="string"?z.createElement("p",{id:t,className:"help-block"},n):z.createElement("div",{id:t,className:"help-block"},n):null}function sH(e){var t=e.errors,n=t===void 0?[]:t;return n.length===0?null:z.createElement("div",null,z.createElement("ul",{className:"error-detail bs-callout bs-callout-info"},n.filter(function(a){return!!a}).map(function(a,r){return z.createElement("li",{className:"text-danger",key:r},a)})))}function aC(e){var t=e.id,n=e.label,a=e.children,r=e.errors,i=e.help,o=e.description,s=e.hidden,l=e.required,c=e.displayLabel;return s?z.createElement("div",{className:"hidden"},a):z.createElement(lH,e,c&&z.createElement(nC,{label:n,required:l,id:t}),c&&o?o:null,a,r,i)}aC.defaultProps={hidden:!1,readonly:!1,required:!1,displayLabel:!0};function lH(e){var t=e.id,n=e.classNames,a=e.disabled,r=e.label,i=e.onKeyChange,o=e.onDropPropertyClick,s=e.readonly,l=e.required,c=e.schema,u=r+" Key",d=c.hasOwnProperty(Fh);return d?z.createElement("div",{className:n},z.createElement("div",{className:"row"},z.createElement("div",{className:"col-xs-5 form-additional"},z.createElement("div",{className:"form-group"},z.createElement(nC,{label:u,required:l,id:t+"-key"}),z.createElement(iH,{label:r,required:l,id:t+"-key",onChange:i}))),z.createElement("div",{className:"form-additional form-group col-xs-5"},e.children),z.createElement("div",{className:"col-xs-2"},z.createElement(za,{type:"danger",icon:"remove",className:"array-item-remove btn-block",tabIndex:"-1",style:{border:"0"},disabled:a||s,onClick:o(r)})))):z.createElement("div",{className:n},e.children)}function uH(e){var t=e.uiSchema,n=e.formData,a=e.errorSchema,r=e.idPrefix,i=e.idSeparator,o=e.name,s=e.onChange,l=e.onKeyChange,c=e.onDropPropertyClick,u=e.required,d=e.registry,f=e.wasPropertyKeyModified,p=f===void 0?!1:f,h=d.rootSchema,m=d.fields,g=d.formContext,b=t["ui:FieldTemplate"]||d.FieldTemplate||aC,E=e.idSchema,y=Le(e.schema,h,n);E=zr(wn(y,null,h,n,r,i),E);var _=aH(y,t,E,m),S=m.DescriptionField,w=!!(e.disabled||t["ui:disabled"]),C=!!(e.readonly||t["ui:readonly"]||e.schema.readOnly||y.readOnly),N=t["ui:hideError"],T=N===void 0?e.hideError:!!N,P=!!(e.autofocus||t["ui:autofocus"]);if(Object.keys(y).length===0)return null;var k=Oz(y,t,h),A=a.__errors,I=ft(a,["__errors"]),x=z.createElement(_,ue({},e,{idSchema:E,schema:y,uiSchema:ue({},t,{classNames:void 0}),disabled:w,readonly:C,hideError:T,autofocus:P,errorSchema:I,formContext:g,rawErrors:A})),F=E.$id,O;p?O=o:O=t["ui:title"]||e.schema.title||y.title||o;var $=t["ui:description"]||e.schema.description||y.description,V=A,q=t["ui:help"],B=t["ui:widget"]==="hidden",j=["form-group","field","field-"+y.type];!T&&V&&V.length>0&&j.push("field-error has-error has-danger"),j.push(t.classNames),j=j.join(" ").trim();var Q={description:z.createElement(S,{id:F+"__description",description:$,formContext:g}),rawDescription:$,help:z.createElement(oH,{id:F+"__help",help:q}),rawHelp:typeof q=="string"?q:void 0,errors:T?void 0:z.createElement(sH,{errors:V}),rawErrors:T?void 0:V,id:F,label:O,hidden:B,onChange:s,onKeyChange:l,onDropPropertyClick:c,required:u,disabled:w,readonly:C,hideError:T,displayLabel:k,classNames:j,formContext:g,formData:n,fields:m,schema:y,uiSchema:t,registry:d},X=d.fields.AnyOfField,Y=d.fields.OneOfField;return z.createElement(b,Q,z.createElement(z.Fragment,null,x,y.anyOf&&!fs(y)&&z.createElement(X,{disabled:w,readonly:C,hideError:T,errorSchema:a,formData:n,idPrefix:r,idSchema:E,idSeparator:i,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:y.anyOf.map(function(Z){return Le(Z,h,n)}),baseType:y.type,registry:d,schema:y,uiSchema:t}),y.oneOf&&!fs(y)&&z.createElement(Y,{disabled:w,readonly:C,hideError:T,errorSchema:a,formData:n,idPrefix:r,idSchema:E,idSeparator:i,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:y.oneOf.map(function(Z){return Le(Z,h,n)}),baseType:y.type,registry:d,schema:y,uiSchema:t})))}var iC=function(e){Tr(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.shouldComponentUpdate=function(r,i){return!Yt(this.props,r)},n.render=function(){return uH(this.props)},t}(z.Component);iC.defaultProps={uiSchema:{},errorSchema:{},idSchema:{},disabled:!1,readonly:!1,autofocus:!1,hideError:!1};function oC(e){var t=e.schema,n=e.name,a=e.uiSchema,r=e.idSchema,i=e.formData,o=e.required,s=e.disabled,l=e.readonly,c=e.autofocus,u=e.onChange,d=e.onBlur,f=e.onFocus,p=e.registry,h=e.rawErrors,m=t.title,g=t.format,b=p.widgets,E=p.formContext,y=fs(t)&&ps(t),_=y?"select":"text";g&&Fz(t,g,b)&&(_=g);var S=At(a),w=S.widget,C=w===void 0?_:w,N=S.placeholder,T=N===void 0?"":N,P=ft(S,["widget","placeholder"]),k=Cr(t,C,b);return z.createElement(k,{options:ue({},P,{enumOptions:y}),schema:t,uiSchema:a,id:r&&r.$id,label:m===void 0?n:m,value:i,onChange:u,onBlur:d,onFocus:f,required:o,disabled:s,readonly:l,formContext:E,autofocus:c,registry:p,placeholder:T,rawErrors:h})}oC.defaultProps={uiSchema:{},disabled:!1,readonly:!1,autofocus:!1};var cH="*";function dH(e){var t=e.id,n=e.title,a=e.required;return z.createElement("legend",{id:t},n,a&&z.createElement("span",{className:"required"},cH))}var fH=function(e){Tr(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.componentDidMount=function(){this.props.formData===void 0&&this.props.onChange(null)},n.render=function(){return null},t}(R.Component);function pH(e){var t=e.schema,n=e.idSchema,a=e.reason;return z.createElement("div",{className:"unsupported-field"},z.createElement("p",null,"Unsupported field schema",n&&n.$id&&z.createElement("span",null," for"," field ",z.createElement("code",null,n.$id)),a&&z.createElement("em",null,": ",a),"."),t&&z.createElement("pre",null,JSON.stringify(t,null,2)))}var hH={AnyOfField:af,ArrayField:JE,BooleanField:eC,DescriptionField:Zz,NumberField:tC,ObjectField:rC,OneOfField:af,SchemaField:iC,StringField:oC,TitleField:dH,NullField:fH,UnsupportedField:pH};function mH(e,t){for(var n=[],a=e;a<=t;a++)n.push({value:a,label:Dr(a,2)});return n}function vH(e){return Object.keys(e).every(function(t){return e[t]!==-1})}function gH(e){var t=e.type,n=e.range,a=e.value,r=e.select,i=e.rootId,o=e.disabled,s=e.readonly,l=e.autofocus,c=e.registry,u=e.onBlur,d=i+"_"+t,f=c.widgets.SelectWidget;return z.createElement(f,{schema:{type:"integer"},id:d,className:"form-control",options:{enumOptions:mH(n[0],n[1])},placeholder:t,value:a,disabled:o,readonly:s,autofocus:l,onChange:function(h){return r(t,h)},onBlur:u})}var Lh=function(e){Tr(t,e);function t(a){var r;return r=e.call(this,a)||this,r.onChange=function(i,o){var s;r.setState((s={},s[i]=typeof o>"u"?-1:o,s),function(){vH(r.state)&&r.props.onChange(By(r.state,r.props.time))})},r.setNow=function(i){i.preventDefault();var o=r.props,s=o.time,l=o.disabled,c=o.readonly,u=o.onChange;if(!(l||c)){var d=ka(new Date().toJSON(),s);r.setState(d,function(){return u(By(r.state,s))})}},r.clear=function(i){i.preventDefault();var o=r.props,s=o.time,l=o.disabled,c=o.readonly,u=o.onChange;l||c||r.setState(ka("",s),function(){return u(void 0)})},r.state=ka(a.value,a.time),r}var n=t.prototype;return n.componentDidUpdate=function(r,i){r.value&&r.value!==ka(this.props.value,this.props.time)&&this.setState(ka(this.props.value,this.props.time))},n.shouldComponentUpdate=function(r,i){return qh(this,r,i)},n.render=function(){var r=this,i=this.props,o=i.id,s=i.disabled,l=i.readonly,c=i.autofocus,u=i.registry,d=i.onBlur,f=i.options;return z.createElement("ul",{className:"list-inline"},this.dateElementProps.map(function(p,h){return z.createElement("li",{key:h},z.createElement(gH,ue({rootId:o,select:r.onChange},p,{disabled:s,readonly:l,registry:u,onBlur:d,autofocus:c&&h===0})))}),(f.hideNowButton!=="undefined"?!f.hideNowButton:!0)&&z.createElement("li",null,z.createElement("a",{href:"#",className:"btn btn-info btn-now",onClick:this.setNow},"Now")),(f.hideClearButton!=="undefined"?!f.hideClearButton:!0)&&z.createElement("li",null,z.createElement("a",{href:"#",className:"btn btn-warning btn-clear",onClick:this.clear},"Clear")))},ME(t,[{key:"dateElementProps",get:function(){var r=this.props,i=r.time,o=r.options,s=this.state,l=s.year,c=s.month,u=s.day,d=s.hour,f=s.minute,p=s.second,h=[{type:"year",range:o.yearsRange,value:l},{type:"month",range:[1,12],value:c},{type:"day",range:[1,31],value:u}];return i&&h.push({type:"hour",range:[0,23],value:d},{type:"minute",range:[0,59],value:f},{type:"second",range:[0,59],value:p}),h}}]),t}(R.Component);Lh.defaultProps={time:!1,disabled:!1,readonly:!1,autofocus:!1,options:{yearsRange:[1900,new Date().getFullYear()+2]}};function sC(e){var t=e.registry.widgets.AltDateWidget;return z.createElement(t,ue({time:!0},e))}sC.defaultProps=ue({},Lh.defaultProps,{time:!0});function lC(e){if(!e.id)throw console.log("No id for",e),new Error("no id for props "+JSON.stringify(e));var t=e.value,n=e.readonly,a=e.disabled,r=e.autofocus,i=e.onBlur,o=e.onFocus,s=e.options,l=e.schema,c=ft(e,["value","readonly","disabled","autofocus","onBlur","onFocus","options","schema","uiSchema","formContext","registry","rawErrors"]);s.inputType?c.type=s.inputType:c.type||(l.type==="number"?(c.type="number",c.step="any"):l.type==="integer"?(c.type="number",c.step="1"):c.type="text"),s.autocomplete&&(c.autoComplete=s.autocomplete),l.multipleOf&&(c.step=l.multipleOf),typeof l.minimum<"u"&&(c.min=l.minimum),typeof l.maximum<"u"&&(c.max=l.maximum);var u=function(f){var p=f.target.value;return e.onChange(p===""?s.emptyValue:p)};return[z.createElement("input",ue({key:c.id,className:"form-control",readOnly:n,disabled:a,autoFocus:r,value:t??""},c,{list:l.examples?"examples_"+c.id:null,onChange:u,onBlur:i&&function(d){return i(c.id,d.target.value)},onFocus:o&&function(d){return o(c.id,d.target.value)}})),l.examples?z.createElement("datalist",{key:"datalist_"+c.id,id:"examples_"+c.id},[].concat(new Set(l.examples.concat(l.default?[l.default]:[]))).map(function(d){return z.createElement("option",{key:d,value:d})})):null]}lC.defaultProps={required:!1,disabled:!1,readonly:!1,autofocus:!1};function uC(e){var t=e.schema,n=e.id,a=e.value,r=e.disabled,i=e.readonly,o=e.label,s=e.autofocus,l=e.onBlur,c=e.onFocus,u=e.onChange,d=e.DescriptionField,f=Ro(t);return z.createElement("div",{className:"checkbox "+(r||i?"disabled":"")},t.description&&z.createElement(d,{description:t.description}),z.createElement("label",null,z.createElement("input",{type:"checkbox",id:n,checked:typeof a>"u"?!1:a,required:f,disabled:r||i,autoFocus:s,onChange:function(h){return u(h.target.checked)},onBlur:l&&function(p){return l(n,p.target.checked)},onFocus:c&&function(p){return c(n,p.target.checked)}}),z.createElement("span",null,o)))}uC.defaultProps={autofocus:!1};function yH(e,t,n){var a=n.indexOf(e),r=t.slice(0,a).concat(e,t.slice(a));return r.sort(function(i,o){return n.indexOf(i)>n.indexOf(o)})}function bH(e,t){return t.filter(function(n){return n!==e})}function cC(e){var t=e.id,n=e.disabled,a=e.options,r=e.value,i=e.autofocus,o=e.readonly,s=e.onChange,l=a.enumOptions,c=a.enumDisabled,u=a.inline;return z.createElement("div",{className:"checkboxes",id:t},l.map(function(d,f){var p=r.indexOf(d.value)!==-1,h=c&&c.indexOf(d.value)!=-1,m=n||h||o?"disabled":"",g=z.createElement("span",null,z.createElement("input",{type:"checkbox",id:t+"_"+f,checked:p,disabled:n||h||o,autoFocus:i&&f===0,onChange:function(E){var y=l.map(function(_){var S=_.value;return S});E.target.checked?s(yH(d.value,r,y)):s(bH(d.value,r))}}),z.createElement("span",null,d.label));return u?z.createElement("label",{key:f,className:"checkbox-inline "+m},g):z.createElement("div",{key:f,className:"checkbox "+m},z.createElement("label",null,g))}))}cC.defaultProps={autofocus:!1,options:{inline:!1}};function wH(e){var t=e.disabled,n=e.readonly,a=e.registry.widgets.BaseInput;return z.createElement(a,ue({type:"color"},e,{disabled:t||n}))}function SH(e){var t=e.onChange,n=e.registry.widgets.BaseInput;return z.createElement(n,ue({type:"date"},e,{onChange:function(r){return t(r||void 0)}}))}function _H(e){var t=e.value,n=e.onChange,a=e.registry.widgets.BaseInput;return z.createElement(a,ue({type:"datetime-local"},e,{value:jz(t),onChange:function(i){return n(Qz(i))}}))}function EH(e){var t=e.registry.widgets.BaseInput;return z.createElement(t,ue({type:"email"},e))}function CH(e,t){return e.replace(";base64",";name="+encodeURIComponent(t)+";base64")}function xH(e){var t=e.name,n=e.size,a=e.type;return new Promise(function(r,i){var o=new window.FileReader;o.onerror=i,o.onload=function(s){r({dataURL:CH(s.target.result,t),name:t,size:n,type:a})},o.readAsDataURL(e)})}function NH(e){return Promise.all([].map.call(e,xH))}function IH(e){var t=e.filesInfo;return t.length===0?null:z.createElement("ul",{className:"file-info"},t.map(function(n,a){var r=n.name,i=n.size,o=n.type;return z.createElement("li",{key:a},z.createElement("strong",null,r)," (",o,", ",i," bytes)")}))}function TH(e){return e.filter(function(t){return typeof t<"u"}).map(function(t){var n=Gz(t),a=n.blob,r=n.name;return{name:r,size:a.size,type:a.type}})}var dC=function(e){Tr(t,e);function t(a){var r;r=e.call(this,a)||this,r.onChange=function(s){var l=r.props,c=l.multiple,u=l.onChange;NH(s.target.files).then(function(d){var f={values:d.map(function(p){return p.dataURL}),filesInfo:d};r.setState(f,function(){u(c?f.values:f.values[0])})})};var i=a.value,o=Array.isArray(i)?i:[i];return r.state={values:o,filesInfo:TH(o)},r}var n=t.prototype;return n.shouldComponentUpdate=function(r,i){return qh(this,r,i)},n.render=function(){var r=this,i=this.props,o=i.multiple,s=i.id,l=i.readonly,c=i.disabled,u=i.autofocus,d=i.options,f=this.state.filesInfo;return z.createElement("div",null,z.createElement("p",null,z.createElement("input",{ref:function(h){return r.inputRef=h},id:s,type:"file",disabled:l||c,onChange:this.onChange,defaultValue:"",autoFocus:u,multiple:o,accept:d.accept})),z.createElement(IH,{filesInfo:f}))},t}(R.Component);dC.defaultProps={autofocus:!1};function PH(e){var t=e.id,n=e.value;return z.createElement("input",{type:"hidden",id:t,value:typeof n>"u"?"":n})}function RH(e){var t=e.registry.widgets.BaseInput;return z.createElement(t,ue({type:"password"},e))}function fC(e){var t=e.options,n=e.value,a=e.required,r=e.disabled,i=e.readonly,o=e.autofocus,s=e.onBlur,l=e.onFocus,c=e.onChange,u=e.id,d=Math.random().toString(),f=t.enumOptions,p=t.enumDisabled,h=t.inline;return z.createElement("div",{className:"field-radio-group",id:u},f.map(function(m,g){var b=m.value===n,E=p&&p.indexOf(m.value)!=-1,y=r||E||i?"disabled":"",_=z.createElement("span",null,z.createElement("input",{type:"radio",checked:b,name:d,required:a,value:m.value,disabled:r||E||i,autoFocus:o&&g===0,onChange:function(w){return c(m.value)},onBlur:s&&function(S){return s(u,S.target.value)},onFocus:l&&function(S){return l(u,S.target.value)}}),z.createElement("span",null,m.label));return h?z.createElement("label",{key:g,className:"radio-inline "+y},_):z.createElement("div",{key:g,className:"radio "+y},z.createElement("label",null,_))}))}fC.defaultProps={autofocus:!1};function AH(e){var t=e.schema,n=e.value,a=e.registry.widgets.BaseInput;return z.createElement("div",{className:"field-range-wrapper"},z.createElement(a,ue({type:"range"},e,XE(t))),z.createElement("span",{className:"range-view"},n))}var kH=new Set(["number","integer"]);function Pc(e,t){var n=e.type,a=e.items;if(t!==""){{if(n==="array"&&a&&kH.has(a.type))return t.map(Ha);if(n==="boolean")return t==="true";if(n==="number")return Ha(t)}if(e.enum){if(e.enum.every(function(r){return pi(r)==="number"}))return Ha(t);if(e.enum.every(function(r){return pi(r)==="boolean"}))return t==="true"}return t}}function Rc(e,t){return t?[].slice.call(e.target.options).filter(function(n){return n.selected}).map(function(n){return n.value}):e.target.value}function pC(e){var t=e.schema,n=e.id,a=e.options,r=e.value,i=e.required,o=e.disabled,s=e.readonly,l=e.multiple,c=e.autofocus,u=e.onChange,d=e.onBlur,f=e.onFocus,p=e.placeholder,h=a.enumOptions,m=a.enumDisabled,g=l?[]:"";return z.createElement("select",{id:n,multiple:l,className:"form-control",value:typeof r>"u"?g:r,required:i,disabled:o||s,autoFocus:c,onBlur:d&&function(b){var E=Rc(b,l);d(n,Pc(t,E))},onFocus:f&&function(b){var E=Rc(b,l);f(n,Pc(t,E))},onChange:function(E){var y=Rc(E,l);u(Pc(t,y))}},!l&&t.default===void 0&&z.createElement("option",{value:""},p),h.map(function(b,E){var y=b.value,_=b.label,S=m&&m.indexOf(y)!=-1;return z.createElement("option",{key:E,value:y,disabled:S},_)}))}pC.defaultProps={autofocus:!1};function hC(e){var t=e.id,n=e.options,a=e.placeholder,r=e.value,i=e.required,o=e.disabled,s=e.readonly,l=e.autofocus,c=e.onChange,u=e.onBlur,d=e.onFocus,f=function(h){var m=h.target.value;return c(m===""?n.emptyValue:m)};return z.createElement("textarea",{id:t,className:"form-control",value:r||"",placeholder:a,required:i,disabled:o,readOnly:s,autoFocus:l,rows:n.rows,onBlur:u&&function(p){return u(t,p.target.value)},onFocus:d&&function(p){return d(t,p.target.value)},onChange:f})}hC.defaultProps={autofocus:!1,options:{}};function $H(e){var t=e.registry.widgets.BaseInput;return z.createElement(t,e)}function FH(e){var t=e.registry.widgets.BaseInput;return z.createElement(t,ue({type:"url"},e))}function DH(e){var t=e.registry.widgets.BaseInput;return z.createElement(t,ue({type:"number"},e,XE(e.schema)))}function OH(e){var t=e.uiSchema,n=Dz(t),a=n.submitText,r=n.norender,i=n.props;return z.createElement("div",null,!r&&z.createElement("button",ue({type:"submit"},i,{className:"btn btn-info"}),a))}var qH={BaseInput:lC,PasswordWidget:RH,RadioWidget:fC,UpDownWidget:DH,RangeWidget:AH,SelectWidget:pC,TextWidget:$H,DateWidget:SH,DateTimeWidget:_H,AltDateWidget:Lh,AltDateTimeWidget:sC,EmailWidget:EH,URLWidget:FH,TextareaWidget:hC,HiddenWidget:PH,ColorWidget:wH,FileWidget:dC,CheckboxWidget:uC,CheckboxesWidget:cC,SubmitButton:OH};function LH(){return{fields:hH,widgets:qH,definitions:{},rootSchema:{},formContext:{}}}function VH(e){var t=e.errors;return z.createElement("div",{className:"panel panel-danger errors"},z.createElement("div",{className:"panel-heading"},z.createElement("h3",{className:"panel-title"},"Errors")),z.createElement("ul",{className:"list-group"},t.map(function(n,a){return z.createElement("li",{key:a,className:"list-group-item text-danger"},n.stack)})))}var mC=function(e){Tr(t,e);function t(a){var r;return r=e.call(this,a)||this,r.getUsedFormData=function(i,o){if(o.length===0&&typeof i!="object")return i;var s=dx(i,o);return Array.isArray(i)?Object.keys(s).map(function(l){return s[l]}):s},r.getFieldNames=function(i,o){var s=function l(c,u,d){return u===void 0&&(u=[]),d===void 0&&(d=[""]),Object.keys(c).forEach(function(f){if(typeof c[f]=="object"){var p=d.map(function(h){return h+"."+f});c[f].__rjsf_additionalProperties&&c[f].$name!==""?u.push(c[f].$name):l(c[f],u,p)}else f==="$name"&&c[f]!==""&&d.forEach(function(h){h=h.replace(/^\./,"");var m=fx(o,h);(typeof m!="object"||mb(m))&&u.push(h)})}),u};return s(i)},r.onChange=function(i,o){if(st(i)||Array.isArray(i)){var s=r.getStateFromProps(r.props,i);i=s.formData}var l=!r.props.noValidate&&r.props.liveValidate,c={formData:i},u=i;if(r.props.omitExtraData===!0&&r.props.liveOmit===!0){var d=Le(r.state.schema,r.state.schema,i),f=Wa(d,"",r.state.schema,i),p=r.getFieldNames(f,i);u=r.getUsedFormData(i,p),c={formData:u}}if(l){var h=r.validate(u),m=h.errors,g=h.errorSchema,b=m,E=g;r.props.extraErrors&&(g=zr(g,r.props.extraErrors,!0),m=fn(g)),c={formData:u,errors:m,errorSchema:g,schemaValidationErrors:b,schemaValidationErrorSchema:E}}else if(!r.props.noValidate&&o){var y=r.props.extraErrors?zr(o,r.props.extraErrors,!0):o;c={formData:u,errorSchema:y,errors:fn(y)}}r.setState(c,function(){return r.props.onChange&&r.props.onChange(r.state)})},r.onBlur=function(){if(r.props.onBlur){var i;(i=r.props).onBlur.apply(i,arguments)}},r.onFocus=function(){if(r.props.onFocus){var i;(i=r.props).onFocus.apply(i,arguments)}},r.onSubmit=function(i){if(i.preventDefault(),i.target===i.currentTarget){i.persist();var o=r.state.formData;if(r.props.omitExtraData===!0){var s=Le(r.state.schema,r.state.schema,o),l=Wa(s,"",r.state.schema,o),c=r.getFieldNames(l,o);o=r.getUsedFormData(o,c)}if(!r.props.noValidate){var u=r.validate(o),d=u.errors,f=u.errorSchema,p=d,h=f;if(Object.keys(d).length>0){r.props.extraErrors&&(f=zr(f,r.props.extraErrors,!0),d=fn(f)),r.setState({errors:d,errorSchema:f,schemaValidationErrors:p,schemaValidationErrorSchema:h},function(){r.props.onError?r.props.onError(d):console.error("Form validation failed",d)});return}}var m,g;r.props.extraErrors?(m=r.props.extraErrors,g=fn(m)):(m={},g=[]),r.setState({formData:o,errors:g,errorSchema:m,schemaValidationErrors:[],schemaValidationErrorSchema:{}},function(){r.props.onSubmit&&r.props.onSubmit(ue({},r.state,{formData:o,status:"submitted"}),i)})}},r.state=r.getStateFromProps(a,a.formData),r.props.onChange&&!Yt(r.state.formData,r.props.formData)&&r.props.onChange(r.state),r.formElement=null,r}var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(r){var i=this.getStateFromProps(r,r.formData);!Yt(i.formData,r.formData)&&!Yt(i.formData,this.state.formData)&&this.props.onChange&&this.props.onChange(i),this.setState(i)},n.getStateFromProps=function(r,i){var o=this.state||{},s="schema"in r?r.schema:this.props.schema,l="uiSchema"in r?r.uiSchema:this.props.uiSchema,c=typeof i<"u",u="liveValidate"in r?r.liveValidate:this.props.liveValidate,d=c&&!r.noValidate&&u,f=s,p=Nl(s,i,f),h=Le(s,f,p),m=r.customFormats,g=r.additionalMetaSchemas,b=function(){return r.noValidate?{errors:[],errorSchema:{}}:r.liveValidate?{errors:o.errors||[],errorSchema:o.errorSchema||{}}:{errors:o.schemaValidationErrors||[],errorSchema:o.schemaValidationErrorSchema||{}}},E,y,_,S;if(d){var w=this.validate(p,s,g,m);E=w.errors,y=w.errorSchema,_=E,S=y}else{var C=b();E=C.errors,y=C.errorSchema,_=o.schemaValidationErrors,S=o.schemaValidationErrorSchema}r.extraErrors&&(y=zr(y,r.extraErrors,!0),E=fn(y));var N=wn(h,l["ui:rootFieldId"],f,p,r.idPrefix,r.idSeparator),T={schema:s,uiSchema:l,idSchema:N,formData:p,edit:c,errors:E,errorSchema:y,additionalMetaSchemas:g};return _&&(T.schemaValidationErrors=_,T.schemaValidationErrorSchema=S),T},n.shouldComponentUpdate=function(r,i){return qh(this,r,i)},n.validate=function(r,i,o,s){i===void 0&&(i=this.props.schema),o===void 0&&(o=this.props.additionalMetaSchemas),s===void 0&&(s=this.props.customFormats);var l=this.props,c=l.validate,u=l.transformErrors,d=this.getRegistry(),f=d.rootSchema,p=Le(i,f,r);return HE(r,p,c,u,o,s)},n.renderErrors=function(){var r=this.state,i=r.errors,o=r.errorSchema,s=r.schema,l=r.uiSchema,c=this.props,u=c.ErrorList,d=c.showErrorList,f=c.formContext;return i.length&&d!=!1?z.createElement(u,{errors:i,errorSchema:o,schema:s,uiSchema:l,formContext:f}):null},n.getRegistry=function(){var r=LH(),i=r.fields,o=r.widgets;return{fields:ue({},i,this.props.fields),widgets:ue({},o,this.props.widgets),ArrayFieldTemplate:this.props.ArrayFieldTemplate,ObjectFieldTemplate:this.props.ObjectFieldTemplate,FieldTemplate:this.props.FieldTemplate,definitions:this.props.schema.definitions||{},rootSchema:this.props.schema,formContext:this.props.formContext||{}}},n.submit=function(){this.formElement&&this.formElement.dispatchEvent(new CustomEvent("submit",{cancelable:!0}))},n.render=function(){var r=this,i=this.props,o=i.children,s=i.id,l=i.idPrefix,c=i.idSeparator,u=i.className,d=i.tagName,f=i.name,p=i.method,h=i.target,m=i.action,g=i.autocomplete,b=i.autoComplete,E=i.enctype,y=i.acceptcharset,_=i.noHtml5Validate,S=i.disabled,w=i.readonly,C=i.formContext,N=i._internalFormWrapper,T=this.state,P=T.schema,k=T.uiSchema,A=T.formData,I=T.errorSchema,x=T.idSchema,F=this.getRegistry(),O=F.fields.SchemaField,$=N?d:void 0,V=N||d||"form",q=F.widgets.SubmitButton;g&&console.warn("Using autocomplete property of Form is deprecated, use autoComplete instead.");var B=b||g;return z.createElement(V,{className:u||"rjsf",id:s,name:f,method:p,target:h,action:m,autoComplete:B,encType:E,acceptCharset:y,noValidate:_,onSubmit:this.onSubmit,as:$,ref:function(Q){r.formElement=Q}},this.renderErrors(),z.createElement(O,{schema:P,uiSchema:k,errorSchema:I,idSchema:x,idPrefix:l,idSeparator:c,formContext:C,formData:A,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:F,disabled:S,readonly:w}),o||z.createElement(q,{uiSchema:k}))},t}(R.Component);mC.defaultProps={uiSchema:{},noValidate:!1,liveValidate:!1,disabled:!1,readonly:!1,noHtml5Validate:!1,ErrorList:VH,omitExtraData:!1};Fe.object,Fe.object;const of="First line is the columns names.",sf="Include row metadata (Row Id and Row Version).",hs="Comma Separated Values (CSV)",zy="Tab Separated Values (TSV)",MH={type:"object",properties:{"File Type":{type:"string",oneOf:[{const:hs,title:hs},{const:zy,title:zy}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[of,sf]},uniqueItems:!0}}},BH={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},UH={description:"File is ready for download. Select the download button to download the file.",type:"object"},zH={},HH=[MH,UH],WH=[BH,zH];class ua extends R.Component{constructor(n){super(n);We(this,"handleSubmit",n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()});We(this,"handleDownloadSetup",n=>{this.setState({isLoading:!0});const{formData:a}=n,r=a["File Type"],i=a.Contents,{queryBundleRequest:o,getLastQueryRequest:s}=this.props,l=r===hs?",":"	",c=i.includes(of),u=i.includes(sf),d=o??s(),f=d.query.sql,p={sql:f,entityId:rn(f),selectedFacets:d.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:c,includeRowIdAndRowVersion:u,csvTableDescriptor:{separator:l},additionalFilters:d.query.additionalFilters};vb(p,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})});We(this,"onDownload",()=>{const{data:n}=this.state;gb(n.resultsFileHandleId,this.context.accessToken).then(a=>{window.location.href=a,this.props.onClose()})});We(this,"handleChange",n=>{const{formData:a}=n;this.setState({formData:a})});this.state={isLoading:!1,step:0,formData:{"File Type":hs,Contents:[of,sf]}}}render(){const n={height:50,width:50,backgroundSize:50};return v(wi,{open:!0,onCancel:this.props.onClose,title:"Download query results",content:v(G,{children:L(mC,{id:"modal-download-form",schema:HH[this.state.step],uiSchema:WH[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&v("div",{className:"SRC-centerAndJustifyContent",children:L("div",{className:"SRC-center-text",children:[v("p",{children:" Creating the File "}),v("div",{style:n,className:"spinner"}),v("p",{children:" Loading... "})]})}),v(R.Fragment,{})]})}),actions:L(G,{children:[v(Gt,{variant:"outlined",color:"primary",onClick:this.props.onClose,children:"Cancel"}),v(Gt,{form:"modal-download-form",type:"submit",variant:"contained",color:"primary",children:this.state.step===0?"Next":"Download"})]})})}}We(ua,"contextType",Ci);try{ua.displayName="ModalDownload",ua.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}}}catch{}function ms(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:a,lockedColumn:r,componentIndex:i,shouldDeepLink:o}=e,[s,l]=R.useState(void 0),{entityId:c,versionNumber:u,getInitQueryRequest:d,getLastQueryRequest:f,setQuery:p,resetQuery:h,removeQueryFilter:m,removeValueFromQueryFilter:g,removeSelectedFacet:b,removeValueFromSelectedFacet:E}=l_({initQueryRequest:t,componentIndex:i,shouldDeepLink:o,onQueryChange:n}),y=R.useMemo(()=>f(),[f]),{data:_,hasNextPage:S,fetchPreviousPage:w,fetchNextPage:C,isFetchingNextPage:N,isLoading:T,error:P,isPreviousData:k}=ax(y,{keepPreviousData:!0},l),A=T||k,{data:I}=Ii(c,u),[x,F]=R.useState(0);async function O(){if(!S)throw new Error("Called appendNextPageToResults when there is no next page");await C(),F("ALL")}async function $(){if(!S)throw new Error("Called goToNextPage when there is no next page");if(x==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await C(),F(x+1)}const V=x!=="ALL"&&x>0;async function q(){if(x==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!V)throw new Error("Called goToNextPage when there is no next page");await w(),F(x-1)}const B=R.useMemo(()=>{var ie,ye,oe;if(!(_==null||_.pages.length===0||_.pages[0].responseBody==null))return x==="ALL"?{..._==null?void 0:_.pages[0].responseBody,queryResult:{...(ie=_==null?void 0:_.pages[0].responseBody)==null?void 0:ie.queryResult,queryResults:{...(oe=(ye=_==null?void 0:_.pages[0].responseBody)==null?void 0:ye.queryResult)==null?void 0:oe.queryResults,rows:_.pages.flatMap(ge=>{var Re;return(Re=ge.responseBody.queryResult)==null?void 0:Re.queryResults.rows})??[]}}}:_==null?void 0:_.pages[x].responseBody},[x,_]);R.useEffect(()=>{B&&a&&a(JSON.stringify(B))},[B,a]);const j=B?Jb(B.facets,B.selectColumns):!0,Q=R.useMemo(()=>ew(B,r),[B,r]),X=R.useMemo(()=>{const ie=f();return tw(ie.query,r)},[f,r]),Y=R.useCallback(ie=>{var ye;return((ye=B==null?void 0:B.columnModels)==null?void 0:ye.find(oe=>oe.name===ie))??null},[B==null?void 0:B.columnModels]),Z={data:Q,isLoadingNewPage:N,hasNextPage:!!S,hasPreviousPage:V,isLoadingNewBundle:A,getLastQueryRequest:f,getInitQueryRequest:d,error:P,entity:I,executeQueryRequest:p,isFacetsAvailable:j,asyncJobStatus:s,appendNextPageToResults:O,goToNextPage:$,goToPreviousPage:q,hasResettableFilters:X,resetQuery:h,removeQueryFilter:m,removeValueFromQueryFilter:g,removeSelectedFacet:b,removeValueFromSelectedFacet:E,lockedColumn:r,getColumnModel:Y},{children:J}=e;return v(ts,{queryContext:Z,children:v("div",{className:`SRC-wrapper ${A||N?"SRC-logo-cursor":""} ${j?"has-facets":""}`,children:J})})}try{ms.displayName="InfiniteQueryWrapper",ms.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}}}catch{}const lf=()=>{const{error:e}=gt();return v(hp,{error:e})};try{lf.displayName="QueryWrapperErrorBanner",lf.__docgenInfo={description:"Error banner that automatically pulls the error from QueryContext.",displayName:"QueryWrapperErrorBanner",props:{}}}catch{}class vs extends z.Component{constructor(n){super(n);We(this,"searchFormRef");We(this,"radioFormRef");We(this,"handleClickOutsideForm",n=>{var a,r;!((a=this.searchFormRef.current)!=null&&a.contains(n==null?void 0:n.target))&&!((r=this.radioFormRef.current)!=null&&r.contains(n==null?void 0:n.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))});We(this,"search",n=>{var f,p,h,m,g,b;n.preventDefault();const{searchText:a}=this.state;let{columnName:r}=this.state;const{searchable:i,lockedColumn:o}=this.props;if(r==="")if(i)r=i.filter(E=>E!==(o==null?void 0:o.columnName))[0];else{const E=(h=(p=(f=this.props.queryContext)==null?void 0:f.data)==null?void 0:p.columnModels)==null?void 0:h.filter(y=>y.name!==(o==null?void 0:o.columnName)).filter(y=>this.isSupportedColumn(y));r=(E==null?void 0:E[0].name)??""}this.setState({show:!1});const{executeQueryRequest:s,getLastQueryRequest:l}=this.props.queryContext,c=l(),{additionalFilters:u=[]}=c.query,d=u.findIndex(E=>!!(Oo(E)||qo(E)&&E.columnName===r));if(d===-1){const E=(b=(g=(m=this.props.queryContext)==null?void 0:m.data)==null?void 0:g.columnModels)==null?void 0:b.filter(y=>y.name===r)[0];if(E!=null&&E.columnType.endsWith("_LIST")){const y={columnName:r,function:ix.HAS_LIKE,values:[`%${a}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};u.push(y)}else{const y={columnName:r,operator:ox.LIKE,values:[`%${a}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};u.push(y)}}else u[d].values.push(`%${a}%`);c.query.additionalFilters=u,s(c)});We(this,"handleChange",n=>{this.setState({searchText:n.currentTarget.value})});We(this,"isSupportedColumn",n=>{switch(n==null?void 0:n.columnType){case pe.FILEHANDLEID:case pe.ENTITYID:case pe.DATE:case pe.DATE_LIST:case pe.USERID:return!1;default:return!0}});We(this,"isSupportedColumnAndInProps",n=>{if(this.isSupportedColumn(n)){const{searchable:a}=this.props;return a==null?void 0:a.some(r=>r===(n==null?void 0:n.name))}return!1});this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:this.props.defaultColumn??""},this.searchFormRef=z.createRef(),this.radioFormRef=z.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(n){var a,r,i,o,s;!((a=n.queryVisualizationContext)!=null&&a.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)!=null&&r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(s=(o=(i=this.searchFormRef)==null?void 0:i.current)==null?void 0:o.querySelector("input"))==null||s.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:n,lockedColumn:a,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:i,getColumnDisplayName:o}}=this.props,{searchText:s,show:l,columnName:c}=this.state;let u=[];n?u=n.map(p=>{var h;return(h=r==null?void 0:r.columnModels)==null?void 0:h.find(m=>m.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(u=(f=r.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(p=>p.name)),u.length&&(a!=null&&a.columnName)&&(u=u.filter(p=>p!==(a==null?void 0:a.columnName)));const d=i==null?void 0:i.showFacetFilter;return L("div",{className:`QueryWrapperSearchInput ${d?dr:fr}`,children:[v(xi,{in:i==null?void 0:i.showSearchBar,children:L("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[v("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:v(De,{icon:"search"})}),v("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:s,type:"text"}),this.state.searchText.length>0&&v("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:v(De,{icon:"close"})})]})}),v("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:v(J1,{in:l,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:L("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[v("p",{className:"deemphasized",children:v("i",{children:" Search In Field: "})}),u.map((p,h)=>{const m=o(p);return v("div",{className:"radio",children:v("label",{children:L("span",{children:[v("input",{id:p,type:"radio",value:p,checked:c===""&&h===0||c===p,onClick:()=>{var b,E,y;(y=(E=(b=this.searchFormRef)==null?void 0:b.current)==null?void 0:E.querySelector("input"))==null||y.focus(),this.setState({columnName:p})}}),v("span",{children:m})]})})},`search-field-${p}-${h}`)})]})})})]})}}try{vs.displayName="Search",vs.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}}}catch{}const jH="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",QH="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",gs=({helpMessage:e=jH,helpUrl:t=QH})=>{const{executeQueryRequest:n,getLastQueryRequest:a}=gt(),{topLevelControlsState:{showSqlEditor:r,showFacetFilter:i}}=ht(),[o,s]=R.useState(""),l=R.useRef(null);R.useEffect(()=>{var d;if(r){const f=a().query.sql;s(f),(d=l.current)==null||d.focus()}},[r,a]);const c=d=>{d.preventDefault();const f=a();f.query.sql=o,f.query.offset=0,f.query.additionalFilters=[],f.query.selectedFacets=[],n(f)},u=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return v("div",{className:`QueryWrapperSqlEditorInput ${i?dr:fr}`,children:v(xi,{in:r,timeout:{enter:300,exit:300},children:L("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[L("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:c,children:[v(h1,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),v("input",{ref:l,onChange:u,placeholder:"Enter Query",value:o,type:"text"})]}),v("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:v(Pn,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{gs.displayName="SqlEditor",gs.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const GH="Sign in",YH=L(G,{children:[v(Oe,{variant:"smallText1",marginBottom:"10px",children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),L(Oe,{variant:"smallText1",children:["To find out more seeÂ ",v(Xt,{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),v("span",{children:" and "}),v(Xt,{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),uf=e=>v(Si,{open:!0,title:"Sign In Required",content:YH,onCancel:()=>e.onHide(),onConfirm:()=>e.onHide(),confirmButtonText:GH,confirmButtonClassName:vp});try{uf.displayName="DownloadLoginModal",uf.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const cf=({show:e,title:t,onClose:n,pythonNotes:a,pythonCode:r,rNotes:i,rCode:o,cliNotes:s,cliCode:l,helpMarkdown:c,helpUrl:u})=>{let d;l?d="Command Line":r?d="Python":d="R";const[f,p]=R.useState(d),h=L(Oe,{variant:"body1",children:["Installation instructions are available at our"," ",v(Xt,{href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return v(Si,{open:e,title:t,onCancel:n,onConfirm:n,maxWidth:"md",helpMarkdown:c,helpUrl:u,content:L(G,{children:[v(ut,{sx:{borderBottom:1,borderColor:"divider",marginBottom:4},children:L(rI,{value:f,onChange:(g,b)=>{g.stopPropagation(),p(b)},textColor:"secondary",indicatorColor:"secondary",children:[l&&v(Dl,{value:"Command Line",label:"Command Line"}),o&&v(Dl,{value:"R",label:"R"}),r&&v(Dl,{value:"Python",label:"Python"})]})}),L(ut,{sx:{"& > p":{marginBottom:3}},children:[f==="Command Line"&&L(G,{children:[v(Oe,{variant:"body1",children:s}),h,L("pre",{children:[" ",l," "]})]}),f==="R"&&L(G,{children:[v(Oe,{variant:"body1",children:i}),h,v("pre",{children:o})]}),f==="Python"&&L(G,{children:[v(Oe,{variant:"body1",children:a}),h,v("pre",{children:r})]})]})]})})};try{cf.displayName="ProgrammaticInstructionsModal",cf.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}function df({queryBundleRequest:e,onHide:t}){var d;const[n,a]=R.useState("..."),{data:r,isLoading:i,isPreviousData:o}=Kb({...e,partMask:a1},{keepPreviousData:!0,useErrorBoundary:!0}),s=(d=r==null?void 0:r.responseBody)==null?void 0:d.combinedSql,l=i||o;R.useEffect(()=>{if(s&&!l){const f=s.toUpperCase().indexOf("FROM SYN"),p=`SELECT * ${s.substring(f)}`;a(p)}},[s,l]);const c=R.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),u=R.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return v(cf,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:v(G,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${c}"`,rNotes:L(G,{children:["This R code will download file annotations only. Use"," ",L(Xt,{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${u}")
read.table(query$filepath, sep = ",")`,pythonNotes:L(G,{children:["This Python code will download file annotations only. Use"," ",v(Xt,{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${u}")
query.asDataFrame()`})}try{df.displayName="ProgrammaticOptions",df.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const XH="Add To Download Cart",ff=e=>{const{accessToken:t}=je(),{entity:n,data:a,getLastQueryRequest:r}=gt(),i=r(),[o,s]=R.useState(!1),[l,c]=R.useState(!1),[u,d]=R.useState(!1),{onDownloadFiles:f,darkTheme:p=!0}=e,h=n&&(Wn(n)&&UC(n)||ta(n)),m=n&&ta(n)&&n.isLatestVersion;return L(R.Fragment,{children:[L(dt,{as:"span",children:[v(Cn,{tooltipText:"Download Options",size:"lg",darkTheme:p,icon:"download"}),L(dt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[v(dt.Item,{onClick:()=>{c(!0)},children:"Export Table"}),h&&v(Et,{title:m?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:v(dt.Item,{role:"button",className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>t?f():s(!0),children:XH})}),v(Et,{title:m?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:v(dt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>d(!0),children:"Programmatic Options"})})]})]}),o&&v(uf,{showModal:o,onHide:()=>s(!1)}),l&&v(ua,{onClose:()=>c(!1),queryBundleRequest:i}),u&&a&&v(df,{onHide:()=>d(!1),queryBundleRequest:i})]})};try{ff.displayName="DownloadOptions",ff.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const KH="addAndRemoveColumns",pf=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:a,darkTheme:r}=e,{getColumnDisplayName:i}=ht(),[o,s]=R.useState(!1),l=(c,u,d)=>{d.source==="rootClose"?s(!1):s(!0)};return L(dt,{as:"span",onToggle:(c,u,d)=>l(c,u,d),show:o,drop:"down",children:[v(Cn,{tooltipText:"Show/Hide Columns",icon:r?"columnsdark":"columns",darkTheme:r}),v(dt.Menu,{id:`${KH}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(c=>{const{name:u}=c,d=n.includes(u),f={width:"11px",marginRight:"10px",visibility:d?void 0:"hidden"},p=d?"SRC-primary-text-color":"";return L(dt.Item,{onClick:()=>a(u),children:[v("span",{className:p,style:f,children:v(De,{icon:"check",sx:{width:"14px"}})}),i(u)]},u)})})]})};try{pf.displayName="ColumnSelection",pf.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const ZH="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",JH="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",hf=({entity:e})=>{var r;const t=e&&ta(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:fa},{data:a}=Zb(n,{enabled:t});if(t&&a&&e){const i=a.queryCount,o=((r=e.items)==null?void 0:r.length)??0;if(i===o)return v(G,{});const s=o-i;let l="";return e.isLatestVersion?l=ZH:l=JH,L(Oe,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[v(hI,{className:"SRC-color-warning",style:{fontSize:"16px"}}),s.toLocaleString()+" Unavailable",v(Pn,{className:"SRC-margin-left-5",markdownText:l,placement:"right"})]})}else return v(G,{})};try{hf.displayName="MissingQueryResultsWarning",hf.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function e8(e,t){const{accessToken:n}=je(),a=",",r=!0,i=!1,o=e.query.sql;return async()=>{try{const l=`SELECT CONCAT('drs://repo-prod.prod.sagebase.org/syn', id, '.', currentVersion) AS drs_uri, name as file_name, ${t==null?void 0:t.map(p=>p.name).join(",")} FROM ${o.slice(o.toLowerCase().indexOf("from")+4+1)}`,c={sql:l,entityId:rn(l),selectedFacets:e.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:r,includeRowIdAndRowVersion:i,csvTableDescriptor:{separator:a},additionalFilters:e.query.additionalFilters},u=await vb(c,n),d=await gb(u.resultsFileHandleId,n),f=`https://synapse-vayu.sbgenomics.com/import-redirect/drs/csv/?URL=${encodeURIComponent(d)}`;window.open(f,"_blank")}catch(s){Xr(s.reason,"danger")}}}const mf=e=>L(gx,{...e,height:20,viewBox:"0 0 828 828",children:[v("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.861 124.107C429.221 125.451 426.3 126.325 423.211 126.618L415.557 269.363C425.193 272.363 432.244 281.226 432.538 291.777L546.545 306.978C547.637 304.478 549.14 302.198 550.968 300.223L431.861 124.107ZM440.166 117.167L559.852 294.141C562.599 293.058 565.591 292.463 568.722 292.463C570.453 292.463 572.141 292.645 573.769 292.99L610.725 206.16C604.806 201.75 600.973 194.698 600.973 186.75C600.973 185.26 601.107 183.801 601.365 182.386L441.299 115.545C440.943 116.102 440.565 116.643 440.166 117.167ZM592.91 316.651C592.91 308.875 589.241 301.955 583.538 297.53L620.577 210.504C622.062 210.789 623.594 210.938 625.161 210.938C626.63 210.938 628.069 210.807 629.466 210.556L731.473 433.838C730.391 434.8 729.396 435.857 728.5 436.997L590.583 327.017C592.076 323.875 592.91 320.361 592.91 316.651ZM583.917 335.473C581.689 337.273 579.135 338.687 576.358 339.61L583.089 517.099C590.244 517.108 596.671 520.225 601.094 525.171L724.074 457.849C723.597 455.954 723.344 453.97 723.344 451.927C723.344 450.256 723.513 448.625 723.836 447.049L583.917 335.473ZM728.974 467.442L606.306 534.593C606.917 536.719 607.244 538.965 607.244 541.287C607.244 548.415 604.161 554.822 599.256 559.249L641.245 621.527C643.538 620.712 645.991 620.232 648.544 620.149L730.593 469.194C730.025 468.637 729.485 468.052 728.974 467.442ZM583.056 565.476C585.404 565.476 587.675 565.141 589.822 564.517L632.158 627.31C631.966 627.503 631.778 627.699 631.594 627.899L410.195 538.521L559.218 545.414C561.176 556.807 571.104 565.476 583.056 565.476ZM398.804 545.534C396.287 548.348 393.122 550.569 389.543 551.963L409.137 701.286C417.873 701.562 425.441 706.471 429.464 713.637L625.468 648.181C625.267 646.925 625.162 645.637 625.162 644.324C625.162 641.892 625.521 639.543 626.189 637.329L398.804 545.534ZM562.043 339.906C563.203 340.239 564.398 340.487 565.622 340.643L572.407 519.563C566.319 522.552 561.672 528.026 559.786 534.662L404.882 527.497C404.474 522.293 402.419 517.552 399.238 513.794L562.043 339.906ZM410.775 316.532C419.563 315.66 426.967 310.086 430.436 302.36L544.551 317.575C544.802 324.26 547.766 330.252 552.374 334.479L390.572 507.295C390.475 507.252 390.377 507.209 390.279 507.167C390.238 507.15 390.198 507.133 390.158 507.116L390.076 507.082C390.033 507.064 389.99 507.046 389.947 507.028L389.865 506.995L389.777 506.959L410.775 316.532ZM379.129 505.281L400.089 315.201C392.761 312.535 387.086 306.428 385.018 298.835L257.588 294.164C256.151 297.414 254.02 300.287 251.382 302.596L371.2 507.193C373.659 506.132 376.329 505.468 379.129 505.281ZM259.627 283.465L384.573 288.044C386.438 277.936 394.588 270.031 404.819 268.531L412.502 125.228C410.883 124.629 409.345 123.86 407.91 122.945L256.526 272.5C258.369 275.76 259.478 279.489 259.627 283.465ZM362.471 513.594L241.899 307.711C240.201 308.179 238.428 308.466 236.602 308.551L212.287 436.373C220.668 440.173 226.498 448.613 226.498 458.415C226.498 459.246 226.456 460.068 226.374 460.879L359.809 517.332C360.578 516.001 361.471 514.75 362.471 513.594ZM398.548 703.346L378.889 553.531C372.829 553.065 367.395 550.367 363.407 546.257L210.476 626.279C210.993 628.246 211.268 630.31 211.268 632.439C211.268 633.973 211.125 635.474 210.852 636.929L387.408 713.365C389.959 708.957 393.861 705.428 398.548 703.346ZM205.482 616.74L357.805 537.036C357.01 534.64 356.58 532.077 356.58 529.415C356.58 528.832 356.601 528.255 356.641 527.683L222.907 471.103C219.186 477.13 212.894 481.402 205.56 482.387L197.048 610.394C200.309 611.871 203.185 614.051 205.482 616.74ZM178.121 458.415C178.121 469.164 185.133 478.276 194.832 481.425L186.398 608.26C184.797 608.304 183.234 608.504 181.725 608.845L94.2764 412.358C95.9686 411.18 97.5031 409.79 98.8419 408.229L179.06 451.717C178.449 453.844 178.121 456.091 178.121 458.415ZM184.274 442.296C188.584 437.476 194.798 434.395 201.734 434.233L226.002 306.661C217.341 302.979 211.268 294.394 211.268 284.389C211.268 275.81 215.734 268.274 222.469 263.98L194.346 201.663C193.431 201.768 192.501 201.822 191.558 201.822C189.935 201.822 188.349 201.662 186.816 201.357L94.3034 372.649C100.563 377.021 104.658 384.279 104.658 392.494C104.658 394.639 104.379 396.719 103.855 398.699L184.274 442.296ZM235.456 260.201C234.505 260.201 233.567 260.256 232.644 260.363L204.526 198.055C211.271 193.763 215.746 186.221 215.746 177.633C215.746 177.057 215.726 176.486 215.687 175.92L399.494 113.808C399.759 114.312 400.042 114.805 400.341 115.286L249.271 264.532C245.355 261.802 240.592 260.201 235.456 260.201ZM172.016 613.512C166.455 617.944 162.891 624.775 162.891 632.439C162.891 645.798 173.72 656.628 187.079 656.628C195.062 656.628 202.141 652.761 206.547 646.798L384.232 723.723C384.191 724.297 384.17 724.877 384.17 725.462C384.17 738.821 395 749.651 408.359 749.651C421.718 749.651 432.547 738.821 432.547 725.462C432.547 724.963 432.532 724.466 432.502 723.974L629.521 658.179C633.894 664.427 641.145 668.513 649.351 668.513C662.71 668.513 673.539 657.683 673.539 644.324C673.539 634.62 667.825 626.25 659.577 622.397L739.776 474.845C742.211 475.669 744.82 476.115 747.533 476.115C760.891 476.115 771.721 465.286 771.721 451.927C771.721 438.568 760.891 427.738 747.533 427.738C745.247 427.738 743.036 428.055 740.94 428.648L639.371 206.326C645.418 201.929 649.35 194.799 649.35 186.75C649.35 173.391 638.52 162.561 625.161 162.561C617.133 162.561 610.018 166.472 605.618 172.493L444.924 105.391C445.034 104.455 445.09 103.503 445.09 102.538C445.09 89.179 434.26 78.3494 420.901 78.3494C407.543 78.3494 396.713 89.179 396.713 102.538C396.713 102.819 396.718 103.099 396.727 103.378L212.553 165.614C208.382 158.343 200.542 153.445 191.558 153.445C178.199 153.445 167.369 164.274 167.369 177.633C167.369 185.513 171.137 192.513 176.97 196.93L84.2531 368.6C83.0204 368.406 81.7569 368.306 80.4698 368.306C67.1108 368.306 56.2812 379.135 56.2812 392.494C56.2812 405.853 67.1108 416.683 80.4698 416.683C81.7672 416.683 83.0407 416.581 84.2827 416.384L172.016 613.512Z",fill:"url(#paint0_linear_271_30503)"}),v("defs",{children:L("linearGradient",{id:"paint0_linear_271_30503",x1:"163.941",y1:"159.14",x2:"682.43",y2:"676.053",gradientUnits:"userSpaceOnUse",children:[v("stop",{stopColor:"#9E5AA4"}),v("stop",{offset:"0.526649",stopColor:"#7387C2"}),v("stop",{offset:"1",stopColor:"#11AADE"})]})})]});try{mf.displayName="Cavatica",mf.__docgenInfo={description:"",displayName:"Cavatica",props:{children:{defaultValue:null,description:"Node passed into the SVG element.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SvgIconClasses> & Partial<ClassNameMap<never>>)"}},color:{defaultValue:{value:"'inherit'"},description:`The color of the component.
It supports both default and custom theme colors, which can be added as shown in the
[palette customization guide](https://mui.com/material-ui/customization/palette/#adding-new-colors).
You can use the \`htmlColor\` prop to apply a color attribute to the SVG element.`,name:"color",required:!1,type:{name:"enum",value:[{value:'"action"'},{value:'"disabled"'},{value:'"info"'},{value:'"warning"'},{value:'"error"'},{value:'"inherit"'},{value:'"primary"'},{value:'"secondary"'},{value:'"success"'}]}},fontSize:{defaultValue:{value:"'medium'"},description:"The fontSize applied to the icon. Defaults to 24px, but can be configure to inherit font size.",name:"fontSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"inherit"'},{value:'"medium"'},{value:'"large"'}]}},htmlColor:{defaultValue:null,description:"Applies a color attribute to the SVG element.",name:"htmlColor",required:!1,type:{name:"string"}},inheritViewBox:{defaultValue:{value:"false"},description:"If `true`, the root node will inherit the custom `component`'s viewBox and the `viewBox`\nprop will be ignored.\nUseful when you want to reference a custom `component` and have `SvgIcon` pass that\n`component`'s viewBox to the root node.",name:"inheritViewBox",required:!1,type:{name:"boolean"}},shapeRendering:{defaultValue:null,description:`The shape-rendering attribute. The behavior of the different options is described on the
[MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering).
If you are having issues with blurry icons you should investigate this prop.`,name:"shapeRendering",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},titleAccess:{defaultValue:null,description:`Provides a human-readable title for the element that contains it.
https://www.w3.org/TR/SVG-access/#Equivalent`,name:"titleAccess",required:!1,type:{name:"string"}},viewBox:{defaultValue:{value:"'0 0 24 24'"},description:`Allows you to redefine what the coordinates without units mean inside an SVG element.
For example, if the SVG element is 500 (width) by 200 (height),
and you pass viewBox="0 0 50 20",
this means that the coordinates inside the SVG will go from the top left corner (0,0)
to bottom right (50,20) and each unit will be worth 10px.`,name:"viewBox",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: SVGSVGElement | null) => void) | RefObject<SVGSVGElement> | null"}}}}}catch{}const t8=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:i1,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],ys=e=>{var k;const{name:t,showColumnSelection:n=!1,hideDownload:a=!1,hideVisualizationsControl:r=!1,hideFacetFilterControl:i=!1,hideQueryCount:o=!1,hideSqlEditorControl:s=!0,customControls:l,showExportToCavatica:c=!1}=e,{data:u,entity:d,executeQueryRequest:f,getLastQueryRequest:p,getInitQueryRequest:h,lockedColumn:m}=gt(),g=e8(p(),(k=u==null?void 0:u.queryResult)==null?void 0:k.queryResults.headers),{topLevelControlsState:b,setTopLevelControlsState:E,columnsToShowInTable:y,selectedRowIndices:_,setColumnsToShowInTable:S}=ht(),w=A=>{const I={[A]:!b[A]};A==="showSearchBar"&&(I.showDownloadConfirmation=!1),A==="showDownloadConfirmation"&&(I.showSearchBar=!1),E(x=>({...x,...I}))},C=()=>{f(p())},N=R.useMemo(()=>{const A=h();return{sql:A.query.sql,selectedFacets:(A.query.selectedFacets??[]).filter(I=>I.columnName===(m==null?void 0:m.columnName)),additionalFilters:(A.query.additionalFilters??[]).filter(I=>"columnName"in I?I.columnName===(m==null?void 0:m.columnName):!0)}},[h,m==null?void 0:m.columnName]),T=A=>{let I=Br(y);I.includes(A)?I=I.filter(x=>x!==A):I.push(A),S(I)},P=b==null?void 0:b.showFacetFilter;return v("div",{className:`TopLevelControls ${P?dr:fr}`,"data-testid":"TopLevelControls",children:L("div",{children:[L("div",{className:"TopLevelControls__querycount",children:[t&&L(G,{children:[L(Oe,{variant:"sectionTitle",role:"heading",children:[t," ",!o&&v(vx,{query:N,parens:!0})]}),!o&&d&&v(hf,{entity:d})]}),!i&&L("a",{onClick:()=>w("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[v(zs,{type:b.showFacetFilter?"close":"filter"}),L("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[b.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),L("div",{className:"TopLevelControls__actions",children:[l&&l.map(A=>L("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${A.classNames??""}`,style:{marginRight:"5px"},type:"button",onClick:()=>A.onClick({data:u,selectedRowIndices:_,refresh:C}),children:[A.icon,"Â ",A.buttonText]},A.buttonText)),c&&L(Gt,{variant:"text",onClick:()=>{g()},children:[v(mf,{sx:{mr:1}})," Send to Cavatica"]}),t8.map(A=>{const{key:I,icon:x,tooltipText:F}=A;return I==="showDownloadConfirmation"&&a||I==="showFacetVisualization"&&r||I==="showSqlEditor"&&s?v(z.Fragment,{},I):I==="showDownloadConfirmation"?v(ff,{darkTheme:!0,onDownloadFiles:()=>w(I)},I):v(Cn,{tooltipText:F,callbackFn:()=>w(I),darkTheme:!0,icon:x},I)}),n&&v(pf,{headers:u==null?void 0:u.selectColumns,isColumnSelected:y,toggleColumnSelection:T,darkTheme:!0})]})]})})};try{ys.displayName="TopLevelControls",ys.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}}}}}catch{}const mi=e=>{const{checked:t=!1,hideLabel:n=!1,isSelectAll:a=!1,disabled:r=!1}=e,[i,o]=R.useState(t),[s]=R.useState(bx("src-checkbox-"));R.useEffect(()=>{o(t)},[t]);const l=u=>{e.onChange(u.target.checked),a&&u.target.checked===!1?o(!0):o(u.target.checked)};let c="checkbox";return e.className&&(c+=` ${e.className}`),L("div",{className:c,onClick:e.onClick,children:[v("input",{"aria-label":e.label,type:"checkbox",checked:i,id:s,onChange:l,disabled:r,"data-testid":e["data-testid"]}),v("label",{htmlFor:s,children:n?v(G,{}):e.label}),e.children??v(G,{})]})};try{mi.displayName="Checkbox",mi.__docgenInfo={description:"",displayName:"Checkbox",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},hideLabel:{defaultValue:null,description:"",name:"hideLabel",required:!1,type:{name:"boolean"}},checked:{defaultValue:null,description:"",name:"checked",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: boolean) => void"}},isSelectAll:{defaultValue:null,description:"",name:"isSelectAll",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: SyntheticEvent<HTMLDivElement, Event>) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}}}}}catch{}const vf=e=>L("svg",{...e,className:`Icon-Plus ${e.className??""}`,width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.title&&v("title",{children:e.title}),v("path",{d:"M14.3887 8H8.38867V14H6.38867V8H0.388672V6H6.38867V0H8.38867V6H14.3887V8Z"})]});try{vf.displayName="IconPlus",vf.__docgenInfo={description:"",displayName:"IconPlus",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}const gf=e=>L("svg",{...e,className:`Icon-Minus ${e.className??""}`,width:"15",height:"2",viewBox:"0 0 15 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.title&&v("title",{children:e.title}),v("path",{d:"M14.3887 2H8.38867H6.38867H0.388672V0H6.38867H8.38867H14.3887V2Z"})]});try{gf.displayName="IconMinus",gf.__docgenInfo={description:"",displayName:"IconMinus",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}const bs=({label:e,isCollapsed:t,onClick:n})=>{const{getColumnDisplayName:a}=ht();return L("div",{className:"FacetFilterHeader",children:[v("label",{className:"FacetFilterHeader__label",children:a(e)}),v("button",{className:"FacetFilterHeader__collapseToggleBtn",onClick:()=>n(!t),children:t?v(vf,{className:"icon-plus",title:"Expand Menu"}):v(gf,{className:"icon-minus",title:"Collapse Menu"})})]})};try{bs.displayName="FacetFilterHeader",bs.__docgenInfo={description:"",displayName:"FacetFilterHeader",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(newValue: boolean) => void"}}}}}catch{}function r8(e){return e.replace(/\s/g,"").toLowerCase()}function Hy(e,t=[],n=[],a=[]){const{value:r}=e;let i=r;r===Ga&&(i=qs);const o=t.find(c=>c.ownerId===r);o&&(i=o?o.userName:`unknown (${r})`);const s=n.find(c=>c.id===r);s&&(i=s?s.name:`unknown (${r})`);const l=a.find(c=>c.id===r);return l!=null&&l.name&&(i=l.name),`${i}`}function n8(e,t,n){const a=[...e.sort((r,i)=>i.count-r.count)];return t||a.length<=n||a.slice(n).find(r=>r.isSelected)?a:a.splice(0,n)}const ca=({facetValues:e,columnModel:t,onClear:n,onChange:a,containerAs:r="Collapsible",dropdownType:i="Icon",collapsed:o=!1})=>{const[s,l]=R.useState(!1),[c,u]=R.useState(o),[d,f]=R.useState(!1),[p,h]=R.useState(!1),[m,g]=R.useState(""),[b,E]=R.useState(e);Do(()=>{E(e)},[e]);const y=5,_=1500,S=z.createRef(),w={};let C;const N=e.filter(q=>q.isSelected).length===0,T=(t==null?void 0:t.columnType)===pe.USERID||(t==null?void 0:t.columnType)===pe.USERID_LIST?e.map(q=>q.value):[],P=Ba({ids:T,type:"USER_PROFILE"}),k=(t==null?void 0:t.columnType)===pe.ENTITYID||(t==null?void 0:t.columnType)===pe.ENTITYID_LIST?e.map(q=>q.value):[],A=Ba({ids:k,type:"ENTITY_HEADER"}),I=(t==null?void 0:t.columnType)===pe.EVALUATIONID?e.map(q=>q.value):[],x=Ba({ids:I,type:"EVALUATION_QUEUE"}),F=q=>{const B=q.target.value;if(g(B),l(!0),!B)e.forEach(j=>{j.isSelected=!1}),E(e);else{const j=e.filter(Q=>Hy(Q,P,A,x).toLowerCase().indexOf(B.trim().toLowerCase())>-1?Q:null);E(j)}};if(!t)return v(G,{});const O=r==="Dropdown",$=L("div",{className:O?"EnumFacetFilter__dropdown_menu":"",children:[L("div",{className:"EnumFacetFilter__checkboxContainer--forAll",children:[L("div",{className:p?"EnumFacetFilter__search active":"EnumFacetFilter__search",children:[v("button",{className:"EnumFacetFilter__closeSearch",onClick:()=>{E(e),h(!1),l(!1)},children:v("span",{className:"EnumFacetFilter__previous",children:v(De,{icon:"arrowBack"})})}),m.length>0&&v("button",{className:"EnumFacetFilter__resetSearch",onClick:()=>{var q;g(""),(q=S.current)==null||q.focus()},children:v("span",{className:"EnumFacetFilter__reset",children:v(De,{icon:"close"})})}),v("input",{type:"text",placeholder:"Find values",value:m,ref:S,onChange:q=>{F(q)}})]}),!p&&L("div",{className:"EnumFacetFilter__checkAll",children:[v(mi,{className:"EnumFacetFilter__checkbox",onChange:()=>{n()},checked:N,label:"All",isSelectAll:!0},"select_all"),v("button",{className:"EnumFacetFilter__searchbtn",onClick:()=>{var q;g(""),h(!0),(q=S.current)==null||q.focus()},children:v("span",{className:"EnumFacetFilter__searchicon",children:v(De,{icon:"search"})})})]})]}),L("div",{children:[b.length>0&&n8(b,s||O,y).map((q,B)=>v(a8,{id:r8(q.value),index:B,label:Hy(q,P,A,x),count:q.count,isDropdown:O,initialIsSelected:q.isSelected,onChange:j=>{w[q.value]=j,clearTimeout(C),C=setTimeout(()=>{a(w),f(!1)},_)}},`checkLabel${B}`)),!O&&L(G,{children:[!s&&b.length>y&&v("button",{className:"EnumFacetFilter__showMoreFacetsBtn",onClick:()=>l(!0),children:v("div",{className:"EnumFacetFilter__checkboxContainer",children:L("div",{className:"EnumFacetFilter__showMoreFacetsLabel",children:["Show all (",b.length,")"]})})}),s&&b.length>y&&v("button",{className:"EnumFacetFilter__showMoreFacetsBtn",onClick:()=>l(!1),children:v("div",{className:"EnumFacetFilter__checkboxContainer",children:v("div",{className:"EnumFacetFilter__showMoreFacetsLabel",children:"Show less"})})})]}),b.length<=0&&v("div",{className:"EnumFacetFilter__noMatch",children:"No match found"})]})]}),V=()=>f(!d);return O?i==="SelectBox"?L(dt,{className:"EnumFacetFilter EnumFacetFilterSelect",show:d,onToggle:V,children:[L(dt.Toggle,{className:"secondary-caret",variant:"gray-select",children:[N&&"All",!N&&e.filter(q=>q.isSelected).length===1&&e.filter(q=>q.isSelected)[0].value,!N&&e.filter(q=>q.isSelected).length>1&&"Multiple Values Selected"]}),v(dt.Menu,{children:$})]}):L(dt,{className:"EnumFacetFilter",show:d,onToggle:V,children:[v(Cn,{tooltipText:"Filter by specific facet",darkTheme:!1,icon:"filter"},"facetFilterTooltip"),v(dt.Menu,{children:$})]}):L(G,{children:[v(bs,{isCollapsed:c,label:t.name,onClick:q=>u(q)}),v(xi,{className:"EnumFacetFilter",in:!c,children:$})]})};function a8({id:e,index:t,label:n,count:a,isDropdown:r,initialIsSelected:i,onChange:o}){const[s,l]=R.useState(i);return z.useEffect(()=>{l(i)},[i]),L("div",{className:"EnumFacetFilter__checkboxContainer",onClick:()=>{r&&(l(!s),o(!s))},children:[v(mi,{className:"EnumFacetFilter__checkbox",onClick:c=>c.stopPropagation(),onChange:c=>{l(c),o(c)},checked:s,label:n},`${e}-${t}`),r&&L("span",{className:"EnumFacetFilter__count",children:["(",a,")"]}),!r&&v("div",{className:"EnumFacetFilter__count",children:a})]})}try{ca.displayName="EnumFacetFilter",ca.__docgenInfo={description:"*********** QUERY ENUM CONMPONENT  ************",displayName:"EnumFacetFilter",props:{facetValues:{defaultValue:null,description:"",name:"facetValues",required:!0,type:{name:"FacetColumnResultValueCount[]"}},columnModel:{defaultValue:null,description:"",name:"columnModel",required:!0,type:{name:"SelectColumn"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(facetNamesMap: Record<string, string>) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}},containerAs:{defaultValue:{value:"Collapsible"},description:"",name:"containerAs",required:!1,type:{name:"enum",value:[{value:'"Collapsible"'},{value:'"Dropdown"'}]}},dropdownType:{defaultValue:{value:"Icon"},description:"",name:"dropdownType",required:!1,type:{name:"enum",value:[{value:'"Icon"'},{value:'"SelectBox"'}]}},collapsed:{defaultValue:{value:"false"},description:"",name:"collapsed",required:!1,type:{name:"boolean"}}}}}catch{}const yf=({facet:e,isChecked:t,onClick:n})=>{const{getColumnDisplayName:a}=ht();return L("button",{className:`Chip ${t?"Checked":""}`,onClick:n,children:[a(e.columnName),v(De,{icon:t?"check":"add",sx:{width:"14px",paddingLeft:"0.2rem"}})]})};try{yf.displayName="FacetChip",yf.__docgenInfo={description:"",displayName:"FacetChip",props:{facet:{defaultValue:null,description:"",name:"facet",required:!0,type:{name:"FacetColumnResult"}},isChecked:{defaultValue:null,description:"",name:"isChecked",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}}}}}catch{}const bf=e=>{const t="Min value should be less then max value",[n,a]=R.useState(!1),[r,i]=R.useState(()=>e.type==="number"&&e.initialValues?e.initialValues:e.initialValues&&{min:lr(e.initialValues.min).format("YYYY-MM-DD"),max:lr(e.initialValues.max).format("YYYY-MM-DD")}||{min:void 0,max:void 0}),o=e.className?`range ${e.className}`:"range",s=({min:c,max:u},d="number")=>{if(c==null||u===null||u===void 0)return a(!1),!0;if(d==="number"){if(Number(c)>Number(u))return a(!0),!1}else if(Date.parse(c)>Date.parse(u))return a(!0),!1;return a(!1),!0},l=(c,u,d="number")=>{s(c,d)&&u(c)};return L("div",{className:o,style:{display:"flex",flexWrap:"wrap"},children:[L("div",{style:{marginRight:"10px"},children:[v("input",{"aria-label":"min",type:e.type,value:r.min,onChange:({target:c})=>i({min:c.value,max:r.max})},"range_min"),v("div",{children:"to"}),v("input",{"aria-label":"max",type:e.type,value:r.max,onChange:({target:c})=>i({min:r.min,max:c.value})},"range_max")]}),v("button",{className:"btn btn-link SRC-noPadding",onClick:()=>l(r,e.onChange,e.type),children:"Apply"}),n&&v("div",{className:"SRC-danger-color",children:e.errorText||t})]})};try{bf.displayName="Range",bf.__docgenInfo={description:"",displayName:"Range",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"number"'},{value:'"date"'}]}},initialValues:{defaultValue:null,description:"",name:"initialValues",required:!1,type:{name:"RangeValues<string | number>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},errorText:{defaultValue:null,description:"",name:"errorText",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValues: RangeValues<string | number>) => void"}}}}}catch{}const wf=({facetResult:e,columnModel:t,onChange:n,collapsed:a=!1})=>{const[r,i]=R.useState(a),o=[{label:qs,value:"org.sagebionetworks.UNDEFINED_NULL_NOTSET"},{label:"Any",value:""},{label:"Range",value:"RANGE"}];let{columnMin:s,columnMax:l,selectedMin:c,selectedMax:u}=e;const d=!c&&!u;c=c||s,u=u||l;const f=t.columnType==="DOUBLE"?"number":"date",p=(E,y)=>y?"":E===Ga?"org.sagebionetworks.UNDEFINED_NULL_NOTSET":"RANGE",h=(E,y)=>{g(E),E!=="RANGE"&&y([E,E])},[m,g]=R.useState(p(c,d));return L("div",{children:[v(bs,{isCollapsed:r,label:t.name,onClick:E=>i(E)}),L(xi,{in:!r,children:[v(wx,{value:m,id:"rangeSelector",options:o,onChange:E=>h(E,n)}),m==="RANGE"&&(s===l?v("label",{children:l}):L(G,{children:[t.columnType==="INTEGER"&&L(Sx,{domain:[s,l],initialValues:{min:c,max:u},step:1,doUpdateOnApply:!0,onChange:E=>n([E.min,E.max]),children:[") ",">"]},"RangeSlider"),(t.columnType==="DATE"||t.columnType==="DOUBLE")&&v(bf,{initialValues:{min:c,max:u},type:f,onChange:E=>n([E.min,E.max])},"Range")]}))]})]})};try{wf.displayName="RangeFacetFilter",wf.__docgenInfo={description:"",displayName:"RangeFacetFilter",props:{facetResult:{defaultValue:null,description:"",name:"facetResult",required:!0,type:{name:"FacetColumnResultRange"}},columnModel:{defaultValue:null,description:"",name:"columnModel",required:!0,type:{name:"SelectColumn"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(range: (string | number | undefined)[]) => void"}},collapsed:{defaultValue:{value:"false"},description:"",name:"collapsed",required:!1,type:{name:"boolean"}}}}}catch{}const vC=e=>({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:e.columnName,facetValues:e.facetValues.filter(t=>t.isSelected).map(t=>t.value)}),i8=e=>{let t={concreteType:"org.sagebionetworks.repo.model.table.FacetColumnRangeRequest",columnName:e.columnName};return e.columnMin&&(t={...t,min:e.columnMin,max:e.columnMax}),t},Vh=(e,t)=>{var i;const n=((i=t==null?void 0:t.query)==null?void 0:i.selectedFacets)??[],a=n.findIndex(o=>o.columnName===e.columnName),r=e.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnValuesRequest"&&(!e.facetValues||!e.facetValues.length);return a>-1?r?n.splice(a,1):n[a]=e:n.push(e),n};function vi(e,t,n,a,r=!1){a?t.facetValues.forEach(s=>{s.value===a&&(s.isSelected=r)}):t.facetValues.forEach(s=>{s.isSelected=!1});const i=vC(t),o=Vh(i,e);n(o)}const ws=(e,t,n,a)=>{const r=a&&Object.keys(a)||[];r.length&&t.facetValues.forEach(s=>{r.includes(s.value)&&(s.isSelected=a?!!a[s.value]:!1)});const i=vC(t),o=Vh(i,e);n(o)},o8=(e,t,n,a)=>{t.columnMin=a[0],t.columnMax=a[1];const r=i8(t),i=Vh(r,e);n(i)};function Ss(e,t){const n=(t??[]).map(a=>a.columnName);return new Set([...e.slice(0,3).map(a=>a.columnName),...n])}function bo(){const e=L(Ti,{direction:"row",gap:"10px",sx:{my:1},children:[v(mn,{width:"15px"}),v(mn,{width:"40%"})]});return L(ut,{className:"FacetFilterControls__facet",children:[v(ut,{className:"FacetFilterHeader",children:v(mn,{width:"100%"})}),L(ut,{children:[e,e,e]})]})}function s8(){const{topLevelControlsState:e}=ht(),{showFacetFilter:t}=e;return L("div",{className:`FacetFilterControls ${t?dr:fr}`,children:[v(bo,{}),v(bo,{}),v(bo,{}),v(bo,{})]})}function Sf(e){const{availableFacets:t}=e,{data:n,getLastQueryRequest:a,executeQueryRequest:r}=gt(),i=a(),o=n.facets.filter(h=>t==null||t.includes(h.columnName)).filter(h=>!rw(h)),[s,l]=z.useState(Ss(o,i.query.selectedFacets)),{topLevelControlsState:c}=ht(),{showFacetFilter:u}=c;Xb(()=>{l(Ss(o,i.query.selectedFacets))},[o]);const d=n.selectColumns,f=h=>{const m=a();m.query.selectedFacets=h,m.query.offset=0,r(m)},p=h=>{const m=new Set(s);m.has(h.columnName)?m.delete(h.columnName):m.add(h.columnName),l(m)};return L("div",{className:`FacetFilterControls ${u?dr:fr}`,children:[(o??[]).filter(h=>s.has(h.columnName)).map(h=>{const m=d.find(g=>g.name===h.columnName);return L("div",{className:"FacetFilterControls__facet",children:[h.facetType==="enumeration"&&m&&v(ca,{containerAs:"Collapsible",collapsed:!1,facetValues:h.facetValues,columnModel:m,onChange:g=>ws(i,h,f,g),onClear:()=>vi(i,h,f)}),h.facetType==="range"&&m&&v(wf,{facetResult:h,columnModel:m,collapsed:!1,onChange:g=>o8(i,h,f,g)})]},h.columnName)}),L("div",{children:[v("div",{className:"AvailableFacet",children:v("label",{className:"AvailableFacet__label",children:"Available Facets"})}),o.map(h=>v(yf,{facet:h,onClick:()=>p(h),isChecked:s.has(h.columnName)},h.columnName))]})]})}function l8(e){const{data:t,isLoadingNewBundle:n}=gt();return n?v(s8,{}):t==null||t.facets==null?v(G,{}):v(Sf,{...e})}try{Ss.displayName="getDefaultShownFacetFilters",Ss.__docgenInfo={description:`Determines which facet filters should be shown after loading a new bundle. The shown facets will be the first
three available facets, plus any other facets that have a filter applied.`,displayName:"getDefaultShownFacetFilters",props:{}}}catch{}try{Sf.displayName="FacetFilterControls",Sf.__docgenInfo={description:"",displayName:"FacetFilterControls",props:{availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}}}}}catch{}const u8=Qb(Gb),c8=19,d8=30,f8={showlegend:!1,annotations:[],margin:{l:0,r:0,b:0,t:0,pad:0},yaxis:{visible:!1,showgrid:!1},xaxis:{visible:!1,showgrid:!1}};function gC(e,t){if(!e)return e;const n=e.trim();return n.length>t?n.substr(0,t-1)+"â€¦":e}async function p8(e,t,n,a,r){var h,m;const{colorPalette:i}=Ex(n,e.facetValues.length),o=async(g,b,E)=>{const y=new Map;y.set(Ga,qs);const _=g.map(S=>S.value).filter(S=>S!==Ga);if(b===pe.ENTITYID||b===pe.ENTITYID_LIST){const S=await yb(_,E);for(const w of S.results)y.set(w.id,w.name)}else if(b===pe.USERID||b===pe.USERID_LIST){const S=await bb(_,E);for(const w of S.children)y.set(w.ownerId,w.userName)}return g.map(S=>({facet:S,label:s(S,!1,y),truncatedLabel:s(S,!0,y),count:S.count}))},s=(g,b,E)=>{let y=E.get(g.value)??g.value;return b&&(y=gC(y,c8)),y},l=await o(e.facetValues,t,r),c=l.map(g=>g.truncatedLabel),d=e.facetValues.some(g=>g.isSelected)?e.facetValues.map((g,b)=>g.isSelected?i[b]:i[b].replace("rgb(","rgba(").replace(")",", 0.25)")):i,f={values:a==="PIE"?e.facetValues.map(g=>g.count):void 0,labels:l.map(g=>g.label),text:c,x:a==="BAR"?e.facetValues.map(g=>{var b;return((b=l.find(E=>E.facet===g))==null?void 0:b.label)??g.value}):void 0,y:a==="BAR"?e.facetValues.map(g=>g.count):void 0,facetEnumerationValues:e.facetValues.map(g=>g.value),name:e.columnName,hovertemplate:a==="PIE"?"<b>%{text}</b><br>%{value} (%{percent})<br><extra></extra>":"<b>%{text}: </b><br>%{value} <br><extra></extra>",textinfo:"none",type:a==="PIE"?"pie":"bar",pull:a==="PIE"?e.facetValues.map(g=>g.isSelected?.1:0):void 0,marker:{colors:a==="PIE"?d:void 0,color:a==="BAR"?d:void 0}};return{data:[f],labels:l,colors:a==="PIE"?(h=f.marker)==null?void 0:h.colors:(m=f.marker)==null?void 0:m.color}}const h8=(e,t,n)=>{if(e.points&&e.points[0]){const a=e.points[0],r=a.data.facetEnumerationValues[a.pointNumber],i=t.facetValues.find(o=>o.value===r);n(t,i,!i.isSelected)}};function m8(e,t,n){const r=e?e*(t==="BAR"?.8:.6):200;let i=t==="PIE"?r:r/3;return i>n&&(i=n),{width:`${r}px`,height:`${i}px`}}function _f(e){const{labels:t,colors:n=[],isExpanded:a}=e;if(!t)return v(G,{});const r=a?Math.min(t.length,9):Math.min(t.length,4);return r===0?v(G,{}):v("div",{className:`FacetNavPanel__body__legend${a?"--expanded":""}`,children:t.slice(0,r).map((i,o)=>{const s=gC(i.label,d8);return v(Cn,{tooltipText:i.label,children:L(ut,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[v(ut,{sx:{width:"14px",height:"14px",cursor:"default",backgroundColor:n[o]},style:{cursor:"default"}},`legendLabel_${o}`),v(Oe,{variant:"body2",children:s}),v(Oe,{variant:"body2",sx:{color:"grey.600"},children:i.count})]})},i.label)})})}const v8=(e,t)=>e?`FacetNavPanel__body__plot--expanded${t==="BAR"?"Bar":"Pie"}`:"FacetNavPanel__body__plot",_s=e=>{const{onHide:t,isModalView:n,applyChangesToFacetFilter:a,applyChangesToGraphSlice:r,index:i,facetToPlot:o,plotType:s,onSetPlotType:l}=e,{accessToken:c}=je(),{data:u,isLoadingNewBundle:d,getLastQueryRequest:f}=gt(),{getColumnDisplayName:p}=ht(),[h,m]=R.useState(!1),g=p(o.columnName),b=R.useCallback(()=>{var _,S;return(S=(_=u==null?void 0:u.columnModels)==null?void 0:_.find(w=>w.name===o.columnName))==null?void 0:S.columnType},[u,o.columnName]),{data:E}=Ei(["extractPlotDataArray",o,b(),i,s,c],()=>p8(o,b(),i,s,c),{enabled:!!o}),y=()=>L("div",{onClick:_=>{_.stopPropagation()},className:"bootstrap-4-backport SRC-labeled-dropdown",children:[v("span",{className:"SRC-labeled-dropdown__label",children:"Chart Type"}),L(dt,{children:[v(dt.Toggle,{className:"secondary-caret",variant:"gray-select",children:s==="PIE"?"Pie Chart":"Bar Chart"}),L(dt.Menu,{className:"chart-tools",children:[v(dt.Item,{as:"button",onClick:()=>l("BAR"),children:"Bar Chart"}),v(dt.Item,{as:"button",onClick:()=>l("PIE"),children:"Pie Chart"})]})]})]});return!u&&d||!o?v("div",{className:"SRC-loadingContainer SRC-centerContentColumn",children:yp}):L(G,{children:[v(Si,{open:h,onCancel:()=>m(!1),title:g??"",content:v(_s,{...e,isModalView:!0}),hasCancelButton:!1,confirmButtonText:"Apply Filters",onConfirm:()=>m(!1)}),L("div",{role:"graphics-document",className:`FacetNavPanel${n?"--expanded":""}`,children:[!n&&L("div",{className:"FacetNavPanel__title",children:[!u&&d?v(gn,{width:100}):v("span",{className:"FacetNavPanel__title__name",children:g}),L("div",{className:"FacetNavPanel__title__tools",children:[v(ca,{facetValues:o.facetValues,columnModel:u==null?void 0:u.columnModels.find(_=>_.name===o.columnName),onChange:_=>{ws(f(),o,a,_)},onClear:()=>{vi(f(),o,a)},containerAs:"Dropdown"}),v(Cn,{tooltipText:"Expand to large graph",callbackFn:()=>m(!0),className:"SRC-primary-color",darkTheme:!1,icon:"expand"},"expandGraph"),v(Cn,{tooltipText:"Hide graph under Show More",callbackFn:()=>t(),className:"SRC-primary-color",darkTheme:!1,icon:"close"},"hideGraph")]})]}),n&&L(G,{children:[L("div",{className:"bootstrap-4-backport SRC-labeled-dropdown",children:[v("span",{className:"SRC-labeled-dropdown__label",children:"Filter All Data By"}),v(ca,{facetValues:o.facetValues,columnModel:u==null?void 0:u.columnModels.find(_=>_.name===o.columnName),onChange:_=>{ws(f(),o,a,_)},onClear:()=>{vi(f(),o,a)},containerAs:"Dropdown",dropdownType:"SelectBox"}),v(Et,{title:"Selecting items in this dropdown will affect all facets on the Explore page.",children:v(m1,{className:"SRC-hand-cursor SRC-secondary-text-color"})})]}),v(y,{})]}),L("div",{className:`FacetNavPanel__body${n?"--expanded":""}`,role:"graphics-object",children:[v(_x.SizeMe,{monitorHeight:!0,children:({size:_})=>v("div",{className:v8(n,s),children:v(u8,{layout:f8,data:(E==null?void 0:E.data)??[],style:m8(_.width,s,n?300:150),config:{displayModeBar:!1},onClick:S=>h8(S,o,r)},`${o.columnName}-${s}-${_.width}`)})}),v(_f,{labels:E==null?void 0:E.labels,colors:E==null?void 0:E.colors,isExpanded:n})]})]})]})};try{_f.displayName="FacetPlotLegend",_f.__docgenInfo={description:"",displayName:"FacetPlotLegend",props:{labels:{defaultValue:null,description:"",name:"labels",required:!1,type:{name:"FacetWithLabel[]"}},colors:{defaultValue:null,description:"",name:"colors",required:!1,type:{name:"string[]"}},isExpanded:{defaultValue:null,description:"",name:"isExpanded",required:!0,type:{name:"boolean"}}}}}catch{}try{_s.displayName="FacetNavPanel",_s.__docgenInfo={description:"",displayName:"FacetNavPanel",props:{applyChangesToGraphSlice:{defaultValue:null,description:"",name:"applyChangesToGraphSlice",required:!0,type:{name:"(facet: FacetColumnResultValues, value: FacetColumnResultValueCount | undefined, isSelected: boolean) => void"}},applyChangesToFacetFilter:{defaultValue:null,description:"",name:"applyChangesToFacetFilter",required:!0,type:{name:"(facets: FacetColumnRequest[]) => void"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},facetToPlot:{defaultValue:null,description:"",name:"facetToPlot",required:!0,type:{name:"FacetColumnResultValues"}},plotType:{defaultValue:null,description:"",name:"plotType",required:!0,type:{name:"enum",value:[{value:'"PIE"'},{value:'"BAR"'}]}},onSetPlotType:{defaultValue:null,description:"",name:"onSetPlotType",required:!0,type:{name:"(plotType: PlotType) => void"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},isModalView:{defaultValue:null,description:"",name:"isModalView",required:!0,type:{name:"boolean"}},onCloseModal:{defaultValue:null,description:"",name:"onCloseModal",required:!1,type:{name:"(() => void)"}}}}}catch{}function g8(e,t,n){const a=t.getColumnModel(e.columnName);return e.values.map(r=>{let i=r;r!=null&&r.startsWith("%")&&(r!=null&&r.endsWith("%"))&&(i=i.substring(1,i.length-1)),i=n.getDisplayValue(i,a.columnType);const o=`${e.columnName}: ${i}`;return{key:`queryFilter-${e.concreteType}-${e.columnName}-${r}`,innerText:o,tooltipText:o,onRemoveFilter:()=>{t.removeValueFromQueryFilter(e,r)}}})}function y8(e,t){return{key:`queryFilter-${e.concreteType}-${e.searchExpression}`,innerText:e.searchExpression,tooltipText:`Text matches: "${e.searchExpression}"`,onRemoveFilter:()=>{t.removeQueryFilter(e)}}}function b8(e,t,n){var a;return Oo(e)||qo(e)?e.columnName===((a=t.lockedColumn)==null?void 0:a.columnName)?[]:g8(e,t,n):sx(e)?[y8(e,t)]:(console.log("Unknown query filter type",e.concreteType),[])}function w8(e,t,n){var o;if(e.columnName===((o=t.lockedColumn)==null?void 0:o.columnName))return[];const a=t.getColumnModel(e.columnName),{getColumnDisplayName:r,getDisplayValue:i}=n;if(zc(e))return e.facetValues.map(s=>{const l=i(s,a.columnType);return{key:`facet-${e.concreteType}-${e.columnName}-${s}`,innerText:l,tooltipText:`${r(e.columnName)}: ${l}`,onRemoveFilter:()=>{t.removeValueFromSelectedFacet(e,s)}}});if(pI(e)){const s=`${e.min} - ${e.max}`;return[{key:`facet-${e.concreteType}-${e.columnName}-${e.min}-${e.max}`,innerText:s,tooltipText:`${r(e.columnName)}: ${s}`,onRemoveFilter:()=>{t.removeSelectedFacet(e)}}]}else return console.log("Unknown facet type",e.concreteType),[]}function S8(){var s;const e=gt(),t=ht(),{getLastQueryRequest:n}=e,a=n(),r=(((s=a.query)==null?void 0:s.additionalFilters)??[]).flatMap(l=>b8(l,e,t)),i=(a.query.selectedFacets??[]).flatMap(l=>w8(l,e,t)),o=[...r,...i];return v(G,{children:o.map(l=>{const c=encodeURIComponent(l.key);return R.createElement(Cx,{...l,key:c})})})}function gi(e){const{style:t,frontText:n,endText:a="",hideIfUnfiltered:r=!1}=e,{data:i,isLoadingNewBundle:o,resetQuery:s,error:l,hasResettableFilters:c}=gt(),{topLevelControlsState:u,unitDescription:d}=ht(),f=i==null?void 0:i.queryCount,p=u==null?void 0:u.showFacetFilter,h=c;return l?v(G,{}):v("div",{className:`TotalQueryResults ${p?dr:fr} ${c?"hasFilters":""}`,style:t,children:o?v(gn,{width:100}):L(G,{children:[(c||!r)&&L("div",{className:"TotalQueryResults__topbar",children:[L("span",{className:"SRC-boldText",children:[n," ",f==null?void 0:f.toLocaleString()," ",d," ",a]}),h&&L("a",{onClick:s,className:"TotalQueryResults__topbar__clearall",children:[v(De,{icon:"deleteSweep"}),"Clear all filters"]})]}),v("div",{className:"TotalQueryResults__selections",children:v(S8,{})})]})})}try{gi.displayName="TotalQueryResults",gi.__docgenInfo={description:"",displayName:"TotalQueryResults",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},frontText:{defaultValue:null,description:"",name:"frontText",required:!0,type:{name:"string"}},endText:{defaultValue:null,description:"",name:"endText",required:!1,type:{name:"string"}},applyChanges:{defaultValue:null,description:"",name:"applyChanges",required:!1,type:{name:"((newFacets: FacetColumnRequest[]) => void)"}},hideIfUnfiltered:{defaultValue:null,description:"",name:"hideIfUnfiltered",required:!1,type:{name:"boolean"}}}}}catch{}const Ac=2;function kc(e,t){var a;return((a=e==null?void 0:e.facets)==null?void 0:a.filter(r=>r.facetType==="enumeration"&&(!(t!=null&&t.length)||t.indexOf(r.columnName)>-1)&&r.facetValues.length>0&&!rw(r)))??[]}const Ef=({facetsToPlot:e})=>{const{data:t,getLastQueryRequest:n,isLoadingNewBundle:a,executeQueryRequest:r,error:i,asyncJobStatus:o}=gt(),{topLevelControlsState:s}=ht(),[l,c]=R.useState([]),[u,d]=R.useState(!0),{showFacetVisualization:f,showFacetFilter:p}=s,h=n();R.useEffect(()=>{const P=kc(t,e);P.length!==0&&u&&(c(P.map((k,A)=>({name:k.columnName,isHidden:A>=Ac,plotType:"PIE"}))),d(!1))},[t,u,e]);const m=P=>{c(k=>k.map((A,I)=>P?{...A,isHidden:!1}:{...A,isHidden:I>=Ac}))},g=P=>{h.query.selectedFacets=P,h.query.offset=0,r(h)},b=P=>l.find(I=>I.name===P&&I.isHidden===!0)!==void 0,E=R.useMemo(()=>l.find(P=>P.isHidden===!0)?"MORE":l.length<=Ac?"NONE":"LESS",[l]),y=P=>{w(P,"isHidden",!0)},_=(P,k)=>{w(P,"plotType",k)},S=P=>{var A;return((A=l.find(I=>I.name===P))==null?void 0:A.plotType)??"PIE"},w=(P,k,A)=>{c(I=>I.map(x=>x.name===P?{...x,[k]:A}:x))},C=kc(t,e),N=kc(t,e).map((P,k)=>({columnName:P.columnName,colorIndex:k})),T=(h==null?void 0:h.query.selectedFacets)!==void 0&&h.query.selectedFacets.length>0||(h==null?void 0:h.query.additionalFilters)!==void 0&&(h==null?void 0:h.query.additionalFilters.length)>0;return i?v(G,{}):!t&&a?v("div",{className:"SRC-loadingContainer SRC-centerContentColumn",children:(o==null?void 0:o.progressMessage)&&L("div",{children:[v("span",{className:"spinner"}),o.progressMessage]})}):L(G,{children:[v(gi,{frontText:"",endText:T?"filtered by":"",hideIfUnfiltered:!0}),C.length>0&&L("div",{className:`FacetNav ${f?"":"hidden"} ${p?dr:fr} ${E==="LESS"?"less":""}`,children:[v("div",{className:"FacetNav__row",role:"list",children:C.map(P=>{var k;return v("div",{className:"col-sm-12 col-md-4",style:{display:b(P.columnName)?"none":"block"},children:v(_s,{index:(k=N.find(A=>A.columnName===P.columnName))==null?void 0:k.colorIndex,onHide:()=>y(P.columnName),plotType:S(P.columnName),onSetPlotType:A=>_(P.columnName,A),facetToPlot:P,applyChangesToFacetFilter:g,applyChangesToGraphSlice:(A,I,x)=>vi(h,A,g,I==null?void 0:I.value,x),isModalView:!1})},P.columnName)})}),E!=="NONE"&&v("div",{className:"FacetNav__showMoreContainer",children:v(ks,{variant:"contained",color:"secondary",onClick:()=>m(E==="MORE"),sx:{width:"250px"},children:E==="LESS"?"Hide Charts":"View All Charts"})})]})]})};try{Ef.displayName="FacetNav",Ef.__docgenInfo={description:"",displayName:"FacetNav",props:{facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}}}}}catch{}var _8=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],Wy=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=String(t).toLowerCase(),i=String(a.getOptionValue(n)).toLowerCase(),o=String(a.getOptionLabel(n)).toLowerCase();return i===r||o===r},$c={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,n,a,r){return!(!t||n.some(function(i){return Wy(t,i,r)})||a.some(function(i){return Wy(t,i,r)}))},getNewOptionData:function(t,n){return{label:n,value:t,__isNew__:!0}}};function E8(e){var t=e.allowCreateWhileLoading,n=t===void 0?!1:t,a=e.createOptionPosition,r=a===void 0?"last":a,i=e.formatCreateLabel,o=i===void 0?$c.formatCreateLabel:i,s=e.isValidNewOption,l=s===void 0?$c.isValidNewOption:s,c=e.getNewOptionData,u=c===void 0?$c.getNewOptionData:c,d=e.onCreateOption,f=e.options,p=f===void 0?[]:f,h=e.onChange,m=xx(e,_8),g=m.getOptionValue,b=g===void 0?Ix:g,E=m.getOptionLabel,y=E===void 0?Tx:E,_=m.inputValue,S=m.isLoading,w=m.isMulti,C=m.value,N=m.name,T=R.useMemo(function(){return l(_,Zh(C),p,{getOptionValue:b,getOptionLabel:y})?u(_,o(_)):void 0},[o,u,y,b,_,l,p,C]),P=R.useMemo(function(){return(n||!S)&&T?r==="first"?[T].concat(Fl(p)):[].concat(Fl(p),[T]):p},[n,r,S,T,p]),k=R.useCallback(function(A,I){if(I.action!=="select-option")return h(A,I);var x=Array.isArray(A)?A:[A];if(x[x.length-1]===T){if(d)d(_);else{var F=u(_,_),O={action:"create-option",name:N,option:F};h(Nx(w,[].concat(Fl(Zh(C)),[F]),F),O)}return}h(A,I)},[u,_,w,N,T,d,h,C]);return Jh(Jh({},m),{},{options:P,onChange:k})}var C8=R.forwardRef(function(e,t){var n=Px(e),a=E8(n);return R.createElement(Rx,Ce({ref:t},a))});const x8=C8,Es=({children:e,...t})=>v(Ax.Control,{...t,className:"form-control",children:e});function Cs(e,t){if(e==null)return;const n=t.filter(a=>a.value===e);return n.length>0?n[0]:{value:e,label:e}}const jy=e=>{const{id:t,options:n,value:a,required:r,disabled:i,readonly:o,multiple:s,autofocus:l,onChange:c,onBlur:u,onFocus:d,placeholder:f}=e,{enumOptions:p}=n;return v(x8,{className:"react-select-container",inputId:t,isMulti:s,placeholder:f,value:Cs(a,p),"aria-required":r,isDisabled:i||o,autoFocus:l,onBlur:u&&(()=>u(t,a==null?void 0:a.value)),options:p,onFocus:d&&(()=>d(t,a==null?void 0:a.value)),onChange:h=>c(h==null?void 0:h.value),isClearable:!0,components:{Control:Es},formatCreateLabel:h=>`Set to custom value "${h}"`,styles:{control:h=>({...h,border:"unset",borderColor:"unset",boxShadow:"unset","&:hover":{}}),valueContainer:h=>({...h,padding:"0px"})}})};try{Cs.displayName="findValueOption",Cs.__docgenInfo={description:`react-select's value prop should be an EnumOption (see custom type defined above)

This function finds the enum option that has the corresponding value and returns it.

If value is nullish, this fn returns undefined. If there is no corresponding option, then a new object is returned
where the label and value are set to the provided value.`,displayName:"findValueOption",props:{}}}catch{}try{Es.displayName="Control",Es.__docgenInfo={description:"We want to apply the 'form-control' bootstrap class to react-select's Control component, and the easiest way to do that is to make a custom version",displayName:"Control",props:{}}}catch{}try{jy.displayName="CustomSelectWidget",jy.__docgenInfo={description:"Select widget compatible with react-jsonschema-form enumerations",displayName:"CustomSelectWidget",props:{}}}catch{}const Cf=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:a}=e,r=gt(),{getLastQueryRequest:i,executeQueryRequest:o}=r,{getColumnDisplayName:s}=ht(),[l,c]=R.useState(t),[u,d]=R.useState(n),f=a.map(h=>({value:h,label:s(h)})),p=h=>{const m=i();let g="ASC";h===l&&(g=u==="ASC"?"DESC":"ASC");const b=h?[{column:h,direction:g}]:void 0;m.query.sort=b,o(m),c(h),d(g)};return L("div",{className:"QuerySortSelector bootstrap-4-backport",children:[v(Oe,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),v(yx,{className:"react-select-container SRC-inlineBlock",value:Cs(l,f),options:f,onChange:h=>p(h==null?void 0:h.value),components:{Control:Es},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{Cf.displayName="QuerySortSelector",Cf.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}var Er=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(Er||{});const Qy=e=>{const t=rn(e.sql),n=Tp(e.searchParams,e.sqlOperator),{sortConfig:a,columnAliases:r}=e,i=a?[{column:a.defaultColumn,direction:a.defaultDirection}]:void 0,o={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit??Os,sort:i,additionalFilters:n},partMask:da|fa|Ds|xb|$s|Fs|mp|gp};return v(ms,{...e,initQueryRequest:o,children:L(ci,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:r,noContentPlaceholderType:e.noContentPlaceholderType??Qr.STATIC,children:[a&&v(Cf,{sortConfig:a}),v(Is,{...e}),v(li,{children:s=>v(hp,{error:s==null?void 0:s.error})})]})})};try{Qy.displayName="CardContainerLogic",Qy.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}const xf=({type:e,title:t,subTitle:n="",description:a,values:r,secondaryLabelLimit:i,isAlignToLeftNav:o,descriptionConfig:s,href:l,target:c,rgbIndex:u,icon:d})=>{const f=document.querySelector('meta[name="description"]'),[p]=R.useState(document.title),[h]=R.useState(f?f.getAttribute("content"):"");return R.useEffect(()=>(t&&document.title!==t&&(document.title=t),(a||n)&&(f==null||f.setAttribute("content",a||n)),function(){document.title=p,f==null||f.setAttribute("content",h)})),v("div",{className:`SRC-portalCard SRC-portalCardHeader ${o?"isAlignToLeftNav":""}`,children:v("div",{className:"container-fluid container-full-width",children:v("div",{className:"row",children:v("div",{className:"col-md-offset-1 col-md-10",children:L("div",{className:"SRC-portalCardMain",children:[d,L("div",{style:{width:"100%"},children:[L("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[v("div",{className:"SRC-type",children:e}),v("div",{children:v("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?v("a",{target:c,href:l,className:"highlight-link",children:t}):L("span",{children:[" ",t," "]})})}),n&&L("div",{className:"SRC-author",children:[" ",n," "]}),a&&v("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?v(xt,{markdown:a}):a})]}),v("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),v("div",{className:"SRC-cardContent",children:r&&v(Pp,{isHeader:!0,secondaryLabelLimit:i,values:r})})]})]})})})})})};try{xf.displayName="HeaderCard",xf.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}}}catch{}const Nf=e=>{var c;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:a=!1,displayValue:r}=e,{accessToken:i}=je(),[o,s]=R.useState();R.useEffect(()=>{r===void 0&&(async()=>s(await As({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},i)))()},[i,r,t]);let l;return o&&(l=(c=o.requestedFiles[0].fileHandle)==null?void 0:c.fileName),L("button",{onClick:()=>{i&&t&&wb(t.fileHandleId,i,t.associateObjectType,t.associateObjectId,a).then(u=>{window.open(u,"_blank")}).catch(u=>{console.error("Error on retrieving file handle url ",u)})},className:`SRC-primary-text-color ${vp}`,type:"button",style:{padding:0},children:[r??l??t.fileHandleId,n&&v(De,{icon:"download"})]})};try{Nf.displayName="FileHandleLink",Nf.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}}}catch{}const If=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:a}}=e,{accessToken:r}=je(),[i,o]=R.useState(),{ref:s,inView:l}=pa({triggerOnce:!0,rootMargin:"500px 0px"});return R.useEffect(()=>{(()=>{t&&n&&a&&l&&wb(t,r,a,n,!1).then(u=>{o(u)}).catch(u=>{console.error("Error on retrieving file handle url ",u)})})()},[l,t,n,r,a]),v("span",{ref:s,children:i&&v("img",{src:i,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{If.displayName="ImageFileHandle",If.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}}}catch{}const Mh=400,N8="SRC-short-description",I8="SRC-long-description",Tf=e=>{let t="";const n=e.split(" ");let a=0;for(;t.length<Mh&&a<n.length;)t+=`${n[a]} `,a+=1;return t=t.trim(),{previewText:t}},T8=(e,t,n)=>{let a;return e&&t&&(Sb(e)?a={fileHandleId:t,associateObjectId:(e==null?void 0:e.id)??"",associateObjectType:or.TableEntity}:n&&(a={fileHandleId:t,associateObjectId:n,associateObjectType:or.FileEntity})),a},Sn=({columnName:e,value:t,selectColumns:n,columnModels:a})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const r=(n==null?void 0:n.find(o=>o.name===e))||(a==null?void 0:a.find(o=>o.name===e));if(r==null?void 0:r.columnType.endsWith("_LIST")){let o=t,s;try{return s=JSON.parse(o),o=s.join(", "),{strList:s,str:o,columnModelType:r==null?void 0:r.columnType}}catch(l){console.error("Could not parse multivalue string ",o," caught err ",l)}}return{str:t,columnModelType:r==null?void 0:r.columnType}},P8=(e,t,n)=>(t==null?void 0:t.findIndex(a=>a.name===e))||(n==null?void 0:n.findIndex(a=>a.name===e)),Pf=e=>{const{synapseId:t,version:n}=e;return L("span",{children:[n,"Â Â ",v("a",{target:Er.NEW_WINDOW,rel:"noopener noreferrer",href:`${sr.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},xs=e=>{const{value:t,columnName:n,labelLink:a,selectColumns:r,columnModels:i,isHeader:o,className:s,rowData:l,rowId:c}=e;if(!t)return v("p",{children:t});const{strList:u,str:d,columnModelType:f}=Sn({columnName:n,value:t,selectColumns:r,columnModels:i});if(!d)return v("p",{children:d});let p=s;const h={};if(o&&(p=s==null?void 0:s.concat(" ","SRC-lightLink")),f===pe.USERID_LIST&&u)return v("p",{children:u.map((g,b)=>L(z.Fragment,{children:[v(ra,{ownerId:g,size:ko,className:p}),b<u.length-1&&",Â Â "]},g))});if(f===pe.USERID&&d)return v(ra,{ownerId:d,size:ko,className:p});if(!a)return d.match(Tb)?v("a",{target:Er.NEW_WINDOW,rel:"noopener noreferrer",href:`${sr.PORTAL}#!Synapse:${d}`,className:p,children:d}):v("p",{children:d});let m;if(a.isMarkdown)u?m=v("p",{children:u.map((g,b)=>L(z.Fragment,{children:[v(xt,{renderInline:!0,markdown:g},g),b<u.length-1&&",Â Â "]},g))}):m=v(xt,{renderInline:!0,markdown:t});else{const g=u||d.split(",");let b;if("target"in a&&(b=a.target),"linkColumnName"in a){const E=P8(a.linkColumnName,r,i);if(E==null)console.warn(`Could not determine column index of ${a.linkColumnName}`),m=v(G,{children:t});else{const y=l[E];mb(y)?m=v(G,{children:t}):m=v("p",{children:g.map((_,S)=>L(z.Fragment,{children:[v("a",{href:y??void 0,target:b??Er.NEW_WINDOW,rel:"noopener noreferrer",className:p,style:h,children:_},_),S<g.length-1&&v("span",{style:{marginRight:4},children:", "})]},_))})}}else m=v("p",{children:g.map((E,y)=>{const{baseURL:_,URLColumnName:S,wrapValueWithParens:w}=a,C=a.overrideValueWithRowID?`syn${c}`:E,N=w?`(${C})`:C,T=`/${_}?${S}=${N}`;return L(z.Fragment,{children:[v("a",{href:T,className:p,style:h,target:b??Er.CURRENT_WINDOW,children:E},E),y<g.length-1&&v("span",{style:{marginRight:4},children:", "})]},E)})})}return a.tooltipText?v(Et,{title:a.tooltipText,enterNextDelay:300,children:v("span",{children:m})}):m};function R8(e,t,n,a){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:i,overrideLinkURLColumnName:o,overrideValueWithRowID:s}=e;if(o&&n[o]){const c=n[o],u=t[c];if(u)return u}const l=n[r];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${r}`);else{const c=s?`syn${a}`:t[l];if(c)return`/${e.baseURL}?${i}=${c}`}}}function Gy(e,t,n,a,r){e=e.trim();let i=e,o=Er.CURRENT_WINDOW;e.match(Tb)?i=`${sr.PORTAL}#!Synapse:${e}`:e.match(f1)?(o=Er.NEW_WINDOW,i=`https://dx.doi.org/${e}`):t?t&&(i=R8(t,n,a,r)??"",i.includes("/DetailsPage")&&(o=Er.NEW_WINDOW)):o=Er.NEW_WINDOW;const s=(t==null?void 0:t.target)??o;return{href:i,target:s}}function Rf(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:a,descriptionConfig:r}=e;let i=t;r!=null&&r.isMarkdown&&(i=v(xt,{markdown:i}));const o=n||(r==null?void 0:r.showFullDescriptionByDefault);return v("div",{className:o?"":"SRC-hidden",children:v("span",{"data-search-handle":a,className:`SRC-font-size-base ${I8}`,children:i})})}function Af(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:a,descriptionConfig:r,toggleShowMore:i}=e;return r!=null&&r.showFullDescriptionByDefault?v(G,{}):L("div",{className:n?"SRC-hidden":"",children:[v("span",{"data-search-handle":a,className:`SRC-font-size-base ${N8} SRC-short-description`,children:Tf(t).previewText}),t.length>=Mh&&v("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:i,children:"...Show More"})]})}class Ns extends z.Component{constructor(n){super(n);We(this,"getCutoff",n=>{let a="";const r=n.split(" ");let i=0;for(;a.length<Mh&&i<r.length;)a+=`${r[i]} `,i+=1;return a=a.trim(),{previewText:a}});We(this,"toggleShowMore",()=>{this.setState({hasClickedShowMore:!0})});We(this,"renderTitle",({href:n,target:a,titleSearchHandle:r,title:i})=>n?v("a",{"data-search-handle":r,target:a,href:n,className:"highlight-link",children:i}):L("span",{"data-search-handle":r,children:[" ",i," "]}));this.state={hasClickedShowMore:!1}}render(){var Re;const{schema:n,data:a,rowId:r,genericCardSchema:i,secondaryLabelLimit:o,selectColumns:s,columnModels:l,iconOptions:c,useTypeColumnForIcon:u=!1,isHeader:d=!1,titleLinkConfig:f,ctaLinkConfig:p,labelLinkConfig:h,descriptionConfig:m,rgbIndex:g,columnIconOptions:b,queryContext:{entity:E},queryVisualizationContext:{getColumnDisplayName:y}}=this.props,_=i,{hasClickedShowMore:S}=this.state,{link:w="",type:C}=_,N=a[n[_.title]];let T=_.subTitle&&a[n[_.subTitle]];T=(_==null?void 0:_.subTitle)&&Sn({value:T,columnName:_==null?void 0:_.subTitle,selectColumns:s,columnModels:l}).str;const P=a[n[_.description||""]],k=a[n[_.icon||""]],A=a[n[_.dataTypeIconNames||""]],I=a[n[_.imageFileHandleColumnName||""]],x=l==null?void 0:l.find(me=>_.link===me.name),F=x==null?void 0:x.columnType,O=a[n[w]]||"",{href:$,target:V}=Gy(O,f,a,n,r),q=[],{secondaryLabels:B=[]}=_,j=E&&!Sb(E);for(let me=0;me<B.length;me+=1){const te=B[me];let he=a[n[te]],we;if(he){if(j&&te==="currentVersion"){const Ye=a[n.id];he=Pf({synapseId:Ye,version:he}),we="Version"}else{const Ye=h==null?void 0:h.find(ke=>ke.matchColumnName===te);he=v(xs,{value:he,columnName:te,labelLink:Ye,isHeader:d,selectColumns:s,columnModels:l,rowData:a}),we=y(te)}const ne=[we,he,te];q.push(ne)}}const X=T8(E,I||O,a[n.id]),Y=q.length>0,Z={marginTop:d?"0px":void 0,marginBottom:d?"0px":void 0,paddingBottom:Y||I?void 0:"15px"},J=L(G,{children:[!u&&I&&v("div",{className:"SRC-imageThumbnail",style:{padding:_.thumbnailRequiresPadding?"21px":void 0},children:X&&v(If,{fileHandleAssociation:X})}),!u&&!I&&v("div",{className:"SRC-cardThumbnail",children:v(zs,{iconOptions:c,value:k,type:C})}),u&&v("div",{className:"SRC-cardThumbnail",children:v(De,{icon:v1[a[n.type]]})})]});if(d)return v(xf,{descriptionConfig:m,title:N,subTitle:T,description:P,type:C,icon:J,values:q,href:$,target:V,isAlignToLeftNav:!0,secondaryLabelLimit:o,rgbIndex:g});const ae=y(_.title),ie=y(_.subTitle),ye=y(_.description);let oe,ge;if(p){const me=a[n[p.link]]||"",{href:te,target:he}=Gy(me,void 0,a,n,r);oe=te,ge=he}return L("div",{style:Z,className:"SRC-portalCard",children:[L("div",{className:"SRC-portalCardMain",children:[J,L("div",{className:"SRC-cardContent",children:[v("div",{className:"SRC-type",children:C}),((Re=b==null?void 0:b.columns)==null?void 0:Re.dataType)&&(A==null?void 0:A.length)&&v("div",{style:{marginTop:"20px"},children:v(kx,{iconConfigs:b.columns.dataType,iconNames:JSON.parse(A),useBackground:!0,useTheme:!0})}),v("div",{children:v("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&F===pe.FILEHANDLEID&&X?v(Nf,{fileHandleAssociation:X,showDownloadIcon:C!==o1,displayValue:N}):this.renderTitle({href:$,target:V,titleSearchHandle:ae,title:N})})}),T&&v("div",{"data-search-handle":ie,className:"SRC-author",children:T}),P&&v(Af,{description:P,hasClickedShowMore:S,descriptionSubTitle:ye,descriptionConfig:m,toggleShowMore:this.toggleShowMore}),P&&v(Rf,{description:P,hasClickedShowMore:S,descriptionSubTitle:ye,descriptionConfig:m}),p&&oe&&ge&&v("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:v("a",{target:ge,rel:"noopener noreferrer",href:oe,children:p.text})})]})]}),Y&&v(Pp,{isHeader:!1,secondaryLabelLimit:o,values:q,columnIconOptions:b,className:`${I?"hasImage":"hasIcon"}`})]})}}We(Ns,"contextType",Ci);try{Rf.displayName="LongDescription",Rf.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}}}catch{}try{Af.displayName="ShortDescription",Af.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}}}catch{}try{Tf.displayName="getCutoff",Tf.__docgenInfo={description:"",displayName:"getCutoff",props:{}}}catch{}try{Sn.displayName="getValueOrMultiValue",Sn.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{Pf.displayName="VersionLabel",Pf.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}}}catch{}try{xs.displayName="SynapseCardLabel",xs.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}}}catch{}try{Ns.displayName="GenericCard",Ns.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}}}catch{}class yi extends R.Component{constructor(n){super(n);We(this,"handleLinkClick",n=>a=>{a.preventDefault(),window.open(`${sr.PORTAL}#!Synapse:${n}`,"_blank")});this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:a,selectColumns:r,columnModels:i,genericCardSchema:o,queryVisualizationContext:{getColumnDisplayName:s}}=this.props,l=n[a.datasetName],c=n[a.summary],u=Sn({columnName:"tumorType",value:n[a.tumorType],selectColumns:r,columnModels:i}).str,d=Sn({columnName:"diseaseFocus",value:n[a.diseaseFocus],selectColumns:r,columnModels:i}).str,f=n[a.id],p=n[a.fundingAgency],h=n[a.fileCount],m=hb(n[a.fileSize]),g=[["FUNDER",Sn({columnName:"fundingAgency",value:p,selectColumns:r,columnModels:i}).str],["SIZE",m],["FILES",h]];if(o&&o.secondaryLabels){const{secondaryLabels:b}=o;for(let E=0;E<b.length;E++){const y=b[E],_=n[a[y]];let S;if(_){S=s(y);const w=[S,_,y];g.push(w)}}}return L("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[L("div",{className:"SRC-cardThumbnail",children:[v(zs,{type:Nb}),v("div",{children:m})]}),L("div",{className:"SRC-cardContent SRC-dataset",children:[v("div",{className:"SRC-type",children:"Dataset "}),v("div",{children:v("h3",{children:v("a",{target:"_self",href:`${sr.PORTAL}#!Synapse:${f}`,children:l})})}),L("div",{className:"SRC-description-dataset",children:[v("p",{className:"SRC-description-text",children:c}),v("div",{className:"SRC-cardAction bootstrap-4-backport",children:v($x,{className:"SRC-datasetButton",onClick:this.handleLinkClick(f),variant:"secondary",children:"Download Dataset"})})]}),v("div",{className:"SRC-cardAnnotations",children:v(px,{chips:[u,d]})})]}),v(Pp,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:g})]})}}try{yi.displayName="Dataset",yi.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}class kf extends R.Component{constructor(n){super(n);We(this,"handleLinkClick",n=>a=>{a.preventDefault(),window.open(n,"_blank")});this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:a}=this.props,r=n[a.organizationName],i=n[a.organizationPath],o=n[a.summary],s=n[a.website],l=n[a.logo];let c=s.replace("https://","");c=c.replace("http://",""),c.charAt(c.length-1)==="/"&&(c=c.substring(0,c.length-1));const u=window.location.hash.substring(1)===i,d={};let f;return u?d.paddingBottom="42px":f=v("div",{className:"SRC-marginAuto SRC-cardAction",children:v(ks,{href:i,variant:"contained",color:"secondary",sx:{"&:hover":{color:"common.white"}},children:"View Funded Research"})}),L("div",{className:"SRC-portalCard SRC-typeFunder ",style:d,children:[L("div",{className:"SRC-cardContent",children:[v("div",{className:"SRC-type",children:"Organization"}),l&&v("div",{className:"SRC-cardThumbnail",children:v("img",{alt:"funder logo",className:"SRC-logo",src:l})}),v("div",{children:L("h3",{children:[u&&r,!u&&v("a",{href:i,children:r})]})}),v("div",{className:"SRC-website",children:v("a",{rel:"noopener noreferrer",target:"_blank",href:s,children:c})}),v("div",{className:"SRC-description",children:o})]}),f]})}}try{kf.displayName="Funder",kf.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}try{yi.displayName="Dataset",yi.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}const $f=({data:e,schema:t})=>{const n=e[t.submitterName],a=e[t.submitterUserId],r=e[t.time],i=e[t.timeUnits],o=e[t.text],s=e[t.tag];return L("div",{className:"SRC-portalCard ObservationCard",children:[L("div",{className:"ObservationCard__submitter",children:[!a&&v("div",{children:n}),a&&v(ra,{size:"SMALL USER CARD",ownerId:a})]}),r&&L("div",{className:"ObservationCard__time",children:[v(De,{icon:"time"}),L("span",{children:[`${r} ${i}`,Number(r)>1?"s":""]})]}),v("div",{className:"ObservationCard__text",children:v(hx,{summary:o})}),v("div",{className:"ObservationCard__tags",children:s&&v("span",{className:"SRC-tag",children:s})})]})},Ff=()=>L("div",{className:"SRC-portalCard ObservationCard",children:[v("div",{className:"ObservationCard__submitter",children:v("span",{children:v(mn,{width:"100px"})})}),v("div",{className:"ObservationCard__time",children:v(De,{icon:"time"})}),v("div",{className:"ObservationCard__text",children:v(wp,{numCols:1,numRows:4})}),v("div",{className:"ObservationCard__tags",children:v(mn,{width:"80px"})})]});try{$f.displayName="ObservationCard",$f.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}}}catch{}try{Ff.displayName="LoadingObservationCard",Ff.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}}}catch{}function A8(e){const{propsToPass:t,type:n}=e;switch(n){case Nb:return v(yi,{...t});case l1:return v(kf,{...t});case s1:return v(Ns,{...t});case Vc:return v($f,{...t});default:return v("div",{})}}const Is=e=>{const{isHeader:t=!1,unitDescription:n,type:a,isLoading:r,secondaryLabelLimit:i=3,title:o,...s}=e,l=fM(),{NoContentPlaceholder:c}=ht(),{data:u,appendNextPageToResults:d,hasNextPage:f}=l,p=ht(),h=u!=null&&u.queryResult.queryResults.tableId?[u==null?void 0:u.queryResult.queryResults.tableId]:[],m=Ba({ids:h,type:"ENTITY_HEADER"});if(u){if(u&&u.queryResult.queryResults.rows.length===0)return v(c,{})}else return L("div",{children:[r&&a===Vc&&v(Ff,{}),r&&a!==Vc&&yp]});const g={};u.queryResult.queryResults.headers.forEach((y,_)=>{g[y.name]=_});const b=f&&v(ut,{display:"flex",justifyContent:"flex-end",children:v(ks,{variant:"contained",color:"secondary",size:"large",onClick:()=>{d()},children:"View More"})});let E;if(a===Gh){const y=u.queryResult.queryResults.headers.findIndex(S=>S.columnType===pe.USERID);if(y===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const _=u.queryResult.queryResults.rows.map(S=>S.values[y]);E=v(cx,{data:u,list:_,size:Gh})}else{const y=u.queryResult.queryResults.rows;E=y.length?y.map((_,S)=>{const C={key:JSON.stringify(_.values),type:a,schema:g,isHeader:t,secondaryLabelLimit:i,rowId:_.rowId,data:_.values,selectColumns:u.selectColumns,columnModels:u.columnModels,tableEntityConcreteType:m[0]&&m[0].type,tableId:u==null?void 0:u.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:p,...s};return v(A8,{propsToPass:C,type:a},_.rowId??S)}):v(G,{})}return L("div",{role:"list",children:[o&&v("h2",{className:"SRC-card-overview-title",children:o}),!o&&n&&v(gi,{frontText:"Displaying"}),E,b]})};try{Is.displayName="CardContainer",Is.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}}}catch{}var yC={exports:{}};(function(e,t){(function(a,r){e.exports=r()})(Yr,()=>(()=>{var n={887:o=>{o.exports=function(l){for(var c=5381,u=l.length;u;)c=33*c^l.charCodeAt(--u);return c>>>0}}},a={};function r(o){var s=a[o];if(s!==void 0)return s.exports;var l=a[o]={exports:{}};return n[o](l,l.exports,r),l.exports}r.n=o=>{var s=o&&o.__esModule?()=>o.default:()=>o;return r.d(s,{a:s}),s},r.d=(o,s)=>{for(var l in s)r.o(s,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:s[l]})},r.o=(o,s)=>Object.prototype.hasOwnProperty.call(o,s),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{default:()=>g});var o=r(887),s=r.n(o);function l(b){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},l(b)}function c(b,E){for(var y=0;y<E.length;y++){var _=E[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,p(_.key),_)}}function u(b,E,y){return E&&c(b.prototype,E),y&&c(b,y),Object.defineProperty(b,"prototype",{writable:!1}),b}function d(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function f(b,E,y){return(E=p(E))in b?Object.defineProperty(b,E,{value:y,enumerable:!0,configurable:!0,writable:!0}):b[E]=y,b}function p(b){var E=function(_,S){if(l(_)!=="object"||_===null)return _;var w=_[Symbol.toPrimitive];if(w!==void 0){var C=w.call(_,S||"default");if(l(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(_)}(b,"string");return l(E)==="symbol"?E:String(E)}var h,m=(h=0,function(){return h++}),g=u(function b(E){var y=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d(this,b),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(S){return y.init(S)}),f(this,"onResize",function(){var S=y.tb;if(S.classList.remove(y.RESIZABLE),S.opt.fixed){S.tableWidth=Number(window.getComputedStyle(S).width.replace(/px/,"")).valueOf();for(var w=0,C=0;C<S.columnCnt;C++)w+=S.columns[C].w;for(var N=0;N<S.columnCnt;N++)S.columns[N].style.width=Math.round(1e3*S.columns[N].w/w)/10+"%",S.columns[N].locked=!0,S.opt.currentWidths[N]=Number(window.getComputedStyle(S.columns[N]).width.replace(/px/,"")).valueOf()}else y.applyBounds(),S.opt.resizeMode==="flex"&&S.opt.serialize&&y.serializeStore();S.classList.add(y.RESIZABLE),y.syncGrips()}),f(this,"onGripMouseDown",function(S){var w=S.target.parentNode.data,C=y.tb,N=C.grips[w.i],T=S.touches;if(N.ox=T?T[0].pageX:S.pageX,N.l=N.offsetLeft,N.x=N.l,y.createStyle(document.querySelector("head"),"*{cursor:"+C.opt.dragCursor+"!important}"),document.addEventListener("touchmove",y.onGripDrag),document.addEventListener("mousemove",y.onGripDrag),document.addEventListener("touchend",y.onGripDragOver),document.addEventListener("mouseup",y.onGripDragOver),N.classList.add(C.opt.draggingClass),y.grip=N,C.columns[w.i].locked)for(var P,k=0;k<C.columnCnt;k++)(P=C.columns[k]).locked=!1,P.w=Number(window.getComputedStyle(P).width.replace(/px/,"")).valueOf();S.preventDefault()}),f(this,"onGripDrag",function(S){var w=y.grip;if(w){var C=w.t,N=S.touches,T=(N?N[0].pageX:S.pageX)-w.ox+w.l,P=C.opt.minWidth,k=w.i,A=1.5*C.cellSpace+P+C.borderSpace,I=k===C.columnCnt-1,x=k?C.grips[k-1].offsetLeft+C.cellSpace+P:A,F=C.opt.fixed?k===C.columnCnt-1?C.tableWidth-A:C.grips[k+1].offsetLeft-C.cellSpace-P:1/0;if(T=Math.max(x,Math.min(F,T)),w.x=T,w.style.left=T+y.PX,I&&(w.w=C.columns[k].w+T-w.l),C.opt.liveDrag){I?(C.columns[k].style.width=w.w+y.PX,!C.opt.fixed&&C.opt.overflow?C.style.minWidth=C.tableWidth+T-w.l+y.PX:C.tableWidth=Number(window.getComputedStyle(C).width.replace(/px/,"")).valueOf()):y.syncCols(C,k,!1,C.opt),y.syncGrips();var O=C.opt.onDrag;O&&O(S)}S.preventDefault()}}),f(this,"onGripDragOver",function(S){var w=y.grip;document.removeEventListener("touchend",y.onGripDragOver),document.removeEventListener("mouseup",y.onGripDragOver),document.removeEventListener("touchmove",y.onGripDrag),document.removeEventListener("mousemove",y.onGripDrag);var C=document.querySelector("head").lastChild;if(C.parentNode.removeChild(C),w){if(w.classList.remove(w.t.opt.draggingClass),w.x-w.l!=0){var N=w.t,T=N.opt.onResize,P=w.i;if(P===N.columnCnt-1){var k=N.columns[P];k.style.width=w.w+y.PX,k.w=w.w}else y.syncCols(N,P,!0,N.opt);N.opt.fixed||y.applyBounds(),y.syncGrips(),T&&T(S),N.opt.serialize&&y.serializeStore()}y.grip=null}}),f(this,"init",function(S){if(S.disable)return y.destroy();var w=y.tb,C=w.getAttribute(y.ID)||y.RESIZABLE+m();if(!w.matches("table")||w.extended&&!S.partialRefresh)return null;var N=document.querySelector("head");if(y.createStyle(N," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),S.hoverCursor&&S.hoverCursor!=="col-resize"){var T=".grip-handle .grip-resizable:hover{cursor:"+S.hoverCursor+"!important}";y.createStyle(N,T)}w.setAttribute(y.ID,C);var P=w.opt;w.opt=y.extendOptions(S);var k=y.getTableHeaders(w);if(y.extendTable(k),S.remoteTable&&S.remoteTable.matches("table")){var A=y.getTableHeaders(w.opt.remoteTable);k.length===A.length?y.extendRemoteTable(w.opt.remoteTable,A,w):console.warn("column count for remote table did not match")}return P}),f(this,"applyBounds",function(){var S=y.tb,w=S.columns.map(function(C){return window.getComputedStyle(C).width});S.style.width=window.getComputedStyle(S).width,S.tableWidth=Number(S.style.width.replace(/px/,"")).valueOf(),S.classList.remove(y.FLEX),S.columns.forEach(function(C,N){C.style.width=w[N];var T=Number(w[N].replace(/px/,"")).valueOf();C.w=T,S.opt.currentWidths[N]=T}),S.classList.add(y.FLEX)}),f(this,"serializeStore",function(){var S=y.store,w=y.tb;S[w.getAttribute(y.ID)]="";for(var C=0,N=0;N<w.columns.length;N++){var T=window.getComputedStyle(w.columns[N]).width.replace(/px/,"");S[w.getAttribute(y.ID)]+=T+";",C+=Number(T).valueOf()}S[w.getAttribute(y.ID)]+=C.toString(),w.opt.fixed||(S[w.getAttribute(y.ID)]+=";"+window.getComputedStyle(w).width.replace(/px/,""))}),f(this,"syncGrips",function(){var S=y.tb;S.gripContainer.style.width=S.tableWidth+y.PX;for(var w=0;w<S.columnCnt;w++){var C=S.columns[w],N=C.getBoundingClientRect(),T=S.getBoundingClientRect();S.grips[w].style.left=N.left-T.left+C.offsetWidth+S.cellSpace/2+y.PX,S.grips[w].style.height=(S.opt.headerOnly?S.columns[0].offsetHeight:S.offsetHeight)+y.PX}}),f(this,"destroy",function(){var S=y.tb,w=S.getAttribute(y.ID);return w?(y.store[w]="",S.classList.remove(y.RESIZABLE),S.classList.remove(y.FLEX),S.remote&&(S.remote.classList.remove(y.RESIZABLE),S.remote.classList.remove(y.FLEX)),S.gripContainer&&S.gripContainer.parentNode&&S.gripContainer.parentNode.removeChild(S.gripContainer),delete S.extended,S.opt):null}),f(this,"createStyle",function(S,w){var C=s()(w).toString(),N=S.querySelectorAll("style"),T=Array.from(N).filter(function(k){return k.gripid===C});if(!T.length){var P=document.createElement("style");P.type="text/css",P.gripid=C,P.styleSheet?P.styleSheet.cssText=w:P.appendChild(document.createTextNode(w)),S.appendChild(P)}}),f(this,"extendOptions",function(S){var w=Object.assign({},b.DEFAULTS,S);switch(w.fixed=!0,w.overflow=!1,w.resizeMode){case"flex":w.fixed=!1;break;case"overflow":w.fixed=!1,w.overflow=!0}return w}),f(this,"getTableHeaders",function(S){var w="#"+S.id,C=Array.from(S.querySelectorAll(w+">thead>tr:nth-of-type(1)>th"));return(C=C.concat(Array.from(S.querySelectorAll(w+">thead>tr:nth-of-type(1)>td")))).length||(C=(C=(C=(C=Array.from(S.querySelectorAll(w+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(S.querySelectorAll(w+">tr:nth-of-type(1)>th")))).concat(Array.from(S.querySelectorAll(w+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(S.querySelectorAll(w+">tr:nth-of-type(1)>td")))),y.filterInvisible(C,!1)}),f(this,"filterInvisible",function(S,w){return S.filter(function(C){var N=w?-1:C.offsetWidth,T=w?-1:C.offsetHeight;return!(N===0&&T===0||C.style&&C.style.display&&window.getComputedStyle(C).display==="none")})}),f(this,"extendTable",function(S){var w=y.tb;w.opt.removePadding&&w.classList.add("grip-padding"),w.classList.add(y.RESIZABLE),w.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),w.grips=[],w.columns=[],w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf(),w.gripContainer=w.previousElementSibling,w.opt.marginLeft&&(w.gripContainer.style.marginLeft=w.opt.marginLeft),w.opt.marginRight&&(w.gripContainer.style.marginRight=w.opt.marginRight),w.cellSpace=parseInt(y.legacyIE?w.cellSpacing||w.currentStyle.borderSpacing:window.getComputedStyle(w).borderSpacing.split(" ")[0].replace(/px/,""))||2,w.borderSpace=parseInt(y.legacyIE?w.border||w.currentStyle.borderLeftWidth:window.getComputedStyle(w).borderLeftWidth.replace(/px/,""))||1,w.extended=!0,y.createGrips(S)}),f(this,"extendRemoteTable",function(S,w,C){C.opt.removePadding&&S.classList.add("grip-padding"),S.classList.add(y.RESIZABLE),S.getAttribute(y.ID)||S.setAttribute(y.ID,C.getAttribute(y.ID)+"remote"),S.columns=[],w.forEach(function(T,P){var k=w[P];k.w=C.columns[P].w,k.style.width=k.w+y.PX,k.removeAttribute("width"),S.columns.push(k)}),S.tableWidth=C.tableWidth,S.cellSpace=C.cellSpace,S.borderSpace=C.borderSpace;var N=Array.from(S.querySelectorAll("col"));S.columnGrp=y.filterInvisible(N,!0),S.columnGrp.forEach(function(T,P){T.removeAttribute("width"),T.style.width=C.columnGrp[P].style.width}),C.remote=S}),f(this,"createGrips",function(S){var w=y.tb;w.columnGrp=y.filterInvisible(Array.from(w.querySelectorAll("col")),!0),w.columnGrp.forEach(function(T){T.removeAttribute("width")}),w.columnCnt=S.length;var C=!1;y.store[w.getAttribute(y.ID)]&&(y.deserializeStore(S),C=!0),S.forEach(function(T,P){var k=S[P],A=w.opt.disabledColumns.indexOf(P)!==-1;y.createDiv(w.gripContainer,"grip-handle");var I=w.gripContainer.lastChild;!A&&w.opt.gripInnerHtml&&(I.innerHTML=w.opt.gripInnerHtml),y.createDiv(I,y.RESIZABLE),P===w.columnCnt-1&&(I.classList.add("grip-lastgrip"),w.opt.fixed&&(I.innerHTML="")),I.addEventListener("touchstart",y.onGripMouseDown,{capture:!0,passive:!0}),I.addEventListener("mousedown",y.onGripMouseDown,!0),A?I.classList.add("grip-disabledgrip"):(I.classList.remove("grip-disabledgrip"),I.addEventListener("touchstart",y.onGripMouseDown,{capture:!0,passive:!0}),I.addEventListener("mousedown",y.onGripMouseDown,!0)),I.t=w,I.i=P,w.opt.widths[P]?k.w=w.opt.widths[P]:k.w=C?Number(k.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(k).width.replace(/px/,"")).valueOf(),w.opt.currentWidths[P]=k.w,k.style.width=k.w+y.PX,k.removeAttribute("width"),I.data={i:P,t:w.getAttribute(y.ID),last:P===w.columnCnt-1},w.grips.push(I),w.columns.push(k)});var N=Array.from(w.querySelectorAll("td"));N.concat(Array.from(w.querySelectorAll("th"))),(N=(N=N.filter(function(T){for(var P=0;P<S.length;P++)if(S[P]===T)return!1;return!0})).filter(function(T){return!(T.querySelectorAll("table th").length||T.querySelectorAll("table td").length)})).forEach(function(T){T.removeAttribute("width")}),w.opt.fixed||(w.removeAttribute("width"),w.classList.add(y.FLEX)),y.syncGrips()}),f(this,"deserializeStore",function(S){var w=y.tb;if(w.columnGrp.forEach(function(P){P.removeAttribute("width")}),w.opt.flush)y.store[w.getAttribute(y.ID)]="";else{var C=y.store[w.getAttribute(y.ID)].split(";"),N=C[w.columnCnt+1];!w.opt.fixed&&N&&(w.style.width=N+y.PX,w.opt.overflow&&(w.style.minWidth=N+y.PX,w.tableWidth=Number(N).valueOf()));for(var T=0;T<w.columnCnt;T++)S[T].style.width=C[T]+y.PX,w.columnGrp[T]&&(w.columnGrp[T].style.width=100*Number(C[T]).valueOf()/Number(C[w.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(S,w,C){var N=document.createElement("div");N.classList.add(w),C&&(N.innerHTML=C),S.appendChild(N)}),f(this,"syncCols",function(S,w,C,N){var T=S.remote,P=y.grip.x-y.grip.l,k=S.columns[w],A=S.columns[w+1];if(k&&A){var I=k.w+P,x=A.w-P,F=I+y.PX;if(k.style.width=F,S.columnGrp[w]&&S.columnGrp[w].style.width&&(S.columnGrp[w].style.width=F),T&&(T.columns[w].style.width=F,T.columnGrp[w]&&T.columnGrp[w].style.width&&(T.columnGrp[w].style.width=F)),N.fixed){var O=x+y.PX;A.style.width=O,S.columnGrp[w+1]&&S.columnGrp[w+1].style.width&&(S.columnGrp[w+1].style.width=O),T&&(T.columns[w+1].style.width=O,T.columnGrp[w+1]&&T.columnGrp[w+1].style.width&&(T.columnGrp[w+1].style.width=O))}else N.overflow&&(S.style.minWidth=S.tableWidth+P+y.PX);C&&(k.w=I,A.w=N.fixed?x:A.w,T&&(T.columns[w].w=I,T.columns[w+1].w=N.fixed?x:A.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=E,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(_)});g.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],currentWidths:[],serialize:!0,onDrag:null,onResize:null}})(),i})())})(yC);var k8=yC.exports;const $8=Nt(k8),Df=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:a}=je(),r=!!a,{data:i}=Ii(t,n),{mutate:o}=nx({onSuccess:()=>{Xr(`${(i==null?void 0:i.name)??t} was successfully added to your Download Cart.`,"success")},onError:s=>{Xr(`Unable to add the file to your Download Cart. ${s.reason}`,"danger")}});return r?v(G,{children:v(Et,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:v(Xt,{"data-testid":"AddToDownloadListV2",onClick:()=>{o({entityId:t,entityVersionNumber:n})},className:"ignoreLink",children:v(De,{icon:"addToCart"})})})}):v(G,{})};try{Df.displayName="AddToDownloadListV2",Df.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var Of={exports:{}};(function(e,t){(function(n,a){var r="1.0.33",i="",o="?",s="function",l="undefined",c="object",u="string",d="major",f="model",p="name",h="type",m="vendor",g="version",b="architecture",E="console",y="mobile",_="tablet",S="smarttv",w="wearable",C="embedded",N=350,T="Amazon",P="Apple",k="ASUS",A="BlackBerry",I="Browser",x="Chrome",F="Edge",O="Firefox",$="Google",V="Huawei",q="LG",B="Microsoft",j="Motorola",Q="Opera",X="Samsung",Y="Sharp",Z="Sony",J="Xiaomi",ae="Zebra",ie="Facebook",ye=function(ee,ce){var fe={};for(var Ne in ee)ce[Ne]&&ce[Ne].length%2===0?fe[Ne]=ce[Ne].concat(ee[Ne]):fe[Ne]=ee[Ne];return fe},oe=function(ee){for(var ce={},fe=0;fe<ee.length;fe++)ce[ee[fe].toUpperCase()]=ee[fe];return ce},ge=function(ee,ce){return typeof ee===u?Re(ce).indexOf(Re(ee))!==-1:!1},Re=function(ee){return ee.toLowerCase()},me=function(ee){return typeof ee===u?ee.replace(/[^\d\.]/g,i).split(".")[0]:a},te=function(ee,ce){if(typeof ee===u)return ee=ee.replace(/^\s\s*/,i),typeof ce===l?ee:ee.substring(0,N)},he=function(ee,ce){for(var fe=0,Ne,ve,pt,Se,He,Me;fe<ce.length&&!He;){var K=ce[fe],re=ce[fe+1];for(Ne=ve=0;Ne<K.length&&!He;)if(He=K[Ne++].exec(ee),He)for(pt=0;pt<re.length;pt++)Me=He[++ve],Se=re[pt],typeof Se===c&&Se.length>0?Se.length===2?typeof Se[1]==s?this[Se[0]]=Se[1].call(this,Me):this[Se[0]]=Se[1]:Se.length===3?typeof Se[1]===s&&!(Se[1].exec&&Se[1].test)?this[Se[0]]=Me?Se[1].call(this,Me,Se[2]):a:this[Se[0]]=Me?Me.replace(Se[1],Se[2]):a:Se.length===4&&(this[Se[0]]=Me?Se[3].call(this,Me.replace(Se[1],Se[2])):a):this[Se]=Me||a;fe+=2}},we=function(ee,ce){for(var fe in ce)if(typeof ce[fe]===c&&ce[fe].length>0){for(var Ne=0;Ne<ce[fe].length;Ne++)if(ge(ce[fe][Ne],ee))return fe===o?a:fe}else if(ge(ce[fe],ee))return fe===o?a:fe;return ee},ne={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ye={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ke={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,g],[/opios[\/ ]+([\w\.]+)/i],[g,[p,Q+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[p,Q]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[p,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+I],g],[/\bfocus\/([\w\.]+)/i],[g,[p,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[p,Q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[p,Q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[p,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[g,[p,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+I],g],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,ie],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[p,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,x+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[p,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[g,we,ne]],[/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[p,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,g],[/(cobalt)\/([\w\.]+)/i],[p,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,Re]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,i,Re]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,Re]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[m,X],[h,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[m,X],[h,y]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[m,P],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[m,P],[h,_]],[/(macintosh);/i],[f,[m,P]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[m,V],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[m,V],[h,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[m,J],[h,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[m,J],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[m,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[m,"Vivo"],[h,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[m,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[m,j],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[m,j],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[m,q],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[m,q],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[m,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[m,"Nokia"],[h,y]],[/(pixel c)\b/i],[f,[m,$],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[m,$],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[m,Z],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[m,Z],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[m,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[m,T],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[m,T],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[f,m,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[m,A],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[m,k],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[m,k],[h,y]],[/(nexus 9)/i],[f,[m,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[f,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[m,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[m,"Meizu"],[h,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[m,Y],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,f,[h,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,f,[h,_]],[/(surface duo)/i],[f,[m,B],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[m,"Fairphone"],[h,y]],[/(u304aa)/i],[f,[m,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[f,[m,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[f,[m,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[f,[m,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[f,[m,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[m,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[f,[m,"NuVision"],[h,_]],[/\b(k88) b/i],[f,[m,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[f,[m,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[f,[m,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[f,[m,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[f,[m,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],f,[h,_]],[/\b(ns-?\w{0,9}) b/i],[f,[m,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[m,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],f,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],f,[h,y]],[/\b(ph-1) /i],[f,[m,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[m,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[f,[m,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[f,[m,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[f,[m,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[m,f,[h,y]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[m,B],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[m,ae],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[m,ae],[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,f,[h,E]],[/droid.+; (shield) bui/i],[f,[m,"Nvidia"],[h,E]],[/(playstation [345portablevi]+)/i],[f,[m,Z],[h,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[m,B],[h,E]],[/smart-tv.+(samsung)/i],[m,[h,S]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[m,X],[h,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,q],[h,S]],[/(apple) ?tv/i],[m,[f,P+" TV"],[h,S]],[/crkey/i],[[f,x+"cast"],[m,$],[h,S]],[/droid.+aft(\w)( bui|\))/i],[f,[m,T],[h,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[m,Y],[h,S]],[/(bravia[\w ]+)( bui|\))/i],[f,[m,Z],[h,S]],[/(mitv-\w{5}) bui/i],[f,[m,J],[h,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,te],[f,te],[h,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,S]],[/((pebble))app/i],[m,f,[h,w]],[/droid.+; (glass) \d/i],[f,[m,$],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[f,[m,ae],[h,w]],[/(quest( 2)?)/i],[f,[m,ie],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[p,F+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[g,we,Ye]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[g,we,Ye]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,g],[/\(bb(10);/i],[g,[p,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[p,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[p,x+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,g],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,g]]},ze=function(ee,ce){if(typeof ee===c&&(ce=ee,ee=a),!(this instanceof ze))return new ze(ee,ce).getResult();var fe=ee||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:i),Ne=ce?ye(ke,ce):ke;return this.getBrowser=function(){var ve={};return ve[p]=a,ve[g]=a,he.call(ve,fe,Ne.browser),ve.major=me(ve.version),ve},this.getCPU=function(){var ve={};return ve[b]=a,he.call(ve,fe,Ne.cpu),ve},this.getDevice=function(){var ve={};return ve[m]=a,ve[f]=a,ve[h]=a,he.call(ve,fe,Ne.device),ve},this.getEngine=function(){var ve={};return ve[p]=a,ve[g]=a,he.call(ve,fe,Ne.engine),ve},this.getOS=function(){var ve={};return ve[p]=a,ve[g]=a,he.call(ve,fe,Ne.os),ve},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return fe},this.setUA=function(ve){return fe=typeof ve===u&&ve.length>N?te(ve,N):ve,this},this.setUA(fe),this};ze.VERSION=r,ze.BROWSER=oe([p,g,d]),ze.CPU=oe([b]),ze.DEVICE=oe([f,m,h,E,y,S,_,w,C]),ze.ENGINE=ze.OS=oe([p,g]),e.exports&&(t=e.exports=ze),t.UAParser=ze;var lt=typeof n!==l&&(n.jQuery||n.Zepto);if(lt&&!lt.ua){var $e=new ze;lt.ua=$e.getResult(),lt.ua.get=function(){return $e.getUA()},lt.ua.set=function(ee){$e.setUA(ee);var ce=$e.getResult();for(var fe in ce)lt.ua[fe]=ce[fe]}}})(typeof window=="object"?window:Yr)})(Of,Of.exports);var F8=Of.exports;const Ts=e=>{const{accessToken:t}=je(),{associatedObjectId:n,entityVersionNumber:a,associatedObjectType:r,fileHandleId:i,displayFileName:o,onClickCallback:s}=e,{ref:l,inView:c}=pa(),[u,d]=R.useState(!1),[f,p]=R.useState(!1),[h,m]=R.useState(),[g,b]=R.useState(),[E,y]=R.useState("");let _=!0;R.useEffect(()=>(_&&c&&N(),()=>{_=!1}),[t,c]);const S=async()=>{let P;const A=new F8.UAParser().getBrowser().name=="Safari";let I=null;A&&(I=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),I.document.body.innerHTML="Downloading file on Safari...");try{r===or.TableEntity?P=(await C(!0)).requestedFiles[0].preSignedURL:P=(await Qh(h,t,!1,!0)).preSignedURL}catch(x){console.log("Fail to get file download link: ",x)}P?(A&&I?(I.location=P,setTimeout(()=>{I&&I.close()},1e4)):window.open(P),s&&s(u)):(I==null||I.close(),console.log("Fail to get file download link"))},w=P=>P&&!P.isPreview?(p(!0),!0):(p(!1),!1),C=(P=!1)=>As({includeFileHandles:!0,includePreSignedURLs:P,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:r,fileHandleId:i}]},t),N=()=>Qa(t,n,a).then(async P=>{if(Object.hasOwn(P,"dataFileHandleId"))return m(P),Qh(P,t,!0).then(k=>{const A=k.fileHandle;A&&w(A)&&cI(A)&&(d(!0),b(A.externalURL))}).catch(k=>{console.log("Error on getFileEntityFileHandle = ",k)});if(r===or.TableEntity){const A=(await C()).requestedFiles[0].fileHandle;o&&A&&w(A)&&y(A.fileName)}return Promise.resolve()}).catch(P=>{console.log("Error on getEntity = ",P)});return v(Et,{title:u?"Navigate to external link":"Download this file individually",enterNextDelay:Fo,placement:"left",children:v("span",{ref:l,children:(()=>u?v("button",{className:"btn-download-icon",onClick:()=>{s&&s(u)},children:v("a",{className:"ignoreLink",rel:"noreferrer",href:g,target:"_blank",children:v(De,{icon:"openInNewWindow"})})}):f?L("button",{className:"btn-download-icon",onClick:()=>{S()},children:[v(De,{icon:"download"}),o&&E?E:""]}):v(G,{}))()})})};try{Ts.displayName="DirectDownload",Ts.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}}}catch{}function qf(e){const{modifiedDataAccessRequest:t,onHide:n}=e,[a,r]=R.useState(),[i,o]=R.useState(!1),{mutate:s}=Fx({onSuccess:()=>{n()},onError:c=>{r({key:"error",message:`Sorry, there is an error in submitting your request. ${c.reason?c.reason+".":" "}Please close this dialog and try again later.`}),o(!0)}});function l(){t&&s(t)}return L(G,{children:[v(Xa,{children:L(Ti,{direction:"row",alignItems:"center",gap:"5px",children:["Save Changes",v(ut,{sx:{flexGrow:1}}),v(Hs,{onClick:n,children:v(De,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),L(Ka,{children:[v(Oe,{variant:"body1",children:"Would you like to save your recent changes?"}),a&&v(cn,{severity:a.key,children:a.message})]}),L(kp,{children:[!i&&L(G,{children:[v(Gt,{variant:"outlined",onClick:n,children:"Cancel"}),v(Gt,{variant:"contained",onClick:()=>{l()},children:"Save changes"})]}),i&&v(Gt,{variant:"contained",onClick:n,children:"Close"})]})]})}try{qf.displayName="CancelRequestDataAccess",qf.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{modifiedDataAccessRequest:{defaultValue:null,description:"",name:"modifiedDataAccessRequest",required:!0,type:{name:"Request | Renewal | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function Lf(e){const{onHide:t}=e;return L(G,{children:[v(Xa,{children:L(Ti,{direction:"row",alignItems:"center",gap:"5px",children:["Your Data Access Request Has Been Submitted",v(ut,{sx:{flexGrow:1}}),v(Hs,{onClick:t,children:v(De,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),v(Ka,{children:v(Oe,{variant:"body1",children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),v(kp,{children:v(Gt,{variant:"contained",onClick:t,children:"Finish"})})]})}try{Lf.displayName="RequestDataAccessSuccess",Lf.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function Vf(e){const{accessRequirement:t,entityId:n,onHide:a}=e,{accessToken:r}=je(),{data:i,isLoading:o}=Ap(String(t.id)),s=i==null?void 0:i.isApproved,[l,c]=R.useState(!1);let u="";window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?u="Request access":u="Request access via Synapse.org";const d=()=>{window.open(`${sr.PORTAL}#!AccessRequirement:AR_ID=${t.id}&TYPE=ENTITY&ID=${n}`)},f=()=>{d(),a&&a()},p=t.actContactInfo;let h;return r&&!s&&(h=[{variant:"outlined",onClick:f,children:u},{variant:"text",onClick:a,children:"I do not accept"}]),v($p,{"data-testid":"UnmanagedACTAccessRequirementItem",status:o?nr.LOADING:s?nr.COMPLETE:nr.LOCKED,actions:h,children:s?L(G,{children:[L(Oe,{variant:"body1",children:["Your data access request has been approved."," ",v(Xt,{role:"button",onClick:()=>c(!l),children:l?"Hide Instructions":"View Instructions"})]}),l&&v(ut,{sx:{my:1},children:v(xt,{markdown:p})})]}):v(xt,{markdown:p})})}try{Vf.displayName="UnmanagedACTAccessRequirementItem",Vf.__docgenInfo={description:`Renders a {@link RequirementItem} for the deprecated {@link ACTAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link ManagedACTAccessRequirementItem }

For {@link SelfSignAccessRequirement } and {@link TermsOfUseAccessRequirement }, see {@link SelfSignAccessRequirementItem }`,displayName:"UnmanagedACTAccessRequirementItem",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function Mf(e){var g,b,E,y,_,S;const{accessRequirement:t,onHide:n,onRequestAccess:a}=e,{data:r}=aw(t.id.toString()),{data:i,isLoading:o}=Ap(String(t.id)),{mutate:s}=Dx({onError:w=>{console.error("Error cancelling data access request",w),d({key:"error",message:L(G,{children:[v("strong",{children:"Error canceling your data access request."}),v("br",{}),"Please try again later."]})})}}),[l,c]=R.useState(!0),[u,d]=R.useState(),f=((g=i==null?void 0:i.currentSubmissionStatus)==null?void 0:g.state)===Pt.APPROVED;let p=v(G,{});r&&(p=L("div",{children:[v(xt,{wikiId:r.wikiPageId,ownerId:r.ownerObjectId,objectType:r.ownerObjectType}),u&&v(cn,{className:"access-requirement-list-alert",severity:u.key,children:u.message}),((b=i==null?void 0:i.currentSubmissionStatus)==null?void 0:b.state)===Pt.SUBMITTED&&v(cn,{className:"access-requirement-list-alert",severity:"info",children:v("strong",{children:"You have submitted a data access request."})}),((E=i==null?void 0:i.currentSubmissionStatus)==null?void 0:E.state)===Pt.APPROVED&&v(cn,{className:"access-requirement-list-alert",severity:"success",children:v("strong",{children:"Your data access request has been approved."})}),((y=i==null?void 0:i.currentSubmissionStatus)==null?void 0:y.state)===Pt.REJECTED&&v(cn,{className:"access-requirement-list-alert",severity:"error",children:L(G,{children:[v("strong",{children:"Your data access request has been rejected."}),v("br",{}),(i==null?void 0:i.currentSubmissionStatus.rejectedReason)||""]})}),((_=i==null?void 0:i.currentSubmissionStatus)==null?void 0:_.state)===Pt.CANCELLED&&v(cn,{className:"access-requirement-list-alert",severity:"success",children:v("strong",{children:"Your data access request has been canceled."})})]}));const h=[];i&&(i.currentSubmissionStatus==null?(h.push({variant:"outlined",onClick:a,children:"Request access"}),h.push({variant:"text",onClick:n,children:"I do not accept"})):[Pt.APPROVED,Pt.REJECTED,Pt.CANCELLED].includes(i.currentSubmissionStatus.state)?h.push({variant:"outlined",onClick:a,children:"Update Request"}):i.currentSubmissionStatus.state===Pt.SUBMITTED&&h.push({variant:"outlined",onClick:()=>{s({submissionId:i.currentSubmissionStatus.submissionId,accessRequirementId:String(t.id)})},children:"Cancel Request"}));let m=nr.LOADING;if(!o)switch((S=i==null?void 0:i.currentSubmissionStatus)==null?void 0:S.state){case Pt.APPROVED:m=nr.COMPLETE;break;case Pt.SUBMITTED:m=nr.PENDING;break;case Pt.REJECTED:case Pt.CANCELLED:default:m=nr.LOCKED}return L($p,{"data-testid":"ManagedACTAccessRequirementItem",status:m,actions:h,children:[!f&&v(G,{children:p}),f&&L(G,{children:[L(Oe,{variant:"body1",children:["Your data access request has been approved."," ",v(Xt,{role:"button",onClick:()=>{c(!l)},children:l?"View Terms":"Hide Terms"})]}),!l&&v(ut,{sx:{my:1},children:p})]})]})}try{Mf.displayName="ManagedACTAccessRequirementItem",Mf.__docgenInfo={description:`Renders a {@link RequirementItem} for a ManagedACTAccessRequirement, which allows a user to see if they have met the
requirement, and if not, complete a data access request to apply for access.`,displayName:"ManagedACTAccessRequirementItem",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},onRequestAccess:{defaultValue:null,description:"",name:"onRequestAccess",required:!0,type:{name:"() => void"}}}}}catch{}function Bf(e){const{accessRequirement:t,onHide:n}=e,{accessToken:a}=je(),r=!!a,i=aI(t),{data:o}=zC(),{data:s}=HC(),l=r&&s&&!i&&t.isCertifiedUserRequired&&!s.isCertified,c=r&&s&&!i&&t.isValidatedProfileRequired&&!s.isVerified,{data:u,isLoading:d}=Ap(String(t.id)),f=u==null?void 0:u.isApproved,{data:p}=aw(t.id.toString(),{enabled:!i}),[h,m]=R.useState(!1),{mutate:g,isLoading:b,error:E}=Ox({onError:w=>{console.error("Error creating access approval: ",w)}}),y=()=>{const w={requirementId:t==null?void 0:t.id,submitterId:o==null?void 0:o.ownerId,accessorId:o==null?void 0:o.ownerId,state:cw.APPROVED};g(w)};let _=v(G,{});i?_=v(xt,{markdown:t.termsOfUse}):p&&(_=v(xt,{wikiId:p==null?void 0:p.wikiPageId,ownerId:p==null?void 0:p.ownerObjectId,objectType:p==null?void 0:p.ownerObjectType}));let S;if(a&&!f){let w="I Accept Terms of Use",C=!1;(l||c)&&(C=!0,w=`You must ${l?"be certified":""}${l&&c?" and ":""}${c?"have a validated user profile":""} to accept`),S=[{variant:"outlined",onClick:y,children:w,disabled:b||C},{variant:"text",onClick:n,children:"I do not accept"}]}return L($p,{"data-testid":"SelfSignAccessRequirementItem",status:d?nr.LOADING:f?nr.COMPLETE:nr.LOCKED,actions:S,children:[f?L(G,{children:[L(Oe,{variant:"body1",children:["You have accepted the terms of use."," ",v(Xt,{role:"button",onClick:()=>m(!h),children:h?"Hide Terms":"View Terms"})]}),h&&v(ut,{sx:{my:1},children:_})]}):_,E&&v(cn,{severity:"error",children:E.reason})]})}try{Bf.displayName="SelfSignAccessRequirementItem",Bf.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function Uf(e){const{accessRequirement:t,entityId:n,onHide:a,onRequestAccess:r}=e;switch(t.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return v(Bf,{accessRequirement:t,onHide:a});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return v(Vf,{accessRequirement:t,onHide:a,entityId:n});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return v(Mf,{accessRequirement:t,onHide:a,entityId:n,onRequestAccess:()=>{r(t)}});default:return console.warn("Unsupported access requirement type:",t.concreteType),v(G,{})}}try{Uf.displayName="AccessRequirementListItem",Uf.__docgenInfo={description:"Renders an individual AR item for the AccessRequirementList",displayName:"AccessRequirementListItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},onRequestAccess:{defaultValue:null,description:"",name:"onRequestAccess",required:!0,type:{name:"(accessRequirement: ManagedACTAccessRequirement) => void"}}}}}catch{}const D8=new Set(["org.sagebionetworks.repo.model.SelfSignAccessRequirement","org.sagebionetworks.repo.model.TermsOfUseAccessRequirement","org.sagebionetworks.repo.model.ManagedACTAccessRequirement","org.sagebionetworks.repo.model.ACTAccessRequirement"]),Ps=mt(Oe,{label:"DialogSubsectionHeader"})(({theme:e})=>({marginTop:e.spacing(4),marginBottom:e.spacing(2),paddingBottom:e.spacing(1),fontSize:"18px",fontWeight:"bold",borderBottom:"1px solid",borderColor:e.palette.grey[200]}));Ps.defaultProps={...Ps.defaultProps,variant:"h4"};const zf=e=>e.filter(O8).length>0,O8=e=>!D8.has(e.concreteType);function Hf(e){var k,A;const{entityId:t,onHide:n,accessRequirementFromProps:a,renderAsModal:r,numberOfFilesAffected:i}=e,{accessToken:o}=je(),s=!!o,[l,c]=R.useState(0),[u,d]=R.useState(),[f,p]=R.useState(""),[h,m]=R.useState(),b=Ba({ids:[t],type:"ENTITY_HEADER"}),{data:E}=qx(t,{enabled:!!(!a&&t)}),y=a??E,{data:_}=Lx((y??[]).map(I=>String(I.id)),{enabled:!!y,staleTime:1/0}),S=I=>{const{managedACTAccessRequirement:x,step:F,researchProjectId:O,dataAccessRequest:$}=I;x&&d(x),O&&p(O),$&&m($),c(F)},w=y==null?void 0:y.some(I=>I.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement"&&I.isTwoFaRequired),C=y==null?void 0:y.some(I=>(I.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement"||I.concreteType==="org.sagebionetworks.repo.model.SelfSignAccessRequirement")&&I.isCertifiedUserRequired),N=y==null?void 0:y.some(I=>(I.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement"||I.concreteType==="org.sagebionetworks.repo.model.SelfSignAccessRequirement")&&I.isValidatedProfileRequired),T=L(G,{children:[v(Xa,{children:L(Ti,{direction:"row",alignItems:"center",gap:"5px",children:["Data Access Request",v(ut,{sx:{flexGrow:1}}),v(Hs,{onClick:n,children:v(De,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),L(Ka,{children:[v(Ps,{sx:{mt:0},children:"Access For:"}),L(Oe,{variant:"body1",component:"span",children:[v(De,{icon:"file",sx:{width:"30px"}})," ",i?`${i} File(s)`:v(Xt,{href:`${sr.PORTAL}#!Synapse:${t}`,children:(k=b[0])==null?void 0:k.name})]}),v(Ps,{children:"What do I need to do?"}),v(zx,{}),C&&v(Hx,{}),N&&v(Wx,{}),w&&v(jx,{}),(A=_==null?void 0:_.map(I=>y.find(x=>I===String(x.id))))==null?void 0:A.map(I=>v(Uf,{accessRequirement:I,entityId:t,onHide:n,onRequestAccess:x=>{S({managedACTAccessRequirement:x,step:s?1:4})}},I.id))]})]});let P=T;if(r){switch(l){case 1:P=v(Bx,{managedACTAccessRequirement:u,onSave:I=>{S({managedACTAccessRequirement:u,step:2,researchProjectId:I.id})},onHide:n});break;case 2:P=v(Ux,{researchProjectId:f,managedACTAccessRequirement:u,entityId:t,onHide:n,onCancel:I=>{S({step:3,dataAccessRequest:I})},onSubmissionCreated:()=>{S({step:5})}});break;case 3:P=v(qf,{modifiedDataAccessRequest:h,onHide:n});break;case 4:P=L(G,{children:[v(Xa,{children:"Please Log In"}),v(Ka,{className:"AccessRequirementList login-modal ",children:v(Mx,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:P=v(Lf,{onHide:n});break;case 0:P=T;break;default:P=T}return v(sw,{maxWidth:"md",fullWidth:!0,open:!0,onClose:n,children:P})}return v(ut,{children:P})}try{Hf.displayName="AccessRequirementList",Hf.__docgenInfo={description:`The AccessRequirementListV2 component renders a set of {@link AccessRequirement}s (either pre-defined, or those applied
to an entity, based on provided props).

The component shows the user the approval status of each AR and provides a workflow for accepting the terms of or
creating a submission for any of the Access Requirements.`,displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}}}catch{}try{zf.displayName="checkHasUnsupportedRequirement",zf.__docgenInfo={description:"",displayName:"checkHasUnsupportedRequirement",props:{}}}catch{}const q8={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function Yy(e){const{downloadType:t}=e,n=Us();if(t){const a=q8[t];return v(De,{icon:a.icon,label:a.tooltipText,sx:{color:a.color(n),height:"16px",verticalAlign:"text-top"}})}return v(G,{})}function Wf(e,t){const[n,a]=z.useState(),{accessToken:r}=je(),i=parseInt(t??""),{data:o,error:s}=dw(e,Number.isNaN(i)?void 0:i,{includeEntity:!0,includePermissions:!0}),l=z.useMemo(()=>({restrictableObjectType:ow.ENTITY,objectId:e}),[e]),{data:c}=iw(l),u=o==null?void 0:o.entity,d=o==null?void 0:o.permissions;return z.useEffect(()=>{c&&c.hasUnmetAccessRequirement?a("AccessBlockedByRestriction"):u&&(d!=null&&d.canDownload)?pp(u)&&u.dataFileHandleId?a("Accessible"):a("NoFileHandle"):d&&!d.canDownload&&a(r?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[r,u,s,d,c]),n}function jf(e){const[t,n]=z.useState(!1),[a,r]=z.useState([]),{entityId:i,entityVersionNumber:o}=e,s=Wf(i,o),{accessToken:l}=je(),c=z.useMemo(()=>({restrictableObjectType:ow.ENTITY,objectId:i}),[i]),{data:u}=iw(c),d=()=>{WC(l,i).then(h=>{zf(h)?window.open(`${KC(ZC.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${i}&TYPE=ENTITY`,"_blank"):(r(h),n(!0))})},f=R.useMemo(()=>{if(!u)return v(G,{});const h=u==null?void 0:u.hasUnmetAccessRequirement,m=u==null?void 0:u.restrictionLevel;let g="";if(h)g="Request Access";else{if(Vx.OPEN===m)return v(G,{});g="View Terms"}return L(G,{children:[v("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"top"},className:e.className,onClick:d,children:g}),t&&v(Hf,{entityId:i,accessRequirementFromProps:a,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[i,u,a,t]);return s===void 0?v(G,{}):L("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?v("button",{type:"button",className:vp,onClick:h=>{if(h.isTrusted){const m=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(m)}},children:v(Yy,{downloadType:s})}):v(Yy,{downloadType:s}),f]})}try{Wf.displayName="useGetFileHandleDownloadType",Wf.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}}}catch{}try{jf.displayName="HasAccessV2",jf.__docgenInfo={description:`HasAccess shows if the user has access to the file or not. If the user doesn't have access due to a restriction,
then a link will be shown that opens a modal with steps to request access.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Qf=e=>{const{accessToken:t}=je(),{entityIdList:n}=e,[a,r]=R.useState([v(G,{})]),{ref:i,inView:o}=pa();let s=!0;R.useEffect(()=>(o&&l(),()=>{s=!1}),[n,o]);const l=()=>{n.length&&yb(n,t).then(c=>{if(s){const u=c.results.map(d=>v("p",{children:v(Uc,{entity:d,displayTextField:"name"})},d.id));r(u)}}).catch(c=>{console.log("EntityIdList: Error getting entity headers",c)})};return v("span",{ref:i,children:a})};try{Qf.displayName="EntityIdList",Qf.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}}}catch{}const Gf=e=>{const{accessToken:t}=je(),{evaluationId:n}=e,[a,r]=R.useState(),{ref:i,inView:o}=pa();let s=!0;R.useEffect(()=>(s&&o&&l(),()=>{s=!1}),[n,o]);const l=()=>{n&&jC(n,t).then(c=>{r(c.name)}).catch(c=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",c)})};return v("span",{ref:i,children:a})};try{Gf.displayName="EvaluationIdRenderer",Gf.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}const Yf=e=>{const{accessToken:t}=je(),{userIds:n}=e,[a,r]=R.useState(),{ref:i,inView:o}=pa();let s=!0;R.useEffect(()=>(s&&o&&l(),()=>{s=!1}),[n,o]);const l=()=>{n.length&&QC(n,t).then(c=>{const u=c.list.map(d=>v(Ib,{userProfile:d,className:"SRC-marginFifteen"},d.ownerId));r(u)}).catch(c=>{console.log("UserIdList: Error getting user profiles",c)})};return v("span",{ref:i,children:a})};try{Yf.displayName="UserIdList",Yf.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}}}catch{}const Xf=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:a,mapUserIdToHeader:r,columnLinkConfig:i,columnName:o,selectColumns:s,columnModels:l,rowData:c,rowId:u,rowVersionNumber:d})=>{const{entity:f}=gt();if(!t)return L("p",{className:"SRC-inactive",children:[" ",ex]});if(i)return v(xs,{value:t,columnName:o,selectColumns:s,columnModels:l,isHeader:!1,labelLink:i,rowData:c,rowId:u});if(f&&(Wn(f)||ta(f)||_b(f))&&(o==="id"||o==="name")&&u&&d){const p=`syn${u.toString()}`,h=a[p]??p;return v("p",{children:v(Uc,{entity:h,versionNumber:d,className:`${n}`,showIcon:!1,displayTextField:o})})}switch(e){case pe.ENTITYID:return v("p",{children:v(Uc,{entity:a[t]??t,className:`${n}`,displayTextField:"name"})});case pe.DATE_LIST:{const p=JSON.parse(t);return L("p",{children:[p.map((h,m)=>L("span",{className:n,children:[Ya(lr(Number(h))),m!==p.length-1?", ":""]},m))," "]})}case pe.BOOLEAN_LIST:{const p=JSON.parse(t);return v("p",{children:p.map((h,m)=>L("span",{className:n,children:[h?"true":"false",m!==p.length-1?", ":""]},m))})}case pe.FILEHANDLEID:return v(G,{children:f&&v(Ts,{associatedObjectId:f.id,associatedObjectType:or.TableEntity,fileHandleId:t,displayFileName:!0})});case pe.ENTITYID_LIST:{const p=JSON.parse(t);return v("p",{children:v(Qf,{entityIdList:p})})}case pe.USERID_LIST:{const p=JSON.parse(t);return v(Yf,{userIds:p})}case pe.STRING_LIST:case pe.INTEGER_LIST:{const p=JSON.parse(t);return v("p",{className:n,children:p.map((h,m)=>L(z.Fragment,{children:[h,m!==p.length-1?", ":""]},h))})}case pe.EVALUATIONID:return v(Gf,{evaluationId:t});case pe.DATE:return v("p",{className:n,children:Ya(lr(Number(t)))});case pe.USERID:if(Object.prototype.hasOwnProperty.call(r,t)){const{ownerId:p,userName:h}=r[t];if(r[t].isIndividual===!1){const m=h===Yh?"public":"people";return h===Yh?L("span",{children:[v(De,{icon:m})," All registered Synapse users"]}):L("a",{target:"_blank",rel:"noopener noreferrer",href:`${sr.PORTAL}#!Team:${p}`,children:[v(De,{icon:m})," ",h]})}else return v(ra,{userProfile:r[t],preSignedURL:r[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case pe.LINK:return v("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case pe.STRING:case pe.DOUBLE:case pe.INTEGER:case pe.BOOLEAN:case pe.MEDIUMTEXT:case pe.LARGETEXT:return v("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),v("p",{className:n,children:t})}return v("p",{className:n,children:t})};try{Xf.displayName="SynapseTableCell",Xf.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string | null"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}}}catch{}const Xy=(e,...t)=>{var a;const n=[];return(a=e==null?void 0:e.selectColumns)==null||a.forEach((r,i)=>{t.includes(r.columnType)&&n.push(i)}),n},Ky=(e,t,n)=>{var r;const a=new Set;return(r=e.queryResult)==null||r.queryResults.rows.forEach(i=>{i.values.forEach((o,s)=>{o!=null&&n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,o)&&o&&a.add(o)})}),a},L8=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:a,currentPage:r}=dM(),i=e==null?void 0:e.queryCount,o=(l,c)=>{t(c)},s=l=>{const c=l.target.value;a(c)};return r==1&&i&&i<10?v(G,{}):L("div",{children:[v(CN,{page:r,count:Math.ceil(i/n),color:"secondary",onChange:o,style:{display:"inline-block",float:"left"}}),v(Oe,{variant:"body1",style:{display:"inline-block"},children:`${i==null?void 0:i.toLocaleString()} total rows /`}),L("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[v("option",{value:10,children:"10 per page"}),v("option",{value:25,children:"25 per page"}),v("option",{value:100,children:"100 per page"}),v("option",{value:500,children:"500 per page"})]})]})},Kf=e=>{const{onCopy:t}=e;return v(Et,{title:"Copy IDs to the clipboard",enterNextDelay:Fo,placement:"right",children:v("span",{children:v("button",{"data-testid":"copySynIdsButton",onClick:t,children:v("span",{style:{height:15,marginTop:-1},children:v(De,{icon:"contentCopy"})})})})})};try{Kf.displayName="InteractiveCopyIdsIcon",Kf.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}}}catch{}const V8=()=>{const e=je(),t=gt(),[n,a]=R.useState(!1),[r,i]=R.useState(),[o,s]=R.useState();R.useEffect(()=>(o||s(new AbortController),()=>{o&&o.abort()}),[o]);const l=()=>{a(!0);const{getLastQueryRequest:c}=t,u=c(),{sql:d}=u.query,{entityId:f,versionNumber:p}=Yb(d),h=p?`.${p}`:"";u.partMask=da;const m=`${f}${h}`,g=d.indexOf(m);u.query.sql=`select id from ${m}${d.substring(g+m.length)}`,pb(u,e.accessToken,o==null?void 0:o.signal).then(b=>{i(b)}).catch(b=>{console.error(b),Xr("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{a(!1)})};return R.useEffect(()=>{if(r){const{rows:c}=r.queryResult.queryResults,u=c.map(d=>`${d.values[0]}`).join(`
`);navigator.clipboard.writeText(u).then(()=>{Xr("Successfully copied to clipboard"),i(void 0)})}},[r]),n?v(Ls,{size:25}):v(Kf,{onCopy:()=>{l()}})};var _n=[],M8=function(){return _n.some(function(e){return e.activeTargets.length>0})},B8=function(){return _n.some(function(e){return e.skippedTargets.length>0})},Zy="ResizeObserver loop completed with undelivered notifications.",U8=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Zy}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Zy),window.dispatchEvent(e)},bi;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(bi||(bi={}));var En=function(e){return Object.freeze(e)},z8=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,En(this)}return e}(),bC=function(){function e(t,n,a,r){return this.x=t,this.y=n,this.width=a,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,En(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,a=t.y,r=t.top,i=t.right,o=t.bottom,s=t.left,l=t.width,c=t.height;return{x:n,y:a,top:r,right:i,bottom:o,left:s,width:l,height:c}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Bh=function(e){return e instanceof SVGElement&&"getBBox"in e},wC=function(e){if(Bh(e)){var t=e.getBBox(),n=t.width,a=t.height;return!n&&!a}var r=e,i=r.offsetWidth,o=r.offsetHeight;return!(i||o||e.getClientRects().length)},Jy=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},H8=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},ja=typeof window<"u"?window:{},wo=new WeakMap,eb=/auto|scroll/,W8=/^tb|vertical/,j8=/msie|trident/i.test(ja.navigator&&ja.navigator.userAgent),tr=function(e){return parseFloat(e||"0")},ea=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new z8((n?t:e)||0,(n?e:t)||0)},tb=En({devicePixelContentBoxSize:ea(),borderBoxSize:ea(),contentBoxSize:ea(),contentRect:new bC(0,0,0,0)}),SC=function(e,t){if(t===void 0&&(t=!1),wo.has(e)&&!t)return wo.get(e);if(wC(e))return wo.set(e,tb),tb;var n=getComputedStyle(e),a=Bh(e)&&e.ownerSVGElement&&e.getBBox(),r=!j8&&n.boxSizing==="border-box",i=W8.test(n.writingMode||""),o=!a&&eb.test(n.overflowY||""),s=!a&&eb.test(n.overflowX||""),l=a?0:tr(n.paddingTop),c=a?0:tr(n.paddingRight),u=a?0:tr(n.paddingBottom),d=a?0:tr(n.paddingLeft),f=a?0:tr(n.borderTopWidth),p=a?0:tr(n.borderRightWidth),h=a?0:tr(n.borderBottomWidth),m=a?0:tr(n.borderLeftWidth),g=d+c,b=l+u,E=m+p,y=f+h,_=s?e.offsetHeight-y-e.clientHeight:0,S=o?e.offsetWidth-E-e.clientWidth:0,w=r?g+E:0,C=r?b+y:0,N=a?a.width:tr(n.width)-w-S,T=a?a.height:tr(n.height)-C-_,P=N+g+S+E,k=T+b+_+y,A=En({devicePixelContentBoxSize:ea(Math.round(N*devicePixelRatio),Math.round(T*devicePixelRatio),i),borderBoxSize:ea(P,k,i),contentBoxSize:ea(N,T,i),contentRect:new bC(d,l,N,T)});return wo.set(e,A),A},_C=function(e,t,n){var a=SC(e,n),r=a.borderBoxSize,i=a.contentBoxSize,o=a.devicePixelContentBoxSize;switch(t){case bi.DEVICE_PIXEL_CONTENT_BOX:return o;case bi.BORDER_BOX:return r;default:return i}},Q8=function(){function e(t){var n=SC(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=En([n.borderBoxSize]),this.contentBoxSize=En([n.contentBoxSize]),this.devicePixelContentBoxSize=En([n.devicePixelContentBoxSize])}return e}(),EC=function(e){if(wC(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},G8=function(){var e=1/0,t=[];_n.forEach(function(o){if(o.activeTargets.length!==0){var s=[];o.activeTargets.forEach(function(c){var u=new Q8(c.target),d=EC(c.target);s.push(u),c.lastReportedSize=_C(c.target,c.observedBox),d<e&&(e=d)}),t.push(function(){o.callback.call(o.observer,s,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var n=0,a=t;n<a.length;n++){var r=a[n];r()}return e},rb=function(e){_n.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(EC(r.target)>e?n.activeTargets.push(r):n.skippedTargets.push(r))})})},Y8=function(){var e=0;for(rb(e);M8();)e=G8(),rb(e);return B8()&&U8(),e>0},Fc,CC=[],X8=function(){return CC.splice(0).forEach(function(e){return e()})},K8=function(e){if(!Fc){var t=0,n=document.createTextNode(""),a={characterData:!0};new MutationObserver(function(){return X8()}).observe(n,a),Fc=function(){n.textContent="".concat(t?t--:t++)}}CC.push(e),Fc()},Z8=function(e){K8(function(){requestAnimationFrame(e)})},Ao=0,J8=function(){return!!Ao},e7=250,t7={attributes:!0,characterData:!0,childList:!0,subtree:!0},nb=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ab=function(e){return e===void 0&&(e=0),Date.now()+e},Dc=!1,r7=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=e7),!Dc){Dc=!0;var a=ab(t);Z8(function(){var r=!1;try{r=Y8()}finally{if(Dc=!1,t=a-ab(),!J8())return;r?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,t7)};document.body?n():ja.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),nb.forEach(function(n){return ja.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),nb.forEach(function(n){return ja.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),Zf=new r7,ib=function(e){!Ao&&e>0&&Zf.start(),Ao+=e,!Ao&&Zf.stop()},n7=function(e){return!Bh(e)&&!H8(e)&&getComputedStyle(e).display==="inline"},a7=function(){function e(t,n){this.target=t,this.observedBox=n||bi.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=_C(this.target,this.observedBox,!0);return n7(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),i7=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),So=new WeakMap,ob=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},_o=function(){function e(){}return e.connect=function(t,n){var a=new i7(t,n);So.set(t,a)},e.observe=function(t,n,a){var r=So.get(t),i=r.observationTargets.length===0;ob(r.observationTargets,n)<0&&(i&&_n.push(r),r.observationTargets.push(new a7(n,a&&a.box)),ib(1),Zf.schedule())},e.unobserve=function(t,n){var a=So.get(t),r=ob(a.observationTargets,n),i=a.observationTargets.length===1;r>=0&&(i&&_n.splice(_n.indexOf(a),1),a.observationTargets.splice(r,1),ib(-1))},e.disconnect=function(t){var n=this,a=So.get(t);a.observationTargets.slice().forEach(function(r){return n.unobserve(t,r.target)}),a.activeTargets.splice(0,a.activeTargets.length)},e}(),o7=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");_o.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Jy(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");_o.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Jy(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");_o.unobserve(this,t)},e.prototype.disconnect=function(){_o.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const s7=z[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],l7=s7,u7=e=>{const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),t},c7=u7,d7=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:o7;function f7(){}function p7(e,t){const n=m7(),a=c7(t);return l7(()=>{let r=!1;const i=e&&"current"in e?e.current:e;if(!i)return f7;function o(s,l){r||a.current(s,l)}return n.subscribe(i,o),()=>{r=!0,n.unsubscribe(i,o)}},[e,n,a]),n.observer}function h7(){let e=!1,t=[];const n=new Map,a=new d7((r,i)=>{t=t.concat(r);function o(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const c=n.get(t[l].target);c==null||c.forEach(u=>u(t[l],i))}t=[],e=!1}e||window.requestAnimationFrame(o),e=!0});return{observer:a,subscribe(r,i){var o;a.observe(r);const s=(o=n.get(r))!==null&&o!==void 0?o:[];s.push(i),n.set(r,s)},unsubscribe(r,i){var o;const s=(o=n.get(r))!==null&&o!==void 0?o:[];if(s.length===1){a.unobserve(r),n.delete(r);return}const l=s.indexOf(i);l!==-1&&s.splice(l,1),n.set(r,s)}}}let Oc;const m7=()=>Oc||(Oc=h7());function Jf(e){const[t,n]=R.useState(!1),[a,r]=R.useState(!1),i=R.useRef(null);return p7(i,({target:o})=>{if(!t&&o){const s=o.getElementsByTagName("p")[0];s&&r(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),L("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:i,children:[a&&v("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:v(De,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600",height:"16px",verticalAlign:"top"}})}),e.children]})}try{Jf.displayName="ExpandableTableDataCell",Jf.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}}}catch{}const v7=["","DESC","ASC"],sb={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class Rs extends R.Component{constructor(n){super(n);We(this,"resizer");We(this,"tableElement");We(this,"renderTable",(n,a,r,i)=>{var b,E;const o=(E=(b=this.props.queryContext).getLastQueryRequest)==null?void 0:E.call(b),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:c,isRowSelectionVisible:u}=this.props,d=s&&(Wn(s)&&GC(s)||ta(s)),f=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),p=!!this.props.synapseContext.accessToken,h=s&&d&&p&&this.allRowsHaveId(),m=!!(h&&!this.props.hideDownload),g=h&&c;return L("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[L("table",{ref:y=>this.tableElement=y,className:"table table-striped table-condensed",children:[v("thead",{className:"SRC_bordered",children:v("tr",{children:this.createTableHeader(n,a,r,f,g,m,u,o)})}),v("tbody",{children:this.createTableRows(i,n,f,g,m,u)})]}),v("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:v(L8,{})})]})});We(this,"handleColumnSortPress",n=>a=>{let r=Br(this.state.columnIconSortState);r.length===0&&(r=Array(this.getLengthOfPropsData()).fill(0));const i=Br(this.state.sortedColumnSelection),o=this.findSelectionIndex(i,n.name);o!==-1&&i.splice(o,1),r[n.index]=(r[n.index]+1)%Kh.length,r[n.index]>0&&i.unshift({column:n.name,direction:v7[r[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=i,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:r,sortedColumnSelection:i})});We(this,"applyChangesFromQueryFilter",n=>{const a=this.props.queryContext.getLastQueryRequest();a.query.selectedFacets=n,a.query.offset=0,this.props.queryContext.executeQueryRequest(a)});this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(n,a){const{isFetchingEntityHeaders:r,...i}=this.state,{isFetchingEntityHeaders:o,...s}=a,l=!ji(this.props,n),c=!ji(i,s),u=l||c;return u&&this.disableResize(),u}componentDidUpdate(n,a){ji(n.queryContext.data,this.props.queryContext.data)?n.queryContext.entity&&this.props.queryContext.entity&&!ji(Wn(n.queryContext.entity),Wn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(sb)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new $8(this.tableElement,sb))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(n){var f,p;const{data:a,entity:r}=this.props.queryContext;if(!a||!r)return;if(this.state.isFetchingEntityHeaders&&!n)return;const i=Br(this.state.mapEntityIdToHeader),o=Br(this.state.mapUserIdToHeader),s=Xy(a,pe.ENTITYID),l=Xy(a,pe.USERID),c=Ky(a,i,s);(this.isEntityViewOrDataset()||r&&_b(r))&&this.allRowsHaveId()&&(((p=(f=a.queryResult)==null?void 0:f.queryResults)==null?void 0:p.rows)??[]).forEach(m=>{const g=`syn${m.rowId}`;c.add(g)});const u=Ky(a,o,l);if(c.size===0&&u.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),c.size>0){const h=Array.from(c).map(m=>({targetId:m}));try{const m=await fb(h,this.props.synapseContext.accessToken),{results:g}=m;g.forEach(b=>{i[b.id]=b})}catch(m){console.error("Error on retrieving entity header list , ",m)}}const d=[];if(u.size>0){const h=Array.from(u);try{(await bb(h,this.props.synapseContext.accessToken)).children.forEach(g=>{g.isIndividual?d.push(g.ownerId):o[g.ownerId]=g})}catch(m){console.error("Error on getGroupHeaders batch: ",m)}}if(d.length>0)try{(await c1(d)).list.forEach(m=>{o[m.ownerId]=m})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:i,mapUserIdToHeader:o,isFetchingEntityHeaders:!1})}render(){var g;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return yp;if(!this.props.queryContext.data)return v(G,{});const{queryContext:{data:n},queryVisualizationContext:{NoContentPlaceholder:a}}=this.props,{queryResult:r,columnModels:i=[]}=n,{facets:o=[]}=n,{isExpanded:s,isExportTableDownloadOpen:l}=this.state,c=this.props.queryContext.getLastQueryRequest(),u="";if(!((((g=n.queryResult)==null?void 0:g.queryResults.rows.length)??0)>0)&&c.query.offset===0)return v(a,{});const{rows:f,headers:p}=r.queryResults,h=v("div",{children:this.renderTable(p,i,o,f)}),m=v(G,{children:L("div",{className:u,children:[l&&v(ua,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:c}),v("div",{children:h})]})});return L(R.Fragment,{children:[s&&v(wi,{open:!0,onCancel:()=>this.setState({isExpanded:!1}),content:m,title:void 0,maxWidth:"xl",fullWidth:!0,sx:{".MuiDialogTitle-root":{padding:0},".MuiDialogContent-root":{border:"transparent"}}}),!s&&m]})}allRowsHaveId(){var a;const{queryContext:{data:n}}=this.props;return((a=n==null?void 0:n.queryResult)==null?void 0:a.queryResults.rows.every(r=>!!r.rowId))??!1}isEntityViewOrDataset(){const{queryContext:{entity:n}}=this.props;return(n&&(Wn(n)||ta(n)))??!1}createTableRows(n,a,r,i,o,s){const l=[],{queryContext:{data:c},queryVisualizationContext:{columnsToShowInTable:u,selectedRowIndices:d,setSelectedRowIndices:f},columnLinks:p=[]}=this.props,{selectColumns:h=[],columnModels:m=[]}=c,{mapEntityIdToHeader:g,mapUserIdToHeader:b}=this.state;return n.forEach((E,y)=>{var T,P;const _=(T=E.versionNumber)==null?void 0:T.toString(),S=`syn${E.rowId}`,w=E.values.map((k,A)=>{const I=a[A].name,x=u.includes(I),F=p.find(V=>V.matchColumnName===I),$=this.findSelectionIndex(this.state.sortedColumnSelection,I)===-1?"":"SRC-boldText";return x?v(Jf,{className:"SRC_noBorderTop",children:v(Xf,{columnType:a[A].columnType,columnValue:k,isBold:$,mapEntityIdToHeader:g,mapUserIdToHeader:b,columnLinkConfig:F,columnName:I,rowData:E.values,selectColumns:h,columnModels:m,rowId:E.rowId,rowVersionNumber:E.versionNumber})},`(${y}${k}${A})`):v("td",{className:"SRC-hidden"},`(${y},${A})`)});r&&w.unshift(v("td",{className:"SRC_noBorderTop",children:v(jf,{entityId:S,entityVersionNumber:_},S)},S));const C=((P=g[S])==null?void 0:P.type)=="org.sagebionetworks.repo.model.FileEntity";i&&w.unshift(v("td",{className:"SRC_noBorderTop direct-download",children:C&&v(Ts,{associatedObjectId:S,entityVersionNumber:_})},`direct-download-${S}`)),o&&w.unshift(v("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:C&&v(Df,{entityId:S,entityVersionNumber:parseInt(_)})},`add-to-download-list-v2-${S}`)),s&&d&&w.unshift(v("td",{className:"SRC_noBorderTop",children:v(mi,{label:"",checked:d.includes(y),onChange:k=>{const A=[...d];if(k)A.push(y);else{const I=A.indexOf(y);I>-1&&A.splice(I,1)}f(A)}})},`(${y},rowSelectColumn)`));const N=v("tr",{children:w},E.rowId??y);l.push(N)}),l}isSortableColumn(n){switch(n){case pe.USERID:case pe.ENTITYID:case pe.FILEHANDLEID:case pe.STRING_LIST:case pe.INTEGER_LIST:case pe.BOOLEAN_LIST:case pe.DATE_LIST:case pe.USERID_LIST:case pe.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(n,a,r,i,o,s,l,c){const{sortedColumnSelection:u,columnIconSortState:d}=this.state,{queryVisualizationContext:{getColumnDisplayName:f,columnsToShowInTable:p},queryContext:{lockedColumn:h}}=this.props,m=n.map((g,b)=>{var y;if(p.includes(g.name)){const _=this.findSelectionIndex(u,g.name)!==-1,S=d[b]===void 0?0:d[b],w=r.findIndex(O=>O.columnName===g.name),C=w!==-1&&r[w].facetType==="enumeration",N=r[w],T=_?"SRC-primary-background-color SRC-anchor-light":"",P=_?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",k=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${T}`,A=f(g.name),I=a.find(O=>O.name===g.name),x=g.name.toLowerCase()===((y=h==null?void 0:h.columnName)==null?void 0:y.toLowerCase()),F=I&&I.name=="id"&&I.columnType==pe.ENTITYID;return v("th",{children:L("div",{className:"SRC-split",children:[v("span",{style:{whiteSpace:"nowrap"},children:A}),L("div",{className:"SRC-centerContent",children:[C&&!x&&this.configureFacetDropdown(N,I,c),this.isSortableColumn(g.columnType)&&v("span",{role:"button","aria-label":"sort",tabIndex:0,className:k,onKeyPress:this.handleColumnSortPress({index:b,name:g.name}),onClick:this.handleColumnSortPress({index:b,name:g.name}),children:v(zs,{type:Kh[S],cssClass:P})}),F&&v(V8,{})]})]})},g.name)}else return v("th",{className:"SRC-hidden"},g.name)});return i&&m.unshift(v("th",{children:v("div",{className:"SRC-centerContent",children:v("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),o&&m.unshift(v("th",{children:v("div",{className:"SRC-centerContent",children:"Â "})},"downloadColumn")),s&&m.unshift(v("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:v("div",{className:"SRC-centerContent",children:"Â "})},"addToV2DownloadListColumn")),l&&m.unshift(v("th",{children:v("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),m}findSelectionIndex(n,a){return n.length!==0?n.findIndex(r=>r.column===a):-1}advancedSearch(n){n&&n.preventDefault();const a=this.props.queryContext.getLastQueryRequest(),{query:r}=a,i=btoa(JSON.stringify(r)),o=a.entityId;window.open(`${sr.PORTAL}#!Synapse:${o}/tables/query/${i}`,"_blank")}getLengthOfPropsData(){var a;const{data:n}=this.props.queryContext;return((a=n==null?void 0:n.queryResult)==null?void 0:a.queryResults.headers.length)??0}configureFacetDropdown(n,a,r){return v(ca,{containerAs:"Dropdown",facetValues:n.facetValues,columnModel:a,onChange:i=>{ws(r,n,this.applyChangesFromQueryFilter,i)},onClear:()=>{vi(r,n,this.applyChangesFromQueryFilter)}})}}try{Rs.displayName="SynapseTable",Rs.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}}}catch{}function xC(){const{data:e}=gt(),{showLastUpdatedOn:t}=ht();return t&&e&&e.lastUpdatedOn?v("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:L(Oe,{variant:"body1Italic",children:["Last updated on ",Ya(lr(e.lastUpdatedOn))]})}):v(G,{})}const ep=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:a}=e,r=je(),i=gt(),o=ht();return L("div",{className:`FilterAndView ${o.topLevelControlsState.showFacetFilter?dr:fr}`,children:[t?v(Rs,{...t,synapseContext:r,queryContext:i,queryVisualizationContext:o,hideDownload:a}):v(G,{}),n?v(Is,{...n}):v(G,{}),v(xC,{})]})};try{ep.displayName="FilterAndView",ep.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}}}catch{}const g7="isShowingFacetFilters",y7="isHidingFacetFilters",tp=e=>{const[t,n]=R.useState(!1),{searchParams:a,sql:r,sqlOperator:i,tableConfiguration:o,name:s,cardConfiguration:l,facetsToPlot:c,availableFacets:u,hideDownload:d,hideQueryCount:f,hideSqlEditorControl:p,searchConfiguration:h,limit:m=Os,initQueryJson:g,showLastUpdatedOn:b,showExportToCavatica:E=!1,customControls:y}=e,_=Tp(a,i),S=g?JSON.parse(g):{sql:r,additionalFilters:_,limit:m,offset:0},w=rn(S.sql),{data:C}=Ii(w),N=C&&Eb(C)&&C.isSearchEnabled,T={entityId:w,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:da|fa|Ds|xb|$s|Fs|mp|gp,query:S};return v("div",{className:"QueryWrapperPlotNav",children:v(o?rs:ms,{...e,initQueryRequest:T,children:v(ci,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||N,showLastUpdatedOn:b,noContentPlaceholderType:Qr.INTERACTIVE,children:v(li,{children:k=>{if(k===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const A=k==null?void 0:k.isFacetsAvailable;return v(ns,{children:I=>{if(I===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const x=(I==null?void 0:I.topLevelControlsState.showFacetFilter)||(I==null?void 0:I.topLevelControlsState.showFacetFilter)===void 0;return L(G,{children:[v("div",{className:`ErrorBannerWrapper ${x?g7:y7}`,children:v(lf,{})}),N?v(as,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):v(vs,{...h,queryContext:k,queryVisualizationContext:I}),v(gs,{}),v(Ad,{getLastQueryRequest:k.getLastQueryRequest,topLevelControlsState:I.topLevelControlsState,setTopLevelControlsState:I.setTopLevelControlsState}),v(ys,{showColumnSelection:o!==void 0,name:s,hideDownload:d,hideQueryCount:f,hideFacetFilterControl:!A,hideVisualizationsControl:!A,hideSqlEditorControl:p,showExportToCavatica:E,customControls:y}),A&&v(G,{children:v(l8,{availableFacets:u})}),v(Ef,{facetsToPlot:c}),v(ep,{tableConfiguration:o,hideDownload:d,cardConfiguration:l}),t&&v(ua,{getLastQueryRequest:k.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})};try{tp.displayName="QueryWrapperPlotNav",tp.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}}}catch{}const b7=e=>({partMask:Fs|fa|Ds|$s|da|gp,entityId:rn(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:Os,offset:0}}),rp=e=>{const{title:t,searchParams:n,sqlOperator:a,showAccessColumn:r,sql:i,hideDownload:o,hideQueryCount:s,name:l,showTopLevelControls:c=!1,searchConfiguration:u,unitDescription:d="Results",rgbIndex:f,showLastUpdatedOn:p,noContentPlaceholderType:h=c?Qr.INTERACTIVE:Qr.STATIC,...m}=e,g=b7(i);n&&(g.query.additionalFilters=Tp(n,a));const b=je(),E=rn(i),{data:y}=Ii(E);return v(rs,{...m,initQueryRequest:g,children:v(ci,{rgbIndex:f,unitDescription:d,showLastUpdatedOn:p,noContentPlaceholderType:h,...m,children:v(li,{children:_=>{if(_===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return v(ns,{children:S=>{if(S===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return L(G,{children:[c&&v(ys,{showColumnSelection:!0,name:l,hideDownload:o,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),y&&Eb(y)&&y.isSearchEnabled?v(as,{helpUrl:u==null?void 0:u.fullTextSearchHelpURL}):v(vs,{...u,queryContext:_,queryVisualizationContext:S}),v(gs,{}),c&&v(gi,{frontText:""}),v(Rs,{synapseContext:b,queryContext:_,queryVisualizationContext:S,showAccessColumn:r,title:t,"data-testid":"SynapseTable",...m}),v(xC,{})]})}})}})})})};try{rp.displayName="StandaloneQueryWrapper",rp.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}}}catch{}function np(e){const{query:t,showquery:n,tableonly:a}=e,r=n==="true",i=a==="true",o="Items";return i?v(rp,{sql:t,name:o}):v(tp,{sql:t,hideSqlEditorControl:!r,name:o,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{np.displayName="MarkdownSynapseTable",np.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}}}catch{}const w7={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function ap(e){const{originalMarkup:t}=e,n=[],a=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let r="";return t.replace(a,(i,o,s,l)=>(r+=l,n.push(v("div",{children:v("a",{role:"link",className:`link ${w7[Number(o)]}`,"data-anchor":s,children:l})},l)),"")),v("div",{children:n},r)}try{ap.displayName="MarkdownTableOfContents",ap.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}function ip(e){const{alias:t}=e,{data:n}=Qx([t]);return n?v(Gx,{principalId:n[0].ownerId}):v(G,{})}try{ip.displayName="MarkdownUserOrTeamBadge",ip.__docgenInfo={description:"",displayName:"MarkdownUserOrTeamBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}}}catch{}function op(e){return v(Yx,{params:e})}try{op.displayName="MarkdownVideo",op.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}}}catch{}function sp(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:a}=e;switch(t){case"buttonlink":return v(jc,{...n});case"image":return v(Td,{...n});case"plot":return v(Pd,{...n});case"toc":return v(ap,{originalMarkup:a});case"badge":return v(ip,{...n});case"iduReport":return v(Jc,{...n});case"video":case"vimeo":case"youtube":return v(op,{...n});case"synapsetable":return v(np,{...n});case"provenance":return v(Nd,{...n});case"preview":return v(Xc,{...n});default:return console.warn(`Unsupported widget: ${t}.`),v(G,{})}}function lb(e){return v(db,{children:v(sp,{...e})})}try{sp.displayName="MarkdownWidget",sp.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"video"'},{value:'"image"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}class lp extends R.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let a;const r=[];for(;a=n.exec(t);)r.push(a[1]);return r.map((i,o)=>{const s=o<r.length-1;return L(R.Fragment,{children:[L("button",{className:"SRC-markdown-bookmark",id:`bookmark${o}`,children:["[",o+1,"]"]}),v("span",{dangerouslySetInnerHTML:{__html:i}}),s&&v("br",{})]},o)})}render(){return L(R.Fragment,{children:[v("hr",{}),this.renderBookmarks()]})}}try{lp.displayName="Bookmarks",lp.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}}}catch{}const qc=markdownit({html:!0});class xt extends z.Component{constructor(n){super(n);We(this,"markupRef");markdownitSynapse.init_markdown_it(qc,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const a="";qc.use(markdownitSynapse,a,"https://synapse.org").use(markdownitMath,a);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:qc,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=z.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(n){const a=n.target;if(a.tagName==="A"||a.tagName==="BUTTON"){const r=n.target;if(r.id.substring(0,3)==="ref"){n.preventDefault();const i=Number(n.currentTarget.id.substring(3)),o=this.markupRef.current.querySelector(`#bookmark${i}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}else if(n.currentTarget.id!==null&&r.getAttribute("data-anchor")){n.preventDefault();const i=r.getAttribute("data-anchor"),o=this.markupRef.current.querySelector(`#${i}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}}}createHTML(n){if(!n)return{__html:""};const a=this.props.renderInline?this.state.md.renderInline(n):this.state.md.render(n);return{__html:Iw(a,Tw)}}processMath(){if(!this.markupRef.current)return;const n=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),a=new RegExp(/\\[()[\]]/,"g");n.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const i=r.textContent.replace(a,"");return katex.render(i,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const n=this.createHTML(markdownitSynapse.footnotes()).__html;if(n.length>0)return v(lp,{footnotes:n})}async getWikiPageMarkdown(){const{ownerId:n,wikiId:a,objectType:r}=this.props;if(!(!n&&!a))try{const i=await YC(this.context.accessToken,n,a,r);try{const o=await this.getWikiAttachments(a||i.id);this.setState({data:i,fileHandles:o,error:void 0})}catch(o){console.error("fileHandlesErr = ",o)}}catch(i){console.error(`Error on wiki markdown load
`,i),this.setState({error:i})}}async getWikiAttachments(n){const{ownerId:a,objectType:r}=this.props;if(!a){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await XC(this.context.accessToken,a,n,r).then(i=>i).catch(i=>{console.error("Error on wiki attachment load ",i)})}addIdsToReferenceWidgets(n){const a=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return n.replace(a,()=>{const i=r;return r+=1,`<a href="" id="ref${i}">[${i}]</a>`})}addIdsToTocWidgets(n){const a="SRC-header-";let r=1;const i=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return n.replace(i,o=>{const s=r;return r+=1,`${o.substring(0,3)} id="${a}${s}"${o.substring(3)}`})}renderMarkdown(){let n=this.createHTML(this.state.data.markdown).__html;if(n=this.addIdsToReferenceWidgets(n),n=this.addIdsToTocWidgets(n),n.length>0){const r=new DOMParser().parseFromString(n,"text/html");return v(G,{children:this.recursiveRender(r.body,n)})}}recursiveRender(n,a){if(n.nodeType===Node.TEXT_NODE)return v(G,{children:n.textContent});if(n.nodeType===Node.ELEMENT_NODE&&n instanceof HTMLElement){const r=n.tagName.toLowerCase()==="body"?"span":n.tagName.toLowerCase(),i=n.getAttribute("data-widgetparams");if(i)return this.processHTMLWidgetMapping(i,a);const o=n.attributes,s={};for(let c=0;c<o.length;c++){let u="",d="";const f=o.item(c);f&&(u=f.name,d=f.value),u&&d&&(s[u]=d)}if(n.childNodes.length===0)return v(r,{...s});const l=Array.from(n.childNodes).map((c,u)=>v(z.Fragment,{children:this.recursiveRender(c,a)},u));switch(r){case"p":return v(Oe,{variant:"body1",...s,component:r,children:l});case"span":return v(Oe,{variant:"body1",...s,component:r,children:l});case"h1":return v(Oe,{variant:"headline1",...s,component:r,children:l});case"h2":return v(Oe,{variant:"headline2",...s,component:r,children:l});case"h3":return v(Oe,{variant:"headline3",...s,component:r,children:l});case"ol":return v(Oe,{variant:"body1",...s,component:r,children:l});case"ul":return v(Oe,{variant:"body1",...s,component:r,children:l});case"a":return v(Xt,{...s,component:r,children:l});default:return v(r,{...s,children:l})}}}decodeXml(n){const a={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return n.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,i)=>a[i])}processHTMLWidgetMapping(n,a){const r=this.decodeXml(n),i=r.indexOf("?");if(i===-1)return v(lb,{widgetType:r,widgetParamsMapped:{},originalMarkup:a},JSON.stringify(r));const o=r.substring(0,i),s={};return r.substring(i+1).split("&").forEach(l=>{let[c,u]=l.split("=");u=decodeURIComponent(u),s[c]=u}),v(lb,{widgetType:o,widgetParamsMapped:s,originalMarkup:a},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(n){let a=this.props.ownerId!==n.ownerId;a=a||this.props.wikiId!==n.wikiId,a&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:n,loadingSkeletonRowCount:a}=this.props,{isLoading:r,error:i}=this.state,o={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(i)return v(hp,{error:i});const s=this.addBookmarks(),l=L(Id,{wikiContext:o,children:[r&&v(G,{children:a?v(wp,{numCols:1,numRows:a}):v("span",{className:"spinner"})}),this.renderMarkdown(),s&&v("div",{children:this.addBookmarks()})]});return n?v("span",{className:"markdown markdown-inline",ref:this.markupRef,children:l}):v("div",{className:"markdown",ref:this.markupRef,children:l})}}We(xt,"contextType",Ci);try{xt.displayName="MarkdownSynapse",xt.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}}}catch{}const up=mt(({className:e,...t})=>v(Et,{...t,classes:{popper:e}}))(({theme:e})=>({[`& .${Mc.tooltip}`]:{backgroundColor:e.palette.common.white,color:e.palette.grey[1e3],boxShadow:e.shadows[1],border:`1px solid ${e.palette.grey[500]}`},[`& .${Mc.arrow}`]:{"&:before":{boxShadow:e.shadows[1],border:`1px solid ${e.palette.grey[500]}`},color:e.palette.common.white}}));try{up.displayName="LightTooltip",up.__docgenInfo={description:"",displayName:"LightTooltip",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<unknown>"}}}}}catch{}const S7={display:"flex",justifyContent:"space-between",flexDirection:"row-reverse","> button":{flexGrow:1,maxWidth:"45%"}},cp=({children:e,contentProps:t,placement:n="bottom-start",showCloseButton:a=!0,actionButton:r,sx:i,maxWidth:o="500px",minWidth:s="300px"})=>{const[l,c]=R.useState(!1),u=L(ut,{sx:{padding:"20px"},children:[v(Oe,{variant:"body1",marginBottom:2,children:v(xt,{...t})}),L(ut,{sx:S7,children:[r&&v(Gt,{color:r.color||"primary",variant:r.variant||"contained",onClick:()=>{r.onClick(),r.closePopoverOnClick&&c(!1)},children:r.content}),a&&v(Gt,{variant:"outlined",onClick:()=>c(!1),children:"Close"})]})]});return v(up,{title:u,placement:n,onClick:()=>c(!l),open:l,sx:{...i,[`& .${Mc.tooltip}`]:{maxWidth:{maxWidth:o},minWidth:{minWidth:s}}},children:v(ut,{role:"button",className:"PopoverContainer",sx:{display:"inline-block",cursor:"pointer"},children:e})})};try{cp.displayName="MarkdownPopover",cp.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},placement:{defaultValue:{value:"bottom-start"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:'{ content: ReactElement<any, string | JSXElementConstructor<any>>; color?: OverridableStringUnion<"info" | "warning" | "error" | "inherit" | "primary" | "secondary" | "success", ButtonPropsColorOverrides>; variant?: OverridableStringUnion<...>; onClick: () => void; closePopoverOnClick?: boole...'}},maxWidth:{defaultValue:{value:"500px"},description:"",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:{value:"300px"},description:"",name:"minWidth",required:!1,type:{name:"string"}}}}}catch{}const Pn=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:a=!0,className:r=""})=>v(G,{children:v(cp,{contentProps:{markdown:e},placement:n,actionButton:t?{content:v(G,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),color:"primary"}:void 0,showCloseButton:a,maxWidth:"350px",children:v(g1,{className:`HelpButton ${r}`})})});try{Pn.displayName="HelpPopover",Pn.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const _7="close",dp=({sx:e={color:"grey.700"},onClick:t})=>v(Hs,{sx:e,onClick:t,"aria-label":_7,children:v(fw,{})}),wi=({open:e,title:t,content:n,actions:a,className:r,onCancel:i,hasCloseButton:o=!0,helpMarkdown:s,helpUrl:l,maxWidth:c="sm",fullWidth:u=!0,sx:d})=>L(sw,{fullWidth:u,maxWidth:c,open:e,className:r,onClose:()=>i(),sx:d,children:[v(Xa,{children:L(Ti,{direction:"row",alignItems:"center",gap:"5px",children:[t,s&&v(Pn,{markdownText:s,helpUrl:l}),v(ut,{sx:{flexGrow:1}}),o&&v(dp,{onClick:()=>i()})]})}),v(Ka,{children:n}),a&&v(kp,{children:a})]});try{dp.displayName="CloseButton",dp.__docgenInfo={description:"",displayName:"CloseButton",props:{sx:{defaultValue:{value:"{ color: 'grey.700' }"},description:"",name:"sx",required:!1,type:{name:"SxProps"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}}}catch{}try{wi.displayName="DialogBase",wi.__docgenInfo={description:"A dialog built using MUI components.",displayName:"DialogBase",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},hasCloseButton:{defaultValue:{value:"true"},description:"",name:"hasCloseButton",required:!1,type:{name:"boolean"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},maxWidth:{defaultValue:{value:"sm"},description:"",name:"maxWidth",required:!1,type:{name:"false | Breakpoint"}},fullWidth:{defaultValue:{value:"true"},description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},sx:{defaultValue:{value:"{ color: 'grey.700' }"},description:"",name:"sx",required:!1,type:{name:"SxProps<Theme>"}}}}}catch{}const E7="Cancel",fp=e=>{const{confirmButtonText:t="OK",confirmButtonClassName:n,confirmButtonColor:a="primary",confirmButtonVariant:r="contained",onConfirm:i,onCancel:o,hasCancelButton:s=!0}=e;return L(G,{children:[s&&v(Gt,{variant:"outlined",onClick:()=>o(),children:E7}),v(Gt,{variant:r,className:n,color:a,onClick:()=>i(),children:t})]})},Si=e=>{const{confirmButtonText:t,confirmButtonClassName:n,confirmButtonColor:a,confirmButtonVariant:r,onConfirm:i,onCancel:o,hasCancelButton:s,...l}=e;return v(wi,{onCancel:o,actions:v(fp,{confirmButtonText:t,confirmButtonClassName:n,confirmButtonColor:a,confirmButtonVariant:r,onConfirm:i,onCancel:o,hasCancelButton:s}),...l})};try{fp.displayName="ConfirmationButtons",fp.__docgenInfo={description:"",displayName:"ConfirmationButtons",props:{onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},confirmButtonText:{defaultValue:null,description:"",name:"confirmButtonText",required:!1,type:{name:"string"}},confirmButtonClassName:{defaultValue:null,description:"",name:"confirmButtonClassName",required:!1,type:{name:"string"}},confirmButtonColor:{defaultValue:null,description:"",name:"confirmButtonColor",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"error"'},{value:'"inherit"'},{value:'"primary"'},{value:'"secondary"'},{value:'"success"'},{value:'"neutral"'}]}},confirmButtonVariant:{defaultValue:null,description:"",name:"confirmButtonVariant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"outlined"'},{value:'"contained"'}]}},hasCancelButton:{defaultValue:null,description:"",name:"hasCancelButton",required:!1,type:{name:"boolean"}}}}}catch{}try{Si.displayName="ConfirmationDialog",Si.__docgenInfo={description:"A confirmation dialog built using MUI components.",displayName:"ConfirmationDialog",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},hasCloseButton:{defaultValue:null,description:"",name:"hasCloseButton",required:!1,type:{name:"boolean"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"false | Breakpoint"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},confirmButtonText:{defaultValue:null,description:"",name:"confirmButtonText",required:!1,type:{name:"string"}},confirmButtonClassName:{defaultValue:null,description:"",name:"confirmButtonClassName",required:!1,type:{name:"string"}},confirmButtonColor:{defaultValue:null,description:"",name:"confirmButtonColor",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"error"'},{value:'"inherit"'},{value:'"primary"'},{value:'"secondary"'},{value:'"success"'},{value:'"neutral"'}]}},confirmButtonVariant:{defaultValue:null,description:"",name:"confirmButtonVariant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"outlined"'},{value:'"contained"'}]}},hasCancelButton:{defaultValue:null,description:"",name:"hasCancelButton",required:!1,type:{name:"boolean"}}}}}catch{}export{tp as $,Hf as A,ht as B,Si as C,wi as D,sI as E,kc as F,iI as G,Pn as H,Kf as I,p8 as J,m8 as K,_f as L,cp as M,ci as N,lf as O,uI as P,rs as Q,gf as R,Bf as S,rI as T,vf as U,ua as V,If as W,Gy as X,T8 as Y,xd as Z,mj as _,mi as a,nI as a0,lM as a1,Nf as a2,rp as a3,mC as a4,Qy as b,cw as c,xt as d,fj as e,Iz as f,ZB as g,hj as h,v5 as i,pj as j,jy as k,fp as l,oI as m,Tz as n,lI as o,xF as p,Dl as q,cM as r,cf as s,Ol as t,dw as u,Ts as v,uf as w,vI as x,jf as y,gt as z};
//# sourceMappingURL=ConfirmationDialog-2923035a.js.map
