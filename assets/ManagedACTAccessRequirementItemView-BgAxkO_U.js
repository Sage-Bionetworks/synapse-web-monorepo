import{r as S,j as e,ag as j,S as n,c4 as l,dG as f,X as i,dH as I,_ as D,V as k}from"./iframe-B-rWBBOy.js";import{a as r,R as P}from"./RequirementItem-DpKO10IA.js";const V="Your data access request has been approved.",w="This data access requirement is fulfilled by your team membership and permissions.";function L(s,c){if(c)return r.COMPLETE;if(!s.currentSubmissionStatus)return s.isApproved?r.COMPLETE:r.LOCKED;switch(s.currentSubmissionStatus.state){case n.APPROVED:return s.isApproved?r.COMPLETE:r.LOCKED;case n.SUBMITTED:return r.PENDING;case n.REJECTED:case n.CANCELLED:default:return r.LOCKED}}function N(s,c,t,d){const{onRequestAccess:m,onRejectTerms:p,onCancelDataAccessRequest:h}=d,a=[];return s&&(s.currentSubmissionStatus==null?(a.push({variant:"outlined",onClick:m,children:s.isApproved?"Update Request":"Request access"}),!c&&!s.isApproved&&a.push({variant:"text",onClick:p,children:"I do not accept"})):[n.APPROVED,n.REJECTED,n.CANCELLED].includes(s.currentSubmissionStatus.state)?a.push({variant:"outlined",onClick:m,children:"Update Request"}):s.currentSubmissionStatus.state===n.SUBMITTED&&a.push({variant:"outlined",onClick:h,children:"Cancel Request",loading:t})),a}function y(s){const{accessRequirement:c,accessRequirementStatus:t,isLoading:d,wikiPage:m,restrictionInformation:p,onRejectTerms:h,onRequestAccess:a,error:E,onCancelDataAccessRequest:x,cancelRequestIsPending:T}=s,C=p?.restrictionDetails?.find(v=>v.accessRequirementId===c.id),[q,b]=S.useState(!0),o=t?.isApproved,u=!!C?.isExempt,R=e.jsxs(j,{gap:2,children:[m,t?.currentSubmissionStatus?.state===n.SUBMITTED&&e.jsx(l,{className:"access-requirement-list-alert",severity:"info",children:e.jsx("strong",{children:"You have submitted a data access request."})}),t?.currentSubmissionStatus?.state===n.APPROVED&&o&&e.jsx(l,{className:"access-requirement-list-alert",severity:"success",children:e.jsx("strong",{children:"Your data access request has been approved."})}),t?.currentSubmissionStatus?.state===n.APPROVED&&!o&&e.jsxs(l,{className:"access-requirement-list-alert",severity:"warning",children:[e.jsx(i,{variant:"smallText1",gutterBottom:!0,children:e.jsx("strong",{children:"Your data access has been revoked."})}),t.expiredOn&&f(t.expiredOn).isBefore(f())&&e.jsxs(i,{variant:"smallText1",gutterBottom:!0,children:["Your access expired on"," ",I(f(t.expiredOn)),"."]})]}),t?.currentSubmissionStatus?.state===n.REJECTED&&e.jsxs(l,{className:"access-requirement-list-alert",severity:"error",children:[e.jsx(i,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Your data access request has been rejected."})}),e.jsx(i,{variant:"body1",gutterBottom:!0,sx:{whiteSpace:"pre-line"},children:t?.currentSubmissionStatus.rejectedReason||""})]}),t?.currentSubmissionStatus?.state===n.CANCELLED&&e.jsx(l,{className:"access-requirement-list-alert",severity:"info",children:e.jsx(i,{variant:"body1",children:"Your data access request has been canceled."})})]});let g=[];!d&&t&&(g=N(t,u,T,{onRequestAccess:a,onRejectTerms:h,onCancelDataAccessRequest:x}));let A=r.LOADING;return!d&&t&&(A=L(t,u)),e.jsxs(P,{"data-testid":"ManagedACTAccessRequirementItem",status:A,actions:g,children:[!o&&!u&&e.jsx(e.Fragment,{children:R}),(o||u)&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{variant:"body1",children:[o&&V," ",u&&w," ",e.jsx(D,{role:"button",onClick:()=>{b(!q)},children:q?"View Terms":"Hide Terms"})]}),!q&&e.jsx(k,{sx:{my:1},children:R})]}),E]})}try{y.displayName="ManagedACTAccessRequirementItemView",y.__docgenInfo={description:`Renders a {@link RequirementItem} for a ManagedACTAccessRequirement, which allows a user to see if they have met the
requirement, and if not, complete a data access request to apply for access.

This is a UI-only component that does not make any requests to external stores, and is exported for testing/Storybook only.`,displayName:"ManagedACTAccessRequirementItemView",props:{accessRequirement:{defaultValue:null,description:"The ManagedACTAccessRequirement to be displayed.",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"The user's status for this access requirement.",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},wikiPage:{defaultValue:null,description:"A ReactNode that contains the wiki page content for this access requirement.",name:"wikiPage",required:!1,type:{name:"ReactNode"}},isLoading:{defaultValue:null,description:"Whether the component is currently loading data.",name:"isLoading",required:!0,type:{name:"boolean"}},restrictionInformation:{defaultValue:null,description:`If available, the restriction information relevant to the subject that this
access requirement is being displayed for.

This is used to determine if the user is exempt from meeting this requirement.`,name:"restrictionInformation",required:!1,type:{name:"RestrictionInformationResponse"}},onRejectTerms:{defaultValue:null,description:'Invoked when the user clicks the "I do not accept" button.',name:"onRejectTerms",required:!0,type:{name:"() => void"}},onRequestAccess:{defaultValue:null,description:'Invoked when the user clicks the "Request access" button.',name:"onRequestAccess",required:!0,type:{name:"() => void"}},onCancelDataAccessRequest:{defaultValue:null,description:'Invoked when the user clicks the "Cancel Request" button (only shown if a request is active).',name:"onCancelDataAccessRequest",required:!0,type:{name:"() => void"}},error:{defaultValue:null,description:"ReactNode to display if there is an error in the component.",name:"error",required:!1,type:{name:"ReactNode"}},cancelRequestIsPending:{defaultValue:null,description:"Whether the a request to cancel the data access request is currently pending.",name:"cancelRequestIsPending",required:!0,type:{name:"boolean"}}}}}catch{}export{y as M};
