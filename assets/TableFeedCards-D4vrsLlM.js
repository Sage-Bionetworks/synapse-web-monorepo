import{as as N,r as l,e2 as F,j as e,dO as v,a9 as R,a0 as T}from"./iframe-DkJtXMGY.js";import{L as _}from"./LargeButton-BcBe4THv.js";import{M}from"./MarkdownSynapse-Cj88j8IZ.js";function p({tableEntityId:o}){const{accessToken:m}=N(),[n,x]=l.useState(),[i,y]=l.useState(3);let u=!0;if(l.useEffect(()=>((()=>{if(u){if(n)return;const a={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT "categories", "date", "title", "mdDescription" FROM ${o} ORDER BY "date" desc`},entityId:o,partMask:T};R.getQueryTableResults(a,m).then(s=>{var r;x((r=s.queryResult)==null?void 0:r.queryResults)})}})(),()=>{u=!1}),[o,m]),!n)return F;const d=n.headers,h=d.findIndex(t=>t.name==="categories"),I=d.findIndex(t=>t.name==="date"),f=d.findIndex(t=>t.name==="title"),g=d.findIndex(t=>t.name==="mdDescription");return e.jsxs("div",{className:"Feed",children:[e.jsx("div",{className:"FeedItems",children:n.rows.map((t,a)=>{if(a>i-1)return;const s=t.values;s.some(c=>c===null)&&console.warn("Row has null value(s) when no nulls expected");const r=JSON.parse(s[h]),w=s[I],C=s[f],S=s[g];return e.jsx("div",{className:"FeedItem",children:e.jsxs("div",{children:[r&&e.jsx("div",{className:"FeedItemCategories",children:r.map((c,j)=>e.jsx("div",{className:"FeedItemCategory",children:c},`row-${a},categoryIndex-${j}`))}),e.jsx("p",{className:"FeedItemDate",children:v(new Date(parseInt(w))).format("MMMM YYYY")}),e.jsx("p",{className:"FeedItemTitle",children:C}),e.jsx("div",{className:"FeedItemDescription",children:e.jsx(M,{markdown:S})})]})},`row-${a}`)})}),n.rows.length>i&&e.jsx("div",{className:"FeedViewAllNewsButtonContainer",children:e.jsx(_,{color:"primary",variant:"contained",onClick:()=>y(i+3),children:"View More News"})})]})}try{p.displayName="TableFeedCards",p.__docgenInfo={description:"",displayName:"TableFeedCards",props:{tableEntityId:{defaultValue:null,description:"",name:"tableEntityId",required:!0,type:{name:"string"}}}}}catch{}export{p as T};
