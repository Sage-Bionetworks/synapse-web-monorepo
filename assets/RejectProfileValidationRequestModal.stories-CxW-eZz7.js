import{ao as g,aA as j,k9 as h,ka as l,c3 as C,r as v,j as m,c0 as y,kb as e,J as P,a2 as q,e2 as A,b as M}from"./iframe-B9toAp7a.js";import{m as V}from"./mockRejectionReasonsTableQueryResultBundle-DI70dpzk.js";import{C as N}from"./CannedRejectionDialog-cf4FnAdw.js";import"./index-r8ZA1smB.js";import"./immutable.es-BJjDfH8f.js";import"./ConfirmationDialog-B5Wo4CTL.js";import"./DialogBase-DGl7drlj.js";import"./Close-eKJYJFPR.js";import"./HelpPopover-ChAtcQyP.js";import"./MarkdownPopover-nm59-MMf.js";import"./LightTooltip-CxCt9or1.js";import"./MarkdownSynapse-Dm9xpmpj.js";import"./SkeletonButton-D4dnbEqI.js";import"./SkeletonInlineBlock-DARsQc6u.js";import"./SkeletonTable-Ci-z4Kjh.js";import"./SkeletonParagraph-DDetyv-w.js";import"./FormControlLabel-g_NAfEdo.js";import"./Checkbox-C2_MHdw4.js";import"./SwitchBase-Bmf2bXZK.js";function O(o){const{accessToken:r}=g();return j({...o,mutationFn:({id:i,verificationState:s})=>h(i,s,r)})}const k="Thank you for submitting your Synapse profile for validation. Before we can accept your request:",w=`
If you have questions, do not respond to this email address. Instead, reply to:
act@sagebionetworks.org`,x="You may wish to reject the user's profile validation request for a specific reason. The list below contains some common rejection reasons. You will have a chance to edit the response before submitting it, including adding any rejection reason(s) not listed here.";function c(o){const{verificationSubmissionId:r,tableId:i=l,open:s,onRejectionSubmittedSuccess:S=C,onClose:u,currentState:R}=o,[d,T]=v.useState(""),{mutate:_,error:b}=O();function D(t,I){let a;switch(R){case e.SUBMITTED:a=e.REJECTED;break;case e.APPROVED:a=e.SUSPENDED;break;case e.REJECTED:case e.SUSPENDED:console.error("Cannot reject a request where the current state is already rejected or suspended"),u();return}_({id:r,verificationState:{state:a,reason:t,notes:I}},{onSuccess:()=>{S(),P(`Submission ${a===e.REJECTED?"rejected":"suspended"} and message sent to requester`,"info"),u()}})}return m.jsx(N,{open:s,tableId:i,onConfirm:t=>D(t,d),onClose:u,defaultMessagePrefix:k,defaultMessageAppend:w,rejectionFormPromptCopy:x,error:b,children:m.jsx(y,{label:"ACT Internal Notes",fullWidth:!0,multiline:!0,rows:3,sx:{mt:2},value:d,onChange:t=>T(t.target.value)})})}try{c.displayName="RejectProfileValidationRequestModal",c.__docgenInfo={description:`Modal component presented to an ACT profile validation reviewer when they decide to reject a validation request (a.k.a. a verificationSubmission).
The modal contains a form for selecting rejection reasons and a text field for editing the rejection message.
After crafting a message, the user can reject the request and send the message to the requester.`,displayName:"RejectProfileValidationRequestModal",props:{verificationSubmissionId:{defaultValue:null,description:"",name:"verificationSubmissionId",required:!0,type:{name:"string"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!1,type:{name:"string"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onRejectionSubmittedSuccess:{defaultValue:null,description:"",name:"onRejectionSubmittedSuccess",required:!1,type:{name:"() => void"}},currentState:{defaultValue:null,description:"",name:"currentState",required:!0,type:{name:"enum",value:[{value:'"SUBMITTED"'},{value:'"APPROVED"'},{value:'"REJECTED"'},{value:'"SUSPENDED"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}const{fn:U}=__STORYBOOK_MODULE_TEST__,re={title:"Governance/RejectProfileValidationRequestModal",component:c,loaders:[()=>A({sql:`SELECT * FROM ${l}`},V)],parameters:{stack:"mock",msw:{handlers:[...q(M)]}}},n={name:"RejectProfileValidationRequestModal",args:{open:!0,currentState:e.SUBMITTED,tableId:l,verificationSubmissionId:"",onClose:U()}};var p,f,E;n.parameters={...n.parameters,docs:{...(p=n.parameters)==null?void 0:p.docs,source:{originalSource:`{
  name: 'RejectProfileValidationRequestModal',
  args: {
    open: true,
    currentState: VerificationStateEnum.SUBMITTED,
    tableId: REJECT_VALIDATION_CANNED_RESPONSES_TABLE,
    verificationSubmissionId: '',
    onClose: fn()
  }
}`,...(E=(f=n.parameters)==null?void 0:f.docs)==null?void 0:E.source}}};const ie=["Demo"];export{n as Demo,ie as __namedExportsOrder,re as default};
