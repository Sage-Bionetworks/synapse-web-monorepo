import{j as t,a as n}from"./jsx-runtime-9dc53467.js";import{r as h}from"./index-76fb7be0.js";import{F as D}from"./index-4a1b1a67.js";import{n as V,a as U}from"./SynapseConstants-0078d114.js";import"./getEndpoint-ac94413e.js";import{h as A,z as F,k as H}from"./ApplicationSessionManager-7024b1a7.js";import{u as O}from"./useShowDesktop-b2e7d235.js";import{g as d}from"./queryUtils-e6dc6d8c.js";import{u as B}from"./useGetQueryResultBundle-a716b914.js";import{E as P}from"./ExpandableContent-cedcb092.js";import{Q as b}from"./QueryCount-aa896586.js";import{B as k}from"./Button-065a21d4.js";function g({link:r,summary:l,countSql:i,title:o}){return t(P,{title:n("div",{className:"Goals__Mobile__Header",children:[i&&t("span",{className:"Goals__Mobile__Header__Count",children:t(b,{parens:!1,query:{sql:i}})}),n("span",{className:"Goals__Mobile__Header__Title",children:[" ",o," "]})]}),content:n("div",{className:"Goals__Mobile__Content",children:[t("p",{children:l}),t(k,{variant:"contained",color:"secondary",className:"Goals__Mobile__Content__Link",href:r,children:"Explore"})]})})}try{g.displayName="GoalsMobile",g.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}function q({asset:r,link:l,summary:i,countSql:o,title:m}){return n("div",{className:"Goals__Card",children:[t("div",{className:"Goals__Card__header",style:{background:`url('${r}')`},children:n("p",{children:[n("span",{className:"Goals__Card__header__title",children:[" ",m," "]}),o&&t("span",{className:"Goals__Card__header__count",children:t(b,{parens:!1,query:{sql:o}})})]})}),n("div",{className:"Goals__Card__summary",children:[n("p",{children:[" ",i," "]}),t(k,{className:"Goals__Card__summary__link",variant:"contained",color:"secondary",href:l,children:"Explore"})]})]})}try{q.displayName="GoalsDesktop",q.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}const Q=1200,I=r=>{const{entityId:l}=r,{accessToken:i}=A(),[o,m]=h.useState(),[p,G]=h.useState(),E=O(Q),v={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:l,partMask:V|U,query:{sql:`select * from ${l} order by ItemOrder`}},{data:e}=B(v);h.useEffect(()=>{(async()=>{try{const c=d("Asset",e),s=(e==null?void 0:e.queryResult.queryResults.rows.map(a=>a.values[c]))??[];if(s.some(a=>a===null)&&console.warn("Row has null value(s) when no nulls expected"),s.length===0)return;const u={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s.map(a=>({associateObjectId:l,associateObjectType:D.TableEntity,fileHandleId:a}))},f=await H(u,i);G(void 0),m(f.requestedFiles.filter(a=>a.preSignedURL!==void 0).map(a=>a.preSignedURL))}catch(c){console.error("Error on get data",c),G(c)}})()},[l,i,e]);const N=d("TableId",e),_=d("CountSql",e),x=d("Title",e),R=d("Summary",e),L=d("Link",e);return n("div",{className:`Goals${E?"__Desktop":""}`,children:[p&&t(F,{error:p}),e==null?void 0:e.queryResult.queryResults.rows.map((S,c)=>{const s=S.values;s.some(T=>T===null)&&console.warn("Row has null value(s) when no nulls expected");const y=N>-1?s[N]:void 0;let u;_>-1&&s[_]?u=s[_]:y&&(u=`SELECT * FROM ${y}`);const f=s[x],a=s[R],M=s[L],w=(o==null?void 0:o[c])??"",C={countSql:u,title:f,summary:a,link:M,asset:w};return E?t(q,{...C}):t(g,{...C})})]})};try{I.displayName="Goals",I.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}export{I as G};
