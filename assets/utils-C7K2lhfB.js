var T=e=>{throw TypeError(e)};var D=(e,t,n)=>t.has(e)||T("Cannot "+n);var c=(e,t,n)=>(D(e,t,"read from private field"),n?n.call(e):t.get(e)),E=(e,t,n)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),y=(e,t,n,s)=>(D(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);import{r as K}from"./index-CsMIurHC.js";import{j as W}from"./jsx-runtime-d_jSGfuW.js";var z=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},R=typeof window>"u"||"Deno"in window;function ue(){}function oe(e,t){return typeof e=="function"?e(t):e}function ae(e){return typeof e=="number"&&e>=0&&e!==1/0}function ce(e,t){return Math.max(e+(t||0)-Date.now(),0)}function le(e,t){const{type:n="all",exact:s,fetchStatus:r,predicate:a,queryKey:h,stale:l}=e;if(h){if(s){if(t.queryHash!==X(h,t.options))return!1}else if(!k(t.queryKey,h))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||typeof r<"u"&&r!==t.state.fetchStatus||a&&!a(t))}function fe(e,t){const{exact:n,status:s,predicate:r,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(M(t.options.mutationKey)!==M(a))return!1}else if(!k(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||r&&!r(t))}function X(e,t){return((t==null?void 0:t.queryKeyHashFn)||M)(e)}function M(e){return JSON.stringify(e,(t,n)=>x(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function k(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!k(e[n],t[n])):!1}function B(e,t){if(e===t)return e;const n=I(e)&&I(t);if(n||x(e)&&x(t)){const s=n?e:Object.keys(e),r=s.length,a=n?t:Object.keys(t),h=a.length,l=n?[]:{};let d=0;for(let b=0;b<h;b++){const f=n?b:a[b];!n&&e[f]===void 0&&t[f]===void 0&&s.includes(f)?(l[f]=void 0,d++):(l[f]=B(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&d++)}return r===h&&d===r?e:l}return t}function he(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function I(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x(e){if(!U(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!U(n)||!n.hasOwnProperty("isPrototypeOf"))}function U(e){return Object.prototype.toString.call(e)==="[object Object]"}function Y(e){return new Promise(t=>{setTimeout(t,e)})}function ye(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?B(e,t):t}function de(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function ve(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var S,p,O,A,Z=(A=class extends z{constructor(){super();E(this,S);E(this,p);E(this,O);y(this,O,t=>{if(!R&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){c(this,p)||this.setEventListener(c(this,O))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,p))==null||t.call(this),y(this,p,void 0))}setEventListener(t){var n;y(this,O,t),(n=c(this,p))==null||n.call(this),y(this,p,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){c(this,S)!==t&&(y(this,S,t),this.onFocus())}onFocus(){this.listeners.forEach(t=>{t()})}isFocused(){var t;return typeof c(this,S)=="boolean"?c(this,S):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},S=new WeakMap,p=new WeakMap,O=new WeakMap,A),$=new Z,C,w,L,q,g=(q=class extends z{constructor(){super();E(this,C,!0);E(this,w);E(this,L);y(this,L,t=>{if(!R&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,w)||this.setEventListener(c(this,L))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,w))==null||t.call(this),y(this,w,void 0))}setEventListener(t){var n;y(this,L,t),(n=c(this,w))==null||n.call(this),y(this,w,t(this.setOnline.bind(this)))}setOnline(t){c(this,C)!==t&&(y(this,C,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return c(this,C)}},C=new WeakMap,w=new WeakMap,L=new WeakMap,q),H=new g;function ee(e){return Math.min(1e3*2**e,3e4)}function te(e){return(e??"online")==="online"?H.isOnline():!0}var V=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function be(e){return e instanceof V}function pe(e){let t=!1,n=0,s=!1,r,a,h;const l=new Promise((o,u)=>{a=o,h=u}),d=o=>{var u;s||(v(new V(o)),(u=e.abort)==null||u.call(e))},b=()=>{t=!0},f=()=>{t=!1},P=()=>!$.isFocused()||e.networkMode!=="always"&&!H.isOnline(),i=o=>{var u;s||(s=!0,(u=e.onSuccess)==null||u.call(e,o),r==null||r(),a(o))},v=o=>{var u;s||(s=!0,(u=e.onError)==null||u.call(e,o),r==null||r(),h(o))},Q=()=>new Promise(o=>{var u;r=m=>{const j=s||!P();return j&&o(m),j},(u=e.onPause)==null||u.call(e)}).then(()=>{var o;r=void 0,s||(o=e.onContinue)==null||o.call(e)}),F=()=>{if(s)return;let o;try{o=e.fn()}catch(u){o=Promise.reject(u)}Promise.resolve(o).then(i).catch(u=>{var N;if(s)return;const m=e.retry??(R?0:3),j=e.retryDelay??ee,_=typeof j=="function"?j(n,u):j,G=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,u);if(t||!G){v(u);return}n++,(N=e.onFail)==null||N.call(e,n,u),Y(_).then(()=>{if(P())return Q()}).then(()=>{t?v(u):F()})})};return te(e.networkMode)?F():Q().then(F),{promise:l,cancel:d,continue:()=>(r==null?void 0:r())?l:Promise.resolve(),cancelRetry:b,continueRetry:f}}function ne(){let e=[],t=0,n=i=>{i()},s=i=>{i()},r=i=>setTimeout(i,0);const a=i=>{r=i},h=i=>{let v;t++;try{v=i()}finally{t--,t||b()}return v},l=i=>{t?e.push(i):r(()=>{n(i)})},d=i=>(...v)=>{l(()=>{i(...v)})},b=()=>{const i=e;e=[],i.length&&r(()=>{s(()=>{i.forEach(v=>{n(v)})})})};return{batch:h,batchCalls:d,schedule:l,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{s=i},setScheduler:a}}var we=ne(),J=K.createContext(void 0),me=e=>{const t=K.useContext(J);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ee=({client:e,children:t})=>(K.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),W.jsx(J.Provider,{value:e,children:t}));function Se(e,t){return typeof e=="function"?e(...t):!!e}export{Ee as Q,z as S,R as a,te as b,pe as c,Se as d,ue as e,$ as f,ye as g,M as h,ae as i,be as j,X as k,fe as l,le as m,we as n,ve as o,de as p,H as q,B as r,he as s,ce as t,me as u,oe as v,k as w};
