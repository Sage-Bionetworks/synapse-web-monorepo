import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{L as V}from"./LargeButton-C9ZPlTzx.js";import{l as w,S as O}from"./useFiles-BotM9FxX.js";import{p as j,g as F}from"./SqlFunctions-C8HqQ3uk.js";import"./StringUtils-C5rFena9.js";import{r as k,h as Q}from"./SynapseConstants-BLHb5NQT.js";import{r as f}from"./index-Fct1fJYK.js";import{u as v}from"./use-deep-compare-effect.esm-CrknF8o4.js";import{g as A}from"./VerificationSubmission-OWkqLMYZ.js";import"./OrientationBanner-C7fwD44_.js";import{L as b}from"./UserBadge-D7F2qD3J.js";import{U as J}from"./UserCardList-D7w3IzX2.js";const B="sage_rotate_uids",M=3,z=(e=[],r=M,a)=>{let o=[],t=[];const u=localStorage.getItem(a);if(u!=null&&(o=JSON.parse(u)),o.length){const s=e.filter(n=>!o.includes(n));if(s.length>=r)return t=s.slice(0,r),localStorage.setItem(a,JSON.stringify(o.concat(t))),t;{localStorage.removeItem(a);const n=e.slice(0,r-s.length);return localStorage.setItem(a,JSON.stringify(n)),s.concat(n)}}else return t=e.slice(0,r),localStorage.setItem(a,JSON.stringify(t)),t};function _({sql:e,count:r,useQueryResultUserData:a=!1,size:o=k,summaryLink:t,summaryLinkText:u,selectedFacets:s,searchParams:n,sqlOperator:y,additionalFiltersSessionStorageKey:q}){var I;const{accessToken:g}=w(),[c,U]=f.useState([]),[m,C]=f.useState(),[p,S]=f.useState();let R=!0;const h=`${B}-${e}-${JSON.stringify(s)}`;return v(()=>(async function(){S(!0);const E=j(e),x=F(n,y,q),N={partMask:Q,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:E,query:{sql:e,additionalFilters:x,selectedFacets:s}},L=await O.getFullQueryTableResults(N,g),{queryResult:d}=L;if(d!=null&&d.queryResults.rows){const D=d.queryResults.headers.findIndex(l=>l.columnType===A.USERID),T=d.queryResults.rows.map(l=>l.values[D]).filter(l=>l!==null);if(R){const l=z(T,r,h);U(l),a&&C(L),S(!1)}}else console.log("UserCardListRotate: Error getting data")}(),()=>{R=!1}),[e,s,r,g,n,y]),i.jsxs("div",{className:"UserCardListRotate",children:[p&&i.jsx(b,{}),!p&&c.length===0&&i.jsx("p",{className:"font-italic",children:"No one was found."}),!p&&c.length>0&&i.jsx(J,{list:c,size:o,rowSet:(I=m==null?void 0:m.queryResult)==null?void 0:I.queryResults}),t&&u&&i.jsx("div",{className:"UserCardListRotate__summary",children:i.jsx(V,{color:"secondary",variant:"contained",href:t,children:u})})]})}try{_.displayName="UserCardListRotate",_.__docgenInfo={description:"",displayName:"UserCardListRotate",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},useQueryResultUserData:{defaultValue:{value:"false"},description:"",name:"useQueryResultUserData",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"UserCardSize"}},summaryLink:{defaultValue:null,description:"",name:"summaryLink",required:!1,type:{name:"string"}},summaryLinkText:{defaultValue:null,description:"",name:"summaryLinkText",required:!1,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"SQLOperator"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:"",name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}}}}}catch{}export{_ as U};
