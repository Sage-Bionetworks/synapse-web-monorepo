import{j as e}from"./jsx-runtime-kSuSxVWb.js";import{T as V,g as q}from"./CardUtils-BgXi1mg-.js";import{f as A}from"./DateFormatter-Bjp78xcZ.js";import{a as b}from"./SqlFunctions-DMQpCQSh.js";import"./StringUtils-DnD65nWI.js";import{P as O}from"./useFiles-C8VBGdZa.js";import{F as W,g as L}from"./VerificationSubmission-DeH3Sb8D.js";import{d as P}from"./dayjs.min-DPvumxTe.js";import{r as h}from"./index-DzLHwIBG.js";import{E as z}from"./EntityLink-DUWhmuV8.js";import{M as T}from"./MarkdownSynapse-C9-hUOct.js";import{U as D}from"./UserBadge-DZ9J9ACO.js";import"./OrientationBanner-D7LrLz7c.js";import{u as Z}from"./useEntity-C6uA_4Ev.js";import{I as B}from"./ImageFileHandle-Cod7B0fR.js";import{B as X}from"./Box-CqeAlgJS.js";import{L as v}from"./Link-DV8-OVTX.js";import{i as G}from"./isNil-B5OaQLPC.js";import{T as J}from"./Tooltip-BRIJeJzt.js";const _=n=>{const{entityId:i}=n,[p,t]=h.useState(!1),{data:c}=Z(i.toString()),f=c&&"dataFileHandleId"in c?c.dataFileHandleId:void 0;return f?e.jsx(X,{sx:{img:{height:p?"auto":"100px"},display:"grid",gridTemplateColumns:"auto 15px"},children:e.jsx("button",{onClick:()=>t(!p),children:e.jsx(B,{fileHandleAssociation:{associateObjectId:i.toString(),associateObjectType:W.FileEntity,fileHandleId:f}})})}):e.jsx(e.Fragment,{})};try{_.displayName="EntityColumnImage",_.__docgenInfo={description:"",displayName:"EntityColumnImage",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}const K={regex:new RegExp("((?:(?<=\\s)|^)syn\\d+)"),onMatch:n=>`${O.PORTAL}Synapse:${n}`},Q={regex:/(http:\/\/[^ ",]+)/,onMatch:n=>n},Y={regex:/(https:\/\/[^ ",]+)/,onMatch:n=>n},ee={regex:/(ftp:\/\/[^ ",]+)/,onMatch:n=>n},ne={regex:/(doi:10.\d+\/[-._;()/:a-zA-Z0-9]+)/,onMatch:n=>`https://doi.org/${n.slice(4)}`},te={regex:/(PMID:\d+)/,onMatch:n=>`https://pubmed.ncbi.nlm.nih.gov/${n.slice(5)}`},re={regex:/(MGI:\d+)/,onMatch:n=>`https://www.informatics.jax.org/allele/${n}`},ie={regex:/(AB_\d+)|(Addgene_\d+)|(CVCL_[a-zA-Z0-9]+)|(MMRRC_\d+-.{3})|(IMSR_JAX:\d+)/,onMatch:n=>`https://scicrunch.org/resolver/${n}`},ae={regex:/(ClinVar:VCV\d+)/,onMatch:n=>`https://www.ncbi.nlm.nih.gov/clinvar/variation/${n.slice(8)}`},se={regex:/(ClinVar:RCV\d+)/,onMatch:n=>`https://www.ncbi.nlm.nih.gov/clinvar/${n.slice(8)}`},le={regex:/(arXiv:[a-zA-Z0-9.]+)/,onMatch:n=>`https://arxiv.org/abs/${n.slice(6)}`},oe={regex:/(cbioportal:[a-zA-Z0-9._]+)/,onMatch:n=>`https://identifiers.org/${n}`},de={regex:/(rrid:[a-zA-Z]+.+)/,onMatch:n=>`https://bioregistry.io/${n}`},$=[Q,Y,ee,K,de,te,ie,re,ae,se,ne,le,oe],ce=$.map(n=>n.regex.source).join("|"),ue=new RegExp(ce,"g");function w({text:n,className:i}){if(n==null)return e.jsx(e.Fragment,{});const p=n.split(ue);return e.jsx(e.Fragment,{children:p.map((t,c)=>{const m=$.find(f=>f.regex.test(t));return m?e.jsx(v,{href:m.onMatch(t),target:V.NEW_WINDOW,rel:"noopener noreferrer",className:i,children:t},c):t})})}try{w.displayName="Linkify",w.__docgenInfo={description:"",displayName:"Linkify",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function F(n){const{value:i,columnName:p,labelLink:t,selectColumns:c,columnModels:m,isHeader:f,className:y,rowData:k,rowId:S}=n;if(!i)return e.jsx("p",{children:i});const{strList:a,str:s,selectColumn:I}=q({columnName:p,value:i,selectColumns:c,columnModels:m}),M=I==null?void 0:I.columnType;if(!s)return e.jsx("p",{children:s});let g=y;const E={};if(f&&(g=y==null?void 0:y.concat(" ","SRC-lightLink")),M===L.USERID_LIST&&a)return e.jsx("p",{children:a.map((r,o)=>e.jsxs(h.Fragment,{children:[e.jsx(D,{userId:r,className:g}),o<a.length-1&&",  "]},r))});if(M===L.USERID&&s)return e.jsx(D,{userId:s,className:g});if(M===L.DATE&&s)return e.jsx("p",{children:A(P(Number(s)))});if(!t)return e.jsx(w,{text:s,className:g});if("resolveEntityName"in t&&t.resolveEntityName&&s){const{baseURL:r,URLColumnName:o}=t,u=`/${r}?${o}=${s}`;return e.jsx(z,{entity:s,link:u,showIcon:!1})}let l;if("isMapValueToReactNodeConfig"in t&&t.isMapValueToReactNodeConfig){const{Component:r}=t;l=e.jsx(r,{value:a||s,selectColumn:I})}else if("isMarkdown"in t&&t.isMarkdown)a?l=e.jsx("p",{children:a.map((r,o)=>e.jsxs(h.Fragment,{children:[e.jsx(T,{renderInline:!0,markdown:r},r),o<a.length-1&&",  "]},r))}):l=e.jsx(T,{renderInline:!0,markdown:i});else if("isEntityImage"in t&&t.isEntityImage)a?l=e.jsx("p",{children:a.map((r,o)=>e.jsxs(h.Fragment,{children:[e.jsx(_,{entityId:r}),o<a.length-1&&",  "]},r))}):l=e.jsx(_,{entityId:i});else{const r=a||s.split(",");let o;if("target"in t&&(o=t.target),"linkColumnName"in t){const u=b(t.linkColumnName,c,m);if(u==null)console.warn(`Could not determine column index of ${t.linkColumnName}`),l=e.jsx(e.Fragment,{children:i});else{const C=k[u];G(C)?l=e.jsx(e.Fragment,{children:i}):l=e.jsx("p",{children:r.map((d,j)=>e.jsxs(h.Fragment,{children:[e.jsx(v,{href:C??void 0,target:o??V.NEW_WINDOW,rel:"noopener noreferrer",className:g,style:E,children:d},d),j<r.length-1&&e.jsx("span",{style:{marginRight:4},children:", "})]},d))})}}else l=e.jsx("p",{children:r.map((u,C)=>{const d=t,j=d.overrideValueWithRowID?S:u;let R="";if("baseURL"in d){const{baseURL:N,URLColumnName:x,wrapValueWithParens:U}=d,H=U?`(${j})`:j;R=`/${N}?${x}=${H}`}else if("overrideLinkURLColumnName"in d){const N=b(d.overrideLinkURLColumnName,c,m);if(N){const x=k[N];x&&(d.overrideLinkURLColumnTransform?R=d.overrideLinkURLColumnTransform(x):R=x)}}return e.jsxs(h.Fragment,{children:[e.jsx(v,{href:R,className:g,style:E,target:o??V.CURRENT_WINDOW,children:u},u),C<r.length-1&&e.jsx("span",{style:{marginRight:4},children:", "})]},u)})})}return"tooltipText"in t&&t.tooltipText?e.jsx(J,{title:t.tooltipText,enterNextDelay:300,children:e.jsx("span",{children:l})}):l}try{F.displayName="SynapseCardLabel",F.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"any"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[]"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"string"}}}}}catch{}export{w as L,F as S};
