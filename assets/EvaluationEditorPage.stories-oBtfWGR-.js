import{g as Fe}from"./userProfileHandlers-Wj4lHoIS.js";import{M as Ge}from"./mock_user_profile-CCzWeUML.js";import{l as ne,S as N,k as ie,cd as Ke,ce as $e,cf as Ye,cg as ze,M as B}from"./useFiles-DsXNnbuB.js";import{f as Ze}from"./index-DRMTTS_d.js";import{d as S}from"./dayjs.min-PNfTLX3I.js";import{l as de}from"./index-8dYqqbvO.js";import{j as t}from"./jsx-runtime-CEiya-qk.js";import{r as d}from"./index-BSp_ZQzn.js";import"./VerificationSubmission-CMrrYimb.js";import"./StringUtils-Bdqa-HwM.js";import{I as oe,C as He}from"./IconSvg-Ru8SDfys.js";import{W as Te}from"./WarningDialog-CP6pRYin.js";import{C as Qe}from"./CreatedOnByUserDiv-vdt7TyNA.js";import{B as y}from"./Box-CeBO_yiS.js";import{S as Je}from"./Stack-BVGEmsZM.js";import{T as C}from"./TextField-SirfQ6cA.js";import{A as ae}from"./Alert-VbEHGyJ9.js";import{B as R}from"./Button-DW8uwKcd.js";import{I as k}from"./IconButton-D8jW5NGW.js";import{M as _e}from"./Menu-ckb7Uu79.js";import{M as q}from"./MenuItem-DJ_Q3R4F.js";import{D as Ne}from"./Divider-BX7NSNWa.js";import{a as Xe,g as Oe}from"./iframe-D2P6Hz8u.js";import{u as et}from"./utc-DgG91AOP.js";import{D as ce}from"./DateTimePicker-KcXMs0sX.js";import{S as tt}from"./StyledFormControl-C4jSKE9V.js";import{I as rt}from"./InputLabel-ij9NGVzL.js";import{S as nt}from"./Select-CNJUy1ov.js";import{c as it}from"./createSvgIcon-BEhJlt2H.js";import{C as ot}from"./Card-jUf5BM9H.js";import{C as at}from"./CardContent-Dg1Zia89.js";import{G as P}from"./Grid-7XwHMUtA.js";import{u as st}from"./upperFirst-DSZWs_V8.js";import"./mockEntity-DuJdYSnl.js";import"./mockFileEntity-BUydM8JQ.js";import"./mock_file_handle-3Ozoui7p.js";import"./mockProject-sUqAWyhw.js";import"./mockTeam-Bakt4pTQ.js";import"./SynapseConstants-B0LjNAFO.js";import"./OrientationBanner-p1YWnoy_.js";import"./index-DDIc1CHd.js";import"./spreadSx-CwcO6WA9.js";import"./react-B_KpKvb2.js";import"./FullWidthAlert-APJZjszM.js";import"./AlertTitle-BtZzDwm8.js";import"./createTheme-BIYFvq8g.js";import"./DefaultPropsProvider-mowMNPVN.js";import"./Typography-DrbAIehx.js";import"./index-BZI38DsI.js";import"./extendSxProp--VZNpAZm.js";import"./useTheme-CUpSamw8.js";import"./createSimplePaletteValueFilter-Cum4RQAQ.js";import"./useTimeout-DQj90VCm.js";import"./useForkRef-DpmcJsqc.js";import"./useSlot-Bi5uK-Bp.js";import"./useTheme-DEW0hui-.js";import"./ClickAwayListener-V2WTDJSg.js";import"./getReactElementRef-DObOhTgY.js";import"./index-Bmc5tHOG.js";import"./index-B8_ioYD3.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-IJ_WKSZl.js";import"./Grow-Cu2yfkpY.js";import"./Tooltip-BPHaPNfS.js";import"./index-CwubJZ7e.js";import"./useControlled-DYG3vje6.js";import"./Popper-BTFfeZDZ.js";import"./isFocusVisible-B8k4qzLc.js";import"./uniqueId-Dl7NiFJr.js";import"./toString-D5-98mOr.js";import"./isObjectLike-BerGYOoN.js";import"./isArray-Dxzbedgu.js";import"./isSymbol-DxPGBnDj.js";import"./times-CDFXnYby.js";import"./_baseTimes-36S_kd0L.js";import"./identity-DKeuBCMA.js";import"./toInteger-BmLuhZ-4.js";import"./fetchWithExponentialTimeout-CXmnpl-T.js";import"./useQuery-BaQ4tC5y.js";import"./utils-NAV_hApq.js";import"./Link-ClzLR6kU.js";import"./Collapse-CHZvkNcr.js";import"./_baseUniq-CH5B1OKL.js";import"./_Uint8Array-DDv7F2aI.js";import"./_getTag-CruQv3Dp.js";import"./isEqual-ChKGANOO.js";import"./merge-B2Kk0ye1.js";import"./_initCloneObject-CzYcNzPS.js";import"./tinycolor-Begke6kS.js";import"./Fade-BLEwZ0yn.js";import"./inputBaseClasses-BPzUyhmM.js";import"./calculateFriendlyFileSize-D4N7TZwp.js";import"./CheckCircleTwoTone-Dl8Hb3jc.js";import"./InfoTwoTone-D7pUqeUD.js";import"./useMutation-De7K5N57.js";import"./chunk-AYJ5UCUI-DfFmK8x9.js";import"./cloneDeep-DhitCHjc.js";import"./Skeleton-Ds7O-lEt.js";import"./util-HBh2B_LH.js";import"./LayersTwoTone-DQsSFRzv.js";import"./ContentCopyTwoTone-D7Fl5aFU.js";import"./HelpOutlineTwoTone-C6DcZrhw.js";import"./ErrorOutlined-DFdweklI.js";import"./GetAppTwoTone-8z-L4HON.js";import"./InfoOutlined-DUWrIKcG.js";import"./PhoneTwoTone-C7jLHwJE.js";import"./DeleteTwoTone-BCrnQMhe.js";import"./ConfirmationDialog-vFXWpwAo.js";import"./DialogBase-uK6lCuD-.js";import"./Close-1qFVdNep.js";import"./HelpPopover-CilMMdcb.js";import"./MarkdownPopover-BrPGycC6.js";import"./LightTooltip-wPD6WKgZ.js";import"./MarkdownSynapse-BdWsl7fy.js";import"./SkeletonButton-Bev5VKG6.js";import"./SkeletonInlineBlock-B332kbDn.js";import"./SkeletonTable-Cj9S_rmm.js";import"./SkeletonParagraph-BedX1Y7S.js";import"./DialogTitle-CTJ9R2Ja.js";import"./DialogContent-D9356wYu.js";import"./Dialog-CSJ5JqV8.js";import"./Modal-Bs8gELk_.js";import"./getScrollbarSize-CaCM53D3.js";import"./ownerWindow-HkKU3E4x.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Backdrop-Cu2JnjAd.js";import"./DateFormatter-DCH0npKF.js";import"./localizedFormat-lgWFDmIi.js";import"./UserBadge-NxcuR-eQ.js";import"./Popover-l2jQiapp.js";import"./isHostComponent-DVu5iVWx.js";import"./debounce-Be36O1Ab.js";import"./mergeSlotProps-B0uun-00.js";import"./ToastMessage-BGYuyRIr.js";import"./ButtonBase-DzCtctvR.js";import"./CSSTransition-brKxhpNQ.js";import"./Avatar--SiFyk7F.js";import"./Chip-DoXsjVw8.js";import"./getThemeProps-Bo5zZXDb.js";import"./Input-DtwdrJc-.js";import"./InputBase-BSGUYU7M.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-7tqDll8p.js";import"./FormControl-B5BaXw6r.js";import"./isMuiElement-DqPuB8Ka.js";import"./FormHelperText-DV7WjIv-.js";import"./Close-CgXCugLz.js";import"./CircularProgress-CN-NraCE.js";import"./MenuList-CiXGB5lX.js";import"./List-CUDPGnVD.js";import"./dividerClasses-CCHurtsu.js";import"./useMobilePicker-BACixCf1.js";import"./index-BTowKXLX.js";import"./index-Chjiymov.js";import"./visuallyHidden-Dan1xhjv.js";import"./InputAdornment-Bt7p5gYP.js";import"./index-CjJI17xJ.js";import"./ListItem-DhsMqdi2.js";import"./listItemButtonClasses-CAhXtEVd.js";import"./Tabs-BI2GHh-r.js";import"./KeyboardArrowRight-CW8KmZXR.js";import"./FormLabel-BiZoNegL.js";import"./_stringToArray-N8cAV6t0.js";import"./_baseSlice-F8doVSIJ.js";const Ae=e=>{const[r,n]=d.useState(e);return{list:r,handleListChange:s=>a=>{const u=[...r];u[s]=a,n(u)},handleListRemove:s=>()=>{const a=r.filter((u,c)=>s!==c);n(a)},appendToList:(...s)=>{const a=[...r];a.push(...s),n(a)},setList:n}},lt=it(t.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}));function H({evaluationId:e,entityId:r,onDeleteSuccess:n,onSaveSuccess:i}){if(e&&r)throw new Error("please use either evaluationId or entityId but not both");const{accessToken:o}=ne(),[l,s]=d.useState(),[a,u]=d.useState(!1);d.useEffect(()=>{l&&u(!1)},[l]);const[c,g]=d.useState(""),[j,b]=d.useState(""),[m,v]=d.useState(""),[E,x]=d.useState(""),[p,w]=d.useState({contentSource:r});d.useEffect(()=>{g(p.name??""),b(p.description??""),v(p.submissionInstructionsMessage??""),x(p.submissionReceiptMessage??"")},[p]),d.useEffect(()=>{e&&(s(void 0),N.getEvaluation(e,o).then(f=>{w(f)}).catch(f=>s(f)))},[e,o]);const T=()=>{s(void 0),u(!1);const f={...p,name:c,description:j,submissionInstructionsMessage:m,submissionReceiptMessage:E};(f.id?N.updateEvaluation(f,o):N.createEvaluation(f,o)).then(I=>{w(I),u(!0),i&&i(I.id)}).catch(I=>s(I))},L=p!=null&&p.id?()=>{s(void 0),N.deleteEvaluation(p.id,o).then(n).catch(f=>s(f))}:void 0;return t.jsxs("div",{className:"evaluation-editor",children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("h4",{children:[p.id?"Edit":"Create"," Evaluation Queue"]}),t.jsx(ut,{onClick:T,onDelete:L})]}),t.jsxs(Je,{sx:{gap:2},children:[t.jsx(C,{label:"Name",fullWidth:!0,value:c,onChange:f=>g(f.target.value)}),t.jsx(C,{label:"Description",fullWidth:!0,multiline:!0,value:j,rows:2,onChange:f=>b(f.target.value)}),t.jsx(C,{fullWidth:!0,label:"Submission Instructions",value:m,multiline:!0,rows:2,onChange:f=>v(f.target.value)}),t.jsx(C,{label:"Submission Receipt Message",fullWidth:!0,value:E,onChange:f=>x(f.target.value)}),(p==null?void 0:p.createdOn)&&t.jsx(Qe,{userId:p.ownerId,date:new Date(p.createdOn)}),l&&t.jsx(ie,{error:l}),a&&t.jsx(ae,{className:"save-success-alert",severity:"success",onClose:()=>u(!1),sx:{marginBottom:"20px"},children:"Successfully saved."}),t.jsx(y,{sx:{mb:3,alignSelf:"flex-end"},children:t.jsx(R,{variant:"contained",color:"primary",className:"save-button",onClick:T,children:"Save"})})]})]})}function ut({onClick:e,onDelete:r}){const[n,i]=d.useState(!1),[o,l]=d.useState(null),s=!!o,a=c=>{l(c.currentTarget)},u=()=>{l(null)};return t.jsxs(t.Fragment,{children:[r&&t.jsx(Te,{title:"Delete Evaluation Queue",content:"Are you sure you want to delete this Evaluation Queue?",open:n,confirmButtonText:"Delete",onConfirm:()=>{r(),i(!1)},onConfirmCallbackArgs:[],onCancel:()=>{i(!1)},confirmButtonColor:"error"}),t.jsx(k,{onClick:a,children:t.jsx(oe,{icon:"verticalEllipsis",wrap:!1})}),t.jsxs(_e,{anchorEl:o,open:s,onClose:u,slotProps:{paper:{sx:{minWidth:"120px"}}},children:[t.jsx(q,{onClick:()=>{u(),e()},children:"Save"}),r&&t.jsx(Ne,{}),r&&t.jsx(q,{onClick:()=>{u(),i(!0)},children:"Delete"})]})]})}try{H.displayName="EvaluationEditor",H.__docgenInfo={description:"Edits basic properties of an Evaluation",displayName:"EvaluationEditor",props:{evaluationId:{defaultValue:null,description:"Use if UPDATING an existing Evaluation. Id of the evaluation to edit",name:"evaluationId",required:!1,type:{name:"string"}},entityId:{defaultValue:null,description:"Use if CREATING a new Evaluation. Id of the Entity that will be associated with the Evaluation",name:"entityId",required:!1,type:{name:"string"}},onDeleteSuccess:{defaultValue:null,description:"Callback after successful deletion of the Evaluation",name:"onDeleteSuccess",required:!0,type:{name:"() => void"}},onSaveSuccess:{defaultValue:null,description:"Callback after successful save of the Evaluation",name:"onSaveSuccess",required:!1,type:{name:"(evaluationId: string) => void"}}}}}catch{}var U={exports:{}},W,me;function dt(){if(me)return W;me=1;var e=1;function r(){return e=(e*9301+49297)%233280,e/233280}function n(i){e=i}return W={nextValue:r,seed:n},W}var F,pe;function M(){if(pe)return F;pe=1;var e=dt(),r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",n,i,o;function l(){o=!1}function s(m){if(!m){n!==r&&(n=r,l());return}if(m!==n){if(m.length!==r.length)throw new Error("Custom alphabet for shortid must be "+r.length+" unique characters. You submitted "+m.length+" characters: "+m);var v=m.split("").filter(function(E,x,p){return x!==p.lastIndexOf(E)});if(v.length)throw new Error("Custom alphabet for shortid must be "+r.length+" unique characters. These characters were not unique: "+v.join(", "));n=m,l()}}function a(m){return s(m),n}function u(m){e.seed(m),i!==m&&(l(),i=m)}function c(){n||s(r);for(var m=n.split(""),v=[],E=e.nextValue(),x;m.length>0;)E=e.nextValue(),x=Math.floor(E*m.length),v.push(m.splice(x,1)[0]);return v.join("")}function g(){return o||(o=c(),o)}function j(m){var v=g();return v[m]}function b(){return n||r}return F={get:b,characters:a,seed:u,lookup:j,shuffled:g},F}var G,fe;function ct(){if(fe)return G;fe=1;var e=typeof window=="object"&&(window.crypto||window.msCrypto),r;return!e||!e.getRandomValues?r=function(n){for(var i=[],o=0;o<n;o++)i.push(Math.floor(Math.random()*256));return i}:r=function(n){return e.getRandomValues(new Uint8Array(n))},G=r,G}let mt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",De=e=>crypto.getRandomValues(new Uint8Array(e)),ke=(e,r,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*r/e.length);return(l=r)=>{let s="";for(;;){let a=n(o),u=o|0;for(;u--;)if(s+=e[a[u]&i]||"",s.length===l)return s}}},pt=(e,r=21)=>ke(e,r,De),ft=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((r,n)=>(n&=63,n<36?r+=n.toString(36):n<62?r+=(n-26).toString(36).toUpperCase():n>62?r+="-":r+="_",r),"");const ht=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:pt,customRandom:ke,nanoid:ft,random:De,urlAlphabet:mt},Symbol.toStringTag,{value:"Module"})),vt=Xe(ht);var K,he;function St(){if(he)return K;he=1;var e=M(),r=ct(),n=vt.customRandom;function i(o){for(var l=0,s,a="";!s;)a=a+n(e.get(),1,r)(),s=o<Math.pow(16,l+1),l++;return a}return K=i,K}var $,ve;function gt(){if(ve)return $;ve=1;var e=St();M();var r=1567752802062,n=7,i,o;function l(s){var a="",u=Math.floor((Date.now()-r)*.001);return u===o?i++:(i=0,o=u),a=a+e(n),a=a+e(s),i>0&&(a=a+e(i)),a=a+e(u),a}return $=l,$}var Y,Se;function Et(){if(Se)return Y;Se=1;var e=M();function r(n){if(!n||typeof n!="string"||n.length<6)return!1;var i=new RegExp("[^"+e.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!i.test(n)}return Y=r,Y}var z,ge;function xt(){return ge||(ge=1,z=0),z}var Ee;function yt(){return Ee||(Ee=1,function(e){var r=M(),n=gt(),i=Et(),o=xt()||0;function l(c){return r.seed(c),e.exports}function s(c){return o=c,e.exports}function a(c){return c!==void 0&&r.characters(c),r.shuffled()}function u(){return n(o)}e.exports=u,e.exports.generate=u,e.exports.seed=l,e.exports.worker=s,e.exports.characters=a,e.exports.isValid=i}(U)),U.exports}var Z,xe;function bt(){return xe||(xe=1,Z=yt()),Z}var jt=bt();const qe=Oe(jt);var D={exports:{}},It=D.exports,ye;function Ct(){return ye||(ye=1,function(e,r){(function(n,i){e.exports=i()})(It,function(){return function(n,i){i.prototype.isSameOrAfter=function(o,l){return this.isSame(o,l)||this.isAfter(o,l)}}})}(D)),D.exports}var Lt=Ct();const Rt=Oe(Lt);function Q({onSave:e,onDelete:r}){const[n,i]=d.useState(!1),[o,l]=d.useState(null),s=!!o,a=c=>{l(c.currentTarget)},u=()=>{l(null)};return t.jsxs(t.Fragment,{children:[t.jsx(Te,{title:"Delete Evaluation Round",content:"Are you sure you want to delete this Evaluation Round?",open:n,confirmButtonText:"Delete",onConfirm:()=>{r(),i(!1)},onConfirmCallbackArgs:[],onCancel:()=>{i(!1)},confirmButtonColor:"error"}),t.jsx(k,{onClick:a,"aria-label":"Round Options",children:t.jsx(oe,{icon:"verticalEllipsis",wrap:!1})}),t.jsxs(_e,{"aria-label":"Round Options",anchorEl:o,open:s,onClose:u,slotProps:{paper:{sx:{minWidth:"120px"}}},children:[t.jsx(q,{onClick:()=>{u(),e()},children:"Save"}),t.jsx(Ne,{}),t.jsx(q,{onClick:()=>{u(),i(!0)},children:"Delete"})]})]})}try{Q.displayName="EvaluationRoundEditorDropdown",Q.__docgenInfo={description:"",displayName:"EvaluationRoundEditorDropdown",props:{onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"() => void"}}}}}catch{}const Me=(e,r)=>({reactListKey:r??qe.generate(),evaluationId:e.evaluationId,id:e.id,etag:e.etag,roundStart:e.roundStart,roundEnd:e.roundEnd,totalSubmissionLimit:wt(e.limits),otherLimits:Tt(e.limits)}),wt=e=>(e||[]).filter(r=>r.limitType==="TOTAL").reduce((r,n)=>n.maximumSubmissions.toString(),""),Tt=e=>(e||[]).filter(r=>r.limitType!=="TOTAL").reduce((r,n)=>(r.push({type:n.limitType,maxSubmissionString:n.maximumSubmissions.toString()}),r),[]),Ve={DAILY:"Daily Limit",WEEKLY:"Weekly Limit",MONTHLY:"Monthly Limit"};function J({limitInput:e,allSelectedTypes:r,onChange:n}){return t.jsxs(t.Fragment,{children:[t.jsxs(tt,{className:"limit-type",children:[t.jsx(rt,{children:"Limit Type"}),t.jsx(nt,{fullWidth:!0,native:!0,value:e.type,onChange:i=>{n({type:i.target.value,maxSubmissionString:e.maxSubmissionString})},children:Object.entries(Ve).map(([i,o])=>t.jsx("option",{value:i,disabled:r.has(i)&&i!==e.type,children:o},i))})]}),t.jsx(C,{fullWidth:!0,className:"limit-input",label:"Maximum Submissions",value:e.maxSubmissionString,onChange:i=>{n({type:e.type,maxSubmissionString:i.target.value})},slotProps:{htmlInput:{pattern:"[0-9]*"}}})]})}try{J.displayName="EvaluationRoundLimitOptions",J.__docgenInfo={description:"",displayName:"EvaluationRoundLimitOptions",props:{limitInput:{defaultValue:null,description:"",name:"limitInput",required:!0,type:{name:"EvaluationRoundLimitInput"}},allSelectedTypes:{defaultValue:null,description:"",name:"allSelectedTypes",required:!0,type:{name:"Set<EvaluationRoundLimitType>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(limitInput: EvaluationRoundLimitInput) => void"}}}}}catch{}const Be=Object.keys(Ve),_t=e=>Be.find(r=>!e.has(r));function X({limitInputs:e,handleChange:r,handleDeleteLimit:n,onAddNewLimit:i}){const o=new Set(e.map(s=>s.type)),l=d.useCallback(()=>{i({type:_t(o),maxSubmissionString:""})},[i,o]);return d.useEffect(()=>{e.length===0&&l()},[e,l]),t.jsx("div",{"data-testid":"EvaluationRoundLimitOptionsList",className:"advanced-limits-grid",children:e.map((s,a)=>t.jsxs(d.Fragment,{children:[t.jsx(J,{limitInput:s,allSelectedTypes:o,onChange:r(a)}),t.jsx(k,{size:"small",color:"primary","aria-label":"Remove",className:"remove-button",onClick:n(a),sx:{height:"40px",width:"40px"},children:t.jsx(He,{})}),a===e.length-1&&e.length<Be.length&&t.jsx(k,{size:"small",color:"primary","aria-label":"Add",onClick:l,className:"add-button",sx:{height:"40px",width:"40px"},children:t.jsx(lt,{})})]},s.type))})}try{X.displayName="EvaluationRoundLimitOptionsList",X.__docgenInfo={description:"",displayName:"EvaluationRoundLimitOptionsList",props:{limitInputs:{defaultValue:null,description:"",name:"limitInputs",required:!0,type:{name:"EvaluationRoundLimitInput[]"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(index: number) => (limitInput: EvaluationRoundLimitInput) => void"}},handleDeleteLimit:{defaultValue:null,description:"",name:"handleDeleteLimit",required:!0,type:{name:"(index: number) => () => void"}},onAddNewLimit:{defaultValue:null,description:"",name:"onAddNewLimit",required:!0,type:{name:"(limit: EvaluationRoundLimitInput) => void"}}}}}catch{}S.extend(et);S.extend(Rt);const Nt=(e,r)=>{let n,i,o;const l=S();return l.isSameOrAfter(e)?l.isBefore(r)?(n="status-in-progress",i={icon:"sync"},o="IN PROGRESS"):(n="status-completed",i={icon:"clipboardCheck"},o="COMPLETED"):(n="status-not-yet-started",i=void 0,o="NOT YET STARTED"),t.jsx("div",{className:n,children:t.jsxs("div",{className:"status",children:[i&&t.jsx(oe,{...i}),t.jsx("span",{children:o})]})})},Ot=(e,r,n,i,o)=>{const l=[];if(i){const s=Number(i);if(Number.isNaN(s))throw TypeError("Total Submission is not an integer");l.push({limitType:"TOTAL",maximumSubmissions:s})}return o.forEach(s=>{if(s.maxSubmissionString){const a=Number(s.maxSubmissionString);if(Number.isNaN(a))throw TypeError(s.type+" Limit is not an integer");l.push({limitType:s.type,maximumSubmissions:a})}}),{id:e.id,etag:e.etag,evaluationId:e.evaluationId,roundStart:S.utc(r).toJSON(),roundEnd:S.utc(n).toJSON(),limits:l}};function be(e,r){if(r==null)return null;switch(r){case"disablePast":return`${st(e)} date cannot be in the past`;case"invalidDate":default:return"Invalid date"}}function ee({evaluationRoundInput:e,onSave:r,onDelete:n}){const{accessToken:i}=ne(),[o,l]=d.useState(),[s,a]=d.useState(!1);d.useEffect(()=>{o&&a(!1)},[o]);const[u,c]=d.useState(e.roundStart?S(e.roundStart):null),[g,j]=d.useState(e.roundEnd?S(e.roundEnd):null),[b,m]=d.useState(e.totalSubmissionLimit),[v,E]=d.useState(!1),[x,p]=d.useState(null),[w,T]=d.useState(null),{list:L,handleListRemove:f,handleListChange:se,appendToList:I}=Ae(e.otherLimits),Pe=h=>{const _=f(h);return()=>{_(),L.length===1&&E(!1)}},le=()=>{a(!1);let h;try{h=Ot(e,u,g,b,L)}catch(_){l(_)}h&&(h.id?Ke(h,i):$e(h,i)).then(V=>{const We=Me(V,e.reactListKey);l(void 0),a(!0),r(We)}).catch(V=>l(V))},Ue=()=>{e.id?Ye(e.evaluationId,e.id,i).then(()=>n()).catch(h=>l(h)):n()},ue=S().isSameOrAfter(e.roundStart);return t.jsx("div",{className:"evaluation-round-editor",children:t.jsx(ot,{children:t.jsx(at,{sx:{p:3},children:t.jsxs("form",{"aria-label":"Evaluation Round Form",children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("h5",{children:["ROUND STATUS",e.id&&" ("+e.id+")"]}),t.jsx(Q,{onDelete:Ue,onSave:le})]}),t.jsx(y,{className:"round-status",sx:{mb:2},children:Nt(e.roundStart,e.roundEnd)}),t.jsx("h5",{children:"DURATION"}),t.jsxs(P,{container:!0,children:[t.jsx(P,{size:6,children:t.jsx(ce,{label:"Round Start",value:u,onChange:c,onError:h=>p(h),disabled:ue,disablePast:!ue,slotProps:{textField:{helperText:be("start",x)}}})}),t.jsx(P,{size:6,children:t.jsx(ce,{label:"Round End",value:g,onChange:j,onError:h=>T(h),disablePast:!S(g).isSame(e.roundEnd),slotProps:{textField:{helperText:be("end",w)}}})})]}),t.jsx("h5",{style:{marginTop:"20px"},children:"SUBMISSION LIMITS"}),t.jsx(C,{fullWidth:!0,label:"Total Submissions / Round",value:b,onChange:h=>m(h.target.value),autoComplete:"new-password",slotProps:{htmlInput:{pattern:"[0-9]*"}}}),t.jsx(y,{sx:{my:2},children:t.jsx(R,{variant:"outlined",color:"primary",size:"small",onClick:()=>E(!v),children:"Advanced Limits"})}),v&&t.jsx(X,{limitInputs:L,handleChange:se,handleDeleteLimit:Pe,onAddNewLimit:I}),o&&t.jsx(y,{sx:{my:3},children:t.jsx(ie,{error:o})}),s&&t.jsx(y,{sx:{my:3},children:t.jsx(ae,{className:"save-success-alert",severity:"success",onClose:()=>a(!1),sx:{mb:"20px"},children:"Successfully saved."})}),t.jsx(y,{sx:{mt:3,textAlign:"right"},children:t.jsx(R,{variant:"contained",color:"primary",onClick:le,children:"Save"})})]})})})})}try{ee.displayName="EvaluationRoundEditor",ee.__docgenInfo={description:"",displayName:"EvaluationRoundEditor",props:{evaluationRoundInput:{defaultValue:null,description:"",name:"evaluationRoundInput",required:!0,type:{name:"EvaluationRoundInput"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(evaluationRound: EvaluationRoundInput) => void"}}}}}catch{}const At=(e,r,n,i)=>{const o=[],l=s=>{ze(e,{nextPageToken:s},r).then(a=>{const u=a.page.map(c=>Me(c));o.push(...u),i(void 0),a.nextPageToken?l(a.nextPageToken):n(o)}).catch(a=>{i(a)})};l(void 0)};function te({evaluationId:e}){const{accessToken:r}=ne(),[n,i]=d.useState(),{list:o,appendToList:l,handleListChange:s,handleListRemove:a,setList:u}=Ae([]);return d.useEffect(()=>{At(e,r,u,i)},[r,e]),n?t.jsx(ie,{error:n}):t.jsxs("div",{className:"evaluation-round-editor-list",children:[t.jsx("div",{className:"evaluation-rounds",children:o.map((c,g)=>t.jsx(ee,{evaluationRoundInput:c,onSave:s(g),onDelete:a(g)},c.reactListKey))}),t.jsx("div",{children:t.jsx(R,{className:"add-round-button",variant:"contained",color:"primary",onClick:()=>{l({reactListKey:qe(),evaluationId:e,roundStart:"",roundEnd:"",totalSubmissionLimit:"",otherLimits:[]})},children:"Add Round"})})]})}try{te.displayName="EvaluationRoundEditorList",te.__docgenInfo={description:"Edits EvaluationsRounds for an Evaluation.",displayName:"EvaluationRoundEditorList",props:{evaluationId:{defaultValue:null,description:"id of the Evaluation containing EvaluationRounds to edit",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}function re({evaluationId:e,entityId:r,onDeleteSuccess:n}){const[i,o]=d.useState(e);return t.jsxs("div",{children:[t.jsx(H,{evaluationId:i,entityId:i?void 0:r,onDeleteSuccess:n,onSaveSuccess:o}),t.jsx("div",{className:"my-4",children:i?t.jsx(te,{evaluationId:i}):t.jsx(Dt,{})})]})}function Dt(){const[e,r]=d.useState(!1);return t.jsx("div",{"data-testid":"FakeEvaluationRoundEditorList",children:e?t.jsx(ae,{severity:"info",children:"Evaluation Rounds can be edited once the Evaluation has been created."}):t.jsx(R,{className:"add-round-button",variant:"contained",color:"primary",onClick:()=>{r(!0)},children:"Add Round"})})}try{re.displayName="EvaluationEditorPage",re.__docgenInfo={description:"Combined editor that allows editing an Evaluation's data and also it's associated rounds (once the Evaluation exists on Synapse)",displayName:"EvaluationEditorPage",props:{evaluationId:{defaultValue:null,description:"Use if UPDATING an existing Evaluation. Id of the evaluation to edit",name:"evaluationId",required:!1,type:{name:"string"}},entityId:{defaultValue:null,description:"Use if CREATING a new Evaluation. Id of the Entity that will be associated with the Evaluation",name:"entityId",required:!1,type:{name:"string"}},onDeleteSuccess:{defaultValue:null,description:"Callback after successful deletion of the Evaluation",name:"onDeleteSuccess",required:!0,type:{name:"() => void"}}}}}catch{}const Vi={title:"Synapse/Challenge/EvaluationEditorPage",component:re,args:{onDeleteSuccess:Ze()}},O={args:{entityId:"syn5585645"}},A={parameters:{stack:"mock",msw:{handlers:[...Fe(B),de.rest.get(`${B}/repo/v1/evaluation/:id`,async(e,r,n)=>r(n.status(200),n.json({id:"9614712",etag:"a2b871cb-faa4-471a-8c23-b917c77fecb2",name:"a",description:"b",ownerId:Ge.toString(),createdOn:"2021-03-02T22:16:14.552Z",contentSource:"syn5585645",submissionInstructionsMessage:"c",submissionReceiptMessage:"c"}))),de.rest.post(`${B}/repo/v1/evaluation/:id/round/list`,async(e,r,n)=>r(n.status(200),n.json({page:[{id:"259",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:"2022-11-27T08:00:00.000Z",roundEnd:"2022-11-30T08:00:00.000Z"},{id:"260",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:S().subtract(1,"day").toISOString(),roundEnd:S().add(2,"day").toISOString()},{id:"261",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:S().add(1,"week").toISOString(),roundEnd:S().add(2,"week").toISOString()}]})))]}},args:{evaluationId:"9614712"}};var je,Ie,Ce;O.parameters={...O.parameters,docs:{...(je=O.parameters)==null?void 0:je.docs,source:{originalSource:`{
  args: {
    entityId: 'syn5585645'
  }
}`,...(Ce=(Ie=O.parameters)==null?void 0:Ie.docs)==null?void 0:Ce.source}}};var Le,Re,we;A.parameters={...A.parameters,docs:{...(Le=A.parameters)==null?void 0:Le.docs,source:{originalSource:`{
  parameters: {
    stack: 'mock',
    msw: {
      handlers: [...getUserProfileHandlers(MOCK_REPO_ORIGIN), rest.get(\`\${MOCK_REPO_ORIGIN}/repo/v1/evaluation/:id\`, async (req, res, ctx) => {
        return res(ctx.status(200), ctx.json({
          id: '9614712',
          etag: 'a2b871cb-faa4-471a-8c23-b917c77fecb2',
          name: 'a',
          description: 'b',
          ownerId: MOCK_USER_ID.toString(),
          createdOn: '2021-03-02T22:16:14.552Z',
          contentSource: 'syn5585645',
          submissionInstructionsMessage: 'c',
          submissionReceiptMessage: 'c'
        }));
      }), rest.post(\`\${MOCK_REPO_ORIGIN}/repo/v1/evaluation/:id/round/list\`, async (req, res, ctx) => {
        return res(ctx.status(200), ctx.json({
          page: [
          // Ended
          {
            id: '259',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: '2022-11-27T08:00:00.000Z',
            roundEnd: '2022-11-30T08:00:00.000Z'
          },
          // Ongoing
          {
            id: '260',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: dayjs().subtract(1, 'day').toISOString(),
            roundEnd: dayjs().add(2, 'day').toISOString()
          },
          // Future
          {
            id: '261',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: dayjs().add(1, 'week').toISOString(),
            roundEnd: dayjs().add(2, 'week').toISOString()
          }]
        }));
      })]
    }
  },
  args: {
    evaluationId: '9614712'
  }
}`,...(we=(Re=A.parameters)==null?void 0:Re.docs)==null?void 0:we.source}}};const Bi=["Entity","Evaluation"];export{O as Entity,A as Evaluation,Bi as __namedExportsOrder,Vi as default};
