import{j as e}from"./jsx-runtime-Du8NFWEI.js";import{r as a}from"./index-Dl6G-zuu.js";import{L as q}from"./index-pgNzZV2V.js";import{l as L,q as W}from"./useFiles-BB44TkxD.js";import"./VerificationSubmission-DL9jxYsQ.js";import"./RegularExpressions-DJ71COid.js";import{v as k}from"./StringUtils-Be_D70k4.js";import"./OrientationBanner-Cf3E8CNj.js";import{d as w}from"./ToastMessage-B89FJFUB.js";import{u as U}from"./useChangePasswordFormState-CHbQGzJu.js";import{k as D}from"./index-CwhkrBS5.js";import{A as f}from"./Alert-CduaGk2B.js";import{T as n}from"./TextField-BxyjSNA_.js";import{B as G}from"./Button-DtfaTZY_.js";import{L as I}from"./Link-DxNs_73S.js";const g="Your password was successfully changed.";function h(u){const{redirectToRoute:l,hideReset2FA:P=!1}=u,[i,x]=a.useState(""),[o,C]=a.useState(""),[y,v]=a.useState(void 0),[d,S]=a.useState(""),[t,m]=a.useState(""),{accessToken:j}=L(),c=!!j,{data:s,isLoading:T}=W({enabled:c});a.useEffect(()=>{s&&t==""&&m(s.userName)},[t,s,s==null?void 0:s.userName]);const{promptForTwoFactorAuth:A,TwoFactorAuthPrompt:N,successfullyChangedPassword:_,isPending:b,handleChangePasswordWithCurrentPassword:E,error:p}=U({hideReset2FA:P}),F=r=>{r.preventDefault(),o!==d?w("Passwords do not match.","danger"):E(t,i,o)};return _?l?(w(g,"success"),e.jsx(D,{to:l})):e.jsx(f,{severity:"success",children:g}):e.jsxs("div",{children:[A?e.jsx(N,{}):e.jsxs("form",{onSubmit:r=>{F(r)},children:[!c&&e.jsx(n,{required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"username",label:"Username or Email Address",id:"username",type:"text",value:t,onChange:r=>m(r.target.value)}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"currentPassword",label:"Current password",onChange:r=>x(r.target.value),value:i}),e.jsx(n,{fullWidth:!0,required:!0,helperText:y,margin:"normal",type:"password",id:"newPassword",label:"New password",onChange:r=>{const R=k(r.target.value);v(R),C(r.target.value)},value:o}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"confirmPassword",label:"Confirm password",onChange:r=>S(r.target.value),value:d}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx(G,{sx:{marginRight:"26px"},disabled:!i||!o||!d||!t||T||b,variant:"contained",type:"submit",children:"Change Password"}),e.jsx(I,{component:q,to:"/resetPassword",sx:{display:"block",marginTop:"1em",marginLeft:"5px"},children:"Forgot password?"})]})]}),p&&e.jsx(f,{severity:"error",sx:{my:2},children:p.reason})]})}try{h.displayName="ChangePassword",h.__docgenInfo={description:"",displayName:"ChangePassword",props:{redirectToRoute:{defaultValue:null,description:"",name:"redirectToRoute",required:!1,type:{name:"string"}},hideReset2FA:{defaultValue:null,description:"",name:"hideReset2FA",required:!1,type:{name:"boolean"}}}}}catch{}export{h as C};
