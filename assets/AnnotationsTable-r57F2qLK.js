var Nt=e=>{throw TypeError(e)};var Dt=(e,t,r)=>t.has(e)||Nt("Cannot "+r);var qe=(e,t,r)=>(Dt(e,t,"read from private field"),r?r.call(e):t.get(e)),Ce=(e,t,r)=>t.has(e)?Nt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Me=(e,t,r,n)=>(Dt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{j as k,b$ as dn,V as mn,am as un,r as Fe,dG as Je,d4 as ln,di as Ve,d0 as Le,ct as hn,cu as fn,ay as yn,dH as $n}from"./iframe-DslgKmO_.js";import{k as gn}from"./useEntity-D-cn9RYq.js";import{u as wn,b as jn,a as bn}from"./useSchema-B1JBUunb.js";import{g as nr}from"./index-r8ZA1smB.js";import"./SkeletonButton-CrnZOVdp.js";import"./SkeletonInlineBlock-iMtCHDfe.js";import{S as kn}from"./SkeletonTable-B6rYfEE0.js";import"./SkeletonParagraph-CWIA3BjK.js";function We(e){const{annotationKey:t,title:r,description:n}=e;return r==t&&!n?t:k.jsx(dn,{placement:"left",title:k.jsxs(k.Fragment,{children:[r!=t&&k.jsx("p",{children:k.jsxs("strong",{children:["Annotation Key: ",t]})}),k.jsx("p",{children:n})]}),children:k.jsx(mn,{component:"span",sx:o=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:"15%",textDecorationColor:o.palette.secondary.main,textUnderlineOffset:"4px",cursor:"pointer"}),children:r})})}try{We.displayName="EntityAnnotationKey",We.__docgenInfo={description:"A component used to display an Entity annotation key.",displayName:"EntityAnnotationKey",props:{annotationKey:{defaultValue:null,description:"The key of the annotation",name:"annotationKey",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"An optional title of the annotation",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"An optional",name:"description",required:!1,type:{name:"string"}}}}}catch{}function vn(e){if(!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return!1;const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e}const Re="[a-fA-F0-9]",ie="[a-zA-Z0-9-._~]",U="[!$&'()*+,;=]",X=`%${Re}${Re}`,ve="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",ot=`${ve}\\.${ve}\\.${ve}\\.${ve}`,j=`${Re}{1,4}`,B=`(?:${j}:${j}|${ot})`,An=`(?:(?:${j}:){6}${B}|::(?:${j}:){5}${B}|(?:${j})?::(?:${j}:){4}${B}|(?:(?:${j}:){0,1}${j})?::(?:${j}:){3}${B}|(?:(?:${j}:){0,2}${j})?::(?:${j}:){2}${B}|(?:(?:${j}:){0,3}${j})?::(?:${j}:){1}${B}|(?:(?:${j}:){0,4}${j})?::${B}|(?:(?:${j}:){0,5}${j})?::${j}|(?:(?:${j}:){0,6}${j})?::)`,En=`v${Re}+\\.(?:${ie}|${U}|:)+`,or=`\\[(?:${An}|${En})\\]`,ae="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",sr=":(?<port>\\d*)",In=`(?:${ie}|${X}|${U})*?`,xn=`(?<host>${or}|${ot}|${In})`,Fn=`(?<userinfo>(?:${ie}|${X}|${U}|:)*)`,st=`(?:${ie}|${X}|${U}|:|@)`,ir=`${st}*?`,ar=`(?:/${ir})*`,it=`(?<authority>(?:${Fn}@)?${xn}(?:${sr})?)`,at=`(?<path>${ar})`,ct=`(?<path2>${ir}${ar})`,pt=`(?:\\?(?<query>(?:${st}|/|\\?)*))?`,cr=`(?:#(?<fragment>(?:${st}|/|\\?)*))?`,Rn=`^${ae}:(?://${it}${at}|${ct})${pt}${cr}$`,Sn=`^(?:${ae}:|)(?://${it}${at}|${ct})${pt}${cr}$`,On=`^${ae}:(?://${it}${at}|${ct})${pt}$`,we="[a-zA-Z0-9-._~\\00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD]",Pn="[\\uE000-\\uF8FF\\uF0000-\\uFFFFD\\u100000-\\u10FFFD]",_n=`(?:${we}|${X}|${U})*?`,Tn=`(?<host>${or}|${ot}|${_n})`,Nn=`(?<userinfo>(?:${we}|${X}|${U}|:)*)`,dt=`(?:${we}|${X}|${U}|:|@)`,pr=`${dt}*?`,dr=`(?:/${pr})*`,mt=`(?<authority>(?:${Nn}@)?${Tn}(?:${sr})?)`,ut=`(?<path>${dr})`,lt=`(?<path2>${pr}${dr})`,ht=`(?:\\?(?<query>(?:${dt}|${Pn}|/|\\?)*))?`,mr=`(?:#(?<fragment>(?:${dt}|/|\\?)*))?`,ur=`^${ae}:(?://${mt}${ut}|${lt})${ht}${mr}$`,lr=`^(?:${ae}:|)(?://${mt}${ut}|${lt})${ht}${mr}$`,hr=`^${ae}:(?://${mt}${ut}|${lt})${ht}$`,Dn=e=>(t,r)=>{const n=e.parseReference(t);if(n.scheme===void 0){const o=e.parseAbsolute(r);n.scheme=o.scheme,n.authority===void 0&&(n.authority=o.authority,n.path===""?(n.path=o.path,n.query===void 0&&(n.query=o.query)):n.path.startsWith("/")||(n.path=Un(n.path,o)))}return fr(e,n)},Un=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const r=t.path.lastIndexOf("/");return r===-1?e:t.path.slice(0,r+1)+e}},qn=/^\.?\.\/|^\.\.?$/,Cn=/^\/\.(?:\/|$)/,Mn=/^\/\.\.(?:\/|$)/,Vn=e=>{let t="";for(;e.length>0;)if(qn.test(e))e=Ut(e);else if(Cn.test(e))e=qt(e);else if(Mn.test(e))e=qt(e),t=Ln(t);else{const r=Kn(e);e=Ut(e),t+=r}return t},Ut=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},qt=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},Ln=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},Kn=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},fr=(e,t)=>{let r=t.scheme.toLowerCase()+":";return r+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),r+=e.normalizePath(t.path),r+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),r+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),r},yr=new RegExp(X,"g"),$r=e=>t=>{const r=parseInt(t.slice(1),16),n=String.fromCharCode(r);return e(n)?n:t.toUpperCase()};RegExp.prototype.test.bind(new RegExp(`${ie}|${U}|[:@]`));const zn=RegExp.prototype.test.bind(new RegExp(`${we}|${U}|[:@]`)),Bn=e=>t=>Vn(t).replaceAll(yr,$r(e));RegExp.prototype.test.bind(new RegExp(`${ie}|${U}|[:@/?]`));const Ct=RegExp.prototype.test.bind(new RegExp(`${we}|${U}|[:@/?]`)),Mt=e=>t=>t.replaceAll(yr,$r(e));RegExp.prototype.test.bind(new RegExp(Rn));RegExp.prototype.test.bind(new RegExp(Sn));RegExp.prototype.test.bind(new RegExp(On));RegExp.prototype.test.bind(new RegExp(ur));RegExp.prototype.test.bind(new RegExp(lr));RegExp.prototype.test.bind(new RegExp(hr));const ft=(e,t)=>r=>{const n=e.exec(r);if(n===null)throw Error(`Invalid ${t}: ${r}`);const o=n.groups;return o.authority===void 0&&(o.path=o.path2),delete o.path2,o},Gn=ft(new RegExp(ur),"IRI"),gr=ft(new RegExp(lr),"IRI-reference"),Zn=ft(new RegExp(hr),"absolute-IRI"),wr={iri:{parseAbsolute:Zn,parseReference:gr,parse:Gn,normalizePath:Bn(zn),normalizeQuery:Mt(Ct),normalizeFragment:Mt(Ct)}},Jn=e=>t=>{const r=e.parse(t);return delete r.fragment,fr(e,r)},W=Jn(wr.iri),Qe=Dn(wr.iri),Wn="",Se=function*(e){if(e.length>0&&!e.startsWith("/"))throw Error("Invalid JSON Pointer");let t=1,r=0;for(;r<e.length;){const n=e.indexOf("/",t);r=n===-1?e.length:n;const o=e.slice(t,r);t=r+1,yield Hn(o)}},Qn=(e,t=void 0)=>{if(t===void 0){const r=[...Se(e)];return n=>Vt(r,n)}else return Vt(Se(e),t)},Vt=(e,t)=>{let r=Wn;for(const n of e)t=eo(t,n,r),r=Q(n,r);return t},Q=(e,t)=>t+"/"+Xn(e),Xn=e=>e.toString().replace(/~/g,"~0").replace(/\//g,"~1"),Hn=e=>e.toString().replace(/~1/g,"/").replace(/~0/g,"~"),Yn=(e,t)=>Array.isArray(e)?t==="-"?e.length:parseInt(t,10):t,eo=(e,t,r="")=>{if(e===void 0)throw TypeError(`Value at '${r}' is undefined and does not have property '${t}'`);if(e===null)throw TypeError(`Value at '${r}' is null and does not have property '${t}'`);if(to(e))throw TypeError(`Value at '${r}' is a ${typeof e} and does not have property '${t}'`);{const n=Yn(e,t);if(Object.hasOwn(e,n))return e[n]}},to=e=>e===null||typeof e!="object",jr=e=>{const t=typeof e;switch(t){case"number":case"string":case"boolean":case"undefined":return t;case"object":if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype)return"object";default:{const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JSON compatible type: ${r}`)}}},yt=e=>{const t=e.indexOf("#"),r=t===-1?e.length:t;return e.slice(0,r)},br=e=>decodeURIComponent(gr(e).fragment||""),Oe={},kr=e=>{if(e.indexOf("#")!==-1){const t=yt(e);return{...Oe[t],id:e}}return Oe[e]},ro=(e,t)=>{const r=vr(e,t);if(!r)throw Error(`Encountered unknown keyword '${e}'`);const n=kr(r);if(!n)throw Error(`Encountered unsupported keyword ${e}. You can provide an implementation for the '${r}' keyword using the 'addKeyword' function.`);return n},p=e=>{Oe[e.id]=e},Ie={},V=(e,t)=>{Ie[e]=t},re={},vr=(e,t)=>{const r=Ar(t);return r.keywords[e]??(r.allowUnknownKeywords||e.startsWith("x-")?`https://json-schema.org/keyword/unknown#${e}`:void 0)},v=(e,t)=>{const r=Ar(e);for(const n in r.keywords)if(r.keywords[n]===t)return n},Ar=e=>{if(!(e in re))throw Error(`Encountered unknown dialect '${e}'`);return re[e]},$t=(e,t,r=!1,n=!0)=>{var o;re[e]={keywords:{},allowUnknownKeywords:r,persistentDialects:((o=re[e])==null?void 0:o.persistentDialects)||n};for(const s in t)if(s in Ie)for(const i in Ie[s]){let a=Ie[s][i];!(a in Oe)&&!t[s]&&(a=`https://json-schema.org/keyword/unknown#${i}`),re[e].keywords[i]=a}else if(!r||t[s])throw delete re[e],Error(`Unrecognized vocabulary: ${s}. You can define this vocabulary with the 'defineVocabulary' function.`)};var Ae={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Lt;function no(){if(Lt)return Ae;Lt=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,r=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,o=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Ae.format=i,Ae.parse=a;function i(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var y=m.parameters,g=m.type;if(!g||!s.test(g))throw new TypeError("invalid type");var f=g;if(y&&typeof y=="object")for(var E,D=Object.keys(y).sort(),I=0;I<D.length;I++){if(E=D[I],!r.test(E))throw new TypeError("invalid parameter name");f+="; "+E+"="+l(y[E])}return f}function a(m){if(!m)throw new TypeError("argument string is required");var y=typeof m=="object"?c(m):m;if(typeof y!="string")throw new TypeError("argument string is required to be a string");var g=y.indexOf(";"),f=g!==-1?y.slice(0,g).trim():y.trim();if(!s.test(f))throw new TypeError("invalid media type");var E=new h(f.toLowerCase());if(g!==-1){var D,I,R;for(e.lastIndex=g;I=e.exec(y);){if(I.index!==g)throw new TypeError("invalid parameter format");g+=I[0].length,D=I[1].toLowerCase(),R=I[2],R.charCodeAt(0)===34&&(R=R.slice(1,-1),R.indexOf("\\")!==-1&&(R=R.replace(n,"$1"))),E.parameters[D]=R}if(g!==y.length)throw new TypeError("invalid parameter format")}return E}function c(m){var y;if(typeof m.getHeader=="function"?y=m.getHeader("content-type"):typeof m.headers=="object"&&(y=m.headers&&m.headers["content-type"]),typeof y!="string")throw new TypeError("content-type header is missing from object");return y}function l(m){var y=String(m);if(r.test(y))return y;if(y.length>0&&!t.test(y))throw new TypeError("invalid parameter value");return'"'+y.replace(o,"\\$1")+'"'}function h(m){this.parameters=Object.create(null),this.type=m}return Ae}var Er=no();const oo=nr(Er),he={},Ir=(e,t)=>{he[e]=t},so=e=>{const t=e.headers.get("content-type");if(t===null)throw new uo("The media type of the response could not be determined. Make sure the response includes a 'Content-Type' header.",{cause:e});const r=Er.parse(t);for(const n in he)if(co(n,r.type))return he[n].parse(e);throw new mo(r.type,`'${r.type}' is not supported. Use the 'addMediaTypePlugin' function to add support for this media type.`,{cause:e})},io="A-Za-z",Ke=`[!#$%&'*\\-_.^\`|~\\d${io}]+`,ao=`(?<type>${Ke})/(?<subType>${Ke}(?:\\+(?<suffix>${Ke}))?)`,Kt=new RegExp(ao),co=(e,t)=>{var o,s;if(e===t)return!0;const r=(o=Kt.exec(e))==null?void 0:o.groups;if(!r)throw Error(`Unable to parse media-range: ${e}`);const n=(s=Kt.exec(t))==null?void 0:s.groups;if(!n)throw Error(`Unable to parse media-type: ${t}`);return(r.type===n.type||r.type==="*")&&(r.subType===n.subType||r.subType==="*"||r.subType===n.suffix)},po=()=>{let e="";for(const t in he)e=zt(e,t,he[t].quality);return zt(e,"*/*","0.001")},zt=(e,t,r)=>(e.length>0&&(e+=", "),e+=t,r&&(e+=`; q=${r}`),e);class mo extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.mediaType=t}}class uo extends Error{constructor(t=void 0){super(t),this.name=this.constructor.name}}const lo=(e,t=void 0)=>JSON.parse(e,(r,n)=>{const o=n!==null&&typeof n.$ref=="string"?new J(n.$ref):n;return t?t(r,o):o});var $e,ge;class J{constructor(t,r=void 0){Ce(this,$e);Ce(this,ge);Me(this,$e,t),Me(this,ge,r??{$ref:t})}get href(){return qe(this,$e)}toJSON(){return qe(this,ge)}}$e=new WeakMap,ge=new WeakMap;const xr=e=>{const t=typeof e;switch(t){case"bigint":return"number";case"number":case"string":case"boolean":case"undefined":return t;case"object":if(e instanceof J)return"reference";if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)return"object";default:{const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JRef compatible type: ${r}`)}}},ho={parse:async e=>({baseUri:e.url,root:lo(await e.text()),anchorLocation:fo}),fileMatcher:e=>/[^/]\.jref$/.test(e)},fo=e=>decodeURI(e||""),Pe="[a-fA-F0-9]",ce="[a-zA-Z0-9-._~]",q="[!$&'()*+,;=]",H=`%${Pe}${Pe}`,Ee="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",gt=`${Ee}\\.${Ee}\\.${Ee}\\.${Ee}`,b=`${Pe}{1,4}`,G=`(?:${b}:${b}|${gt})`,yo=`(?:(?:${b}:){6}${G}|::(?:${b}:){5}${G}|(?:${b})?::(?:${b}:){4}${G}|(?:(?:${b}:){0,1}${b})?::(?:${b}:){3}${G}|(?:(?:${b}:){0,2}${b})?::(?:${b}:){2}${G}|(?:(?:${b}:){0,3}${b})?::(?:${b}:){1}${G}|(?:(?:${b}:){0,4}${b})?::${G}|(?:(?:${b}:){0,5}${b})?::${b}|(?:(?:${b}:){0,6}${b})?::)`,$o=`v${Pe}+\\.(?:${ce}|${q}|:)+`,Fr=`\\[(?:${yo}|${$o})\\]`,pe="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",Rr=":(?<port>\\d*)",go=`(?:${ce}|${H}|${q})*?`,wo=`(?<host>${Fr}|${gt}|${go})`,jo=`(?<userinfo>(?:${ce}|${H}|${q}|:)*)`,wt=`(?:${ce}|${H}|${q}|:|@)`,Sr=`${wt}*?`,Or=`(?:/${Sr})*`,jt=`(?<authority>(?:${jo}@)?${wo}(?:${Rr})?)`,bt=`(?<path>${Or})`,kt=`(?<path2>(?!//)${Sr}${Or})`,vt=`(?:\\?(?<query>(?:${wt}|/|\\?)*))?`,Pr=`(?:#(?<fragment>(?:${wt}|/|\\?)*))?`,bo=`^${pe}:(?://${jt}${bt}|${kt})${vt}${Pr}$`,ko=`^(?:${pe}:|)(?://${jt}${bt}|${kt})${vt}${Pr}$`,vo=`^${pe}:(?://${jt}${bt}|${kt})${vt}$`,je="[a-zA-Z0-9\\-._~\\u{A0}-\\u{D7FF}\\u{F900}-\\u{FDCF}\\u{FDF0}-\\u{FFEF}\\u{10000}-\\u{1FFFD}\\u{20000}-\\u{2FFFD}\\u{30000}-\\u{3FFFD}\\u{40000}-\\u{4FFFD}\\u{50000}-\\u{5FFFD}\\u{60000}-\\u{6FFFD}\\u{70000}-\\u{7FFFD}\\u{80000}-\\u{8FFFD}\\u{90000}-\\u{9FFFD}\\u{A0000}-\\u{AFFFD}\\u{B0000}-\\u{BFFFD}\\u{C0000}-\\u{CFFFD}\\u{D0000}-\\u{DFFFD}\\u{E1000}-\\u{EFFFD}]",Ao="[\\u{E000}-\\u{F8FF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}]",Eo=`(?:${je}|${H}|${q})*?`,Io=`(?<host>${Fr}|${gt}|${Eo})`,xo=`(?<userinfo>(?:${je}|${H}|${q}|:)*)`,At=`(?:${je}|${H}|${q}|:|@)`,_r=`${At}*?`,Tr=`(?:/${_r})*`,Et=`(?<authority>(?:${xo}@)?${Io}(?:${Rr})?)`,It=`(?<path>${Tr})`,xt=`(?<path2>(?!//)${_r}${Tr})`,Ft=`(?:\\?(?<query>(?:${At}|${Ao}|/|\\?)*))?`,Nr=`(?:#(?<fragment>(?:${At}|/|\\?)*))?`,Dr=`^${pe}:(?://${Et}${It}|${xt})${Ft}${Nr}$`,Ur=`^(?:${pe}:|)(?://${Et}${It}|${xt})${Ft}${Nr}$`,qr=`^${pe}:(?://${Et}${It}|${xt})${Ft}$`,Fo=e=>(t,r)=>{const n=e.parseReference(t);if(n.scheme===void 0){const o=e.parseAbsolute(r);n.scheme=o.scheme,n.authority===void 0&&(n.authority=o.authority,n.path===""?(n.path=o.path,n.query??(n.query=o.query)):n.path.startsWith("/")||(n.path=Ro(n.path,o)))}return Cr(e,n)},Ro=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const r=t.path.lastIndexOf("/");return r===-1?e:t.path.slice(0,r+1)+e}},So=/^\.?\.\/|^\.\.?$/,Oo=/^\/\.(?:\/|$)/,Po=/^\/\.\.(?:\/|$)/,_o=e=>{let t="";for(;e.length>0;)if(So.test(e))e=Bt(e);else if(Oo.test(e))e=Gt(e);else if(Po.test(e))e=Gt(e),t=To(t);else{const r=No(e);e=Bt(e),t+=r}return t},Bt=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},Gt=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},To=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},No=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},Cr=(e,t)=>{let r=t.scheme.toLowerCase()+":";return r+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),r+=e.normalizePath(t.path),r+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),r+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),r},Mr=new RegExp(H,"g"),Vr=e=>t=>{const r=parseInt(t.slice(1),16),n=String.fromCharCode(r);return e(n)?n:t.toUpperCase()};RegExp.prototype.test.bind(new RegExp(`${ce}|${q}|[:@]`));const Do=RegExp.prototype.test.bind(new RegExp(`${je}|${q}|[:@]`,"u")),Uo=e=>t=>_o(t).replaceAll(Mr,Vr(e));RegExp.prototype.test.bind(new RegExp(`${ce}|${q}|[:@/?]`));const Zt=RegExp.prototype.test.bind(new RegExp(`${je}|${q}|[:@/?]`,"u")),Jt=e=>t=>t.replaceAll(Mr,Vr(e));RegExp.prototype.test.bind(new RegExp(bo));RegExp.prototype.test.bind(new RegExp(ko));RegExp.prototype.test.bind(new RegExp(vo));RegExp.prototype.test.bind(new RegExp(Dr,"u"));RegExp.prototype.test.bind(new RegExp(Ur,"u"));RegExp.prototype.test.bind(new RegExp(qr,"u"));const Rt=(e,t)=>r=>{const n=e.exec(r);if(n===null)throw Error(`Invalid ${t}: ${r}`);const o=n.groups;return o.authority===void 0&&(o.path=o.path2),delete o.path2,o},St=Rt(new RegExp(Dr,"u"),"IRI"),qo=Rt(new RegExp(Ur,"u"),"IRI-reference"),Co=Rt(new RegExp(qr,"u"),"absolute-IRI"),Lr={iri:{parseAbsolute:Co,parseReference:qo,parse:St,normalizePath:Uo(Do),normalizeQuery:Jt(Zt),normalizeFragment:Jt(Zt)}},Mo=e=>t=>{const r=e.parse(t);return delete r.fragment,Cr(e,r)},Vo=Mo(Lr.iri),Kr=Fo(Lr.iri),Xe={},zr=(e,t)=>{Xe[e]=t},Lo=(e,t)=>{e=Kr(e,t);const{scheme:r}=St(e);if(!(r in Xe))throw new Ko(r,`The '${r}:' URI scheme is not supported. Use the 'addUriSchemePlugin' function to add support for '${r}:' URIs.`);return Xe[r].retrieve(e,t)};class Ko extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.scheme=t}}const zo=new Set([200,203]),Bo=async e=>{const t=await fetch(e,{headers:{Accept:po()}});if(t.status>=400)throw new Wt(t,`Failed to retrieve '${e}'`);if(!zo.has(t.status))throw new Wt(t,"Unsupported HTTP response status code");return t},Br={retrieve:Bo};class Wt extends Error{constructor(t,r=void 0){super(`${t.status} ${t.statusText}${r?` -- ${r}`:""}`),this.name=this.constructor.name,this.response=t}}var Gr=Go;function Go(e,t){return function r(){t==null&&(t=e.length);var n=[].slice.call(arguments);return n.length>=t?e.apply(this,n):function(){return r.apply(this,n.concat([].slice.call(arguments)))}}}const Zo=()=>{var e,t;return((t=(e=globalThis.document)==null?void 0:e.location)==null?void 0:t.toString())??""},Ot=async(e,t={_cache:{}})=>{var i,a,c;const r=((i=t.document)==null?void 0:i.baseUri)??Zo();e=Kr(e,r);const n=Vo(e),{fragment:o}=St(e),s=t._cache[n]??((c=(a=t.document)==null?void 0:a.embedded)==null?void 0:c[n]);if(s)t.document=s,t.uri=e,t.cursor=t.document.anchorLocation(o);else{try{const l=await Lo(e,r);t.document=await so(l),t.uri=l.url+(o===void 0?"":`#${o}`),t.cursor=t.document.anchorLocation(o)}catch(l){const h=t.uri?` Referenced from '${t.uri}'.`:"";throw new Wo(`Unable to load resource '${e}'.${h}`,l)}t._cache[n]=t.document}return t._value=Qn(t.cursor,t.document.root),Zr(t)},Zr=e=>xr(u(e))==="reference"?Ot(u(e).href,e):e,u=e=>e._value,T=e=>xr(e._value),Jr=(e,t)=>e in t._value,Pt=e=>e._value.length,P=Gr((e,t)=>Zr({...t,cursor:Q(`${e}`,t.cursor),_value:t._value[e]})),L=async function*(e){for(let t=0;t<u(e).length;t++)yield P(t,e)},He=function*(e){for(const t in u(e))yield t},Jo=async function*(e){for(const t in u(e))yield P(t,e)},K=async function*(e){for(const t in u(e))yield[t,await P(t,e)]};class Wo extends Error{constructor(t,r){super(t,{cause:r}),this.name=this.constructor.name}}Ir("application/reference+json",ho);zr("http",Br);zr("https",Br);const Qo={parse:async e=>{const t=oo.parse(e.headers.get("content-type")??""),r=t.parameters.schema??t.parameters.profile;return _e(await e.json(),e.url,r)},fileMatcher:async e=>/(\.|\/)schema\.json$/.test(e)},fe={},Wr=async(e,t=void 0)=>{t||(t={_cache:{}});for(const n in fe)n in t._cache||(t._cache[n]=fe[n]);const r=await Ot(e,{...t});if(typeof r.document.dialectId!="string")throw Error(`The document at ${r.document.baseUri} is not a schema.`);return r},C=(e,t,r)=>{e=structuredClone(e);const n=_e(e,t,r);if(n.baseUri in fe)throw Error(`A schema has already been registered for '${n.baseUri}. You can use 'unregisterSchema' to remove the old schema before registering the new one.`);if(n.baseUri.startsWith("file:"))throw Error(`Registering a schema with a 'file:' URI scheme is not allowed: ${n.baseUri}`);fe[t?W(t):n.baseUri]=n},Xo=e=>e in fe,_e=(e,t,r,n={})=>{if(typeof e.$schema=="string"&&(r=e.$schema,delete e.$schema),!r)throw Error("Unable to determine a dialect for the schema. The dialect can be declared in a number of ways, but the recommended way is to use the '$schema' keyword in your schema.");r=W(r);const o=v(r,"https://json-schema.org/keyword/draft-04/id"),s=v(r,"https://json-schema.org/keyword/id")||o;if(!e[s]&&!t)throw Error(`Unable to determine an identifier for the schema. Use the '${s}' keyword or pass a retrievalUri when loading the schema.`);const i=Qe(e[s]??"",t??"");t=W(i),o&&i.length>t.length?e[s]="#"+br(i):delete e[s];const a=v(r,"https://json-schema.org/keyword/vocabulary");if(jr(e[a])==="object"){const m=e[a]["https://json-schema.org/draft/2019-09/vocab/core"]||e[a]["https://json-schema.org/draft/2020-12/vocab/core"];$t(t,e[a],m,!1),delete e[a]}const c={"":""},l={},h=v(r,"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor");return e[h]===!0&&(l[""]=`${t}#`),delete e[h],n[t]={baseUri:t,dialectId:r,root:Ye(e,t,r,"",n,c,l),anchorLocation:m=>{if(m===void 0)return"";if(m=decodeURI(m),m[0]==="/")return m;if(m in c)return c[m];throw Error(`No such anchor '${t}#${encodeURI(m)}'`)},anchors:c,dynamicAnchors:l,embedded:n},n[t]},Ye=(e,t,r,n,o,s,i)=>{if(jr(e)==="object"){const a=typeof e.$schema=="string"?W(e.$schema):r,c=v(a,"https://json-schema.org/keyword/id");if(typeof e[c]=="string"){const f=W(Qe(e[c],t));return e[c]=f,o[f]=_e(e,f,a,o),new J(f,{})}const l=v(a,"https://json-schema.org/keyword/draft-04/id");if(typeof e[l]=="string")if(e[l][0]==="#"){const f=decodeURIComponent(e[l].slice(1));s[f]=n,delete e[l]}else{const f=W(Qe(e[l],t));return e[l]=f,o[f]=_e(e,f,a,o),new J(f,{})}const h=v(r,"https://json-schema.org/keyword/draft-04/ref");if(typeof e[h]=="string")return new J(e[h],e);const m=v(r,"https://json-schema.org/keyword/anchor");typeof e[m]=="string"&&(s[e[m]]=n,delete e[m]);const y=v(r,"https://json-schema.org/keyword/dynamicAnchor");typeof e[y]=="string"&&(i[e[y]]=`${t}#${encodeURI(n)}`,delete e[y]);const g=v(r,"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor");typeof e[g]=="string"&&(i[e[g]]=`${t}#${encodeURI(n)}`,s[e[g]]=n,delete e[g]);for(const f in e){const E=v(r,"https://json-schema.org/keyword/ref");f===E&&typeof e[f]=="string"?e[f]=new J(e[f],e[f]):e[f]=Ye(e[f],t,r,Q(f,n),o,s,i)}}else if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=Ye(e[a],t,r,Q(a,n),o,s,i);return e},Te=e=>`${e.document.baseUri}#${encodeURI(e.cursor)}`,de=e=>(...t)=>{const r=e.length===1?e(t[0]):e(t[0],t[1]),n=t[e.length];return n===void 0?r:r(n)},Ho=de(e=>function*(t){for(const r of t)yield e(r)}),x=de(e=>async function*(t){for await(const r of t)yield e(r)}),Qr=de(e=>function*(t){let r=0;for(const n of t)r++>=e&&(yield n)}),Yo=e=>{const r=Yr(e).next();return r.done?void 0:r.value},Qt=function*(){},Xr=function*(e,t){const r=Yr(t);for(const n of e)yield[n,r.next().value]},es=function*(...e){for(const t of e)yield*t},Hr=de((e,t)=>r=>{for(const n of r)t=e(t,n);return t}),ts=de(e=>t=>{for(const r of t)if(e(r))return!0;return!1}),_=async e=>{const t=[];for await(const r of e)t.push(r);return t},et=async e=>{const t=Object.create(null);for await(const[r,n]of e)t[r]=n;return t},rs=de(e=>t=>{let r=Yo(t)??"";for(const n of t)r+=e+n;return r}),Yr=e=>{if(typeof(e==null?void 0:e[Symbol.iterator])=="function")return e[Symbol.iterator]();throw TypeError("`iter` is not iterable")},F=(e,...t)=>Hr((r,n)=>n(r),e,t),ne=(e,t="",r="",n=void 0)=>{const o=typeof e;switch(o){case"number":case"string":case"boolean":return le(t,r,e,o,[],n);case"object":if(e===null)return le(t,r,e,"null",[],n);if(Array.isArray(e)){const s=le(t,r,e,"array",[],n);return s.children=e.map((i,a)=>ne(i,t,Q(a,r),s)),s}else if(Object.getPrototypeOf(e)===Object.prototype){const s=le(t,r,e,"object",[],n);return s.children=Object.entries(e).map(i=>{const a=Q(i[0],r),c=le(t,a,void 0,"property",[],s);return c.children[0]=ne(i[0],t,"*"+a,c),c.children[1]=ne(i[1],t,a,c),c}),s}else if(e instanceof J)return ne(e.toJSON(),t,r,n);default:{const s=o==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":o;throw Error(`Not a JSON compatible type: ${s}`)}}},le=(e,t,r,n,o,s)=>{const i={baseUri:e?W(e):"",pointer:t,value:r,type:n,children:o,parent:s,annotations:{}};return i.root=(s==null?void 0:s.root)??i,i},ns=(e,t)=>{const r=yt(e);if(r!==t.baseUri&&r!=="")throw Error(`Reference '${e}' is not local to '${t.baseUri}'`);let n=!1,o=br(e);o.startsWith("*")&&(o=o.slice(1),n=!0);const s=Hr((i,a)=>(a=a==="-"&&$(i)==="array"?De(i):a,os(a,i)),t.root,Se(o));return n?s.parent.children[0]:s},ye=e=>`${e.baseUri}#${encodeURI(e.pointer)}`,A=e=>e.value,$=e=>e.type,se=(e,t)=>e in t.value,os=(e,t)=>{switch(t.type){case"object":{const r=t.children.find(n=>A(n.children[0])===e);return r==null?void 0:r.children[1]}case"array":{const r=parseInt(e,10);return t.children[r]}default:return}},M=function*(e){e.type==="array"&&(yield*e.children)},_t=function*(e){if(e.type==="object")for(const t of e.children)yield t.children[0]},be=function*(e){if(e.type==="object")for(const t of e.children)t.children.length===2&&(yield t.children)},De=e=>{if(e.type==="array")return e.children.length},oe={};let ss=0;const is=(e,t)=>{e in oe||(oe[e]={});const r=`pubsub_subscription_${ss++}`;return oe[e][r]=t,r},as=async(e,t)=>{const r=[];for(const n in oe)if(n===e||e.startsWith(`${n}.`))for(const o in oe[n])r.push(oe[e][o](e,t));await Promise.all(r)};let en;const cs=()=>en,ps=e=>{en=e};class ds extends Error{constructor(t){super("Invalid Schema"),this.name=this.constructor.name,this.output=t}}const ms="https://json-schema.org/evaluation/validate",us=async(e,t)=>{await as("validate.metaValidate",e),e.document.baseUri in t.metaData||(t.metaData[e.document.baseUri]={dynamicAnchors:e.document.dynamicAnchors});const r=Te(e);if(!(r in t)){t[r]=!1;const n=u(e);if(!["object","boolean"].includes(typeof n))throw Error(`No schema found at '${r}'`);t[r]=typeof n=="boolean"?n:await F(K(e),x(async([o,s])=>{const i=ro(o,e.document.dialectId);i.plugin&&t.plugins.add(i.plugin);const a=await i.compile(s,t,e);return[i.id,Q(o,Te(e)),a]}),_)}return r},ls=(e,t,r)=>{var o,s,i,a;let n=!0;for(const c of r.plugins)(o=c.beforeSchema)==null||o.call(c,e,t,r);if(typeof r.ast[e]=="boolean")n=r.ast[e];else for(const c of r.ast[e]){const[l,,h]=c,m=kr(l),y={ast:r.ast,plugins:r.plugins};for(const f of r.plugins)(s=f.beforeKeyword)==null||s.call(f,c,t,y,r,m);const g=m.interpret(h,t,y);g||(n=!1);for(const f of r.plugins)(i=f.afterKeyword)==null||i.call(f,c,t,y,g,r,m)}for(const c of r.plugins)(a=c.afterSchema)==null||a.call(c,e,t,r,n);return n},d={id:ms,compile:us,interpret:ls};class hs{beforeSchema(t,r,n){n.errors??(n.errors=[])}beforeKeyword(t,r,n){n.errors=[]}afterKeyword(t,r,n,o,s,i){if(!o){if(!i.simpleApplicator){const[a,c]=t;s.errors.push({keyword:a,absoluteKeywordLocation:c,instanceLocation:ye(r)})}s.errors.push(...n.errors)}}afterSchema(t,r,n,o){typeof n.ast[t]=="boolean"&&!o&&n.errors.push({keyword:d.id,absoluteKeywordLocation:t,instanceLocation:ye(r)}),this.errors=n.errors}}class fs{beforeSchema(t,r,n){n.errors??(n.errors=[])}beforeKeyword(t,r,n){n.errors=[]}afterKeyword(t,r,n,o,s){if(!o){const[i,a]=t,c={keyword:i,absoluteKeywordLocation:a,instanceLocation:ye(r)};s.errors.push(c),n.errors.length>0&&(c.errors=n.errors)}}afterSchema(t,r,n,o){typeof n.ast[t]=="boolean"&&!o&&n.errors.push({keyword:d.id,absoluteKeywordLocation:t,instanceLocation:ye(r)}),this.errors=n.errors}}const xe="FLAG",tt="BASIC",ys="DETAILED";ps(xe);const tn=async e=>{const t={metaData:{},plugins:new Set},r=await d.compile(e,t);return{ast:t,schemaUri:r}},rn=Gr(({ast:e,schemaUri:t},r,n=xe)=>{const o=typeof n=="string"?n:n.outputFormat??xe,s=n.plugins??[],i={ast:e,plugins:[...e.plugins,...s]};let a;switch(o){case xe:break;case tt:a=new hs,i.plugins.push(a);break;case ys:a=new fs,i.plugins.push(a);break;default:throw Error(`Unsupported output format '${o}'`)}const c=d.interpret(t,r,i);return!c&&a?{valid:c,errors:a.errors}:{valid:c}}),ze={};is("validate.metaValidate",async(e,t)=>{if(!t.document.validated){if(t.document.validated=!0,!(t.document.dialectId in ze)){const o=await Wr(t.document.dialectId,t),s=await tn(o);ze[t.document.dialectId]=rn(s)}const r=ne(t.document.root,t.document.baseUri),n=ze[t.document.dialectId](r,cs());if(!n.valid)throw new ds(n)}});class $s{beforeSchema(t,r,n){n.annotations??(n.annotations=[]),n.schemaAnnotations=[]}beforeKeyword(t,r,n){n.annotations=[]}afterKeyword(t,r,n,o,s,i){var a;if(o){const[c,l,h]=t,m=(a=i.annotation)==null?void 0:a.call(i,h,r,n);m!==void 0&&s.schemaAnnotations.push({keyword:c,absoluteKeywordLocation:l,instanceLocation:ye(r),annotation:m}),s.schemaAnnotations.push(...n.annotations)}}afterSchema(t,r,n,o){o&&n.annotations.push(...n.schemaAnnotations),this.annotations=n.annotations}}const gs="https://json-schema.org/keyword/additionalProperties",ws=async(e,t,r)=>{const n=v(e.document.dialectId,"https://json-schema.org/keyword/properties"),o=await P(n,r),s=T(o)==="object"?Ho(h=>"^"+js(h)+"$",He(o)):Qt(),i=v(e.document.dialectId,"https://json-schema.org/keyword/patternProperties"),a=await P(i,r),c=T(a)==="object"?He(a):Qt(),l=F(es(s,c),rs("|"))||"(?!)";return[new RegExp(l,"u"),await d.compile(e,t)]},js=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),bs=([e,t],r,n)=>{var s;if($(r)!=="object")return!0;let o=!0;for(const[i,a]of be(r)){const c=A(i);e.test(c)||(d.interpret(t,a,n)||(o=!1),(s=n.evaluatedProperties)==null||s.add(c))}return o},ks=!0,vs={id:gs,compile:ws,interpret:bs,simpleApplicator:ks},As="https://json-schema.org/keyword/allOf",Es=(e,t)=>F(L(e),x(r=>d.compile(r,t)),_),Is=(e,t,r,n,o)=>{let s=!0;for(const i of e)d.interpret(i,t,r,n,o)||(s=!1);return s},xs=!0,Fs={id:As,compile:Es,interpret:Is,simpleApplicator:xs},Rs={id:"https://json-schema.org/keyword/anchor"},Ss="https://json-schema.org/keyword/anyOf",Os=(e,t)=>F(L(e),x(r=>d.compile(r,t)),_),Ps=(e,t,r,n,o)=>e.filter(i=>d.interpret(i,t,r,n,o)).length>0,_s={id:Ss,compile:Os,interpret:Ps},Ts="https://json-schema.org/keyword/conditional",Ns=(e,t)=>F(L(e),nn,x(r=>d.compile(r,t)),_),Ds=(e,t,r)=>{for(let n=0;n<e.length;n+=2){const o=d.interpret(e[n],t,r);if(n+1===e.length)return o;if(o)return d.interpret(e[n+1],t,r)}return!0},nn=async function*(e,t=1){for await(const r of e)t>0&&T(r)==="array"?yield*nn(L(r),t-1):yield r},Us={id:Ts,compile:Ns,interpret:Ds};var Be,Xt;function qs(){return Xt||(Xt=1,Be={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify}),Be}var Ge,Ht;function Z(){return Ht||(Ht=1,Ge={isArray:Array.isArray,assign:Object.assign,isObject:e=>typeof e=="object",isFunction:e=>typeof e=="function",isBoolean:e=>typeof e=="boolean",isRegex:e=>e instanceof RegExp,keys:Object.keys}),Ge}var Ze,Yt;function Cs(){if(Yt)return Ze;Yt=1;const e=qs(),t=Z().isFunction,r=Z().isBoolean,n=Z().isObject,o=Z().isArray,s=Z().isRegex,i=Z().assign,a=Z().keys;function c(h){return h==null?h:s(h)?h.toString():h.toJSON?h.toJSON():h}function l(h,m){m=m||i({},e),t(m)&&(m={compare:m});const y=m.space||e.space,g=r(m.cycles)?m.cycles:e.cycles,f=m.replacer||e.replacer,E=m.stringify||e.stringify,D=m.compare&&function(R){return function(Y){return function(ee,w){const O={key:ee,value:Y[ee]},te={key:w,value:Y[w]};return R(O,te)}}}(m.compare);g||E(h);const I=[];return function R(Y,ee,w,O){const te=y?`
`+new Array(O+1).join(y):"",cn=y?": ":":";if(w=c(w),w=f.call(Y,ee,w),w!==void 0){if(!n(w)||w===null)return E(w);if(o(w)){const me=[];for(let z=0;z<w.length;z++){const ue=R(w,z,w[z],O+1)||E(null);me.push(te+y+ue)}return"["+me.join(",")+te+"]"}else{if(g){if(I.indexOf(w)!==-1)return E("[Circular]");I.push(w)}const me=a(w).sort(D&&D(w)),z=[];for(let ue=0;ue<me.length;ue++){const Ue=me[ue],Tt=R(w,Ue,w[Ue],O+1);if(!Tt)continue;const pn=E(Ue)+cn+Tt;z.push(te+y+pn)}return I.splice(I.indexOf(w),1),"{"+z.join(",")+te+"}"}}}({"":h},"",h,0)}return Ze=l,Ze}var Ms=Cs();const ke=nr(Ms),Vs="https://json-schema.org/keyword/const",Ls=e=>ke(u(e)),Ks=(e,t)=>ke(A(t))===e,zs={id:Vs,compile:Ls,interpret:Ks},Bs="https://json-schema.org/keyword/contains",Gs=async(e,t,r)=>{const n=await d.compile(e,t),o=v(e.document.dialectId,"https://json-schema.org/keyword/minContains"),s=await P(o,r),i=T(s)==="number"?u(s):1,a=v(e.document.dialectId,"https://json-schema.org/keyword/maxContains"),c=await P(a,r),l=T(c)==="number"?u(c):Number.MAX_SAFE_INTEGER;return{contains:n,minContains:i,maxContains:l}},Zs=({contains:e,minContains:t,maxContains:r},n,o)=>{var a;if($(n)!=="array")return!0;let s=0,i=0;for(const c of M(n))d.interpret(e,c,o)&&(s++,(a=o.evaluatedItems)==null||a.add(i)),i++;return s>=t&&s<=r},Js={id:Bs,compile:Gs,interpret:Zs},Ws="https://json-schema.org/keyword/comment",Qs=()=>{},Xs=()=>!0,Hs={id:Ws,compile:Qs,interpret:Xs},Ys="https://json-schema.org/keyword/contentEncoding",ei=e=>u(e),ti=()=>!0,ri=(e,t)=>{if($(t)==="string")return e},ni={id:Ys,compile:ei,interpret:ti,annotation:ri},oi="https://json-schema.org/keyword/contentMediaType",si=e=>u(e),ii=()=>!0,ai=(e,t)=>{if($(t)==="string")return e},ci={id:oi,compile:si,interpret:ii,annotation:ai},pi="https://json-schema.org/keyword/contentSchema",di=async(e,t,r)=>{const n=v(e.document.dialectId,"https://json-schema.org/keyword/contentMediaType"),o=await P(n,r);if(u(o)!==void 0)return u(e)},mi=()=>!0,ui=(e,t)=>{if(!(!e||$(t)!=="string"))return e},li={id:pi,compile:di,interpret:mi,annotation:ui},hi="https://json-schema.org/keyword/default",fi=e=>u(e),yi=()=>!0,$i=e=>e,gi={id:hi,compile:fi,interpret:yi,annotation:$i},wi="https://json-schema.org/keyword/definitions",ji=(e,t)=>F(Jo(e),x(r=>d.compile(r,t)),_),bi=()=>!0,ki={id:wi,compile:ji,interpret:bi},vi="https://json-schema.org/keyword/dependentRequired",Ai=e=>F(K(e),x(([t,r])=>[t,u(r)]),_),Ei=(e,t)=>{if($(t)!=="object")return!0;let r=!0;for(const[n,o]of e)se(n,t)&&!o.every(s=>se(s,t))&&(r=!1);return r},Ii={id:vi,compile:Ai,interpret:Ei},xi="https://json-schema.org/keyword/dependentSchemas",Fi=(e,t)=>F(K(e),x(async([r,n])=>[r,await d.compile(n,t)]),_),Ri=(e,t,r)=>{if($(t)!=="object")return!0;let n=!0;for(const[o,s]of e)se(o,t)&&!d.interpret(s,t,r)&&(n=!1);return n},Si=!0,Oi={id:xi,compile:Fi,interpret:Ri,simpleApplicator:Si},Pi="https://json-schema.org/keyword/deprecated",_i=e=>u(e),Ti=()=>!0,Ni=e=>e,Di={id:Pi,compile:_i,interpret:Ti,annotation:Ni},Ui="https://json-schema.org/keyword/description",qi=e=>u(e),Ci=()=>!0,Mi=e=>e,Vi={id:Ui,compile:qi,interpret:Ci,annotation:Mi},Li={id:"https://json-schema.org/keyword/dynamicAnchor"},Ki="https://json-schema.org/keyword/dynamicRef",zi=async(e,t)=>{const r=u(e),n=await Ot(e.document.baseUri,e);return await d.compile(n,t),r},Bi=(e,t,r)=>{if(!(e in r.dynamicAnchors))throw Error(`No dynamic anchor found for "${e}"`);return d.interpret(r.dynamicAnchors[e],t,r)},Gi=!0,Zi={beforeSchema(e,t,r){r.dynamicAnchors={...r.ast.metaData[yt(e)].dynamicAnchors,...r.dynamicAnchors}},beforeKeyword(e,t,r,n){r.dynamicAnchors=n.dynamicAnchors}},Ji={id:Ki,compile:zi,interpret:Bi,simpleApplicator:Gi,plugin:Zi},Wi="https://json-schema.org/keyword/else",Qi=async(e,t,r)=>{const n=v(e.document.dialectId,"https://json-schema.org/keyword/if");if(Jr(n,r)){const o=await P(n,r);return[await d.compile(o,t),await d.compile(e,t)]}else return[]},Xi=([e,t],r,n)=>e===void 0||d.interpret(e,r,{...n,plugins:n.ast.plugins})||d.interpret(t,r,n),Hi=!0,Yi={id:Wi,compile:Qi,interpret:Xi,simpleApplicator:Hi},ea="https://json-schema.org/keyword/enum",ta=e=>F(L(e),x(u),x(ke),_),ra=(e,t)=>{const r=ke(A(t));return e.some(n=>r===n)},na={id:ea,compile:ta,interpret:ra},oa="https://json-schema.org/keyword/examples",sa=e=>u(e),ia=()=>!0,aa=e=>e,ca={id:oa,compile:sa,interpret:ia,annotation:aa},pa="https://json-schema.org/keyword/exclusiveMaximum",da=e=>u(e),ma=(e,t)=>$(t)!=="number"||A(t)<e,ua={id:pa,compile:da,interpret:ma},la="https://json-schema.org/keyword/exclusiveMinimum",ha=e=>u(e),fa=(e,t)=>$(t)!=="number"||A(t)>e,ya={id:la,compile:ha,interpret:fa},$a="https://json-schema.org/keyword/format",ga=e=>u(e),wa=()=>!0,ja=e=>e,ba={id:$a,compile:ga,interpret:wa,annotation:ja},ka={id:"https://json-schema.org/keyword/id"},va="https://json-schema.org/keyword/if",Aa=(e,t)=>d.compile(e,t),Ea=(e,t,r)=>(d.interpret(e,t,r),!0),Ia=!0,xa={id:va,compile:Aa,interpret:Ea,simpleApplicator:Ia},Fa=()=>{const e=N(!1),t=N(!0);return S(e,t),{start:e,end:t}},Ra=e=>{const t=N(!1),r=N(!0);return Na(t,r,e),{start:t,end:r}},Sa=(e,t)=>e===void 0?t:(S(e.end,t.start),e.end.isEnd=!1,{start:e.start,end:t.end}),Oa=(e,t)=>{const r=N(!1);S(r,e.start),S(r,t.start);const n=N(!0);return S(e.end,n),e.end.isEnd=!1,S(t.end,n),t.end.isEnd=!1,{start:r,end:n}},Pa=e=>{const t=N(!1),r=N(!0);return S(t,r),S(t,e.start),S(e.end,r),S(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},_a=e=>{const t=N(!1),r=N(!0);return S(t,r),S(t,e.start),S(e.end,r),e.end.isEnd=!1,{start:t,end:r}},Ta=e=>{const t=N(!1),r=N(!0);return S(t,e.start),S(e.end,r),S(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},S=(e,t)=>{e.epsilonTransitions.push(t)},Na=(e,t,r)=>{e.transition[r]=t},N=e=>({isEnd:e,transition:{},epsilonTransitions:[]}),Da="https://json-schema.org/keyword/itemPattern",on=async(e,t)=>{const r=[[]];let n=r[0];for await(const o of L(e))if(T(o)==="string"){const s=u(o);if(s==="*")n.push(Pa(n.pop()));else if(s==="?")n.push(_a(n.pop()));else if(s==="+")n.push(Ta(n.pop()));else if(s==="|")n=[],r.push(n);else throw Error(`Unsupported pattern syntax: ${s}`)}else{const s=T(o)==="array"?on(o,t):Ra(await d.compile(o,t));n.push(await s)}return Pt(e)===0?Fa():r.map(o=>o.reduce(Sa)).reduce(Oa)},Ua=(e,t,r)=>{if($(t)!=="array")return!0;let n=[];rt(e.start,n,[]);for(const o of M(t)){const s=[];for(const i of n){const a=qa(i.transition,o,r);a&&rt(a,s,[])}n=s}return!!n.find(o=>o.isEnd)},rt=(e,t,r)=>{if(e.epsilonTransitions.length)for(const n of e.epsilonTransitions)r.find(o=>o===n)||(r.push(n),rt(n,t,r));else t.push(e)},qa=(e,t,r)=>{for(const n in e)if(d.interpret(n,t,r))return e[n]},Ca={id:Da,compile:on,interpret:Ua},Ma="https://json-schema.org/keyword/items",Va=async(e,t,r)=>{const n=v(e.document.dialectId,"https://json-schema.org/keyword/prefixItems"),o=await P(n,r);return[T(o)==="array"?Pt(o):0,await d.compile(e,t)]},La=([e,t],r,n)=>{var i;if($(r)!=="array")return!0;let o=!0,s=e;for(const a of Qr(e,M(r)))d.interpret(t,a,n)||(o=!1),(i=n.evaluatedItems)==null||i.add(s),s++;return o},Ka=!0,za={id:Ma,compile:Va,interpret:La,simpleApplicator:Ka},Ba="https://json-schema.org/keyword/maxContains",Ga=e=>u(e),Za=()=>!0,Ja={id:Ba,compile:Ga,interpret:Za},Wa="https://json-schema.org/keyword/maxItems",Qa=e=>u(e),Xa=(e,t)=>$(t)!=="array"||De(t)<=e,Ha={id:Wa,compile:Qa,interpret:Xa},Ya="https://json-schema.org/keyword/maxLength",ec=e=>u(e),tc=(e,t)=>$(t)!=="string"||[...A(t)].length<=e,rc={id:Ya,compile:ec,interpret:tc},nc="https://json-schema.org/keyword/maxProperties",oc=e=>u(e),sc=(e,t)=>$(t)!=="object"||[..._t(t)].length<=e,ic={id:nc,compile:oc,interpret:sc},ac="https://json-schema.org/keyword/maximum",cc=e=>u(e),pc=(e,t)=>$(t)!=="number"||A(t)<=e,dc={id:ac,compile:cc,interpret:pc},mc="https://json-schema.org/keyword/minContains",uc=e=>u(e),lc=()=>!0,hc={id:mc,compile:uc,interpret:lc},fc="https://json-schema.org/keyword/minItems",yc=e=>u(e),$c=(e,t)=>$(t)!=="array"||De(t)>=e,gc={id:fc,compile:yc,interpret:$c},wc="https://json-schema.org/keyword/minLength",jc=e=>u(e),bc=(e,t)=>$(t)!=="string"||[...A(t)].length>=e,kc={id:wc,compile:jc,interpret:bc},vc="https://json-schema.org/keyword/minProperties",Ac=e=>u(e),Ec=(e,t)=>$(t)!=="object"||[..._t(t)].length>=e,Ic={id:vc,compile:Ac,interpret:Ec},xc="https://json-schema.org/keyword/minimum",Fc=e=>u(e),Rc=(e,t)=>$(t)!=="number"||A(t)>=e,Sc={id:xc,compile:Fc,interpret:Rc},Oc="https://json-schema.org/keyword/multipleOf",Pc=e=>u(e),_c=(e,t)=>{if($(t)!=="number")return!0;const r=A(t)%e;return er(0,r)||er(e,r)},er=(e,t)=>Math.abs(e-t)<11920929e-14,Tc={id:Oc,compile:Pc,interpret:_c},Nc="https://json-schema.org/keyword/not",Dc=(...e)=>d.compile(...e),Uc=(...e)=>!d.interpret(...e),qc={id:Nc,compile:Dc,interpret:Uc},Cc="https://json-schema.org/keyword/oneOf",Mc=(e,t)=>F(L(e),x(r=>d.compile(r,t)),_),Vc=(e,t,r)=>{let n=0;for(const o of e)d.interpret(o,t,r)&&n++;return n===1},Lc={id:Cc,compile:Mc,interpret:Vc},Kc="https://json-schema.org/keyword/pattern",zc=e=>new RegExp(u(e),"u"),Bc=(e,t)=>$(t)!=="string"||e.test(A(t)),Gc={id:Kc,compile:zc,interpret:Bc},Zc="https://json-schema.org/keyword/patternProperties",Jc=(e,t)=>F(K(e),x(async([r,n])=>[new RegExp(r,"u"),await d.compile(n,t)]),_),Wc=(e,t,r)=>{var o;if($(t)!=="object")return!0;let n=!0;for(const[s,i]of e)for(const[a,c]of be(t)){const l=A(a);s.test(l)&&(d.interpret(i,c,r)||(n=!1),(o=r.evaluatedProperties)==null||o.add(l))}return n},Qc=!0,Xc={id:Zc,compile:Jc,interpret:Wc,simpleApplicator:Qc},Hc="https://json-schema.org/keyword/prefixItems",Yc=(e,t)=>F(L(e),x(r=>d.compile(r,t)),_),ep=(e,t,r)=>{var i;if($(t)!=="array")return!0;let n=!0,o=0;const s=De(t);for(const[a,c]of Xr(e,M(t))){if(o>=s)break;d.interpret(a,c,r)||(n=!1),(i=r.evaluatedItems)==null||i.add(o),o++}return n},tp=!0,rp={id:Hc,compile:Yc,interpret:ep,simpleApplicator:tp},np="https://json-schema.org/keyword/properties",op=(e,t)=>F(K(e),x(async([r,n])=>[r,await d.compile(n,t)]),et),sp=(e,t,r)=>{var o;if($(t)!=="object")return!0;let n=!0;for(const[s,i]of be(t)){const a=A(s);a in e&&(d.interpret(e[a],i,r)||(n=!1),(o=r.evaluatedProperties)==null||o.add(a))}return n},ip=!0,ap={id:np,compile:op,interpret:sp,simpleApplicator:ip},cp="https://json-schema.org/keyword/propertyDependencies",pp=(e,t)=>F(K(e),x(async([r,n])=>[r,await F(K(n),x(async([o,s])=>[o,await d.compile(s,t)]),et)]),et),dp=(e,t,r)=>{if($(t)!=="object")return!0;let n=!0;const o=A(t);for(const[s,i]of Object.entries(e)){const a=o[s];se(s,t)&&a in i&&!d.interpret(i[a],t,r)&&(n=!1)}return n},mp=!0,up={id:cp,compile:pp,interpret:dp,simpleApplicator:mp},lp="https://json-schema.org/keyword/propertyNames",hp=(e,t)=>d.compile(e,t),fp=(e,t,r)=>{if($(t)!=="object")return!0;let n=!0;for(const o of _t(t))d.interpret(e,o,r)||(n=!1);return n},yp=!0,$p={id:lp,compile:hp,interpret:fp,simpleApplicator:yp},gp="https://json-schema.org/keyword/readOnly",wp=e=>u(e),jp=()=>!0,bp=e=>e,kp={id:gp,compile:wp,interpret:jp,annotation:bp},vp="https://json-schema.org/keyword/ref",Ap=(...e)=>d.compile(...e),Ep=(...e)=>d.interpret(...e),Ip=!0,xp={id:vp,compile:Ap,interpret:Ep,simpleApplicator:Ip},Fp="https://json-schema.org/keyword/requireAllExcept",Rp=async(e,t,r)=>{const n=await u(e),o=v(e.document.dialectId,"https://json-schema.org/keyword/properties"),s=await P(o,r),i=T(s)==="object"?He(s):[],a=new Set(i);return n.forEach(c=>i.remove(c)),[...a]},Sp=(e,t)=>$(t)!=="object"||e.every(r=>Object.hasOwn(A(t),r)),Op={id:Fp,compile:Rp,interpret:Sp},Pp="https://json-schema.org/keyword/required",_p=e=>u(e),Tp=(e,t)=>$(t)!=="object"||e.every(r=>Object.hasOwn(A(t),r)),Np={id:Pp,compile:_p,interpret:Tp},Dp="https://json-schema.org/keyword/title",Up=e=>u(e),qp=()=>!0,Cp=e=>e,Mp={id:Dp,compile:Up,interpret:qp,annotation:Cp},Vp="https://json-schema.org/keyword/then",Lp=async(e,t,r)=>{const n=v(e.document.dialectId,"https://json-schema.org/keyword/if");if(Jr(n,r)){const o=await P(n,r);return[await d.compile(o,t),await d.compile(e,t)]}else return[]},Kp=([e,t],r,n)=>e===void 0||!d.interpret(e,r,{...n,plugins:n.ast.plugins})||d.interpret(t,r,n),zp=!0,Bp={id:Vp,compile:Lp,interpret:Kp,simpleApplicator:zp},Gp="https://json-schema.org/keyword/type",Zp=e=>u(e),Jp=(e,t)=>typeof e=="string"?tr(t)(e):e.some(tr(t)),tr=e=>t=>t==="integer"?$(e)==="number"&&Number.isInteger(A(e)):$(e)===t,Wp={id:Gp,compile:Zp,interpret:Jp},Qp="https://json-schema.org/keyword/unevaluatedItems",Xp=async(e,t,r)=>[Te(r),await d.compile(e,t)],Hp=([e,t],r,n)=>{var c;if($(r)!=="array"||n.rootSchema===e)return!0;const o=new ed(e);d.interpret(e,r,{...n,plugins:[...n.ast.plugins,o]});const s=o.evaluatedItems;let i=!0,a=0;for(const l of M(r))s.has(a)||(d.interpret(t,l,n)||(i=!1),(c=n.evaluatedItems)==null||c.add(a)),a++;return i},Yp=!0;class ed{constructor(t){this.rootSchema=t}beforeSchema(t,r,n){n.evaluatedItems??(n.evaluatedItems=new Set),n.schemaEvaluatedItems??(n.schemaEvaluatedItems=new Set)}beforeKeyword(t,r,n){n.rootSchema=this.rootSchema,n.evaluatedItems=new Set}afterKeyword(t,r,n,o,s){if(o)for(const i of n.evaluatedItems)s.schemaEvaluatedItems.add(i)}afterSchema(t,r,n,o){if(o)for(const s of n.schemaEvaluatedItems)n.evaluatedItems.add(s);this.evaluatedItems=n.evaluatedItems}}const td={id:Qp,compile:Xp,interpret:Hp,simpleApplicator:Yp},rd="https://json-schema.org/keyword/unevaluatedProperties",nd=async(e,t,r)=>[Te(r),await d.compile(e,t)],od=([e,t],r,n)=>{var a;if($(r)!=="object"||n.rootSchema===e)return!0;const o=new id(e);d.interpret(e,r,{...n,plugins:[...n.ast.plugins,o]});const s=o.evaluatedProperties;let i=!0;for(const[c,l]of be(r)){const h=A(c);s.has(h)||(d.interpret(t,l,n)||(i=!1),(a=n.evaluatedProperties)==null||a.add(h))}return i},sd=!0;class id{constructor(t){this.rootSchema=t}beforeSchema(t,r,n){n.evaluatedProperties??(n.evaluatedProperties=new Set),n.schemaEvaluatedProperties??(n.schemaEvaluatedProperties=new Set)}beforeKeyword(t,r,n){n.rootSchema=this.rootSchema,n.evaluatedProperties=new Set}afterKeyword(t,r,n,o,s){if(o)for(const i of n.evaluatedProperties)s.schemaEvaluatedProperties.add(i)}afterSchema(t,r,n,o){if(o)for(const s of n.schemaEvaluatedProperties)n.evaluatedProperties.add(s);this.evaluatedProperties=n.evaluatedProperties}}const ad={id:rd,compile:nd,interpret:od,simpleApplicator:sd},cd="https://json-schema.org/keyword/uniqueItems",pd=e=>u(e),dd=(e,t)=>{if($(t)!=="array"||e===!1)return!0;const r=A(t).map(ke);return new Set(r).size===r.length},md={id:cd,compile:pd,interpret:dd},ud="https://json-schema.org/keyword/unknown",ld=e=>[[...Se(e.cursor)].pop(),u(e)],hd=()=>!0,fd=([,e])=>e,yd={id:ud,compile:ld,interpret:hd,annotation:fd},$d={id:"https://json-schema.org/keyword/vocabulary"},gd="https://json-schema.org/keyword/writeOnly",wd=e=>u(e),jd=()=>!0,bd=e=>e,kd={id:gd,compile:wd,interpret:jd,annotation:bd};Ir("application/schema+json",Qo);p(vs);p(Fs);p(Rs);p(_s);p(Us);p(zs);p(Js);p(Hs);p(ni);p(ci);p(li);p(gi);p(ki);p(Ii);p(Oi);p(Di);p(Vi);p(Li);p(Ji);p(Yi);p(na);p(ca);p(ua);p(ya);p(ba);p(ka);p(xa);p(Ca);p(za);p(Ja);p(Ha);p(rc);p(ic);p(dc);p(hc);p(gc);p(kc);p(Ic);p(Sc);p(Tc);p(qc);p(Lc);p(Gc);p(Xc);p(rp);p(ap);p(up);p($p);p(kp);p(xp);p(Op);p(Np);p(Mp);p(Bp);p(Wp);p(td);p(ad);p(md);p(yd);p($d);p(kd);const vd={$schema:"https://json-schema.org/validation",$vocabulary:{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/unevaluated":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0},title:"Core and Validation specifications meta-schema",$dynamicAnchor:"meta",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}]},Ad={$schema:"https://json-schema.org/validation",title:"Core vocabulary meta-schema",$dynamicAnchor:"meta",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{$ref:"#/$defs/anchor"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{$ref:"#/$defs/anchor"},$dynamicAnchor:{$ref:"#/$defs/anchor"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},$defs:{anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"}}},Ed={$schema:"https://json-schema.org/validation",title:"Applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"meta"},contains:{$dynamicRef:"meta"},itemPattern:{$ref:"#/$defs/itemPattern"},additionalProperties:{$dynamicRef:"meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"meta"}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"},propertyNames:{format:"regex"}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"meta"}},propertyDependencies:{type:"object",additionalProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},propertyNames:{$dynamicRef:"meta"},if:{$dynamicRef:"meta"},then:{$dynamicRef:"meta"},else:{$dynamicRef:"meta"},conditional:{type:"array",items:{if:{type:"array"},then:{items:{$dynamicRef:"meta"}},else:{$dynamicRef:"meta"}}},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"meta"}},itemPattern:{type:"array",itemPattern:[[{if:{type:"array"},then:{$ref:"#/$defs/itemPattern"},else:{$dynamicRef:"meta"}},{enum:["?","*","+"]},"?","|",{const:"|"}],"*"]}}},Id={$schema:"https://json-schema.org/validation",title:"Validation vocabulary meta-schema",$dynamicAnchor:"meta",properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeInteger"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeInteger"},uniqueItems:{type:"boolean"},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger"},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeInteger"},required:{$ref:"#/$defs/stringArray"},optional:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0}}},xd={$schema:"https://json-schema.org/validation",title:"Meta-data vocabulary meta-schema",$dynamicAnchor:"meta",properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean"},readOnly:{type:"boolean"},writeOnly:{type:"boolean"},examples:{type:"array"}}},Fd={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for annotation results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},Rd={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for assertion results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},Sd={$schema:"https://json-schema.org/validation",title:"Content vocabulary meta-schema",$dynamicAnchor:"meta",properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"meta"}}},Od={$schema:"https://json-schema.org/validation",title:"Unevaluated applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{unevaluatedItems:{$dynamicRef:"meta"},unevaluatedProperties:{$dynamicRef:"meta"}}};V("https://json-schema.org/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});V("https://json-schema.org/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",minContains:"https://json-schema.org/keyword/minContains",maxContains:"https://json-schema.org/keyword/maxContains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",conditional:"https://json-schema.org/keyword/conditional",items:"https://json-schema.org/keyword/items",itemPattern:"https://json-schema.org/keyword/itemPattern",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyDependencies:"https://json-schema.org/keyword/propertyDependencies",propertyNames:"https://json-schema.org/keyword/propertyNames"});V("https://json-schema.org/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",requireAllExcept:"https://json-schema.org/keyword/requireAllExcept",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});V("https://json-schema.org/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});V("https://json-schema.org/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});V("https://json-schema.org/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});V("https://json-schema.org/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});V("https://json-schema.org/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});const sn="https://json-schema.org/validation";$t(sn,{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0,"https://json-schema.org/vocab/unevaluated":!0});C(vd,sn);C(Ad,"https://json-schema.org/meta/core");C(Ed,"https://json-schema.org/meta/applicator");C(Id,"https://json-schema.org/meta/validation");C(xd,"https://json-schema.org/meta/meta-data");C(Fd,"https://json-schema.org/meta/format-annotation");C(Rd,"https://json-schema.org/meta/format-assertion");C(Sd,"https://json-schema.org/meta/content");C(Od,"https://json-schema.org/meta/unevaluated");const Pd={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},_d="https://json-schema.org/keyword/draft-04/additionalItems",Td=async(e,t,r)=>{const n=v(e.document.dialectId,"https://json-schema.org/keyword/draft-04/items"),o=await P(n,r);return[T(o)==="array"?Pt(o):Number.MAX_SAFE_INTEGER,await d.compile(e,t)]},Nd=([e,t],r,n)=>{var i;if($(r)!=="array")return!0;let o=!0,s=e;for(const a of Qr(e,M(r)))d.interpret(t,a,n)||(o=!1),(i=n.evaluatedItems)==null||i.add(s),s++;return o},Dd=!0,Ud={id:_d,compile:Td,interpret:Nd,simpleApplicator:Dd},qd="https://json-schema.org/keyword/draft-06/contains",Cd=(e,t)=>d.compile(e,t),Md=(e,t,r)=>$(t)!=="array"||ts(n=>d.interpret(e,n,r),M(t)),Vd={id:qd,compile:Cd,interpret:Md},Ld="https://json-schema.org/keyword/draft-04/dependencies",Kd=(e,t)=>F(K(e),x(async([r,n])=>[r,T(n)==="array"?u(n):await d.compile(n,t)]),_),zd=(e,t,r)=>$(t)!=="object"?!0:e.every(([n,o])=>se(n,t)?Array.isArray(o)?o.every(s=>se(s,t)):d.interpret(o,t,r):!0),Bd={id:Ld,compile:Kd,interpret:zd},Gd="https://json-schema.org/keyword/draft-04/items",Zd=(e,t)=>T(e)==="array"?F(L(e),x(r=>d.compile(r,t)),_):d.compile(e,t),Jd=(e,t,r)=>{var s,i;if($(t)!=="array")return!0;let n=!0,o=0;if(typeof e=="string")for(const a of M(t))d.interpret(e,a,r)||(n=!1),(s=r.evaluatedItems)==null||s.add(o++);else for(const[a,c]of Xr(e,M(t))){if(!c)break;d.interpret(a,c,r)||(n=!1),(i=r.evaluatedItems)==null||i.add(o),o++}return n},Wd=!0,Qd={id:Gd,compile:Zd,interpret:Jd,simpleApplicator:Wd},Xd={id:"https://json-schema.org/keyword/draft-04/id"},Hd={id:"https://json-schema.org/keyword/draft-04/ref"};p(Ud);p(Vd);p(Bd);p(Xd);p(Qd);p(Hd);const nt="http://json-schema.org/draft-07/schema";V(nt,{$id:"https://json-schema.org/keyword/draft-04/id",$ref:"https://json-schema.org/keyword/draft-04/ref",$comment:"https://json-schema.org/keyword/comment",additionalItems:"https://json-schema.org/keyword/draft-04/additionalItems",additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",const:"https://json-schema.org/keyword/const",contains:"https://json-schema.org/keyword/draft-06/contains",contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",default:"https://json-schema.org/keyword/default",definitions:"https://json-schema.org/keyword/definitions",dependencies:"https://json-schema.org/keyword/draft-04/dependencies",description:"https://json-schema.org/keyword/description",enum:"https://json-schema.org/keyword/enum",examples:"https://json-schema.org/keyword/examples",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",format:"https://json-schema.org/keyword/format",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/draft-04/items",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",pattern:"https://json-schema.org/keyword/pattern",patternProperties:"https://json-schema.org/keyword/patternProperties",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames",readOnly:"https://json-schema.org/keyword/readOnly",required:"https://json-schema.org/keyword/required",title:"https://json-schema.org/keyword/title",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems",writeOnly:"https://json-schema.org/keyword/writeOnly"});$t(nt,{[nt]:!0},!0);C(Pd);const Yd="https://json-schema.org/validation",em=(e,t,r=Yd)=>{const n=vr(t,r);return e.annotations[n]??[]};class tm extends Error{constructor(t){super("Validation Error"),this.name=this.constructor.name,this.output=t}}const rm=async(e,t=void 0,r=void 0)=>{const n=await Wr(e),o=await tn(n),s=(i,a)=>nm(o,ne(i),a);return t===void 0?s:s(t,r)},nm=(e,t,r=tt)=>{const n=new $s,o=r.plugins??[],s=rn(e,t,{outputFormat:typeof r=="string"?r:r.outputFormat??tt,plugins:[n,...o]});if(!s.valid)throw new tm(s);for(const i of n.annotations){const a=ns(i.instanceLocation,t),c=i.keyword;a.annotations[c]||(a.annotations[c]=[]),a.annotations[c].unshift(i.annotation)}return t};function an(e,t,r){if(t){for(const[n,o]of be(t))if(A(n)===e)return em(o,r)[0]}}function om(e,t){if(t){const r=an(e,t,"title");if(r)return r}return e}function sm(e,t){if(t)return an(e,t,"description")}function im(e){const[t,r]=Fe.useState(!1);return Fe.useEffect(()=>{if(e&&e.$id)if(Xo(e.$id))r(!0);else try{C(e),r(!0)}catch(n){console.error("Unable to register JSON Schema in @hyperjump/json-schema:",n)}},[e]),t}function am(e,t){const r=im(t);return un({queryKey:["getAnnotatedInstance",{json:e,schema:t,schemaIsRegistered:r}],queryFn:()=>{if(e&&t&&r)try{return rm(t.$id,e)}catch(n){console.error("Could not create annotated schema instance:",n)}return null},enabled:!!(t&&e)})}function Ne(e){return typeof e=="number"||typeof e=="boolean"?e.toString():vn(e)?$n(Je(e)):e}function rr(e){const{entityId:t,versionNumber:r}=e,[n,o]=Fe.useState(!1),{data:s,isLoading:i,refetch:a}=gn(t,r,!0),c=s==null?void 0:s.entityMetadata,l=s==null?void 0:s.annotations,{data:h,isLoading:m}=wn(t),{data:y,isLoading:g}=jn(h==null?void 0:h.jsonSchemaVersionInfo.$id,{enabled:!!h}),{data:f,isLoading:E}=am(s==null?void 0:s.entity,y),{data:D,refetch:I}=bn(t,{enabled:!!h}),R=!!h,Y=!!c&&!!D&&Je(c.modifiedOn).diff(Je(D.validatedOn))>0,ee=Fe.useCallback(async()=>{o(!0);const O=[void a(),void I()];await Promise.allSettled(O),o(!1)},[a,I]);return i||m||g||E||n?k.jsx(kn,{numRows:3,numCols:2}):k.jsxs(k.Fragment,{children:[c&&l&&ln(l)?k.jsxs("div",{className:"placeholder",children:["This"," ",Ve(Le(c.concreteType))," ","has no annotations."]}):null,k.jsx("table",{className:"AnnotationsTable",children:k.jsxs("tbody",{children:[l&&Object.keys(l).map(O=>k.jsxs("tr",{className:"AnnotationsTable__Row",children:[k.jsx("td",{className:"AnnotationsTable__Row__Key",children:k.jsx(We,{annotationKey:O,title:om(O,f),description:sm(O,f)})}),k.jsx("td",{className:"AnnotationsTable__Row__Value",children:Array.isArray(l[O])?l[O].map(Ne).join(", "):Ne(l[O])})]},O)),R?k.jsxs("tr",{className:"AnnotationsTable__Row",children:[k.jsx("td",{className:"AnnotationsTable__Row__Key Schema",children:"Validation Schema"}),k.jsx("td",{className:"AnnotationsTable__Row__Value",children:k.jsx("a",{href:`${hn(fn.REPO_ENDPOINT)}/repo/v1/schema/type/registered/${h.jsonSchemaVersionInfo.$id}`,target:"_blank",rel:"noopener noreferrer",children:h.jsonSchemaVersionInfo.schemaName})})]}):null]})}),c&&R&&Y&&k.jsx(yn,{variant:"warning",description:`This ${Ve(Le(c.concreteType))} has changed since it has been last validated. If this ${Ve(Le(c.concreteType))} is expected to have annotations derived from the Validation Schema, they may not yet be visible.`,primaryButtonConfig:{text:"Reload Annotations",onClick:()=>{ee()}},isGlobal:!1})]})}try{Ne.displayName="getDisplayedAnnotation",Ne.__docgenInfo={description:"",displayName:"getDisplayedAnnotation",props:{}}}catch{}try{rr.displayName="AnnotationsTable",rr.__docgenInfo={description:"",displayName:"AnnotationsTable",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}export{rr as A,Ne as g};
