var ht=e=>{throw TypeError(e)};var ft=(e,t,r)=>t.has(e)||ht("Cannot "+r);var Pe=(e,t,r)=>(ft(e,t,"read from private field"),r?r.call(e):t.get(e)),Re=(e,t,r)=>t.has(e)?ht("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_e=(e,t,r,n)=>(ft(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{j as k,b$ as br,V as vr,am as Ar,r as ke,dG as Ve,d4 as Ir,di as Te,d0 as Ne,ct as Er,cu as Sr,ay as Or,dH as xr}from"./iframe-k9YwU_Xc.js";import{k as Pr}from"./useEntity-DLxNvIyy.js";import{u as Rr,b as _r,a as Tr}from"./useSchema-CGMKM3_8.js";import{g as _t}from"./index-r8ZA1smB.js";import"./SkeletonButton-BEjusTzn.js";import"./SkeletonInlineBlock-Cb_-AWMb.js";import{S as Nr}from"./SkeletonTable-aVeOh9ct.js";import"./SkeletonParagraph-Btg7J19e.js";function Ce(e){const{annotationKey:t,title:r,description:n}=e;return r==t&&!n?t:k.jsx(br,{placement:"left",title:k.jsxs(k.Fragment,{children:[r!=t&&k.jsx("p",{children:k.jsxs("strong",{children:["Annotation Key: ",t]})}),k.jsx("p",{children:n})]}),children:k.jsx(vr,{component:"span",sx:o=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:"15%",textDecorationColor:o.palette.secondary.main,textUnderlineOffset:"4px",cursor:"pointer"}),children:r})})}try{Ce.displayName="EntityAnnotationKey",Ce.__docgenInfo={description:"A component used to display an Entity annotation key.",displayName:"EntityAnnotationKey",props:{annotationKey:{defaultValue:null,description:"The key of the annotation",name:"annotationKey",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"An optional title of the annotation",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"An optional",name:"description",required:!1,type:{name:"string"}}}}}catch{}function Fr(e){if(!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return!1;const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e}const be="[a-fA-F0-9]",re="[a-zA-Z0-9-._~]",D="[!$&'()*+,;=]",Z=`%${be}${be}`,ge="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",We=`${ge}\\.${ge}\\.${ge}\\.${ge}`,j=`${be}{1,4}`,z=`(?:${j}:${j}|${We})`,Dr=`(?:(?:${j}:){6}${z}|::(?:${j}:){5}${z}|(?:${j})?::(?:${j}:){4}${z}|(?:(?:${j}:){0,1}${j})?::(?:${j}:){3}${z}|(?:(?:${j}:){0,2}${j})?::(?:${j}:){2}${z}|(?:(?:${j}:){0,3}${j})?::(?:${j}:){1}${z}|(?:(?:${j}:){0,4}${j})?::${z}|(?:(?:${j}:){0,5}${j})?::${j}|(?:(?:${j}:){0,6}${j})?::)`,Ur=`v${be}+\\.(?:${re}|${D}|:)+`,Tt=`\\[(?:${Dr}|${Ur})\\]`,ne="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",Nt=":(?<port>\\d*)",Mr=`(?:${re}|${Z}|${D})*?`,qr=`(?<host>${Tt}|${We}|${Mr})`,Vr=`(?<userinfo>(?:${re}|${Z}|${D}|:)*)`,Xe=`(?:${re}|${Z}|${D}|:|@)`,Ft=`${Xe}*?`,Dt=`(?:/${Ft})*`,He=`(?<authority>(?:${Vr}@)?${qr}(?:${Nt})?)`,Qe=`(?<path>${Dt})`,Ye=`(?<path2>(?!//)${Ft}${Dt})`,et=`(?:\\?(?<query>(?:${Xe}|/|\\?)*))?`,Ut=`(?:#(?<fragment>(?:${Xe}|/|\\?)*))?`,Cr=`^${ne}:(?://${He}${Qe}|${Ye})${et}${Ut}$`,Lr=`^(?:${ne}:|)(?://${He}${Qe}|${Ye})${et}${Ut}$`,Kr=`^${ne}:(?://${He}${Qe}|${Ye})${et}$`,he="[a-zA-Z0-9\\-._~\\u{A0}-\\u{D7FF}\\u{F900}-\\u{FDCF}\\u{FDF0}-\\u{FFEF}\\u{10000}-\\u{1FFFD}\\u{20000}-\\u{2FFFD}\\u{30000}-\\u{3FFFD}\\u{40000}-\\u{4FFFD}\\u{50000}-\\u{5FFFD}\\u{60000}-\\u{6FFFD}\\u{70000}-\\u{7FFFD}\\u{80000}-\\u{8FFFD}\\u{90000}-\\u{9FFFD}\\u{A0000}-\\u{AFFFD}\\u{B0000}-\\u{BFFFD}\\u{C0000}-\\u{CFFFD}\\u{D0000}-\\u{DFFFD}\\u{E1000}-\\u{EFFFD}]",zr="[\\u{E000}-\\u{F8FF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}]",Br=`(?:${he}|${Z}|${D})*?`,Gr=`(?<host>${Tt}|${We}|${Br})`,Jr=`(?<userinfo>(?:${he}|${Z}|${D}|:)*)`,tt=`(?:${he}|${Z}|${D}|:|@)`,Mt=`${tt}*?`,qt=`(?:/${Mt})*`,rt=`(?<authority>(?:${Jr}@)?${Gr}(?:${Nt})?)`,nt=`(?<path>${qt})`,ot=`(?<path2>(?!//)${Mt}${qt})`,st=`(?:\\?(?<query>(?:${tt}|${zr}|/|\\?)*))?`,Vt=`(?:#(?<fragment>(?:${tt}|/|\\?)*))?`,Ct=`^${ne}:(?://${rt}${nt}|${ot})${st}${Vt}$`,Lt=`^(?:${ne}:|)(?://${rt}${nt}|${ot})${st}${Vt}$`,Kt=`^${ne}:(?://${rt}${nt}|${ot})${st}$`,Zr=e=>(t,r)=>{const n=e.parseReference(t);if(n.scheme===void 0){const o=e.parseAbsolute(r);n.scheme=o.scheme,n.authority===void 0&&(n.authority=o.authority,n.path===""?(n.path=o.path,n.query??(n.query=o.query)):n.path.startsWith("/")||(n.path=Wr(n.path,o)))}return zt(e,n)},Wr=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const r=t.path.lastIndexOf("/");return r===-1?e:t.path.slice(0,r+1)+e}},Xr=/^\.?\.\/|^\.\.?$/,Hr=/^\/\.(?:\/|$)/,Qr=/^\/\.\.(?:\/|$)/,Yr=e=>{let t="";for(;e.length>0;)if(Xr.test(e))e=yt(e);else if(Hr.test(e))e=gt(e);else if(Qr.test(e))e=gt(e),t=en(t);else{const r=tn(e);e=yt(e),t+=r}return t},yt=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},gt=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},en=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},tn=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},zt=(e,t)=>{let r=t.scheme.toLowerCase()+":";return r+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),r+=e.normalizePath(t.path),r+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),r+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),r},Bt=new RegExp(Z,"g"),Gt=e=>t=>{const r=parseInt(t.slice(1),16),n=String.fromCharCode(r);return e(n)?n:t.toUpperCase()};RegExp.prototype.test.bind(new RegExp(`${re}|${D}|[:@]`));const rn=RegExp.prototype.test.bind(new RegExp(`${he}|${D}|[:@]`,"u")),nn=e=>t=>Yr(t).replaceAll(Bt,Gt(e));RegExp.prototype.test.bind(new RegExp(`${re}|${D}|[:@/?]`));const $t=RegExp.prototype.test.bind(new RegExp(`${he}|${D}|[:@/?]`,"u")),wt=e=>t=>t.replaceAll(Bt,Gt(e));RegExp.prototype.test.bind(new RegExp(Cr));RegExp.prototype.test.bind(new RegExp(Lr));RegExp.prototype.test.bind(new RegExp(Kr));RegExp.prototype.test.bind(new RegExp(Ct,"u"));RegExp.prototype.test.bind(new RegExp(Lt,"u"));RegExp.prototype.test.bind(new RegExp(Kt,"u"));const it=(e,t)=>r=>{const n=e.exec(r);if(n===null)throw Error(`Invalid ${t}: ${r}`);const o=n.groups;return o.authority===void 0&&(o.path=o.path2),delete o.path2,o},at=it(new RegExp(Ct,"u"),"IRI"),Jt=it(new RegExp(Lt,"u"),"IRI-reference"),on=it(new RegExp(Kt,"u"),"absolute-IRI"),Zt={iri:{parseAbsolute:on,parseReference:Jt,parse:at,normalizePath:nn(rn),normalizeQuery:wt($t),normalizeFragment:wt($t)}},sn=e=>t=>{const r=e.parse(t);return delete r.fragment,zt(e,r)},C=sn(Zt.iri),ce=Zr(Zt.iri),an="",ve=function*(e){if(e.length>0&&!e.startsWith("/"))throw Error("Invalid JSON Pointer");let t=1,r=0;for(;r<e.length;){const n=e.indexOf("/",t);r=n===-1?e.length:n;const o=e.slice(t,r);t=r+1,yield dn(o)}},cn=(e,t=void 0)=>{if(t===void 0){const r=[...ve(e)];return n=>jt(r,n)}else return jt(ve(e),t)},jt=(e,t)=>{let r=an;for(const n of e)t=ln(t,n,r),r=J(n,r);return t},J=(e,t)=>t+"/"+pn(e),pn=e=>e.toString().replace(/~/g,"~0").replace(/\//g,"~1"),dn=e=>e.toString().replace(/~1/g,"/").replace(/~0/g,"~"),mn=(e,t)=>Array.isArray(e)?t==="-"?e.length:parseInt(t,10):t,ln=(e,t,r="")=>{if(e===void 0)throw TypeError(`Value at '${r}' is undefined and does not have property '${t}'`);if(e===null)throw TypeError(`Value at '${r}' is null and does not have property '${t}'`);if(un(e))throw TypeError(`Value at '${r}' is a ${typeof e} and does not have property '${t}'`);{const n=mn(e,t);if(Object.hasOwn(e,n))return e[n]}},un=e=>e===null||typeof e!="object",Wt=e=>{const t=typeof e;switch(t){case"number":case"string":case"boolean":case"undefined":return t;case"object":if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype)return"object";default:{const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JSON compatible type: ${r}`)}}},ct=e=>{const t=e.indexOf("#"),r=t===-1?e.length:t;return e.slice(0,r)},Xt=e=>decodeURIComponent(Jt(e).fragment||""),Ae={},Ht=e=>{if(e.indexOf("#")!==-1){const t=ct(e);return{...Ae[t],id:e}}return Ae[e]},hn=(e,t)=>{const r=Qt(e,t);if(!r)throw Error(`Encountered unknown keyword '${e}'`);const n=Ht(r);if(!n)throw Error(`Encountered unsupported keyword ${e}. You can provide an implementation for the '${r}' keyword using the 'addKeyword' function.`);return n},p=e=>{Ae[e.id]=e},we={},q=(e,t)=>{we[e]=t},Q={},Qt=(e,t)=>{const r=Yt(t);return r.keywords[e]??(r.allowUnknownKeywords||e.startsWith("x-")?`https://json-schema.org/keyword/unknown#${e}`:void 0)},b=(e,t)=>{const r=Yt(e);for(const n in r.keywords)if(r.keywords[n]===t)return n},Yt=e=>{if(!(e in Q))throw Error(`Encountered unknown dialect '${e}'`);return Q[e]},pt=(e,t,r=!1,n=!0)=>{var o;Q[e]={keywords:{},allowUnknownKeywords:r,persistentDialects:((o=Q[e])==null?void 0:o.persistentDialects)||n};for(const s in t)if(s in we)for(const i in we[s]){let a=we[s][i];!(a in Ae)&&!t[s]&&(a=`https://json-schema.org/keyword/unknown#${i}`),Q[e].keywords[i]=a}else if(!r||t[s])throw delete Q[e],Error(`Unrecognized vocabulary: ${s}. You can define this vocabulary with the 'defineVocabulary' function.`)};var $e={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var kt;function fn(){if(kt)return $e;kt=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,r=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,o=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;$e.format=i,$e.parse=a;function i(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var y=m.parameters,$=m.type;if(!$||!s.test($))throw new TypeError("invalid type");var f=$;if(y&&typeof y=="object")for(var A,F=Object.keys(y).sort(),I=0;I<F.length;I++){if(A=F[I],!r.test(A))throw new TypeError("invalid parameter name");f+="; "+A+"="+u(y[A])}return f}function a(m){if(!m)throw new TypeError("argument string is required");var y=typeof m=="object"?c(m):m;if(typeof y!="string")throw new TypeError("argument string is required to be a string");var $=y.indexOf(";"),f=$!==-1?y.slice(0,$).trim():y.trim();if(!s.test(f))throw new TypeError("invalid media type");var A=new h(f.toLowerCase());if($!==-1){var F,I,O;for(e.lastIndex=$;I=e.exec(y);){if(I.index!==$)throw new TypeError("invalid parameter format");$+=I[0].length,F=I[1].toLowerCase(),O=I[2],O.charCodeAt(0)===34&&(O=O.slice(1,-1),O.indexOf("\\")!==-1&&(O=O.replace(n,"$1"))),A.parameters[F]=O}if($!==y.length)throw new TypeError("invalid parameter format")}return A}function c(m){var y;if(typeof m.getHeader=="function"?y=m.getHeader("content-type"):typeof m.headers=="object"&&(y=m.headers&&m.headers["content-type"]),typeof y!="string")throw new TypeError("content-type header is missing from object");return y}function u(m){var y=String(m);if(r.test(y))return y;if(y.length>0&&!t.test(y))throw new TypeError("invalid parameter value");return'"'+y.replace(o,"\\$1")+'"'}function h(m){this.parameters=Object.create(null),this.type=m}return $e}var er=fn();const yn=_t(er),pe={},tr=(e,t)=>{pe[e]=t},gn=e=>{const t=e.headers.get("content-type");if(t===null)throw new vn("The media type of the response could not be determined. Make sure the response includes a 'Content-Type' header.",{cause:e});const r=er.parse(t);for(const n in pe)if(jn(n,r.type))return pe[n].parse(e);throw new bn(r.type,`'${r.type}' is not supported. Use the 'addMediaTypePlugin' function to add support for this media type.`,{cause:e})},$n="A-Za-z",Fe=`[!#$%&'*\\-_.^\`|~\\d${$n}]+`,wn=`(?<type>${Fe})/(?<subType>${Fe}(?:\\+(?<suffix>${Fe}))?)`,bt=new RegExp(wn),jn=(e,t)=>{var o,s;if(e===t)return!0;const r=(o=bt.exec(e))==null?void 0:o.groups;if(!r)throw Error(`Unable to parse media-range: ${e}`);const n=(s=bt.exec(t))==null?void 0:s.groups;if(!n)throw Error(`Unable to parse media-type: ${t}`);return(r.type===n.type||r.type==="*")&&(r.subType===n.subType||r.subType==="*"||r.subType===n.suffix)},kn=()=>{let e="";for(const t in pe)e=vt(e,t,pe[t].quality);return vt(e,"*/*","0.001")},vt=(e,t,r)=>(e.length>0&&(e+=", "),e+=t,r&&(e+=`; q=${r}`),e);class bn extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.mediaType=t}}class vn extends Error{constructor(t=void 0){super(t),this.name=this.constructor.name}}const An=(e,t=void 0)=>JSON.parse(e,(r,n)=>{const o=n!==null&&typeof n.$ref=="string"?new G(n.$ref):n;return t?t(r,o):o});var le,ue;class G{constructor(t,r=void 0){Re(this,le);Re(this,ue);_e(this,le,t),_e(this,ue,r??{$ref:t})}get href(){return Pe(this,le)}toJSON(){return Pe(this,ue)}}le=new WeakMap,ue=new WeakMap;const rr=e=>{const t=typeof e;switch(t){case"bigint":return"number";case"number":case"string":case"boolean":case"undefined":return t;case"object":if(e instanceof G)return"reference";if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)return"object";default:{const r=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JRef compatible type: ${r}`)}}},In={parse:async e=>({baseUri:e.url,root:An(await e.text()),anchorLocation:En}),fileMatcher:e=>/[^/]\.jref$/.test(e)},En=e=>decodeURI(e||""),Le={},nr=(e,t)=>{Le[e]=t},Sn=(e,t)=>{e=ce(e,t);const{scheme:r}=at(e);if(!(r in Le))throw new On(r,`The '${r}:' URI scheme is not supported. Use the 'addUriSchemePlugin' function to add support for '${r}:' URIs.`);return Le[r].retrieve(e,t)};class On extends Error{constructor(t,r=void 0){super(r),this.name=this.constructor.name,this.scheme=t}}const xn=new Set([200,203]),Pn=async e=>{const t=await fetch(e,{headers:{Accept:kn()}});if(t.status>=400)throw new At(t,`Failed to retrieve '${e}'`);if(!xn.has(t.status))throw new At(t,"Unsupported HTTP response status code");return t},or={retrieve:Pn};class At extends Error{constructor(t,r=void 0){super(`${t.status} ${t.statusText}${r?` -- ${r}`:""}`),this.name=this.constructor.name,this.response=t}}var sr=Rn;function Rn(e,t){return function r(){t==null&&(t=e.length);var n=[].slice.call(arguments);return n.length>=t?e.apply(this,n):function(){return r.apply(this,n.concat([].slice.call(arguments)))}}}const _n=()=>{var e,t;return((t=(e=globalThis.document)==null?void 0:e.location)==null?void 0:t.toString())??""},dt=async(e,t={_cache:{}})=>{var i,a,c;const r=((i=t.document)==null?void 0:i.baseUri)??_n();e=ce(e,r);const n=C(e),{fragment:o}=at(e),s=t._cache[n]??((c=(a=t.document)==null?void 0:a.embedded)==null?void 0:c[n]);if(s)t.document=s,t.uri=e,t.cursor=t.document.anchorLocation(o);else{try{const u=await Sn(e,r);t.document=await gn(u),t.uri=u.url+(o===void 0?"":`#${o}`),t.cursor=t.document.anchorLocation(o)}catch(u){const h=t.uri?` Referenced from '${t.uri}'.`:"";throw new Nn(`Unable to load resource '${e}'.${h}`,u)}t._cache[n]=t.document}return t._value=cn(t.cursor,t.document.root),ir(t)},ir=e=>rr(l(e))==="reference"?dt(l(e).href,e):e,l=e=>e._value,T=e=>rr(e._value),ar=(e,t)=>e in t._value,mt=e=>e._value.length,R=sr((e,t)=>ir({...t,cursor:J(`${e}`,t.cursor),_value:t._value[e]})),V=async function*(e){for(let t=0;t<l(e).length;t++)yield R(t,e)},Ke=function*(e){for(const t in l(e))yield t},Tn=async function*(e){for(const t in l(e))yield R(t,e)},L=async function*(e){for(const t in l(e))yield[t,await R(t,e)]};class Nn extends Error{constructor(t,r){super(t,{cause:r}),this.name=this.constructor.name}}tr("application/reference+json",In);nr("http",or);nr("https",or);const Fn={parse:async e=>{const t=yn.parse(e.headers.get("content-type")??""),r=t.parameters.schema??t.parameters.profile;return Ie(await e.json(),e.url,r)},fileMatcher:async e=>/(\.|\/)schema\.json$/.test(e)},de={},cr=async(e,t=void 0)=>{t||(t={_cache:{}});for(const n in de)n in t._cache||(t._cache[n]=de[n]);const r=await dt(e,{...t});if(typeof r.document.dialectId!="string")throw Error(`The document at ${r.document.baseUri} is not a schema.`);return r},U=(e,t,r)=>{e=structuredClone(e);const n=Ie(e,t,r);if(n.baseUri in de)throw Error(`A schema has already been registered for '${n.baseUri}. You can use 'unregisterSchema' to remove the old schema before registering the new one.`);if(n.baseUri.startsWith("file:"))throw Error(`Registering a schema with a 'file:' URI scheme is not allowed: ${n.baseUri}`);de[t?C(t):n.baseUri]=n},Dn=e=>e in de,Ie=(e,t,r,n={})=>{if(typeof e.$schema=="string"&&(r=e.$schema,delete e.$schema),!r)throw Error("Unable to determine a dialect for the schema. The dialect can be declared in a number of ways, but the recommended way is to use the '$schema' keyword in your schema.");r=C(r);const o=b(r,"https://json-schema.org/keyword/draft-04/id"),s=b(r,"https://json-schema.org/keyword/id")||o;if(!e[s]&&!t)throw Error(`Unable to determine an identifier for the schema. Use the '${s}' keyword or pass a retrievalUri when loading the schema.`);const i=ce(e[s]??"",t??"");t=C(i),o&&i.length>t.length?e[s]="#"+Xt(i):delete e[s];const a=b(r,"https://json-schema.org/keyword/vocabulary");if(Wt(e[a])==="object"){const m=e[a]["https://json-schema.org/draft/2019-09/vocab/core"]||e[a]["https://json-schema.org/draft/2020-12/vocab/core"];pt(t,e[a],m,!1),delete e[a]}const c={"":""},u={},h=b(r,"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor");return e[h]===!0&&(u[""]=`${t}#`),delete e[h],n[t]={baseUri:t,dialectId:r,root:ze(e,t,r,"",n,c,u),anchorLocation:m=>{if(m===void 0)return"";if(m=decodeURI(m),m[0]==="/")return m;if(m in c)return c[m];throw Error(`No such anchor '${t}#${encodeURI(m)}'`)},anchors:c,dynamicAnchors:u,embedded:n},n[t]},ze=(e,t,r,n,o,s,i)=>{if(Wt(e)==="object"){const a=typeof e.$schema=="string"?C(e.$schema):r,c=b(a,"https://json-schema.org/keyword/id");if(typeof e[c]=="string"){const f=C(ce(e[c],t));return e[c]=f,o[f]=Ie(e,f,a,o),new G(f,{})}const u=b(a,"https://json-schema.org/keyword/draft-04/id");if(typeof e[u]=="string")if(e[u][0]==="#"){const f=decodeURIComponent(e[u].slice(1));s[f]=n,delete e[u]}else{const f=C(ce(e[u],t));return e[u]=f,o[f]=Ie(e,f,a,o),new G(f,{})}const h=b(r,"https://json-schema.org/keyword/draft-04/ref");if(typeof e[h]=="string")return new G(e[h],e);const m=b(r,"https://json-schema.org/keyword/anchor");typeof e[m]=="string"&&(s[e[m]]=n,delete e[m]);const y=b(r,"https://json-schema.org/keyword/dynamicAnchor");typeof e[y]=="string"&&(i[e[y]]=`${t}#${encodeURI(n)}`,delete e[y]);const $=b(r,"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor");typeof e[$]=="string"&&(i[e[$]]=`${t}#${encodeURI(n)}`,s[e[$]]=n,delete e[$]);for(const f in e){const A=b(r,"https://json-schema.org/keyword/ref");f===A&&typeof e[f]=="string"?e[f]=new G(e[f],e[f]):e[f]=ze(e[f],t,r,J(f,n),o,s,i)}}else if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=ze(e[a],t,r,J(a,n),o,s,i);return e},Ee=e=>`${e.document.baseUri}#${encodeURI(e.cursor)}`,oe=e=>(...t)=>{const r=e.length===1?e(t[0]):e(t[0],t[1]),n=t[e.length];return n===void 0?r:r(n)},Un=oe(e=>function*(t){for(const r of t)yield e(r)}),E=oe(e=>async function*(t){for await(const r of t)yield e(r)}),pr=oe(e=>function*(t){let r=0;for(const n of t)r++>=e&&(yield n)}),Mn=e=>{const r=lr(e).next();return r.done?void 0:r.value},It=function*(){},dr=function*(e,t){const r=lr(t);for(const n of e)yield[n,r.next().value]},qn=function*(...e){for(const t of e)yield*t},mr=oe((e,t)=>r=>{for(const n of r)t=e(t,n);return t}),Vn=oe(e=>t=>{for(const r of t)if(e(r))return!0;return!1}),_=async e=>{const t=[];for await(const r of e)t.push(r);return t},Be=async e=>{const t=Object.create(null);for await(const[r,n]of e)t[r]=n;return t},Cn=oe(e=>t=>{let r=Mn(t)??"";for(const n of t)r+=e+n;return r}),lr=e=>{if(typeof(e==null?void 0:e[Symbol.iterator])=="function")return e[Symbol.iterator]();throw TypeError("`iter` is not iterable")},S=(e,...t)=>mr((r,n)=>n(r),e,t),Y=(e,t="",r="",n=void 0)=>{const o=typeof e;switch(o){case"number":case"string":case"boolean":return ae(t,r,e,o,[],n);case"object":if(e===null)return ae(t,r,e,"null",[],n);if(Array.isArray(e)){const s=ae(t,r,e,"array",[],n);return s.children=e.map((i,a)=>Y(i,t,J(a,r),s)),s}else if(Object.getPrototypeOf(e)===Object.prototype){const s=ae(t,r,e,"object",[],n);return s.children=Object.entries(e).map(i=>{const a=J(i[0],r),c=ae(t,a,void 0,"property",[],s);return c.children[0]=Y(i[0],t,"*"+a,c),c.children[1]=Y(i[1],t,a,c),c}),s}else if(e instanceof G)return Y(e.toJSON(),t,r,n);default:{const s=o==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":o;throw Error(`Not a JSON compatible type: ${s}`)}}},ae=(e,t,r,n,o,s)=>{const i={baseUri:e?C(e):"",pointer:t,value:r,type:n,children:o,parent:s,annotations:{}};return i.root=(s==null?void 0:s.root)??i,i},Ln=(e,t)=>{const r=ct(e);if(r!==t.baseUri&&r!=="")throw Error(`Reference '${e}' is not local to '${t.baseUri}'`);let n=!1,o=Xt(e);o.startsWith("*")&&(o=o.slice(1),n=!0);const s=mr((i,a)=>(a=a==="-"&&g(i)==="array"?Oe(i):a,Kn(a,i)),t.root,ve(o));return n?s.parent.children[0]:s},me=e=>`${e.baseUri}#${encodeURI(e.pointer)}`,v=e=>e.value,g=e=>e.type,te=(e,t)=>e in t.value,Kn=(e,t)=>{switch(t.type){case"object":{const r=t.children.find(n=>v(n.children[0])===e);return r==null?void 0:r.children[1]}case"array":{const r=parseInt(e,10);return t.children[r]}default:return}},M=function*(e){e.type==="array"&&(yield*e.children)},lt=function*(e){if(e.type==="object")for(const t of e.children)yield t.children[0]},fe=function*(e){if(e.type==="object")for(const t of e.children)t.children.length===2&&(yield t.children)},Oe=e=>{if(e.type==="array")return e.children.length},ee={};let zn=0;const Bn=(e,t)=>{e in ee||(ee[e]={});const r=`pubsub_subscription_${zn++}`;return ee[e][r]=t,r},Gn=async(e,t)=>{const r=[];for(const n in ee)if(n===e||e.startsWith(`${n}.`))for(const o in ee[n])r.push(ee[e][o](e,t));await Promise.all(r)};let ur;const Jn=()=>ur,Zn=e=>{ur=e};class Wn extends Error{constructor(t){super("Invalid Schema"),this.name=this.constructor.name,this.output=t}}const Xn="https://json-schema.org/evaluation/validate",Hn=async(e,t)=>{await Gn("validate.metaValidate",e),e.document.baseUri in t.metaData||(t.metaData[e.document.baseUri]={dynamicAnchors:e.document.dynamicAnchors});const r=Ee(e);if(!(r in t)){t[r]=!1;const n=l(e);if(!["object","boolean"].includes(typeof n))throw Error(`No schema found at '${r}'`);t[r]=typeof n=="boolean"?n:await S(L(e),E(async([o,s])=>{const i=hn(o,e.document.dialectId);i.plugin&&t.plugins.add(i.plugin);const a=await i.compile(s,t,e);return[i.id,J(o,Ee(e)),a]}),_)}return r},Qn=(e,t,r)=>{var o,s,i,a;let n=!0;for(const c of r.plugins)(o=c.beforeSchema)==null||o.call(c,e,t,r);if(typeof r.ast[e]=="boolean")n=r.ast[e];else for(const c of r.ast[e]){const[u,,h]=c,m=Ht(u),y={ast:r.ast,plugins:r.plugins};for(const f of r.plugins)(s=f.beforeKeyword)==null||s.call(f,c,t,y,r,m);const $=m.interpret(h,t,y);$||(n=!1);for(const f of r.plugins)(i=f.afterKeyword)==null||i.call(f,c,t,y,$,r,m)}for(const c of r.plugins)(a=c.afterSchema)==null||a.call(c,e,t,r,n);return n},d={id:Xn,compile:Hn,interpret:Qn};class Yn{beforeSchema(t,r,n){n.errors??(n.errors=[])}beforeKeyword(t,r,n){n.errors=[]}afterKeyword(t,r,n,o,s,i){if(!o){if(!i.simpleApplicator){const[a,c]=t;s.errors.push({keyword:a,absoluteKeywordLocation:c,instanceLocation:me(r)})}s.errors.push(...n.errors)}}afterSchema(t,r,n,o){typeof n.ast[t]=="boolean"&&!o&&n.errors.push({keyword:d.id,absoluteKeywordLocation:t,instanceLocation:me(r)}),this.errors=n.errors}}class eo{beforeSchema(t,r,n){n.errors??(n.errors=[])}beforeKeyword(t,r,n){n.errors=[]}afterKeyword(t,r,n,o,s){if(!o){const[i,a]=t,c={keyword:i,absoluteKeywordLocation:a,instanceLocation:me(r)};s.errors.push(c),n.errors.length>0&&(c.errors=n.errors)}}afterSchema(t,r,n,o){typeof n.ast[t]=="boolean"&&!o&&n.errors.push({keyword:d.id,absoluteKeywordLocation:t,instanceLocation:me(r)}),this.errors=n.errors}}const je="FLAG",Ge="BASIC",to="DETAILED";Zn(je);const hr=async e=>{const t={metaData:{},plugins:new Set},r=await d.compile(e,t);return{ast:t,schemaUri:r}},fr=sr(({ast:e,schemaUri:t},r,n=je)=>{const o=typeof n=="string"?n:n.outputFormat??je,s=n.plugins??[],i={ast:e,plugins:[...e.plugins,...s]};let a;switch(o){case je:break;case Ge:a=new Yn,i.plugins.push(a);break;case to:a=new eo,i.plugins.push(a);break;default:throw Error(`Unsupported output format '${o}'`)}const c=d.interpret(t,r,i);return!c&&a?{valid:c,errors:a.errors}:{valid:c}}),De={};Bn("validate.metaValidate",async(e,t)=>{if(!t.document.validated){if(t.document.validated=!0,!(t.document.dialectId in De)){const o=await cr(t.document.dialectId,t),s=await hr(o);De[t.document.dialectId]=fr(s)}const r=Y(t.document.root,t.document.baseUri),n=De[t.document.dialectId](r,Jn());if(!n.valid)throw new Wn(n)}});class ro{beforeSchema(t,r,n){n.annotations??(n.annotations=[]),n.schemaAnnotations=[]}beforeKeyword(t,r,n){n.annotations=[]}afterKeyword(t,r,n,o,s,i){var a;if(o){const[c,u,h]=t,m=(a=i.annotation)==null?void 0:a.call(i,h,r,n);m!==void 0&&s.schemaAnnotations.push({keyword:c,absoluteKeywordLocation:u,instanceLocation:me(r),annotation:m}),s.schemaAnnotations.push(...n.annotations)}}afterSchema(t,r,n,o){o&&n.annotations.push(...n.schemaAnnotations),this.annotations=n.annotations}}const no="https://json-schema.org/keyword/additionalProperties",oo=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/properties"),o=await R(n,r),s=T(o)==="object"?Un(h=>"^"+so(h)+"$",Ke(o)):It(),i=b(e.document.dialectId,"https://json-schema.org/keyword/patternProperties"),a=await R(i,r),c=T(a)==="object"?Ke(a):It(),u=S(qn(s,c),Cn("|"))||"(?!)";return[new RegExp(u,"u"),await d.compile(e,t)]},so=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),io=([e,t],r,n)=>{var s;if(g(r)!=="object")return!0;let o=!0;for(const[i,a]of fe(r)){const c=v(i);e.test(c)||(d.interpret(t,a,n)||(o=!1),(s=n.evaluatedProperties)==null||s.add(c))}return o},ao=!0,co={id:no,compile:oo,interpret:io,simpleApplicator:ao},po="https://json-schema.org/keyword/allOf",mo=(e,t)=>S(V(e),E(r=>d.compile(r,t)),_),lo=(e,t,r,n,o)=>{let s=!0;for(const i of e)d.interpret(i,t,r,n,o)||(s=!1);return s},uo=!0,ho={id:po,compile:mo,interpret:lo,simpleApplicator:uo},fo={id:"https://json-schema.org/keyword/anchor"},yo="https://json-schema.org/keyword/anyOf",go=(e,t)=>S(V(e),E(r=>d.compile(r,t)),_),$o=(e,t,r,n,o)=>e.filter(i=>d.interpret(i,t,r,n,o)).length>0,wo={id:yo,compile:go,interpret:$o},jo="https://json-schema.org/keyword/conditional",ko=(e,t)=>S(V(e),yr,E(r=>d.compile(r,t)),_),bo=(e,t,r)=>{for(let n=0;n<e.length;n+=2){const o=d.interpret(e[n],t,r);if(n+1===e.length)return o;if(o)return d.interpret(e[n+1],t,r)}return!0},yr=async function*(e,t=1){for await(const r of e)t>0&&T(r)==="array"?yield*yr(V(r),t-1):yield r},vo={id:jo,compile:ko,interpret:bo};var Ue,Et;function Ao(){return Et||(Et=1,Ue={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify}),Ue}var Me,St;function B(){return St||(St=1,Me={isArray:Array.isArray,assign:Object.assign,isObject:e=>typeof e=="object",isFunction:e=>typeof e=="function",isBoolean:e=>typeof e=="boolean",isRegex:e=>e instanceof RegExp,keys:Object.keys}),Me}var qe,Ot;function Io(){if(Ot)return qe;Ot=1;const e=Ao(),t=B().isFunction,r=B().isBoolean,n=B().isObject,o=B().isArray,s=B().isRegex,i=B().assign,a=B().keys;function c(h){return h==null?h:s(h)?h.toString():h.toJSON?h.toJSON():h}function u(h,m){m=m||i({},e),t(m)&&(m={compare:m});const y=m.space||e.space,$=r(m.cycles)?m.cycles:e.cycles,f=m.replacer||e.replacer,A=m.stringify||e.stringify,F=m.compare&&function(O){return function(W){return function(X,w){const P={key:X,value:W[X]},H={key:w,value:W[w]};return O(P,H)}}}(m.compare);$||A(h);const I=[];return function O(W,X,w,P){const H=y?`
`+new Array(P+1).join(y):"",jr=y?": ":":";if(w=c(w),w=f.call(W,X,w),w!==void 0){if(!n(w)||w===null)return A(w);if(o(w)){const se=[];for(let K=0;K<w.length;K++){const ie=O(w,K,w[K],P+1)||A(null);se.push(H+y+ie)}return"["+se.join(",")+H+"]"}else{if($){if(I.indexOf(w)!==-1)return A("[Circular]");I.push(w)}const se=a(w).sort(F&&F(w)),K=[];for(let ie=0;ie<se.length;ie++){const xe=se[ie],ut=O(w,xe,w[xe],P+1);if(!ut)continue;const kr=A(xe)+jr+ut;K.push(H+y+kr)}return I.splice(I.indexOf(w),1),"{"+K.join(",")+H+"}"}}}({"":h},"",h,0)}return qe=u,qe}var Eo=Io();const ye=_t(Eo),So="https://json-schema.org/keyword/const",Oo=e=>ye(l(e)),xo=(e,t)=>ye(v(t))===e,Po={id:So,compile:Oo,interpret:xo},Ro="https://json-schema.org/keyword/contains",_o=async(e,t,r)=>{const n=await d.compile(e,t),o=b(e.document.dialectId,"https://json-schema.org/keyword/minContains"),s=await R(o,r),i=T(s)==="number"?l(s):1,a=b(e.document.dialectId,"https://json-schema.org/keyword/maxContains"),c=await R(a,r),u=T(c)==="number"?l(c):Number.MAX_SAFE_INTEGER;return{contains:n,minContains:i,maxContains:u}},To=({contains:e,minContains:t,maxContains:r},n,o)=>{var a;if(g(n)!=="array")return!0;let s=0,i=0;for(const c of M(n))d.interpret(e,c,o)&&(s++,(a=o.evaluatedItems)==null||a.add(i)),i++;return s>=t&&s<=r},No={id:Ro,compile:_o,interpret:To},Fo="https://json-schema.org/keyword/comment",Do=()=>{},Uo=()=>!0,Mo={id:Fo,compile:Do,interpret:Uo},qo="https://json-schema.org/keyword/contentEncoding",Vo=e=>l(e),Co=()=>!0,Lo=(e,t)=>{if(g(t)==="string")return e},Ko={id:qo,compile:Vo,interpret:Co,annotation:Lo},zo="https://json-schema.org/keyword/contentMediaType",Bo=e=>l(e),Go=()=>!0,Jo=(e,t)=>{if(g(t)==="string")return e},Zo={id:zo,compile:Bo,interpret:Go,annotation:Jo},Wo="https://json-schema.org/keyword/contentSchema",Xo=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/contentMediaType"),o=await R(n,r);if(l(o)!==void 0)return l(e)},Ho=()=>!0,Qo=(e,t)=>{if(!(!e||g(t)!=="string"))return e},Yo={id:Wo,compile:Xo,interpret:Ho,annotation:Qo},es="https://json-schema.org/keyword/default",ts=e=>l(e),rs=()=>!0,ns=e=>e,os={id:es,compile:ts,interpret:rs,annotation:ns},ss="https://json-schema.org/keyword/definitions",is=(e,t)=>S(Tn(e),E(r=>d.compile(r,t)),_),as=()=>!0,cs={id:ss,compile:is,interpret:as},ps="https://json-schema.org/keyword/dependentRequired",ds=e=>S(L(e),E(([t,r])=>[t,l(r)]),_),ms=(e,t)=>{if(g(t)!=="object")return!0;let r=!0;for(const[n,o]of e)te(n,t)&&!o.every(s=>te(s,t))&&(r=!1);return r},ls={id:ps,compile:ds,interpret:ms},us="https://json-schema.org/keyword/dependentSchemas",hs=(e,t)=>S(L(e),E(async([r,n])=>[r,await d.compile(n,t)]),_),fs=(e,t,r)=>{if(g(t)!=="object")return!0;let n=!0;for(const[o,s]of e)te(o,t)&&!d.interpret(s,t,r)&&(n=!1);return n},ys=!0,gs={id:us,compile:hs,interpret:fs,simpleApplicator:ys},$s="https://json-schema.org/keyword/deprecated",ws=e=>l(e),js=()=>!0,ks=e=>e,bs={id:$s,compile:ws,interpret:js,annotation:ks},vs="https://json-schema.org/keyword/description",As=e=>l(e),Is=()=>!0,Es=e=>e,Ss={id:vs,compile:As,interpret:Is,annotation:Es},Os={id:"https://json-schema.org/keyword/dynamicAnchor"},xs="https://json-schema.org/keyword/dynamicRef",Ps=async(e,t)=>{const r=l(e),n=await dt(e.document.baseUri,e);return await d.compile(n,t),r},Rs=(e,t,r)=>{if(!(e in r.dynamicAnchors))throw Error(`No dynamic anchor found for "${e}"`);return d.interpret(r.dynamicAnchors[e],t,r)},_s=!0,Ts={beforeSchema(e,t,r){r.dynamicAnchors={...r.ast.metaData[ct(e)].dynamicAnchors,...r.dynamicAnchors}},beforeKeyword(e,t,r,n){r.dynamicAnchors=n.dynamicAnchors}},Ns={id:xs,compile:Ps,interpret:Rs,simpleApplicator:_s,plugin:Ts},Fs="https://json-schema.org/keyword/else",Ds=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/if");if(ar(n,r)){const o=await R(n,r);return[await d.compile(o,t),await d.compile(e,t)]}else return[]},Us=([e,t],r,n)=>e===void 0||d.interpret(e,r,{...n,plugins:n.ast.plugins})||d.interpret(t,r,n),Ms=!0,qs={id:Fs,compile:Ds,interpret:Us,simpleApplicator:Ms},Vs="https://json-schema.org/keyword/enum",Cs=e=>S(V(e),E(l),E(ye),_),Ls=(e,t)=>{const r=ye(v(t));return e.some(n=>r===n)},Ks={id:Vs,compile:Cs,interpret:Ls},zs="https://json-schema.org/keyword/examples",Bs=e=>l(e),Gs=()=>!0,Js=e=>e,Zs={id:zs,compile:Bs,interpret:Gs,annotation:Js},Ws="https://json-schema.org/keyword/exclusiveMaximum",Xs=e=>l(e),Hs=(e,t)=>g(t)!=="number"||v(t)<e,Qs={id:Ws,compile:Xs,interpret:Hs},Ys="https://json-schema.org/keyword/exclusiveMinimum",ei=e=>l(e),ti=(e,t)=>g(t)!=="number"||v(t)>e,ri={id:Ys,compile:ei,interpret:ti},ni="https://json-schema.org/keyword/format",oi=e=>l(e),si=()=>!0,ii=e=>e,ai={id:ni,compile:oi,interpret:si,annotation:ii},ci={id:"https://json-schema.org/keyword/id"},pi="https://json-schema.org/keyword/if",di=(e,t)=>d.compile(e,t),mi=(e,t,r)=>(d.interpret(e,t,r),!0),li=!0,ui={id:pi,compile:di,interpret:mi,simpleApplicator:li},hi=()=>{const e=N(!1),t=N(!0);return x(e,t),{start:e,end:t}},fi=e=>{const t=N(!1),r=N(!0);return ki(t,r,e),{start:t,end:r}},yi=(e,t)=>e===void 0?t:(x(e.end,t.start),e.end.isEnd=!1,{start:e.start,end:t.end}),gi=(e,t)=>{const r=N(!1);x(r,e.start),x(r,t.start);const n=N(!0);return x(e.end,n),e.end.isEnd=!1,x(t.end,n),t.end.isEnd=!1,{start:r,end:n}},$i=e=>{const t=N(!1),r=N(!0);return x(t,r),x(t,e.start),x(e.end,r),x(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},wi=e=>{const t=N(!1),r=N(!0);return x(t,r),x(t,e.start),x(e.end,r),e.end.isEnd=!1,{start:t,end:r}},ji=e=>{const t=N(!1),r=N(!0);return x(t,e.start),x(e.end,r),x(e.end,e.start),e.end.isEnd=!1,{start:t,end:r}},x=(e,t)=>{e.epsilonTransitions.push(t)},ki=(e,t,r)=>{e.transition[r]=t},N=e=>({isEnd:e,transition:{},epsilonTransitions:[]}),bi="https://json-schema.org/keyword/itemPattern",gr=async(e,t)=>{const r=[[]];let n=r[0];for await(const o of V(e))if(T(o)==="string"){const s=l(o);if(s==="*")n.push($i(n.pop()));else if(s==="?")n.push(wi(n.pop()));else if(s==="+")n.push(ji(n.pop()));else if(s==="|")n=[],r.push(n);else throw Error(`Unsupported pattern syntax: ${s}`)}else{const s=T(o)==="array"?gr(o,t):fi(await d.compile(o,t));n.push(await s)}return mt(e)===0?hi():r.map(o=>o.reduce(yi)).reduce(gi)},vi=(e,t,r)=>{if(g(t)!=="array")return!0;let n=[];Je(e.start,n,[]);for(const o of M(t)){const s=[];for(const i of n){const a=Ai(i.transition,o,r);a&&Je(a,s,[])}n=s}return!!n.find(o=>o.isEnd)},Je=(e,t,r)=>{if(e.epsilonTransitions.length)for(const n of e.epsilonTransitions)r.find(o=>o===n)||(r.push(n),Je(n,t,r));else t.push(e)},Ai=(e,t,r)=>{for(const n in e)if(d.interpret(n,t,r))return e[n]},Ii={id:bi,compile:gr,interpret:vi},Ei="https://json-schema.org/keyword/items",Si=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/prefixItems"),o=await R(n,r);return[T(o)==="array"?mt(o):0,await d.compile(e,t)]},Oi=([e,t],r,n)=>{var i;if(g(r)!=="array")return!0;let o=!0,s=e;for(const a of pr(e,M(r)))d.interpret(t,a,n)||(o=!1),(i=n.evaluatedItems)==null||i.add(s),s++;return o},xi=!0,Pi={id:Ei,compile:Si,interpret:Oi,simpleApplicator:xi},Ri="https://json-schema.org/keyword/maxContains",_i=e=>l(e),Ti=()=>!0,Ni={id:Ri,compile:_i,interpret:Ti},Fi="https://json-schema.org/keyword/maxItems",Di=e=>l(e),Ui=(e,t)=>g(t)!=="array"||Oe(t)<=e,Mi={id:Fi,compile:Di,interpret:Ui},qi="https://json-schema.org/keyword/maxLength",Vi=e=>l(e),Ci=(e,t)=>g(t)!=="string"||[...v(t)].length<=e,Li={id:qi,compile:Vi,interpret:Ci},Ki="https://json-schema.org/keyword/maxProperties",zi=e=>l(e),Bi=(e,t)=>g(t)!=="object"||[...lt(t)].length<=e,Gi={id:Ki,compile:zi,interpret:Bi},Ji="https://json-schema.org/keyword/maximum",Zi=e=>l(e),Wi=(e,t)=>g(t)!=="number"||v(t)<=e,Xi={id:Ji,compile:Zi,interpret:Wi},Hi="https://json-schema.org/keyword/minContains",Qi=e=>l(e),Yi=()=>!0,ea={id:Hi,compile:Qi,interpret:Yi},ta="https://json-schema.org/keyword/minItems",ra=e=>l(e),na=(e,t)=>g(t)!=="array"||Oe(t)>=e,oa={id:ta,compile:ra,interpret:na},sa="https://json-schema.org/keyword/minLength",ia=e=>l(e),aa=(e,t)=>g(t)!=="string"||[...v(t)].length>=e,ca={id:sa,compile:ia,interpret:aa},pa="https://json-schema.org/keyword/minProperties",da=e=>l(e),ma=(e,t)=>g(t)!=="object"||[...lt(t)].length>=e,la={id:pa,compile:da,interpret:ma},ua="https://json-schema.org/keyword/minimum",ha=e=>l(e),fa=(e,t)=>g(t)!=="number"||v(t)>=e,ya={id:ua,compile:ha,interpret:fa},ga="https://json-schema.org/keyword/multipleOf",$a=e=>l(e),wa=(e,t)=>{if(g(t)!=="number")return!0;const r=v(t)%e;return xt(0,r)||xt(e,r)},xt=(e,t)=>Math.abs(e-t)<11920929e-14,ja={id:ga,compile:$a,interpret:wa},ka="https://json-schema.org/keyword/not",ba=(...e)=>d.compile(...e),va=(...e)=>!d.interpret(...e),Aa={id:ka,compile:ba,interpret:va},Ia="https://json-schema.org/keyword/oneOf",Ea=(e,t)=>S(V(e),E(r=>d.compile(r,t)),_),Sa=(e,t,r)=>{let n=0;for(const o of e)d.interpret(o,t,r)&&n++;return n===1},Oa={id:Ia,compile:Ea,interpret:Sa},xa="https://json-schema.org/keyword/pattern",Pa=e=>new RegExp(l(e),"u"),Ra=(e,t)=>g(t)!=="string"||e.test(v(t)),_a={id:xa,compile:Pa,interpret:Ra},Ta="https://json-schema.org/keyword/patternProperties",Na=(e,t)=>S(L(e),E(async([r,n])=>[new RegExp(r,"u"),await d.compile(n,t)]),_),Fa=(e,t,r)=>{var o;if(g(t)!=="object")return!0;let n=!0;for(const[s,i]of e)for(const[a,c]of fe(t)){const u=v(a);s.test(u)&&(d.interpret(i,c,r)||(n=!1),(o=r.evaluatedProperties)==null||o.add(u))}return n},Da=!0,Ua={id:Ta,compile:Na,interpret:Fa,simpleApplicator:Da},Ma="https://json-schema.org/keyword/prefixItems",qa=(e,t)=>S(V(e),E(r=>d.compile(r,t)),_),Va=(e,t,r)=>{var i;if(g(t)!=="array")return!0;let n=!0,o=0;const s=Oe(t);for(const[a,c]of dr(e,M(t))){if(o>=s)break;d.interpret(a,c,r)||(n=!1),(i=r.evaluatedItems)==null||i.add(o),o++}return n},Ca=!0,La={id:Ma,compile:qa,interpret:Va,simpleApplicator:Ca},Ka="https://json-schema.org/keyword/properties",za=(e,t)=>S(L(e),E(async([r,n])=>[r,await d.compile(n,t)]),Be),Ba=(e,t,r)=>{var o;if(g(t)!=="object")return!0;let n=!0;for(const[s,i]of fe(t)){const a=v(s);a in e&&(d.interpret(e[a],i,r)||(n=!1),(o=r.evaluatedProperties)==null||o.add(a))}return n},Ga=!0,Ja={id:Ka,compile:za,interpret:Ba,simpleApplicator:Ga},Za="https://json-schema.org/keyword/propertyDependencies",Wa=(e,t)=>S(L(e),E(async([r,n])=>[r,await S(L(n),E(async([o,s])=>[o,await d.compile(s,t)]),Be)]),Be),Xa=(e,t,r)=>{if(g(t)!=="object")return!0;let n=!0;const o=v(t);for(const[s,i]of Object.entries(e)){const a=o[s];te(s,t)&&a in i&&!d.interpret(i[a],t,r)&&(n=!1)}return n},Ha=!0,Qa={id:Za,compile:Wa,interpret:Xa,simpleApplicator:Ha},Ya="https://json-schema.org/keyword/propertyNames",ec=(e,t)=>d.compile(e,t),tc=(e,t,r)=>{if(g(t)!=="object")return!0;let n=!0;for(const o of lt(t))d.interpret(e,o,r)||(n=!1);return n},rc=!0,nc={id:Ya,compile:ec,interpret:tc,simpleApplicator:rc},oc="https://json-schema.org/keyword/readOnly",sc=e=>l(e),ic=()=>!0,ac=e=>e,cc={id:oc,compile:sc,interpret:ic,annotation:ac},pc="https://json-schema.org/keyword/ref",dc=(...e)=>d.compile(...e),mc=(...e)=>d.interpret(...e),lc=!0,uc={id:pc,compile:dc,interpret:mc,simpleApplicator:lc},hc="https://json-schema.org/keyword/requireAllExcept",fc=async(e,t,r)=>{const n=await l(e),o=b(e.document.dialectId,"https://json-schema.org/keyword/properties"),s=await R(o,r),i=T(s)==="object"?Ke(s):[],a=new Set(i);return n.forEach(c=>i.remove(c)),[...a]},yc=(e,t)=>g(t)!=="object"||e.every(r=>Object.hasOwn(v(t),r)),gc={id:hc,compile:fc,interpret:yc},$c="https://json-schema.org/keyword/required",wc=e=>l(e),jc=(e,t)=>g(t)!=="object"||e.every(r=>Object.hasOwn(v(t),r)),kc={id:$c,compile:wc,interpret:jc},bc="https://json-schema.org/keyword/title",vc=e=>l(e),Ac=()=>!0,Ic=e=>e,Ec={id:bc,compile:vc,interpret:Ac,annotation:Ic},Sc="https://json-schema.org/keyword/then",Oc=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/if");if(ar(n,r)){const o=await R(n,r);return[await d.compile(o,t),await d.compile(e,t)]}else return[]},xc=([e,t],r,n)=>e===void 0||!d.interpret(e,r,{...n,plugins:n.ast.plugins})||d.interpret(t,r,n),Pc=!0,Rc={id:Sc,compile:Oc,interpret:xc,simpleApplicator:Pc},_c="https://json-schema.org/keyword/type",Tc=e=>l(e),Nc=(e,t)=>typeof e=="string"?Pt(t)(e):e.some(Pt(t)),Pt=e=>t=>t==="integer"?g(e)==="number"&&Number.isInteger(v(e)):g(e)===t,Fc={id:_c,compile:Tc,interpret:Nc},Dc="https://json-schema.org/keyword/unevaluatedItems",Uc=async(e,t,r)=>[Ee(r),await d.compile(e,t)],Mc=([e,t],r,n)=>{var c;if(g(r)!=="array"||n.rootSchema===e)return!0;const o=new Vc(e);d.interpret(e,r,{...n,plugins:[...n.ast.plugins,o]});const s=o.evaluatedItems;let i=!0,a=0;for(const u of M(r))s.has(a)||(d.interpret(t,u,n)||(i=!1),(c=n.evaluatedItems)==null||c.add(a)),a++;return i},qc=!0;class Vc{constructor(t){this.rootSchema=t}beforeSchema(t,r,n){n.evaluatedItems??(n.evaluatedItems=new Set),n.schemaEvaluatedItems??(n.schemaEvaluatedItems=new Set)}beforeKeyword(t,r,n){n.rootSchema=this.rootSchema,n.evaluatedItems=new Set}afterKeyword(t,r,n,o,s){if(o)for(const i of n.evaluatedItems)s.schemaEvaluatedItems.add(i)}afterSchema(t,r,n,o){if(o)for(const s of n.schemaEvaluatedItems)n.evaluatedItems.add(s);this.evaluatedItems=n.evaluatedItems}}const Cc={id:Dc,compile:Uc,interpret:Mc,simpleApplicator:qc},Lc="https://json-schema.org/keyword/unevaluatedProperties",Kc=async(e,t,r)=>[Ee(r),await d.compile(e,t)],zc=([e,t],r,n)=>{var a;if(g(r)!=="object"||n.rootSchema===e)return!0;const o=new Gc(e);d.interpret(e,r,{...n,plugins:[...n.ast.plugins,o]});const s=o.evaluatedProperties;let i=!0;for(const[c,u]of fe(r)){const h=v(c);s.has(h)||(d.interpret(t,u,n)||(i=!1),(a=n.evaluatedProperties)==null||a.add(h))}return i},Bc=!0;class Gc{constructor(t){this.rootSchema=t}beforeSchema(t,r,n){n.evaluatedProperties??(n.evaluatedProperties=new Set),n.schemaEvaluatedProperties??(n.schemaEvaluatedProperties=new Set)}beforeKeyword(t,r,n){n.rootSchema=this.rootSchema,n.evaluatedProperties=new Set}afterKeyword(t,r,n,o,s){if(o)for(const i of n.evaluatedProperties)s.schemaEvaluatedProperties.add(i)}afterSchema(t,r,n,o){if(o)for(const s of n.schemaEvaluatedProperties)n.evaluatedProperties.add(s);this.evaluatedProperties=n.evaluatedProperties}}const Jc={id:Lc,compile:Kc,interpret:zc,simpleApplicator:Bc},Zc="https://json-schema.org/keyword/uniqueItems",Wc=e=>l(e),Xc=(e,t)=>{if(g(t)!=="array"||e===!1)return!0;const r=v(t).map(ye);return new Set(r).size===r.length},Hc={id:Zc,compile:Wc,interpret:Xc},Qc="https://json-schema.org/keyword/unknown",Yc=e=>[[...ve(e.cursor)].pop(),l(e)],ep=()=>!0,tp=([,e])=>e,rp={id:Qc,compile:Yc,interpret:ep,annotation:tp},np={id:"https://json-schema.org/keyword/vocabulary"},op="https://json-schema.org/keyword/writeOnly",sp=e=>l(e),ip=()=>!0,ap=e=>e,cp={id:op,compile:sp,interpret:ip,annotation:ap};tr("application/schema+json",Fn);p(co);p(ho);p(fo);p(wo);p(vo);p(Po);p(No);p(Mo);p(Ko);p(Zo);p(Yo);p(os);p(cs);p(ls);p(gs);p(bs);p(Ss);p(Os);p(Ns);p(qs);p(Ks);p(Zs);p(Qs);p(ri);p(ai);p(ci);p(ui);p(Ii);p(Pi);p(Ni);p(Mi);p(Li);p(Gi);p(Xi);p(ea);p(oa);p(ca);p(la);p(ya);p(ja);p(Aa);p(Oa);p(_a);p(Ua);p(La);p(Ja);p(Qa);p(nc);p(cc);p(uc);p(gc);p(kc);p(Ec);p(Rc);p(Fc);p(Cc);p(Jc);p(Hc);p(rp);p(np);p(cp);const pp={$schema:"https://json-schema.org/validation",$vocabulary:{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/unevaluated":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0},title:"Core and Validation specifications meta-schema",$dynamicAnchor:"meta",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}]},dp={$schema:"https://json-schema.org/validation",title:"Core vocabulary meta-schema",$dynamicAnchor:"meta",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{$ref:"#/$defs/anchor"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{$ref:"#/$defs/anchor"},$dynamicAnchor:{$ref:"#/$defs/anchor"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},$defs:{anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"}}},mp={$schema:"https://json-schema.org/validation",title:"Applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"meta"},contains:{$dynamicRef:"meta"},itemPattern:{$ref:"#/$defs/itemPattern"},additionalProperties:{$dynamicRef:"meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"meta"}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"},propertyNames:{format:"regex"}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"meta"}},propertyDependencies:{type:"object",additionalProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},propertyNames:{$dynamicRef:"meta"},if:{$dynamicRef:"meta"},then:{$dynamicRef:"meta"},else:{$dynamicRef:"meta"},conditional:{type:"array",items:{if:{type:"array"},then:{items:{$dynamicRef:"meta"}},else:{$dynamicRef:"meta"}}},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"meta"}},itemPattern:{type:"array",itemPattern:[[{if:{type:"array"},then:{$ref:"#/$defs/itemPattern"},else:{$dynamicRef:"meta"}},{enum:["?","*","+"]},"?","|",{const:"|"}],"*"]}}},lp={$schema:"https://json-schema.org/validation",title:"Validation vocabulary meta-schema",$dynamicAnchor:"meta",properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeInteger"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeInteger"},uniqueItems:{type:"boolean"},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger"},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeInteger"},required:{$ref:"#/$defs/stringArray"},optional:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0}}},up={$schema:"https://json-schema.org/validation",title:"Meta-data vocabulary meta-schema",$dynamicAnchor:"meta",properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean"},readOnly:{type:"boolean"},writeOnly:{type:"boolean"},examples:{type:"array"}}},hp={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for annotation results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},fp={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for assertion results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},yp={$schema:"https://json-schema.org/validation",title:"Content vocabulary meta-schema",$dynamicAnchor:"meta",properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"meta"}}},gp={$schema:"https://json-schema.org/validation",title:"Unevaluated applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{unevaluatedItems:{$dynamicRef:"meta"},unevaluatedProperties:{$dynamicRef:"meta"}}};q("https://json-schema.org/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});q("https://json-schema.org/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",minContains:"https://json-schema.org/keyword/minContains",maxContains:"https://json-schema.org/keyword/maxContains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",conditional:"https://json-schema.org/keyword/conditional",items:"https://json-schema.org/keyword/items",itemPattern:"https://json-schema.org/keyword/itemPattern",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyDependencies:"https://json-schema.org/keyword/propertyDependencies",propertyNames:"https://json-schema.org/keyword/propertyNames"});q("https://json-schema.org/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",requireAllExcept:"https://json-schema.org/keyword/requireAllExcept",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});q("https://json-schema.org/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});q("https://json-schema.org/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});q("https://json-schema.org/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});q("https://json-schema.org/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});q("https://json-schema.org/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});const $r="https://json-schema.org/validation";pt($r,{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0,"https://json-schema.org/vocab/unevaluated":!0});U(pp,$r);U(dp,"https://json-schema.org/meta/core");U(mp,"https://json-schema.org/meta/applicator");U(lp,"https://json-schema.org/meta/validation");U(up,"https://json-schema.org/meta/meta-data");U(hp,"https://json-schema.org/meta/format-annotation");U(fp,"https://json-schema.org/meta/format-assertion");U(yp,"https://json-schema.org/meta/content");U(gp,"https://json-schema.org/meta/unevaluated");const $p={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},wp="https://json-schema.org/keyword/draft-04/additionalItems",jp=async(e,t,r)=>{const n=b(e.document.dialectId,"https://json-schema.org/keyword/draft-04/items"),o=await R(n,r);return[T(o)==="array"?mt(o):Number.MAX_SAFE_INTEGER,await d.compile(e,t)]},kp=([e,t],r,n)=>{var i;if(g(r)!=="array")return!0;let o=!0,s=e;for(const a of pr(e,M(r)))d.interpret(t,a,n)||(o=!1),(i=n.evaluatedItems)==null||i.add(s),s++;return o},bp=!0,vp={id:wp,compile:jp,interpret:kp,simpleApplicator:bp},Ap="https://json-schema.org/keyword/draft-06/contains",Ip=(e,t)=>d.compile(e,t),Ep=(e,t,r)=>g(t)!=="array"||Vn(n=>d.interpret(e,n,r),M(t)),Sp={id:Ap,compile:Ip,interpret:Ep},Op="https://json-schema.org/keyword/draft-04/dependencies",xp=(e,t)=>S(L(e),E(async([r,n])=>[r,T(n)==="array"?l(n):await d.compile(n,t)]),_),Pp=(e,t,r)=>g(t)!=="object"?!0:e.every(([n,o])=>te(n,t)?Array.isArray(o)?o.every(s=>te(s,t)):d.interpret(o,t,r):!0),Rp={id:Op,compile:xp,interpret:Pp},_p="https://json-schema.org/keyword/draft-04/items",Tp=(e,t)=>T(e)==="array"?S(V(e),E(r=>d.compile(r,t)),_):d.compile(e,t),Np=(e,t,r)=>{var s,i;if(g(t)!=="array")return!0;let n=!0,o=0;if(typeof e=="string")for(const a of M(t))d.interpret(e,a,r)||(n=!1),(s=r.evaluatedItems)==null||s.add(o++);else for(const[a,c]of dr(e,M(t))){if(!c)break;d.interpret(a,c,r)||(n=!1),(i=r.evaluatedItems)==null||i.add(o),o++}return n},Fp=!0,Dp={id:_p,compile:Tp,interpret:Np,simpleApplicator:Fp},Up={id:"https://json-schema.org/keyword/draft-04/id"},Mp={id:"https://json-schema.org/keyword/draft-04/ref"};p(vp);p(Sp);p(Rp);p(Up);p(Dp);p(Mp);const Ze="http://json-schema.org/draft-07/schema";q(Ze,{$id:"https://json-schema.org/keyword/draft-04/id",$ref:"https://json-schema.org/keyword/draft-04/ref",$comment:"https://json-schema.org/keyword/comment",additionalItems:"https://json-schema.org/keyword/draft-04/additionalItems",additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",const:"https://json-schema.org/keyword/const",contains:"https://json-schema.org/keyword/draft-06/contains",contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",default:"https://json-schema.org/keyword/default",definitions:"https://json-schema.org/keyword/definitions",dependencies:"https://json-schema.org/keyword/draft-04/dependencies",description:"https://json-schema.org/keyword/description",enum:"https://json-schema.org/keyword/enum",examples:"https://json-schema.org/keyword/examples",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",format:"https://json-schema.org/keyword/format",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/draft-04/items",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",pattern:"https://json-schema.org/keyword/pattern",patternProperties:"https://json-schema.org/keyword/patternProperties",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames",readOnly:"https://json-schema.org/keyword/readOnly",required:"https://json-schema.org/keyword/required",title:"https://json-schema.org/keyword/title",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems",writeOnly:"https://json-schema.org/keyword/writeOnly"});pt(Ze,{[Ze]:!0},!0);U($p);const qp="https://json-schema.org/validation",Vp=(e,t,r=qp)=>{const n=Qt(t,r);return e.annotations[n]??[]};class Cp extends Error{constructor(t){super("Validation Error"),this.name=this.constructor.name,this.output=t}}const Lp=async(e,t=void 0,r=void 0)=>{const n=await cr(e),o=await hr(n),s=(i,a)=>Kp(o,Y(i),a);return t===void 0?s:s(t,r)},Kp=(e,t,r=Ge)=>{const n=new ro,o=r.plugins??[],s=fr(e,t,{outputFormat:typeof r=="string"?r:r.outputFormat??Ge,plugins:[n,...o]});if(!s.valid)throw new Cp(s);for(const i of n.annotations){const a=Ln(i.instanceLocation,t),c=i.keyword;a.annotations[c]||(a.annotations[c]=[]),a.annotations[c].unshift(i.annotation)}return t};function wr(e,t,r){if(t){for(const[n,o]of fe(t))if(v(n)===e)return Vp(o,r)[0]}}function zp(e,t){if(t){const r=wr(e,t,"title");if(r)return r}return e}function Bp(e,t){if(t)return wr(e,t,"description")}function Gp(e){const[t,r]=ke.useState(!1);return ke.useEffect(()=>{if(e&&e.$id)if(Dn(e.$id))r(!0);else try{U(e),r(!0)}catch(n){console.error("Unable to register JSON Schema in @hyperjump/json-schema:",n)}},[e]),t}function Jp(e,t){const r=Gp(t);return Ar({queryKey:["getAnnotatedInstance",{json:e,schema:t,schemaIsRegistered:r}],queryFn:()=>{if(e&&t&&r)try{return Lp(t.$id,e)}catch(n){console.error("Could not create annotated schema instance:",n)}return null},enabled:!!(t&&e)})}function Se(e){return typeof e=="number"||typeof e=="boolean"?e.toString():Fr(e)?xr(Ve(e)):e}function Rt(e){const{entityId:t,versionNumber:r}=e,[n,o]=ke.useState(!1),{data:s,isLoading:i,refetch:a}=Pr(t,r,!0),c=s==null?void 0:s.entityMetadata,u=s==null?void 0:s.annotations,{data:h,isLoading:m}=Rr(t),{data:y,isLoading:$}=_r(h==null?void 0:h.jsonSchemaVersionInfo.$id,{enabled:!!h}),{data:f,isLoading:A}=Jp(s==null?void 0:s.entity,y),{data:F,refetch:I}=Tr(t,{enabled:!!h}),O=!!h,W=!!c&&!!F&&Ve(c.modifiedOn).diff(Ve(F.validatedOn))>0,X=ke.useCallback(async()=>{o(!0);const P=[void a(),void I()];await Promise.allSettled(P),o(!1)},[a,I]);return i||m||$||A||n?k.jsx(Nr,{numRows:3,numCols:2}):k.jsxs(k.Fragment,{children:[c&&u&&Ir(u)?k.jsxs("div",{className:"placeholder",children:["This"," ",Te(Ne(c.concreteType))," ","has no annotations."]}):null,k.jsx("table",{className:"AnnotationsTable",children:k.jsxs("tbody",{children:[u&&Object.keys(u).map(P=>k.jsxs("tr",{className:"AnnotationsTable__Row",children:[k.jsx("td",{className:"AnnotationsTable__Row__Key",children:k.jsx(Ce,{annotationKey:P,title:zp(P,f),description:Bp(P,f)})}),k.jsx("td",{className:"AnnotationsTable__Row__Value",children:Array.isArray(u[P])?u[P].map(Se).join(", "):Se(u[P])})]},P)),O?k.jsxs("tr",{className:"AnnotationsTable__Row",children:[k.jsx("td",{className:"AnnotationsTable__Row__Key Schema",children:"Validation Schema"}),k.jsx("td",{className:"AnnotationsTable__Row__Value",children:k.jsx("a",{href:`${Er(Sr.REPO_ENDPOINT)}/repo/v1/schema/type/registered/${h.jsonSchemaVersionInfo.$id}`,target:"_blank",rel:"noopener noreferrer",children:h.jsonSchemaVersionInfo.schemaName})})]}):null]})}),c&&O&&W&&k.jsx(Or,{variant:"warning",description:`This ${Te(Ne(c.concreteType))} has changed since it has been last validated. If this ${Te(Ne(c.concreteType))} is expected to have annotations derived from the Validation Schema, they may not yet be visible.`,primaryButtonConfig:{text:"Reload Annotations",onClick:()=>{X()}},isGlobal:!1})]})}try{Se.displayName="getDisplayedAnnotation",Se.__docgenInfo={description:"",displayName:"getDisplayedAnnotation",props:{}}}catch{}try{Rt.displayName="AnnotationsTable",Rt.__docgenInfo={description:"",displayName:"AnnotationsTable",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}export{Rt as A,Se as g};
