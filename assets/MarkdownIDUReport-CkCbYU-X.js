import{ao as y,aa as h,j as e,dK as _,dJ as S,bX as R,r as x}from"./iframe-BwBHmtLn.js";import{u as b}from"./useInfiniteQuery-CJ62jRAa.js";import{u as N}from"./index-BrUdlfVy.js";import{M as w}from"./MarkdownSynapse-C2XjXP5O.js";import{S as D}from"./SkeletonTable-CwWx9Hg9.js";import{U as I}from"./UserBadge-BD5Fxkmm.js";import"./index-r8ZA1smB.js";import"./SkeletonButton-BTCaeByw.js";import"./SkeletonInlineBlock-ZHAchM_I.js";import"./SkeletonParagraph-CvcuNn1V.js";import"./MenuItem-CkdRDM7m.js";import"./Card-CWfuhv8s.js";import"./Chip-DeqIQwfV.js";function k(s,r){const{accessToken:o,keyFactory:a}=y(),t={accessRequirementId:s};return b({...r,queryKey:a.getApprovedSubmissionInfoQueryKey(t),queryFn:async n=>await h.getApprovedSubmissionInfo({...t,nextPageToken:n.pageParam},o),initialPageParam:void 0,getNextPageParam:n=>n.nextPageToken})}function p({info:s}){return e.jsx(e.Fragment,{children:s&&e.jsxs("p",{className:"SubmissionInfoCard",children:[e.jsx("strong",{children:" Project Lead: "})," ",e.jsx("span",{children:s.projectLead})," ",e.jsx("br",{}),e.jsx("strong",{children:" Institution: "})," ",e.jsx("span",{children:s.institution})," ",e.jsx("br",{}),e.jsx("strong",{children:" Data Access Request Submitted By: "})," ",e.jsx(I,{userId:s.submittedBy})," ",e.jsx("br",{}),e.jsxs("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",_(S(s.modifiedOn),"M/D/YYYY"),"):"]}),e.jsx(w,{markdown:s.intendedDataUseStatement}),s.accessorChanges&&s.accessorChanges.map(r=>e.jsxs("div",{children:[e.jsx(I,{userId:r.userId})," ",r.type]},`${r.userId}-${r.type}`))]})})}function f(){return e.jsxs("p",{className:"SubmissionInfoCard",children:[e.jsx(D,{numCols:1,numRows:4}),e.jsx(R,{variant:"rectangular",width:"100%",height:80})]})}try{p.displayName="SubmissionInfoCard",p.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}function u(s){const{accessRequirementId:r}=s,{ref:o,inView:a}=N(),{data:t,status:n,isLoading:j,hasNextPage:m,isFetchingNextPage:d,fetchNextPage:c}=k(r,{throwOnError:!0});x.useEffect(()=>{n==="success"&&!d&&m&&c&&a&&c()},[n,m,d,c,a]);const l=(t==null?void 0:t.pages.flatMap(i=>i.results))??[];return e.jsxs(e.Fragment,{children:[l.length>0&&e.jsxs("div",{className:"IDUReport",children:[l.map(i=>e.jsxs(x.Fragment,{children:[e.jsx(p,{info:i}),e.jsx("hr",{})]},JSON.stringify(i))),e.jsx("div",{ref:o})]}),(j||d)&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(f,{})]})]})}try{u.displayName="IDUReport",u.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function g(s){const{accessRestrictionId:r}=s;return e.jsx(u,{accessRequirementId:r})}try{g.displayName="MarkdownIDUReport",g.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}export{g as default};
