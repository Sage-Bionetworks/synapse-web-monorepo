import{aM as k,l as u,S as y,aN as f,aO as S,aP as g,aQ as F,aR as K}from"./useFiles-D5p9mEeJ.js";import{u as Q}from"./useTheme-bvUc0IYs.js";import{u as d}from"./useMediaQuery-8keSXorZ.js";import{b as T}from"./_baseFlatten-BJNPEdBb.js";import{b as C}from"./_baseOrderBy-CTgxCT8j.js";import{b as P,a as A}from"./merge-TeTmR9Lg.js";import"./VerificationSubmission-dxY1kvC5.js";import"./StringUtils-Df7AZImX.js";import"./OrientationBanner-oeQY9W6x.js";import"./index-B1D9r8pK.js";import{u as h}from"./useQueries-CycBXIIw.js";import{u as q}from"./useQuery-CWk1d_fS.js";import{u as m}from"./utils-D8g86RT1.js";import{u as o}from"./useMutation-CH3bWcC7.js";import{u as v}from"./useInfiniteQuery-n0yO58Aq.js";import{g as R}from"./QueryFilterUtils-D8Yy-EdU.js";import"./jsx-runtime-DAw_QoWs.js";var D=P(function(e,s){if(e==null)return[];var t=s.length;return t>1&&A(e,s[0],s[1])?s=[]:t>2&&A(s[0],s[1],s[2])&&(s=[s[0]]),C(e,T(s,1),[])});const b=async(e,s)=>{const t=s.map(c=>k(e,c)),r=await Promise.all(t);return D(s,c=>-1*Number(r.find(n=>c===n.accessRequirementId).isApproved))};function X(){const e=Q();return d(e.breakpoints.up("md"))}function Y(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getAccessRequirementQueryKey(String(e)),queryFn:()=>y.getAccessRequirementById(t,e)})}function Z(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getEntityAccessRequirementsQueryKey(e),queryFn:()=>y.getAllAccessRequirements(t,e)})}function _(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getTeamAccessRequirementsQueryKey(e),queryFn:()=>y.getTeamAccessRequirements(t,e)})}function $(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getAccessRequirementWikiPageKey(e),queryFn:()=>y.getWikiPageKeyForAccessRequirement(t,e)})}function p(e){const s=m(),{accessToken:t,keyFactory:r}=u();return o({...e,mutationFn:c=>S(t,c),onSuccess:async(c,n,a)=>{const i=r.getAccessRequirementQueryKey(c.id.toString());if(s.setQueryData(i,c),e!=null&&e.onSuccess)return await e.onSuccess(c,n,a)}})}function ee(e){const s=m(),{accessToken:t,keyFactory:r}=u();return o({...e,mutationFn:c=>f(t,c),onSuccess:async(c,n,a)=>{const i=r.getAccessRequirementQueryKey(c.id.toString());if(s.setQueryData(i,c),e!=null&&e.onSuccess)return await e.onSuccess(c,n,a)}})}function se(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getAccessRequirementAclQueryKey(e),queryFn:()=>y.getAccessRequirementAcl(t,e)})}function ce(e){const s=m(),{accessToken:t,keyFactory:r}=u();return o({...e,mutationFn:c=>g(t,c),onSuccess:async(c,n,a)=>{await s.invalidateQueries({queryKey:r.getAccessRequirementAclQueryKey(n)}),e!=null&&e.onSuccess&&await e.onSuccess(c,n,a)}})}function te(e){const s=m(),{accessToken:t,keyFactory:r}=u();return o({...e,mutationFn:c=>F(t,c),onSuccess:async(c,n,a)=>{const i=r.getAccessRequirementAclQueryKey(c.id);if(s.setQueryData(i,c),e!=null&&e.onSuccess)return await e.onSuccess(c,n,a)}})}function re(e){const s=m(),{accessToken:t,keyFactory:r}=u();return o({...e,mutationFn:c=>K(t,c),onSuccess:async(c,n,a)=>{const i=r.getAccessRequirementAclQueryKey(c.id);if(s.setQueryData(i,c),e!=null&&e.onSuccess)return await e.onSuccess(c,n,a)}})}function ue(e,s){const{accessToken:t,keyFactory:r}=u();return v({...s,queryKey:r.searchAccessRequirementsQueryKey(e),queryFn:async c=>await y.searchAccessRequirements(t,{...e,nextPageToken:c.pageParam}),initialPageParam:void 0,getNextPageParam:c=>c.nextPageToken})}function ne(e){const{accessToken:s}=u(),t=m(),{keyFactory:r}=u();return o({...e,mutationFn:c=>y.createLockAccessRequirement(c,s),mutationKey:["createLockAccessRequirement"],onSuccess:async(c,n,a)=>{if(await Promise.all([t.invalidateQueries({queryKey:r.getAccessRequirementQueryKey()}),t.invalidateQueries({queryKey:r.getAllEntityDataQueryKey()}),...R(r).map(i=>t.invalidateQueries(i))]),e!=null&&e.onSuccess)return e.onSuccess(c,n,a)}})}function l(e,s,t){return{queryKey:e.getAccessRequirementStatusQueryKey(t),queryFn:()=>y.getAccessRequirementStatus(s,t)}}function ae(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,...l(r,t,e)})}function ye(e){const{accessToken:s,keyFactory:t}=u();return h({queries:e.map(r=>l(t,s,r))})}function ie(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getSortedAccessRequirementsAndStatusQueryKey(e),queryFn:()=>b(t,e)})}function me(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getAccessRequirementResearchProjectQueryKey(e),queryFn:()=>y.getResearchProject(e,t)})}function oe(e){const{accessToken:s}=u(),t=m(),{keyFactory:r}=u();return o({...e,mutationFn:c=>y.updateResearchProject(c,s),onSuccess:async(c,n,a)=>{if(await t.invalidateQueries({queryKey:r.getAccessRequirementResearchProjectQueryKey(c.accessRequirementId)}),e!=null&&e.onSuccess)return e.onSuccess(c,n,a)}})}function qe(e,s){const{accessToken:t,keyFactory:r}=u();return q({...s,queryKey:r.getDataAccessRequestForUpdateQueryKey(e),queryFn:()=>y.getDataAccessRequestForUpdate(e,t)})}function Ae(e){const{accessToken:s}=u(),t=m(),{keyFactory:r}=u();return o({...e,mutationFn:c=>y.updateDataAccessRequest(c,s),onSuccess:async(c,n,a)=>{if(await t.invalidateQueries({queryKey:r.getDataAccessRequestForUpdateQueryKey(c.accessRequirementId)}),e!=null&&e.onSuccess)return e.onSuccess(c,n,a)}})}function Re(e){const{accessToken:s}=u(),t=m(),{keyFactory:r}=u();return o({...e,mutationFn:c=>y.createAccessApproval(s,c),onSuccess:async(c,n,a)=>{if(await Promise.all([t.invalidateQueries({queryKey:r.getAccessRequirementStatusQueryKey(String(n.requirementId))}),...R(r).map(i=>t.invalidateQueries(i))]),e!=null&&e.onSuccess)return e.onSuccess(c,n,a)}})}function le(e){const{accessToken:s}=u(),t=m(),{keyFactory:r}=u();return o({...e,mutationFn:c=>y.cancelDataAccessRequest(c.submissionId,s),onSuccess:async(c,n,a)=>{if(await Promise.all([t.invalidateQueries({queryKey:r.getDataAccessSubmissionQueryKey()}),t.invalidateQueries({queryKey:r.getAccessRequirementStatusQueryKey(String(n.accessRequirementId))})]),e!=null&&e.onSuccess)return e.onSuccess(c,n,a)}})}export{se as a,ce as b,te as c,re as d,me as e,oe as f,ae as g,$ as h,Re as i,X as j,ue as k,Y as l,p as m,ee as n,_ as o,ye as p,qe as q,Ae as r,D as s,le as t,ne as u,Z as v,ie as w};
