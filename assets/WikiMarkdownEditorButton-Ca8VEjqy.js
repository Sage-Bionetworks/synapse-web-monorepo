import{r as n,j as e,W as y,d$ as R,B as f,c5 as C}from"./iframe-CKkRwo5v.js";import{u as N,a as M,b as L,M as b}from"./MarkdownSynapse-COK-Gxgq.js";import{W as U}from"./WikiMarkdownEditor-CtZWGV5c.js";import{d as j}from"./ConfirmationDialog-CVuhYKmi.js";const T="Failed to load the wiki page: ",B="Edit Wiki Page",h={children:B,color:"primary",variant:"contained"};function g(s){const{ownerObjectType:a,ownerObjectId:i,wikiPageId:l,displayWikiMarkdown:m=!1}=s,_=j({},s.buttonProps,h),[k,t]=n.useState(!1),{data:u,isLoading:S,error:d}=N(a,i,{enabled:l===void 0}),{mutate:A,isPending:v,error:I}=M({onSuccess:()=>t(!0)}),p=n.useMemo(()=>{const o=l||u?.wikiPageId||"";return{ownerObjectType:a,ownerObjectId:i,wikiPageId:o}},[l,u,i,a]),{data:r,isLoading:E,error:c}=L(p,{enabled:p.wikiPageId!=="",staleTime:1/0}),P=n.useMemo(()=>d?T+d.reason:c?T+c.reason:I?I.reason:null,[d,c,I]),w=()=>{r?t(!0):u===null?A({ownerObjectId:i,ownerObjectType:a,wikiPage:{parentWikiId:void 0,title:"",markdown:"",attachmentFileHandleIds:[]}}):console.warn("There was an error fetching the root WikiPageKey or WikiPage - address that error first.")},O=n.useMemo(()=>{const o={showPlaceholderIfNoWikiContent:!0};return r?{...o,ownerId:i,objectType:a,wikiId:r.id}:{...o,markdown:""}},[i,a,r]);return e.jsxs(e.Fragment,{children:[m&&e.jsx(y,{sx:{mb:1},children:E||S?e.jsx(R,{}):e.jsx(b,{...O},r?.markdown)}),e.jsx(f,{onClick:w,disabled:E||S||v,..._}),P&&e.jsx(C,{severity:"error",sx:{marginTop:2},children:P}),r&&e.jsx(U,{open:k,ownerObjectType:a,ownerObjectId:i,wikiPage:r,onSave:()=>t(!1),onCancel:()=>t(!1)},k.toString())]})}try{g.displayName="WikiMarkdownEditorButton",g.__docgenInfo={description:"",displayName:"WikiMarkdownEditorButton",props:{ownerObjectType:{defaultValue:null,description:"",name:"ownerObjectType",required:!0,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},ownerObjectId:{defaultValue:null,description:"",name:"ownerObjectId",required:!0,type:{name:"string"}},wikiPageId:{defaultValue:null,description:"",name:"wikiPageId",required:!1,type:{name:"string"}},buttonProps:{defaultValue:null,description:"",name:"buttonProps",required:!1,type:{name:'Omit<ButtonProps, "onClick" | "disabled">'}},displayWikiMarkdown:{defaultValue:null,description:"",name:"displayWikiMarkdown",required:!1,type:{name:"boolean"}}}}}catch{}export{g as W};
