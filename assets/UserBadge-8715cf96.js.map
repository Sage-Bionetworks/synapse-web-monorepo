{"version":3,"file":"UserBadge-8715cf96.js","sources":["../../src/utils/hooks/useOverlay.tsx","../../src/utils/hooks/usePreFetchResource.ts","../../src/synapse-queries/file/useFiles.ts","../../src/synapse-queries/user/useUserGroupHeader.ts","../../src/utils/functions/getUserData.ts","../../src/assets/icons/IconCopy.tsx","../../src/assets/icons/ValidatedProfile.tsx","../../src/components/UserCard/UserCardContextMenu.tsx","../../src/assets/icons/CertifiedUser.tsx","../../src/components/UserCard/UserCardLarge.tsx","../../src/components/UserCard/UserCardMedium.tsx","../../src/components/UserCard/Avatar.tsx","../../src/components/UserCard/UserCard.tsx","../../src/components/UserCard/UserBadge.tsx"],"sourcesContent":["import React, {\n  RefObject,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport { Fade, Paper, PaperProps, Popover, PopoverProps } from '@mui/material'\n\nfunction resetTimer(timer: NodeJS.Timeout | null) {\n  if (timer) {\n    clearTimeout(timer)\n  }\n}\n\nconst DEFAULT_DELAY_SHOW_MS = 250\nconst DEFAULT_DELAY_HIDE_MS = 500\n\nexport function useOverlay(\n  children: JSX.Element,\n  targetRef: RefObject<any>,\n  delayShow = DEFAULT_DELAY_SHOW_MS,\n  delayHide = DEFAULT_DELAY_HIDE_MS,\n  paperProps: PaperProps = {},\n  anchorOrigin: PopoverProps['anchorOrigin'] = {\n    vertical: 'top',\n    horizontal: 'right',\n  },\n  transformOrigin: PopoverProps['transformOrigin'] = {\n    vertical: 'center',\n    horizontal: 'left',\n  },\n) {\n  const isMounted = useRef(false)\n  const timer = useRef<NodeJS.Timeout | null>(null)\n  const [isShowing, setIsShowing] = useState(false)\n\n  useEffect(() => {\n    isMounted.current = true\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const toggle = useCallback(\n    (show: boolean = isShowing, withDelay: boolean = true) => {\n      resetTimer(timer.current)\n      if (withDelay) {\n        timer.current = setTimeout(\n          () => {\n            if (isMounted.current) {\n              setIsShowing(show)\n            }\n          },\n          show ? delayShow : delayHide,\n        )\n      } else {\n        setIsShowing(show)\n      }\n    },\n    [delayHide, delayShow, isShowing],\n  )\n\n  const toggleShow = useCallback(\n    (withDelay: boolean = true) => {\n      toggle(true, withDelay)\n    },\n    [toggle],\n  )\n\n  const toggleHide = useCallback(\n    (withDelay: boolean = true) => {\n      toggle(false, withDelay)\n    },\n    [toggle],\n  )\n\n  const OverlayComponent = useCallback(\n    () => (\n      <Popover\n        TransitionComponent={Fade}\n        anchorEl={targetRef.current}\n        open={isShowing}\n        anchorOrigin={anchorOrigin}\n        transformOrigin={transformOrigin}\n        sx={{ pointerEvents: 'none' }}\n      >\n        <Paper\n          {...paperProps}\n          onMouseEnter={() => {\n            toggle(true, false)\n          }}\n          onMouseLeave={() => {\n            toggleHide(true)\n          }}\n          sx={{\n            pointerEvents: 'auto',\n            width: 'max-content',\n            minWidth: '300px',\n            ...paperProps.sx,\n          }}\n        >\n          {children}\n        </Paper>\n      </Popover>\n    ),\n    [children, isShowing, anchorOrigin, targetRef, toggle, toggleHide],\n  )\n\n  return { OverlayComponent, isShowing, toggleShow, toggleHide, toggle }\n}\n","import { useEffect, useState } from 'react'\nimport { useQuery } from 'react-query'\n\nexport async function fetchBlob(url: string): Promise<Blob> {\n  const response = await fetch(url)\n  return await response.blob()\n}\n\nexport function releaseResourceUrl(resourceUrl: string) {\n  URL.revokeObjectURL(resourceUrl)\n}\n\n/**\n * Custom hook for retrieving a resource and assigning it a localhost URL. This is useful for\n * fetching resources from URLs that may expire before the resource renders.\n * @param preSignedURL\n * @returns a localhost URL referencing the prefetched resource\n */\nexport default function usePreFetchResource(\n  preSignedURL?: string,\n): string | undefined {\n  const { data: blob, error } = useQuery(\n    ['usePreFetchResource', preSignedURL],\n    () => fetchBlob(preSignedURL!),\n    {\n      enabled: !!preSignedURL,\n      // The URL may expire, so the fetched item should never be marked as 'stale'; a refetch may not work.\n      staleTime: Infinity,\n    },\n  )\n\n  useEffect(() => {\n    if (error) {\n      console.error(\n        `Failed to fetch object with presigned URL ${preSignedURL}. See network log for details`,\n      )\n    }\n  }, [error, preSignedURL])\n\n  // While the retrieved data is cached by react-query, the object created by URL.createObjectURL is not. More specifically,\n  // the stored object is different for each instance of this hook, so when one instance tears down and deletes its object,\n  // other instances of the hook are not affected.\n  // This uses more memory than necessary in cases where the same object is fetched multiple times, but it's a tradeoff\n  // for simple cache and resource management.\n  return useCreateUrlForData(blob)\n}\n\n/**\n * Uses URL.createObjectURL to create a URL for the given blob. When this hook unmounts, the URL is released.\n * @param blob\n */\nexport function useCreateUrlForData(blob: Blob | null | undefined) {\n  const [resourceUrl, setResourceURL] = useState<string | undefined>(undefined)\n\n  useEffect(() => {\n    if (blob) {\n      const objectUrl = URL.createObjectURL(blob)\n      setResourceURL(objectUrl)\n    } else {\n      setResourceURL(undefined)\n    }\n  }, [blob])\n\n  useEffect(() => {\n    return () => {\n      // When we no longer need the object, we release it.\n      // See https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n      if (resourceUrl) {\n        releaseResourceUrl(resourceUrl)\n      }\n    }\n  }, [resourceUrl])\n\n  return resourceUrl\n}\n","import { UseQueryOptions, useQuery, useQueryClient } from 'react-query'\nimport SynapseClient from '../../synapse-client'\nimport { SynapseClientError } from '../../utils/SynapseClientError'\nimport { useSynapseContext } from '../../utils/context/SynapseContext'\nimport {\n  BatchFileRequest,\n  BatchFileResult,\n  FileHandle,\n  FileHandleAssociation,\n} from '@sage-bionetworks/synapse-types'\nimport { cloneDeep } from 'lodash-es'\n\nexport function useGetPresignedUrlContent(\n  fileHandle: FileHandle,\n  request: BatchFileRequest,\n  maxFileSizeBytes?: number,\n  options?: Omit<UseQueryOptions<string, SynapseClientError>, 'staleTime'>,\n) {\n  if (request.requestedFiles.length !== 1) {\n    console.warn('useGetPresignedUrlContent only supports one file at a time')\n  }\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryFn = async () => {\n    const batchFileResult = await SynapseClient.getFiles(request, accessToken)\n    const data = await SynapseClient.getFileHandleContent(\n      fileHandle,\n      batchFileResult.requestedFiles[0].preSignedURL!,\n      maxFileSizeBytes,\n    )\n    return data\n  }\n  return useQuery<string, SynapseClientError>(\n    keyFactory.getPresignedUrlContentQueryKey(\n      fileHandle,\n      request,\n      maxFileSizeBytes,\n    ),\n\n    queryFn,\n    {\n      staleTime: Infinity,\n      ...options,\n    },\n  )\n}\n\nexport function useGetPresignedUrlContentFromFHA(\n  fileHandleAssociation: FileHandleAssociation,\n  forceAnonymous: boolean = false,\n  options?: Omit<UseQueryOptions<string, SynapseClientError>, 'staleTime'>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryFn = async () => {\n    const batchFileResult = await SynapseClient.getFiles(\n      {\n        requestedFiles: [fileHandleAssociation],\n        includeFileHandles: true,\n        includePreSignedURLs: true,\n        includePreviewPreSignedURLs: false,\n      },\n      forceAnonymous ? undefined : accessToken,\n    )\n    const data = await SynapseClient.getFileHandleContent(\n      batchFileResult.requestedFiles[0].fileHandle!,\n      batchFileResult.requestedFiles[0].preSignedURL!,\n    )\n    return data\n  }\n  return useQuery<string, SynapseClientError>(\n    keyFactory.getPresignedUrlFromFHAContentQueryKey(\n      fileHandleAssociation,\n      forceAnonymous,\n    ),\n\n    queryFn,\n    {\n      staleTime: Infinity,\n      ...options,\n    },\n  )\n}\n\n/**\n * Get a blob containing the image data for the avatar of a Synapse user. Returns null if the user does not have a profile image.\n */\nexport function useGetProfileImage(\n  userId: string,\n  options?: Omit<UseQueryOptions<Blob | null, SynapseClientError>, 'staleTime'>,\n) {\n  const { keyFactory } = useSynapseContext()\n  const queryFn = async () => {\n    const presignedUrl = await SynapseClient.getProfilePicPreviewPresignedUrl(\n      userId,\n    )\n    if (presignedUrl) {\n      // Fetch the presigned URL right away because it will expire\n      const data = await fetch(presignedUrl, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache',\n      })\n      return await data.blob()\n    }\n    return null\n  }\n  return useQuery<Blob | null, SynapseClientError>(\n    keyFactory.getProfileImageQueryKey(userId),\n    queryFn,\n    {\n      staleTime: Infinity,\n      ...options,\n    },\n  )\n}\n\n/**\n * Get a batch of file handle data from the backend.\n *\n * This hook does not support fetching pre-signed URLs. In most web UI cases, you will want to either request the presigned\n * URL upon an invoked action (e.g. a \"download\" button is clicked) or use {@link SynapseClient#getPortalFileHandleServletUrl}\n * @param request\n * @param options\n */\nexport function useGetFileBatch(\n  request: BatchFileRequest,\n  options?: UseQueryOptions<BatchFileResult, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryClient = useQueryClient()\n  const queryFn = async () => {\n    const response = await SynapseClient.getFiles(request, accessToken)\n\n    // Update the cache with the individual file handle results, in case this was a batch\n    response.requestedFiles.forEach(fileResult => {\n      const requestedItem = request.requestedFiles.find(\n        fha => fha.fileHandleId === fileResult.fileHandleId,\n      )!\n      const atomicRequest: BatchFileRequest = {\n        ...cloneDeep(request),\n        requestedFiles: [requestedItem],\n      }\n      const atomicResult: BatchFileResult = {\n        requestedFiles: [fileResult],\n      }\n      queryClient.setQueryData(\n        keyFactory.getBatchOfFiles(atomicRequest),\n        atomicResult,\n      )\n    })\n    return response\n  }\n\n  if (request.includePreSignedURLs || request.includePreviewPreSignedURLs) {\n    // Don't use this hook if you need pre-signed URLs. They expire every 30 seconds, so you will either end up giving the\n    // user an expired URL, or making requests to the backend more frequently than necessary.\n    throw new Error('useGetFileBatch does not support pre-signed URLs.')\n  }\n\n  return useQuery<BatchFileResult, SynapseClientError>(\n    keyFactory.getBatchOfFiles(request),\n    queryFn,\n    {\n      ...options,\n    },\n  )\n}\n","import { useQuery, useQueryClient, UseQueryOptions } from 'react-query'\nimport SynapseClient from '../../synapse-client'\nimport { SynapseClientError } from '../../utils/SynapseClientError'\nimport { useSynapseContext } from '../../utils/context/SynapseContext'\nimport { TYPE_FILTER, UserGroupHeader } from '@sage-bionetworks/synapse-types'\n\n/**\n * Get a single UserGroupHeader, utilizing a react-query cache.  This is always an unauthenticated call\n * (the user's current email address will never be returned in the result).\n * @param principalId\n * @param options\n * @returns\n */\nexport function useGetUserGroupHeader(\n  principalId: string,\n  options?: UseQueryOptions<UserGroupHeader, SynapseClientError>,\n) {\n  const { keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getUserGroupHeaderQueryKey(principalId)\n\n  return useQuery<UserGroupHeader, SynapseClientError>(\n    queryKey,\n    async () => {\n      const responsePage = await SynapseClient.getGroupHeadersBatch([\n        principalId,\n      ])\n      if (responsePage.children.length !== 1) {\n        throw new Error(\n          `Expected one response in useGetUserGroupHeader for id: ${principalId}, got ${responsePage.children.length}`,\n        )\n      }\n      return responsePage.children[0]\n    },\n    options,\n  )\n}\n\n/**\n * Get an array of UserGroupHeaders, utilizing a react-query cache.  This is always an unauthenticated call\n * (the users current email addresses will never be returned in the result).\n * @param principalId\n * @param options\n * @returns\n */\nexport function useGetUserGroupHeaders(\n  principalIds: string[],\n  options?: UseQueryOptions<UserGroupHeader[], SynapseClientError>,\n) {\n  const { keyFactory } = useSynapseContext()\n  const queryClient = useQueryClient()\n  const queryKey = keyFactory.getUserGroupHeaderBatchQueryKey(principalIds)\n  const queryFn = async () => {\n    const response = await SynapseClient.getGroupHeadersBatch(principalIds)\n\n    // Update the cache with each individual header\n    response.children.forEach(userGroupHeader => {\n      queryClient.setQueryData(\n        keyFactory.getUserGroupHeaderQueryKey(userGroupHeader.ownerId),\n        userGroupHeader,\n      )\n    })\n\n    return response.children\n  }\n\n  return useQuery<UserGroupHeader[], SynapseClientError>(\n    queryKey,\n    queryFn,\n    options,\n  )\n}\n\nexport function useSearchUserGroupHeaders(\n  prefix: string,\n  filter?: TYPE_FILTER,\n  options?: UseQueryOptions<UserGroupHeader[], SynapseClientError>,\n) {\n  const { keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getUserGroupHeaderSearchQueryKey(prefix, filter)\n\n  return useQuery<UserGroupHeader[], SynapseClientError>(\n    queryKey,\n    async () => {\n      const responsePage = await SynapseClient.getUserGroupHeaders(\n        prefix,\n        filter,\n      )\n      return responsePage.children\n    },\n    options,\n  )\n}\n\nexport function useGetUserGroupHeaderWithAlias(\n  aliases: string[],\n  options?: UseQueryOptions<UserGroupHeader[], SynapseClientError>,\n) {\n  const { keyFactory } = useSynapseContext()\n\n  const queryKey = keyFactory.getUserGroupHeaderWithAliasQueryKey(aliases)\n\n  return useQuery<UserGroupHeader[], SynapseClientError>(\n    queryKey,\n    async () => {\n      const response = await SynapseClient.postUserGroupHeadersWithAlias(\n        aliases,\n      )\n      return response.list\n    },\n    options,\n  )\n}\n","import SynapseClient from '../../synapse-client'\nimport { BackendDestinationEnum, getEndpoint } from './getEndpoint'\n\n/*\n  Utility functions for UserCards\n*/\n\nexport async function getUserProfileWithProfilePicAttached(\n  principalIds: string[],\n) {\n  const userProfiles = await SynapseClient.getUserProfiles(principalIds)\n  const profilesWithPictures = userProfiles.list.map(profile => {\n    if (profile.profilePicureFileHandleId) {\n      return {\n        ...profile,\n        clientPreSignedURL: `${getEndpoint(\n          BackendDestinationEnum.REPO_ENDPOINT,\n        )}/repo/v1/userProfile/${profile.ownerId}/image/preview?redirect=true`,\n      }\n    } else {\n      return profile\n    }\n  })\n  return { list: profilesWithPictures }\n}\n\nconst COLORS: string[] = [\n  'chocolate',\n  'black',\n  'firebrick',\n  'maroon',\n  'olive',\n  'green',\n  'forestgreen',\n  'darkturquoise',\n  'teal',\n  'blue',\n  'navy',\n  'darkmagenta',\n  'purple',\n  'blue',\n  'orangered',\n  'blueviolet',\n]\n\nconst hash = (userName: string) => {\n  const val = userName\n    .split('')\n    .reduce(\n      (prevHash, currVal) =>\n        ((prevHash << 5) - prevHash + currVal.charCodeAt(0)) | 0,\n      0,\n    )\n  return Math.abs(val)\n}\n\nexport const getColor = (userName: string) => {\n  const hashedUserName = hash(userName)\n  return COLORS[hashedUserName % COLORS.length]\n}\n","import React from 'react'\n\nconst IconCopy = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    className={`Icon-Copy ${props.className ?? ''}`}\n    width=\"12\"\n    height=\"14\"\n    viewBox=\"0 0 12 14\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M10.7368 12.7273H3.78947V3.81818H10.7368V12.7273ZM10.7368 2.54545H3.78947C3.45446 2.54545 3.13317 2.67954 2.89629 2.91823C2.6594 3.15691 2.52632 3.48063 2.52632 3.81818V12.7273C2.52632 13.0648 2.6594 13.3885 2.89629 13.6272C3.13317 13.8659 3.45446 14 3.78947 14H10.7368C11.0719 14 11.3931 13.8659 11.63 13.6272C11.8669 13.3885 12 13.0648 12 12.7273V3.81818C12 3.48063 11.8669 3.15691 11.63 2.91823C11.3931 2.67954 11.0719 2.54545 10.7368 2.54545V2.54545ZM8.8421 0H1.26316C0.928148 0 0.606858 0.134091 0.36997 0.372773C0.133082 0.611456 0 0.935179 0 1.27273V10.1818H1.26316V1.27273H8.8421V0Z\" />\n  </svg>\n)\n\nexport default IconCopy\n","import React from 'react'\n\nconst svg = (\n  <span className=\"SRC-validatedProfileIcon\">\n    <svg\n      width=\"18\"\n      height=\"18\"\n      viewBox=\"0 0 18 18\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M1.21612 12.9284C1.00431 13.5978 1.46323 14.3024 2.16925 14.4081L2.62816 14.4786C3.12238 14.5491 3.51069 14.9366 3.61659 15.4299L3.68719 15.8879C3.7931 16.5925 4.49912 17.0153 5.20514 16.8039L5.66405 16.663C6.15827 16.5221 6.68778 16.6982 6.97019 17.121L7.2526 17.5086C7.67621 18.0723 8.48813 18.178 9.01765 17.6847L9.37066 17.3676C9.75897 17.0153 10.2885 16.9448 10.7474 17.1915L11.171 17.4029C11.8064 17.7552 12.5831 17.4733 12.8302 16.8039L13.0067 16.3811C13.1832 15.9231 13.6774 15.606 14.1716 15.6413L14.6305 15.6765C15.3365 15.7117 15.9367 15.1128 15.8661 14.4081L15.8307 13.9501C15.7954 13.4569 16.0779 12.9636 16.5721 12.7875L16.9957 12.6113C17.6664 12.3294 17.9135 11.5543 17.5605 10.9554L17.2428 10.5678C16.9957 10.145 17.0663 9.58133 17.384 9.19378L17.7017 8.84145C18.1606 8.31297 18.09 7.50264 17.4899 7.07985L17.1016 6.83322C16.678 6.55137 16.5015 6.02289 16.6427 5.52964L16.7839 5.07162C16.9957 4.40221 16.5368 3.69757 15.8307 3.59187L15.3718 3.52141C14.8776 3.45094 14.4893 3.06339 14.3834 2.57014L14.3128 2.11212C14.2069 1.40748 13.5009 0.984696 12.7949 1.19609L12.3359 1.33702C11.8417 1.47795 11.3122 1.30179 11.0298 0.879L10.7474 0.491447C10.3238 -0.072267 9.51186 -0.177963 8.98235 0.315286L8.62934 0.632375C8.24103 0.984696 7.71151 1.05516 7.2526 0.808536L6.82899 0.597143C6.19357 0.244822 5.41694 0.526679 5.16984 1.19609L4.99333 1.61887C4.81683 2.07689 4.32261 2.39398 3.8284 2.35875L3.44009 2.28828C2.73407 2.25305 2.13395 2.852 2.20455 3.55664L2.23985 4.01466C2.27515 4.50791 1.99274 5.00116 1.49853 5.17732L1.07492 5.35348C0.404196 5.63533 0.15709 6.41044 0.5101 7.00939L0.757207 7.39694C1.00431 7.81972 0.933712 8.38344 0.616003 8.77099L0.298294 9.12331C-0.16062 9.65179 -0.0900176 10.4621 0.5101 10.8849L0.898411 11.1315C1.32202 11.4134 1.49853 11.9419 1.35732 12.4351L1.21612 12.9284ZM6.37007 7.6788L7.92332 9.26424L11.6652 5.56487L13.2891 7.18555L9.54716 10.8497L7.92332 12.4704L6.29947 10.8497L4.74622 9.29947L6.37007 7.6788Z\"\n        fill=\"#28A745\"\n      />\n    </svg>\n  </span>\n)\nexport default svg\n","import React from 'react'\nimport { UserProfile } from '@sage-bionetworks/synapse-types'\nimport { SEPERATOR } from '../../utils/SynapseConstants'\n\nexport type MenuAction = {\n  field: string\n  callback?: (userProfile: UserProfile) => void\n}\n\nexport type UserCardContextMenuProps = {\n  userProfile: UserProfile\n  menuActions: MenuAction[]\n}\n\nconst UserCardContextMenu: React.FC<UserCardContextMenuProps> = (\n  props: UserCardContextMenuProps,\n) => {\n  const { menuActions = [], userProfile } = props\n  return (\n    <div className=\"dropdown open\">\n      <ul\n        className=\"dropdown-menu dropdown-menu-right\"\n        aria-labelledby=\"dropdownMenu1\"\n      >\n        {menuActions.map((menuAction, index) => {\n          const callback = () => menuAction.callback!(userProfile)\n          if (menuAction.field === SEPERATOR) {\n            return (\n              <hr className=\"SRC-break\" key={`${menuAction.field}_${index}`} />\n            )\n          }\n          return (\n            <li\n              role=\"menuitem\"\n              key={menuAction.field}\n              style={{ listStyle: 'none' }}\n              className=\"SRC-menu-item SRC-table-dropdown-list SRC-primary-background-color-hover\"\n              onClick={callback}\n              onKeyPress={callback}\n            >\n              <button className=\"SRC-menuAction\">{menuAction.field}</button>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default UserCardContextMenu\n","import React from 'react'\n\nconst svg = (\n  <span className=\"SRC-certified-user-icon\">\n    <svg\n      width=\"17\"\n      height=\"20\"\n      viewBox=\"0 0 17 20\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M5.63578 14.1759C5.53042 14.0916 5.40399 14.0284 5.27756 14.0284L4.39256 13.9652C3.48648 13.902 2.68576 13.4384 2.15897 12.7641L0.0518096 17.2523C-0.137835 17.6738 0.220382 18.1584 0.683957 18.0741L2.5804 17.7159C2.81219 17.6738 3.06505 17.7791 3.19148 18.0109L4.11862 19.6966C4.35041 20.1181 4.94042 20.097 5.13006 19.6545L7.174 15.2927C6.85793 15.1663 6.584 14.9977 6.31007 14.7659L5.63578 14.1759Z\"\n        fill=\"#58A158\"\n      />\n      <path\n        d=\"M16.6564 17.2523L14.5492 12.7641C14.0224 13.4384 13.2217 13.8809 12.3156 13.9652L11.4306 14.0284C11.2831 14.0495 11.1778 14.0916 11.0724 14.1759L10.3981 14.7448C10.1453 14.9555 9.85025 15.1452 9.53418 15.2716L11.5781 19.6334C11.7678 20.0549 12.3788 20.0759 12.5896 19.6756L13.5167 17.9899C13.6431 17.7791 13.8749 17.6527 14.1278 17.6948L16.0242 18.0531C16.4878 18.1374 16.8671 17.6738 16.6564 17.2523Z\"\n        fill=\"#58A158\"\n      />\n      <path\n        d=\"M10.2503 13.2277C10.5453 12.9748 10.9246 12.8063 11.3249 12.7852L12.2099 12.722C13.1371 12.6588 13.8746 11.9212 13.9378 10.9941L14.001 10.1091C14.0221 9.70873 14.1906 9.32944 14.4435 9.03444L15.0335 8.36015C15.6446 7.64372 15.6446 6.61121 15.0335 5.91585L14.4435 5.24156C14.1906 4.94655 14.0221 4.56727 14.001 4.16691L13.9378 3.2819C13.8746 2.35475 13.1371 1.61724 12.2099 1.55403L11.3249 1.49081C10.9246 1.46974 10.5453 1.30117 10.2503 1.04831L9.57597 0.458307C8.85954 -0.152769 7.82703 -0.152769 7.13167 0.458307L6.45738 0.985097C6.16237 1.23796 5.78309 1.40653 5.38273 1.4276L4.49772 1.49081C3.57057 1.55403 2.83306 2.29153 2.76985 3.21868L2.70664 4.10369C2.68556 4.50405 2.51699 4.88334 2.26413 5.17834L1.67413 5.85263C1.06305 6.56907 1.06305 7.60157 1.67413 8.29694L2.26413 8.97123C2.51699 9.26623 2.68556 9.64552 2.70664 10.0459L2.76985 10.9309C2.83306 11.858 3.57057 12.5955 4.49772 12.6588L5.38273 12.722C5.78309 12.743 6.16237 12.9116 6.45738 13.1645L7.13167 13.7545C7.8481 14.3656 8.88061 14.3656 9.57597 13.7545L10.2503 13.2277ZM4.39236 7.11693C4.39236 4.92548 6.16237 3.15547 8.35382 3.15547C10.5453 3.15547 12.3153 4.92548 12.3153 7.11693C12.3153 9.30837 10.5453 11.0784 8.35382 11.0784C6.16237 11.0784 4.39236 9.2873 4.39236 7.11693Z\"\n        fill=\"#58A158\"\n      />\n      <path\n        d=\"M10.5875 6.0844L9.49182 5.87368C9.38646 5.85261 9.28111 5.7894 9.23896 5.68404L8.6911 4.69367C8.5436 4.44081 8.16431 4.44081 8.03788 4.69367L7.49002 5.68404C7.42681 5.7894 7.34252 5.85261 7.23716 5.87368L6.14144 6.0844C5.84644 6.14761 5.74108 6.50583 5.93072 6.71654L6.6893 7.53834C6.77359 7.62262 6.79466 7.72798 6.79466 7.83334L6.66823 8.95013C6.62609 9.24513 6.94216 9.45585 7.19502 9.32942L8.20646 8.84477C8.31181 8.80263 8.41717 8.80263 8.52253 8.84477L9.53396 9.32942C9.8079 9.45585 10.1029 9.24513 10.0608 8.95013L9.93433 7.83334C9.91325 7.72798 9.9554 7.60155 10.0397 7.53834L10.7983 6.71654C10.9879 6.48476 10.8825 6.14761 10.5875 6.0844Z\"\n        fill=\"#C94281\"\n      />\n    </svg>\n  </span>\n)\nexport default svg\n","import React from 'react'\nimport CertifiedUserIcon from '../../assets/icons/CertifiedUser'\nimport { UserProfile } from '@sage-bionetworks/synapse-types'\n\ntype UserCardLargeProps = {\n  userProfile: UserProfile\n  isCertified?: boolean\n}\n\n/**\n * UserCardLarge wraps around UserCardMedium\n *\n * @export UserCardLarge\n * @param {UserCardLargeProps} { userProfile }\n */\n// Disable function name because compiler has to know that its a class\n// tslint:disable-next-line:function-name\nexport function UserCardLarge({\n  userProfile,\n  isCertified,\n}: UserCardLargeProps) {\n  const { summary, industry, location, url } = userProfile\n\n  return (\n    <div className=\"SRC-cardMetaData\">\n      <div className=\"SRC-cardMetaData-scroll\">\n        {summary && (\n          <div>\n            <p className=\"SRC-card-metadata-title\"> Bio </p>\n            <p>{summary}</p>\n          </div>\n        )}\n        {url && (\n          <div>\n            <p className=\"SRC-card-metadata-title\"> More Info </p>\n            <p>{url}</p>\n          </div>\n        )}\n        {industry && (\n          <div>\n            <p className=\"SRC-card-metadata-title\"> Industry </p>\n            <p>{industry}</p>\n          </div>\n        )}\n        {location && (\n          <div>\n            <p className=\"SRC-card-metadata-title\"> Location </p>\n            <p>{location}</p>\n          </div>\n        )}\n        {isCertified && (\n          <div>\n            <p className=\"SRC-card-metadata-title\"> Access </p>\n            <p>{CertifiedUserIcon} Certified Account</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n","import { Skeleton, Tooltip } from '@mui/material'\nimport React, { useEffect, useRef, useState } from 'react'\nimport IconCopy from '../../assets/icons/IconCopy'\nimport ValidatedProfileIcon from '../../assets/icons/ValidatedProfile'\nimport { SkeletonTable } from '../Skeleton/SkeletonTable'\nimport { SynapseConstants } from '../../utils'\nimport { PRODUCTION_ENDPOINT_CONFIG } from '../../utils/functions/getEndpoint'\nimport { useGetUserBundle } from '../../synapse-queries/user/useUserBundle'\nimport { UserProfile } from '@sage-bionetworks/synapse-types'\nimport { Avatar } from './Avatar'\nimport IconSvg from '../IconSvg/IconSvg'\nimport { ToastMessage } from '../ToastMessage/ToastMessage'\nimport UserCardContextMenu, { MenuAction } from './UserCardContextMenu'\nimport { UserCardLarge } from './UserCardLarge'\n\nexport type UserCardMediumProps = {\n  userProfile: UserProfile\n  menuActions?: MenuAction[]\n  imageURL?: string\n  hideEmail?: boolean\n  isLarge?: boolean\n  link?: string\n  openLinkInNewTab?: boolean\n  disableLink?: boolean\n  isCertified?: boolean\n  isValidated?: boolean\n  isLoadingAvatar?: boolean\n}\n\n/**\n * Function handles copying to clipboard the user's email address\n *\n * @param {string} value the email address of the user\n * @returns\n */\nconst copyToClipboard =\n  (\n    ref: React.MutableRefObject<HTMLElement | null>,\n    value: string,\n    onCopy: () => void,\n  ) =>\n  (event: React.SyntheticEvent) => {\n    event.preventDefault()\n\n    // use the Clipboard API\n    // https://caniuse.com/mdn-api_clipboard_writetext\n    navigator.clipboard.writeText(value).then(() => {\n      onCopy()\n    })\n  }\n\nexport const UserCardMedium: React.FC<UserCardMediumProps> = ({\n  userProfile,\n  menuActions,\n  isLarge = false,\n  imageURL,\n  hideEmail = false,\n  disableLink = false,\n  link,\n  openLinkInNewTab = false,\n  isValidated,\n  isCertified,\n  isLoadingAvatar,\n}) => {\n  const [showModal, setShowModal] = useState(false)\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false)\n\n  const copyToClipboardRef = useRef<HTMLParagraphElement>(null)\n\n  const onCopyToClipboard = () => {\n    // show modal and hide after 4 seconds, the timing is per Material Design\n    setShowModal(true)\n    // hide after 4 seconds\n    setTimeout(() => {\n      setShowModal(false)\n    }, 4000)\n  }\n\n  const { displayName, userName, firstName, lastName, position, company } =\n    userProfile\n\n  useEffect(() => {\n    const pageClick = (_event: any) => {\n      if (!isContextMenuOpen) {\n        return\n      }\n      // hide content menu (deferred, to allow menu action to process)\n      setTimeout(() => {\n        if (isContextMenuOpen) {\n          toggleContextMenu(_event)\n        }\n      }, 10)\n    }\n    // SWC-4778: https://stackoverflow.com/questions/23821768/how-to-listen-for-click-events-that-are-outside-of-a-component\n    window.addEventListener('mouseup', pageClick, false)\n    return () => {\n      window.removeEventListener('mouseup', pageClick, false)\n    }\n  }, [])\n\n  const { data: userBundle } = useGetUserBundle(\n    userProfile.ownerId,\n    SynapseConstants.USER_BUNDLE_MASK_ORCID,\n  )\n\n  const ORCID = userBundle?.ORCID\n\n  const toggleContextMenu = (_event: any) => {\n    setIsContextMenuOpen(isOpen => !isOpen)\n  }\n\n  let name = ''\n  const linkLocation = link\n    ? link\n    : `${PRODUCTION_ENDPOINT_CONFIG.PORTAL}#!Profile:${userProfile.ownerId}`\n  // linkLocation is overriden by custom click handler\n  const email = `${userName}@synapse.org`\n  if (displayName) {\n    name = displayName\n  } else if (firstName && lastName) {\n    name = `${firstName} ${lastName}`\n  } else if (userName) {\n    name = userName\n  }\n  const avatar = (\n    <Avatar\n      userProfile={userProfile}\n      imageURL={imageURL}\n      avatarSize={'LARGE'}\n      isLoadingAvatar={isLoadingAvatar}\n    />\n  )\n  const mediumCard = (\n    <React.Fragment>\n      {!hideEmail && (\n        <ToastMessage\n          show={showModal}\n          text=\"Email address copied to clipboard\"\n          autohide={true}\n        ></ToastMessage>\n      )}\n      {disableLink && avatar}\n      {!disableLink && (\n        // eslint-disable-next-line react/jsx-no-target-blank\n        <a\n          href={linkLocation}\n          target={openLinkInNewTab ? '_blank' : ''}\n          rel={openLinkInNewTab ? 'noreferrer' : ''}\n          className={`SRC-no-border-bottom-imp ${\n            isLarge ? 'SRC-isLargeCard' : ''\n          }`}\n        >\n          {avatar}\n        </a>\n      )}\n      <div className=\"SRC-cardContent\">\n        <p className=\"SRC-eqHeightRow SRC-userCardName\">\n          {/*\n              if its a medium component the header should be clickable (unless disableLink is set),\n              if its large then it should NOT be clickable\n            */}\n          {/* make SRC-whiteText overridable with a good name! */}\n          {isLarge || disableLink ? (\n            <span className={isLarge ? 'SRC-whiteText' : 'SRC-blackText'}>\n              {name}\n            </span>\n          ) : (\n            // consolidate click events\n            // eslint-disable-next-line react/jsx-no-target-blank\n            <a\n              href={linkLocation}\n              target={openLinkInNewTab ? '_blank' : ''}\n              rel={openLinkInNewTab ? 'noreferrer' : ''}\n              tabIndex={0}\n              className={'SRC-hand-cursor'}\n            >\n              {name}\n            </a>\n          )}\n          {isValidated && (\n            <Tooltip\n              title=\"This user profile has been validated.\"\n              placement=\"bottom\"\n              enterNextDelay={300}\n            >\n              <span>{ValidatedProfileIcon}</span>\n            </Tooltip>\n          )}\n        </p>\n        {(position || company) && (\n          <p className={`${isLarge ? 'SRC-whiteText' : ''}`}>\n            {position} {position ? ' / ' : ''} {company}\n          </p>\n        )}\n        {!hideEmail && (\n          <p\n            ref={copyToClipboardRef}\n            className={`${isLarge ? 'SRC-whiteText' : ''}\n              SRC-hand-cursor SRC-eqHeightRow SRC-inlineFlex SRC-emailText SRC-cardSvg`}\n            onClick={copyToClipboard(\n              copyToClipboardRef,\n              email,\n              onCopyToClipboard,\n            )}\n            onKeyPress={copyToClipboard(\n              copyToClipboardRef,\n              email,\n              onCopyToClipboard,\n            )}\n            tabIndex={0}\n          >\n            <span style={{ paddingRight: '5px', paddingBottom: '2px' }}>\n              <a className={`link ${isLarge ? 'SRC-whiteText' : ''}`}>\n                {`${userName}@synapse.org`}\n              </a>\n            </span>\n            <IconCopy />\n          </p>\n        )}\n        {ORCID && (\n          <a\n            href={ORCID}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{ width: 'fit-content' }}\n            tabIndex={0}\n            className={isLarge ? 'SRC-whiteText' : ''}\n          >\n            View ORCID\n          </a>\n        )}\n      </div>\n      {/* conditionally render menu actions, if there are no actions then we don't show the button */}\n      {menuActions && menuActions.length > 0 && (\n        <React.Fragment>\n          <span\n            role=\"menu\"\n            className={`SRC-extraPadding SRC-hand-cursor SRC-primary-background-color-hover SRC-inlineBlock\n              SRC-cardMenuButton ${\n                isContextMenuOpen ? 'SRC-primary-background-color' : ''\n              }`}\n            style={{ outline: 'none' }}\n            tabIndex={0}\n            onClick={toggleContextMenu}\n            onKeyPress={toggleContextMenu}\n          >\n            <span\n              className={\n                isContextMenuOpen || isLarge\n                  ? 'SRC-whiteText'\n                  : 'SRC-primary-text-color'\n              }\n            >\n              <IconSvg icon=\"verticalEllipsis\" />\n            </span>\n          </span>\n          {isContextMenuOpen && (\n            <UserCardContextMenu\n              menuActions={menuActions}\n              userProfile={userProfile}\n            />\n          )}\n        </React.Fragment>\n      )}\n      {!menuActions && <span style={{ padding: '0px 0px 0px 35px' }} />}\n    </React.Fragment>\n  )\n\n  if (!isLarge) {\n    return (\n      <div\n        style={{ border: '1px solid #DDDDDF', backgroundColor: 'white' }}\n        className={`cardContainer SRC-userCard SRC-userCardMediumUp ${\n          isContextMenuOpen ? 'SRC-hand-cursor' : ''\n        }`}\n        onClick={isContextMenuOpen ? toggleContextMenu : undefined}\n      >\n        {mediumCard}\n      </div>\n    )\n  }\n  // else return medium card inside large component\n  // when the component is large we have to set the click handler to wrap both the top and bottom portion\n  return (\n    <div\n      className={\n        isContextMenuOpen ? 'SRC-hand-cursor cardContainer' : 'cardContainer'\n      }\n      onClick={isContextMenuOpen ? toggleContextMenu : undefined}\n    >\n      <div\n        className={`SRC-primary-background-color SRC-userCard SRC-userCardMediumUp ${\n          isContextMenuOpen ? 'SRC-hand-cursor' : ''\n        }`}\n      >\n        {mediumCard}\n      </div>\n      {isLarge ? (\n        <UserCardLarge userProfile={userProfile} isCertified={isCertified} />\n      ) : (\n        false\n      )}\n    </div>\n  )\n}\n\nexport const LoadingUserCardMedium: React.FunctionComponent = () => {\n  return (\n    <div\n      className=\"cardContainer SRC-userCard SRC-userCardMediumUp\"\n      style={{ width: '380px' }}\n    >\n      <Skeleton variant=\"circular\" width=\"80px\" height=\"80px\" />\n      <div style={{ width: '250px' }}>\n        <SkeletonTable numCols={1} numRows={2} />\n      </div>\n    </div>\n  )\n}\n\nexport default UserCardMedium\n","import React, { useRef } from 'react'\nimport { getColor } from '../../utils/functions/getUserData'\nimport { UserProfile } from '@sage-bionetworks/synapse-types'\nimport UserCardMedium from './UserCardMedium'\nimport { useOverlay } from '../../utils/hooks'\nimport { Avatar as MUIAvatar, Skeleton, SxProps } from '@mui/material'\n\nconst TIMER_DELAY_SHOW = 250 // milliseconds\nconst TIMER_DELAY_HIDE = 500\n\nexport type AvatarSize = 'SMALL' | 'MEDIUM' | 'LARGE'\n\nexport type AvatarProps = {\n  userProfile: UserProfile\n  avatarSize?: AvatarSize\n  imageURL?: string\n  showCardOnHover?: boolean\n  isLoadingAvatar?: boolean\n  className?: string\n}\n\nexport const Avatar: React.FunctionComponent<AvatarProps> = ({\n  userProfile,\n  avatarSize = 'LARGE',\n  imageURL,\n  showCardOnHover = false,\n  isLoadingAvatar = false,\n  className,\n}) => {\n  const target = useRef(null)\n\n  const mediumUserCard = (\n    <UserCardMedium userProfile={userProfile} imageURL={imageURL} />\n  )\n  const {\n    OverlayComponent,\n    isShowing: isShowingOverlay,\n    toggleShow,\n    toggleHide,\n  } = useOverlay(mediumUserCard, target, TIMER_DELAY_SHOW, TIMER_DELAY_HIDE, {\n    sx: { maxWidth: '425px' },\n  })\n\n  let sizeStyles: SxProps = {}\n  switch (avatarSize) {\n    case 'SMALL':\n      sizeStyles = {\n        fontSize: '12px',\n        width: '20px',\n        height: '20px',\n      }\n      break\n    case 'MEDIUM':\n      sizeStyles = {\n        fontSize: '18px',\n        width: '30px',\n        height: '30px',\n      }\n      break\n    case 'LARGE':\n      sizeStyles = {\n        fontSize: '26px',\n        width: '80px',\n        height: '80px',\n      }\n      break\n    default:\n      break\n  }\n\n  const cursorStyle = showCardOnHover ? 'pointer' : 'unset'\n\n  const hasProfileImage = !!imageURL\n\n  const conditionalStyles: React.CSSProperties = hasProfileImage\n    ? {\n        backgroundImage: `url(${imageURL})`,\n      }\n    : { background: getColor(userProfile.userName) }\n\n  if (isLoadingAvatar) {\n    return <Skeleton sx={sizeStyles} variant=\"circular\" />\n  }\n\n  let content: JSX.Element | string = <></>\n\n  if (!hasProfileImage) {\n    content = userProfile.firstName\n      ? userProfile.firstName[0]\n      : userProfile.userName[0]\n  }\n\n  return (\n    <>\n      {showCardOnHover && <OverlayComponent />}\n      <MUIAvatar\n        ref={target}\n        role=\"img\"\n        onMouseEnter={() => toggleShow()}\n        onMouseLeave={() => toggleHide()}\n        onClick={event => {\n          if (showCardOnHover) {\n            event.stopPropagation()\n          }\n          isShowingOverlay ? toggleHide(false) : toggleShow(false)\n        }}\n        className={`${className ?? ''}`}\n        sx={{\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat',\n          backgroundSize: 'cover',\n          cursor: cursorStyle,\n          textDecoration: 'none',\n          ...sizeStyles,\n          ...conditionalStyles,\n        }}\n      >\n        {content}\n      </MUIAvatar>\n    </>\n  )\n}\n","import React, { useMemo } from 'react'\nimport { SynapseConstants } from '../../utils'\nimport { useGetProfileImage } from '../../synapse-queries/file/useFiles'\nimport {\n  useGetPrincipalIdForAlias,\n  useGetUserProfile,\n} from '../../synapse-queries/user/useUserBundle'\nimport usePreFetchResource, {\n  useCreateUrlForData,\n} from '../../utils/hooks/usePreFetchResource'\nimport { AliasType, UserProfile } from '@sage-bionetworks/synapse-types'\nimport { Avatar, AvatarSize } from './Avatar'\nimport { MenuAction } from './UserCardContextMenu'\nimport UserCardMedium from './UserCardMedium'\nimport { UserBadge } from './UserBadge'\nimport { UserCardSize } from '../../utils/SynapseConstants'\n\nexport type UserCardProps = {\n  /** A UserProfile may be used for data for the card. You must supply one of `userProfile`, `alias`, `ownerId` */\n  userProfile?: UserProfile\n  /** An alias that resolves the ownerId for the UserProfile. You must supply one of `userProfile`, `alias`, `ownerId` */\n  alias?: string\n  /** The unique ownerId of the UserProfile. You must supply one of `userProfile`, `alias`, `ownerId` */\n  ownerId?: string\n  /** Whether to hide the user's Synapse email address */\n  hideEmail?: boolean\n  /** If set, the corresponding image will be shown for the user. */\n  preSignedURL?: string\n  /** Specifies the card size */\n  size: UserCardSize\n  /** For the small user card or avatar, shows the medium user card on mouseover */\n  showCardOnHover?: boolean\n  /** @deprecated For the small user card, hides the tooltip observed when hovering over the profile image. */\n  hideTooltip?: boolean\n  /** Specifies the dropdown menu functionality for the ellipsis on medium/large cards. If field === 'SEPERATOR' then a break will occur in the menu. If left undefined, the menu will not render to the screen. */\n  menuActions?: MenuAction[]\n  /** The link to point to on the username, defaults to https://www.synapse.org/#!Profile:${userProfile.ownerId} */\n  link?: string\n  openLinkInNewTab?: boolean\n  /** Disables the `@username` link for the small user card (if `showCardOnHover` is false). For the medium user card, disables linking the user's name to their profile (or other specified destination) */\n  disableLink?: boolean\n  isCertified?: boolean\n  isValidated?: boolean\n  /** Determines the size of the avatar when size === 'AVATAR' or (size === 'SMALL' and withAvatar is true) */\n  avatarSize?: AvatarSize\n  /** Whether to show the avatar with the name for the small user card */\n  withAvatar?: boolean\n  /** @deprecated Whether to show the full name in the small user card */\n  showFullName?: boolean\n  className?: string\n  /** @deprecated show certification/validation badges for small user card */\n  showAccountLevelIcon?: boolean\n}\n\nexport function UserCard(props: UserCardProps) {\n  const {\n    userProfile: initialProfile,\n    preSignedURL: initialPreSignedURL,\n    size,\n    ownerId,\n    alias,\n    ...rest\n  } = props\n\n  // If we were given an alias, fetch the principal ID\n  const { data: fetchedPrincipalId, isLoading: isLoadingAliasLookup } =\n    useGetPrincipalIdForAlias(\n      {\n        alias: alias!,\n        type: AliasType.USER_NAME,\n      },\n      { enabled: !!alias },\n    )\n\n  const principalId = (\n    ownerId ??\n    initialProfile?.ownerId ??\n    fetchedPrincipalId\n  )?.toString()\n\n  // If we weren't provided an initialProfile, fetch from Synapse\n  const { data: fetchedProfile, isLoading: isLoadingProfile } =\n    useGetUserProfile(principalId!, {\n      enabled: !!principalId && !initialProfile,\n    })\n  const userProfile = initialProfile ?? fetchedProfile\n\n  const { data: avatarData, isLoading: isLoadingAvatar } = useGetProfileImage(\n    principalId!,\n    {\n      // Don't fetch the avatar if `initialPresignedURL` is provided.\n      // Also, wait until we have a value for `principalId`\n      enabled: !!(!initialPreSignedURL && principalId),\n    },\n  )\n\n  // If a URL was provided, fetch it and create a local data URL\n  const providedAvatarURL = usePreFetchResource(initialPreSignedURL)\n  // If we fetched the avatar from Synapse, we already have the blob. Create a local data URL\n  const fetchedAvatarUrl = useCreateUrlForData(avatarData)\n\n  const imageURL = providedAvatarURL ?? fetchedAvatarUrl\n\n  const isLoading = isLoadingAliasLookup || isLoadingProfile\n\n  const propsForChild = useMemo(\n    () => ({\n      userProfile: userProfile!,\n      imageURL,\n      isLoadingAvatar,\n      ...rest,\n    }),\n    [imageURL, isLoadingAvatar, rest, userProfile],\n  )\n\n  if (isLoading || userProfile == null) {\n    return <></>\n  }\n\n  switch (size) {\n    case SynapseConstants.AVATAR:\n      return <Avatar {...propsForChild} />\n    case SynapseConstants.SMALL_USER_CARD:\n      return (\n        <UserBadge userId={ownerId ?? userProfile.ownerId} {...propsForChild} />\n      )\n    case SynapseConstants.MEDIUM_USER_CARD:\n      return <UserCardMedium {...propsForChild} />\n    case SynapseConstants.LARGE_USER_CARD:\n      return <UserCardMedium isLarge={true} {...propsForChild} />\n    default:\n      console.warn('No size specified for UserCard')\n      return <span />\n  }\n}\n\nexport default UserCard\n","import React, { useMemo, useRef } from 'react'\nimport { SynapseConstants } from '../../utils'\nimport { PRODUCTION_ENDPOINT_CONFIG } from '../../utils/functions/getEndpoint'\nimport { useGetUserBundle } from '../../synapse-queries/user/useUserBundle'\nimport { useOverlay } from '../../utils/hooks/useOverlay'\nimport { AvatarSize } from './Avatar'\nimport IconSvg from '../IconSvg/IconSvg'\nimport { Box, Link, Skeleton } from '@mui/material'\nimport { useGetUserGroupHeader } from '../../synapse-queries'\nimport UserCard from './UserCard'\n\nexport type UserBadgeProps = {\n  /* The ID of the user to show. If undefined, a skeleton will be shown */\n  userId?: string\n  /* If true, shows the user's avatar with their name. Default false */\n  withAvatar?: boolean\n  /* Whether a card containing additional profile information should be shown on hover. Default true. */\n  showCardOnHover?: boolean\n  /* Whether to disable the profile linking to the user's profile page */\n  disableLink?: boolean\n  /* Override the href of the UserBadge component. Default is the Synapse profile page */\n  link?: string\n  /* Shows icons to denote profile certification and validation. Default is false. */\n  showAccountLevelIcon?: boolean\n  /* Whether to open the clicked link in a new tab. Default is false */\n  openLinkInNewTab?: boolean\n  /* Defines the size of the avatar if `withAvatar` is true. Default is 'SMALL' */\n  avatarSize?: AvatarSize\n  /* If true, shows the user's full name. Default is false */\n  showFullName?: boolean\n\n  className?: string\n}\n\nconst TIMER_DELAY_SHOW = 250 // milliseconds\nconst TIMER_DELAY_HIDE = 500\n\nconst NONBREAKING_SPACE = '\\u00A0'\n\nexport function UserBadge(props: UserBadgeProps) {\n  const {\n    userId,\n    showCardOnHover = true,\n    disableLink,\n    showAccountLevelIcon = false,\n    openLinkInNewTab = false,\n    withAvatar = false,\n    avatarSize = 'SMALL',\n    className,\n    showFullName = false,\n  } = props\n  let { link } = props\n\n  const target = useRef(null)\n  const certificationOrVerification =\n    SynapseConstants.USER_BUNDLE_MASK_IS_CERTIFIED |\n    SynapseConstants.USER_BUNDLE_MASK_IS_VERIFIED\n\n  const { data: userGroupHeader } = useGetUserGroupHeader(userId!, {\n    enabled: Boolean(userId),\n    staleTime: 1000 * 60 * 15, // 15 min\n  })\n\n  // To show certification/validation status, we need the full bundle. Only fetch if these should be shown.\n  const { data: userBundle } = useGetUserBundle(\n    userId!,\n    certificationOrVerification,\n    {\n      enabled: Boolean(userId) && showAccountLevelIcon,\n    },\n  )\n\n  const mediumUserCard = useMemo(\n    () => <UserCard ownerId={userId} size={'MEDIUM USER CARD'} />,\n    [userId],\n  )\n\n  if (link == null) {\n    link = `${PRODUCTION_ENDPOINT_CONFIG.PORTAL}#!Profile:${userId}`\n  }\n\n  const { OverlayComponent, toggleShow, toggleHide } = useOverlay(\n    mediumUserCard,\n    target,\n    TIMER_DELAY_SHOW,\n    TIMER_DELAY_HIDE,\n    { sx: { maxWidth: '425px' } },\n  )\n\n  const avatar = withAvatar ? (\n    <span className=\"SRC-inline-avatar\">\n      <UserCard ownerId={userId} size={'AVATAR'} avatarSize={avatarSize} />\n    </span>\n  ) : (\n    <></>\n  )\n\n  const accountLevelIcon = (\n    <Box display={'flex'} gap={1} sx={{ mx: 1 }}>\n      {!userBundle?.isCertified && !userBundle?.isVerified && (\n        <IconSvg\n          icon=\"accountRegistered\"\n          label={'Registered'}\n          sx={{ width: '30px', height: '30px' }}\n        />\n      )}\n      {userBundle?.isCertified && (\n        <IconSvg\n          icon=\"accountCertified\"\n          label={'Certified'}\n          sx={{ width: '30px', height: '30px' }}\n        />\n      )}\n      {userBundle?.isVerified && (\n        <IconSvg\n          icon=\"accountValidated\"\n          label={'Validated'}\n          sx={{ width: '30px', height: '30px' }}\n        />\n      )}\n    </Box>\n  )\n\n  const fullName =\n    showFullName &&\n    (userGroupHeader?.firstName || userGroupHeader?.lastName) ? (\n      <span className={'user-fullname'}>\n        {`${userGroupHeader?.firstName ?? ''}`}\n        {userGroupHeader?.firstName && userGroupHeader?.lastName\n          ? NONBREAKING_SPACE\n          : ''}\n        {`${userGroupHeader?.lastName ?? ''}`}\n      </span>\n    ) : null\n\n  const Tag = showCardOnHover || !disableLink ? Link : 'span'\n\n  let style: React.CSSProperties = {}\n  if (showCardOnHover) {\n    style = { whiteSpace: 'nowrap' }\n  } else if (disableLink) {\n    style = { cursor: 'unset' }\n  }\n\n  return (\n    <>\n      {showCardOnHover && <OverlayComponent />}\n      {avatar}\n      <Tag\n        className={`SRC-userCard UserBadge SRC-boldText ${className ?? ''}`}\n        style={style}\n        href={disableLink ? undefined : link}\n        target={openLinkInNewTab ? '_blank' : ''}\n        rel={openLinkInNewTab ? 'noreferrer' : ''}\n        ref={target}\n        onMouseEnter={() => toggleShow()}\n        onMouseLeave={() => toggleHide()}\n      >\n        {fullName}\n        {fullName ? `${NONBREAKING_SPACE}(` : ''}\n        {userGroupHeader ? (\n          `@${userGroupHeader.userName}`\n        ) : (\n          <Skeleton width={'100px'} />\n        )}\n        {fullName ? ')' : ''}\n        {showAccountLevelIcon && accountLevelIcon}\n      </Tag>\n    </>\n  )\n}\n"],"names":["resetTimer","timer","DEFAULT_DELAY_SHOW_MS","DEFAULT_DELAY_HIDE_MS","useOverlay","children","targetRef","delayShow","delayHide","paperProps","anchorOrigin","transformOrigin","isMounted","useRef","isShowing","setIsShowing","useState","useEffect","toggle","useCallback","show","withDelay","toggleShow","toggleHide","jsx","Popover","Fade","Paper","fetchBlob","url","releaseResourceUrl","resourceUrl","usePreFetchResource","preSignedURL","blob","error","useQuery","useCreateUrlForData","setResourceURL","objectUrl","useGetPresignedUrlContent","fileHandle","request","maxFileSizeBytes","options","accessToken","keyFactory","useSynapseContext","queryFn","batchFileResult","SynapseClient","useGetPresignedUrlContentFromFHA","fileHandleAssociation","forceAnonymous","useGetProfileImage","userId","presignedUrl","useGetFileBatch","queryClient","useQueryClient","response","fileResult","requestedItem","fha","atomicRequest","cloneDeep","atomicResult","useGetUserGroupHeader","principalId","queryKey","responsePage","useGetUserGroupHeaders","principalIds","userGroupHeader","useSearchUserGroupHeaders","prefix","filter","useGetUserGroupHeaderWithAlias","aliases","getUserProfileWithProfilePicAttached","profile","getEndpoint","BackendDestinationEnum","COLORS","hash","userName","val","prevHash","currVal","getColor","hashedUserName","IconCopy","props","svg","UserCardContextMenu","menuActions","userProfile","menuAction","index","callback","SEPERATOR","jsxs","UserCardLarge","isCertified","summary","industry","location","CertifiedUserIcon","copyToClipboard","ref","value","onCopy","event","UserCardMedium","isLarge","imageURL","hideEmail","disableLink","link","openLinkInNewTab","isValidated","isLoadingAvatar","showModal","setShowModal","isContextMenuOpen","setIsContextMenuOpen","copyToClipboardRef","onCopyToClipboard","displayName","firstName","lastName","position","company","pageClick","_event","toggleContextMenu","userBundle","useGetUserBundle","SynapseConstants.USER_BUNDLE_MASK_ORCID","ORCID","isOpen","name","linkLocation","PRODUCTION_ENDPOINT_CONFIG","email","avatar","Avatar","mediumCard","React","ToastMessage","Tooltip","ValidatedProfileIcon","IconSvg","LoadingUserCardMedium","Skeleton","SkeletonTable","TIMER_DELAY_SHOW","TIMER_DELAY_HIDE","avatarSize","showCardOnHover","className","target","mediumUserCard","OverlayComponent","isShowingOverlay","sizeStyles","cursorStyle","hasProfileImage","conditionalStyles","content","Fragment","MUIAvatar","UserCard","initialProfile","initialPreSignedURL","size","ownerId","alias","rest","fetchedPrincipalId","isLoadingAliasLookup","useGetPrincipalIdForAlias","AliasType","_a","fetchedProfile","isLoadingProfile","useGetUserProfile","avatarData","providedAvatarURL","fetchedAvatarUrl","isLoading","propsForChild","useMemo","SynapseConstants.AVATAR","SynapseConstants.SMALL_USER_CARD","UserBadge","SynapseConstants.MEDIUM_USER_CARD","SynapseConstants.LARGE_USER_CARD","NONBREAKING_SPACE","showAccountLevelIcon","withAvatar","showFullName","certificationOrVerification","SynapseConstants.USER_BUNDLE_MASK_IS_CERTIFIED","SynapseConstants.USER_BUNDLE_MASK_IS_VERIFIED","accountLevelIcon","Box","fullName","Tag","Link","style"],"mappings":"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"}