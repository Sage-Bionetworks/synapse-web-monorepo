import{r as l,as as t,ar as o,aD as i,aE as d,a9 as y}from"./iframe-DkJtXMGY.js";function F(e){const{data:a,isLoading:n}=g(e),{data:r,isLoading:s}=K(a,{enabled:!!a}),{mutate:u}=m(),{mutate:c}=Q(),T=l.useCallback(()=>{a&&(a!=null&&a.isPinned?c(a):u(a))},[c,u,a]);return{threadData:a,threadBody:r,togglePin:T,isLoading:s||n}}function g(e,a){const{accessToken:n,keyFactory:r}=t();return o({...a,queryKey:r.getThreadQueryKey(e),queryFn:()=>y.getThread(e,n)})}function K(e,a){const{accessToken:n,keyFactory:r}=t(),s=async()=>{const u=await y.getThreadMessageUrl(e==null?void 0:e.messageKey,n);return(await fetch(u.messageUrl,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text()};return o({...a,queryKey:r.getThreadBodyQueryKey(e==null?void 0:e.id,e==null?void 0:e.messageKey),queryFn:s})}function h(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.putThreadTitle(n,s),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getAllForumThreadsQueryKey(s.forumId)}),await a.invalidateQueries({queryKey:r.getThreadQueryKey(u.threadId)}),e!=null&&e.onSuccess&&await e.onSuccess(s,u,c)}})}function k(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.putThreadMessage(n,s),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getThreadQueryKey(u.threadId)}),e!=null&&e.onSuccess&&await e.onSuccess(s,u,c)}})}function S(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.postThread(n,s),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getAllForumThreadsQueryKey(s.forumId)}),e!=null&&e.onSuccess&&await e.onSuccess(s,u,c)}})}function w(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.deleteThread(n,s.id),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getAllForumThreadsQueryKey(u.forumId)}),await a.invalidateQueries({queryKey:r.getThreadQueryKey(u.id)}),e!=null&&e.onSuccess&&await e.onSuccess(s,u,c)}})}function C(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.restoreThread(n,s.id),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getAllForumThreadsQueryKey(u.forumId)}),await a.invalidateQueries({queryKey:r.getThreadQueryKey(u.id)}),e!=null&&e.onSuccess&&await e.onSuccess(s,u,c)}})}function m(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.pinThread(n,s.id),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getAllForumThreadsQueryKey(u.forumId)}),await a.invalidateQueries({queryKey:r.getThreadQueryKey(u.id)})}})}function Q(e){const a=i(),{accessToken:n,keyFactory:r}=t();return d({...e,mutationFn:s=>y.unPinThread(n,s.id),onSuccess:async(s,u,c)=>{await a.invalidateQueries({queryKey:r.getAllForumThreadsQueryKey(u.forumId)}),await a.invalidateQueries({queryKey:r.getThreadQueryKey(u.id)})}})}export{w as a,C as b,h as c,k as d,S as e,F as u};
