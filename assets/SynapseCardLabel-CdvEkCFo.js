import{j as e}from"./jsx-runtime-CmUBiTSS.js";import{T as M,g as H}from"./CardUtils-BWdb9Wfx.js";import{f as q}from"./DateFormatter-1OipJlTo.js";import{a as E}from"./SqlFunctions-DnxC6kpb.js";import"./StringUtils-CzgJJW-6.js";import{P as A}from"./useFiles-CvqXu3qP.js";import{F as O,g as L}from"./VerificationSubmission-B0kBNeMy.js";import{d as W}from"./dayjs.min-Due_NQNo.js";import{r as h}from"./index-B2mmVxOD.js";import{E as P}from"./EntityLink-CCT8-yf3.js";import{M as b}from"./MarkdownSynapse-CxoQsrlL.js";import{U as T}from"./UserBadge-guYvAWcG.js";import"./OrientationBanner-2QI37Wfz.js";import{u as z}from"./useEntity-BIhLHADQ.js";import{I as Z}from"./ImageFileHandle-Dzil1UEa.js";import{B}from"./Box-CS9VVYtx.js";import{L as V}from"./Link-C7sf-qNT.js";import{i as X}from"./isNil-CZYLZObm.js";import{T as G}from"./Tooltip-D8GA7O7E.js";const N=n=>{const{entityId:r}=n,[p,t]=h.useState(!1),{data:c}=z(r.toString()),f=c&&"dataFileHandleId"in c?c.dataFileHandleId:void 0;return f?e.jsx(B,{sx:{img:{height:p?"auto":"100px"},display:"grid",gridTemplateColumns:"auto 15px"},children:e.jsx("button",{onClick:()=>t(!p),children:e.jsx(Z,{fileHandleAssociation:{associateObjectId:r.toString(),associateObjectType:O.FileEntity,fileHandleId:f}})})}):e.jsx(e.Fragment,{})};try{N.displayName="EntityColumnImage",N.__docgenInfo={description:"",displayName:"EntityColumnImage",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}const J={regex:new RegExp("((?:(?<=\\s)|^)syn\\d+)"),onMatch:n=>`${A.PORTAL}Synapse:${n}`},K={regex:/(http:\/\/[^ ",]+)/,onMatch:n=>n},Q={regex:/(https:\/\/[^ ",]+)/,onMatch:n=>n},Y={regex:/(ftp:\/\/[^ ",]+)/,onMatch:n=>n},ee={regex:/(doi:10.\d+\/[-._;()/:a-zA-Z0-9]+)/,onMatch:n=>`https://doi.org/${n.slice(4)}`},ne={regex:/(PMID:\d+)/,onMatch:n=>`https://pubmed.ncbi.nlm.nih.gov/${n.slice(5)}`},te={regex:/(MGI:\d+)/,onMatch:n=>`https://www.informatics.jax.org/allele/${n}`},re={regex:/(AB_\d+)|(Addgene_\d+)|(CVCL_[a-zA-Z0-9]+)|(MMRRC_\d+-.{3})|(IMSR_JAX:\d+)/,onMatch:n=>`https://scicrunch.org/resolver/${n}`},ie={regex:/(ClinVar:VCV\d+)/,onMatch:n=>`https://www.ncbi.nlm.nih.gov/clinvar/variation/${n.slice(8)}`},ae={regex:/(ClinVar:RCV\d+)/,onMatch:n=>`https://www.ncbi.nlm.nih.gov/clinvar/${n.slice(8)}`},se={regex:/(arXiv:[a-zA-Z0-9.]+)/,onMatch:n=>`https://arxiv.org/abs/${n.slice(6)}`},le={regex:/(cbioportal:[a-zA-Z0-9._]+)/,onMatch:n=>`https://identifiers.org/${n}`},oe={regex:/(rrid:[a-zA-Z]+.+)/,onMatch:n=>`https://bioregistry.io/${n}`},F=[K,Q,Y,J,oe,ne,re,te,ie,ae,ee,se,le],de=F.map(n=>n.regex.source).join("|"),ce=new RegExp(de,"g");function v({text:n,className:r}){if(n==null)return e.jsx(e.Fragment,{});const p=n.split(ce);return e.jsx(e.Fragment,{children:p.map((t,c)=>{const u=F.find(f=>f.regex.test(t));return u?e.jsx(V,{href:u.onMatch(t),target:M.NEW_WINDOW,rel:"noopener noreferrer",className:r,children:t},c):t})})}try{v.displayName="Linkify",v.__docgenInfo={description:"",displayName:"Linkify",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}function D(n){const{value:r,columnName:p,labelLink:t,selectColumns:c,columnModels:u,isHeader:f,className:y,rowData:w,rowId:$}=n;if(!r)return e.jsx("p",{children:r});const{strList:a,str:s,columnModelType:_}=H({columnName:p,value:r,selectColumns:c,columnModels:u});if(!s)return e.jsx("p",{children:s});let g=y;const k={};if(f&&(g=y==null?void 0:y.concat(" ","SRC-lightLink")),_===L.USERID_LIST&&a)return e.jsx("p",{children:a.map((i,l)=>e.jsxs(h.Fragment,{children:[e.jsx(T,{userId:i,className:g}),l<a.length-1&&",  "]},i))});if(_===L.USERID&&s)return e.jsx(T,{userId:s,className:g});if(_===L.DATE&&s)return e.jsx("p",{children:q(W(Number(s)))});if(!t)return e.jsx(v,{text:s,className:g});if("resolveEntityName"in t&&t.resolveEntityName&&s){const{baseURL:i,URLColumnName:l}=t,m=`/${i}?${l}=${s}`;return e.jsx(P,{entity:s,link:m,showIcon:!1})}let d;if("isMarkdown"in t&&t.isMarkdown)a?d=e.jsx("p",{children:a.map((i,l)=>e.jsxs(h.Fragment,{children:[e.jsx(b,{renderInline:!0,markdown:i},i),l<a.length-1&&",  "]},i))}):d=e.jsx(b,{renderInline:!0,markdown:r});else if("isEntityImage"in t&&t.isEntityImage)a?d=e.jsx("p",{children:a.map((i,l)=>e.jsxs(h.Fragment,{children:[e.jsx(N,{entityId:i}),l<a.length-1&&",  "]},i))}):d=e.jsx(N,{entityId:r});else{const i=a||s.split(",");let l;if("target"in t&&(l=t.target),"linkColumnName"in t){const m=E(t.linkColumnName,c,u);if(m==null)console.warn(`Could not determine column index of ${t.linkColumnName}`),d=e.jsx(e.Fragment,{children:r});else{const I=w[m];X(I)?d=e.jsx(e.Fragment,{children:r}):d=e.jsx("p",{children:i.map((o,j)=>e.jsxs(h.Fragment,{children:[e.jsx(V,{href:I??void 0,target:l??M.NEW_WINDOW,rel:"noopener noreferrer",className:g,style:k,children:o},o),j<i.length-1&&e.jsx("span",{style:{marginRight:4},children:", "})]},o))})}}else d=e.jsx("p",{children:i.map((m,I)=>{const o=t,j=o.overrideValueWithRowID?$:m;let C="";if("baseURL"in o){const{baseURL:R,URLColumnName:x,wrapValueWithParens:S}=o,U=S?`(${j})`:j;C=`/${R}?${x}=${U}`}else if("overrideLinkURLColumnName"in o){const R=E(o.overrideLinkURLColumnName,c,u);if(R){const x=w[R];x&&(o.overrideLinkURLColumnTransform?C=o.overrideLinkURLColumnTransform(x):C=x)}}return e.jsxs(h.Fragment,{children:[e.jsx(V,{href:C,className:g,style:k,target:l??M.CURRENT_WINDOW,children:m},m),I<i.length-1&&e.jsx("span",{style:{marginRight:4},children:", "})]},m)})})}return"tooltipText"in t&&t.tooltipText?e.jsx(G,{title:t.tooltipText,enterNextDelay:300,children:e.jsx("span",{children:d})}):d}try{D.displayName="SynapseCardLabel",D.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"any"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[]"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"string"}}}}}catch{}export{v as L,D as S};
