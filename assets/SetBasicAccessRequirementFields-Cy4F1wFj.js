import{j as e}from"./jsx-runtime-DjELr09S.js";import"./useFiles-BW-owtxo.js";import{O as N}from"./VerificationSubmission-DKyendrM.js";import{T as j}from"./StringUtils-BcSmk1fX.js";import"./OrientationBanner-CkExct-K.js";import{r as u}from"./index-CRC0gUGT.js";import{k as U,m as w}from"./useAccessRequirements-FNJ-dhlj.js";import{S as V}from"./LoadingScreen-B3m7HCEo.js";import{S as b,M as C}from"./SelfSignAccessRequirement-C_01XAIc.js";import{A as v}from"./ACTAccessRequirement-WDpE4gfi.js";import{L as F}from"./LockAccessRequirement-B_A_PCc_.js";import{B as y}from"./Box-B8SxUwYv.js";import{T as d}from"./Typography-CjUaZcjg.js";import{F as R}from"./FormControlLabel-CzL06EGi.js";import{C as _}from"./Checkbox-Wn9FYC2E.js";import{C as O}from"./ConfirmationDialog-oMTMf9yR.js";import{B as k}from"./Button-94LdtlT8.js";import{W as D}from"./WikiMarkdownEditorButton-BhLh2GeE.js";import{A as I}from"./Alert-CujLCNcc.js";function E(r){const{accessRequirement:t}=r;return e.jsxs(y,{sx:{mb:2},children:[e.jsx(d,{variant:"body1",sx:{fontWeight:700},children:"Instructions (wiki)"}),e.jsx(D,{ownerObjectType:N.ACCESS_REQUIREMENT,ownerObjectId:t.id.toString(),displayWikiMarkdown:!0,buttonProps:{children:"Edit Instructions"}})]})}try{E.displayName="AccessRequirementWikiInstructions",E.__docgenInfo={description:"",displayName:"AccessRequirementWikiInstructions",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}}}}}catch{}const M="Access restricted pending review by Synapse Access and Compliance Team.",L=r=>{switch(r.concreteType){case C:case b:return"";case j:return r.termsOfUse;case v:return r.actContactInfo;case F:return M}},B=r=>r.concreteType===b||r.concreteType==C;function A(r){const{accessRequirement:t,onChange:i}=r;return e.jsx(e.Fragment,{children:B(t)&&e.jsx(e.Fragment,{children:e.jsxs(y,{sx:{mb:2},children:[e.jsx(d,{variant:"body1",sx:{fontWeight:700},children:"Accessor requirements"}),e.jsx(R,{control:e.jsx(_,{}),label:"Accessors must be certified.",checked:t.isCertifiedUserRequired,onChange:(o,n)=>i({...t,isCertifiedUserRequired:n})}),e.jsx(R,{control:e.jsx(_,{}),label:"Accessors must have a validated profile.",checked:t.isValidatedProfileRequired,onChange:(o,n)=>i({...t,isValidatedProfileRequired:n})}),t.concreteType===C&&e.jsx(R,{control:e.jsx(_,{}),label:"Accessors must use two-factor authentication (2FA).",checked:t.isTwoFaRequired,onChange:(o,n)=>i({...t,isTwoFaRequired:n})})]})})})}try{A.displayName="AccessorRequirements",A.__docgenInfo={description:"",displayName:"AccessorRequirements",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(updatedAr: AccessRequirement) => void"}}}}}catch{}function q(r){const{accessRequirement:t,onConfirmDelete:i,allowDelete:o=!1}=r,[n,c]=u.useState(!1),l=L(t);return e.jsx(e.Fragment,{children:!!l&&e.jsxs(y,{sx:{mb:2},children:[e.jsx(d,{variant:"body1",sx:{fontWeight:700,mb:1},children:"Legacy text-only instructions"}),e.jsx(d,{variant:"body1",sx:{mb:1},children:l}),o&&e.jsxs(e.Fragment,{children:[e.jsx(k,{variant:"contained",color:"error",onClick:()=>c(!0),children:"Delete old instructions"}),e.jsx(O,{open:n,title:"Are you sure?",content:"Deleting the old instructions cannot be undone. Continue?",onCancel:()=>c(!1),onConfirm:()=>{const s={...t};s.concreteType===j?s.termsOfUse=void 0:s.concreteType===v&&(s.actContactInfo=void 0),i(s),c(!1)}})]})]})})}try{q.displayName="AccessRequirementTextInstructions",q.__docgenInfo={description:"",displayName:"AccessRequirementTextInstructions",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},onConfirmDelete:{defaultValue:null,description:"",name:"onConfirmDelete",required:!0,type:{name:"(updatedAr: AccessRequirement) => void"}},allowDelete:{defaultValue:null,description:"",name:"allowDelete",required:!1,type:{name:"boolean"}}}}}catch{}const g=u.forwardRef(function(t,i){const{accessRequirementId:o,onSave:n,onError:c,allowDeleteTextInstructions:l=!1}=t,[s,m]=u.useState(null),{data:p,error:x}=U(o,{staleTime:1/0});u.useEffect(()=>{p&&m(p)},[p]);const{mutateAsync:T,error:h}=w(),f=u.useCallback(async(a,S)=>{try{await T(a),m(a),S||n()}catch{S||c()}},[n,c,T]);return u.useImperativeHandle(i,()=>({save(){s&&f(s,!1)}}),[s,f]),s?e.jsxs(e.Fragment,{children:[e.jsx(q,{accessRequirement:s,allowDelete:l,onConfirmDelete:a=>{f(a,!0)}}),e.jsx(E,{accessRequirement:s}),e.jsx(A,{accessRequirement:s,onChange:a=>m(a)}),h&&e.jsx(I,{severity:"error",sx:{marginTop:2},children:h.reason})]}):x?e.jsx(I,{severity:"error",children:x.reason}):e.jsx(V,{})});try{g.displayName="SetBasicAccessRequirementFields",g.__docgenInfo={description:"",displayName:"SetBasicAccessRequirementFields",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"() => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"() => void"}},allowDeleteTextInstructions:{defaultValue:null,description:"",name:"allowDeleteTextInstructions",required:!1,type:{name:"boolean"}}}}}catch{}export{E as A,g as S,A as a};
