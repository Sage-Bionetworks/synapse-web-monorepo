import{l as u}from"./index-FyOhf-dK.js";import{g as w}from"./entityHandlers-BgO6OIy1.js";import{g as R,a as P}from"./userProfileHandlers-jk7bY8eX.js";import{bk as D,bl as j,bm as M,bn as N,bo as C,bp as E,i as S,B as b}from"./SynapseClient--xLROLBX.js";import{c as F}from"./accessRequirementHandlers-CHx80CYm.js";import{b as _}from"./MockSubmission-Bqd-yYO1.js";import{g as O}from"./dataAccessRequestHandlers-CXHWtav3.js";import{g as U}from"./researchProjectHandlers-BObC-kTl.js";import{g as B}from"./fileHandlers-mYWB8RV9.js";import{I as d,y as A}from"./index--5FOymzB.js";import{m as v,a as H}from"./mock_discussion-BEPZFexJ.js";import{M as m}from"./mock_user_profile-CyZOyNQ0.js";import{m as L}from"./mockProject-CL03bzJV.js";import{B as y}from"./BasicMockedCrudService-BLHgO69P.js";import{f as h}from"./fakerUtils-bF6LKVwK.js";import{c as q,b as G,a as K,g as V}from"./tableQueryHandlers-rZOecOJY.js";import{a as g}from"./mockEvaluationQueue-DVDxvAdF.js";import{M as W}from"./mockAnnotationColumns-B3zr8neU.js";import{g as Y}from"./personalAccessTokenHandlers-CA866KVr.js";import{g as X,a as Q}from"./teamHandlers-BReNMitx.js";import{g as z}from"./accessRequirementAclHandlers-K6lLoScE.js";import{g as J}from"./resetTwoFactorAuthHandlers-BGKpwqOm.js";import{g as Z}from"./featureFlagHandlers-qiGP2Dh3.js";const x=new y({initialData:v,idField:"id",autoGenerateId:!0}),I=new y({initialData:H,idField:"id",autoGenerateId:!0});function k(t,r){return I.getMany(o=>o.forumId===t).filter(o=>{switch(r){case d.NO_FILTER:return!0;case d.DELETED_ONLY:return o.isDeleted;case d.EXCLUDE_DELETED:return!o.isDeleted}})}function tt(t){return[u.rest.get(`${t}${D}/:id`,async(r,o,e)=>{let s=404,a={reason:`MSW could not find a mock forum object with ID ${r.params.id}`};const n=x.getOneById(r.params.id);return n&&(s=200,a=n),o(e.status(s),e.json(a))}),u.rest.get(`${t}${j}/:id`,async(r,o,e)=>{let s=404,a={reason:`MSW could not find a mock discussion thread bundle object with ID ${r.params.id}`};r.params.id==="messageUrl"&&(a={reason:"GET /thread/messageUrl is not yet implemented"});const n=I.getOneById(r.params.id);return n&&(s=200,a=n),o(e.status(s),e.json(a))}),u.rest.post(`${t}${j}`,async(r,o,e)=>{const s=await r.json(),a=I.create({forumId:s.forumId,projectId:L.id,title:s.title,createdOn:new Date().toISOString(),createdBy:String(m),modifiedOn:new Date().toISOString(),etag:"etag",messageKey:"todo key",numberOfViews:0,numberOfReplies:0,lastActivity:new Date().toISOString(),activeAuthors:[String(m)],isEdited:!1,isDeleted:!1,isPinned:!1});return o(e.status(201),e.json(a))}),u.rest.get(`${t}${M(":forumId")}`,async(r,o,e)=>{const s=r.url.searchParams.get("offset"),a=s?parseInt(s):0,n=r.url.searchParams.get("limit"),i=n?parseInt(n):10,l=r.params.filter??d.EXCLUDE_DELETED,c=k(r.params.forumId,l),f={results:c.slice(a,a+i),totalNumberOfResults:c.length};return o(e.status(200),e.json(f))}),u.rest.get(`${t}${D}/:id/moderators`,async(r,o,e)=>{const s={results:[String(m)],totalNumberOfResults:1};return o(e.status(200),e.json(s))})]}function $(t){return{subscriptionId:String(h.number.int({min:1e3,max:9999})),subscriberId:String(m),createdOn:h.date.anytime().toISOString(),...t}}const et=v.map(t=>$({objectId:t.id,objectType:A.FORUM})),st=H.map(t=>$({objectType:A.THREAD,objectId:t.id})),p=new y({initialData:[...et,...st],idField:"subscriptionId",autoGenerateId:!0});function T(t,r="ASC",o=0,e=10,s){const a=p.getAll().filter(i=>t?i.objectType===t:!0).filter(i=>s?s.includes(i.objectId):!0).sort((i,l)=>{const c=new Date(l.createdOn).getTime()-new Date(i.createdOn).getTime();return r==="ASC"?c:-1*c}),n=a.length;return{results:a.slice(o,o+e),totalNumberOfResults:n}}function rt(t){return[u.rest.get(`${t}/repo/v1/subscription/all`,async(r,o,e)=>{const s=r.url.searchParams.get("objectType")??void 0,a=r.url.searchParams.get("sortDirection")??void 0,n=r.url.searchParams.get("offset"),i=n?parseInt(n):void 0,l=r.url.searchParams.get("limit"),c=l?parseInt(l):void 0,f=T(s??void 0,a,i,c);return o(e.status(200),e.json(f))}),u.rest.post(`${t}/repo/v1/subscription/list`,async(r,o,e)=>{const s=await r.json(),a=T(s.objectType,s.sortDirection,void 0,void 0,s.idList);return o(e.status(200),e.json(a))}),u.rest.post(`${t}/repo/v1/subscription`,async(r,o,e)=>{const s=await r.json(),a=p.create({subscriberId:String(m),objectId:s.objectId,objectType:s.objectType,createdOn:new Date().toISOString()});return o(e.status(201),e.json(a))}),u.rest.delete(`${t}/repo/v1/subscription/:id`,async(r,o,e)=>{const s=r.params.id;return p.delete(s),o(e.status(200),e.body(""))}),u.rest.post(`${t}/repo/v1/subscription/subscribers`,async(r,o,e)=>{const s=await r.json(),n={subscribers:p.getMany(i=>i.objectType===s.objectType&&i.objectId===s.objectId).map(i=>i.subscriberId)};return o(e.status(200),e.json(n))})]}function ot(t){return[u.rest.get(`${t}${N(":evaluationId")}`,async(r,o,e)=>{let s=404,a={reason:`Mock Service worker could not find a mock evaluation queue with ID ${r.params.evaluationId}`};const n=g.find(i=>i.id===r.params.entityId);return n&&(a=n,s=200),o(e.status(s),e.json(a))}),u.rest.get(`${t}${C}`,async(r,o,e)=>{let s=200,a={results:g,totalNumberOfResults:g.length};return o(e.status(s),e.json(a))})]}function at(t){return[u.rest.post(`${t}${E}/message`,async(r,o,e)=>{const s=await r.json();return o(e.status(201),e.json(s))})]}const nt={creators:[{creatorName:"Farnsworth, Hubert"},{creatorName:"Wong, Amy"}],titles:[{title:"Mathematics of quantum neutrino fields"}],publicationYear:3024};function it(t,r=nt){return[u.rest.get(`${t}${E}/doi`,async(o,e,s)=>e(s.status(201),s.json(r)))]}const ut=(t,r)=>[u.rest.options("*",async(o,e,s)=>e(s.status(200))),u.rest.get(`${t}/auth/v1/authenticatedOn`,async(o,e,s)=>e(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...w(t),...R(t),P(t,!0,!0),..._(t),...F(t),...z(t),...O(t),...U(t),...B(t),...tt(t),...rt(t),...ot(t),q(t),...G(W,t),...K(t),...Y(t),...X(t),...Q(t),...J(t),...at(t),Z({portalOrigin:r}),...V(t),...it(t)];ut(S(b.REPO_ENDPOINT),S(b.PORTAL_ENDPOINT));export{ut as g};
