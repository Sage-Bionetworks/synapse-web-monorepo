import{r as u,an as T,R as m,j as p,aa as H,ct as I,cu as L,E as R,eK as g,g$ as j}from"./iframe-9zwml_ZL.js";import{A as v,R as s}from"./AccessIcon-Dtdoq39S.js";import{a as b,c as D,A as N}from"./AccessRequirementList-CdcNCL-6.js";import{u as _}from"./useEntityBundle-SAdnotM0.js";function U(e,i){return _(e,void 0,void 0,{...i,select:c=>{if(!g(c.entity))return!1;const t=c.entity,n=c.fileHandles?.find(d=>d.id===t.dataFileHandleId);return n&&j(n)}})}function A(e,i){const{isAuthenticated:c}=T(),{data:t}=b({restrictableObjectType:m.ENTITY,objectId:e}),{data:a,isLoading:n}=U(e,{enabled:i.enabled});if(t){if(i.enabled){if(n)return;if(a)return s.AccessibleExternalFileHandle}return t.hasUnmetAccessRequirement?s.AccessBlockedByRestriction:t.userEntityPermissions.canDownload?t.restrictionLevel!==R.OPEN?s.AccessibleWithTerms:s.Accessible:c?s.AccessBlockedByACL:s.AccessBlockedToAnonymous}}function F(e){switch(e){case s.Accessible:return"Open Access";case s.AccessibleWithTerms:return"View Terms";case s.AccessBlockedByRestriction:return"Request Access";case s.AccessBlockedByACL:return"Access Denied";case s.AccessBlockedToAnonymous:return"Sign In Required";case s.AccessibleExternalFileHandle:return"External Access";case void 0:return"Loading...";default:return""}}function S(e,i=!1,c,t={}){const[a,n]=u.useState(!1),[d,y]=u.useState([]),{accessToken:f}=T(),{showExternalAccessIcon:E=!1}=t,r=A(e,{enabled:E}),{data:o}=b({restrictableObjectType:m.ENTITY,objectId:e}),x=F(r),h=p.jsx(v,{restrictionUiType:r,wrap:i,sx:{...c}}),k=u.useCallback(()=>{H.getAllAccessRequirements(f,e).then(l=>{D(l)?window.open(`${I(L.PORTAL_ENDPOINT)}AccessRequirements:ID=${e}&TYPE=ENTITY`,"_blank"):(y(l),n(!0))})},[f,e]),q=u.useMemo(()=>{if(!o||!r)return!1;const l=o.hasUnmetAccessRequirement,B=o.restrictionLevel;return l||B!==R.OPEN||r===s.AccessBlockedToAnonymous},[o,r]),w=a?p.jsx(N,{subjectId:e,subjectType:m.ENTITY,accessRequirementFromProps:d,renderAsModal:!0,onHide:()=>{n(!1)}}):null;return{restrictionUiType:r,accessText:x,icon:h,handleGetAccess:k,isClickable:q,accessRequirementDialog:w,setDisplayAccessRequirement:n}}try{A.displayName="useGetRestrictionUiType",A.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetRestrictionUiType",props:{}}}catch{}export{S as u};
