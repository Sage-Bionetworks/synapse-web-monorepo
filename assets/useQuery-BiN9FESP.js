var ce=e=>{throw TypeError(e)};var Y=(e,t,s)=>t.has(e)||ce("Cannot "+s);var n=(e,t,s)=>(Y(e,t,"read from private field"),s?s.call(e):t.get(e)),E=(e,t,s)=>t.has(e)?ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),g=(e,t,s,r)=>(Y(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),v=(e,t,s)=>(Y(e,t,"access private method"),s);import{M as he,U as de,e as z,S as W,f as me,i as Fe,p as xe}from"./_initCloneObject-BAcHLPB8.js";import{e as De,i as Qe,a as $e}from"./_baseTimes-M2nZWodf.js";import{e as pe,f as j,k as Be,h as Ne}from"./cloneDeep-CT__oUM4.js";import{i as V}from"./isArray-Dxzbedgu.js";import{S as ge,i as ye}from"./isObjectLike-Cu7zvyZq.js";import{S as Ge,s as k,b as He,i as ve,c as Re,t as qe,f as Ke,d as We,e as Oe,n as Pe,a as Xe,u as Je}from"./utils-Bx1BRerw.js";import{r as S}from"./index-Dl6G-zuu.js";import"./jsx-runtime-Du8NFWEI.js";var Ye="Expected a function";function Se(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ye);var s=function(){var r=arguments,h=t?t.apply(this,r):r[0],i=s.cache;if(i.has(h))return i.get(h);var a=e.apply(this,r);return s.cache=i.set(h,a)||i,a};return s.cache=new(Se.Cache||he),s}Se.Cache=he;var Ze="__lodash_hash_undefined__";function ze(e){return this.__data__.set(e,Ze),this}function je(e){return this.__data__.has(e)}function X(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new he;++t<s;)this.add(e[t])}X.prototype.add=X.prototype.push=ze;X.prototype.has=je;function Ve(e,t){for(var s=-1,r=e==null?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}function ke(e,t){return e.has(t)}var et=1,tt=2;function Le(e,t,s,r,h,i){var a=s&et,u=e.length,l=t.length;if(u!=l&&!(a&&l>u))return!1;var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var R=-1,p=!0,A=s&tt?new X:void 0;for(i.set(e,t),i.set(t,e);++R<u;){var y=e[R],w=t[R];if(r)var O=a?r(w,y,R,t,e,i):r(y,w,R,e,t,i);if(O!==void 0){if(O)continue;p=!1;break}if(A){if(!Ve(t,function(_,m){if(!ke(A,m)&&(y===_||h(y,_,s,r,i)))return A.push(m)})){p=!1;break}}else if(!(y===w||h(y,w,s,r,i))){p=!1;break}}return i.delete(e),i.delete(t),p}function st(e){var t=-1,s=Array(e.size);return e.forEach(function(r,h){s[++t]=[h,r]}),s}function rt(e){var t=-1,s=Array(e.size);return e.forEach(function(r){s[++t]=r}),s}var it=1,nt=2,at="[object Boolean]",ut="[object Date]",ht="[object Error]",ft="[object Map]",ot="[object Number]",lt="[object RegExp]",ct="[object Set]",dt="[object String]",pt="[object Symbol]",gt="[object ArrayBuffer]",yt="[object DataView]",Ee=ge?ge.prototype:void 0,Z=Ee?Ee.valueOf:void 0;function vt(e,t,s,r,h,i,a){switch(s){case yt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gt:return!(e.byteLength!=t.byteLength||!i(new de(e),new de(t)));case at:case ut:case ot:return De(+e,+t);case ht:return e.name==t.name&&e.message==t.message;case lt:case dt:return e==t+"";case ft:var u=st;case ct:var l=r&it;if(u||(u=rt),e.size!=t.size&&!l)return!1;var d=a.get(e);if(d)return d==t;r|=nt,a.set(e,t);var f=Le(u(e),u(t),r,h,i,a);return a.delete(e),f;case pt:if(Z)return Z.call(e)==Z.call(t)}return!1}var Rt=1,Ot=Object.prototype,Et=Ot.hasOwnProperty;function At(e,t,s,r,h,i){var a=s&Rt,u=pe(e),l=u.length,d=pe(t),f=d.length;if(l!=f&&!a)return!1;for(var R=l;R--;){var p=u[R];if(!(a?p in t:Et.call(t,p)))return!1}var A=i.get(e),y=i.get(t);if(A&&y)return A==t&&y==e;var w=!0;i.set(e,t),i.set(t,e);for(var O=a;++R<l;){p=u[R];var _=e[p],m=t[p];if(r)var x=a?r(m,_,p,t,e,i):r(_,m,p,e,t,i);if(!(x===void 0?_===m||h(_,m,s,r,i):x)){w=!1;break}O||(O=p=="constructor")}if(w&&!O){var I=e.constructor,N=t.constructor;I!=N&&"constructor"in e&&"constructor"in t&&!(typeof I=="function"&&I instanceof I&&typeof N=="function"&&N instanceof N)&&(w=!1)}return i.delete(e),i.delete(t),w}var bt=1,Ae="[object Arguments]",be="[object Array]",K="[object Object]",wt=Object.prototype,we=wt.hasOwnProperty;function Ct(e,t,s,r,h,i){var a=V(e),u=V(t),l=a?be:j(e),d=u?be:j(t);l=l==Ae?K:l,d=d==Ae?K:d;var f=l==K,R=d==K,p=l==d;if(p&&z(e)){if(!z(t))return!1;a=!0,f=!1}if(p&&!f)return i||(i=new W),a||me(e)?Le(e,t,s,r,h,i):vt(e,t,l,s,r,h,i);if(!(s&bt)){var A=f&&we.call(e,"__wrapped__"),y=R&&we.call(t,"__wrapped__");if(A||y){var w=A?e.value():e,O=y?t.value():t;return i||(i=new W),h(w,O,s,r,i)}}return p?(i||(i=new W),At(e,t,s,r,h,i)):!1}function fe(e,t,s,r,h){return e===t?!0:e==null||t==null||!ye(e)&&!ye(t)?e!==e&&t!==t:Ct(e,t,s,r,fe,h)}var Tt=1,_t=2;function ts(e,t,s,r){var h=s.length,i=h,a=!r;if(e==null)return!i;for(e=Object(e);h--;){var u=s[h];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++h<i;){u=s[h];var l=u[0],d=e[l],f=u[1];if(a&&u[2]){if(d===void 0&&!(l in e))return!1}else{var R=new W;if(r)var p=r(d,f,l,e,t,R);if(!(p===void 0?fe(f,d,Tt|_t,r,R):p))return!1}}return!0}function mt(e){return e===e&&!Qe(e)}function ss(e){for(var t=Be(e),s=t.length;s--;){var r=t[s],h=e[r];t[s]=[r,h,mt(h)]}return t}var Pt="[object Map]",St="[object Set]",Lt=Object.prototype,It=Lt.hasOwnProperty;function rs(e){if(e==null)return!0;if($e(e)&&(V(e)||typeof e=="string"||typeof e.splice=="function"||z(e)||me(e)||Fe(e)))return!e.length;var t=j(e);if(t==Pt||t==St)return!e.size;if(xe(e))return!Ne(e).length;for(var s in e)if(It.call(e,s))return!1;return!0}function is(e,t,s){s=typeof s=="function"?s:void 0;var r=s?s(e,t):void 0;return r===void 0?fe(e,t,void 0,s):!!r}function ns(e){return e==null}var C,c,H,b,U,D,P,q,Q,$,M,F,L,B,o,G,ee,te,se,re,ie,ne,ae,Ie,_e,Ut=(_e=class extends Ge{constructor(t,s){super();E(this,o);E(this,C);E(this,c);E(this,H);E(this,b);E(this,U);E(this,D);E(this,P);E(this,q);E(this,Q);E(this,$);E(this,M);E(this,F);E(this,L);E(this,B,new Set);this.options=s,g(this,C,t),g(this,P,null),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(n(this,c).addObserver(this),Ce(n(this,c),this.options)?v(this,o,G).call(this):this.updateResult(),v(this,o,re).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ue(n(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ue(n(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,v(this,o,ie).call(this),v(this,o,ne).call(this),n(this,c).removeObserver(this)}setOptions(t,s){const r=this.options,h=n(this,c);if(this.options=n(this,C).defaultQueryOptions(t),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");v(this,o,ae).call(this),k(this.options,r)||n(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:n(this,c),observer:this});const i=this.hasListeners();i&&Te(n(this,c),h,this.options,r)&&v(this,o,G).call(this),this.updateResult(s),i&&(n(this,c)!==h||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&v(this,o,ee).call(this);const a=v(this,o,te).call(this);i&&(n(this,c)!==h||this.options.enabled!==r.enabled||a!==n(this,L))&&v(this,o,se).call(this,a)}getOptimisticResult(t){const s=n(this,C).getQueryCache().build(n(this,C),t),r=this.createResult(s,t);return Ft(this,r)&&(g(this,b,r),g(this,D,this.options),g(this,U,n(this,c).state)),r}getCurrentResult(){return n(this,b)}trackResult(t){const s={};return Object.keys(t).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(n(this,B).add(r),t[r])})}),s}getCurrentQuery(){return n(this,c)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=n(this,C).defaultQueryOptions(t),r=n(this,C).getQueryCache().build(n(this,C),s);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,s))}fetch(t){return v(this,o,G).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),n(this,b)))}createResult(t,s){var le;const r=n(this,c),h=this.options,i=n(this,b),a=n(this,U),u=n(this,D),d=t!==r?t.state:n(this,H),{state:f}=t;let{error:R,errorUpdatedAt:p,fetchStatus:A,status:y}=f,w=!1,O;if(s._optimisticResults){const T=this.hasListeners(),J=!T&&Ce(t,s),Me=T&&Te(t,r,s,h);(J||Me)&&(A=We(t.options.networkMode)?"fetching":"paused",f.dataUpdatedAt||(y="pending")),s._optimisticResults==="isRestoring"&&(A="idle")}if(s.select&&typeof f.data<"u")if(i&&f.data===(a==null?void 0:a.data)&&s.select===n(this,q))O=n(this,Q);else try{g(this,q,s.select),O=s.select(f.data),O=Oe(i==null?void 0:i.data,O,s),g(this,Q,O),g(this,P,null)}catch(T){g(this,P,T)}else O=f.data;if(typeof s.placeholderData<"u"&&typeof O>"u"&&y==="pending"){let T;if(i!=null&&i.isPlaceholderData&&s.placeholderData===(u==null?void 0:u.placeholderData))T=i.data;else if(T=typeof s.placeholderData=="function"?s.placeholderData((le=n(this,$))==null?void 0:le.state.data,n(this,$)):s.placeholderData,s.select&&typeof T<"u")try{T=s.select(T),g(this,P,null)}catch(J){g(this,P,J)}typeof T<"u"&&(y="success",O=Oe(i==null?void 0:i.data,T,s),w=!0)}n(this,P)&&(R=n(this,P),O=n(this,Q),p=Date.now(),y="error");const _=A==="fetching",m=y==="pending",x=y==="error",I=m&&_;return{status:y,fetchStatus:A,isPending:m,isSuccess:y==="success",isError:x,isInitialLoading:I,isLoading:I,data:O,dataUpdatedAt:f.dataUpdatedAt,error:R,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:_,isRefetching:_&&!m,isLoadingError:x&&f.dataUpdatedAt===0,isPaused:A==="paused",isPlaceholderData:w,isRefetchError:x&&f.dataUpdatedAt!==0,isStale:oe(t,s),refetch:this.refetch}}updateResult(t){const s=n(this,b),r=this.createResult(n(this,c),this.options);if(g(this,U,n(this,c).state),g(this,D,this.options),n(this,U).data!==void 0&&g(this,$,n(this,c)),k(r,s))return;g(this,b,r);const h={},i=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,u=typeof a=="function"?a():a;if(u==="all"||!u&&!n(this,B).size)return!0;const l=new Set(u??n(this,B));return this.options.throwOnError&&l.add("error"),Object.keys(n(this,b)).some(d=>{const f=d;return n(this,b)[f]!==s[f]&&l.has(f)})};(t==null?void 0:t.listeners)!==!1&&i()&&(h.listeners=!0),v(this,o,Ie).call(this,{...h,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&v(this,o,re).call(this)}},C=new WeakMap,c=new WeakMap,H=new WeakMap,b=new WeakMap,U=new WeakMap,D=new WeakMap,P=new WeakMap,q=new WeakMap,Q=new WeakMap,$=new WeakMap,M=new WeakMap,F=new WeakMap,L=new WeakMap,B=new WeakMap,o=new WeakSet,G=function(t){v(this,o,ae).call(this);let s=n(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(He)),s},ee=function(){if(v(this,o,ie).call(this),ve||n(this,b).isStale||!Re(this.options.staleTime))return;const s=qe(n(this,b).dataUpdatedAt,this.options.staleTime)+1;g(this,M,setTimeout(()=>{n(this,b).isStale||this.updateResult()},s))},te=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(n(this,c)):this.options.refetchInterval)??!1},se=function(t){v(this,o,ne).call(this),g(this,L,t),!(ve||this.options.enabled===!1||!Re(n(this,L))||n(this,L)===0)&&g(this,F,setInterval(()=>{(this.options.refetchIntervalInBackground||Ke.isFocused())&&v(this,o,G).call(this)},n(this,L)))},re=function(){v(this,o,ee).call(this),v(this,o,se).call(this,v(this,o,te).call(this))},ie=function(){n(this,M)&&(clearTimeout(n(this,M)),g(this,M,void 0))},ne=function(){n(this,F)&&(clearInterval(n(this,F)),g(this,F,void 0))},ae=function(){const t=n(this,C).getQueryCache().build(n(this,C),this.options);if(t===n(this,c))return;const s=n(this,c);g(this,c,t),g(this,H,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Ie=function(t){Pe.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(n(this,b))}),n(this,C).getQueryCache().notify({query:n(this,c),type:"observerResultsUpdated"})})},_e);function Mt(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ce(e,t){return Mt(e,t)||e.state.dataUpdatedAt>0&&ue(e,t,t.refetchOnMount)}function ue(e,t,s){if(t.enabled!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&oe(e,t)}return!1}function Te(e,t,s,r){return s.enabled!==!1&&(e!==t||r.enabled===!1)&&(!s.suspense||e.state.status!=="error")&&oe(e,s)}function oe(e,t){return e.isStaleByTime(t.staleTime)}function Ft(e,t){return!k(e.getCurrentResult(),t)}var Ue=S.createContext(!1),xt=()=>S.useContext(Ue);Ue.Provider;function Dt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Qt=S.createContext(Dt()),$t=()=>S.useContext(Qt),Bt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Nt=e=>{S.useEffect(()=>{e.clearReset()},[e])},Gt=({result:e,errorResetBoundary:t,throwOnError:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Xe(s,[e.error,r]),as=(e,t)=>typeof t.state.data>"u",Ht=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},us=(e,t)=>e.isLoading&&e.isFetching&&!t,qt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Kt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Wt(e,t,s){const r=Je(),h=xt(),i=$t(),a=r.defaultQueryOptions(e);a._optimisticResults=h?"isRestoring":"optimistic",Ht(a),Bt(a,i),Nt(i);const[u]=S.useState(()=>new t(r,a)),l=u.getOptimisticResult(a);if(S.useSyncExternalStore(S.useCallback(d=>{const f=h?()=>{}:u.subscribe(Pe.batchCalls(d));return u.updateResult(),f},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),S.useEffect(()=>{u.setOptions(a,{listeners:!1})},[a,u]),qt(a,l))throw Kt(a,u,i);if(Gt({result:l,errorResetBoundary:i,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw l.error;return a.notifyOnChangeProps?l:u.trackResult(l)}function hs(e,t){return Wt(e,Ut)}export{Ut as Q,X as S,xt as a,$t as b,Bt as c,Nt as d,Ht as e,Kt as f,Gt as g,Wt as h,rs as i,ke as j,rt as k,is as l,ss as m,ts as n,mt as o,fe as p,Se as q,st as r,qt as s,Ve as t,hs as u,ns as v,us as w,as as x};
