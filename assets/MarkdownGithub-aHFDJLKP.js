import{j as n}from"./jsx-runtime-D_zvdyIk.js";import{l as h,aq as g}from"./useFiles-4auXP0HE.js";import"./OrientationBanner-CdA_N81g.js";import{r as m}from"./index-DY9mdyPi.js";import"./VerificationSubmission-BDh1zA9f.js";import{A as w}from"./StringUtils-NPb0VexC.js";import{u as y}from"./useQuery-8y-s5Pjc.js";import"./SkeletonButton-pL3g9Npy.js";import"./SkeletonInlineBlock-BusVNSX9.js";import"./SkeletonTable-CvCNZNii.js";import{S as x}from"./SkeletonParagraph-BIQmiFdD.js";import{M as b}from"./MarkdownSynapse-GKzUe7wB.js";import{C as _}from"./Container-D_3wZQCK.js";import{B as p}from"./Box-U43iDY-R.js";import{B as k}from"./Button-3mgletA9.js";const j="https://api.github.com/repos";function M(e,a,r){const{keyFactory:o}=h(),s=async()=>{const t=await fetch(`${j}/${e}/${a}/tags`);if(!t.ok)throw new Error(`Error fetching tags: ${t.statusText}`);const i=await t.json();if(i.length===0)throw new Error("No tags found.");return i[0].name};return y({...r,queryKey:o.getGithubLatestTagKey(e,a),queryFn:s})}function c(e){const{repoOwner:a,repoName:r}=e,{data:o}=M(a,r);return n.jsx(l,{...e,tagName:o})}const q=(e,a)=>{if(!e)return;const r=`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="UTF-8">
          <title>${a}</title>
        </head>
        <body style="margin: 0; padding: 20px; font-family: Arial, sans-serif; line-height: 24px;">
          ${e}
        </body>
      </html>
    `,o=new Blob([r],{type:"text/html"}),s=URL.createObjectURL(o),t=document.createElement("a");t.href=s,t.download=a,t.click(),URL.revokeObjectURL(s)};function l({repoOwner:e,repoName:a,filePath:r,tagName:o,showDownloadButton:s=!1}){const[t,i]=m.useState(null),u=m.useMemo(()=>w(r,"html"),[r]),{data:d}=g(`https://cdn.jsdelivr.net/gh/${e}/${a}@${o}/${r}`,{enabled:!!o}),f=n.jsx(p,{sx:{width:"100%"},children:n.jsx(x,{rowHeight:"30px",numRows:70})});return n.jsxs(_,{sx:{"> .markdown":{px:"10px"}},children:[s&&t&&n.jsx(p,{sx:{display:"flex",float:"right",mt:"15px"},children:n.jsx(k,{variant:"outlined",color:"primary",sx:{mb:1},onClick:()=>q(t,u),children:"Download"})}),d?n.jsx(b,{markdown:d,onMarkdownProcessingDone:i}):f]})}try{c.displayName="MarkdownGithubLatestTag",c.__docgenInfo={description:"Loads the latest tagged version of the (presumably MD) file from GitHub",displayName:"MarkdownGithubLatestTag",props:{repoOwner:{defaultValue:null,description:"",name:"repoOwner",required:!0,type:{name:"string"}},repoName:{defaultValue:null,description:"",name:"repoName",required:!0,type:{name:"string"}},filePath:{defaultValue:null,description:"",name:"filePath",required:!0,type:{name:"string"}},showDownloadButton:{defaultValue:null,description:"",name:"showDownloadButton",required:!1,type:{name:"boolean"}}}}}catch{}try{l.displayName="MarkdownGithub",l.__docgenInfo={description:"Load MD file content from GitHub (using the given tag)",displayName:"MarkdownGithub",props:{repoOwner:{defaultValue:null,description:"",name:"repoOwner",required:!0,type:{name:"string"}},repoName:{defaultValue:null,description:"",name:"repoName",required:!0,type:{name:"string"}},filePath:{defaultValue:null,description:"",name:"filePath",required:!0,type:{name:"string"}},showDownloadButton:{defaultValue:{value:"false"},description:"",name:"showDownloadButton",required:!1,type:{name:"boolean"}},tagName:{defaultValue:null,description:"",name:"tagName",required:!1,type:{name:"string"}}}}}catch{}export{c as M,l as a};
