import{eC as L,eD as T,j as a,c5 as F,r as g,X as A,eE as h,a0 as V,eF as b,eG as D,eH as I,eI as N,eJ as v,eK as U,eL as x}from"./iframe-Ci1lmE8g.js";import{p as Q,a as O}from"./SqlFunctions-DhkJEscO.js";import{u as _}from"./QueryContext-B4QuKJm6.js";import{u as R,a as M,Q as w,b as P,N as j}from"./QueryWrapper-DugStafn.js";import{A as K}from"./Autocomplete-BgFeKQE2.js";import{S as k}from"./UserSearchBoxV2-CViwSSrF.js";import{f as B}from"./JsonSchemaForm-eW00ofVJ.js";import{Q as Y}from"./QueryWrapperErrorBoundary-CqkOxGzC.js";import{R as W}from"./RowSetView-BDdTTCN1.js";function C(e){const f=_(),{getCurrentQueryRequest:p,addValueToSelectedFacet:c,removeSelectedFacet:r}=f,{data:s}=R(),{topLevelEnumeratedFacetToFilter:n}=e,u=p(),o=((s==null?void 0:s.facets)??[]).find(l=>L(l,n)),m=(o==null?void 0:o.facetValues.map(({value:l})=>l))??[],i=T(n,u.query.selectedFacets),d=(i==null?void 0:i.facetValues)||[],t=(l,y)=>{r(n),y.forEach(E=>c(n,E))};return a.jsx("div",{children:m.length>0&&a.jsx(K,{multiple:!0,options:m,value:d,onChange:t,renderInput:l=>a.jsx(F,{...l,placeholder:"Select Filter(s)"})})})}try{C.displayName="ColumnFilter",C.__docgenInfo={description:"",displayName:"ColumnFilter",props:{topLevelEnumeratedFacetToFilter:{defaultValue:null,description:"",name:"topLevelEnumeratedFacetToFilter",required:!0,type:{name:"UniqueFacetIdentifier"}}}}}catch{}function S({sortConfig:e}){const{defaultColumn:f,defaultDirection:p,sortableColumns:c}=e,{executeQueryRequest:r}=_(),{getColumnDisplayName:s}=M(),[n,u]=g.useState(f),[o,m]=g.useState(p),i=c.map(t=>({value:t,label:s(t)})),d=t=>{r(l=>{let y="ASC";return t===n&&(y=o==="ASC"?"DESC":"ASC"),l.query.sort=t?[{column:t,direction:y}]:void 0,u(t),m(y),l})};return a.jsxs("div",{className:"QuerySortSelector",children:[a.jsx(A,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),a.jsx(k,{className:"react-select-container SRC-inlineBlock",value:B(n,i),options:i,onChange:t=>d(t==null?void 0:t.value),styles:{control:t=>({...t,marginLeft:"15px"})}})]})}try{S.displayName="QuerySortSelector",S.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}function q(e){var i;const{sql:f}=e,p=((i=e.query)==null?void 0:i.sql)??f??"",c=Q(p),{sortConfig:r,columnAliases:s,topLevelEnumeratedFacetToFilter:n}=e,u=g.useMemo(()=>r?[{column:r.defaultColumn,direction:r.defaultDirection}]:void 0,[r]),o=g.useMemo(()=>{let d;if(e.query)d={sort:u,limit:h,...e.query};else{const t=O(e.searchParams,e.sqlOperator,e.additionalFiltersSessionStorageKey);d={sql:e.sql,limit:e.limit??h,sort:u,additionalFilters:t}}return{concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:c,query:d,partMask:V|b|D|I|N|v|U|x}},[u,c,e.additionalFiltersSessionStorageKey,e.limit,e.query,e.searchParams,e.sql,e.sqlOperator]),m=JSON.stringify(o);return g.createElement(w,{...e,initQueryRequest:o,isInfinite:!0,key:m},a.jsx(P,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:s,noContentPlaceholderType:e.noContentPlaceholderType??j.STATIC,children:a.jsxs(Y,{children:[r&&a.jsx(S,{sortConfig:r}),n&&a.jsx(C,{topLevelEnumeratedFacetToFilter:n}),a.jsx(W,{cardConfiguration:e.cardConfiguration,initialLimit:e.initialLimit,multiCardList:e.multiCardList})]})}))}try{q.displayName="CardContainerLogic",q.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{query:{defaultValue:null,description:"The initial SQL query which will be used to populate the data in the component",name:"query",required:!1,type:{name:"Query"}},sql:{defaultValue:null,description:"@deprecated use `query`",name:"sql",required:!1,type:{name:"string"}},limit:{defaultValue:null,description:"Optional limit for the number of cards shown per page\n@deprecated use `query",name:"limit",required:!1,type:{name:"number"}},searchParams:{defaultValue:null,description:"Applies filters to the query where the key is the column name and the value is the value to filter on.\nThe filter function is controlled by sqlOperator.\n@deprecated use `query`",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},sqlOperator:{defaultValue:null,description:"Operator used in the filter created using the searchParams prop\n@deprecated use `query`",name:"sqlOperator",required:!1,type:{name:"SQLOperator"}},title:{defaultValue:null,description:"Optional title to display above the component",name:"title",required:!1,type:{name:"string"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sortConfig:{defaultValue:null,description:"Provide a `SortConfiguration` that can be used to render UI to toggle the sorting of the cards.",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},topLevelEnumeratedFacetToFilter:{defaultValue:null,description:"Configuration used to render UI that can be used to alter a filter against a column with enumerated facets.",name:"topLevelEnumeratedFacetToFilter",required:!1,type:{name:"UniqueFacetIdentifier"}},lockedColumn:{defaultValue:null,description:"Optional column to 'lock'; Values and filter controls for a locked column will not be displayed in the UI.",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},initialLimit:{defaultValue:null,description:"Optionally limit the initial number of cards shown on the first page",name:"initialLimit",required:!1,type:{name:"number"}},multiCardList:{defaultValue:null,description:"",name:"multiCardList",required:!1,type:{name:"boolean"}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},unitDescription:{defaultValue:null,description:'The singular word to use to describe a what a row represents (e.g. "file"). Defaults to "result"',name:"unitDescription",required:!1,type:{name:"string"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:`Look for additional filters using the given key.  If not provided, the entity ID will be used.
@deprecated - configure the filter before passing a query`,name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}}}}}catch{}export{q as C};
