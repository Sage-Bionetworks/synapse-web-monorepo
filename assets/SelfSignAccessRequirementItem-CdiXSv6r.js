import{j as e}from"./jsx-runtime-DNP5ZHPF.js";import{l as O,m as k,o as U}from"./useFiles-DxEFRl-N.js";import{A as b}from"./VerificationSubmission-B0kBNeMy.js";import{d as E}from"./StringUtils-CzgJJW-6.js";import"./OrientationBanner-lGnlzz1n.js";import{r as _}from"./index-C9LqO53Z.js";import{g as w,h as L,i as B}from"./useAccessRequirements-BiOU9BIr.js";import{M as g}from"./MarkdownSynapse-BeO0RyoA.js";import{R as M,a as p}from"./RequirementItem-016-fk3c.js";import{T as V}from"./Typography-BdVBJyiw.js";import{L as D}from"./Link-BP8bljuP.js";import{B as G}from"./Box-DhP9mjg7.js";import{A as N}from"./Alert-DBftbUxX.js";function v(f){const{accessRequirement:s,onHide:x}=f,{accessToken:A}=O(),R=!!A,c=E(s),{data:r}=k(),{data:n}=U(),a=R&&n&&!c&&s.isCertifiedUserRequired&&!n.isCertified,d=R&&n&&!c&&s.isValidatedProfileRequired&&!n.isVerified,{data:m,isLoading:T}=w(String(s.id)),l=m==null?void 0:m.isApproved,{data:t}=L(s.id.toString()),[u,h]=_.useState(!1),{mutate:y,isPending:j,error:q}=B({onError:i=>{console.error("Error creating access approval: ",i)}}),C=()=>{const i={requirementId:s==null?void 0:s.id,submitterId:r==null?void 0:r.ownerId,accessorId:r==null?void 0:r.ownerId,state:b.APPROVED};y(i)};let o=e.jsx(e.Fragment,{});c&&s.termsOfUse?o=e.jsx(g,{markdown:s.termsOfUse}):t&&(o=e.jsx(g,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType}));let S;if(A&&!l){let i="I Accept Terms of Use",I=!1;(a||d)&&(I=!0,i=`You must ${a?"be certified":""}${a&&d?" and ":""}${d?"have a validated user profile":""} to accept`),S=[{variant:"outlined",onClick:C,children:i,disabled:j||I},{variant:"text",onClick:x,children:"I do not accept"}]}return e.jsxs(M,{"data-testid":"SelfSignAccessRequirementItem",status:T?p.LOADING:l?p.COMPLETE:p.LOCKED,actions:S,children:[l?e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"body1",children:["You have accepted the terms of use."," ",e.jsx(D,{role:"button",onClick:()=>h(!u),children:u?"Hide Terms":"View Terms"})]}),u&&e.jsx(G,{sx:{my:1},children:o})]}):o,q&&e.jsx(N,{severity:"error",children:q.reason})]})}try{v.displayName="SelfSignAccessRequirementItem",v.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}export{v as S};
