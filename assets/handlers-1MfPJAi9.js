import{l as u}from"./index-COolVg4U.js";import{g as w}from"./entityHandlers-DarOYSMK.js";import{g as R,a as P}from"./userProfileHandlers-IYBQGrHi.js";import{bC as y,bD as j,bE as M,bF as N,bG as C,bH as T,j as S,B as b}from"./useFiles-1cJS836d.js";import{c as F}from"./accessRequirementHandlers-BgQ_KQWZ.js";import{b as _}from"./MockSubmission-B70ET-0k.js";import{g as O}from"./dataAccessRequestHandlers-B8kFZuCB.js";import{g as U}from"./researchProjectHandlers-a8v14uTz.js";import{g as B}from"./fileHandlers-2o80hoot.js";import{I as d,y as A}from"./index-4OllXAQO.js";import{m as H,a as v}from"./mock_discussion-Dp4mVfze.js";import{M as m}from"./mock_user_profile-CyZOyNQ0.js";import{m as L}from"./mockProject-DUMBRjbJ.js";import{B as D}from"./BasicMockedCrudService-CZ5wOUld.js";import{f as h}from"./fakerUtils-bF6LKVwK.js";import{c as G,b as q,a as K,g as V}from"./tableQueryHandlers-Z2vbSuRe.js";import{a as g}from"./mockEvaluationQueue-BDcuD_UF.js";import{M as W}from"./mockAnnotationColumns-DeWxzGFI.js";import{g as Y}from"./personalAccessTokenHandlers-pF6st3kK.js";import{g as X,a as Q}from"./teamHandlers-CnPW0W3Y.js";import{g as z}from"./accessRequirementAclHandlers-BzyFhzTq.js";import{g as J}from"./resetTwoFactorAuthHandlers-BscLDO4m.js";import{g as Z}from"./featureFlagHandlers-Btld5MMV.js";const x=new D({initialData:H,idField:"id",autoGenerateId:!0}),I=new D({initialData:v,idField:"id",autoGenerateId:!0});function k(t,r){return I.getMany(o=>o.forumId===t).filter(o=>{switch(r){case d.NO_FILTER:return!0;case d.DELETED_ONLY:return o.isDeleted;case d.EXCLUDE_DELETED:return!o.isDeleted}})}function tt(t){return[u.rest.get(`${t}${y}/:id`,async(r,o,e)=>{let s=404,a={reason:`MSW could not find a mock forum object with ID ${r.params.id}`};const n=x.getOneById(r.params.id);return n&&(s=200,a=n),o(e.status(s),e.json(a))}),u.rest.get(`${t}${j}/:id`,async(r,o,e)=>{let s=404,a={reason:`MSW could not find a mock discussion thread bundle object with ID ${r.params.id}`};r.params.id==="messageUrl"&&(a={reason:"GET /thread/messageUrl is not yet implemented"});const n=I.getOneById(r.params.id);return n&&(s=200,a=n),o(e.status(s),e.json(a))}),u.rest.post(`${t}${j}`,async(r,o,e)=>{const s=await r.json(),a=I.create({forumId:s.forumId,projectId:L.id,title:s.title,createdOn:new Date().toISOString(),createdBy:String(m),modifiedOn:new Date().toISOString(),etag:"etag",messageKey:"todo key",numberOfViews:0,numberOfReplies:0,lastActivity:new Date().toISOString(),activeAuthors:[String(m)],isEdited:!1,isDeleted:!1,isPinned:!1});return o(e.status(201),e.json(a))}),u.rest.get(`${t}${M(":forumId")}`,async(r,o,e)=>{const s=r.url.searchParams.get("offset"),a=s?parseInt(s):0,n=r.url.searchParams.get("limit"),i=n?parseInt(n):10,l=r.params.filter??d.EXCLUDE_DELETED,c=k(r.params.forumId,l),f={results:c.slice(a,a+i),totalNumberOfResults:c.length};return o(e.status(200),e.json(f))}),u.rest.get(`${t}${y}/:id/moderators`,async(r,o,e)=>{const s={results:[String(m)],totalNumberOfResults:1};return o(e.status(200),e.json(s))})]}function $(t){return{subscriptionId:String(h.number.int({min:1e3,max:9999})),subscriberId:String(m),createdOn:h.date.anytime().toISOString(),...t}}const et=H.map(t=>$({objectId:t.id,objectType:A.FORUM})),st=v.map(t=>$({objectType:A.THREAD,objectId:t.id})),p=new D({initialData:[...et,...st],idField:"subscriptionId",autoGenerateId:!0});function E(t,r="ASC",o=0,e=10,s){const a=p.getAll().filter(i=>t?i.objectType===t:!0).filter(i=>s?s.includes(i.objectId):!0).sort((i,l)=>{const c=new Date(l.createdOn).getTime()-new Date(i.createdOn).getTime();return r==="ASC"?c:-1*c}),n=a.length;return{results:a.slice(o,o+e),totalNumberOfResults:n}}function rt(t){return[u.rest.get(`${t}/repo/v1/subscription/all`,async(r,o,e)=>{const s=r.url.searchParams.get("objectType")??void 0,a=r.url.searchParams.get("sortDirection")??void 0,n=r.url.searchParams.get("offset"),i=n?parseInt(n):void 0,l=r.url.searchParams.get("limit"),c=l?parseInt(l):void 0,f=E(s??void 0,a,i,c);return o(e.status(200),e.json(f))}),u.rest.post(`${t}/repo/v1/subscription/list`,async(r,o,e)=>{const s=await r.json(),a=E(s.objectType,s.sortDirection,void 0,void 0,s.idList);return o(e.status(200),e.json(a))}),u.rest.post(`${t}/repo/v1/subscription`,async(r,o,e)=>{const s=await r.json(),a=p.create({subscriberId:String(m),objectId:s.objectId,objectType:s.objectType,createdOn:new Date().toISOString()});return o(e.status(201),e.json(a))}),u.rest.delete(`${t}/repo/v1/subscription/:id`,async(r,o,e)=>{const s=r.params.id;return p.delete(s),o(e.status(200),e.body(""))}),u.rest.post(`${t}/repo/v1/subscription/subscribers`,async(r,o,e)=>{const s=await r.json(),n={subscribers:p.getMany(i=>i.objectType===s.objectType&&i.objectId===s.objectId).map(i=>i.subscriberId)};return o(e.status(200),e.json(n))})]}function ot(t){return[u.rest.get(`${t}${N(":evaluationId")}`,async(r,o,e)=>{let s=404,a={reason:`Mock Service worker could not find a mock evaluation queue with ID ${r.params.evaluationId}`};const n=g.find(i=>i.id===r.params.entityId);return n&&(a=n,s=200),o(e.status(s),e.json(a))}),u.rest.get(`${t}${C}`,async(r,o,e)=>{let s=200,a={results:g,totalNumberOfResults:g.length};return o(e.status(s),e.json(a))})]}function at(t){return[u.rest.post(`${t}${T}/message`,async(r,o,e)=>{const s=await r.json();return o(e.status(201),e.json(s))})]}const nt={creators:[{creatorName:"Farnsworth, Hubert"},{creatorName:"Wong, Amy"}],titles:[{title:"Mathematics of quantum neutrino fields"}],publicationYear:3024};function it(t,r=nt){return[u.rest.get(`${t}${T}/doi`,async(o,e,s)=>e(s.status(201),s.json(r)))]}const ut=(t,r)=>[u.rest.options("*",async(o,e,s)=>e(s.status(200))),u.rest.get(`${t}/auth/v1/authenticatedOn`,async(o,e,s)=>e(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...w(t),...R(t),P(t,!0,!0),..._(t),...F(t),...z(t),...O(t),...U(t),...B(t),...tt(t),...rt(t),...ot(t),G(t),...q(W,t),...K(t),...Y(t),...X(t),...Q(t),...J(t),...at(t),Z({portalOrigin:r}),...V(t),...it(t)];ut(S(b.REPO_ENDPOINT),S(b.PORTAL_ENDPOINT));export{ut as g};
