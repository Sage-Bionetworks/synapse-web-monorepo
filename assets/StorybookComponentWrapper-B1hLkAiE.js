import{j as r}from"./jsx-runtime-CKrituN3.js";import{r as s,R as p}from"./index-CBqU2yxZ.js";import{W as m,X as y,Y as f,m as c,Z as C,a as k,_ as S,$ as h,a0 as g,V as x,a1 as w,a2 as E}from"./ApplicationSessionManager-CoKgEkVZ.js";import"./OrientationBanner-DFzKDcoJ.js";import{S as b}from"./getEndpoint-CjoHA800.js";import{S as v}from"./ToastMessage-CNeR6xcT.js";import{d as _}from"./dayjs.min-BIwLhz4I.js";var Q=function(){return null};async function T(){let e=await h(),o;try{o=await g(e)}catch(t){throw t instanceof x&&t.status===401&&(console.error("Encountered error fetching profile: ",t,"Signing out..."),await w(),e=void 0),t}let n;return e&&E(e).then(t=>{n=_(t.authenticatedOn).format("L LT")}),{accessToken:e,profile:o,authenticatedOn:n}}const a=new m(y);function R(e){const o=b[e];window.SRC={OVERRIDE_ENDPOINT_CONFIG:o},a.resetQueries()}function d(e){const{storybookContext:o}=e,n=o.globals.stack||o.parameters.stack;s.useEffect(()=>{R(n)},[n]);const[t,l]=p.useState(void 0);f(),s.useEffect(()=>{T().then(i=>{l(i.accessToken)})}),s.useEffect(()=>{async function i(){await a.cancelQueries(),a.removeQueries(),await a.invalidateQueries()}i()},[t]);const u=s.useMemo(()=>({accessToken:t,isInExperimentalMode:c.isInSynapseExperimentalMode(),utcTime:c.getUseUtcTimeFromCookie(),withErrorBoundary:!0,downloadCartPageUrl:"/?path=/story/download-downloadcartpage--demo"}),[t]);return r.jsx(C,{client:a,children:r.jsxs(k,{synapseContext:u,children:[o.globals.showReactQueryDevtools&&r.jsx(Q,{}),r.jsxs(S,{children:[r.jsx(v,{}),r.jsx("main",{children:e.children})]})]})})}try{d.displayName="StorybookComponentWrapper",d.__docgenInfo={description:"Wraps storybook story components to ensure that all components receive required context.",displayName:"StorybookComponentWrapper",props:{storybookContext:{defaultValue:null,description:"",name:"storybookContext",required:!0,type:{name:"{ globals: { stack?: SynapseStack | undefined; showReactQueryDevtools?: boolean | undefined; }; parameters: { stack?: SynapseStack | undefined; }; }"}}}}}catch{}export{d as S,T as s};
