import{an as y,aa as h,j as e,dH as _,dG as S,c1 as R,r as x}from"./iframe-BhrR5Sll.js";import{u as b}from"./useInfiniteQuery-BrWjCX7v.js";import{u as N}from"./index-CWXMHv8E.js";import{M as w}from"./MarkdownSynapse-gk6o-aVH.js";import{S as D}from"./SkeletonTable-bVZR_JBz.js";import{U as I}from"./UserBadge-B_-Td5kg.js";import"./index-Chi_LkuB.js";import"./SkeletonButton-CXfcR02x.js";import"./SkeletonInlineBlock-BVfsrZM3.js";import"./SkeletonParagraph-BvDfq1qX.js";import"./useUserBundle-hOPzwbRd.js";import"./useSuspenseQuery-CuIa-HUN.js";import"./MenuItem-BJbLDGlr.js";import"./Card-D2q1-b23.js";import"./Chip-BT3G1XLE.js";function k(s,r){const{accessToken:o,keyFactory:n}=y(),a={accessRequirementId:s};return b({...r,queryKey:n.getApprovedSubmissionInfoQueryKey(a),queryFn:async t=>await h.getApprovedSubmissionInfo({...a,nextPageToken:t.pageParam},o),initialPageParam:void 0,getNextPageParam:t=>t.nextPageToken})}function p({info:s}){return e.jsx(e.Fragment,{children:s&&e.jsxs("p",{className:"SubmissionInfoCard",children:[e.jsx("strong",{children:" Project Lead: "})," ",e.jsx("span",{children:s.projectLead})," ",e.jsx("br",{}),e.jsx("strong",{children:" Institution: "})," ",e.jsx("span",{children:s.institution})," ",e.jsx("br",{}),e.jsx("strong",{children:" Data Access Request Submitted By: "})," ",e.jsx(I,{userId:s.submittedBy})," ",e.jsx("br",{}),e.jsxs("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",_(S(s.modifiedOn),"M/D/YYYY"),"):"]}),e.jsx(w,{markdown:s.intendedDataUseStatement}),s.accessorChanges&&s.accessorChanges.map(r=>e.jsxs("div",{children:[e.jsx(I,{userId:r.userId})," ",r.type]},`${r.userId}-${r.type}`))]})})}function f(){return e.jsxs("p",{className:"SubmissionInfoCard",children:[e.jsx(D,{numCols:1,numRows:4}),e.jsx(R,{variant:"rectangular",width:"100%",height:80})]})}try{p.displayName="SubmissionInfoCard",p.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}function u(s){const{accessRequirementId:r}=s,{ref:o,inView:n}=N(),{data:a,status:t,isLoading:j,hasNextPage:m,isFetchingNextPage:d,fetchNextPage:c}=k(r,{throwOnError:!0});x.useEffect(()=>{t==="success"&&!d&&m&&c&&n&&c()},[t,m,d,c,n]);const l=a?.pages.flatMap(i=>i.results)??[];return e.jsxs(e.Fragment,{children:[l.length>0&&e.jsxs("div",{className:"IDUReport",children:[l.map(i=>e.jsxs(x.Fragment,{children:[e.jsx(p,{info:i}),e.jsx("hr",{})]},JSON.stringify(i))),e.jsx("div",{ref:o})]}),(j||d)&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(f,{})]})]})}try{u.displayName="IDUReport",u.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function g(s){const{accessRestrictionId:r}=s;return e.jsx(u,{accessRequirementId:r})}try{g.displayName="MarkdownIDUReport",g.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}export{g as default};
