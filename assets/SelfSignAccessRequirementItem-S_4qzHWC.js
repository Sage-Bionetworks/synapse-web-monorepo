import{an as j,dp as w,r as C,j as e,X as O,_ as P,V as U,c4 as b,v as _}from"./iframe-CJi55ERg.js";import{f as E,e as V,p as L}from"./useAccessRequirements-B2k2htXt.js";import{d as M,e as B}from"./useUserBundle-B5WLYqAD.js";import{M as g}from"./MarkdownSynapse-CFDbt1Xl.js";import{R as D,a as l}from"./RequirementItem-B9CZnmgG.js";function S(p){const{accessRequirement:s,onHide:I}=p,{isAuthenticated:a}=j(),c=w(s),{data:f}=M(),{data:r}=B(),o=a&&r&&!c&&s.isCertifiedUserRequired&&!r.isCertified,d=a&&r&&!c&&s.isValidatedProfileRequired&&!r.isVerified,{data:v,isLoading:x}=E(String(s.id)),u=v?.isApproved,{data:i}=V(s.id.toString()),[m,h]=C.useState(!1),{mutate:k,isPending:y,error:A}=L({onError:t=>{console.error("Error creating access approval: ",t)}}),T=()=>{const t={requirementId:s?.id,submitterId:f?.ownerId,accessorId:f?.ownerId,state:_.APPROVED};k(t)};let n=e.jsx(e.Fragment,{});c&&s.termsOfUse?n=e.jsx(g,{markdown:s.termsOfUse}):i&&(n=e.jsx(g,{wikiId:i?.wikiPageId,ownerId:i?.ownerObjectId,objectType:i?.ownerObjectType}));let R;if(a&&!u){let t="I Accept Terms of Use",q=!1;(o||d)&&(q=!0,t=`You must ${o?"be certified":""}${o&&d?" and ":""}${d?"have a validated user profile":""} to accept`),R=[{variant:"outlined",onClick:T,children:t,disabled:y||q},{variant:"text",onClick:I,children:"I do not accept"}]}return e.jsxs(D,{"data-testid":"SelfSignAccessRequirementItem",status:x?l.LOADING:u?l.COMPLETE:l.LOCKED,actions:R,children:[u?e.jsxs(e.Fragment,{children:[e.jsxs(O,{variant:"body1",children:["You have accepted the terms of use."," ",e.jsx(P,{role:"button",onClick:()=>h(!m),children:m?"Hide Terms":"View Terms"})]}),m&&e.jsx(U,{sx:{my:1},children:n})]}):n,A&&e.jsx(b,{severity:"error",children:A.reason})]})}try{S.displayName="SelfSignAccessRequirementItem",S.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}export{S};
