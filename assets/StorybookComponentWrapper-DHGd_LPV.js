import{j as n}from"./jsx-runtime-DoxjgJx5.js";import{r as s,a as p}from"./index-Cu9bd8lq.js";import{$ as m,a0 as y,a1 as f,S as c,a2 as k,Q as C,a3 as h,a4 as g,a5 as S,_ as x,a6 as b,a7 as w,a8 as E}from"./SynapseClient-CZkcD3lR.js";import"./OrientationBanner-BKoSQ39U.js";import"./RegularExpressions-RV1YxBM7.js";import{S as v}from"./ToastMessage-8mzk2-LM.js";import{d as T}from"./dayjs.min-D1RcYm3-.js";var _=function(){return null};async function j(){let e=await g(),t;try{t=await S(e)}catch(o){throw o instanceof x&&o.status===401&&(console.error("Encountered error fetching profile: ",o,"Signing out..."),await b(),e=void 0),o}let a;return e&&w(e).then(o=>{a=T(o.authenticatedOn).format("L LT")}),{accessToken:e,profile:t,authenticatedOn:a}}const i=new m(y);function Q(e){const t=E[e];window.SRC={OVERRIDE_ENDPOINT_CONFIG:t}}function d(e){const{storybookContext:t}=e,a=t.globals.stack||t.parameters.stack;s.useEffect(()=>{Q(a)},[a]);const[o,l]=p.useState(void 0);f(),s.useEffect(()=>{j().then(r=>{l(r.accessToken)})}),s.useEffect(()=>{async function r(){await i.cancelQueries(),await i.resetQueries()}r()},[o,a]);const u=s.useMemo(()=>({accessToken:t.args.isAuthenticated&&a==="mock"?"fake token":!t.args.isAuthenticated&&a==="mock"?void 0:o,isInExperimentalMode:c.isInSynapseExperimentalMode(),utcTime:c.getUseUtcTimeFromCookie(),withErrorBoundary:!0,downloadCartPageUrl:"/?path=/story/download-downloadcartpage--demo"}),[o]);return n.jsx(s.Suspense,{fallback:"global suspense loading...",children:n.jsx(k,{client:i,children:n.jsxs(C,{synapseContext:u,children:[t.globals.showReactQueryDevtools&&n.jsx(_,{}),n.jsxs(h,{children:[n.jsx(v,{}),n.jsx("main",{children:e.children})]})]})})})}try{d.displayName="StorybookComponentWrapper",d.__docgenInfo={description:"Wraps storybook story components to ensure that all components receive required context.",displayName:"StorybookComponentWrapper",props:{storybookContext:{defaultValue:null,description:"",name:"storybookContext",required:!0,type:{name:"{ args: { isAuthenticated?: boolean | undefined; }; globals: { stack?: SynapseStack | undefined; showReactQueryDevtools?: boolean | undefined; }; parameters: { stack?: SynapseStack | undefined; }; }"}}}}}catch{}export{d as S,j as s};
