import{V as lt,j as l,ao as Re,an as Rt,aJ as ln,ab as De,bI as Fe,r as I,fB as ye,eT as j,c7 as Se,ax as xe,e8 as be,dF as Ce,dI as H,c0 as ut,b6 as un,f0 as yt,iW as Dt,hq as Ft,e_ as Pe,bC as ke,W as k,d6 as dt,d7 as dn,$ as Pt,c4 as Zt,K as Be,dl as cn,iX as mn,B as D,Y as Te,am as fn,d$ as Ue,hC as hn,di as qe,fy as pn,ca as yn,c3 as gn,b1 as vn,dZ as Ze,dk as _n}from"./iframe-D-KER6Qh.js";import{A as xn}from"./SchemaDrivenAnnotationEditor-aa-NK8zR.js";import{p as zt}from"./pluralize-DvqWrKl4.js";import{D as bn}from"./DateTimePicker-DXYLZXLO.js";import{M as $t,i as We,g as gt,f as Je,D as Cn,c as je,a as ct,b as Bt,d as Ut,e as vt,h as Tn,j as Sn,k as kn,l as jn,m as In,n as wn,o as En,t as _t}from"./MultiValueField-Blp7h-_0.js";import{a4 as Nn}from"./useMobilePicker-DS1ZAT9m.js";import{M as z}from"./MenuItem-Dh0Z5Zi9.js";import{E as Mn}from"./EntityFinderModal-FqnixOGR.js";import{F as xt}from"./EntityFinder-D48N0_yF.js";import{V as An}from"./useEntitySelection-WyZgmz9X.js";import{D as Vn}from"./DownloadTwoTone-POxhFavt.js";import{C as On}from"./ConfirmationDialog-CSFf9HzN.js";import{C as qt}from"./Checkbox-BxWUJH6V.js";import{B as Ln}from"./DropdownSelect-DDewmN8F.js";import{g as Wt}from"./groupBy-CifytuAK.js";const Rn=lt(l.jsx("path",{d:"m17.73 12.02 3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34a.996.996 0 0 0-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29s.51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2.66 9.34-3.63-3.62 3.63-3.63 3.62 3.62z"})),Dn=lt(l.jsx("path",{d:"m5 9 1.41 1.41L11 5.83V22h2V5.83l4.59 4.59L19 9l-7-7z"})),Fn=lt(l.jsx("path",{d:"m19 15-1.41-1.41L13 18.17V2h-2v16.17l-4.59-4.59L5 15l7 7z"}));function Pn(n,e,t){const{keyFactory:s}=Re();return Rt({...t,queryKey:s.getDefaultColumnModelsQueryKey(n,e),queryFn:async()=>(await De.getDefaultColumnModels(n,e)).list})}function Zn(n,e){const{accessToken:t,keyFactory:s}=Re();return Rt({...e,queryKey:s.getAnnotationColumnModelsQueryKey(n),queryFn:()=>De.getAnnotationColumnModels(n,t)})}function wa(n){const{accessToken:e}=Re();return ln({...n,mutationFn:async t=>(await De.createColumnModels(e,t)).list})}const zn={};function $n(n,e){return Fe(n,function(t,s,a){s(this,e(t(this),a))})}const ze=(n,e,t)=>(e.has(t)?e:e.set(t,n())).get(t),Bn=new WeakMap,Un=(n,e,t,s)=>{const a=ze(()=>new WeakMap,Bn,e),r=ze(()=>new WeakMap,a,t);return ze(n,r,s)};function Jt(n,e,t=Object.is){return Un(()=>{const s=Symbol(),a=([i,o])=>{if(o===s)return e(i);const d=e(i,o);return t(o,d)?o:d},r=Fe(i=>{const o=i(r),d=i(n);return a([d,o])});return r.init=s,r},n,e,t)}const qn=n=>typeof n?.then=="function";function Wn(n=()=>{try{return window.localStorage}catch(t){(zn?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(t);return}},e){var t;let s,a;const r={getItem:(d,u)=>{var m,T;const M=E=>{if(E=E||"",s!==E){try{a=JSON.parse(E,e?.reviver)}catch{return u}s=E}return a},y=(T=(m=n())==null?void 0:m.getItem(d))!=null?T:null;return qn(y)?y.then(M):M(y)},setItem:(d,u)=>{var m;return(m=n())==null?void 0:m.setItem(d,JSON.stringify(u,void 0))},removeItem:d=>{var u;return(u=n())==null?void 0:u.removeItem(d)}},i=d=>(u,m,T)=>d(u,M=>{let y;try{y=JSON.parse(M||"")}catch{y=T}m(y)});let o;try{o=(t=n())==null?void 0:t.subscribe}catch{}return!o&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(o=(d,u)=>{if(!(n()instanceof window.Storage))return()=>{};const m=T=>{T.storageArea===n()&&T.key===d&&u(T.newValue)};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}}),o&&(r.subscribe=i(o)),r}Wn();function Jn(n,e){const t=I.useMemo(()=>Fe(null,(s,a,...r)=>n(s,a,...r)),[n]);return ye(t,e)}H.extend(Nn);function Gn(n){const{onChange:e,value:t,disabled:s,SelectProps:a,selectFormHelperText:r}=n;return l.jsxs(xe,{fullWidth:!0,children:[l.jsxs(be,{...a,disabled:s,value:t||"",onChange:i=>{i.target.value==null?e(void 0):e(i.target.value)},children:[l.jsx(z,{value:void 0,children:""}),l.jsx(z,{value:"true",children:"true"}),l.jsx(z,{value:"false",children:"false"})]}),r&&l.jsx(Ce,{color:"error.main",children:r})]})}function Hn(n){const{onChange:e,value:t=null,disabled:s,TextFieldProps:a}=n,r=I.useMemo(()=>t?H(t,"x"):null,[t]);return l.jsx(bn,{value:r,onChange:i=>{i==null?e(void 0):e(String(i.valueOf()))},disabled:s,slotProps:{textField:a}})}function Yn(n){const{onChange:e,value:t=null,columnModel:s,TextFieldProps:a,disabled:r}=n,i=I.useMemo(()=>{try{return s.columnType===j.DATE_LIST&&Array.isArray(t)?t.map(o=>H(o,"x").toISOString()):t}catch{return null}},[t,s.columnType]);return l.jsx($t,{value:i,onChange:o=>{o==null?e(void 0):s.columnType===j.DATE_LIST?e(o.map(d=>H(d).valueOf())):e(o)},columnType:s.columnType,TextFieldProps:{...a,disabled:r}})}function Ge(n){const{columnModel:e,onChange:t,value:s,disabled:a,TextFieldProps:r}=n,{columnType:i}=e;return i===j.BOOLEAN?l.jsx(Gn,{...n}):i===j.DATE?l.jsx(Hn,{...n}):i.endsWith("_LIST")?l.jsx(Yn,{...n}):l.jsx(Se,{...r,type:"text",value:s||void 0,onChange:o=>{o.target.value==""?t(void 0):t(o.target.value)},disabled:a})}try{Ge.displayName="DefaultValueField",Ge.__docgenInfo={description:"",displayName:"DefaultValueField",props:{columnModel:{defaultValue:null,description:"",name:"columnModel",required:!0,type:{name:"{ name?: string; defaultValue?: string | any[]; id?: string; isSelected?: boolean; columnType?: ColumnTypeEnum; maximumSize?: string | number; maximumListLength?: string | number; ... 4 more ...; isOriginallyDefaultColumn?: boolean; }"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"T"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T) => void"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},TextFieldProps:{defaultValue:null,description:"",name:"TextFieldProps",required:!1,type:{name:'Omit<TextFieldProps, "disabled" | "value" | "onChange">'}},SelectProps:{defaultValue:null,description:"",name:"SelectProps",required:!1,type:{name:'Omit<SelectProps, "disabled" | "variant" | "value" | "onChange">'}},selectFormHelperText:{defaultValue:null,description:"",name:"selectFormHelperText",required:!1,type:{name:"ReactNode"}}}}}catch{}function Ie(n){const{value:e,originalValue:t,recommendedValue:s,columnType:a,error:r,...i}=n,o=We(e,s),d=t!=null&&gt(e)!==gt(t),u=!!r||o;let m=null,T;return o?m=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:"Data annotations are longer than allowed by current schema."}),l.jsxs("p",{children:["Recommended size is ",l.jsx("strong",{children:s}),"."]}),j.STRING===a&&l.jsx("p",{children:"If unsure, choose “MediumText” from the Column Type menu."})]}):d&&(m=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:"This value has changed since the table was last saved."}),l.jsxs("p",{children:["The last saved value was ",t,"."]})]}),T=M=>({"& .MuiInputBase-root":{backgroundColor:un(M.palette.info.main,.1),border:"1px solid",borderColor:M.palette.info.main}})),l.jsx(ut,{title:m,children:l.jsx(Se,{value:e??"",error:u,color:u?"error":void 0,focused:o?!0:void 0,sx:[...Array.isArray(i.sx)?i.sx:[i.sx],T],...i})})}try{Ie.displayName="FieldWithRecommendedMinimum",Ie.__docgenInfo={description:"",displayName:"FieldWithRecommendedMinimum",props:{slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<TextFieldSlots>"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<FormControlProps, keyof IntrinsicElements>, {}, BaseTextFieldProps>; ... 4 more ...; select?: SlotProps<...>; } | { ...; } | { ...; }"}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},originalValue:{defaultValue:null,description:"",name:"originalValue",required:!1,type:{name:"string | number"}},recommendedValue:{defaultValue:null,description:"",name:"recommendedValue",required:!1,type:{name:"number"}},columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}}}}}catch{}function Gt(n){return n.length>0&&n.every(e=>e.isSelected&&(e.jsonSubColumns??[]).every(t=>t.isSelected))}function Xn(n){return n.reduce((e,t)=>(t.isSelected&&(e+=1),t.jsonSubColumns&&t.jsonSubColumns.forEach(s=>{s.isSelected&&(e+=1)}),e),0)}function Qn(){return{name:"",columnType:j.STRING,maximumSize:Cn,isOriginallyDefaultColumn:!1,isSelected:!1}}function Kn(){return{name:"",jsonPath:"",columnType:j.STRING,facetType:"enumeration",isSelected:!1}}function bt(n,e){const t=[...n];return t.forEach((s,a)=>{if(a>0&&e(s)&&!e(t[a-1])){const r=t[a-1];t[a-1]=t[a],t[a]=r}}),t}function Ct(n,e){const t=[...n];for(let s=t.length-1;s>=0;s--){const a=t[s];if(s<t.length-1&&e(a)&&!e(t[s+1])){const r=t[s];t[s]=t[s+1],t[s+1]=r}}return t}function es(n,e){const{annotationColumnModels:t}=n;return e.map(s=>{const a=t?Je(t,s):void 0;return a==null||(We(s.maximumSize,a.maximumSize)&&(s={...s,maximumSize:a.maximumSize}),We(s.maximumListLength,a.maximumListLength)&&(s={...s,maximumListLength:a.maximumListLength})),s})}function ts(n,e){const{columnModelIndex:t,jsonSubColumnModelIndex:s,newColumnType:a}=n;let r;if(e&&e[t])e[t].jsonSubColumns&&s!==void 0?r=yt(e[t].jsonSubColumns[s]):r=yt(e[t]);else throw new Error("Cannot change column model type for a column that does not exist");r.columnType=a,!je(a)&&"maximumSize"in r&&delete r.maximumSize,!ct(a)&&"maximumListLength"in r&&delete r.maximumListLength,"enumValues"in r&&delete r.enumValues,"defaultValue"in r&&delete r.defaultValue;const i=Bt(a,!!s);"facetType"in r&&(i===null||!i.includes(r.facetType))&&delete r.facetType,"jsonSubColumns"in r&&a!==j.JSON&&delete r.jsonSubColumns,e&&e[t]&&(e[t].jsonSubColumns&&s!==void 0?e[t].jsonSubColumns[s]=r:e[t]=r)}function ns(n){return Gt(n)?n.map(t=>({...t,jsonSubColumns:t.jsonSubColumns?.map(s=>({...s,isSelected:!1})),isSelected:!1})):n.map(t=>({...t,jsonSubColumns:t.jsonSubColumns?.map(s=>({...s,isSelected:!0})),isSelected:!0}))}function ss(n,e){const{columnModelIndex:t,jsonSubColumnModelIndex:s,value:a}=n;e&&e[t]&&(e[t].jsonSubColumns&&s!==void 0?e[t].jsonSubColumns[s]=a:e[t]=a)}function as(n,e){const{columnModelIndex:t,jsonSubColumnModelIndex:s}=n;if(e&&e[t])if(e[t].jsonSubColumns&&s!==void 0){const a=e[t].jsonSubColumns[s];e[t].jsonSubColumns[s]={...a,isSelected:!a.isSelected}}else{const a=e[t];e[t]={...a,isSelected:!a.isSelected}}}function rs(n){return n.filter(e=>!e.isSelected).map(e=>(e.jsonSubColumns&&(e={...e,jsonSubColumns:e.jsonSubColumns.filter(t=>!t.isSelected)}),e))}function is(n,e,t){if(e==t)return n;const s=[...n],a=s[e];return s.splice(e,1),s.splice(t,0,a),s}function os(n,e){const{from:t,to:s}=n,a=t.jsonSubColumnModelIndex!==void 0?e[t.columnModelIndex].jsonSubColumns:e,r=t.jsonSubColumnModelIndex!==void 0?t.jsonSubColumnModelIndex:t.columnModelIndex,i=s.jsonSubColumnModelIndex!==void 0?s.jsonSubColumnModelIndex:s.columnModelIndex,o=is(a,r,i);return t.jsonSubColumnModelIndex!==void 0?(e[t.columnModelIndex].jsonSubColumns=o,e):o}function ls(n,e){switch(e.type){case"setValue":n=e.value;break;case"toggleSelectAll":{n=ns(n);break}case"setColumnModelValue":{ss(e,n);break}case"changeColumnModelType":{ts(e,n);break}case"appendColumn":n.push(Qn());break;case"appendJsonSubColumn":{const{columnModelIndex:t}=e;n[t]={...n[t],jsonSubColumns:[...n[t].jsonSubColumns??[],Kn()]};break}case"toggleSelect":{as(e,n);break}case"delete":n=rs(n);break;case"move":{n=os(e,n);break}case"moveUp":n=bt(n,t=>t.isSelected),n.forEach(t=>{t.jsonSubColumns&&(t.jsonSubColumns=bt(t.jsonSubColumns,s=>s.isSelected))});break;case"moveDown":n=Ct(n,t=>t.isSelected),n.forEach(t=>{t.jsonSubColumns&&(t.jsonSubColumns=Ct(t.jsonSubColumns,s=>s.isSelected))});break;case"updateColumnSizesToRecommendedValues":n=es(e,n);break;default:throw new Error("Unexpected action",e)}return[...n]}const B=$n([],ls),us={height:"28px",fontSize:"12px"},ds={height:"38px",fontSize:"14px"};function cs(n,e){return n==null?"":ke(n)?n.map(String).join(", "):n}function ms(n){if(!n||!n.property&&!n.direction)return"";const e=n.property||"FREQUENCY",t=n.direction||"DESC";return`${e}_${t}`}function fs(n){if(!n)return;const[e,t]=n.split("_");return{property:e,direction:t}}const ae=!0;function we(n){const{columnModelIndex:e,jsonSubColumnIndex:t,entityType:s,isDefaultColumn:a,disabled:r=!1,validationErrors:i=null,defaultAnnotationModel:o,originalColumnModel:d}=n,u=t!=null,m=ye(B),T=Dt.includes(Ft(s)),M=I.useMemo(()=>Jt(B,_=>u?_[e].jsonSubColumns[t]:_[e],Zt),[e,u,t]),y=Pe(M),E=I.useMemo(()=>Ut(T,u),[T,u]),ne=I.useMemo(()=>Bt(y.columnType,u),[y.columnType,u]),O=I.useMemo(()=>u?us:ds,[u]),S=I.useMemo(()=>{if(i&&ke(i)){const _={};return i.forEach(P=>{P.path&&(_[P.path[P.path.length-1]]=P.message)}),_}return{}},[i]);return l.jsxs(l.Fragment,{children:[l.jsxs(k,{sx:{display:"grid",gridColumn:"1 / span 11",gridTemplateColumns:"subgrid"},children:[u&&l.jsx(k,{sx:{gridColumn:"1 / span 1"},children:Lt}),l.jsx(k,{"data-testid":"ColumnModelForm",sx:{display:"flex",alignItems:"start",gridColumn:u?"2 / span 1":" 1 / span 1",mt:u?"0px":"5px"},children:l.jsx(qt,{checked:y.isSelected,inputProps:{"aria-label":"Select"},disabled:r,onChange:()=>{m({type:"toggleSelect",columnModelIndex:e,jsonSubColumnModelIndex:t})}})}),l.jsx(k,{sx:{my:a?"auto":void 0,gridColumn:u?"3 / span 1":"2 / span 2"},children:a?y.name:l.jsx(Se,{value:y.name,placeholder:u?"Facet name":"Column name",onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,name:_.target.value}})},disabled:r,fullWidth:!0,error:!!S.name,helperText:S.name,slotProps:{input:{disableInjectingGlobalStyles:ae,sx:O,slotProps:{input:{"aria-label":"Name"}}}}})}),l.jsx(k,{sx:{my:a?"auto":void 0},children:a?vt(y.columnType):l.jsxs(xe,{fullWidth:!0,children:[l.jsx(be,{label:"Column Type",value:y.columnType,onChange:_=>{m({type:"changeColumnModelType",columnModelIndex:e,jsonSubColumnModelIndex:t,newColumnType:_.target.value})},slotProps:{input:{"aria-label":"Column Type"}},sx:O,disabled:r,error:!!S.columnType,children:E.map(_=>l.jsx(z,{value:_,children:vt(_)},_))}),S.columnType&&l.jsx(Ce,{color:"error.main",children:S.columnType})]})}),l.jsx(k,{sx:{my:a?"auto":void 0},children:a?y.maximumSize??"":l.jsx(Ie,{value:y.maximumSize??"",originalValue:d?.maximumSize,recommendedValue:o?.maximumSize,columnType:y.columnType,disabled:r||!je(y.columnType),InputProps:{disableInjectingGlobalStyles:ae,slotProps:{input:{"aria-label":"Maximum Size",min:1,max:je(y.columnType)?Tn(y.columnType):void 0}},sx:O},onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,maximumSize:_.target.value}})},fullWidth:!0,error:!!S.maximumSize,helperText:S.maximumSize})}),l.jsx(k,{sx:{my:a?"auto":void 0},children:a?y.maximumListLength??"":l.jsx(Ie,{value:y.maximumListLength??"",originalValue:d?.maximumListLength,recommendedValue:o?.maximumListLength,columnType:y.columnType,disabled:r||!ct(y.columnType),onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,maximumListLength:_.target.value}})},InputProps:{disableInjectingGlobalStyles:ae,slotProps:{input:{"aria-label":"Maximum List Length"}},sx:O},fullWidth:!0,error:!!S.maximumListLength,helperText:S.maximumListLength})}),l.jsx(k,{sx:{my:a?"auto":void 0},children:a?cs(y?.defaultValue,y.columnType):l.jsx(Ge,{TextFieldProps:{InputProps:{disableInjectingGlobalStyles:ae,slotProps:{input:{"aria-label":"Default Value"}},sx:O},fullWidth:!0,error:!!S.defaultValue,helperText:S.defaultValue},SelectProps:{label:"Default Value",sx:O,slotProps:{input:{"aria-label":"Default Value"}},error:!!S.defaultValue},selectFormHelperText:S.defaultValue,columnModel:y,value:y?.defaultValue||null,onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,defaultValue:_||void 0}})},disabled:r||!Sn(y.columnType,T,u)})}),l.jsx(k,{children:l.jsx($t,{value:y?.enumValues,onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,enumValues:_==null||dt(_)?void 0:_}})},columnType:y.columnType,TextFieldProps:{fullWidth:!0,disabled:r||!kn(y.columnType,u),InputProps:{disableInjectingGlobalStyles:ae,readOnly:!0,sx:O,slotProps:{input:{"aria-label":"Restrict Values"}}},error:!!S.enumValues,helperText:S.enumValues}})}),l.jsx(k,{children:l.jsxs(xe,{fullWidth:!0,children:[l.jsx(be,{label:"Facet Type",value:y.facetType||"",disabled:r||ne===null,onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,facetType:_.target.value}})},sx:O,slotProps:{input:{"aria-label":"Facet Type"}},error:!!S.facetType,children:(ne??[]).map((_,P)=>l.jsx(z,{value:_,children:_===void 0?"":jn(_)},P))}),S.facetType&&l.jsx(Ce,{color:"error.main",children:S.facetType})]})}),l.jsx(k,{children:l.jsxs(xe,{fullWidth:!0,children:[l.jsxs(be,{label:"Sort Facet Values",value:ms("facetSortConfig"in y?y.facetSortConfig:void 0),disabled:r||y.facetType!=="enumeration",onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,facetSortConfig:fs(_.target.value)}})},sx:O,slotProps:{input:{"aria-label":"Sort Facet Values"}},error:!!S.facetSortConfig,children:[l.jsx(z,{value:"FREQUENCY_DESC",children:"Frequency Descending"}),l.jsx(z,{value:"FREQUENCY_ASC",children:"Frequency Ascending"}),l.jsx(z,{value:"VALUE_DESC",children:"Value Descending"}),l.jsx(z,{value:"VALUE_ASC",children:"Value Ascending"})]}),S.facetSortConfig&&l.jsx(Ce,{color:"error.main",children:S.facetSortConfig})]})})]}),u&&l.jsxs(k,{sx:{display:"grid",gridColumn:"1 / span 11",gridTemplateColumns:"subgrid"},children:[l.jsx(k,{sx:{gridColumn:"1 / span 1"},children:Lt}),l.jsx(k,{}),l.jsx(k,{sx:{gridColumn:"3 / span 7"},children:l.jsx(Se,{placeholder:"JSON Path",value:y.jsonPath,onChange:_=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...y,jsonPath:_.target.value}})},disabled:r,fullWidth:!0,slotProps:{input:{disableInjectingGlobalStyles:ae,sx:O,endAdornment:l.jsx(ut,{title:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx(Pt,{href:"https://dev.mysql.com/doc/refman/8.0/en/json.html#json-path-syntax",children:"Please use a valid JSON Path selector, following this format."})}),l.jsx("p",{children:"This field is for linking the sub-column facet to the corresponding location in the JSON data, so that it can be used as facet filter. The correct selector will point to the key referenced in the sub-column JSON Path."})]}),children:l.jsx(dn,{sx:{color:"grey.700"}})}),slotProps:{input:{"aria-label":"JSON Path"}}}},error:!!S.jsonPath,helperText:S.jsonPath})})]})]})}try{we.displayName="ColumnModelForm",we.__docgenInfo={description:"",displayName:"ColumnModelForm",props:{entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"link"'},{value:'"table"'},{value:'"dockerrepo"'},{value:'"file"'},{value:'"project"'},{value:'"folder"'},{value:'"entityview"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"materializedview"'},{value:'"virtualtable"'},{value:'"recordset"'}]}},columnModelIndex:{defaultValue:null,description:"",name:"columnModelIndex",required:!0,type:{name:"number"}},jsonSubColumnIndex:{defaultValue:null,description:"",name:"jsonSubColumnIndex",required:!1,type:{name:"number"}},isDefaultColumn:{defaultValue:null,description:"",name:"isDefaultColumn",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},validationErrors:{defaultValue:null,description:"",name:"validationErrors",required:!1,type:{name:"ZodIssue[]"}},defaultAnnotationModel:{defaultValue:null,description:"",name:"defaultAnnotationModel",required:!1,type:{name:"ColumnModel"}},originalColumnModel:{defaultValue:null,description:"",name:"originalColumnModel",required:!1,type:{name:"ColumnModel"}}}}}catch{}function He(n){const{initialFinderProjectId:e,onAddColumns:t,...s}=n,[a,r]=I.useState(!1),{accessToken:i}=Re(),o=I.useCallback(async u=>{const{tableBundle:m}=await De.getEntityBundleV2(u.targetId,{includeTableBundle:!0},u.targetVersionNumber,i);return m.columnModels.map(T=>({...T,id:void 0}))},[i]),d=I.useCallback(async u=>{try{const m=u[0];if(m){const T=await o(m);t(T)}}catch(m){console.error(m),Be(m.message,"danger")}finally{r(!1)}},[o,t]);return l.jsxs(l.Fragment,{children:[l.jsx(Mn,{configuration:{initialScope:e?xt.CURRENT_PROJECT:xt.ALL_PROJECTS,initialContainer:e??"root",selectMultiple:!1,selectableTypes:mn.ALL_TABLES,visibleTypesInTree:[cn.project],versionSelection:An.UNTRACKED},show:a,title:"Import Columns from Table",promptCopy:"Find Tables to import columns",titleHelpPopoverProps:{markdownText:"Search or Browse Synapse to find an existing Table in order to import columns into this Table"},onConfirm:u=>{d(u)},confirmButtonCopy:"Import Columns",onCancel:()=>{r(!1)}}),l.jsx(D,{variant:"outlined",onClick:()=>{r(!0)},startIcon:l.jsx(Vn,{}),...s,children:"Import Columns"})]})}try{He.displayName="ImportTableColumnsButton",He.__docgenInfo={description:"",displayName:"ImportTableColumnsButton",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},initialFinderProjectId:{defaultValue:null,description:"",name:"initialFinderProjectId",required:!1,type:{name:"string"}},onAddColumns:{defaultValue:null,description:"",name:"onAddColumns",required:!0,type:{name:"(columnModels: { name: string; defaultValue?: string; columnType: ColumnType; maximumSize?: number; maximumListLength?: number; enumValues?: string[]; facetType?: FacetType; jsonSubColumns?: JsonSubColumnModel[]; facetSortConfig?: FacetColumnSortConfig; id?: string; }[]) => void"}}}}}catch{}const hs="Use Recommended Sizes",ps=l.jsxs(l.Fragment,{children:[l.jsx(Te,{variant:"body1",children:"Proceeding will adjust columns with size values that are shorter than longest data in your annotations."}),l.jsx(Te,{variant:"body1",children:"Changed size values will appear in blue. Hover to see the previous value."}),l.jsx(Te,{variant:"body1",children:"Changes are saved only after clicking “Save” in the Schema editor. Click “Cancel” to discard unsaved changes."})]});function Ye(n){const{disabled:e=!1,annotationColumnModelsQuery:t}=n,s=ye(B),a=Pe(B),r=Gt(a),i=Xn(a),[o,d]=I.useState(!1),u=t.isLoading||t.data,m=t.data?In(a,t.data):0;return l.jsxs(k,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[l.jsxs(D,{"aria-label":"Select All",variant:"outlined",color:"neutral",onClick:()=>{s({type:"toggleSelectAll"})},sx:{alignSelf:"stretch"},disabled:e||a.length==0,children:[l.jsx(qt,{sx:{mr:1},checked:r,indeterminate:i>0&&!r,disabled:e||a.length==0}),l.jsxs(Te,{variant:"smallText1",sx:{color:"text.secondary"},children:[i," selected"]})]}),l.jsxs(Ln,{sx:{alignSelf:"stretch"},children:[l.jsx(D,{"aria-label":"Move Down",variant:"outlined",color:"neutral",onClick:()=>{s({type:"moveDown"})},disabled:e||i==0,children:l.jsx(Fn,{fontSize:"small"})}),l.jsx(D,{"aria-label":"Move Up",variant:"outlined",color:"neutral",onClick:()=>{s({type:"moveUp"})},disabled:e||i==0,children:l.jsx(Dn,{fontSize:"small"})})]}),l.jsx(D,{"aria-label":"Delete",variant:"outlined",color:"neutral",onClick:()=>{s({type:"delete"})},sx:{alignSelf:"stretch"},disabled:e||i==0,children:l.jsx(fn,{fontSize:"small",icon:"delete",wrap:!1})}),l.jsx(k,{sx:{flexGrow:1}}),l.jsx(Pt,{sx:{display:"block",py:"10px",mr:"10px",textAlign:"right"},href:"https://help.synapse.org/docs/Organizing-Data-With-Tables.2011038095.html",target:"_blank",children:"About schemas and column types"}),u&&l.jsxs(l.Fragment,{children:[l.jsx(On,{open:o,onConfirm:()=>{s({type:"updateColumnSizesToRecommendedValues",annotationColumnModels:t.data}),d(!1)},onCancel:()=>{d(!1)},title:`This will change ${m.toLocaleString()} ${zt("column",m)} in this schema`,content:ps,confirmButtonProps:{children:hs}}),l.jsx(ut,{title:m>0?"":"All schema values meet the minimum recommended sizes.",children:l.jsx(k,{children:l.jsx(D,{sx:{height:"100%"},variant:"outlined",startIcon:t.isLoading?l.jsx(Ue,{}):l.jsx(Rn,{}),onClick:()=>{d(!0)},disabled:t.isLoading||m==0,children:"Use Recommended Sizes"})})})]})]})}try{Ye.displayName="TableColumnSchemaFormActions",Ye.__docgenInfo={description:"",displayName:"TableColumnSchemaFormActions",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},annotationColumnModelsQuery:{defaultValue:null,description:"",name:"annotationColumnModelsQuery",required:!0,type:{name:"any"}}}}}catch{}var C;(function(n){n.assertEqual=a=>{};function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const r={};for(const i of a)r[i]=i;return r},n.getValidEnumValues=a=>{const r=n.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),i={};for(const o of r)i[o]=a[o];return n.objectValues(i)},n.objectValues=a=>n.objectKeys(a).map(function(r){return a[r]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&r.push(i);return r},n.find=(a,r)=>{for(const i of a)if(r(i))return i},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function s(a,r=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(r)}n.joinValues=s,n.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(C||(C={}));var Tt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Tt||(Tt={}));const h=C.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),q=n=>{switch(typeof n){case"undefined":return h.undefined;case"string":return h.string;case"number":return Number.isNaN(n)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":return Array.isArray(n)?h.array:n===null?h.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?h.promise:typeof Map<"u"&&n instanceof Map?h.map:typeof Set<"u"&&n instanceof Set?h.set:typeof Date<"u"&&n instanceof Date?h.date:h.object;default:return h.unknown}},c=C.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class U extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},s={_errors:[]},a=r=>{for(const i of r.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)s._errors.push(t(i));else{let o=s,d=0;for(;d<i.path.length;){const u=i.path[d];d===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(t(i))):o[u]=o[u]||{_errors:[]},o=o[u],d++}}};return a(this),s}static assert(e){if(!(e instanceof U))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,C.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const a of this.issues)if(a.path.length>0){const r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else s.push(e(a));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}U.create=n=>new U(n);const Xe=(n,e)=>{let t;switch(n.code){case c.invalid_type:n.received===h.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case c.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,C.jsonStringifyReplacer)}`;break;case c.unrecognized_keys:t=`Unrecognized key(s) in object: ${C.joinValues(n.keys,", ")}`;break;case c.invalid_union:t="Invalid input";break;case c.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${C.joinValues(n.options)}`;break;case c.invalid_enum_value:t=`Invalid enum value. Expected ${C.joinValues(n.options)}, received '${n.received}'`;break;case c.invalid_arguments:t="Invalid function arguments";break;case c.invalid_return_type:t="Invalid function return type";break;case c.invalid_date:t="Invalid date";break;case c.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:C.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case c.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case c.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case c.custom:t="Invalid input";break;case c.invalid_intersection_types:t="Intersection results could not be merged";break;case c.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case c.not_finite:t="Number must be finite";break;default:t=e.defaultError,C.assertNever(n)}return{message:t}};let ys=Xe;function gs(){return ys}const vs=n=>{const{data:e,path:t,errorMaps:s,issueData:a}=n,r=[...t,...a.path||[]],i={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let o="";const d=s.filter(u=>!!u).slice().reverse();for(const u of d)o=u(i,{data:e,defaultError:o}).message;return{...a,path:r,message:o}};function f(n,e){const t=gs(),s=vs({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Xe?void 0:Xe].filter(a=>!!a)});n.common.issues.push(s)}class L{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const a of t){if(a.status==="aborted")return g;a.status==="dirty"&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const a of t){const r=await a.key,i=await a.value;s.push({key:r,value:i})}return L.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const a of t){const{key:r,value:i}=a;if(r.status==="aborted"||i.status==="aborted")return g;r.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof i.value<"u"||a.alwaysSet)&&(s[r.value]=i.value)}return{status:e.value,value:s}}}const g=Object.freeze({status:"aborted"}),he=n=>({status:"dirty",value:n}),R=n=>({status:"valid",value:n}),St=n=>n.status==="aborted",kt=n=>n.status==="dirty",ie=n=>n.status==="valid",Ee=n=>typeof Promise<"u"&&n instanceof Promise;var p;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(p||(p={}));class Y{constructor(e,t,s,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jt=(n,e)=>{if(ie(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new U(n.common.issues);return this._error=t,this._error}}};function x(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:a}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,o)=>{const{message:d}=n;return i.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:d??s??o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:d??t??o.defaultError}},description:a}}class b{get description(){return this._def.description}_getType(e){return q(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new L,ctx:{common:e.parent.common,data:e.data,parsedType:q(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ee(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:q(e)},a=this._parseSync({data:e,path:s.path,parent:s});return jt(s,a)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:q(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return ie(s)?{value:s.value}:{issues:t.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>ie(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:q(e)},a=this._parse({data:e,path:s.path,parent:s}),r=await(Ee(a)?a:Promise.resolve(a));return jt(s,r)}refine(e,t){const s=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,r)=>{const i=e(a),o=()=>r.addIssue({code:c.custom,...s(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(d=>d?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,a)=>e(s)?!0:(a.addIssue(typeof t=="function"?t(s,a):t),!1))}_refinement(e){return new ue({schema:this,typeName:v.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return J.create(this,this._def)}nullable(){return de.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return F.create(this)}promise(){return Ve.create(this,this._def)}or(e){return Me.create([this,e],this._def)}and(e){return Ae.create(this,e,this._def)}transform(e){return new ue({...x(this._def),schema:this,typeName:v.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new st({...x(this._def),innerType:this,defaultValue:t,typeName:v.ZodDefault})}brand(){return new zs({typeName:v.ZodBranded,type:this,...x(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new at({...x(this._def),innerType:this,catchValue:t,typeName:v.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return mt.create(this,e)}readonly(){return it.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _s=/^c[^\s-]{8,}$/i,xs=/^[0-9a-z]+$/,bs=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Cs=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ts=/^[a-z0-9_-]{21}$/i,Ss=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ks=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,js=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Is="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let $e;const ws=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Es=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ns=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ms=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,As=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Vs=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ht="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Os=new RegExp(`^${Ht}$`);function Yt(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Ls(n){return new RegExp(`^${Yt(n)}$`)}function Rs(n){let e=`${Ht}T${Yt(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Ds(n,e){return!!((e==="v4"||!e)&&ws.test(n)||(e==="v6"||!e)&&Ns.test(n))}function Fs(n,e){if(!Ss.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function Ps(n,e){return!!((e==="v4"||!e)&&Es.test(n)||(e==="v6"||!e)&&Ms.test(n))}class $ extends b{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.string){const r=this._getOrReturnCtx(e);return f(r,{code:c.invalid_type,expected:h.string,received:r.parsedType}),g}const s=new L;let a;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),f(a,{code:c.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),f(a,{code:c.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const i=e.data.length>r.value,o=e.data.length<r.value;(i||o)&&(a=this._getOrReturnCtx(e,a),i?f(a,{code:c.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&f(a,{code:c.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")js.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"email",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")$e||($e=new RegExp(Is,"u")),$e.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"emoji",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")Cs.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"uuid",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")Ts.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"nanoid",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")_s.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"cuid",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")xs.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"cuid2",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")bs.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"ulid",code:c.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),f(a,{validation:"url",code:c.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"regex",code:c.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),f(a,{code:c.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),f(a,{code:c.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),f(a,{code:c.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?Rs(r).test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{code:c.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?Os.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{code:c.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?Ls(r).test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{code:c.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?ks.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"duration",code:c.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?Ds(e.data,r.version)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"ip",code:c.invalid_string,message:r.message}),s.dirty()):r.kind==="jwt"?Fs(e.data,r.alg)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"jwt",code:c.invalid_string,message:r.message}),s.dirty()):r.kind==="cidr"?Ps(e.data,r.version)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"cidr",code:c.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?As.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"base64",code:c.invalid_string,message:r.message}),s.dirty()):r.kind==="base64url"?Vs.test(e.data)||(a=this._getOrReturnCtx(e,a),f(a,{validation:"base64url",code:c.invalid_string,message:r.message}),s.dirty()):C.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(a=>e.test(a),{validation:t,code:c.invalid_string,...p.errToObj(s)})}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...p.errToObj(e)})}url(e){return this._addCheck({kind:"url",...p.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...p.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...p.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...p.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...p.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...p.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...p.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...p.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...p.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...p.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...p.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...p.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...p.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...p.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...p.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...p.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...p.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...p.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...p.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...p.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...p.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...p.errToObj(t)})}nonempty(e){return this.min(1,p.errToObj(e))}trim(){return new $({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}$.create=n=>new $({checks:[],typeName:v.ZodString,coerce:n?.coerce??!1,...x(n)});function Zs(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,a=t>s?t:s,r=Number.parseInt(n.toFixed(a).replace(".","")),i=Number.parseInt(e.toFixed(a).replace(".",""));return r%i/10**a}class K extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.number){const r=this._getOrReturnCtx(e);return f(r,{code:c.invalid_type,expected:h.number,received:r.parsedType}),g}let s;const a=new L;for(const r of this._def.checks)r.kind==="int"?C.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:c.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?Zs(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:c.not_finite,message:r.message}),a.dirty()):C.assertNever(r);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,p.toString(t))}gt(e,t){return this.setLimit("min",e,!1,p.toString(t))}lte(e,t){return this.setLimit("max",e,!0,p.toString(t))}lt(e,t){return this.setLimit("max",e,!1,p.toString(t))}setLimit(e,t,s,a){return new K({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:p.toString(a)}]})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:p.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:p.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:p.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:p.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:p.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:p.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:p.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:p.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:p.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&C.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}K.create=n=>new K({checks:[],typeName:v.ZodNumber,coerce:n?.coerce||!1,...x(n)});class ee extends b{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==h.bigint)return this._getInvalidInput(e);let s;const a=new L;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):C.assertNever(r);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:h.bigint,received:t.parsedType}),g}gte(e,t){return this.setLimit("min",e,!0,p.toString(t))}gt(e,t){return this.setLimit("min",e,!1,p.toString(t))}lte(e,t){return this.setLimit("max",e,!0,p.toString(t))}lt(e,t){return this.setLimit("max",e,!1,p.toString(t))}setLimit(e,t,s,a){return new ee({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:p.toString(a)}]})}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:p.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:p.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:p.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:p.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:p.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ee.create=n=>new ee({checks:[],typeName:v.ZodBigInt,coerce:n?.coerce??!1,...x(n)});class Ne extends b{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==h.boolean){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:h.boolean,received:s.parsedType}),g}return R(e.data)}}Ne.create=n=>new Ne({typeName:v.ZodBoolean,coerce:n?.coerce||!1,...x(n)});class oe extends b{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.date){const r=this._getOrReturnCtx(e);return f(r,{code:c.invalid_type,expected:h.date,received:r.parsedType}),g}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return f(r,{code:c.invalid_date}),g}const s=new L;let a;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(a=this._getOrReturnCtx(e,a),f(a,{code:c.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(a=this._getOrReturnCtx(e,a),f(a,{code:c.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):C.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:p.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:p.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}oe.create=n=>new oe({checks:[],coerce:n?.coerce||!1,typeName:v.ZodDate,...x(n)});class It extends b{_parse(e){if(this._getType(e)!==h.symbol){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:h.symbol,received:s.parsedType}),g}return R(e.data)}}It.create=n=>new It({typeName:v.ZodSymbol,...x(n)});class wt extends b{_parse(e){if(this._getType(e)!==h.undefined){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:h.undefined,received:s.parsedType}),g}return R(e.data)}}wt.create=n=>new wt({typeName:v.ZodUndefined,...x(n)});class Qe extends b{_parse(e){if(this._getType(e)!==h.null){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:h.null,received:s.parsedType}),g}return R(e.data)}}Qe.create=n=>new Qe({typeName:v.ZodNull,...x(n)});class Ke extends b{constructor(){super(...arguments),this._any=!0}_parse(e){return R(e.data)}}Ke.create=n=>new Ke({typeName:v.ZodAny,...x(n)});class Et extends b{constructor(){super(...arguments),this._unknown=!0}_parse(e){return R(e.data)}}Et.create=n=>new Et({typeName:v.ZodUnknown,...x(n)});class X extends b{_parse(e){const t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:h.never,received:t.parsedType}),g}}X.create=n=>new X({typeName:v.ZodNever,...x(n)});class Nt extends b{_parse(e){if(this._getType(e)!==h.undefined){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:h.void,received:s.parsedType}),g}return R(e.data)}}Nt.create=n=>new Nt({typeName:v.ZodVoid,...x(n)});class F extends b{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),a=this._def;if(t.parsedType!==h.array)return f(t,{code:c.invalid_type,expected:h.array,received:t.parsedType}),g;if(a.exactLength!==null){const i=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(i||o)&&(f(t,{code:i?c.too_big:c.too_small,minimum:o?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(f(t,{code:c.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(f(t,{code:c.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>a.type._parseAsync(new Y(t,i,t.path,o)))).then(i=>L.mergeArray(s,i));const r=[...t.data].map((i,o)=>a.type._parseSync(new Y(t,i,t.path,o)));return L.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new F({...this._def,minLength:{value:e,message:p.toString(t)}})}max(e,t){return new F({...this._def,maxLength:{value:e,message:p.toString(t)}})}length(e,t){return new F({...this._def,exactLength:{value:e,message:p.toString(t)}})}nonempty(e){return this.min(1,e)}}F.create=(n,e)=>new F({type:n,minLength:null,maxLength:null,exactLength:null,typeName:v.ZodArray,...x(e)});function re(n){if(n instanceof N){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=J.create(re(s))}return new N({...n._def,shape:()=>e})}else return n instanceof F?new F({...n._def,type:re(n.element)}):n instanceof J?J.create(re(n.unwrap())):n instanceof de?de.create(re(n.unwrap())):n instanceof te?te.create(n.items.map(e=>re(e))):n}class N extends b{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=C.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==h.object){const u=this._getOrReturnCtx(e);return f(u,{code:c.invalid_type,expected:h.object,received:u.parsedType}),g}const{status:s,ctx:a}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof X&&this._def.unknownKeys==="strip"))for(const u in a.data)i.includes(u)||o.push(u);const d=[];for(const u of i){const m=r[u],T=a.data[u];d.push({key:{status:"valid",value:u},value:m._parse(new Y(a,T,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof X){const u=this._def.unknownKeys;if(u==="passthrough")for(const m of o)d.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(u==="strict")o.length>0&&(f(a,{code:c.unrecognized_keys,keys:o}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const m of o){const T=a.data[m];d.push({key:{status:"valid",value:m},value:u._parse(new Y(a,T,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const m of d){const T=await m.key,M=await m.value;u.push({key:T,value:M,alwaysSet:m.alwaysSet})}return u}).then(u=>L.mergeObjectSync(s,u)):L.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return p.errToObj,new N({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{const a=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:p.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new N({...this._def,unknownKeys:"strip"})}passthrough(){return new N({...this._def,unknownKeys:"passthrough"})}extend(e){return new N({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new N({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:v.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new N({...this._def,catchall:e})}pick(e){const t={};for(const s of C.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new N({...this._def,shape:()=>t})}omit(e){const t={};for(const s of C.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new N({...this._def,shape:()=>t})}deepPartial(){return re(this)}partial(e){const t={};for(const s of C.objectKeys(this.shape)){const a=this.shape[s];e&&!e[s]?t[s]=a:t[s]=a.optional()}return new N({...this._def,shape:()=>t})}required(e){const t={};for(const s of C.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof J;)r=r._def.innerType;t[s]=r}return new N({...this._def,shape:()=>t})}keyof(){return Xt(C.objectKeys(this.shape))}}N.create=(n,e)=>new N({shape:()=>n,unknownKeys:"strip",catchall:X.create(),typeName:v.ZodObject,...x(e)});N.strictCreate=(n,e)=>new N({shape:()=>n,unknownKeys:"strict",catchall:X.create(),typeName:v.ZodObject,...x(e)});N.lazycreate=(n,e)=>new N({shape:n,unknownKeys:"strip",catchall:X.create(),typeName:v.ZodObject,...x(e)});class Me extends b{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function a(r){for(const o of r)if(o.result.status==="valid")return o.result;for(const o of r)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=r.map(o=>new U(o.ctx.common.issues));return f(t,{code:c.invalid_union,unionErrors:i}),g}if(t.common.async)return Promise.all(s.map(async r=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(a);{let r;const i=[];for(const d of s){const u={...t,common:{...t.common,issues:[]},parent:null},m=d._parseSync({data:t.data,path:t.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!r&&(r={result:m,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const o=i.map(d=>new U(d));return f(t,{code:c.invalid_union,unionErrors:o}),g}}get options(){return this._def.options}}Me.create=(n,e)=>new Me({options:n,typeName:v.ZodUnion,...x(e)});function et(n,e){const t=q(n),s=q(e);if(n===e)return{valid:!0,data:n};if(t===h.object&&s===h.object){const a=C.objectKeys(e),r=C.objectKeys(n).filter(o=>a.indexOf(o)!==-1),i={...n,...e};for(const o of r){const d=et(n[o],e[o]);if(!d.valid)return{valid:!1};i[o]=d.data}return{valid:!0,data:i}}else if(t===h.array&&s===h.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let r=0;r<n.length;r++){const i=n[r],o=e[r],d=et(i,o);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return t===h.date&&s===h.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Ae extends b{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),a=(r,i)=>{if(St(r)||St(i))return g;const o=et(r.value,i.value);return o.valid?((kt(r)||kt(i))&&t.dirty(),{status:t.value,value:o.data}):(f(s,{code:c.invalid_intersection_types}),g)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,i])=>a(r,i)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Ae.create=(n,e,t)=>new Ae({left:n,right:e,typeName:v.ZodIntersection,...x(t)});class te extends b{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.array)return f(s,{code:c.invalid_type,expected:h.array,received:s.parsedType}),g;if(s.data.length<this._def.items.length)return f(s,{code:c.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;!this._def.rest&&s.data.length>this._def.items.length&&(f(s,{code:c.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((i,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new Y(s,i,s.path,o)):null}).filter(i=>!!i);return s.common.async?Promise.all(r).then(i=>L.mergeArray(t,i)):L.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new te({...this._def,rest:e})}}te.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new te({items:n,typeName:v.ZodTuple,rest:null,...x(e)})};class Mt extends b{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.map)return f(s,{code:c.invalid_type,expected:h.map,received:s.parsedType}),g;const a=this._def.keyType,r=this._def.valueType,i=[...s.data.entries()].map(([o,d],u)=>({key:a._parse(new Y(s,o,s.path,[u,"key"])),value:r._parse(new Y(s,d,s.path,[u,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of i){const u=await d.key,m=await d.value;if(u.status==="aborted"||m.status==="aborted")return g;(u.status==="dirty"||m.status==="dirty")&&t.dirty(),o.set(u.value,m.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const d of i){const u=d.key,m=d.value;if(u.status==="aborted"||m.status==="aborted")return g;(u.status==="dirty"||m.status==="dirty")&&t.dirty(),o.set(u.value,m.value)}return{status:t.value,value:o}}}}Mt.create=(n,e,t)=>new Mt({valueType:e,keyType:n,typeName:v.ZodMap,...x(t)});class pe extends b{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==h.set)return f(s,{code:c.invalid_type,expected:h.set,received:s.parsedType}),g;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(f(s,{code:c.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(f(s,{code:c.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const r=this._def.valueType;function i(d){const u=new Set;for(const m of d){if(m.status==="aborted")return g;m.status==="dirty"&&t.dirty(),u.add(m.value)}return{status:t.value,value:u}}const o=[...s.data.values()].map((d,u)=>r._parse(new Y(s,d,s.path,u)));return s.common.async?Promise.all(o).then(d=>i(d)):i(o)}min(e,t){return new pe({...this._def,minSize:{value:e,message:p.toString(t)}})}max(e,t){return new pe({...this._def,maxSize:{value:e,message:p.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}pe.create=(n,e)=>new pe({valueType:n,minSize:null,maxSize:null,typeName:v.ZodSet,...x(e)});class At extends b{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}At.create=(n,e)=>new At({getter:n,typeName:v.ZodLazy,...x(e)});class tt extends b{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:c.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}}tt.create=(n,e)=>new tt({value:n,typeName:v.ZodLiteral,...x(e)});function Xt(n,e){return new le({values:n,typeName:v.ZodEnum,...x(e)})}class le extends b{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return f(t,{expected:C.joinValues(s),received:t.parsedType,code:c.invalid_type}),g}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return f(t,{received:t.data,code:c.invalid_enum_value,options:s}),g}return R(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return le.create(e,{...this._def,...t})}exclude(e,t=this._def){return le.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}le.create=Xt;class nt extends b{_parse(e){const t=C.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==h.string&&s.parsedType!==h.number){const a=C.objectValues(t);return f(s,{expected:C.joinValues(a),received:s.parsedType,code:c.invalid_type}),g}if(this._cache||(this._cache=new Set(C.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=C.objectValues(t);return f(s,{received:s.data,code:c.invalid_enum_value,options:a}),g}return R(e.data)}get enum(){return this._def.values}}nt.create=(n,e)=>new nt({values:n,typeName:v.ZodNativeEnum,...x(e)});class Ve extends b{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.promise&&t.common.async===!1)return f(t,{code:c.invalid_type,expected:h.promise,received:t.parsedType}),g;const s=t.parsedType===h.promise?t.data:Promise.resolve(t.data);return R(s.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ve.create=(n,e)=>new Ve({type:n,typeName:v.ZodPromise,...x(e)});class ue extends b{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===v.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:i=>{f(s,i),i.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const i=a.transform(s.data,r);if(s.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return g;const d=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return d.status==="aborted"?g:d.status==="dirty"||t.value==="dirty"?he(d.value):d});{if(t.value==="aborted")return g;const o=this._def.schema._parseSync({data:i,path:s.path,parent:s});return o.status==="aborted"?g:o.status==="dirty"||t.value==="dirty"?he(o.value):o}}if(a.type==="refinement"){const i=o=>{const d=a.refinement(o,r);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(a.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ie(i))return g;const o=a.transform(i.value,r);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>ie(i)?Promise.resolve(a.transform(i.value,r)).then(o=>({status:t.value,value:o})):g);C.assertNever(a)}}ue.create=(n,e,t)=>new ue({schema:n,typeName:v.ZodEffects,effect:e,...x(t)});ue.createWithPreprocess=(n,e,t)=>new ue({schema:e,effect:{type:"preprocess",transform:n},typeName:v.ZodEffects,...x(t)});class J extends b{_parse(e){return this._getType(e)===h.undefined?R(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}J.create=(n,e)=>new J({innerType:n,typeName:v.ZodOptional,...x(e)});class de extends b{_parse(e){return this._getType(e)===h.null?R(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}de.create=(n,e)=>new de({innerType:n,typeName:v.ZodNullable,...x(e)});class st extends b{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===h.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}st.create=(n,e)=>new st({innerType:n,typeName:v.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...x(e)});class at extends b{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ee(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new U(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new U(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}at.create=(n,e)=>new at({innerType:n,typeName:v.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...x(e)});class rt extends b{_parse(e){if(this._getType(e)!==h.nan){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:h.nan,received:s.parsedType}),g}return{status:"valid",value:e.data}}}rt.create=n=>new rt({typeName:v.ZodNaN,...x(n)});class zs extends b{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class mt extends b{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?g:r.status==="dirty"?(t.dirty(),he(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?g:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(e,t){return new mt({in:e,out:t,typeName:v.ZodPipeline})}}class it extends b{_parse(e){const t=this._def.innerType._parse(e),s=a=>(ie(a)&&(a.value=Object.freeze(a.value)),a);return Ee(t)?t.then(a=>s(a)):s(t)}unwrap(){return this._def.innerType}}it.create=(n,e)=>new it({innerType:n,typeName:v.ZodReadonly,...x(e)});var v;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(v||(v={}));const V=$.create,Q=K.create,$s=rt.create;ee.create;const Oe=Ne.create,Bs=oe.create,Le=Qe.create,Qt=Ke.create;X.create;const G=F.create,ce=N.create,A=Me.create;Ae.create;te.create;const Vt=tt.create,ot=le.create,Us=nt.create;Ve.create;J.create;de.create;const W={string:(n=>$.create({...n,coerce:!0})),number:(n=>K.create({...n,coerce:!0})),boolean:(n=>Ne.create({...n,coerce:!0})),bigint:(n=>ee.create({...n,coerce:!0})),date:(n=>oe.create({...n,coerce:!0}))},qs=V().transform((n,e)=>{if(["NaN","Infinity","-Infinity"].includes(n))return n;const t=Number(n);return isNaN(t)&&e.addIssue({code:c.invalid_type,expected:"number",received:"string",path:[],message:"Must be a number"}),t}),Ws=A([Q(),$s(),qs]).transform(n=>typeof n=="number"?isNaN(n)?"NaN":n===1/0?"Infinity":n===-1/0?"-Infinity":n:n);H.extend(hn);const Js=V().transform(n=>n.match(/^\d+$/)?H.utc(parseInt(n)).toISOString():H.utc(n).toISOString()),Gs=A([Q(),Js,Bs()]).transform(n=>H(n).toISOString()),Hs=ot(["true","false"]).transform(n=>n==="true"),Ys=A([Hs,Oe()]),fe=A([V().transform(n=>n===""?null:n),Le(),Q().int()]).pipe(A([Le(),W.number().int()])),Xs=A([V().regex(/^(syn)?\d+$/),Q().int()]),Qs=V().transform((n,e)=>{try{const t=JSON.parse(n);return Array.isArray(t)||e.addIssue({code:c.custom,message:"Object was valid JSON, but was not an array"}),t}catch{e.addIssue({code:c.custom,message:"Invalid JSON array"})}return n});function ft(n){if(n.endsWith("_LIST")){const e=ft(n.replace("_LIST",""));return A([G(e),Qs.pipe(G(e))])}switch(n){case j.STRING:return W.string();case j.BOOLEAN:return Ys;case j.INTEGER:return fe;case j.DOUBLE:return Ws;case j.DATE:return Gs;case j.FILEHANDLEID:return fe;case j.ENTITYID:return Xs;case j.LINK:return W.string();case j.MEDIUMTEXT:return W.string();case j.LARGETEXT:return W.string();case j.USERID:return fe;case j.EVALUATIONID:return fe;case j.SUBMISSIONID:return fe;case j.JSON:return V().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}});default:return console.warn(`No validator for column type ${n}`),Qt()}}function Ks(n){const e=ft(n);return A([Le(),V().length(0).transform(()=>null),e]).optional().refine(t=>n.endsWith("_LIST")?t==null||ke(t):!0,"Default value cannot be an array for a non-list column type").transform(t=>{if(!(t==null||t===""||ke(t)&&dt(t)))return typeof t=="string"?t:JSON.stringify(t)})}function ea(n){const e=ft(n);return A([G(e),Le(),V().length(0).transform(()=>null),e.transform(t=>[t])]).optional().transform(t=>{if(t!=null&&(t=t.filter(s=>s!==""&&s!=null),!dt(t)))return t.map(s=>typeof s=="string"?s:JSON.stringify(s))})}const Ot=V().optional().transform(n=>n===""?void 0:n),Kt=A([Vt("enumeration"),Vt("range")]),ta=ce({property:ot(["FREQUENCY","VALUE"]).optional(),direction:ot(["DESC","ASC"]).optional()}),en=ce({name:V().min(1,{message:"Name is required"}),columnType:Us(j)}),tn=en.merge(ce({jsonPath:V().startsWith("$"),facetType:Kt})),nn=en.merge(ce({id:V().optional(),defaultValue:A([V(),G(Qt())]).optional(),maximumSize:A([Ot,Q()]).pipe(W.number().finite().int().min(1).max(En).optional()),maximumListLength:A([Ot,Q()]).pipe(W.number().finite().int().min(1).max(wn).optional()),enumValues:G(A([V(),Q().int()]).pipe(W.string())).optional(),jsonSubColumns:G(tn).optional(),facetType:Kt.optional(),facetSortConfig:ta.optional()})),na=nn.refine(n=>n.maximumSize==null||je(n.columnType),{message:"Size is not allowed for this column type",path:["maximumSize"]}).refine(n=>n.maximumListLength==null||ct(n.columnType),{message:"Maximum list length is not allowed for this column type",path:["maximumListLength"]}).refine(n=>n.jsonSubColumns!=null?n.columnType===j.JSON:!0,{message:"Only JSON columns can have JSON sub-columns.",path:["columnType"]}).transform((n,e)=>{if(n.defaultValue!=null){const s=Ks(n.columnType).safeParse(n.defaultValue);let a;return s.success?a=s.data:(s.error.issues.forEach(r=>{e.addIssue({...r,path:["defaultValue"]})}),a=void 0),{...n,defaultValue:a}}return qe(n,"defaultValue")}).transform((n,e)=>{if(n.enumValues!=null){const s=ea(n.columnType).safeParse(n.enumValues);let a;return s.success?a=s.data:(s.error.issues.forEach(r=>{e.addIssue({...r,path:["enumValues"]})}),a=void 0),{...n,enumValues:a}}return qe(n,"enumValues")}),sa=G(na),aa=tn.merge(ce({isSelected:Oe()}));nn.merge(ce({isSelected:Oe(),isOriginallyDefaultColumn:Oe(),jsonSubColumns:G(aa).optional()}));function ra(n){return sa.safeParse(n)}const ia="18px 18px 1.75fr 1.75fr 0.75fr 1fr 1.25fr 1.25fr 1fr 1.25fr",oa=6,Lt=l.jsx(k,{sx:{width:"1px",height:`calc(100% + 2 * ${oa}px)`,backgroundColor:"grey.400",marginLeft:"8px"}}),la=l.jsx(k,{sx:n=>({width:"50%",height:"60%",borderLeft:`1px solid ${n.palette.grey[400]}`,borderBottom:`1px solid ${n.palette.grey[400]}`,marginLeft:"8px",marginBottom:"auto",marginRight:"0",borderBottomLeftRadius:"5px"})}),Z=vn(k,{label:"ColumnHeader"})({fontWeight:700}),ua="Add All Annotations";function da(n,e){const{initialData:t,entityType:s,viewScope:a,onSubmit:r=yn,isSubmitting:i=!1,originalColumnModels:o}=n,d=Pe(I.useMemo(()=>Fe(w=>w(B).length),[])),u=ye(B),[m,T]=I.useState(null),M=Jn(I.useCallback(w=>w(B),[])),y=Ft(s),E=Dt.includes(y),ne=E,O=E,{data:S,isLoading:_}=Pn(a?.viewEntityType,a?.viewTypeMask,{enabled:O,staleTime:1/0}),P=Zn({viewScope:a,includeDerivedAnnotations:!0,concreteType:"org.sagebionetworks.repo.model.table.ViewColumnModelRequest"},{enabled:ne}),{data:ge,isLoading:ht}=P;I.useEffect(()=>{t&&!_&&u({type:"setValue",value:_t(t,S??[])})},[_]);const ve=I.useCallback(()=>{const w=ra(M());return w.success?T(null):T(w.error),w},[M]);I.useImperativeHandle(e,()=>({submit(){const w=ve();w.success&&r(w.data)},getEditedColumnModels(){const w=ve();if(!w.success)throw new Error("Column models were not valid");return w.data},validate(){return ve().success}}),[r,ve]);const me=I.useCallback(w=>{const pt=M();let se=w.filter(_e=>Ut(E,!1).includes(_e.columnType)?!pt.find(on=>on.name===_e.name):!1);se=se.map(_e=>qe(_e,["id"])),se.length>0?(u({type:"setValue",value:[...pt,..._t(se,S)]}),Be(`${se.length} ${zt("column",se.length)} added to schema.`,"success")):Be("No columns added. All columns to add are present in the column schema.","info")},[S,u,E,M]),sn=I.useCallback(()=>{S&&me(S)},[S,me]),an=I.useCallback(()=>{ge&&me(ge)},[ge,me]),rn=I.useMemo(()=>m?Wt(m.errors,w=>w.path[0]):{},[m]);return l.jsxs(k,{component:"form",sx:{py:2.5},children:[l.jsx(Ye,{disabled:i,annotationColumnModelsQuery:P}),l.jsxs(k,{sx:{display:"grid",gap:"8px",gridTemplateColumns:ia,py:2.5},children:[l.jsx(Z,{}),l.jsx(Z,{sx:{gridColumn:"2 / span 2"},children:"Column Name"}),l.jsx(Z,{children:"Column Type"}),l.jsx(Z,{children:"Size"}),l.jsx(Z,{children:"Max List Length"}),l.jsx(Z,{children:"Default Value"}),l.jsx(Z,{children:"Restrict Values"}),l.jsx(Z,{children:"Facet"}),l.jsx(Z,{children:"Sort Facet Values"}),l.jsx(k,{sx:{gridColumn:"1 / span 11",backgroundColor:"grey.300",height:"2px"}}),gn(d,w=>l.jsx(ca,{entityType:s,columnModelIndex:w,disabled:i,columnModelValidationErrors:rn[w],annotationColumnModels:ge,originalColumnModels:o},w))]}),l.jsxs(k,{sx:{display:"flex",gap:1},children:[l.jsx(D,{variant:"outlined",onClick:()=>{u({type:"appendColumn"})},startIcon:l.jsx(Ze,{}),disabled:i,children:"Add Column"}),O&&l.jsxs(D,{variant:"outlined",startIcon:_?l.jsx(Ue,{}):l.jsx(Ze,{}),onClick:()=>{sn()},disabled:_||i,children:["Add Default ",_n(s)," Columns"]}),ne&&l.jsx(D,{variant:"outlined",startIcon:ht?l.jsx(Ue,{}):l.jsx(Ze,{}),disabled:ht||i,onClick:()=>{an()},children:ua}),l.jsx(He,{onAddColumns:w=>{me(w)},disabled:i})]})]})}function ca(n){const{columnModelIndex:e,entityType:t,disabled:s,columnModelValidationErrors:a=null,annotationColumnModels:r,originalColumnModels:i}=n,o=ye(B),d=Pe(I.useMemo(()=>Jt(B,y=>y[e],Zt),[e])),u=i?Je(i,d):void 0,m=r?Je(r,d):void 0,T=I.useMemo(()=>{if(a){const y=a.filter(E=>E.path[0]===e&&E.path[1]=="jsonSubColumns");return Wt(y,E=>E.path[2])}return{}},[e,a]);if(!d)return l.jsx(l.Fragment,{});const M=d.isOriginallyDefaultColumn;return l.jsxs(l.Fragment,{children:[l.jsx(we,{entityType:t,columnModelIndex:e,isDefaultColumn:M,disabled:s,validationErrors:a,defaultAnnotationModel:m,originalColumnModel:u}),d.columnType===j.JSON&&d.jsonSubColumns&&d.jsonSubColumns.map((y,E)=>l.jsx(we,{entityType:t,columnModelIndex:e,jsonSubColumnIndex:E,isDefaultColumn:M,disabled:s,validationErrors:T[E]},E)),d.columnType===j.JSON&&l.jsxs(l.Fragment,{children:[l.jsx(k,{sx:{gridColumn:"1 / span 2"},children:la}),l.jsx(k,{sx:{gridColumn:"3 / span 5"},children:l.jsx(D,{startIcon:l.jsx(xn,{}),variant:"text",disabled:s,onClick:()=>o({type:"appendJsonSubColumn",columnModelIndex:e}),children:"Add sub-column"})})]})]})}const ma=I.forwardRef(da),Ea=I.forwardRef(function(e,t){return l.jsx(pn,{children:l.jsx(ma,{...e,ref:t})})});try{TableColumnSchemaForm.displayName="TableColumnSchemaForm",TableColumnSchemaForm.__docgenInfo={description:"",displayName:"TableColumnSchemaForm",props:{entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"link"'},{value:'"table"'},{value:'"dockerrepo"'},{value:'"file"'},{value:'"project"'},{value:'"folder"'},{value:'"entityview"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"materializedview"'},{value:'"virtualtable"'},{value:'"recordset"'}]}},viewScope:{defaultValue:null,description:"",name:"viewScope",required:!1,type:{name:"ViewScope"}},initialData:{defaultValue:null,description:"",name:"initialData",required:!1,type:{name:"{ name: string; defaultValue?: string; columnType: ColumnType; maximumSize?: number; maximumListLength?: number; enumValues?: string[]; facetType?: FacetType; jsonSubColumns?: JsonSubColumnModel[]; facetSortConfig?: FacetColumnSortConfig; id?: string; }[]"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"(newColumnModels: { name: string; defaultValue?: string; columnType: ColumnType; maximumSize?: number; maximumListLength?: number; enumValues?: string[]; facetType?: FacetType; jsonSubColumns?: JsonSubColumnModel[]; facetSortConfig?: FacetColumnSortConfig; id?: string; }[]) => void"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!1,type:{name:"boolean"}},originalColumnModels:{defaultValue:null,description:"The original/current column models that are applied to the table, if they exist.",name:"originalColumnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}export{Ea as T,wa as a,Pn as u};
