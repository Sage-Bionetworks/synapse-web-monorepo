import{j as e,V as C,X as d,bQ as N,cY as S,cV as y,fT as w,cW as b,cX as v,r as u,B as U,b_ as g,e0 as V}from"./iframe-C2KiuWKW.js";import{r as F,w as O}from"./useAccessRequirements-DjXTovFl.js";import{F as R}from"./FormControlLabel-D_3YwViS.js";import{C as f}from"./Checkbox-B3nGy5Ij.js";import{C as k}from"./ConfirmationDialog-Bm4vu1Af.js";import{W as D}from"./WikiMarkdownEditorButton-B81I3Tjb.js";function E(t){const{accessRequirement:s}=t;return e.jsxs(C,{sx:{mb:2},children:[e.jsx(d,{variant:"body1",sx:{fontWeight:700},children:"Instructions (wiki)"}),e.jsx(D,{ownerObjectType:N.ACCESS_REQUIREMENT,ownerObjectId:s.id.toString(),displayWikiMarkdown:!0,buttonProps:{children:"Edit Instructions"}})]})}try{E.displayName="AccessRequirementWikiInstructions",E.__docgenInfo={description:"",displayName:"AccessRequirementWikiInstructions",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}}}}}catch{}const M="Access restricted pending review by Synapse Access and Compliance Team.",L=t=>{switch(t.concreteType){case y:case S:return"";case v:return t.termsOfUse;case b:return t.actContactInfo;case w:return M}},W=t=>t.concreteType===S||t.concreteType==y;function q(t){const{accessRequirement:s,onChange:c}=t;return e.jsx(e.Fragment,{children:W(s)&&e.jsx(e.Fragment,{children:e.jsxs(C,{sx:{mb:2},children:[e.jsx(d,{variant:"body1",sx:{fontWeight:700},children:"Accessor requirements"}),e.jsx(R,{control:e.jsx(f,{}),label:"Accessors must be certified.",checked:s.isCertifiedUserRequired,onChange:(i,n)=>c({...s,isCertifiedUserRequired:n})}),e.jsx(R,{control:e.jsx(f,{}),label:"Accessors must have a validated profile.",checked:s.isValidatedProfileRequired,onChange:(i,n)=>c({...s,isValidatedProfileRequired:n})}),s.concreteType===y&&e.jsx(R,{control:e.jsx(f,{}),label:"Accessors must use two-factor authentication (2FA).",checked:s.isTwoFaRequired,onChange:(i,n)=>c({...s,isTwoFaRequired:n})})]})})})}try{q.displayName="AccessorRequirements",q.__docgenInfo={description:"",displayName:"AccessorRequirements",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(updatedAr: AccessRequirement) => void"}}}}}catch{}function A(t){const{accessRequirement:s,onConfirmDelete:c,allowDelete:i=!1}=t,[n,a]=u.useState(!1),l=L(s);return e.jsx(e.Fragment,{children:!!l&&e.jsxs(C,{sx:{mb:2},children:[e.jsx(d,{variant:"body1",sx:{fontWeight:700,mb:1},children:"Legacy text-only instructions"}),e.jsx(d,{variant:"body1",sx:{mb:1},children:l}),i&&e.jsxs(e.Fragment,{children:[e.jsx(U,{variant:"contained",color:"error",onClick:()=>a(!0),children:"Delete old instructions"}),e.jsx(k,{open:n,title:"Are you sure?",content:"Deleting the old instructions cannot be undone. Continue?",onCancel:()=>a(!1),onConfirm:()=>{const r={...s};r.concreteType===v?r.termsOfUse=void 0:r.concreteType===b&&(r.actContactInfo=void 0),c(r),a(!1)}})]})]})})}try{A.displayName="AccessRequirementTextInstructions",A.__docgenInfo={description:"",displayName:"AccessRequirementTextInstructions",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},onConfirmDelete:{defaultValue:null,description:"",name:"onConfirmDelete",required:!0,type:{name:"(updatedAr: AccessRequirement) => void"}},allowDelete:{defaultValue:null,description:"",name:"allowDelete",required:!1,type:{name:"boolean"}}}}}catch{}const j=u.forwardRef(function(s,c){const{accessRequirementId:i,onSave:n,onError:a,allowDeleteTextInstructions:l=!1}=s,[r,m]=u.useState(null),{data:p,error:x}=F(i,{staleTime:1/0});u.useEffect(()=>{p&&m(p)},[p]);const{mutateAsync:T,error:h}=O(),_=u.useCallback(async(o,I)=>{try{await T(o),m(o),I||n()}catch{I||a()}},[n,a,T]);return u.useImperativeHandle(c,()=>({save(){r&&_(r,!1)}}),[r,_]),r?e.jsxs(e.Fragment,{children:[e.jsx(A,{accessRequirement:r,allowDelete:l,onConfirmDelete:o=>{_(o,!0)}}),e.jsx(E,{accessRequirement:r}),e.jsx(q,{accessRequirement:r,onChange:o=>m(o)}),h&&e.jsx(g,{severity:"error",sx:{marginTop:2},children:h.reason})]}):x?e.jsx(g,{severity:"error",children:x.reason}):e.jsx(V,{})});try{j.displayName="SetBasicAccessRequirementFields",j.__docgenInfo={description:"",displayName:"SetBasicAccessRequirementFields",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"() => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"() => void"}},allowDeleteTextInstructions:{defaultValue:null,description:"",name:"allowDeleteTextInstructions",required:!1,type:{name:"boolean"}}}}}catch{}export{E as A,j as S,q as a};
