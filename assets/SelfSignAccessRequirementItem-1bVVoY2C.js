import{an as C,dp as O,r as k,j as e,X as U,_ as b,V as _,c4 as E,v as w}from"./iframe-BPjtn3Py.js";import{f as V,e as L,p as M}from"./useAccessRequirements-BcvsiSa4.js";import{d as B,e as D}from"./useUserBundle-w7U_abFB.js";import{M as I}from"./MarkdownSynapse-C8_fbXMJ.js";import{R as G,a as f}from"./RequirementItem-jw8AWu0Z.js";function v(A){const{accessRequirement:s,onHide:g}=A,{isAuthenticated:c}=C(),o=O(s),{data:r}=B(),{data:i}=D(),d=c&&i&&!o&&s.isCertifiedUserRequired&&!i.isCertified,m=c&&i&&!o&&s.isValidatedProfileRequired&&!i.isVerified,{data:l,isLoading:x}=V(String(s.id)),u=l==null?void 0:l.isApproved,{data:t}=L(s.id.toString()),[p,h]=k.useState(!1),{mutate:y,isPending:T,error:R}=M({onError:n=>{console.error("Error creating access approval: ",n)}}),j=()=>{const n={requirementId:s==null?void 0:s.id,submitterId:r==null?void 0:r.ownerId,accessorId:r==null?void 0:r.ownerId,state:w.APPROVED};y(n)};let a=e.jsx(e.Fragment,{});o&&s.termsOfUse?a=e.jsx(I,{markdown:s.termsOfUse}):t&&(a=e.jsx(I,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType}));let q;if(c&&!u){let n="I Accept Terms of Use",S=!1;(d||m)&&(S=!0,n=`You must ${d?"be certified":""}${d&&m?" and ":""}${m?"have a validated user profile":""} to accept`),q=[{variant:"outlined",onClick:j,children:n,disabled:T||S},{variant:"text",onClick:g,children:"I do not accept"}]}return e.jsxs(G,{"data-testid":"SelfSignAccessRequirementItem",status:x?f.LOADING:u?f.COMPLETE:f.LOCKED,actions:q,children:[u?e.jsxs(e.Fragment,{children:[e.jsxs(U,{variant:"body1",children:["You have accepted the terms of use."," ",e.jsx(b,{role:"button",onClick:()=>h(!p),children:p?"Hide Terms":"View Terms"})]}),p&&e.jsx(_,{sx:{my:1},children:a})]}):a,R&&e.jsx(E,{severity:"error",children:R.reason})]})}try{v.displayName="SelfSignAccessRequirementItem",v.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}export{v as S};
