import{el as od,e0 as V,r as q,dH as ad,dG as sd,j as X,b$ as rn,X as Pi,d0 as Cu,dj as Lo,al as io,hN as ud,_ as cd,cy as ld,c3 as dd,bV as fd,an as hd,hg as pd,aa as kn,J as gd,gM as md}from"./iframe-CJi55ERg.js";import{a as yd}from"./useGetEntityHeaders-DSVa7EYO.js";import{U as vd}from"./UserBadge-Dffj96fH.js";import{E as Do}from"./EntityIcon-B0kEQNBZ.js";import{p as wd,c as oo}from"./pluralize-DvqWrKl4.js";import{g as ku}from"./index-Chi_LkuB.js";import{A as xd,y as Ru,B as Iu,C as Oe,D as tt,E as bd,F as _d,G as Tu,H as qu,I as Ed,J as ao,K as Mu,L as Nd,M as Au,c as Pu,N as Sd,k as Cd,l as kd,O as Rd,P as Id,Q as Td,R as Lu,S as qd,T as Du,q as so,u as Md,i as Ad,a as Pd,h as Ld,U as uo,V as $u,W as Vu,X as Dd,Y as $d,Z as Vd,_ as zd,$ as Hd,a0 as zu,p as Od,s as Fd,a1 as Bd,a2 as Hu,a3 as Ou,a4 as Ud,a5 as Gd,a6 as Yd,a7 as Xd,x as Fu,a8 as jd,a9 as Wd,aa as Zd,ab as Kd,m as Qd,j as Jd,n as ef,z as tf}from"./forEach-CWOCpBhE.js";import{H as nf}from"./HelpPopover-DfyusZY4.js";import{r as rf}from"./index-CKB9tgNi.js";import{d as of}from"./differenceWith-mUfSq8p5.js";const af="org.sagebionetworks.repo.model.provenance.UsedEntity";function pe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=pe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Rn={exports:{}},In={};var $o;function sf(){if($o)return In;$o=1;var e=od(),t=rf();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,a=e.useEffect,s=e.useMemo,c=e.useDebugValue;return In.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var x=o(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=s(function(){function p(E){if(!w){if(w=!0,b=E,E=f(E),h!==void 0&&y.hasValue){var k=y.value;if(h(k,E))return v=k}return v=E}if(k=v,r(b,E))return k;var A=f(E);return h!==void 0&&h(k,A)?(b=E,k):(b=E,v=A)}var w=!1,b,v,_=d===void 0?null:d;return[function(){return p(u())},_===null?void 0:function(){return p(_())}]},[u,d,f,h]);var g=i(l,x[0],x[1]);return a(function(){y.hasValue=!0,y.value=g},[g]),c(g),g},In}var Vo;function uf(){return Vo||(Vo=1,Rn.exports=sf()),Rn.exports}var cf=uf();const lf=ku(cf),df={},zo=e=>{let t;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(x=>x(t,h))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(df?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,i,c);return c},ff=e=>e?zo(e):zo,{useDebugValue:hf}=V,{useSyncExternalStoreWithSelector:pf}=lf,gf=e=>e;function Bu(e,t=gf,n){const r=pf(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return hf(r),r}const Ho=(e,t)=>{const n=ff(e),r=(i,o=t)=>Bu(n,i,o);return Object.assign(r,n),r},mf=(e,t)=>e?Ho(e,t):Ho;function le(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var yf={value:()=>{}};function mn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Jt(n)}function Jt(e){this._=e}function vf(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Jt.prototype=mn.prototype={constructor:Jt,on:function(e,t){var n=this._,r=vf(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=wf(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=Oo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Oo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function wf(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Oo(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=yf,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Li="http://www.w3.org/1999/xhtml";const Fo={svg:"http://www.w3.org/2000/svg",xhtml:Li,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fo.hasOwnProperty(t)?{space:Fo[t],local:e}:e}function xf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Li&&t.documentElement.namespaceURI===Li?t.createElement(e):t.createElementNS(n,e)}}function bf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uu(e){var t=yn(e);return(t.local?bf:xf)(t)}function _f(){}function co(e){return e==null?_f:function(){return this.querySelector(e)}}function Ef(e){typeof e!="function"&&(e=co(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new ye(r,this._parents)}function Nf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sf(){return[]}function Gu(e){return e==null?Sf:function(){return this.querySelectorAll(e)}}function Cf(e){return function(){return Nf(e.apply(this,arguments))}}function kf(e){typeof e=="function"?e=Cf(e):e=Gu(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(e.call(c,c.__data__,l,a)),i.push(c));return new ye(r,i)}function Yu(e){return function(){return this.matches(e)}}function Xu(e){return function(t){return t.matches(e)}}var Rf=Array.prototype.find;function If(e){return function(){return Rf.call(this.children,e)}}function Tf(){return this.firstElementChild}function qf(e){return this.select(e==null?Tf:If(typeof e=="function"?e:Xu(e)))}var Mf=Array.prototype.filter;function Af(){return Array.from(this.children)}function Pf(e){return function(){return Mf.call(this.children,e)}}function Lf(e){return this.selectAll(e==null?Af:Pf(typeof e=="function"?e:Xu(e)))}function Df(e){typeof e!="function"&&(e=Yu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&s.push(c);return new ye(r,this._parents)}function ju(e){return new Array(e.length)}function $f(){return new ye(this._enter||this._groups.map(ju),this._parents)}function on(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}on.prototype={constructor:on,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Vf(e){return function(){return e}}function zf(e,t,n,r,i,o){for(var a=0,s,c=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new on(e,o[a]);for(;a<c;++a)(s=t[a])&&(i[a]=s)}function Hf(e,t,n,r,i,o,a){var s,c,l=new Map,u=t.length,d=o.length,f=new Array(u),h;for(s=0;s<u;++s)(c=t[s])&&(f[s]=h=a.call(c,c.__data__,s,t)+"",l.has(h)?i[s]=c:l.set(h,c));for(s=0;s<d;++s)h=a.call(e,o[s],s,o)+"",(c=l.get(h))?(r[s]=c,c.__data__=o[s],l.delete(h)):n[s]=new on(e,o[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function Of(e){return e.__data__}function Ff(e,t){if(!arguments.length)return Array.from(this,Of);var n=t?Hf:zf,r=this._parents,i=this._groups;typeof e!="function"&&(e=Vf(e));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],d=i[l],f=d.length,h=Bf(e.call(u,u&&u.__data__,l,r)),x=h.length,y=s[l]=new Array(x),g=a[l]=new Array(x),p=c[l]=new Array(f);n(u,d,y,g,p,h,t);for(var w=0,b=0,v,_;w<x;++w)if(v=y[w]){for(w>=b&&(b=w+1);!(_=g[b])&&++b<x;);v._next=_||null}}return a=new ye(a,r),a._enter=s,a._exit=c,a}function Bf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Uf(){return new ye(this._exit||this._groups.map(ju),this._parents)}function Gf(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Yf(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),h,x=0;x<d;++x)(h=l[x]||u[x])&&(f[x]=h);for(;c<i;++c)s[c]=n[c];return new ye(s,this._parents)}function Xf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function jf(e){e||(e=Wf);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new ye(i,this._parents).order()}function Wf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Zf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kf(){return Array.from(this)}function Qf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Jf(){let e=0;for(const t of this)++e;return e}function eh(){return!this.node()}function th(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function nh(e){return function(){this.removeAttribute(e)}}function rh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ih(e,t){return function(){this.setAttribute(e,t)}}function oh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ah(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function uh(e,t){var n=yn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rh:nh:typeof t=="function"?n.local?sh:ah:n.local?oh:ih)(n,t))}function Wu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ch(e){return function(){this.style.removeProperty(e)}}function lh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fh(e,t,n){return arguments.length>1?this.each((t==null?ch:typeof t=="function"?dh:lh)(e,t,n??"")):vt(this.node(),e)}function vt(e,t){return e.style.getPropertyValue(t)||Wu(e).getComputedStyle(e,null).getPropertyValue(t)}function hh(e){return function(){delete this[e]}}function ph(e,t){return function(){this[e]=t}}function gh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mh(e,t){return arguments.length>1?this.each((t==null?hh:typeof t=="function"?gh:ph)(e,t)):this.node()[e]}function Zu(e){return e.trim().split(/^|\s+/)}function lo(e){return e.classList||new Ku(e)}function Ku(e){this._node=e,this._names=Zu(e.getAttribute("class")||"")}Ku.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qu(e,t){for(var n=lo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ju(e,t){for(var n=lo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function yh(e){return function(){Qu(this,e)}}function vh(e){return function(){Ju(this,e)}}function wh(e,t){return function(){(t.apply(this,arguments)?Qu:Ju)(this,e)}}function xh(e,t){var n=Zu(e+"");if(arguments.length<2){for(var r=lo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?wh:t?yh:vh)(n,t))}function bh(){this.textContent=""}function _h(e){return function(){this.textContent=e}}function Eh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Nh(e){return arguments.length?this.each(e==null?bh:(typeof e=="function"?Eh:_h)(e)):this.node().textContent}function Sh(){this.innerHTML=""}function Ch(e){return function(){this.innerHTML=e}}function kh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rh(e){return arguments.length?this.each(e==null?Sh:(typeof e=="function"?kh:Ch)(e)):this.node().innerHTML}function Ih(){this.nextSibling&&this.parentNode.appendChild(this)}function Th(){return this.each(Ih)}function qh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mh(){return this.each(qh)}function Ah(e){var t=typeof e=="function"?e:Uu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ph(){return null}function Lh(e,t){var n=typeof e=="function"?e:Uu(e),r=t==null?Ph:typeof t=="function"?t:co(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dh(){var e=this.parentNode;e&&e.removeChild(this)}function $h(){return this.each(Dh)}function Vh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hh(e){return this.select(e?zh:Vh)}function Oh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Fh(e){return function(t){e.call(this,t,this.__data__)}}function Bh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Uh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Gh(e,t,n){return function(){var r=this.__on,i,o=Fh(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Yh(e,t,n){var r=Bh(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?Gh:Uh,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function ec(e,t,n){var r=Wu(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Xh(e,t){return function(){return ec(this,e,t)}}function jh(e,t){return function(){return ec(this,e,t.apply(this,arguments))}}function Wh(e,t){return this.each((typeof t=="function"?jh:Xh)(e,t))}function*Zh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var tc=[null];function ye(e,t){this._groups=e,this._parents=t}function Ht(){return new ye([[document.documentElement]],tc)}function Kh(){return this}ye.prototype=Ht.prototype={constructor:ye,select:Ef,selectAll:kf,selectChild:qf,selectChildren:Lf,filter:Df,data:Ff,enter:$f,exit:Uf,join:Gf,merge:Yf,selection:Kh,order:Xf,sort:jf,call:Zf,nodes:Kf,node:Qf,size:Jf,empty:eh,each:th,attr:uh,style:fh,property:mh,classed:xh,text:Nh,html:Rh,raise:Th,lower:Mh,append:Ah,insert:Lh,remove:$h,clone:Hh,datum:Oh,on:Yh,dispatch:Wh,[Symbol.iterator]:Zh};function xe(e){return typeof e=="string"?new ye([[document.querySelector(e)]],[document.documentElement]):new ye([[e]],tc)}function Qh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=Qh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Jh={passive:!1},Mt={capture:!0,passive:!1};function Tn(e){e.stopImmediatePropagation()}function pt(e){e.preventDefault(),e.stopImmediatePropagation()}function nc(e){var t=e.document.documentElement,n=xe(e).on("dragstart.drag",pt,Mt);"onselectstart"in t?n.on("selectstart.drag",pt,Mt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function rc(e,t){var n=e.document.documentElement,r=xe(e).on("dragstart.drag",null);t&&(r.on("click.drag",pt,Mt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ut=e=>()=>e;function Di(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Di.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ep(e){return!e.ctrlKey&&!e.button}function tp(){return this.parentNode}function np(e,t){return t??{x:e.x,y:e.y}}function rp(){return navigator.maxTouchPoints||"ontouchstart"in this}function ip(){var e=ep,t=tp,n=np,r=rp,i={},o=mn("start","drag","end"),a=0,s,c,l,u,d=0;function f(v){v.on("mousedown.drag",h).filter(r).on("touchstart.drag",g).on("touchmove.drag",p,Jh).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,_){if(!(u||!e.call(this,v,_))){var E=b(this,t.call(this,v,_),v,_,"mouse");E&&(xe(v.view).on("mousemove.drag",x,Mt).on("mouseup.drag",y,Mt),nc(v.view),Tn(v),l=!1,s=v.clientX,c=v.clientY,E("start",v))}}function x(v){if(pt(v),!l){var _=v.clientX-s,E=v.clientY-c;l=_*_+E*E>d}i.mouse("drag",v)}function y(v){xe(v.view).on("mousemove.drag mouseup.drag",null),rc(v.view,l),pt(v),i.mouse("end",v)}function g(v,_){if(e.call(this,v,_)){var E=v.changedTouches,k=t.call(this,v,_),A=E.length,R,T;for(R=0;R<A;++R)(T=b(this,k,v,_,E[R].identifier,E[R]))&&(Tn(v),T("start",v,E[R]))}}function p(v){var _=v.changedTouches,E=_.length,k,A;for(k=0;k<E;++k)(A=i[_[k].identifier])&&(pt(v),A("drag",v,_[k]))}function w(v){var _=v.changedTouches,E=_.length,k,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<E;++k)(A=i[_[k].identifier])&&(Tn(v),A("end",v,_[k]))}function b(v,_,E,k,A,R){var T=o.copy(),L=Ce(R||E,_),z,M,m;if((m=n.call(v,new Di("beforestart",{sourceEvent:E,target:f,identifier:A,active:a,x:L[0],y:L[1],dx:0,dy:0,dispatch:T}),k))!=null)return z=m.x-L[0]||0,M=m.y-L[1]||0,function C(S,D,H){var I=L,O;switch(S){case"start":i[A]=C,O=a++;break;case"end":delete i[A],--a;case"drag":L=Ce(H||D,_),O=a;break}T.call(S,v,new Di(S,{sourceEvent:D,subject:m,target:f,identifier:A,active:O,x:L[0]+z,y:L[1]+M,dx:L[0]-I[0],dy:L[1]-I[1],dispatch:T}),k)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Ut(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Ut(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ut(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Ut(!!v),f):r},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,f):Math.sqrt(d)},f}function fo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ic(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ot(){}var At=.7,an=1/At,gt="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",op=/^#([0-9a-f]{3,8})$/,ap=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),sp=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),up=new RegExp(`^rgba\\(${gt},${gt},${gt},${Pt}\\)$`),cp=new RegExp(`^rgba\\(${ke},${ke},${ke},${Pt}\\)$`),lp=new RegExp(`^hsl\\(${Pt},${ke},${ke}\\)$`),dp=new RegExp(`^hsla\\(${Pt},${ke},${ke},${Pt}\\)$`),Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fo(Ot,Lt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uo,formatHex:Uo,formatHex8:fp,formatHsl:hp,formatRgb:Go,toString:Go});function Uo(){return this.rgb().formatHex()}function fp(){return this.rgb().formatHex8()}function hp(){return oc(this).formatHsl()}function Go(){return this.rgb().formatRgb()}function Lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=op.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yo(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ap.exec(e))?new fe(t[1],t[2],t[3],1):(t=sp.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=up.exec(e))?Gt(t[1],t[2],t[3],t[4]):(t=cp.exec(e))?Gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lp.exec(e))?Wo(t[1],t[2]/100,t[3]/100,1):(t=dp.exec(e))?Wo(t[1],t[2]/100,t[3]/100,t[4]):Bo.hasOwnProperty(e)?Yo(Bo[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function Yo(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function Gt(e,t,n,r){return r<=0&&(e=t=n=NaN),new fe(e,t,n,r)}function pp(e){return e instanceof Ot||(e=Lt(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function $i(e,t,n,r){return arguments.length===1?pp(e):new fe(e,t,n,r??1)}function fe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}fo(fe,$i,ic(Ot,{brighter(e){return e=e==null?an:Math.pow(an,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(Qe(this.r),Qe(this.g),Qe(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xo,formatHex:Xo,formatHex8:gp,formatRgb:jo,toString:jo}));function Xo(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}`}function gp(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}${Ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function jo(){const e=sn(this.opacity);return`${e===1?"rgb(":"rgba("}${Qe(this.r)}, ${Qe(this.g)}, ${Qe(this.b)}${e===1?")":`, ${e})`}`}function sn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ze(e){return e=Qe(e),(e<16?"0":"")+e.toString(16)}function Wo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new be(e,t,n,r)}function oc(e){if(e instanceof be)return new be(e.h,e.s,e.l,e.opacity);if(e instanceof Ot||(e=Lt(e)),!e)return new be;if(e instanceof be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new be(a,s,c,e.opacity)}function mp(e,t,n,r){return arguments.length===1?oc(e):new be(e,t,n,r??1)}function be(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}fo(be,mp,ic(Ot,{brighter(e){return e=e==null?an:Math.pow(an,e),new be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fe(qn(e>=240?e-240:e+120,i,r),qn(e,i,r),qn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new be(Zo(this.h),Yt(this.s),Yt(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sn(this.opacity);return`${e===1?"hsl(":"hsla("}${Zo(this.h)}, ${Yt(this.s)*100}%, ${Yt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zo(e){return e=(e||0)%360,e<0?e+360:e}function Yt(e){return Math.max(0,Math.min(1,e||0))}function qn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ac=e=>()=>e;function yp(e,t){return function(n){return e+n*t}}function vp(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wp(e){return(e=+e)==1?sc:function(t,n){return n-t?vp(t,n,e):ac(isNaN(t)?n:t)}}function sc(e,t){var n=t-e;return n?yp(e,n):ac(isNaN(e)?t:e)}const Ko=(function e(t){var n=wp(t);function r(i,o){var a=n((i=$i(i)).r,(o=$i(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=sc(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r})(1);function $e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Vi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mn=new RegExp(Vi.source,"g");function xp(e){return function(){return e}}function bp(e){return function(t){return e(t)+""}}function _p(e,t){var n=Vi.lastIndex=Mn.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=Vi.exec(e))&&(i=Mn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:$e(r,i)})),n=Mn.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?bp(c[0].x):xp(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}var Qo=180/Math.PI,zi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uc(e,t,n,r,i,o){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Qo,skewX:Math.atan(c)*Qo,scaleX:a,scaleY:s}}var Xt;function Ep(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zi:uc(t.a,t.b,t.c,t.d,t.e,t.f)}function Np(e){return e==null||(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",e),!(e=Xt.transform.baseVal.consolidate()))?zi:(e=e.matrix,uc(e.a,e.b,e.c,e.d,e.e,e.f))}function cc(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,d,f,h,x){if(l!==d||u!==f){var y=h.push("translate(",null,t,null,n);x.push({i:y-4,x:$e(l,d)},{i:y-2,x:$e(u,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:$e(l,u)})):u&&d.push(i(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:$e(l,u)}):u&&d.push(i(d)+"skewX("+u+r)}function c(l,u,d,f,h,x){if(l!==d||u!==f){var y=h.push(i(h)+"scale(",null,",",null,")");x.push({i:y-4,x:$e(l,d)},{i:y-2,x:$e(u,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,d,f),a(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(h){for(var x=-1,y=f.length,g;++x<y;)d[(g=f[x]).i]=g.x(h);return d.join("")}}}var Sp=cc(Ep,"px, ","px)","deg)"),Cp=cc(Np,", ",")",")"),kp=1e-12;function Jo(e){return((e=Math.exp(e))+1/e)/2}function Rp(e){return((e=Math.exp(e))-1/e)/2}function Ip(e){return((e=Math.exp(2*e))-1)/(e+1)}const Tp=(function e(t,n,r){function i(o,a){var s=o[0],c=o[1],l=o[2],u=a[0],d=a[1],f=a[2],h=u-s,x=d-c,y=h*h+x*x,g,p;if(y<kp)p=Math.log(f/l)/t,g=function(k){return[s+k*h,c+k*x,l*Math.exp(t*k*p)]};else{var w=Math.sqrt(y),b=(f*f-l*l+r*y)/(2*l*n*w),v=(f*f-l*l-r*y)/(2*f*n*w),_=Math.log(Math.sqrt(b*b+1)-b),E=Math.log(Math.sqrt(v*v+1)-v);p=(E-_)/t,g=function(k){var A=k*p,R=Jo(_),T=l/(n*w)*(R*Ip(t*A+_)-Rp(_));return[s+T*h,c+T*x,l*R/Jo(t*A+_)]}}return g.duration=p*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return e(a,s,c)},i})(Math.SQRT2,2,4);var wt=0,It=0,Nt=0,lc=1e3,un,Tt,cn=0,Je=0,vn=0,Dt=typeof performance=="object"&&performance.now?performance:Date,dc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ho(){return Je||(dc(qp),Je=Dt.now()+vn)}function qp(){Je=0}function ln(){this._call=this._time=this._next=null}ln.prototype=fc.prototype={constructor:ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ho():+n)+(t==null?0:+t),!this._next&&Tt!==this&&(Tt?Tt._next=this:un=this,Tt=this),this._call=e,this._time=n,Hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hi())}};function fc(e,t,n){var r=new ln;return r.restart(e,t,n),r}function Mp(){ho(),++wt;for(var e=un,t;e;)(t=Je-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wt}function ea(){Je=(cn=Dt.now())+vn,wt=It=0;try{Mp()}finally{wt=0,Pp(),Je=0}}function Ap(){var e=Dt.now(),t=e-cn;t>lc&&(vn-=t,cn=e)}function Pp(){for(var e,t=un,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:un=n);Tt=e,Hi(r)}function Hi(e){if(!wt){It&&(It=clearTimeout(It));var t=e-Je;t>24?(e<1/0&&(It=setTimeout(ea,e-Dt.now()-vn)),Nt&&(Nt=clearInterval(Nt))):(Nt||(cn=Dt.now(),Nt=setInterval(Ap,lc)),wt=1,dc(ea))}}function ta(e,t,n){var r=new ln;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Lp=mn("start","end","cancel","interrupt"),Dp=[],hc=0,na=1,Oi=2,en=3,ra=4,Fi=5,tn=6;function wn(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;$p(e,n,{name:t,index:r,group:i,on:Lp,tween:Dp,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:hc})}function po(e,t){var n=Ee(e,t);if(n.state>hc)throw new Error("too late; already scheduled");return n}function Re(e,t){var n=Ee(e,t);if(n.state>en)throw new Error("too late; already running");return n}function Ee(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $p(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=fc(o,0,n.time);function o(l){n.state=na,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,d,f,h;if(n.state!==na)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===en)return ta(a);h.state===ra?(h.state=tn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=tn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(ta(function(){n.state===en&&(n.state=ra,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Oi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Oi){for(n.state=en,i=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Fi,1),d=-1,f=i.length;++d<f;)i[d].call(e,u);n.state===Fi&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=tn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function nn(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Oi&&r.state<Fi,r.state=tn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Vp(e){return this.each(function(){nn(this,e)})}function zp(e,t){var n,r;return function(){var i=Re(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Hp(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Re(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function Op(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ee(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?zp:Hp)(n,e,t))}function go(e,t,n){var r=e._id;return e.each(function(){var i=Re(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ee(i,r).value[t]}}function pc(e,t){var n;return(typeof t=="number"?$e:t instanceof Lt?Ko:(n=Lt(t))?(t=n,Ko):_p)(e,t)}function Fp(e){return function(){this.removeAttribute(e)}}function Bp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Up(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Gp(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Yp(e,t,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s)))}}function Xp(e,t,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s)))}}function jp(e,t){var n=yn(e),r=n==="transform"?Cp:pc;return this.attrTween(e,typeof t=="function"?(n.local?Xp:Yp)(n,r,go(this,"attr."+e,t)):t==null?(n.local?Bp:Fp)(n):(n.local?Gp:Up)(n,r,t))}function Wp(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Zp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Zp(e,o)),n}return i._value=t,i}function Qp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Wp(e,o)),n}return i._value=t,i}function Jp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=yn(e);return this.tween(n,(r.local?Kp:Qp)(r,t))}function eg(e,t){return function(){po(this,e).delay=+t.apply(this,arguments)}}function tg(e,t){return t=+t,function(){po(this,e).delay=t}}function ng(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eg:tg)(t,e)):Ee(this.node(),t).delay}function rg(e,t){return function(){Re(this,e).duration=+t.apply(this,arguments)}}function ig(e,t){return t=+t,function(){Re(this,e).duration=t}}function og(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rg:ig)(t,e)):Ee(this.node(),t).duration}function ag(e,t){if(typeof t!="function")throw new Error;return function(){Re(this,e).ease=t}}function sg(e){var t=this._id;return arguments.length?this.each(ag(t,e)):Ee(this.node(),t).ease}function ug(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Re(this,e).ease=n}}function cg(e){if(typeof e!="function")throw new Error;return this.each(ug(this._id,e))}function lg(e){typeof e!="function"&&(e=Yu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&s.push(c);return new Ae(r,this._parents,this._name,this._id)}function dg(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=t[s],l=n[s],u=c.length,d=a[s]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(d[h]=f);for(;s<r;++s)a[s]=t[s];return new Ae(a,this._parents,this._name,this._id)}function fg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hg(e,t,n){var r,i,o=fg(t)?po:Re;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function pg(e,t){var n=this._id;return arguments.length<2?Ee(this.node(),n).on.on(e):this.each(hg(n,e,t))}function gg(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function mg(){return this.on("end.remove",gg(this._id))}function yg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=co(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,wn(l[f],t,n,f,l,Ee(u,n)));return new Ae(o,this._parents,t,n)}function vg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gu(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),h,x=Ee(u,n),y=0,g=f.length;y<g;++y)(h=f[y])&&wn(h,t,n,y,f,x);o.push(f),a.push(u)}return new Ae(o,a,t,n)}var wg=Ht.prototype.constructor;function xg(){return new wg(this._groups,this._parents)}function bg(e,t){var n,r,i;return function(){var o=vt(this,e),a=(this.style.removeProperty(e),vt(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function gc(e){return function(){this.style.removeProperty(e)}}function _g(e,t,n){var r,i=n+"",o;return function(){var a=vt(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function Eg(e,t,n){var r,i,o;return function(){var a=vt(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),vt(this,e))),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,s))}}function Ng(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var c=Re(this,e),l=c.on,u=c.value[o]==null?s||(s=gc(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function Sg(e,t,n){var r=(e+="")=="transform"?Sp:pc;return t==null?this.styleTween(e,bg(e,r)).on("end.style."+e,gc(e)):typeof t=="function"?this.styleTween(e,Eg(e,r,go(this,"style."+e,t))).each(Ng(this._id,e)):this.styleTween(e,_g(e,r,t),n).on("end.style."+e,null)}function Cg(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function kg(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Cg(e,a,n)),r}return o._value=t,o}function Rg(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kg(e,t,n??""))}function Ig(e){return function(){this.textContent=e}}function Tg(e){return function(){var t=e(this);this.textContent=t??""}}function qg(e){return this.tween("text",typeof e=="function"?Tg(go(this,"text",e)):Ig(e==null?"":e+""))}function Mg(e){return function(t){this.textContent=e.call(this,t)}}function Ag(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Mg(i)),t}return r._value=e,r}function Pg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ag(e))}function Lg(){for(var e=this._name,t=this._id,n=mc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=Ee(c,t);wn(c,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ae(r,this._parents,e,n)}function Dg(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=Re(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),i===0&&o()})}var $g=0;function Ae(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function mc(){return++$g}var Te=Ht.prototype;Ae.prototype={constructor:Ae,select:yg,selectAll:vg,selectChild:Te.selectChild,selectChildren:Te.selectChildren,filter:lg,merge:dg,selection:xg,transition:Lg,call:Te.call,nodes:Te.nodes,node:Te.node,size:Te.size,empty:Te.empty,each:Te.each,on:pg,attr:jp,attrTween:Jp,style:Sg,styleTween:Rg,text:qg,textTween:Pg,remove:mg,tween:Op,delay:ng,duration:og,ease:sg,easeVarying:cg,end:Dg,[Symbol.iterator]:Te[Symbol.iterator]};function Vg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zg={time:null,delay:0,duration:250,ease:Vg};function Hg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Og(e){var t,n;e instanceof Ae?(t=e._id,e=e._name):(t=mc(),(n=zg).time=ho(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&wn(c,e,t,l,a,n||Hg(c,t));return new Ae(r,this._parents,e,t)}Ht.prototype.interrupt=Vp;Ht.prototype.transition=Og;const jt=e=>()=>e;function Fg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Me(e,t,n){this.k=e,this.x=t,this.y=n}Me.prototype={constructor:Me,scale:function(e){return e===1?this:new Me(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Me(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ze=new Me(1,0,0);Me.prototype;function An(e){e.stopImmediatePropagation()}function St(e){e.preventDefault(),e.stopImmediatePropagation()}function Bg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ug(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ia(){return this.__zoom||ze}function Gg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function jg(){var e=Bg,t=Ug,n=Xg,r=Gg,i=Yg,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Tp,l=mn("start","zoom","end"),u,d,f,h=500,x=150,y=0,g=10;function p(m){m.property("__zoom",ia).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",T).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(m,C,S,D){var H=m.selection?m.selection():m;H.property("__zoom",ia),m!==H?_(m,C,S,D):H.interrupt().each(function(){E(this,arguments).event(D).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},p.scaleBy=function(m,C,S,D){p.scaleTo(m,function(){var H=this.__zoom.k,I=typeof C=="function"?C.apply(this,arguments):C;return H*I},S,D)},p.scaleTo=function(m,C,S,D){p.transform(m,function(){var H=t.apply(this,arguments),I=this.__zoom,O=S==null?v(H):typeof S=="function"?S.apply(this,arguments):S,F=I.invert(O),U=typeof C=="function"?C.apply(this,arguments):C;return n(b(w(I,U),O,F),H,a)},S,D)},p.translateBy=function(m,C,S,D){p.transform(m,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),a)},null,D)},p.translateTo=function(m,C,S,D,H){p.transform(m,function(){var I=t.apply(this,arguments),O=this.__zoom,F=D==null?v(I):typeof D=="function"?D.apply(this,arguments):D;return n(ze.translate(F[0],F[1]).scale(O.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof S=="function"?-S.apply(this,arguments):-S),I,a)},D,H)};function w(m,C){return C=Math.max(o[0],Math.min(o[1],C)),C===m.k?m:new Me(C,m.x,m.y)}function b(m,C,S){var D=C[0]-S[0]*m.k,H=C[1]-S[1]*m.k;return D===m.x&&H===m.y?m:new Me(m.k,D,H)}function v(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function _(m,C,S,D){m.on("start.zoom",function(){E(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(D).end()}).tween("zoom",function(){var H=this,I=arguments,O=E(H,I).event(D),F=t.apply(H,I),U=S==null?v(F):typeof S=="function"?S.apply(H,I):S,G=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),N=H.__zoom,P=typeof C=="function"?C.apply(H,I):C,$=c(N.invert(U).concat(G/N.k),P.invert(U).concat(G/P.k));return function(B){if(B===1)B=P;else{var Y=$(B),Z=G/Y[2];B=new Me(Z,U[0]-Y[0]*Z,U[1]-Y[1]*Z)}O.zoom(null,B)}})}function E(m,C,S){return!S&&m.__zooming||new k(m,C)}function k(m,C){this.that=m,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,C),this.taps=0}k.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,C){return this.mouse&&m!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var C=xe(this.that).datum();l.call(m,this.that,new Fg(m,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:l}),C)}};function A(m,...C){if(!e.apply(this,arguments))return;var S=E(this,C).event(m),D=this.__zoom,H=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,r.apply(this,arguments)))),I=Ce(m);if(S.wheel)(S.mouse[0][0]!==I[0]||S.mouse[0][1]!==I[1])&&(S.mouse[1]=D.invert(S.mouse[0]=I)),clearTimeout(S.wheel);else{if(D.k===H)return;S.mouse=[I,D.invert(I)],nn(this),S.start()}St(m),S.wheel=setTimeout(O,x),S.zoom("mouse",n(b(w(D,H),S.mouse[0],S.mouse[1]),S.extent,a));function O(){S.wheel=null,S.end()}}function R(m,...C){if(f||!e.apply(this,arguments))return;var S=m.currentTarget,D=E(this,C,!0).event(m),H=xe(m.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",G,!0),I=Ce(m,S),O=m.clientX,F=m.clientY;nc(m.view),An(m),D.mouse=[I,this.__zoom.invert(I)],nn(this),D.start();function U(N){if(St(N),!D.moved){var P=N.clientX-O,$=N.clientY-F;D.moved=P*P+$*$>y}D.event(N).zoom("mouse",n(b(D.that.__zoom,D.mouse[0]=Ce(N,S),D.mouse[1]),D.extent,a))}function G(N){H.on("mousemove.zoom mouseup.zoom",null),rc(N.view,D.moved),St(N),D.event(N).end()}}function T(m,...C){if(e.apply(this,arguments)){var S=this.__zoom,D=Ce(m.changedTouches?m.changedTouches[0]:m,this),H=S.invert(D),I=S.k*(m.shiftKey?.5:2),O=n(b(w(S,I),D,H),t.apply(this,C),a);St(m),s>0?xe(this).transition().duration(s).call(_,O,D,m):xe(this).call(p.transform,O,D,m)}}function L(m,...C){if(e.apply(this,arguments)){var S=m.touches,D=S.length,H=E(this,C,m.changedTouches.length===D).event(m),I,O,F,U;for(An(m),O=0;O<D;++O)F=S[O],U=Ce(F,this),U=[U,this.__zoom.invert(U),F.identifier],H.touch0?!H.touch1&&H.touch0[2]!==U[2]&&(H.touch1=U,H.taps=0):(H.touch0=U,I=!0,H.taps=1+!!u);u&&(u=clearTimeout(u)),I&&(H.taps<2&&(d=U[0],u=setTimeout(function(){u=null},h)),nn(this),H.start())}}function z(m,...C){if(this.__zooming){var S=E(this,C).event(m),D=m.changedTouches,H=D.length,I,O,F,U;for(St(m),I=0;I<H;++I)O=D[I],F=Ce(O,this),S.touch0&&S.touch0[2]===O.identifier?S.touch0[0]=F:S.touch1&&S.touch1[2]===O.identifier&&(S.touch1[0]=F);if(O=S.that.__zoom,S.touch1){var G=S.touch0[0],N=S.touch0[1],P=S.touch1[0],$=S.touch1[1],B=(B=P[0]-G[0])*B+(B=P[1]-G[1])*B,Y=(Y=$[0]-N[0])*Y+(Y=$[1]-N[1])*Y;O=w(O,Math.sqrt(B/Y)),F=[(G[0]+P[0])/2,(G[1]+P[1])/2],U=[(N[0]+$[0])/2,(N[1]+$[1])/2]}else if(S.touch0)F=S.touch0[0],U=S.touch0[1];else return;S.zoom("touch",n(b(O,F,U),S.extent,a))}}function M(m,...C){if(this.__zooming){var S=E(this,C).event(m),D=m.changedTouches,H=D.length,I,O;for(An(m),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),I=0;I<H;++I)O=D[I],S.touch0&&S.touch0[2]===O.identifier?delete S.touch0:S.touch1&&S.touch1[2]===O.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(O=Ce(O,this),Math.hypot(d[0]-O[0],d[1]-O[1])<g)){var F=xe(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return p.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:jt(+m),p):r},p.filter=function(m){return arguments.length?(e=typeof m=="function"?m:jt(!!m),p):e},p.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:jt(!!m),p):i},p.extent=function(m){return arguments.length?(t=typeof m=="function"?m:jt([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),p):t},p.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],p):[o[0],o[1]]},p.translateExtent=function(m){return arguments.length?(a[0][0]=+m[0][0],a[1][0]=+m[1][0],a[0][1]=+m[0][1],a[1][1]=+m[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(m){return arguments.length?(n=m,p):n},p.duration=function(m){return arguments.length?(s=+m,p):s},p.interpolate=function(m){return arguments.length?(c=m,p):c},p.on=function(){var m=l.on.apply(l,arguments);return m===l?p:m},p.clickDistance=function(m){return arguments.length?(y=(m=+m)*m,p):Math.sqrt(y)},p.tapDistance=function(m){return arguments.length?(g=+m,p):g},p}const xn=q.createContext(null),Wg=xn.Provider,Pe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},yc=Pe.error001();function ae(e,t){const n=q.useContext(xn);if(n===null)throw new Error(yc);return Bu(n,e,t)}const se=()=>{const e=q.useContext(xn);if(e===null)throw new Error(yc);return q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Zg=e=>e.userSelectionActive?"none":"all";function vc({position:e,children:t,className:n,style:r,...i}){const o=ae(Zg),a=`${e}`.split("-");return V.createElement("div",{className:pe(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...i},t)}function Kg({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:V.createElement(vc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Qg=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u})=>{const d=q.useRef(null),[f,h]=q.useState({x:0,y:0,width:0,height:0}),x=pe(["react-flow__edge-textwrapper",l]);return q.useEffect(()=>{if(d.current){const y=d.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:V.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:x,visibility:f.width?"visible":"hidden",...u},i&&V.createElement("rect",{width:f.width+2*a[0],x:-a[0],y:-a[1],height:f.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),V.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),c)};var Jg=q.memo(Qg);const mo=e=>({width:e.offsetWidth,height:e.offsetHeight}),xt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),yo=(e={x:0,y:0},t)=>({x:xt(e.x,t[0][0],t[1][0]),y:xt(e.y,t[0][1],t[1][1])}),oa=(e,t,n)=>e<t?xt(Math.abs(e-t),1,50)/50:e>n?-xt(Math.abs(e-n),1,50)/50:0,wc=(e,t)=>{const n=oa(e.x,35,t.width-35)*20,r=oa(e.y,35,t.height-35)*20;return[n,r]},xc=e=>e.getRootNode?.()||window?.document,em=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),vo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),tm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),aa=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Bi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},nm=e=>ve(e.width)&&ve(e.height)&&ve(e.x)&&ve(e.y),ve=e=>!isNaN(e)&&isFinite(e),oe=Symbol.for("internals"),bc=["Enter"," ","Escape"],rm=(e,t)=>{},im=e=>"nativeEvent"in e;function Ui(e){const n=(im(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const _c=e=>"clientX"in e,He=(e,t)=>{const n=_c(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},dn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Ft=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:h=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&V.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&ve(n)&&ve(r)?V.createElement(Jg,{x:n,y:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null);Ft.displayName="BaseEdge";function Ct(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function Ec({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function Nc({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const c=e*.125+i*.375+a*.375+n*.125,l=t*.125+o*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}var et;(function(e){e.Strict="strict",e.Loose="loose"})(et||(et={}));var Ke;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ke||(Ke={}));var $t;(function(e){e.Partial="partial",e.Full="full"})($t||($t={}));var qe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qe||(qe={}));var Vt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Vt||(Vt={}));var j;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(j||(j={}));function sa({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===j.Left||e===j.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Sc({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:r,targetY:i,targetPosition:o=j.Top}){const[a,s]=sa({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=sa({pos:o,x1:r,y1:i,x2:e,y2:t}),[u,d,f,h]=Nc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${a},${s} ${c},${l} ${r},${i}`,u,d,f,h]}const wo=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=j.Bottom,targetPosition:o=j.Top,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:y})=>{const[g,p,w]=Sc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return V.createElement(Ft,{path:g,labelX:p,labelY:w,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:y})});wo.displayName="SimpleBezierEdge";const ua={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},om=({source:e,sourcePosition:t=j.Bottom,target:n})=>t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ca=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function am({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:r=j.Top,center:i,offset:o}){const a=ua[t],s=ua[r],c={x:e.x+a.x*o,y:e.y+a.y*o},l={x:n.x+s.x*o,y:n.y+s.y*o},u=om({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let h=[],x,y;const g={x:0,y:0},p={x:0,y:0},[w,b,v,_]=Ec({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){x=i.x??w,y=i.y??b;const k=[{x,y:c.y},{x,y:l.y}],A=[{x:c.x,y},{x:l.x,y}];a[d]===f?h=d==="x"?k:A:h=d==="x"?A:k}else{const k=[{x:c.x,y:l.y}],A=[{x:l.x,y:c.y}];if(d==="x"?h=a.x===f?A:k:h=a.y===f?k:A,t===r){const M=Math.abs(e[d]-n[d]);if(M<=o){const m=Math.min(o-1,o-M);a[d]===f?g[d]=(c[d]>e[d]?-1:1)*m:p[d]=(l[d]>n[d]?-1:1)*m}}if(t!==r){const M=d==="x"?"y":"x",m=a[d]===s[M],C=c[M]>l[M],S=c[M]<l[M];(a[d]===1&&(!m&&C||m&&S)||a[d]!==1&&(!m&&S||m&&C))&&(h=d==="x"?k:A)}const R={x:c.x+g.x,y:c.y+g.y},T={x:l.x+p.x,y:l.y+p.y},L=Math.max(Math.abs(R.x-h[0].x),Math.abs(T.x-h[0].x)),z=Math.max(Math.abs(R.y-h[0].y),Math.abs(T.y-h[0].y));L>=z?(x=(R.x+T.x)/2,y=h[0].y):(x=h[0].x,y=(R.y+T.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...h,{x:l.x+p.x,y:l.y+p.y},n],x,y,v,_]}function sm(e,t,n,r){const i=Math.min(ca(e,t)/2,ca(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+i*l},${a}Q ${o},${a} ${o},${a+i*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${a+i*c}Q ${o},${a} ${o+i*s},${a}`}function Gi({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:r,targetY:i,targetPosition:o=j.Top,borderRadius:a=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,h,x]=am({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:c},offset:l});return[u.reduce((g,p,w)=>{let b="";return w>0&&w<u.length-1?b=sm(u[w-1],p,u[w+1],a):b=`${w===0?"M":"L"}${p.x} ${p.y}`,g+=b,g},""),d,f,h,x]}const bn=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:d=j.Bottom,targetPosition:f=j.Top,markerEnd:h,markerStart:x,pathOptions:y,interactionWidth:g})=>{const[p,w,b]=Gi({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:y?.borderRadius,offset:y?.offset});return V.createElement(Ft,{path:p,labelX:w,labelY:b,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:x,interactionWidth:g})});bn.displayName="SmoothStepEdge";const xo=q.memo(e=>V.createElement(bn,{...e,pathOptions:q.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));xo.displayName="StepEdge";function um({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=Ec({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const bo=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[x,y,g]=um({sourceX:e,sourceY:t,targetX:n,targetY:r});return V.createElement(Ft,{path:x,labelX:y,labelY:g,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:h})});bo.displayName="StraightEdge";function Wt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function la({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case j.Left:return[t-Wt(t-r,o),n];case j.Right:return[t+Wt(r-t,o),n];case j.Top:return[t,n-Wt(n-i,o)];case j.Bottom:return[t,n+Wt(i-n,o)]}}function Cc({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:r,targetY:i,targetPosition:o=j.Top,curvature:a=.25}){const[s,c]=la({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,u]=la({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,f,h,x]=Nc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${i}`,d,f,h,x]}const fn=q.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=j.Bottom,targetPosition:o=j.Top,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,pathOptions:y,interactionWidth:g})=>{const[p,w,b]=Cc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:y?.curvature});return V.createElement(Ft,{path:p,labelX:w,labelY:b,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:g})});fn.displayName="BezierEdge";const _o=q.createContext(null),cm=_o.Provider;_o.Consumer;const lm=()=>q.useContext(_o),dm=e=>"id"in e&&"source"in e&&"target"in e,fm=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Yi=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,hm=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),pm=(e,t)=>{if(!e.source||!e.target)return t;let n;return dm(e)?n={...e}:n={...e,id:fm(e)},hm(n,t)?t:t.concat(n)},Xi=({x:e,y:t},[n,r,i],o,[a,s])=>{const c={x:(e-n)/i,y:(t-r)/i};return o?{x:a*Math.round(c.x/a),y:s*Math.round(c.y/s)}:c},kc=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),mt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Eo=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:a}=mt(i,t).positionAbsolute;return em(r,vo({x:o,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tm(n)},Rc=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1,s=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(u=>{const{width:d,height:f,selectable:h=!0,hidden:x=!1}=u;if(a&&!h||x)return!1;const{positionAbsolute:y}=mt(u,s),g={x:y.x,y:y.y,width:d||0,height:f||0},p=Bi(c,g),w=typeof d>"u"||typeof f>"u"||d===null||f===null,b=o&&p>0,v=(d||0)*(f||0);(w||b||p>=v||u.dragging)&&l.push(u)}),l},No=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Ic=(e,t,n,r,i,o=.1)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),c=Math.min(a,s),l=xt(c,r,i),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,h=n/2-d*l;return{x:f,y:h,zoom:l}},We=(e,t=0)=>e.transition().duration(t);function da(e,t,n,r){return(t[n]||[]).reduce((i,o)=>(`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),i),[])}function gm(e,t,n,r,i,o){const{x:a,y:s}=He(e),l=t.elementsFromPoint(a,s).find(x=>x.classList.contains("react-flow__handle"));if(l){const x=l.getAttribute("data-nodeid");if(x){const y=So(void 0,l),g=l.getAttribute("data-handleid"),p=o({nodeId:x,id:g,type:y});if(p){const w=i.find(b=>b.nodeId===x&&b.type===y&&b.id===g);return{handle:{id:g,type:y,nodeId:x,x:w?.x||n.x,y:w?.y||n.y},validHandleResult:p}}}}let u=[],d=1/0;if(i.forEach(x=>{const y=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(y<=r){const g=o(x);y<=d&&(y<d?u=[{handle:x,validHandleResult:g}]:y===d&&u.push({handle:x,validHandleResult:g}),d=y)}}),!u.length)return{handle:null,validHandleResult:Tc()};if(u.length===1)return u[0];const f=u.some(({validHandleResult:x})=>x.isValid),h=u.some(({handle:x})=>x.type==="target");return u.find(({handle:x,validHandleResult:y})=>h?x.type==="target":f?y.isValid:!0)||u[0]}const mm={source:null,target:null,sourceHandle:null,targetHandle:null},Tc=()=>({handleDomNode:null,isValid:!1,connection:mm,endHandle:null});function qc(e,t,n,r,i,o,a){const s=i==="target",c=a.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...Tc(),handleDomNode:c};if(c){const u=So(void 0,c),d=c.getAttribute("data-nodeid"),f=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),y={source:s?d:n,sourceHandle:s?f:r,target:s?n:d,targetHandle:s?r:f};l.connection=y,h&&x&&(t===et.Strict?s&&u==="source"||!s&&u==="target":d!==n||f!==r)&&(l.endHandle={nodeId:d,handleId:f,type:u},l.isValid=o(y))}return l}function ym({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[oe]){const{handleBounds:a}=o[oe];let s=[],c=[];a&&(s=da(o,a,"source",`${t}-${n}-${r}`),c=da(o,a,"target",`${t}-${n}-${r}`)),i.push(...s,...c)}return i},[])}function So(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Pn(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function vm(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Mc({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:a,isValidConnection:s,edgeUpdaterType:c,onReconnectEnd:l}){const u=xc(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:x,onConnectStart:y,panBy:g,getNodes:p,cancelConnection:w}=o();let b=0,v;const{x:_,y:E}=He(e),k=u?.elementFromPoint(_,E),A=So(c,k),R=f?.getBoundingClientRect();if(!R||!A)return;let T,L=He(e,R),z=!1,M=null,m=!1,C=null;const S=ym({nodes:p(),nodeId:n,handleId:t,handleType:A}),D=()=>{if(!h)return;const[O,F]=wc(L,R);g({x:O,y:F}),b=requestAnimationFrame(D)};a({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),y?.(e,{nodeId:n,handleId:t,handleType:A});function H(O){const{transform:F}=o();L=He(O,R);const{handle:U,validHandleResult:G}=gm(O,u,Xi(L,F,!1,[1,1]),x,S,N=>qc(N,d,n,t,i?"target":"source",s,u));if(v=U,z||(D(),z=!0),C=G.handleDomNode,M=G.connection,m=G.isValid,a({connectionPosition:v&&m?kc({x:v.x,y:v.y},F):L,connectionStatus:vm(!!v,m),connectionEndHandle:G.endHandle}),!v&&!m&&!C)return Pn(T);M.source!==M.target&&C&&(Pn(T),T=C,C.classList.add("connecting","react-flow__handle-connecting"),C.classList.toggle("valid",m),C.classList.toggle("react-flow__handle-valid",m))}function I(O){(v||C)&&M&&m&&r?.(M),o().onConnectEnd?.(O),c&&l?.(O),Pn(T),w(),cancelAnimationFrame(b),z=!1,m=!1,M=null,C=null,u.removeEventListener("mousemove",H),u.removeEventListener("mouseup",I),u.removeEventListener("touchmove",H),u.removeEventListener("touchend",I)}u.addEventListener("mousemove",H),u.addEventListener("mouseup",I),u.addEventListener("touchmove",H),u.addEventListener("touchend",I)}const fa=()=>!0,wm=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),xm=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:a}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||o?.nodeId===e&&o?.handleId===t&&o?.type===n,clickConnecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n}},Ac=q.forwardRef(({type:e="source",position:t=j.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:a,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},h)=>{const x=a||null,y=e==="target",g=se(),p=lm(),{connectOnClick:w,noPanClassName:b}=ae(wm,le),{connecting:v,clickConnecting:_}=ae(xm(p,x,e),le);p||g.getState().onError?.("010",Pe.error010());const E=R=>{const{defaultEdgeOptions:T,onConnect:L,hasDefaultEdges:z}=g.getState(),M={...T,...R};if(z){const{edges:m,setEdges:C}=g.getState();C(pm(M,m))}L?.(M),s?.(M)},k=R=>{if(!p)return;const T=_c(R);i&&(T&&R.button===0||!T)&&Mc({event:R,handleId:x,nodeId:p,onConnect:E,isTarget:y,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||fa}),T?u?.(R):d?.(R)},A=R=>{const{onClickConnectStart:T,onClickConnectEnd:L,connectionClickStartHandle:z,connectionMode:M,isValidConnection:m}=g.getState();if(!p||!z&&!i)return;if(!z){T?.(R,{nodeId:p,handleId:x,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:p,type:e,handleId:x}});return}const C=xc(R.target),S=n||m||fa,{connection:D,isValid:H}=qc({nodeId:p,id:x,type:e},M,z.nodeId,z.handleId||null,z.type,S,C);H&&E(D),L?.(R),g.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":x,"data-nodeid":p,"data-handlepos":t,"data-id":`${p}-${x}-${e}`,className:pe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,l,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:o,connecting:_,connectionindicator:r&&(i&&!v||o&&v)}]),onMouseDown:k,onTouchStart:k,onClick:w?A:void 0,ref:h,...f},c)});Ac.displayName="Handle";var hn=q.memo(Ac);const Pc=({data:e,isConnectable:t,targetPosition:n=j.Top,sourcePosition:r=j.Bottom})=>V.createElement(V.Fragment,null,V.createElement(hn,{type:"target",position:n,isConnectable:t}),e?.label,V.createElement(hn,{type:"source",position:r,isConnectable:t}));Pc.displayName="DefaultNode";var ji=q.memo(Pc);const Lc=({data:e,isConnectable:t,sourcePosition:n=j.Bottom})=>V.createElement(V.Fragment,null,e?.label,V.createElement(hn,{type:"source",position:n,isConnectable:t}));Lc.displayName="InputNode";var Dc=q.memo(Lc);const $c=({data:e,isConnectable:t,targetPosition:n=j.Top})=>V.createElement(V.Fragment,null,V.createElement(hn,{type:"target",position:n,isConnectable:t}),e?.label);$c.displayName="OutputNode";var Vc=q.memo($c);const Co=()=>null;Co.displayName="GroupNode";const bm=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Zt=e=>e.id;function _m(e,t){return le(e.selectedNodes.map(Zt),t.selectedNodes.map(Zt))&&le(e.selectedEdges.map(Zt),t.selectedEdges.map(Zt))}const zc=q.memo(({onSelectionChange:e})=>{const t=se(),{selectedNodes:n,selectedEdges:r}=ae(bm,_m);return q.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange.forEach(o=>o(i))},[n,r,e]),null});zc.displayName="SelectionListener";const Em=e=>!!e.onSelectionChange;function Nm({onSelectionChange:e}){const t=ae(Em);return e||t?V.createElement(zc,{onSelectionChange:e}):null}const Sm=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function ut(e,t){q.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Q(e,t,n){q.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Cm=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:a,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:x,minZoom:y,maxZoom:g,nodeExtent:p,onNodesChange:w,onEdgesChange:b,elementsSelectable:v,connectionMode:_,snapGrid:E,snapToGrid:k,translateExtent:A,connectOnClick:R,defaultEdgeOptions:T,fitView:L,fitViewOptions:z,onNodesDelete:M,onEdgesDelete:m,onNodeDrag:C,onNodeDragStart:S,onNodeDragStop:D,onSelectionDrag:H,onSelectionDragStart:I,onSelectionDragStop:O,noPanClassName:F,nodeOrigin:U,rfId:G,autoPanOnConnect:N,autoPanOnNodeDrag:P,onError:$,connectionRadius:B,isValidConnection:Y,nodeDragThreshold:Z})=>{const{setNodes:K,setEdges:ne,setDefaultNodesAndEdges:ce,setMinZoom:re,setMaxZoom:ee,setTranslateExtent:te,setNodeExtent:ge,reset:J}=ae(Sm,le),W=se();return q.useEffect(()=>{const me=r?.map(Fe=>({...Fe,...T}));return ce(n,me),()=>{J()}},[]),Q("defaultEdgeOptions",T,W.setState),Q("connectionMode",_,W.setState),Q("onConnect",i,W.setState),Q("onConnectStart",o,W.setState),Q("onConnectEnd",a,W.setState),Q("onClickConnectStart",s,W.setState),Q("onClickConnectEnd",c,W.setState),Q("nodesDraggable",l,W.setState),Q("nodesConnectable",u,W.setState),Q("nodesFocusable",d,W.setState),Q("edgesFocusable",f,W.setState),Q("edgesUpdatable",h,W.setState),Q("elementsSelectable",v,W.setState),Q("elevateNodesOnSelect",x,W.setState),Q("snapToGrid",k,W.setState),Q("snapGrid",E,W.setState),Q("onNodesChange",w,W.setState),Q("onEdgesChange",b,W.setState),Q("connectOnClick",R,W.setState),Q("fitViewOnInit",L,W.setState),Q("fitViewOnInitOptions",z,W.setState),Q("onNodesDelete",M,W.setState),Q("onEdgesDelete",m,W.setState),Q("onNodeDrag",C,W.setState),Q("onNodeDragStart",S,W.setState),Q("onNodeDragStop",D,W.setState),Q("onSelectionDrag",H,W.setState),Q("onSelectionDragStart",I,W.setState),Q("onSelectionDragStop",O,W.setState),Q("noPanClassName",F,W.setState),Q("nodeOrigin",U,W.setState),Q("rfId",G,W.setState),Q("autoPanOnConnect",N,W.setState),Q("autoPanOnNodeDrag",P,W.setState),Q("onError",$,W.setState),Q("connectionRadius",B,W.setState),Q("isValidConnection",Y,W.setState),Q("nodeDragThreshold",Z,W.setState),ut(e,K),ut(t,ne),ut(y,re),ut(g,ee),ut(A,te),ut(p,ge),null},ha={display:"none"},km={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Hc="react-flow__node-desc",Oc="react-flow__edge-desc",Rm="react-flow__aria-live",Im=e=>e.ariaLiveMessage;function Tm({rfId:e}){const t=ae(Im);return V.createElement("div",{id:`${Rm}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:km},t)}function qm({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${Hc}-${e}`,style:ha},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${Oc}-${e}`,style:ha},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&V.createElement(Tm,{rfId:e}))}var zt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=q.useState(!1),i=q.useRef(!1),o=q.useRef(new Set([])),[a,s]=q.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=l.reduce((d,f)=>d.concat(...f),[]);return[l,u]}return[[],[]]},[e]);return q.useEffect(()=>{const c=typeof document<"u"?document:null,l=t?.target||c;if(e!==null){const u=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Ui(h))return!1;const y=ga(h.code,s);o.current.add(h[y]),pa(a,o.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Ui(h))return!1;const y=ga(h.code,s);pa(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[y]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return l?.addEventListener("keydown",u),l?.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{l?.removeEventListener("keydown",u),l?.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function pa(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function ga(e,t){return t.includes(e)?"code":"key"}function Fc(e,t,n,r){const i=e.parentNode||e.parentId;if(!i)return n;const o=t.get(i),a=mt(o,r);return Fc(o,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(o[oe]?.z??0)>(n.z??0)?o[oe]?.z??0:n.z??0},r)}function Bc(e,t,n){e.forEach(r=>{const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n?.[r.id]){const{x:o,y:a,z:s}=Fc(r,e,{...r.position,z:r[oe]?.z??0},t);r.positionAbsolute={x:o,y:a},r[oe].z=s,n?.[r.id]&&(r[oe].isParent=!0)}})}function Ln(e,t,n,r){const i=new Map,o={},a=r?1e3:0;return e.forEach(s=>{const c=(ve(s.zIndex)?s.zIndex:0)+(s.selected?a:0),l=t.get(s.id),u={...s,positionAbsolute:{x:s.position.x,y:s.position.y}},d=s.parentNode||s.parentId;d&&(o[d]=!0);const f=l?.type&&l?.type!==s.type;Object.defineProperty(u,oe,{enumerable:!1,value:{handleBounds:f?void 0:l?.[oe]?.handleBounds,z:c}}),i.set(s.id,u)}),Bc(i,n,o),i}function Uc(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:a,d3Zoom:s,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!l&&u;if(s&&c&&(f||!t.initial)){const x=n().filter(g=>{const p=t.includeHiddenNodes?g.width&&g.height:!g.hidden;return t.nodes?.length?p&&t.nodes.some(w=>w.id===g.id):p}),y=x.every(g=>g.width&&g.height);if(x.length>0&&y){const g=Eo(x,d),{x:p,y:w,zoom:b}=Ic(g,r,i,t.minZoom??o,t.maxZoom??a,t.padding??.1),v=ze.translate(p,w).scale(b);return typeof t.duration=="number"&&t.duration>0?s.transform(We(c,t.duration),v):s.transform(c,v),!0}}return!1}function Mm(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[oe]:r[oe],selected:n.selected})}),new Map(t)}function Am(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Kt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:a,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:l}=n();e?.length&&(c&&r({nodeInternals:Mm(e,i)}),a?.(e)),t?.length&&(l&&r({edges:Am(t,o)}),s?.(t))}const ct=()=>{},Pm={zoomIn:ct,zoomOut:ct,zoomTo:ct,getZoom:()=>1,setViewport:ct,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ct,fitBounds:ct,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Lm=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Dm=()=>{const e=se(),{d3Zoom:t,d3Selection:n}=ae(Lm,le);return q.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(We(n,i?.duration),1.2),zoomOut:i=>t.scaleBy(We(n,i?.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(We(n,o?.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[a,s,c]=e.getState().transform,l=ze.translate(i.x??a,i.y??s).scale(i.zoom??c);t.transform(We(n,o?.duration),l)},getViewport:()=>{const[i,o,a]=e.getState().transform;return{x:i,y:o,zoom:a}},fitView:i=>Uc(e.getState,i),setCenter:(i,o,a)=>{const{width:s,height:c,maxZoom:l}=e.getState(),u=typeof a?.zoom<"u"?a.zoom:l,d=s/2-i*u,f=c/2-o*u,h=ze.translate(d,f).scale(u);t.transform(We(n,a?.duration),h)},fitBounds:(i,o)=>{const{width:a,height:s,minZoom:c,maxZoom:l}=e.getState(),{x:u,y:d,zoom:f}=Ic(i,a,s,c,l,o?.padding??.1),h=ze.translate(u,d).scale(f);t.transform(We(n,o?.duration),h)},project:i=>{const{transform:o,snapToGrid:a,snapGrid:s}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Xi(i,o,a,s)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:a,snapGrid:s,domNode:c}=e.getState();if(!c)return i;const{x:l,y:u}=c.getBoundingClientRect(),d={x:i.x-l,y:i.y-u};return Xi(d,o,a,s)},flowToScreenPosition:i=>{const{transform:o,domNode:a}=e.getState();if(!a)return i;const{x:s,y:c}=a.getBoundingClientRect(),l=kc(i,o);return{x:l.x+s,y:l.y+c}},viewportInitialized:!0}:Pm,[t,n])};function _n(){const e=Dm(),t=se(),n=q.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=q.useCallback(y=>t.getState().nodeInternals.get(y),[]),i=q.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(g=>({...g}))},[]),o=q.useCallback(y=>{const{edges:g=[]}=t.getState();return g.find(p=>p.id===y)},[]),a=q.useCallback(y=>{const{getNodes:g,setNodes:p,hasDefaultNodes:w,onNodesChange:b}=t.getState(),v=g(),_=typeof y=="function"?y(v):y;if(w)p(_);else if(b){const E=_.length===0?v.map(k=>({type:"remove",id:k.id})):_.map(k=>({item:k,type:"reset"}));b(E)}},[]),s=q.useCallback(y=>{const{edges:g=[],setEdges:p,hasDefaultEdges:w,onEdgesChange:b}=t.getState(),v=typeof y=="function"?y(g):y;if(w)p(v);else if(b){const _=v.length===0?g.map(E=>({type:"remove",id:E.id})):v.map(E=>({item:E,type:"reset"}));b(_)}},[]),c=q.useCallback(y=>{const g=Array.isArray(y)?y:[y],{getNodes:p,setNodes:w,hasDefaultNodes:b,onNodesChange:v}=t.getState();if(b){const E=[...p(),...g];w(E)}else if(v){const _=g.map(E=>({item:E,type:"add"}));v(_)}},[]),l=q.useCallback(y=>{const g=Array.isArray(y)?y:[y],{edges:p=[],setEdges:w,hasDefaultEdges:b,onEdgesChange:v}=t.getState();if(b)w([...p,...g]);else if(v){const _=g.map(E=>({item:E,type:"add"}));v(_)}},[]),u=q.useCallback(()=>{const{getNodes:y,edges:g=[],transform:p}=t.getState(),[w,b,v]=p;return{nodes:y().map(_=>({..._})),edges:g.map(_=>({..._})),viewport:{x:w,y:b,zoom:v}}},[]),d=q.useCallback(({nodes:y,edges:g})=>{const{nodeInternals:p,getNodes:w,edges:b,hasDefaultNodes:v,hasDefaultEdges:_,onNodesDelete:E,onEdgesDelete:k,onNodesChange:A,onEdgesChange:R}=t.getState(),T=(y||[]).map(C=>C.id),L=(g||[]).map(C=>C.id),z=w().reduce((C,S)=>{const D=S.parentNode||S.parentId,H=!T.includes(S.id)&&D&&C.find(O=>O.id===D);return(typeof S.deletable!="boolean"||S.deletable)&&(T.includes(S.id)||H)&&C.push(S),C},[]),M=b.filter(C=>typeof C.deletable=="boolean"?C.deletable:!0),m=M.filter(C=>L.includes(C.id));if(z||m){const C=No(z,M),S=[...m,...C],D=S.reduce((H,I)=>(H.includes(I.id)||H.push(I.id),H),[]);if((_||v)&&(_&&t.setState({edges:b.filter(H=>!D.includes(H.id))}),v&&(z.forEach(H=>{p.delete(H.id)}),t.setState({nodeInternals:new Map(p)}))),D.length>0&&(k?.(S),R&&R(D.map(H=>({id:H,type:"remove"})))),z.length>0&&(E?.(z),A)){const H=z.map(I=>({id:I.id,type:"remove"}));A(H)}}},[]),f=q.useCallback(y=>{const g=nm(y),p=g?null:t.getState().nodeInternals.get(y.id);return!g&&!p?[null,null,g]:[g?y:aa(p),p,g]},[]),h=q.useCallback((y,g=!0,p)=>{const[w,b,v]=f(y);return w?(p||t.getState().getNodes()).filter(_=>{if(!v&&(_.id===b.id||!_.positionAbsolute))return!1;const E=aa(_),k=Bi(E,w);return g&&k>0||k>=w.width*w.height}):[]},[]),x=q.useCallback((y,g,p=!0)=>{const[w]=f(y);if(!w)return!1;const b=Bi(w,g);return p&&b>0||b>=w.width*w.height},[]);return q.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:a,setEdges:s,addNodes:c,addEdges:l,toObject:u,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:x}),[e,n,r,i,o,a,s,c,l,u,d,h,x])}const $m={actInsideInputWithModifier:!1};var Vm=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=se(),{deleteElements:r}=_n(),i=zt(e,$m),o=zt(t);q.useEffect(()=>{if(i){const{edges:a,getNodes:s}=n.getState(),c=s().filter(u=>u.selected),l=a.filter(u=>u.selected);r({nodes:c,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),q.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function zm(e){const t=se();q.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const i=mo(e.current);(i.height===0||i.width===0)&&t.getState().onError?.("004",Pe.error004()),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const ko={position:"absolute",width:"100%",height:"100%",top:0,left:0},Hm=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Qt=e=>({x:e.x,y:e.y,zoom:e.k}),lt=(e,t)=>e.target.closest(`.${t}`),ma=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ya=e=>{const t=e.ctrlKey&&dn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Om=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Fm=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=Ke.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:x,maxZoom:y,zoomActivationKeyCode:g,preventScrolling:p=!0,children:w,noWheelClassName:b,noPanClassName:v})=>{const _=q.useRef(),E=se(),k=q.useRef(!1),A=q.useRef(!1),R=q.useRef(null),T=q.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:z,d3ZoomHandler:M,userSelectionActive:m}=ae(Om,le),C=zt(g),S=q.useRef(0),D=q.useRef(!1),H=q.useRef();return zm(R),q.useEffect(()=>{if(R.current){const I=R.current.getBoundingClientRect(),O=jg().scaleExtent([x,y]).translateExtent(h),F=xe(R.current).call(O),U=ze.translate(f.x,f.y).scale(xt(f.zoom,x,y)),G=[[0,0],[I.width,I.height]],N=O.constrain()(U,G,h);O.transform(F,N),O.wheelDelta(ya),E.setState({d3Zoom:O,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[N.x,N.y,N.k],domNode:R.current.closest(".react-flow")})}},[]),q.useEffect(()=>{z&&L&&(a&&!C&&!m?z.on("wheel.zoom",I=>{if(lt(I,b))return!1;I.preventDefault(),I.stopImmediatePropagation();const O=z.property("__zoom").k||1;if(I.ctrlKey&&o){const Y=Ce(I),Z=ya(I),K=O*Math.pow(2,Z);L.scaleTo(z,K,Y,I);return}const F=I.deltaMode===1?20:1;let U=c===Ke.Vertical?0:I.deltaX*F,G=c===Ke.Horizontal?0:I.deltaY*F;!dn()&&I.shiftKey&&c!==Ke.Vertical&&(U=I.deltaY*F,G=0),L.translateBy(z,-(U/O)*s,-(G/O)*s,{internal:!0});const N=Qt(z.property("__zoom")),{onViewportChangeStart:P,onViewportChange:$,onViewportChangeEnd:B}=E.getState();clearTimeout(H.current),D.current||(D.current=!0,t?.(I,N),P?.(N)),D.current&&(e?.(I,N),$?.(N),H.current=setTimeout(()=>{n?.(I,N),B?.(N),D.current=!1},150))},{passive:!1}):typeof M<"u"&&z.on("wheel.zoom",function(I,O){if(!p&&I.type==="wheel"&&!I.ctrlKey||lt(I,b))return null;I.preventDefault(),M.call(this,I,O)},{passive:!1}))},[m,a,c,z,L,M,C,o,p,b,t,e,n]),q.useEffect(()=>{L&&L.on("start",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;S.current=I.sourceEvent?.button;const{onViewportChangeStart:O}=E.getState(),F=Qt(I.transform);k.current=!0,T.current=F,I.sourceEvent?.type==="mousedown"&&E.setState({paneDragging:!0}),O?.(F),t?.(I.sourceEvent,F)})},[L,t]),q.useEffect(()=>{L&&(m&&!k.current?L.on("zoom",null):m||L.on("zoom",I=>{const{onViewportChange:O}=E.getState();if(E.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),A.current=!!(r&&ma(d,S.current??0)),(e||O)&&!I.sourceEvent?.internal){const F=Qt(I.transform);O?.(F),e?.(I.sourceEvent,F)}}))},[m,L,e,d,r]),q.useEffect(()=>{L&&L.on("end",I=>{if(!I.sourceEvent||I.sourceEvent.internal)return null;const{onViewportChangeEnd:O}=E.getState();if(k.current=!1,E.setState({paneDragging:!1}),r&&ma(d,S.current??0)&&!A.current&&r(I.sourceEvent),A.current=!1,(n||O)&&Hm(T.current,I.transform)){const F=Qt(I.transform);T.current=F,clearTimeout(_.current),_.current=setTimeout(()=>{O?.(F),n?.(I.sourceEvent,F)},a?150:0)}})},[L,a,d,n,r]),q.useEffect(()=>{L&&L.filter(I=>{const O=C||i,F=o&&I.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&I.button===1&&I.type==="mousedown"&&(lt(I,"react-flow__node")||lt(I,"react-flow__edge")))return!0;if(!d&&!O&&!a&&!l&&!o||m||!l&&I.type==="dblclick"||lt(I,b)&&I.type==="wheel"||lt(I,v)&&(I.type!=="wheel"||a&&I.type==="wheel"&&!C)||!o&&I.ctrlKey&&I.type==="wheel"||!O&&!a&&!F&&I.type==="wheel"||!d&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(d)&&!d.includes(I.button)&&I.type==="mousedown")return!1;const U=Array.isArray(d)&&d.includes(I.button)||!I.button||I.button<=1;return(!I.ctrlKey||I.type==="wheel")&&U})},[m,L,i,o,a,l,d,u,C]),V.createElement("div",{className:"react-flow__renderer",ref:R,style:ko},w)},Bm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Um(){const{userSelectionActive:e,userSelectionRect:t}=ae(Bm,le);return e&&t?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function va(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,o=t.position.y+t.height-r.height;if(i>0||o>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),o>0&&(r.style.height+=o),t.position.x<0){const a=Math.abs(t.position.x);r.position.x=r.position.x-a,r.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);r.position.y=r.position.y-a,r.style.height+=a,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Gc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(s=>s.id===i.id);if(o.length===0)return r.push(i),r;const a={...i};for(const s of o)if(s)switch(s.type){case"select":{a.selected=s.selected;break}case"position":{typeof s.position<"u"&&(a.position=s.position),typeof s.positionAbsolute<"u"&&(a.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&va(r,a);break}case"dimensions":{typeof s.dimensions<"u"&&(a.width=s.dimensions.width,a.height=s.dimensions.height),typeof s.updateStyle<"u"&&(a.style={...a.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(a.resizing=s.resizing),a.expandParent&&va(r,a);break}case"remove":return r}return r.push(a),r},n)}function Yc(e,t){return Gc(e,t)}function Gm(e,t){return Gc(e,t)}const Ve=(e,t)=>({id:e,type:"select",selected:t});function ht(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Ve(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Ve(r.id,!1))),n},[])}const Dn=(e,t)=>n=>{n.target===t.current&&e?.(n)},Ym=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Xc=q.memo(({isSelecting:e,selectionMode:t=$t.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:a,onPaneScroll:s,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:d})=>{const f=q.useRef(null),h=se(),x=q.useRef(0),y=q.useRef(0),g=q.useRef(),{userSelectionActive:p,elementsSelectable:w,dragging:b}=ae(Ym,le),v=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,y.current=0},_=M=>{o?.(M),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},E=M=>{if(Array.isArray(n)&&n?.includes(2)){M.preventDefault();return}a?.(M)},k=s?M=>s(M):void 0,A=M=>{const{resetSelectedElements:m,domNode:C}=h.getState();if(g.current=C?.getBoundingClientRect(),!w||!e||M.button!==0||M.target!==f.current||!g.current)return;const{x:S,y:D}=He(M,g.current);m(),h.setState({userSelectionRect:{width:0,height:0,startX:S,startY:D,x:S,y:D}}),r?.(M)},R=M=>{const{userSelectionRect:m,nodeInternals:C,edges:S,transform:D,onNodesChange:H,onEdgesChange:I,nodeOrigin:O,getNodes:F}=h.getState();if(!e||!g.current||!m)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=He(M,g.current),G=m.startX??0,N=m.startY??0,P={...m,x:U.x<G?U.x:G,y:U.y<N?U.y:N,width:Math.abs(U.x-G),height:Math.abs(U.y-N)},$=F(),B=Rc(C,P,D,t===$t.Partial,!0,O),Y=No(B,S).map(K=>K.id),Z=B.map(K=>K.id);if(x.current!==Z.length){x.current=Z.length;const K=ht($,Z);K.length&&H?.(K)}if(y.current!==Y.length){y.current=Y.length;const K=ht(S,Y);K.length&&I?.(K)}h.setState({userSelectionRect:P})},T=M=>{if(M.button!==0)return;const{userSelectionRect:m}=h.getState();!p&&m&&M.target===f.current&&_?.(M),h.setState({nodesSelectionActive:x.current>0}),v(),i?.(M)},L=M=>{p&&(h.setState({nodesSelectionActive:x.current>0}),i?.(M)),v()},z=w&&(e||p);return V.createElement("div",{className:pe(["react-flow__pane",{dragging:b,selection:e}]),onClick:z?void 0:Dn(_,f),onContextMenu:Dn(E,f),onWheel:Dn(k,f),onMouseEnter:z?void 0:c,onMouseDown:z?A:void 0,onMouseMove:z?R:l,onMouseUp:z?T:void 0,onMouseLeave:z?L:u,ref:f,style:ko},d,V.createElement(Um,null))});Xc.displayName="Pane";function jc(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:jc(r,t):!1}function wa(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Xm(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!jc(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>({id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(i.positionAbsolute?.x??0),y:n.y-(i.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}))}function jm(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Wc(e,t,n,r,i=[0,0],o){const a=jm(e,e.extent||r);let s=a;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const d=n.get(c),{x:f,y:h}=mt(d,i).positionAbsolute;s=d&&ve(f)&&ve(h)&&ve(d.width)&&ve(d.height)?[[f+e.width*i[0],h+e.height*i[1]],[f+d.width-e.width+e.width*i[0],h+d.height-e.height+e.height*i[1]]]:s}else o?.("005",Pe.error005()),s=a;else if(e.extent&&c&&e.extent!=="parent"){const d=n.get(c),{x:f,y:h}=mt(d,i).positionAbsolute;s=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}let l={x:0,y:0};if(c){const d=n.get(c);l=mt(d,i).positionAbsolute}const u=s&&s!=="parent"?yo(t,s):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function $n({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const xa=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),a=t.getBoundingClientRect(),s={x:a.width*r[0],y:a.height*r[1]};return o.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-a.left-s.x)/n,y:(l.top-a.top-s.y)/n,...mo(c)}})};function kt(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Wi({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:a,nodeInternals:s,onError:c}=t.getState(),l=s.get(e);if(!l){c?.("012",Pe.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&a)&&(o({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function Wm(){const e=se();return q.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,c={x:(a-r[0])/r[2],y:(s-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:o?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function Vn(e){return(t,n,r)=>e?.(t,r)}function Zc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:a}){const s=se(),[c,l]=q.useState(!1),u=q.useRef([]),d=q.useRef({x:null,y:null}),f=q.useRef(0),h=q.useRef(null),x=q.useRef({x:0,y:0}),y=q.useRef(null),g=q.useRef(!1),p=q.useRef(!1),w=q.useRef(!1),b=Wm();return q.useEffect(()=>{if(e?.current){const v=xe(e.current),_=({x:A,y:R})=>{const{nodeInternals:T,onNodeDrag:L,onSelectionDrag:z,updateNodePositions:M,nodeExtent:m,snapGrid:C,snapToGrid:S,nodeOrigin:D,onError:H}=s.getState();d.current={x:A,y:R};let I=!1,O={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&m){const U=Eo(u.current,D);O=vo(U)}if(u.current=u.current.map(U=>{const G={x:A-U.distance.x,y:R-U.distance.y};S&&(G.x=C[0]*Math.round(G.x/C[0]),G.y=C[1]*Math.round(G.y/C[1]));const N=[[m[0][0],m[0][1]],[m[1][0],m[1][1]]];u.current.length>1&&m&&!U.extent&&(N[0][0]=U.positionAbsolute.x-O.x+m[0][0],N[1][0]=U.positionAbsolute.x+(U.width??0)-O.x2+m[1][0],N[0][1]=U.positionAbsolute.y-O.y+m[0][1],N[1][1]=U.positionAbsolute.y+(U.height??0)-O.y2+m[1][1]);const P=Wc(U,G,T,N,D,H);return I=I||U.position.x!==P.position.x||U.position.y!==P.position.y,U.position=P.position,U.positionAbsolute=P.positionAbsolute,U}),!I)return;M(u.current,!0,!0),l(!0);const F=i?L:Vn(z);if(F&&y.current){const[U,G]=$n({nodeId:i,dragItems:u.current,nodeInternals:T});F(y.current,U,G)}},E=()=>{if(!h.current)return;const[A,R]=wc(x.current,h.current);if(A!==0||R!==0){const{transform:T,panBy:L}=s.getState();d.current.x=(d.current.x??0)-A/T[2],d.current.y=(d.current.y??0)-R/T[2],L({x:A,y:R})&&_(d.current)}f.current=requestAnimationFrame(E)},k=A=>{const{nodeInternals:R,multiSelectionActive:T,nodesDraggable:L,unselectNodesAndEdges:z,onNodeDragStart:M,onSelectionDragStart:m}=s.getState();p.current=!0;const C=i?M:Vn(m);(!a||!o)&&!T&&i&&(R.get(i)?.selected||z()),i&&o&&a&&Wi({id:i,store:s,nodeRef:e});const S=b(A);if(d.current=S,u.current=Xm(R,L,S,i),C&&u.current){const[D,H]=$n({nodeId:i,dragItems:u.current,nodeInternals:R});C(A.sourceEvent,D,H)}};if(t)v.on(".drag",null);else{const A=ip().on("start",R=>{const{domNode:T,nodeDragThreshold:L}=s.getState();L===0&&k(R),w.current=!1;const z=b(R);d.current=z,h.current=T?.getBoundingClientRect()||null,x.current=He(R.sourceEvent,h.current)}).on("drag",R=>{const T=b(R),{autoPanOnNodeDrag:L,nodeDragThreshold:z}=s.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!g.current&&p.current&&L&&(g.current=!0,E()),!p.current){const M=T.xSnapped-(d?.current?.x??0),m=T.ySnapped-(d?.current?.y??0);Math.sqrt(M*M+m*m)>z&&k(R)}(d.current.x!==T.xSnapped||d.current.y!==T.ySnapped)&&u.current&&p.current&&(y.current=R.sourceEvent,x.current=He(R.sourceEvent,h.current),_(T))}}).on("end",R=>{if(!(!p.current||w.current)&&(l(!1),g.current=!1,p.current=!1,cancelAnimationFrame(f.current),u.current)){const{updateNodePositions:T,nodeInternals:L,onNodeDragStop:z,onSelectionDragStop:M}=s.getState(),m=i?z:Vn(M);if(T(u.current,!1,!1),m){const[C,S]=$n({nodeId:i,dragItems:u.current,nodeInternals:L});m(R.sourceEvent,C,S)}}}).filter(R=>{const T=R.target;return!R.button&&(!n||!wa(T,`.${n}`,e))&&(!r||wa(T,r,e))});return v.call(A),()=>{v.on(".drag",null)}}}},[e,t,n,r,o,s,i,a,b]),c}function Kc(){const e=se();return q.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:a,snapToGrid:s,snapGrid:c,onError:l,nodesDraggable:u}=e.getState(),d=a().filter(w=>w.selected&&(w.draggable||u&&typeof w.draggable>"u")),f=s?c[0]:5,h=s?c[1]:5,x=n.isShiftPressed?4:1,y=n.x*f*x,g=n.y*h*x,p=d.map(w=>{if(w.positionAbsolute){const b={x:w.positionAbsolute.x+y,y:w.positionAbsolute.y+g};s&&(b.x=c[0]*Math.round(b.x/c[0]),b.y=c[1]*Math.round(b.y/c[1]));const{positionAbsolute:v,position:_}=Wc(w,b,r,i,void 0,l);w.position=_,w.positionAbsolute=v}return w});o(p,!0,!1)},[])}const yt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Rt=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:a,xPosOrigin:s,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:x,onDoubleClick:y,style:g,className:p,isDraggable:w,isSelectable:b,isConnectable:v,isFocusable:_,selectNodesOnDrag:E,sourcePosition:k,targetPosition:A,hidden:R,resizeObserver:T,dragHandle:L,zIndex:z,isParent:M,noDragClassName:m,noPanClassName:C,initialized:S,disableKeyboardA11y:D,ariaLabel:H,rfId:I,hasHandleBounds:O})=>{const F=se(),U=q.useRef(null),G=q.useRef(null),N=q.useRef(k),P=q.useRef(A),$=q.useRef(r),B=b||w||u||d||f||h,Y=Kc(),Z=kt(n,F.getState,d),K=kt(n,F.getState,f),ne=kt(n,F.getState,h),ce=kt(n,F.getState,x),re=kt(n,F.getState,y),ee=J=>{const{nodeDragThreshold:W}=F.getState();if(b&&(!E||!w||W>0)&&Wi({id:n,store:F,nodeRef:U}),u){const me=F.getState().nodeInternals.get(n);me&&u(J,{...me})}},te=J=>{if(!Ui(J)&&!D)if(bc.includes(J.key)&&b){const W=J.key==="Escape";Wi({id:n,store:F,unselect:W,nodeRef:U})}else w&&l&&Object.prototype.hasOwnProperty.call(yt,J.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),Y({x:yt[J.key].x,y:yt[J.key].y,isShiftPressed:J.shiftKey}))};q.useEffect(()=>()=>{G.current&&(T?.unobserve(G.current),G.current=null)},[]),q.useEffect(()=>{if(U.current&&!R){const J=U.current;(!S||!O||G.current!==J)&&(G.current&&T?.unobserve(G.current),T?.observe(J),G.current=J)}},[R,S,O]),q.useEffect(()=>{const J=$.current!==r,W=N.current!==k,me=P.current!==A;U.current&&(J||W||me)&&(J&&($.current=r),W&&(N.current=k),me&&(P.current=A),F.getState().updateNodeDimensions([{id:n,nodeElement:U.current,forceUpdate:!0}]))},[n,r,k,A]);const ge=Zc({nodeRef:U,disabled:R||!w,noDragClassName:m,handleSelector:L,nodeId:n,isSelectable:b,selectNodesOnDrag:E});return R?null:V.createElement("div",{className:pe(["react-flow__node",`react-flow__node-${r}`,{[C]:w},p,{selected:l,selectable:b,parent:M,dragging:ge}]),ref:U,style:{zIndex:z,transform:`translate(${s}px,${c}px)`,pointerEvents:B?"all":"none",visibility:S?"visible":"hidden",...g},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Z,onMouseMove:K,onMouseLeave:ne,onContextMenu:ce,onClick:ee,onDoubleClick:re,onKeyDown:_?te:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":D?void 0:`${Hc}-${I}`,"aria-label":H},V.createElement(cm,{value:n},V.createElement(e,{id:n,data:i,type:r,xPos:o,yPos:a,selected:l,isConnectable:v,sourcePosition:k,targetPosition:A,dragging:ge,dragHandle:L,zIndex:z})))};return t.displayName="NodeWrapper",q.memo(t)};const Zm=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Eo(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Km({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=se(),{width:i,height:o,x:a,y:s,transformString:c,userSelectionActive:l}=ae(Zm,le),u=Kc(),d=q.useRef(null);if(q.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),Zc({nodeRef:d}),l||!i||!o)return null;const f=e?x=>{const y=r.getState().getNodes().filter(g=>g.selected);e(x,y)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(yt,x.key)&&u({x:yt[x.key].x,y:yt[x.key].y,isShiftPressed:x.shiftKey})};return V.createElement("div",{className:pe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},V.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:o,top:s,left:a}}))}var Qm=q.memo(Km);const Jm=e=>e.nodesSelectionActive,Qc=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:s,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:x,onSelectionEnd:y,multiSelectionKeyCode:g,panActivationKeyCode:p,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:v,zoomOnPinch:_,panOnScroll:E,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:T,defaultViewport:L,translateExtent:z,minZoom:M,maxZoom:m,preventScrolling:C,onSelectionContextMenu:S,noWheelClassName:D,noPanClassName:H,disableKeyboardA11y:I})=>{const O=ae(Jm),F=zt(d),U=zt(p),G=U||T,N=U||E,P=F||f&&G!==!0;return Vm({deleteKeyCode:s,multiSelectionKeyCode:g}),V.createElement(Fm,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:o,elementsSelectable:b,zoomOnScroll:v,zoomOnPinch:_,panOnScroll:N,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:!F&&G,defaultViewport:L,translateExtent:z,minZoom:M,maxZoom:m,zoomActivationKeyCode:w,preventScrolling:C,noWheelClassName:D,noPanClassName:H},V.createElement(Xc,{onSelectionStart:x,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:G,isSelecting:!!P,selectionMode:h},e,O&&V.createElement(Qm,{onSelectionContextMenu:S,noPanClassName:H,disableKeyboardA11y:I})))};Qc.displayName="FlowRenderer";var ey=q.memo(Qc);function ty(e){return ae(q.useCallback(n=>e?Rc(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function ny(e){const t={input:Rt(e.input||Dc),default:Rt(e.default||ji),output:Rt(e.output||Vc),group:Rt(e.group||Co)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=Rt(e[o]||ji),i),n);return{...t,...r}}const ry=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},iy=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Jc=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:a}=ae(iy,le),s=ty(e.onlyRenderVisibleElements),c=q.useRef(),l=q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));o(f)});return c.current=u,u},[]);return q.useEffect(()=>()=>{c?.current?.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:ko},s.map(u=>{let d=u.type||"default";e.nodeTypes[d]||(a?.("003",Pe.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(u.draggable||t&&typeof u.draggable>"u"),x=!!(u.selectable||i&&typeof u.selectable>"u"),y=!!(u.connectable||n&&typeof u.connectable>"u"),g=!!(u.focusable||r&&typeof u.focusable>"u"),p=e.nodeExtent?yo(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,w=p?.x??0,b=p?.y??0,v=ry({x:w,y:b,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return V.createElement(f,{key:u.id,id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||j.Bottom,targetPosition:u.targetPosition||j.Top,hidden:u.hidden,xPos:w,yPos:b,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:h,isSelectable:x,isConnectable:y,isFocusable:g,resizeObserver:l,dragHandle:u.dragHandle,zIndex:u[oe]?.z??0,isParent:!!u[oe]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!u[oe]?.handleBounds})}))};Jc.displayName="NodeRenderer";var oy=q.memo(Jc);const ay=(e,t,n)=>n===j.Left?e-t:n===j.Right?e+t:e,sy=(e,t,n)=>n===j.Top?e-t:n===j.Bottom?e+t:e,ba="react-flow__edgeupdater",_a=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s})=>V.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:pe([ba,`${ba}-${s}`]),cx:ay(t,r,e),cy:sy(n,r,e),r,stroke:"transparent",fill:"transparent"}),uy=()=>!0;var dt=e=>{const t=({id:n,className:r,type:i,data:o,onClick:a,onEdgeDoubleClick:s,selected:c,animated:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,style:g,source:p,target:w,sourceX:b,sourceY:v,targetX:_,targetY:E,sourcePosition:k,targetPosition:A,elementsSelectable:R,hidden:T,sourceHandleId:L,targetHandleId:z,onContextMenu:M,onMouseEnter:m,onMouseMove:C,onMouseLeave:S,reconnectRadius:D,onReconnect:H,onReconnectStart:I,onReconnectEnd:O,markerEnd:F,markerStart:U,rfId:G,ariaLabel:N,isFocusable:P,isReconnectable:$,pathOptions:B,interactionWidth:Y,disableKeyboardA11y:Z})=>{const K=q.useRef(null),[ne,ce]=q.useState(!1),[re,ee]=q.useState(!1),te=se(),ge=q.useMemo(()=>`url('#${Yi(U,G)}')`,[U,G]),J=q.useMemo(()=>`url('#${Yi(F,G)}')`,[F,G]);if(T)return null;const W=ue=>{const{edges:Ne,addSelectedEdges:Ge,unselectNodesAndEdges:Ye,multiSelectionActive:st}=te.getState(),Se=Ne.find(Xe=>Xe.id===n);Se&&(R&&(te.setState({nodesSelectionActive:!1}),Se.selected&&st?(Ye({nodes:[],edges:[Se]}),K.current?.blur()):Ge([n])),a&&a(ue,Se))},me=Ct(n,te.getState,s),Fe=Ct(n,te.getState,M),bt=Ct(n,te.getState,m),nt=Ct(n,te.getState,C),rt=Ct(n,te.getState,S),Ie=(ue,Ne)=>{if(ue.button!==0)return;const{edges:Ge,isValidConnection:Ye}=te.getState(),st=Ne?w:p,Se=(Ne?z:L)||null,Xe=Ne?"target":"source",En=Ye||uy,Nn=Ne,Et=Ge.find(je=>je.id===n);ee(!0),I?.(ue,Et,Xe);const Sn=je=>{ee(!1),O?.(je,Et,Xe)};Mc({event:ue,handleId:Se,nodeId:st,onConnect:je=>H?.(Et,je),isTarget:Nn,getState:te.getState,setState:te.setState,isValidConnection:En,edgeUpdaterType:Xe,onReconnectEnd:Sn})},it=ue=>Ie(ue,!0),Be=ue=>Ie(ue,!1),Ue=()=>ce(!0),ot=()=>ce(!1),at=!R&&!a,_t=ue=>{if(!Z&&bc.includes(ue.key)&&R){const{unselectNodesAndEdges:Ne,addSelectedEdges:Ge,edges:Ye}=te.getState();ue.key==="Escape"?(K.current?.blur(),Ne({edges:[Ye.find(Se=>Se.id===n)]})):Ge([n])}};return V.createElement("g",{className:pe(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:l,inactive:at,updating:ne}]),onClick:W,onDoubleClick:me,onContextMenu:Fe,onMouseEnter:bt,onMouseMove:nt,onMouseLeave:rt,onKeyDown:P?_t:void 0,tabIndex:P?0:void 0,role:P?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":N===null?void 0:N||`Edge from ${p} to ${w}`,"aria-describedby":P?`${Oc}-${G}`:void 0,ref:K},!re&&V.createElement(e,{id:n,source:p,target:w,selected:c,animated:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,data:o,style:g,sourceX:b,sourceY:v,targetX:_,targetY:E,sourcePosition:k,targetPosition:A,sourceHandleId:L,targetHandleId:z,markerStart:ge,markerEnd:J,pathOptions:B,interactionWidth:Y}),$&&V.createElement(V.Fragment,null,($==="source"||$===!0)&&V.createElement(_a,{position:k,centerX:b,centerY:v,radius:D,onMouseDown:it,onMouseEnter:Ue,onMouseOut:ot,type:"source"}),($==="target"||$===!0)&&V.createElement(_a,{position:A,centerX:_,centerY:E,radius:D,onMouseDown:Be,onMouseEnter:Ue,onMouseOut:ot,type:"target"})))};return t.displayName="EdgeWrapper",q.memo(t)};function cy(e){const t={default:dt(e.default||fn),straight:dt(e.bezier||bo),step:dt(e.step||xo),smoothstep:dt(e.step||bn),simplebezier:dt(e.simplebezier||wo)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=dt(e[o]||fn),i),n);return{...t,...r}}function Ea(e,t,n=null){const r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,o=n?.width||t.width,a=n?.height||t.height;switch(e){case j.Top:return{x:r+o/2,y:i};case j.Right:return{x:r+o,y:i+a/2};case j.Bottom:return{x:r+o/2,y:i+a};case j.Left:return{x:r,y:i+a/2}}}function Na(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const ly=(e,t,n,r,i,o)=>{const a=Ea(n,e,t),s=Ea(o,r,i);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}};function dy({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:a,height:s,transform:c}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=vo({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:s/c[2]}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),f=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*f)>0}function Sa(e){const t=e?.[oe]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const fy=[{level:0,isMaxLevel:!0,edges:[]}];function hy(e,t,n=!1){let r=-1;const i=e.reduce((a,s)=>{const c=ve(s.zIndex);let l=c?s.zIndex:0;if(n){const u=t.get(s.target),d=t.get(s.source),f=s.selected||u?.selected||d?.selected,h=Math.max(d?.[oe]?.z||0,u?.[oe]?.z||0,1e3);l=(c?s.zIndex:0)+(f?h:0)}return a[l]?a[l].push(s):a[l]=[s],r=l>r?l:r,a},{}),o=Object.entries(i).map(([a,s])=>{const c=+a;return{edges:s,level:c,isMaxLevel:c===r}});return o.length===0?fy:o}function py(e,t,n){const r=ae(q.useCallback(i=>e?i.edges.filter(o=>{const a=t.get(o.source),s=t.get(o.target);return a?.width&&a?.height&&s?.width&&s?.height&&dy({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return hy(r,t,n)}const gy=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),my=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ca={[Vt.Arrow]:gy,[Vt.ArrowClosed]:my};function yy(e){const t=se();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(Ca,e)?Ca[e]:(t.getState().onError?.("009",Pe.error009(e)),null),[e])}const vy=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const c=yy(t);return c?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0"},V.createElement(c,{color:n,strokeWidth:a})):null},wy=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const s=Yi(a,t);r.includes(s)||(i.push({id:s,color:a.color||e,...a}),r.push(s))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},el=({defaultColor:e,rfId:t})=>{const n=ae(q.useCallback(wy({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,a)=>o.id!==i[a].id)));return V.createElement("defs",null,n.map(r=>V.createElement(vy,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};el.displayName="MarkerDefinitions";var xy=q.memo(el);const by=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),tl=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:y,children:g,disableKeyboardA11y:p})=>{const{edgesFocusable:w,edgesUpdatable:b,elementsSelectable:v,width:_,height:E,connectionMode:k,nodeInternals:A,onError:R}=ae(by,le),T=py(t,A,n);return _?V.createElement(V.Fragment,null,T.map(({level:L,edges:z,isMaxLevel:M})=>V.createElement("svg",{key:L,style:{zIndex:L},width:_,height:E,className:"react-flow__edges react-flow__container"},M&&V.createElement(xy,{defaultColor:e,rfId:r}),V.createElement("g",null,z.map(m=>{const[C,S,D]=Sa(A.get(m.source)),[H,I,O]=Sa(A.get(m.target));if(!D||!O)return null;let F=m.type||"default";i[F]||(R?.("011",Pe.error011(F)),F="default");const U=i[F]||i.default,G=k===et.Strict?I.target:(I.target??[]).concat(I.source??[]),N=Na(S.source,m.sourceHandle),P=Na(G,m.targetHandle),$=N?.position||j.Bottom,B=P?.position||j.Top,Y=!!(m.focusable||w&&typeof m.focusable>"u"),Z=m.reconnectable||m.updatable,K=typeof f<"u"&&(Z||b&&typeof Z>"u");if(!N||!P)return R?.("008",Pe.error008(N,m)),null;const{sourceX:ne,sourceY:ce,targetX:re,targetY:ee}=ly(C,N,$,H,P,B);return V.createElement(U,{key:m.id,id:m.id,className:pe([m.className,o]),type:F,data:m.data,selected:!!m.selected,animated:!!m.animated,hidden:!!m.hidden,label:m.label,labelStyle:m.labelStyle,labelShowBg:m.labelShowBg,labelBgStyle:m.labelBgStyle,labelBgPadding:m.labelBgPadding,labelBgBorderRadius:m.labelBgBorderRadius,style:m.style,source:m.source,target:m.target,sourceHandleId:m.sourceHandle,targetHandleId:m.targetHandle,markerEnd:m.markerEnd,markerStart:m.markerStart,sourceX:ne,sourceY:ce,targetX:re,targetY:ee,sourcePosition:$,targetPosition:B,elementsSelectable:v,onContextMenu:a,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:y,rfId:r,ariaLabel:m.ariaLabel,isFocusable:Y,isReconnectable:K,pathOptions:"pathOptions"in m?m.pathOptions:void 0,interactionWidth:m.interactionWidth,disableKeyboardA11y:p})})))),g):null};tl.displayName="EdgeRenderer";var _y=q.memo(tl);const Ey=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ny({children:e}){const t=ae(Ey);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Sy(e){const t=_n(),n=q.useRef(!1);q.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Cy={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},nl=({nodeId:e,handleType:t,style:n,type:r=qe.Bezier,CustomComponent:i,connectionStatus:o})=>{const{fromNode:a,handleId:s,toX:c,toY:l,connectionMode:u}=ae(q.useCallback(E=>({fromNode:E.nodeInternals.get(e),handleId:E.connectionHandleId,toX:(E.connectionPosition.x-E.transform[0])/E.transform[2],toY:(E.connectionPosition.y-E.transform[1])/E.transform[2],connectionMode:E.connectionMode}),[e]),le),d=a?.[oe]?.handleBounds;let f=d?.[t];if(u===et.Loose&&(f=f||d?.[t==="source"?"target":"source"]),!a||!f)return null;const h=s?f.find(E=>E.id===s):f[0],x=h?h.x+h.width/2:(a.width??0)/2,y=h?h.y+h.height/2:a.height??0,g=(a.positionAbsolute?.x??0)+x,p=(a.positionAbsolute?.y??0)+y,w=h?.position,b=w?Cy[w]:null;if(!w||!b)return null;if(i)return V.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:h,fromX:g,fromY:p,toX:c,toY:l,fromPosition:w,toPosition:b,connectionStatus:o});let v="";const _={sourceX:g,sourceY:p,sourcePosition:w,targetX:c,targetY:l,targetPosition:b};return r===qe.Bezier?[v]=Cc(_):r===qe.Step?[v]=Gi({..._,borderRadius:0}):r===qe.SmoothStep?[v]=Gi(_):r===qe.SimpleBezier?[v]=Sc(_):v=`M${g},${p} ${c},${l}`,V.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};nl.displayName="ConnectionLine";const ky=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Ry({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:a,width:s,height:c,connectionStatus:l}=ae(ky,le);return!(i&&o&&s&&a)?null:V.createElement("svg",{style:e,width:s,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:pe(["react-flow__connection",l])},V.createElement(nl,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:l})))}function ka(e,t){return q.useRef(null),se(),q.useMemo(()=>t(e),[e])}const rl=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:x,onSelectionStart:y,onSelectionEnd:g,connectionLineType:p,connectionLineStyle:w,connectionLineComponent:b,connectionLineContainerStyle:v,selectionKeyCode:_,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:T,deleteKeyCode:L,onlyRenderVisibleElements:z,elementsSelectable:M,selectNodesOnDrag:m,defaultViewport:C,translateExtent:S,minZoom:D,maxZoom:H,preventScrolling:I,defaultMarkerColor:O,zoomOnScroll:F,zoomOnPinch:U,panOnScroll:G,panOnScrollSpeed:N,panOnScrollMode:P,zoomOnDoubleClick:$,panOnDrag:B,onPaneClick:Y,onPaneMouseEnter:Z,onPaneMouseMove:K,onPaneMouseLeave:ne,onPaneScroll:ce,onPaneContextMenu:re,onEdgeContextMenu:ee,onEdgeMouseEnter:te,onEdgeMouseMove:ge,onEdgeMouseLeave:J,onReconnect:W,onReconnectStart:me,onReconnectEnd:Fe,reconnectRadius:bt,noDragClassName:nt,noWheelClassName:rt,noPanClassName:Ie,elevateEdgesOnSelect:it,disableKeyboardA11y:Be,nodeOrigin:Ue,nodeExtent:ot,rfId:at})=>{const _t=ka(e,ny),ue=ka(t,cy);return Sy(o),V.createElement(ey,{onPaneClick:Y,onPaneMouseEnter:Z,onPaneMouseMove:K,onPaneMouseLeave:ne,onPaneContextMenu:re,onPaneScroll:ce,deleteKeyCode:L,selectionKeyCode:_,selectionOnDrag:E,selectionMode:k,onSelectionStart:y,onSelectionEnd:g,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:T,elementsSelectable:M,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:F,zoomOnPinch:U,zoomOnDoubleClick:$,panOnScroll:G,panOnScrollSpeed:N,panOnScrollMode:P,panOnDrag:B,defaultViewport:C,translateExtent:S,minZoom:D,maxZoom:H,onSelectionContextMenu:x,preventScrolling:I,noDragClassName:nt,noWheelClassName:rt,noPanClassName:Ie,disableKeyboardA11y:Be},V.createElement(Ny,null,V.createElement(_y,{edgeTypes:ue,onEdgeClick:s,onEdgeDoubleClick:l,onlyRenderVisibleElements:z,onEdgeContextMenu:ee,onEdgeMouseEnter:te,onEdgeMouseMove:ge,onEdgeMouseLeave:J,onReconnect:W,onReconnectStart:me,onReconnectEnd:Fe,reconnectRadius:bt,defaultMarkerColor:O,noPanClassName:Ie,elevateEdgesOnSelect:!!it,disableKeyboardA11y:Be,rfId:at},V.createElement(Ry,{style:w,type:p,component:b,containerStyle:v})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(oy,{nodeTypes:_t,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:m,onlyRenderVisibleElements:z,noPanClassName:Ie,noDragClassName:nt,disableKeyboardA11y:Be,nodeOrigin:Ue,nodeExtent:ot,rfId:at})))};rl.displayName="GraphView";var Iy=q.memo(rl);const Zi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],De={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Zi,nodeExtent:Zi,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:et.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:rm,isValidConnection:void 0},Ty=()=>mf((e,t)=>({...De,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Ln(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",a=i?Ln(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:c,nodeOrigin:l}=t(),u=c?.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((y,g)=>{const p=i.get(g.id);if(p?.hidden)i.set(p.id,{...p,[oe]:{...p[oe],handleBounds:void 0}});else if(p){const w=mo(g.nodeElement);w.width&&w.height&&(p.width!==w.width||p.height!==w.height||g.forceUpdate)&&(i.set(p.id,{...p,[oe]:{...p[oe],handleBounds:{source:xa(".source",g.nodeElement,f,l),target:xa(".target",g.nodeElement,f,l)}},...w}),y.push({id:p.id,type:"dimensions",dimensions:w}))}return y},[]);Bc(i,l);const x=a||o&&!a&&Uc(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:x}),h?.length>0&&r?.(h)},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),a=n.map(s=>{const c={id:s.id,type:"position",dragging:i};return r&&(c.positionAbsolute=s.positionAbsolute,c.position=s.position),c});o(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:a,getNodes:s,elevateNodesOnSelect:c}=t();if(n?.length){if(o){const l=Yc(n,s()),u=Ln(l,i,a,c);e({nodeInternals:u})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(c=>Ve(c,!0)):(a=ht(o(),n),s=ht(i,[])),Kt({changedNodes:a,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(c=>Ve(c,!0)):(a=ht(i,n),s=ht(o(),[])),Kt({changedNodes:s,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),a=n||o(),s=r||i,c=a.map(u=>(u.selected=!1,Ve(u.id,!1))),l=s.map(u=>Ve(u.id,!1));Kt({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(s=>s.selected).map(s=>Ve(s.id,!1)),a=n.filter(s=>s.selected).map(s=>Ve(s.id,!1));Kt({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=yo(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:a,d3Selection:s,translateExtent:c}=t();if(!a||!s||!n.x&&!n.y)return!1;const l=ze.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[i,o]],d=a?.constrain()(l,u,c);return a.transform(s,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:De.connectionNodeId,connectionHandleId:De.connectionHandleId,connectionHandleType:De.connectionHandleType,connectionStatus:De.connectionStatus,connectionStartHandle:De.connectionStartHandle,connectionEndHandle:De.connectionEndHandle}),reset:()=>e({...De})}),Object.is),Ro=({children:e})=>{const t=q.useRef(null);return t.current||(t.current=Ty()),V.createElement(Wg,{value:t.current},e)};Ro.displayName="ReactFlowProvider";const il=({children:e})=>q.useContext(xn)?V.createElement(V.Fragment,null,e):V.createElement(Ro,null,e);il.displayName="ReactFlowWrapper";const qy={input:Dc,default:ji,output:Vc,group:Co},My={default:fn,straight:bo,step:xo,smoothstep:bn,simplebezier:wo},Ay=[0,0],Py=[15,15],Ly={x:0,y:0,zoom:1},Dy={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ol=q.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=qy,edgeTypes:a=My,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:x,onConnectEnd:y,onClickConnectStart:g,onClickConnectEnd:p,onNodeMouseEnter:w,onNodeMouseMove:b,onNodeMouseLeave:v,onNodeContextMenu:_,onNodeDoubleClick:E,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:T,onEdgesDelete:L,onSelectionChange:z,onSelectionDragStart:M,onSelectionDrag:m,onSelectionDragStop:C,onSelectionContextMenu:S,onSelectionStart:D,onSelectionEnd:H,connectionMode:I=et.Strict,connectionLineType:O=qe.Bezier,connectionLineStyle:F,connectionLineComponent:U,connectionLineContainerStyle:G,deleteKeyCode:N="Backspace",selectionKeyCode:P="Shift",selectionOnDrag:$=!1,selectionMode:B=$t.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:Z=dn()?"Meta":"Control",zoomActivationKeyCode:K=dn()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:ce=Py,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ee=!0,nodesDraggable:te,nodesConnectable:ge,nodesFocusable:J,nodeOrigin:W=Ay,edgesFocusable:me,edgesUpdatable:Fe,elementsSelectable:bt,defaultViewport:nt=Ly,minZoom:rt=.5,maxZoom:Ie=2,translateExtent:it=Zi,preventScrolling:Be=!0,nodeExtent:Ue,defaultMarkerColor:ot="#b1b1b7",zoomOnScroll:at=!0,zoomOnPinch:_t=!0,panOnScroll:ue=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:Ge=Ke.Free,zoomOnDoubleClick:Ye=!0,panOnDrag:st=!0,onPaneClick:Se,onPaneMouseEnter:Xe,onPaneMouseMove:En,onPaneMouseLeave:Nn,onPaneScroll:Et,onPaneContextMenu:Sn,children:qo,onEdgeContextMenu:je,onEdgeDoubleClick:Cl,onEdgeMouseEnter:kl,onEdgeMouseMove:Rl,onEdgeMouseLeave:Il,onEdgeUpdate:Tl,onEdgeUpdateStart:ql,onEdgeUpdateEnd:Ml,onReconnect:Al,onReconnectStart:Pl,onReconnectEnd:Ll,reconnectRadius:Dl=10,edgeUpdaterRadius:$l=10,onNodesChange:Vl,onEdgesChange:zl,noDragClassName:Hl="nodrag",noWheelClassName:Ol="nowheel",noPanClassName:Mo="nopan",fitView:Fl=!1,fitViewOptions:Bl,connectOnClick:Ul=!0,attributionPosition:Gl,proOptions:Yl,defaultEdgeOptions:Xl,elevateNodesOnSelect:jl=!0,elevateEdgesOnSelect:Wl=!1,disableKeyboardA11y:Ao=!1,autoPanOnConnect:Zl=!0,autoPanOnNodeDrag:Kl=!0,connectionRadius:Ql=20,isValidConnection:Jl,onError:ed,style:td,id:Po,nodeDragThreshold:nd,...rd},id)=>{const Cn=Po||"1";return V.createElement("div",{...rd,style:{...td,...Dy},ref:id,className:pe(["react-flow",i]),"data-testid":"rf__wrapper",id:Po},V.createElement(il,null,V.createElement(Iy,{onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:b,onNodeMouseLeave:v,onNodeContextMenu:_,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:a,connectionLineType:O,connectionLineStyle:F,connectionLineComponent:U,connectionLineContainerStyle:G,selectionKeyCode:P,selectionOnDrag:$,selectionMode:B,deleteKeyCode:N,multiSelectionKeyCode:Z,panActivationKeyCode:Y,zoomActivationKeyCode:K,onlyRenderVisibleElements:re,selectNodesOnDrag:ee,defaultViewport:nt,translateExtent:it,minZoom:rt,maxZoom:Ie,preventScrolling:Be,zoomOnScroll:at,zoomOnPinch:_t,zoomOnDoubleClick:Ye,panOnScroll:ue,panOnScrollSpeed:Ne,panOnScrollMode:Ge,panOnDrag:st,onPaneClick:Se,onPaneMouseEnter:Xe,onPaneMouseMove:En,onPaneMouseLeave:Nn,onPaneScroll:Et,onPaneContextMenu:Sn,onSelectionContextMenu:S,onSelectionStart:D,onSelectionEnd:H,onEdgeContextMenu:je,onEdgeDoubleClick:Cl,onEdgeMouseEnter:kl,onEdgeMouseMove:Rl,onEdgeMouseLeave:Il,onReconnect:Al??Tl,onReconnectStart:Pl??ql,onReconnectEnd:Ll??Ml,reconnectRadius:Dl??$l,defaultMarkerColor:ot,noDragClassName:Hl,noWheelClassName:Ol,noPanClassName:Mo,elevateEdgesOnSelect:Wl,rfId:Cn,disableKeyboardA11y:Ao,nodeOrigin:W,nodeExtent:Ue}),V.createElement(Cm,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:x,onConnectEnd:y,onClickConnectStart:g,onClickConnectEnd:p,nodesDraggable:te,nodesConnectable:ge,nodesFocusable:J,edgesFocusable:me,edgesUpdatable:Fe,elementsSelectable:bt,elevateNodesOnSelect:jl,minZoom:rt,maxZoom:Ie,nodeExtent:Ue,onNodesChange:Vl,onEdgesChange:zl,snapToGrid:ne,snapGrid:ce,connectionMode:I,translateExtent:it,connectOnClick:Ul,defaultEdgeOptions:Xl,fitView:Fl,fitViewOptions:Bl,onNodesDelete:T,onEdgesDelete:L,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:m,onSelectionDragStart:M,onSelectionDragStop:C,noPanClassName:Mo,nodeOrigin:W,rfId:Cn,autoPanOnConnect:Zl,autoPanOnNodeDrag:Kl,onError:ed,connectionRadius:Ql,isValidConnection:Jl,nodeDragThreshold:nd}),V.createElement(Nm,{onSelectionChange:z}),qo,V.createElement(Kg,{proOptions:Yl,position:Gl}),V.createElement(qm,{rfId:Cn,disableKeyboardA11y:Ao})))});ol.displayName="ReactFlow";function al(e){return t=>{const[n,r]=q.useState(t),i=q.useCallback(o=>r(a=>e(o,a)),[]);return[n,r,i]}}const $y=al(Yc),Vy=al(Gm);function zy(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Hy(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Oy(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Fy(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function By(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const qt=({children:e,className:t,...n})=>V.createElement("button",{type:"button",className:pe(["react-flow__controls-button",t]),...n},e);qt.displayName="ControlButton";const Uy=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),sl=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left"})=>{const f=se(),[h,x]=q.useState(!1),{isInteractive:y,minZoomReached:g,maxZoomReached:p}=ae(Uy,le),{zoomIn:w,zoomOut:b,fitView:v}=_n();if(q.useEffect(()=>{x(!0)},[]),!h)return null;const _=()=>{w(),o?.()},E=()=>{b(),a?.()},k=()=>{v(i),s?.()},A=()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c?.(!y)};return V.createElement(vc,{className:pe(["react-flow__controls",l]),position:d,style:e,"data-testid":"rf__controls"},t&&V.createElement(V.Fragment,null,V.createElement(qt,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:p},V.createElement(zy,null)),V.createElement(qt,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},V.createElement(Hy,null))),n&&V.createElement(qt,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},V.createElement(Oy,null)),r&&V.createElement(qt,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},y?V.createElement(By,null):V.createElement(Fy,null)),u)};sl.displayName="Controls";var Gy=q.memo(sl);const Ki=e=>{const t=ad(sd(e.modifiedOn)),{name:n,description:r}=e;return q.useMemo(()=>X.jsxs(X.Fragment,{children:[n&&X.jsx(rn,{title:n,placement:"top",enterNextDelay:200,children:X.jsx("span",{children:X.jsx(Pi,{variant:"smallText1",className:"name",children:n})})}),r&&X.jsx(rn,{title:r,placement:"top",enterNextDelay:200,children:X.jsx("span",{children:X.jsx(Pi,{variant:"smallText1",className:"description",children:r})})}),X.jsx(vd,{userId:e.modifiedBy}),X.jsx("div",{children:t})]}),[n,r,e.modifiedBy,t])};try{Ki.displayName="ActivityNodeLabel",Ki.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const Yy=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),Qi=e=>{const{entityHeader:t}=e;if(t){const n=Cu(t?.type);if(n==Lo.file){const r=t.name.lastIndexOf(".");if(r>-1){const i=t.name.slice(r);if(Yy.has(i.toLowerCase()))return X.jsx(io,{icon:"code"})}}else return X.jsx(Do,{type:n,includeTooltip:!1})}return X.jsx(Do,{type:Lo.file,includeTooltip:!1})};try{Qi.displayName="ProvenanceEntityIcon",Qi.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const Ji=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return q.useMemo(()=>X.jsxs(X.Fragment,{children:[X.jsx("div",{children:X.jsx(Qi,{entityHeader:e})}),X.jsxs(X.Fragment,{children:[X.jsx("div",{children:X.jsx(rn,{title:e.name,placement:"top",enterNextDelay:300,children:X.jsx(cd,{href:`${ld.PORTAL}Synapse:${n}`,children:e.name})})}),ud(Cu(e.type))&&X.jsxs("div",{children:[X.jsxs("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&X.jsx("div",{children:"(old version)"})]})]})]}),[e,n])};try{Ji.displayName="EntityNodeLabel",Ji.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.ExampleEntity"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.Preview"'},{value:'"org.sagebionetworks.repo.model.Project"'},{value:'"org.sagebionetworks.repo.model.RecordSet"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.VirtualTable"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}const eo=e=>{const{itemCount:t}=e;return q.useMemo(()=>X.jsx(X.Fragment,{children:X.jsxs("a",{children:["Show ",t," ",wd("item",t),""]})}),[t])};try{eo.displayName="ExpandGraphNodeLabel",eo.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const Xy=/^(.+?\.)?github\.com$/,jy=/^(.+?\.)?githubusercontent\.com$/,to=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:i}=r;return(i.match(Xy)||i.match(jy))&&(n="github"),X.jsx(io,{icon:n})};try{to.displayName="ProvenanceExternalIcon",to.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const no=e=>q.useMemo(()=>X.jsxs(X.Fragment,{children:[X.jsx("div",{children:X.jsx(to,{url:e.url})}),X.jsx(rn,{title:e.name,placement:"top",enterNextDelay:300,children:X.jsx("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{no.displayName="ExternalGraphNodeLabel",no.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var zn,Ra;function Wy(){if(Ra)return zn;Ra=1;var e=xd(),t=4;function n(r){return e(r,t)}return zn=n,zn}var Hn,Ia;function ul(){return Ia||(Ia=1,Hn=Ru()),Hn}var On,Ta;function Zy(){if(Ta)return On;Ta=1;var e=Iu();function t(n,r){var i=[];return e(n,function(o,a,s){r(o,a,s)&&i.push(o)}),i}return On=t,On}var Fn,qa;function cl(){if(qa)return Fn;qa=1;var e=bd(),t=Zy(),n=Oe(),r=tt();function i(o,a){var s=r(o)?e:t;return s(o,n(a,3))}return Fn=i,Fn}var Bn,Ma;function Ky(){if(Ma)return Bn;Ma=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Bn=n,Bn}var Un,Aa;function ll(){if(Aa)return Un;Aa=1;var e=Ky(),t=_d();function n(r,i){return r!=null&&t(r,i,e)}return Un=n,Un}var Gn,Pa;function Qy(){if(Pa)return Gn;Pa=1;var e=Tu(),t=qu(),n=Ed(),r=tt(),i=ao(),o=Mu(),a=Nd(),s=Au(),c="[object Map]",l="[object Set]",u=Object.prototype,d=u.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||s(h)||n(h)))return!h.length;var x=t(h);if(x==c||x==l)return!h.size;if(a(h))return!e(h).length;for(var y in h)if(d.call(h,y))return!1;return!0}return Gn=f,Gn}var Yn,La;function dl(){if(La)return Yn;La=1;function e(t){return t===void 0}return Yn=e,Yn}var Xn,Da;function fl(){if(Da)return Xn;Da=1;var e=Pu(),t=Oe(),n=Sd(),r=tt();function i(o,a){var s=r(o)?e:n;return s(o,t(a,3))}return Xn=i,Xn}var jn,$a;function Jy(){if($a)return jn;$a=1;function e(t,n,r,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++o]);++o<a;)r=n(r,t[o],o,t);return r}return jn=e,jn}var Wn,Va;function ev(){if(Va)return Wn;Va=1;function e(t,n,r,i,o){return o(t,function(a,s,c){r=i?(i=!1,a):n(r,a,s,c)}),r}return Wn=e,Wn}var Zn,za;function hl(){if(za)return Zn;za=1;var e=Jy(),t=Iu(),n=Oe(),r=ev(),i=tt();function o(a,s,c){var l=i(a)?e:r,u=arguments.length<3;return l(a,n(s,4),c,u,t)}return Zn=o,Zn}var Kn,Ha;function tv(){if(Ha)return Kn;Ha=1;var e=Cd(),t=tt(),n=kd(),r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return Kn=i,Kn}var Qn,Oa;function nv(){if(Oa)return Qn;Oa=1;var e=Rd(),t=e("length");return Qn=t,Qn}var Jn,Fa;function rv(){if(Fa)return Jn;Fa=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function c(l){return s.test(l)}return Jn=c,Jn}var er,Ba;function iv(){if(Ba)return er;Ba=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",x=l+"?",y="["+o+"]?",g="(?:"+h+"(?:"+[u,d,f].join("|")+")"+y+x+")*",p=y+x+g,w="(?:"+[u+s+"?",s,d,f,a].join("|")+")",b=RegExp(c+"(?="+c+")|"+w+p,"g");function v(_){for(var E=b.lastIndex=0;b.test(_);)++E;return E}return er=v,er}var tr,Ua;function ov(){if(Ua)return tr;Ua=1;var e=nv(),t=rv(),n=iv();function r(i){return t(i)?n(i):e(i)}return tr=r,tr}var nr,Ga;function av(){if(Ga)return nr;Ga=1;var e=Tu(),t=qu(),n=ao(),r=tv(),i=ov(),o="[object Map]",a="[object Set]";function s(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var l=t(c);return l==o||l==a?c.size:e(c).length}return nr=s,nr}var rr,Ya;function sv(){if(Ya)return rr;Ya=1;var e=Id(),t=Td(),n=Lu(),r=Oe(),i=qd(),o=tt(),a=Mu(),s=Du(),c=so(),l=Au();function u(d,f,h){var x=o(d),y=x||a(d)||l(d);if(f=r(f,4),h==null){var g=d&&d.constructor;y?h=x?new g:[]:c(d)?h=s(g)?t(i(d)):{}:h={}}return(y?e:n)(d,function(p,w,b){return f(h,p,w,b)}),h}return rr=u,rr}var ir,Xa;function uv(){if(Xa)return ir;Xa=1;var e=Md(),t=Ad(),n=Pd(),r=Ld(),i=t(function(o){return n(e(o,1,r,!0))});return ir=i,ir}var or,ja;function cv(){if(ja)return or;ja=1;var e=Pu();function t(n,r){return e(r,function(i){return n[i]})}return or=t,or}var ar,Wa;function pl(){if(Wa)return ar;Wa=1;var e=cv(),t=uo();function n(r){return r==null?[]:e(r,t(r))}return ar=n,ar}var sr,Za;function we(){if(Za)return sr;Za=1;var e;if(typeof oo=="function")try{e={clone:Wy(),constant:$u(),each:ul(),filter:cl(),has:ll(),isArray:tt(),isEmpty:Qy(),isFunction:Du(),isUndefined:dl(),keys:uo(),map:fl(),reduce:hl(),size:av(),transform:sv(),union:uv(),values:pl()}}catch{}return e||(e=window._),sr=e,sr}var ur,Ka;function Io(){if(Ka)return ur;Ka=1;var e=we();ur=i;var t="\0",n="\0",r="";function i(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._in[d])})},i.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._out[d])})},i.prototype.setNodes=function(u,d){var f=arguments,h=this;return e.each(u,function(x){f.length>1?h.setNode(x,d):h.setNode(x)}),this},i.prototype.setNode=function(u,d){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return e.has(this._nodes,u)},i.prototype.removeNode=function(u){var d=this;if(e.has(this._nodes,u)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(h){d.setParent(h)}),delete this._children[u]),e.each(e.keys(this._in[u]),f),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==n)return d}},i.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var d=this._children[u];if(d)return e.keys(d)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var d=this._preds[u];if(d)return e.keys(d)},i.prototype.successors=function(u){var d=this._sucs[u];if(d)return e.keys(d)},i.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return e.union(d,this.successors(u))},i.prototype.isLeaf=function(u){var d;return this.isDirected()?d=this.successors(u):d=this.neighbors(u),d.length===0},i.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(y,g){u(g)&&d.setNode(g,y)}),e.each(this._edgeObjs,function(y){d.hasNode(y.v)&&d.hasNode(y.w)&&d.setEdge(y,f.edge(y))});var h={};function x(y){var g=f.parent(y);return g===void 0||d.hasNode(g)?(h[y]=g,g):g in h?h[g]:x(g)}return this._isCompound&&e.each(d.nodes(),function(y){d.setParent(y,x(y))}),d},i.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(u,d){var f=this,h=arguments;return e.reduce(u,function(x,y){return h.length>1?f.setEdge(x,y,d):f.setEdge(x,y),y}),this},i.prototype.setEdge=function(){var u,d,f,h,x=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(u=y.v,d=y.w,f=y.name,arguments.length===2&&(h=arguments[1],x=!0)):(u=y,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],x=!0)),u=""+u,d=""+d,e.isUndefined(f)||(f=""+f);var g=s(this._isDirected,u,d,f);if(e.has(this._edgeLabels,g))return x&&(this._edgeLabels[g]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[g]=x?h:this._defaultEdgeLabelFn(u,d,f);var p=c(this._isDirected,u,d,f);return u=p.v,d=p.w,Object.freeze(p),this._edgeObjs[g]=p,o(this._preds[d],u),o(this._sucs[u],d),this._in[d][g]=p,this._out[u][g]=p,this._edgeCount++,this},i.prototype.edge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(u,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,u,d,f),x=this._edgeObjs[h];return x&&(u=x.v,d=x.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],u),a(this._sucs[u],d),delete this._in[d][h],delete this._out[u][h],this._edgeCount--),this},i.prototype.inEdges=function(u,d){var f=this._in[u];if(f){var h=e.values(f);return d?e.filter(h,function(x){return x.v===d}):h}},i.prototype.outEdges=function(u,d){var f=this._out[u];if(f){var h=e.values(f);return d?e.filter(h,function(x){return x.w===d}):h}},i.prototype.nodeEdges=function(u,d){var f=this.inEdges(u,d);if(f)return f.concat(this.outEdges(u,d))};function o(u,d){u[d]?u[d]++:u[d]=1}function a(u,d){--u[d]||delete u[d]}function s(u,d,f,h){var x=""+d,y=""+f;if(!u&&x>y){var g=x;x=y,y=g}return x+r+y+r+(e.isUndefined(h)?t:h)}function c(u,d,f,h){var x=""+d,y=""+f;if(!u&&x>y){var g=x;x=y,y=g}var p={v:x,w:y};return h&&(p.name=h),p}function l(u,d){return s(u,d.v,d.w,d.name)}return ur}var cr,Qa;function lv(){return Qa||(Qa=1,cr="2.1.8"),cr}var lr,Ja;function dv(){return Ja||(Ja=1,lr={Graph:Io(),version:lv()}),lr}var dr,es;function fv(){if(es)return dr;es=1;var e=we(),t=Io();dr={write:n,read:o};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var c=a.node(s),l=a.parent(s),u={v:s};return e.isUndefined(c)||(u.value=c),e.isUndefined(l)||(u.parent=l),u})}function i(a){return e.map(a.edges(),function(s){var c=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(c)||(l.value=c),l})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(c){s.setNode(c.v,c.value),c.parent&&s.setParent(c.v,c.parent)}),e.each(a.edges,function(c){s.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),s}return dr}var fr,ts;function hv(){if(ts)return fr;ts=1;var e=we();fr=t;function t(n){var r={},i=[],o;function a(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return fr}var hr,ns;function gl(){if(ns)return hr;ns=1;var e=we();hr=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,a=o.length;return i[n]=a,o.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,a=i[n],s=i[r];i[n]=s,i[r]=a,o[s.key]=n,o[a.key]=r},hr}var pr,rs;function ml(){if(rs)return pr;rs=1;var e=we(),t=gl();pr=r;var n=e.constant(1);function r(o,a,s,c){return i(o,String(a),s||n,c||function(l){return o.outEdges(l)})}function i(o,a,s,c){var l={},u=new t,d,f,h=function(x){var y=x.v!==d?x.v:x.w,g=l[y],p=s(x),w=f.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+p);w<g.distance&&(g.distance=w,g.predecessor=d,u.decrease(y,w))};for(o.nodes().forEach(function(x){var y=x===a?0:Number.POSITIVE_INFINITY;l[x]={distance:y},u.add(x,y)});u.size()>0&&(d=u.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)c(d).forEach(h);return l}return pr}var gr,is;function pv(){if(is)return gr;is=1;var e=ml(),t=we();gr=n;function n(r,i,o){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,i,o)},{})}return gr}var mr,os;function yl(){if(os)return mr;os=1;var e=we();mr=t;function t(n){var r=0,i=[],o={},a=[];function s(c){var l=o[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(f){e.has(o,f)?o[f].onStack&&(l.lowlink=Math.min(l.lowlink,o[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,o[f].lowlink))}),l.lowlink===l.index){var u=[],d;do d=i.pop(),o[d].onStack=!1,u.push(d);while(c!==d);a.push(u)}}return n.nodes().forEach(function(c){e.has(o,c)||s(c)}),a}return mr}var yr,as;function gv(){if(as)return yr;as=1;var e=we(),t=yl();yr=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return yr}var vr,ss;function mv(){if(ss)return vr;ss=1;var e=we();vr=n;var t=e.constant(1);function n(i,o,a){return r(i,o||t,a||function(s){return i.outEdges(s)})}function r(i,o,a){var s={},c=i.nodes();return c.forEach(function(l){s[l]={},s[l][l]={distance:0},c.forEach(function(u){l!==u&&(s[l][u]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(u){var d=u.v===l?u.w:u.v,f=o(u);s[l][d]={distance:f,predecessor:l}})}),c.forEach(function(l){var u=s[l];c.forEach(function(d){var f=s[d];c.forEach(function(h){var x=f[l],y=u[h],g=f[h],p=x.distance+y.distance;p<g.distance&&(g.distance=p,g.predecessor=y.predecessor)})})}),s}return vr}var wr,us;function vl(){if(us)return wr;us=1;var e=we();wr=t,t.CycleException=n;function t(r){var i={},o={},a=[];function s(c){if(e.has(o,c))throw new n;e.has(i,c)||(o[c]=!0,i[c]=!0,e.each(r.predecessors(c),s),delete o[c],a.push(c))}if(e.each(r.sinks(),s),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,wr}var xr,cs;function yv(){if(cs)return xr;cs=1;var e=vl();xr=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return xr}var br,ls;function wl(){if(ls)return br;ls=1;var e=we();br=t;function t(r,i,o){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],c={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,o==="post",c,a,s)}),s}function n(r,i,o,a,s,c){e.has(a,i)||(a[i]=!0,o||c.push(i),e.each(s(i),function(l){n(r,l,o,a,s,c)}),o&&c.push(i))}return br}var _r,ds;function vv(){if(ds)return _r;ds=1;var e=wl();_r=t;function t(n,r){return e(n,r,"post")}return _r}var Er,fs;function wv(){if(fs)return Er;fs=1;var e=wl();Er=t;function t(n,r){return e(n,r,"pre")}return Er}var Nr,hs;function xv(){if(hs)return Nr;hs=1;var e=we(),t=Io(),n=gl();Nr=r;function r(i,o){var a=new t,s={},c=new n,l;function u(f){var h=f.v===l?f.w:f.v,x=c.priority(h);if(x!==void 0){var y=o(f);y<x&&(s[h]=l,c.decrease(h,y))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(f){c.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),c.decrease(i.nodes()[0],0);for(var d=!1;c.size()>0;){if(l=c.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(u)}return a}return Nr}var Sr,ps;function bv(){return ps||(ps=1,Sr={components:hv(),dijkstra:ml(),dijkstraAll:pv(),findCycles:gv(),floydWarshall:mv(),isAcyclic:yv(),postorder:vv(),preorder:wv(),prim:xv(),tarjan:yl(),topsort:vl()}),Sr}var Cr,gs;function _v(){if(gs)return Cr;gs=1;var e=dv();return Cr={Graph:e.Graph,json:fv(),alg:bv(),version:e.version},Cr}var kr,ms;function _e(){if(ms)return kr;ms=1;var e;if(typeof oo=="function")try{e=_v()}catch{}return e||(e=window.graphlib),kr=e,kr}var Rr,ys;function Ev(){if(ys)return Rr;ys=1;var e=Oe(),t=ao(),n=uo();function r(i){return function(o,a,s){var c=Object(o);if(!t(o)){var l=e(a,3);o=n(o),a=function(d){return l(c[d],d,c)}}var u=i(o,a,s);return u>-1?c[l?o[u]:u]:void 0}}return Rr=r,Rr}var Ir,vs;function Nv(){if(vs)return Ir;vs=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Ir=t,Ir}var Tr,ws;function Sv(){if(ws)return Tr;ws=1;var e=Nv(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Tr=n,Tr}var qr,xs;function Cv(){if(xs)return qr;xs=1;var e=Sv(),t=so(),n=Vu(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return qr=c,qr}var Mr,bs;function xl(){if(bs)return Mr;bs=1;var e=Cv(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return Mr=r,Mr}var Ar,_s;function kv(){if(_s)return Ar;_s=1;var e=xl();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Ar=t,Ar}var Pr,Es;function Rv(){if(Es)return Pr;Es=1;var e=Dd(),t=Oe(),n=kv(),r=Math.max;function i(o,a,s){var c=o==null?0:o.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(o,t(a,3),l)}return Pr=i,Pr}var Lr,Ns;function Iv(){if(Ns)return Lr;Ns=1;var e=Ev(),t=Rv(),n=e(t);return Lr=n,Lr}var Dr,Ss;function Tv(){if(Ss)return Dr;Ss=1;var e=$d(),t=Vd(),n=zd();function r(i,o){return i==null?i:e(i,t(o),n)}return Dr=r,Dr}var $r,Cs;function qv(){if(Cs)return $r;Cs=1;var e=Hd(),t=Lu(),n=Oe();function r(i,o){var a={};return o=n(o,3),t(i,function(s,c,l){e(a,c,o(s,c,l))}),a}return $r=r,$r}var Vr,ks;function To(){if(ks)return Vr;ks=1;var e=Vu();function t(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):i(c,l)))var l=c,u=s}return u}return Vr=t,Vr}var zr,Rs;function Mv(){if(Rs)return zr;Rs=1;function e(t,n){return t>n}return zr=e,zr}var Hr,Is;function Av(){if(Is)return Hr;Is=1;var e=To(),t=Mv(),n=zu();function r(i){return i&&i.length?e(i,n,t):void 0}return Hr=r,Hr}var Or,Ts;function Pv(){if(Ts)return Or;Ts=1;var e=Od(),t=Fd(),n=t(function(r,i,o){e(r,i,o)});return Or=n,Or}var Fr,qs;function bl(){if(qs)return Fr;qs=1;function e(t,n){return t<n}return Fr=e,Fr}var Br,Ms;function Lv(){if(Ms)return Br;Ms=1;var e=To(),t=bl(),n=zu();function r(i){return i&&i.length?e(i,n,t):void 0}return Br=r,Br}var Ur,As;function Dv(){if(As)return Ur;As=1;var e=To(),t=Oe(),n=bl();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return Ur=r,Ur}var Gr,Ps;function $v(){if(Ps)return Gr;Ps=1;var e=Bd(),t=function(){return e.Date.now()};return Gr=t,Gr}var Yr,Ls;function Vv(){if(Ls)return Yr;Ls=1;var e=Hu(),t=Ou(),n=Ud(),r=so(),i=Gd();function o(a,s,c,l){if(!r(a))return a;s=t(s,a);for(var u=-1,d=s.length,f=d-1,h=a;h!=null&&++u<d;){var x=i(s[u]),y=c;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(u!=f){var g=h[x];y=l?l(g,x,h):void 0,y===void 0&&(y=r(g)?g:n(s[u+1])?[]:{})}e(h,x,y),h=h[x]}return a}return Yr=o,Yr}var Xr,Ds;function zv(){if(Ds)return Xr;Ds=1;var e=Yd(),t=Vv(),n=Ou();function r(i,o,a){for(var s=-1,c=o.length,l={};++s<c;){var u=o[s],d=e(i,u);a(d,u)&&t(l,n(u,i),d)}return l}return Xr=r,Xr}var jr,$s;function Hv(){if($s)return jr;$s=1;var e=zv(),t=Xd();function n(r,i){return e(r,i,function(o,a){return t(r,a)})}return jr=n,jr}var Wr,Vs;function Ov(){if(Vs)return Wr;Vs=1;var e=Fu(),t=jd(),n=Wd();function r(i){return n(t(i,void 0,e),i+"")}return Wr=r,Wr}var Zr,zs;function Fv(){if(zs)return Zr;zs=1;var e=Hv(),t=Ov(),n=t(function(r,i){return r==null?{}:e(r,i)});return Zr=n,Zr}var Kr,Hs;function Bv(){if(Hs)return Kr;Hs=1;var e=Math.ceil,t=Math.max;function n(r,i,o,a){for(var s=-1,c=t(e((i-r)/(o||1)),0),l=Array(c);c--;)l[a?c:++s]=r,r+=o;return l}return Kr=n,Kr}var Qr,Os;function Uv(){if(Os)return Qr;Os=1;var e=Bv(),t=Zd(),n=xl();function r(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),e(o,a,s,i)}}return Qr=r,Qr}var Jr,Fs;function Gv(){if(Fs)return Jr;Fs=1;var e=Uv(),t=e();return Jr=t,Jr}var ei,Bs;function Yv(){if(Bs)return ei;Bs=1;var e=Kd(),t=0;function n(r){var i=++t;return e(r)+i}return ei=n,ei}var ti,Us;function Xv(){if(Us)return ti;Us=1;function e(t,n,r){for(var i=-1,o=t.length,a=n.length,s={};++i<o;){var c=i<a?n[i]:void 0;r(s,t[i],c)}return s}return ti=e,ti}var ni,Gs;function jv(){if(Gs)return ni;Gs=1;var e=Hu(),t=Xv();function n(r,i){return t(r||[],i||[],e)}return ni=n,ni}var ri,Ys;function ie(){if(Ys)return ri;Ys=1;var e;if(typeof oo=="function")try{e={cloneDeep:tf(),constant:$u(),defaults:ef(),each:ul(),filter:cl(),find:Iv(),flatten:Fu(),forEach:Ru(),forIn:Tv(),has:ll(),isUndefined:dl(),last:Jd(),map:fl(),mapValues:qv(),max:Av(),merge:Pv(),min:Lv(),minBy:Dv(),now:$v(),pick:Fv(),range:Gv(),reduce:hl(),sortBy:Qd(),uniqueId:Yv(),values:pl(),zipObject:jv()}}catch{}return e||(e=window._),ri=e,ri}var ii,Xs;function Wv(){if(Xs)return ii;Xs=1,ii=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,o=i._prev;o!==i;)r.push(JSON.stringify(o,n)),o=o._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return ii}var oi,js;function Zv(){if(js)return oi;js=1;var e=ie(),t=_e().Graph,n=Wv();oi=i;var r=e.constant(1);function i(l,u){if(l.nodeCount()<=1)return[];var d=s(l,u||r),f=o(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(h){return l.outEdges(h.v,h.w)}),!0)}function o(l,u,d){for(var f=[],h=u[u.length-1],x=u[0],y;l.nodeCount();){for(;y=x.dequeue();)a(l,u,d,y);for(;y=h.dequeue();)a(l,u,d,y);if(l.nodeCount()){for(var g=u.length-2;g>0;--g)if(y=u[g].dequeue(),y){f=f.concat(a(l,u,d,y,!0));break}}}return f}function a(l,u,d,f,h){var x=h?[]:void 0;return e.forEach(l.inEdges(f.v),function(y){var g=l.edge(y),p=l.node(y.v);h&&x.push({v:y.v,w:y.w}),p.out-=g,c(u,d,p)}),e.forEach(l.outEdges(f.v),function(y){var g=l.edge(y),p=y.w,w=l.node(p);w.in-=g,c(u,d,w)}),l.removeNode(f.v),x}function s(l,u){var d=new t,f=0,h=0;e.forEach(l.nodes(),function(g){d.setNode(g,{v:g,in:0,out:0})}),e.forEach(l.edges(),function(g){var p=d.edge(g.v,g.w)||0,w=u(g),b=p+w;d.setEdge(g.v,g.w,b),h=Math.max(h,d.node(g.v).out+=w),f=Math.max(f,d.node(g.w).in+=w)});var x=e.range(h+f+3).map(function(){return new n}),y=f+1;return e.forEach(d.nodes(),function(g){c(x,y,d.node(g))}),{graph:d,buckets:x,zeroIdx:y}}function c(l,u,d){d.out?d.in?l[d.out-d.in+u].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}return oi}var ai,Ws;function Kv(){if(Ws)return ai;Ws=1;var e=ie(),t=Zv();ai={run:n,undo:i};function n(o){var a=o.graph().acyclicer==="greedy"?t(o,s(o)):r(o);e.forEach(a,function(c){var l=o.edge(c);o.removeEdge(c),l.forwardName=c.name,l.reversed=!0,o.setEdge(c.w,c.v,l,e.uniqueId("rev"))});function s(c){return function(l){return c.edge(l).weight}}}function r(o){var a=[],s={},c={};function l(u){e.has(c,u)||(c[u]=!0,s[u]=!0,e.forEach(o.outEdges(u),function(d){e.has(s,d.w)?a.push(d):l(d.w)}),delete s[u])}return e.forEach(o.nodes(),l),a}function i(o){e.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var c=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,c)}})}return ai}var si,Zs;function he(){if(Zs)return si;Zs=1;var e=ie(),t=_e().Graph;si={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:c,normalizeRanks:l,removeEmptyRanks:u,addBorderNode:d,maxRank:f,partition:h,time:x,notime:y};function n(g,p,w,b){var v;do v=e.uniqueId(b);while(g.hasNode(v));return w.dummy=p,g.setNode(v,w),v}function r(g){var p=new t().setGraph(g.graph());return e.forEach(g.nodes(),function(w){p.setNode(w,g.node(w))}),e.forEach(g.edges(),function(w){var b=p.edge(w.v,w.w)||{weight:0,minlen:1},v=g.edge(w);p.setEdge(w.v,w.w,{weight:b.weight+v.weight,minlen:Math.max(b.minlen,v.minlen)})}),p}function i(g){var p=new t({multigraph:g.isMultigraph()}).setGraph(g.graph());return e.forEach(g.nodes(),function(w){g.children(w).length||p.setNode(w,g.node(w))}),e.forEach(g.edges(),function(w){p.setEdge(w,g.edge(w))}),p}function o(g){var p=e.map(g.nodes(),function(w){var b={};return e.forEach(g.outEdges(w),function(v){b[v.w]=(b[v.w]||0)+g.edge(v).weight}),b});return e.zipObject(g.nodes(),p)}function a(g){var p=e.map(g.nodes(),function(w){var b={};return e.forEach(g.inEdges(w),function(v){b[v.v]=(b[v.v]||0)+g.edge(v).weight}),b});return e.zipObject(g.nodes(),p)}function s(g,p){var w=g.x,b=g.y,v=p.x-w,_=p.y-b,E=g.width/2,k=g.height/2;if(!v&&!_)throw new Error("Not possible to find intersection inside of the rectangle");var A,R;return Math.abs(_)*E>Math.abs(v)*k?(_<0&&(k=-k),A=k*v/_,R=k):(v<0&&(E=-E),A=E,R=E*_/v),{x:w+A,y:b+R}}function c(g){var p=e.map(e.range(f(g)+1),function(){return[]});return e.forEach(g.nodes(),function(w){var b=g.node(w),v=b.rank;e.isUndefined(v)||(p[v][b.order]=w)}),p}function l(g){var p=e.min(e.map(g.nodes(),function(w){return g.node(w).rank}));e.forEach(g.nodes(),function(w){var b=g.node(w);e.has(b,"rank")&&(b.rank-=p)})}function u(g){var p=e.min(e.map(g.nodes(),function(_){return g.node(_).rank})),w=[];e.forEach(g.nodes(),function(_){var E=g.node(_).rank-p;w[E]||(w[E]=[]),w[E].push(_)});var b=0,v=g.graph().nodeRankFactor;e.forEach(w,function(_,E){e.isUndefined(_)&&E%v!==0?--b:b&&e.forEach(_,function(k){g.node(k).rank+=b})})}function d(g,p,w,b){var v={width:0,height:0};return arguments.length>=4&&(v.rank=w,v.order=b),n(g,"border",v,p)}function f(g){return e.max(e.map(g.nodes(),function(p){var w=g.node(p).rank;if(!e.isUndefined(w))return w}))}function h(g,p){var w={lhs:[],rhs:[]};return e.forEach(g,function(b){p(b)?w.lhs.push(b):w.rhs.push(b)}),w}function x(g,p){var w=e.now();try{return p()}finally{console.log(g+" time: "+(e.now()-w)+"ms")}}function y(g,p){return p()}return si}var ui,Ks;function Qv(){if(Ks)return ui;Ks=1;var e=ie(),t=he();ui={run:n,undo:i};function n(o){o.graph().dummyChains=[],e.forEach(o.edges(),function(a){r(o,a)})}function r(o,a){var s=a.v,c=o.node(s).rank,l=a.w,u=o.node(l).rank,d=a.name,f=o.edge(a),h=f.labelRank;if(u!==c+1){o.removeEdge(a);var x,y,g;for(g=0,++c;c<u;++g,++c)f.points=[],y={width:0,height:0,edgeLabel:f,edgeObj:a,rank:c},x=t.addDummyNode(o,"edge",y,"_d"),c===h&&(y.width=f.width,y.height=f.height,y.dummy="edge-label",y.labelpos=f.labelpos),o.setEdge(s,x,{weight:f.weight},d),g===0&&o.graph().dummyChains.push(x),s=x;o.setEdge(s,l,{weight:f.weight},d)}}function i(o){e.forEach(o.graph().dummyChains,function(a){var s=o.node(a),c=s.edgeLabel,l;for(o.setEdge(s.edgeObj,c);s.dummy;)l=o.successors(a)[0],o.removeNode(a),c.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(c.x=s.x,c.y=s.y,c.width=s.width,c.height=s.height),a=l,s=o.node(a)})}return ui}var ci,Qs;function pn(){if(Qs)return ci;Qs=1;var e=ie();ci={longestPath:t,slack:n};function t(r){var i={};function o(a){var s=r.node(a);if(e.has(i,a))return s.rank;i[a]=!0;var c=e.min(e.map(r.outEdges(a),function(l){return o(l.w)-r.edge(l).minlen}));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),s.rank=c}e.forEach(r.sources(),o)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return ci}var li,Js;function _l(){if(Js)return li;Js=1;var e=ie(),t=_e().Graph,n=pn().slack;li=r;function r(s){var c=new t({directed:!1}),l=s.nodes()[0],u=s.nodeCount();c.setNode(l,{});for(var d,f;i(c,s)<u;)d=o(c,s),f=c.hasNode(d.v)?n(s,d):-n(s,d),a(c,s,f);return c}function i(s,c){function l(u){e.forEach(c.nodeEdges(u),function(d){var f=d.v,h=u===f?d.w:f;!s.hasNode(h)&&!n(c,d)&&(s.setNode(h,{}),s.setEdge(u,h,{}),l(h))})}return e.forEach(s.nodes(),l),s.nodeCount()}function o(s,c){return e.minBy(c.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return n(c,l)})}function a(s,c,l){e.forEach(s.nodes(),function(u){c.node(u).rank+=l})}return li}var di,eu;function Jv(){if(eu)return di;eu=1;var e=ie(),t=_l(),n=pn().slack,r=pn().longestPath,i=_e().alg.preorder,o=_e().alg.postorder,a=he().simplify;di=s,s.initLowLimValues=d,s.initCutValues=c,s.calcCutValue=u,s.leaveEdge=h,s.enterEdge=x,s.exchangeEdges=y;function s(b){b=a(b),r(b);var v=t(b);d(v),c(v,b);for(var _,E;_=h(v);)E=x(v,b,_),y(v,b,_,E)}function c(b,v){var _=o(b,b.nodes());_=_.slice(0,_.length-1),e.forEach(_,function(E){l(b,v,E)})}function l(b,v,_){var E=b.node(_),k=E.parent;b.edge(_,k).cutvalue=u(b,v,_)}function u(b,v,_){var E=b.node(_),k=E.parent,A=!0,R=v.edge(_,k),T=0;return R||(A=!1,R=v.edge(k,_)),T=R.weight,e.forEach(v.nodeEdges(_),function(L){var z=L.v===_,M=z?L.w:L.v;if(M!==k){var m=z===A,C=v.edge(L).weight;if(T+=m?C:-C,p(b,_,M)){var S=b.edge(_,M).cutvalue;T+=m?-S:S}}}),T}function d(b,v){arguments.length<2&&(v=b.nodes()[0]),f(b,{},1,v)}function f(b,v,_,E,k){var A=_,R=b.node(E);return v[E]=!0,e.forEach(b.neighbors(E),function(T){e.has(v,T)||(_=f(b,v,_,T,E))}),R.low=A,R.lim=_++,k?R.parent=k:delete R.parent,_}function h(b){return e.find(b.edges(),function(v){return b.edge(v).cutvalue<0})}function x(b,v,_){var E=_.v,k=_.w;v.hasEdge(E,k)||(E=_.w,k=_.v);var A=b.node(E),R=b.node(k),T=A,L=!1;A.lim>R.lim&&(T=R,L=!0);var z=e.filter(v.edges(),function(M){return L===w(b,b.node(M.v),T)&&L!==w(b,b.node(M.w),T)});return e.minBy(z,function(M){return n(v,M)})}function y(b,v,_,E){var k=_.v,A=_.w;b.removeEdge(k,A),b.setEdge(E.v,E.w,{}),d(b),c(b,v),g(b,v)}function g(b,v){var _=e.find(b.nodes(),function(k){return!v.node(k).parent}),E=i(b,_);E=E.slice(1),e.forEach(E,function(k){var A=b.node(k).parent,R=v.edge(k,A),T=!1;R||(R=v.edge(A,k),T=!0),v.node(k).rank=v.node(A).rank+(T?R.minlen:-R.minlen)})}function p(b,v,_){return b.hasEdge(v,_)}function w(b,v,_){return _.low<=v.lim&&v.lim<=_.lim}return di}var fi,tu;function e0(){if(tu)return fi;tu=1;var e=pn(),t=e.longestPath,n=_l(),r=Jv();fi=i;function i(c){switch(c.graph().ranker){case"network-simplex":s(c);break;case"tight-tree":a(c);break;case"longest-path":o(c);break;default:s(c)}}var o=t;function a(c){t(c),n(c)}function s(c){r(c)}return fi}var hi,nu;function t0(){if(nu)return hi;nu=1;var e=ie();hi=t;function t(i){var o=r(i);e.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),c=s.edgeObj,l=n(i,o,c.v,c.w),u=l.path,d=l.lca,f=0,h=u[f],x=!0;a!==c.w;){if(s=i.node(a),x){for(;(h=u[f])!==d&&i.node(h).maxRank<s.rank;)f++;h===d&&(x=!1)}if(!x){for(;f<u.length-1&&i.node(h=u[f+1]).minRank<=s.rank;)f++;h=u[f]}i.setParent(a,h),a=i.successors(a)[0]}})}function n(i,o,a,s){var c=[],l=[],u=Math.min(o[a].low,o[s].low),d=Math.max(o[a].lim,o[s].lim),f,h;f=a;do f=i.parent(f),c.push(f);while(f&&(o[f].low>u||d>o[f].lim));for(h=f,f=s;(f=i.parent(f))!==h;)l.push(f);return{path:c.concat(l.reverse()),lca:h}}function r(i){var o={},a=0;function s(c){var l=a;e.forEach(i.children(c),s),o[c]={low:l,lim:a++}}return e.forEach(i.children(),s),o}return hi}var pi,ru;function n0(){if(ru)return pi;ru=1;var e=ie(),t=he();pi={run:n,cleanup:a};function n(s){var c=t.addDummyNode(s,"root",{},"_root"),l=i(s),u=e.max(e.values(l))-1,d=2*u+1;s.graph().nestingRoot=c,e.forEach(s.edges(),function(h){s.edge(h).minlen*=d});var f=o(s)+1;e.forEach(s.children(),function(h){r(s,c,d,f,u,l,h)}),s.graph().nodeRankFactor=d}function r(s,c,l,u,d,f,h){var x=s.children(h);if(!x.length){h!==c&&s.setEdge(c,h,{weight:0,minlen:l});return}var y=t.addBorderNode(s,"_bt"),g=t.addBorderNode(s,"_bb"),p=s.node(h);s.setParent(y,h),p.borderTop=y,s.setParent(g,h),p.borderBottom=g,e.forEach(x,function(w){r(s,c,l,u,d,f,w);var b=s.node(w),v=b.borderTop?b.borderTop:w,_=b.borderBottom?b.borderBottom:w,E=b.borderTop?u:2*u,k=v!==_?1:d-f[h]+1;s.setEdge(y,v,{weight:E,minlen:k,nestingEdge:!0}),s.setEdge(_,g,{weight:E,minlen:k,nestingEdge:!0})}),s.parent(h)||s.setEdge(c,y,{weight:0,minlen:d+f[h]})}function i(s){var c={};function l(u,d){var f=s.children(u);f&&f.length&&e.forEach(f,function(h){l(h,d+1)}),c[u]=d}return e.forEach(s.children(),function(u){l(u,1)}),c}function o(s){return e.reduce(s.edges(),function(c,l){return c+s.edge(l).weight},0)}function a(s){var c=s.graph();s.removeNode(c.nestingRoot),delete c.nestingRoot,e.forEach(s.edges(),function(l){var u=s.edge(l);u.nestingEdge&&s.removeEdge(l)})}return pi}var gi,iu;function r0(){if(iu)return gi;iu=1;var e=ie(),t=he();gi=n;function n(i){function o(a){var s=i.children(a),c=i.node(a);if(s.length&&e.forEach(s,o),e.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var l=c.minRank,u=c.maxRank+1;l<u;++l)r(i,"borderLeft","_bl",a,c,l),r(i,"borderRight","_br",a,c,l)}}e.forEach(i.children(),o)}function r(i,o,a,s,c,l){var u={width:0,height:0,rank:l,borderType:o},d=c[o][l-1],f=t.addDummyNode(i,"border",u,a);c[o][l]=f,i.setParent(f,s),d&&i.setEdge(d,f,{weight:1})}return gi}var mi,ou;function i0(){if(ou)return mi;ou=1;var e=ie();mi={adjust:t,undo:n};function t(l){var u=l.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&r(l)}function n(l){var u=l.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&o(l),(u==="lr"||u==="rl")&&(s(l),r(l))}function r(l){e.forEach(l.nodes(),function(u){i(l.node(u))}),e.forEach(l.edges(),function(u){i(l.edge(u))})}function i(l){var u=l.width;l.width=l.height,l.height=u}function o(l){e.forEach(l.nodes(),function(u){a(l.node(u))}),e.forEach(l.edges(),function(u){var d=l.edge(u);e.forEach(d.points,a),e.has(d,"y")&&a(d)})}function a(l){l.y=-l.y}function s(l){e.forEach(l.nodes(),function(u){c(l.node(u))}),e.forEach(l.edges(),function(u){var d=l.edge(u);e.forEach(d.points,c),e.has(d,"x")&&c(d)})}function c(l){var u=l.x;l.x=l.y,l.y=u}return mi}var yi,au;function o0(){if(au)return yi;au=1;var e=ie();yi=t;function t(n){var r={},i=e.filter(n.nodes(),function(l){return!n.children(l).length}),o=e.max(e.map(i,function(l){return n.node(l).rank})),a=e.map(e.range(o+1),function(){return[]});function s(l){if(!e.has(r,l)){r[l]=!0;var u=n.node(l);a[u.rank].push(l),e.forEach(n.successors(l),s)}}var c=e.sortBy(i,function(l){return n.node(l).rank});return e.forEach(c,s),a}return yi}var vi,su;function a0(){if(su)return vi;su=1;var e=ie();vi=t;function t(r,i){for(var o=0,a=1;a<i.length;++a)o+=n(r,i[a-1],i[a]);return o}function n(r,i,o){for(var a=e.zipObject(o,e.map(o,function(f,h){return h})),s=e.flatten(e.map(i,function(f){return e.sortBy(e.map(r.outEdges(f),function(h){return{pos:a[h.w],weight:r.edge(h).weight}}),"pos")}),!0),c=1;c<o.length;)c<<=1;var l=2*c-1;c-=1;var u=e.map(new Array(l),function(){return 0}),d=0;return e.forEach(s.forEach(function(f){var h=f.pos+c;u[h]+=f.weight;for(var x=0;h>0;)h%2&&(x+=u[h+1]),h=h-1>>1,u[h]+=f.weight;d+=f.weight*x})),d}return vi}var wi,uu;function s0(){if(uu)return wi;uu=1;var e=ie();wi=t;function t(n,r){return e.map(r,function(i){var o=n.inEdges(i);if(o.length){var a=e.reduce(o,function(s,c){var l=n.edge(c),u=n.node(c.v);return{sum:s.sum+l.weight*u.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return wi}var xi,cu;function u0(){if(cu)return xi;cu=1;var e=ie();xi=t;function t(i,o){var a={};e.forEach(i,function(c,l){var u=a[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:l};e.isUndefined(c.barycenter)||(u.barycenter=c.barycenter,u.weight=c.weight)}),e.forEach(o.edges(),function(c){var l=a[c.v],u=a[c.w];!e.isUndefined(l)&&!e.isUndefined(u)&&(u.indegree++,l.out.push(a[c.w]))});var s=e.filter(a,function(c){return!c.indegree});return n(s)}function n(i){var o=[];function a(l){return function(u){u.merged||(e.isUndefined(u.barycenter)||e.isUndefined(l.barycenter)||u.barycenter>=l.barycenter)&&r(l,u)}}function s(l){return function(u){u.in.push(l),--u.indegree===0&&i.push(u)}}for(;i.length;){var c=i.pop();o.push(c),e.forEach(c.in.reverse(),a(c)),e.forEach(c.out,s(c))}return e.map(e.filter(o,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function r(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return xi}var bi,lu;function c0(){if(lu)return bi;lu=1;var e=ie(),t=he();bi=n;function n(o,a){var s=t.partition(o,function(y){return e.has(y,"barycenter")}),c=s.lhs,l=e.sortBy(s.rhs,function(y){return-y.i}),u=[],d=0,f=0,h=0;c.sort(i(!!a)),h=r(u,l,h),e.forEach(c,function(y){h+=y.vs.length,u.push(y.vs),d+=y.barycenter*y.weight,f+=y.weight,h=r(u,l,h)});var x={vs:e.flatten(u,!0)};return f&&(x.barycenter=d/f,x.weight=f),x}function r(o,a,s){for(var c;a.length&&(c=e.last(a)).i<=s;)a.pop(),o.push(c.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return bi}var _i,du;function l0(){if(du)return _i;du=1;var e=ie(),t=s0(),n=u0(),r=c0();_i=i;function i(s,c,l,u){var d=s.children(c),f=s.node(c),h=f?f.borderLeft:void 0,x=f?f.borderRight:void 0,y={};h&&(d=e.filter(d,function(_){return _!==h&&_!==x}));var g=t(s,d);e.forEach(g,function(_){if(s.children(_.v).length){var E=i(s,_.v,l,u);y[_.v]=E,e.has(E,"barycenter")&&a(_,E)}});var p=n(g,l);o(p,y);var w=r(p,u);if(h&&(w.vs=e.flatten([h,w.vs,x],!0),s.predecessors(h).length)){var b=s.node(s.predecessors(h)[0]),v=s.node(s.predecessors(x)[0]);e.has(w,"barycenter")||(w.barycenter=0,w.weight=0),w.barycenter=(w.barycenter*w.weight+b.order+v.order)/(w.weight+2),w.weight+=2}return w}function o(s,c){e.forEach(s,function(l){l.vs=e.flatten(l.vs.map(function(u){return c[u]?c[u].vs:u}),!0)})}function a(s,c){e.isUndefined(s.barycenter)?(s.barycenter=c.barycenter,s.weight=c.weight):(s.barycenter=(s.barycenter*s.weight+c.barycenter*c.weight)/(s.weight+c.weight),s.weight+=c.weight)}return _i}var Ei,fu;function d0(){if(fu)return Ei;fu=1;var e=ie(),t=_e().Graph;Ei=n;function n(i,o,a){var s=r(i),c=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return e.forEach(i.nodes(),function(l){var u=i.node(l),d=i.parent(l);(u.rank===o||u.minRank<=o&&o<=u.maxRank)&&(c.setNode(l),c.setParent(l,d||s),e.forEach(i[a](l),function(f){var h=f.v===l?f.w:f.v,x=c.edge(h,l),y=e.isUndefined(x)?0:x.weight;c.setEdge(h,l,{weight:i.edge(f).weight+y})}),e.has(u,"minRank")&&c.setNode(l,{borderLeft:u.borderLeft[o],borderRight:u.borderRight[o]}))}),c}function r(i){for(var o;i.hasNode(o=e.uniqueId("_root")););return o}return Ei}var Ni,hu;function f0(){if(hu)return Ni;hu=1;var e=ie();Ni=t;function t(n,r,i){var o={},a;e.forEach(i,function(s){for(var c=n.parent(s),l,u;c;){if(l=n.parent(c),l?(u=o[l],o[l]=c):(u=a,a=c),u&&u!==c){r.setEdge(u,c);return}c=l}})}return Ni}var Si,pu;function h0(){if(pu)return Si;pu=1;var e=ie(),t=o0(),n=a0(),r=l0(),i=d0(),o=f0(),a=_e().Graph,s=he();Si=c;function c(f){var h=s.maxRank(f),x=l(f,e.range(1,h+1),"inEdges"),y=l(f,e.range(h-1,-1,-1),"outEdges"),g=t(f);d(f,g);for(var p=Number.POSITIVE_INFINITY,w,b=0,v=0;v<4;++b,++v){u(b%2?x:y,b%4>=2),g=s.buildLayerMatrix(f);var _=n(f,g);_<p&&(v=0,w=e.cloneDeep(g),p=_)}d(f,w)}function l(f,h,x){return e.map(h,function(y){return i(f,y,x)})}function u(f,h){var x=new a;e.forEach(f,function(y){var g=y.graph().root,p=r(y,g,x,h);e.forEach(p.vs,function(w,b){y.node(w).order=b}),o(y,x,p.vs)})}function d(f,h){e.forEach(h,function(x){e.forEach(x,function(y,g){f.node(y).order=g})})}return Si}var Ci,gu;function p0(){if(gu)return Ci;gu=1;var e=ie(),t=_e().Graph,n=he();Ci={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:c,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:h};function r(p,w){var b={};function v(_,E){var k=0,A=0,R=_.length,T=e.last(E);return e.forEach(E,function(L,z){var M=o(p,L),m=M?p.node(M).order:R;(M||L===T)&&(e.forEach(E.slice(A,z+1),function(C){e.forEach(p.predecessors(C),function(S){var D=p.node(S),H=D.order;(H<k||m<H)&&!(D.dummy&&p.node(C).dummy)&&a(b,S,C)})}),A=z+1,k=m)}),E}return e.reduce(w,v),b}function i(p,w){var b={};function v(E,k,A,R,T){var L;e.forEach(e.range(k,A),function(z){L=E[z],p.node(L).dummy&&e.forEach(p.predecessors(L),function(M){var m=p.node(M);m.dummy&&(m.order<R||m.order>T)&&a(b,M,L)})})}function _(E,k){var A=-1,R,T=0;return e.forEach(k,function(L,z){if(p.node(L).dummy==="border"){var M=p.predecessors(L);M.length&&(R=p.node(M[0]).order,v(k,T,z,A,R),T=z,A=R)}v(k,T,k.length,R,E.length)}),k}return e.reduce(w,_),b}function o(p,w){if(p.node(w).dummy)return e.find(p.predecessors(w),function(b){return p.node(b).dummy})}function a(p,w,b){if(w>b){var v=w;w=b,b=v}var _=p[w];_||(p[w]=_={}),_[b]=!0}function s(p,w,b){if(w>b){var v=w;w=b,b=v}return e.has(p[w],b)}function c(p,w,b,v){var _={},E={},k={};return e.forEach(w,function(A){e.forEach(A,function(R,T){_[R]=R,E[R]=R,k[R]=T})}),e.forEach(w,function(A){var R=-1;e.forEach(A,function(T){var L=v(T);if(L.length){L=e.sortBy(L,function(S){return k[S]});for(var z=(L.length-1)/2,M=Math.floor(z),m=Math.ceil(z);M<=m;++M){var C=L[M];E[T]===T&&R<k[C]&&!s(b,T,C)&&(E[C]=T,E[T]=_[T]=_[C],R=k[C])}}})}),{root:_,align:E}}function l(p,w,b,v,_){var E={},k=u(p,w,b,_),A=_?"borderLeft":"borderRight";function R(z,M){for(var m=k.nodes(),C=m.pop(),S={};C;)S[C]?z(C):(S[C]=!0,m.push(C),m=m.concat(M(C))),C=m.pop()}function T(z){E[z]=k.inEdges(z).reduce(function(M,m){return Math.max(M,E[m.v]+k.edge(m))},0)}function L(z){var M=k.outEdges(z).reduce(function(C,S){return Math.min(C,E[S.w]-k.edge(S))},Number.POSITIVE_INFINITY),m=p.node(z);M!==Number.POSITIVE_INFINITY&&m.borderType!==A&&(E[z]=Math.max(E[z],M))}return R(T,k.predecessors.bind(k)),R(L,k.successors.bind(k)),e.forEach(v,function(z){E[z]=E[b[z]]}),E}function u(p,w,b,v){var _=new t,E=p.graph(),k=y(E.nodesep,E.edgesep,v);return e.forEach(w,function(A){var R;e.forEach(A,function(T){var L=b[T];if(_.setNode(L),R){var z=b[R],M=_.edge(z,L);_.setEdge(z,L,Math.max(k(p,T,R),M||0))}R=T})}),_}function d(p,w){return e.minBy(e.values(w),function(b){var v=Number.NEGATIVE_INFINITY,_=Number.POSITIVE_INFINITY;return e.forIn(b,function(E,k){var A=g(p,k)/2;v=Math.max(E+A,v),_=Math.min(E-A,_)}),v-_})}function f(p,w){var b=e.values(w),v=e.min(b),_=e.max(b);e.forEach(["u","d"],function(E){e.forEach(["l","r"],function(k){var A=E+k,R=p[A],T;if(R!==w){var L=e.values(R);T=k==="l"?v-e.min(L):_-e.max(L),T&&(p[A]=e.mapValues(R,function(z){return z+T}))}})})}function h(p,w){return e.mapValues(p.ul,function(b,v){if(w)return p[w.toLowerCase()][v];var _=e.sortBy(e.map(p,v));return(_[1]+_[2])/2})}function x(p){var w=n.buildLayerMatrix(p),b=e.merge(r(p,w),i(p,w)),v={},_;e.forEach(["u","d"],function(k){_=k==="u"?w:e.values(w).reverse(),e.forEach(["l","r"],function(A){A==="r"&&(_=e.map(_,function(z){return e.values(z).reverse()}));var R=(k==="u"?p.predecessors:p.successors).bind(p),T=c(p,_,b,R),L=l(p,_,T.root,T.align,A==="r");A==="r"&&(L=e.mapValues(L,function(z){return-z})),v[k+A]=L})});var E=d(p,v);return f(v,E),h(v,p.graph().align)}function y(p,w,b){return function(v,_,E){var k=v.node(_),A=v.node(E),R=0,T;if(R+=k.width/2,e.has(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":T=-k.width/2;break;case"r":T=k.width/2;break}if(T&&(R+=b?T:-T),T=0,R+=(k.dummy?w:p)/2,R+=(A.dummy?w:p)/2,R+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":T=A.width/2;break;case"r":T=-A.width/2;break}return T&&(R+=b?T:-T),T=0,R}}function g(p,w){return p.node(w).width}return Ci}var ki,mu;function g0(){if(mu)return ki;mu=1;var e=ie(),t=he(),n=p0().positionX;ki=r;function r(o){o=t.asNonCompoundGraph(o),i(o),e.forEach(n(o),function(a,s){o.node(s).x=a})}function i(o){var a=t.buildLayerMatrix(o),s=o.graph().ranksep,c=0;e.forEach(a,function(l){var u=e.max(e.map(l,function(d){return o.node(d).height}));e.forEach(l,function(d){o.node(d).y=c+u/2}),c+=u+s})}return ki}var Ri,yu;function m0(){if(yu)return Ri;yu=1;var e=ie(),t=Kv(),n=Qv(),r=e0(),i=he().normalizeRanks,o=t0(),a=he().removeEmptyRanks,s=n0(),c=r0(),l=i0(),u=h0(),d=g0(),f=he(),h=_e().Graph;Ri=x;function x(N,P){var $=P&&P.debugTiming?f.time:f.notime;$("layout",function(){var B=$("  buildLayoutGraph",function(){return R(N)});$("  runLayout",function(){y(B,$)}),$("  updateInputGraph",function(){g(N,B)})})}function y(N,P){P("    makeSpaceForEdgeLabels",function(){T(N)}),P("    removeSelfEdges",function(){I(N)}),P("    acyclic",function(){t.run(N)}),P("    nestingGraph.run",function(){s.run(N)}),P("    rank",function(){r(f.asNonCompoundGraph(N))}),P("    injectEdgeLabelProxies",function(){L(N)}),P("    removeEmptyRanks",function(){a(N)}),P("    nestingGraph.cleanup",function(){s.cleanup(N)}),P("    normalizeRanks",function(){i(N)}),P("    assignRankMinMax",function(){z(N)}),P("    removeEdgeLabelProxies",function(){M(N)}),P("    normalize.run",function(){n.run(N)}),P("    parentDummyChains",function(){o(N)}),P("    addBorderSegments",function(){c(N)}),P("    order",function(){u(N)}),P("    insertSelfEdges",function(){O(N)}),P("    adjustCoordinateSystem",function(){l.adjust(N)}),P("    position",function(){d(N)}),P("    positionSelfEdges",function(){F(N)}),P("    removeBorderNodes",function(){H(N)}),P("    normalize.undo",function(){n.undo(N)}),P("    fixupEdgeLabelCoords",function(){S(N)}),P("    undoCoordinateSystem",function(){l.undo(N)}),P("    translateGraph",function(){m(N)}),P("    assignNodeIntersects",function(){C(N)}),P("    reversePoints",function(){D(N)}),P("    acyclic.undo",function(){t.undo(N)})}function g(N,P){e.forEach(N.nodes(),function($){var B=N.node($),Y=P.node($);B&&(B.x=Y.x,B.y=Y.y,P.children($).length&&(B.width=Y.width,B.height=Y.height))}),e.forEach(N.edges(),function($){var B=N.edge($),Y=P.edge($);B.points=Y.points,e.has(Y,"x")&&(B.x=Y.x,B.y=Y.y)}),N.graph().width=P.graph().width,N.graph().height=P.graph().height}var p=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],v=["width","height"],_={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function R(N){var P=new h({multigraph:!0,compound:!0}),$=G(N.graph());return P.setGraph(e.merge({},w,U($,p),e.pick($,b))),e.forEach(N.nodes(),function(B){var Y=G(N.node(B));P.setNode(B,e.defaults(U(Y,v),_)),P.setParent(B,N.parent(B))}),e.forEach(N.edges(),function(B){var Y=G(N.edge(B));P.setEdge(B,e.merge({},k,U(Y,E),e.pick(Y,A)))}),P}function T(N){var P=N.graph();P.ranksep/=2,e.forEach(N.edges(),function($){var B=N.edge($);B.minlen*=2,B.labelpos.toLowerCase()!=="c"&&(P.rankdir==="TB"||P.rankdir==="BT"?B.width+=B.labeloffset:B.height+=B.labeloffset)})}function L(N){e.forEach(N.edges(),function(P){var $=N.edge(P);if($.width&&$.height){var B=N.node(P.v),Y=N.node(P.w),Z={rank:(Y.rank-B.rank)/2+B.rank,e:P};f.addDummyNode(N,"edge-proxy",Z,"_ep")}})}function z(N){var P=0;e.forEach(N.nodes(),function($){var B=N.node($);B.borderTop&&(B.minRank=N.node(B.borderTop).rank,B.maxRank=N.node(B.borderBottom).rank,P=e.max(P,B.maxRank))}),N.graph().maxRank=P}function M(N){e.forEach(N.nodes(),function(P){var $=N.node(P);$.dummy==="edge-proxy"&&(N.edge($.e).labelRank=$.rank,N.removeNode(P))})}function m(N){var P=Number.POSITIVE_INFINITY,$=0,B=Number.POSITIVE_INFINITY,Y=0,Z=N.graph(),K=Z.marginx||0,ne=Z.marginy||0;function ce(re){var ee=re.x,te=re.y,ge=re.width,J=re.height;P=Math.min(P,ee-ge/2),$=Math.max($,ee+ge/2),B=Math.min(B,te-J/2),Y=Math.max(Y,te+J/2)}e.forEach(N.nodes(),function(re){ce(N.node(re))}),e.forEach(N.edges(),function(re){var ee=N.edge(re);e.has(ee,"x")&&ce(ee)}),P-=K,B-=ne,e.forEach(N.nodes(),function(re){var ee=N.node(re);ee.x-=P,ee.y-=B}),e.forEach(N.edges(),function(re){var ee=N.edge(re);e.forEach(ee.points,function(te){te.x-=P,te.y-=B}),e.has(ee,"x")&&(ee.x-=P),e.has(ee,"y")&&(ee.y-=B)}),Z.width=$-P+K,Z.height=Y-B+ne}function C(N){e.forEach(N.edges(),function(P){var $=N.edge(P),B=N.node(P.v),Y=N.node(P.w),Z,K;$.points?(Z=$.points[0],K=$.points[$.points.length-1]):($.points=[],Z=Y,K=B),$.points.unshift(f.intersectRect(B,Z)),$.points.push(f.intersectRect(Y,K))})}function S(N){e.forEach(N.edges(),function(P){var $=N.edge(P);if(e.has($,"x"))switch(($.labelpos==="l"||$.labelpos==="r")&&($.width-=$.labeloffset),$.labelpos){case"l":$.x-=$.width/2+$.labeloffset;break;case"r":$.x+=$.width/2+$.labeloffset;break}})}function D(N){e.forEach(N.edges(),function(P){var $=N.edge(P);$.reversed&&$.points.reverse()})}function H(N){e.forEach(N.nodes(),function(P){if(N.children(P).length){var $=N.node(P),B=N.node($.borderTop),Y=N.node($.borderBottom),Z=N.node(e.last($.borderLeft)),K=N.node(e.last($.borderRight));$.width=Math.abs(K.x-Z.x),$.height=Math.abs(Y.y-B.y),$.x=Z.x+$.width/2,$.y=B.y+$.height/2}}),e.forEach(N.nodes(),function(P){N.node(P).dummy==="border"&&N.removeNode(P)})}function I(N){e.forEach(N.edges(),function(P){if(P.v===P.w){var $=N.node(P.v);$.selfEdges||($.selfEdges=[]),$.selfEdges.push({e:P,label:N.edge(P)}),N.removeEdge(P)}})}function O(N){var P=f.buildLayerMatrix(N);e.forEach(P,function($){var B=0;e.forEach($,function(Y,Z){var K=N.node(Y);K.order=Z+B,e.forEach(K.selfEdges,function(ne){f.addDummyNode(N,"selfedge",{width:ne.label.width,height:ne.label.height,rank:K.rank,order:Z+ ++B,e:ne.e,label:ne.label},"_se")}),delete K.selfEdges})})}function F(N){e.forEach(N.nodes(),function(P){var $=N.node(P);if($.dummy==="selfedge"){var B=N.node($.e.v),Y=B.x+B.width/2,Z=B.y,K=$.x-Y,ne=B.height/2;N.setEdge($.e,$.label),N.removeNode(P),$.label.points=[{x:Y+2*K/3,y:Z-ne},{x:Y+5*K/6,y:Z-ne},{x:Y+K,y:Z},{x:Y+5*K/6,y:Z+ne},{x:Y+2*K/3,y:Z+ne}],$.label.x=$.x,$.label.y=$.y}})}function U(N,P){return e.mapValues(e.pick(N,P),Number)}function G(N){var P={};return e.forEach(N,function($,B){P[B.toLowerCase()]=$}),P}return Ri}var Ii,vu;function y0(){if(vu)return Ii;vu=1;var e=ie(),t=he(),n=_e().Graph;Ii={debugOrdering:r};function r(i){var o=t.buildLayerMatrix(i),a=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),e.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),e.forEach(o,function(s,c){var l="layer"+c;a.setNode(l,{rank:"same"}),e.reduce(s,function(u,d){return a.setEdge(u,d,{style:"invis"}),d})}),a}return Ii}var Ti,wu;function v0(){return wu||(wu=1,Ti="0.8.5"),Ti}var qi,xu;function w0(){return xu||(xu=1,qi={graphlib:_e(),layout:m0(),debug:y0(),util:{time:he().time,notime:he().notime},version:v0()}),qi}var x0=w0();const El=ku(x0),b0=()=>X.jsxs(X.Fragment,{children:[X.jsx(Pi,{variant:"smallText1",className:"description",children:"Undefined"}),X.jsx(nf,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),ro=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return q.useMemo(()=>X.jsxs(X.Fragment,{children:[X.jsx("div",{children:X.jsx(io,{icon:"fileOutlined"})}),X.jsx("span",{children:n})]}),[n])};try{ro.displayName="EntityPlaceholderNodeLabel",ro.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var de=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(de||{});const gn=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=X.jsx(Ji,{...n});break;case"EntityPlaceholderNode":r=X.jsx(ro,{...n});break;case"ExternalNode":r=X.jsx(no,{...n});break;case"ActivityNode":r=X.jsx(Ki,{...n});break;case"ExpandNode":r=X.jsx(eo,{...n});break;case"UndefinedNode":r=X.jsx(b0,{});break;default:r=X.jsxs("p",{children:["Unrecognized node type: ",t]});break}const i={label:r,props:n,type:t};return{id:Le(e),position:{x:100,y:100},data:i,connectable:!1,draggable:!1,className:`${t}`}},Nl=(e,t)=>{const n=Le(e),r=Le(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:qe.SimpleBezier,markerEnd:{type:Vt.ArrowClosed}}},Le=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},ft=new El.graphlib.Graph;ft.setDefaultEdgeLabel(()=>({}));const bu=e=>e.data.type=="ExpandNode"?30:100,_u=e=>e.data.type=="ExpandNode"?30:172,_0=(e,t,n)=>(ft.setGraph({rankdir:n}),e.forEach(r=>{ft.setNode(r.id,{width:_u(r),height:bu(r)})}),t.forEach(r=>{ft.setEdge(r.source,r.target)}),El.layout(ft),e.forEach(r=>{const i=ft.node(r.id);return r.targetPosition=j.Top,r.sourcePosition=j.Bottom,r.position={x:i.x-_u(r)/2,y:i.y-bu(r)/2},r}),{nodes:e,edges:t}),Eu=(e,t)=>of(e,t,dd).length==0;try{gn.displayName="getProvenanceNode",gn.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{Le.displayName="getNodeId",Le.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const Nu=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return n?.find(i=>t.id==i.id&&t.versionNumber==i.versionNumber)!==void 0},Sl=(e,t)=>t.find(r=>r.id===Le(e))===void 0,E0=(e,t)=>{const n={type:de.ENTITY,data:e};return t.find(r=>r.id===Le(n))},N0=(e,t,n)=>n.find(i=>i.source===Le(e)&&i.target===Le(t))===void 0,Bt=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:i}=e;Sl(t,r)&&r.push(gn(t)),N0(t,n,i)&&i.push(Nl(t,n))},S0=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:i}=e,o={type:de.ACTIVITY,data:t},a={type:de.ENTITY,data:n};Bt({newNodeProps:o,existingNodeProps:a,nodesCopy:r,edgesCopy:i})},C0=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:i}=e,o={type:de.EXPAND,data:{itemCount:n,entityHeader:t}},a={type:de.ENTITY,data:t};Bt({newNodeProps:o,existingNodeProps:a,nodesCopy:r,edgesCopy:i})},k0=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:i}=e,o={type:de.ENTITY_PLACEHOLDER,data:t},a={type:de.ACTIVITY,data:n};Bt({newNodeProps:o,existingNodeProps:a,nodesCopy:r,edgesCopy:i})},R0=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,i={type:de.UNDEFINED,data:t},o={type:de.ENTITY,data:t};Bt({newNodeProps:i,existingNodeProps:o,nodesCopy:n,edgesCopy:r})},I0=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:i}=e,o={type:de.ACTIVITY,data:n},a={type:de.EXTERNAL,data:t};Bt({newNodeProps:a,existingNodeProps:o,nodesCopy:r,edgesCopy:i})},T0=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:i}=e,o={type:de.ENTITY,data:t};if(Sl(o,r)&&(r.push(gn(o)),n)){const a={type:de.ACTIVITY,data:n};i.push(Nl(o,a))}},Mi=400,Ai=.85,q0=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:i=[],onNodesChangedListener:o,onEdgesChangedListener:a}=e,{accessToken:s}=hd(),[c,l]=q.useState(r),[u,d]=q.useState(i),[f,h]=$y([]),[x,y]=Vy([]),[g,p]=q.useState(),w=pd(),{data:b,isSuccess:v}=yd(t,{throwOnError:!0});if(v&&b&&b.totalNumberOfResults==0){const M=t.map(m=>m.targetId).join(",");w(`Unable to load provenance for the given Synapse IDs: ${M}`)}const _=b?.results,[E,k]=q.useState(!1),A=_n(),R=q.useCallback((M,m)=>{p(m)},[]),T=q.useCallback(async M=>{const{entityHeader:m,nodesCopy:C,edgesCopy:S,usedInActivity:D}=M;T0({entityHeader:m,activity:D,nodesCopy:C,edgesCopy:S});try{const H=await kn.getActivityForEntity(m.id,m.versionNumber,s);(!Nu({entityHeader:m,rootEntityHeaders:_})||H.used&&H.used.length>=Mi)&&C0({entityHeader:m,itemCount:H.used?.length,nodesCopy:C,edgesCopy:S})}catch(H){console.error(H),Nu({entityHeader:m,rootEntityHeaders:_})&&R0({entityHeader:m,nodesCopy:C,edgesCopy:S})}},[s,_]);q.useEffect(()=>{!E&&f.length>0&&setTimeout(()=>{if(_){const M=E0(_[0],f);if(M){const m=A.getZoom(),C=m>Ai?Ai:m;A?.setCenter(M.position.x+150,M.position.y-30,{zoom:C,duration:0})}k(!0)}})},[E,f,A,_]);const L=q.useCallback(async M=>{const{entityHeader:m,nodesCopy:C,edgesCopy:S}=M;try{const D=await kn.getActivityForEntity(m.id,m.versionNumber,s);if(S0({activity:D,entityHeader:m,nodesCopy:C,edgesCopy:S}),D.used&&D.used.length<Mi){const H=[];D.used.forEach(G=>{G.concreteType==af?H.push(G.reference):I0({usedURL:G,activity:D,nodesCopy:C,edgesCopy:S})});const I=await kn.getEntityHeaders(H,s),{results:O}=I;H.filter(G=>O.find(N=>N.id==G.targetId)==null).forEach(G=>{k0({ref:G,activity:D,nodesCopy:C,edgesCopy:S})});const U=[];O.forEach(G=>{U.push(T({entityHeader:G,nodesCopy:C,edgesCopy:S,usedInActivity:D}))}),await Promise.allSettled(U)}}catch(D){console.error(D)}},[s,T]);q.useEffect(()=>{if(_&&c.length==0){const M=[...c],m=[...u],C=[];_.forEach(S=>{const D=T({entityHeader:S,nodesCopy:M,edgesCopy:m});C.push(D);const H=L({entityHeader:S,nodesCopy:M,edgesCopy:m});C.push(H)}),Promise.allSettled(C).finally(()=>{l(M),d(m)})}},[T,w,L,_,t,u,c]),q.useEffect(()=>{const M=g?.data;if(g&&M?.type==de.EXPAND){const m=M.props;if(m.itemCount>Mi){gd("Web visualization does not support expanding this many items at this time.","danger");return}else{M.label=X.jsx(md,{size:30});const C=c.filter(H=>H.id!=g.id),S=No([g],u)[0],D=u.filter(H=>H!=S);L({entityHeader:m.entityHeader,nodesCopy:C,edgesCopy:D}).finally(()=>{l(C),d(D)})}p(void 0)}},[g,c,u,L]),q.useEffect(()=>{const{nodes:M,edges:m}=_0(c,u,"TB");Eu(M,f)||(h(M),o&&o(M)),Eu(m,x)||(y(m),a&&a(m))},[c,u,f,x,h,y,E,A,t,o,a]);const z=q.useCallback(M=>{M&&typeof M.deltaX<"u"&&typeof M.deltaY<"u"&&window.scrollTo(window.scrollX+M.deltaX,window.scrollY+M.deltaY)},[]);return X.jsx("div",{className:"ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:X.jsx(ol,{defaultViewport:{x:0,y:0,zoom:Ai},nodes:f,edges:x,onNodeClick:R,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:z,children:X.jsx(Gy,{})})})},Su=e=>X.jsx(fd,{children:X.jsx(Ro,{children:X.jsx(q0,{...e})})});try{Su.displayName="ProvenanceGraph",Su.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"(nodes: Node[]) => void"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"(edges: Edge[]) => void"}}}}}catch{}export{Su as P};
