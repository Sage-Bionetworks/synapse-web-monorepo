var I=e=>{throw TypeError(e)};var A=(e,t,r)=>t.has(e)||I("Cannot "+r);var o=(e,t,r)=>(A(e,t,"read from private field"),r?r.call(e):t.get(e)),v=(e,t,r)=>t.has(e)?I("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),f=(e,t,r,s)=>(A(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{r as k}from"./index-ByFgbSi1.js";import{j as W}from"./jsx-runtime-D_zvdyIk.js";var g=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},O=typeof window>"u"||"Deno"in globalThis;function he(){}function ye(e,t){return typeof e=="function"?e(t):e}function X(e){return typeof e=="number"&&e>=0&&e!==1/0}function de(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ve(e,t){return typeof e=="function"?e(t):e}function me(e,t){return typeof e=="function"?e(t):e}function be(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:u,queryKey:y,stale:i}=e;if(y){if(s){if(t.queryHash!==Y(y,t.options))return!1}else if(!q(t.queryKey,y))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||n&&n!==t.state.fetchStatus||u&&!u(t))}function pe(e,t){const{exact:r,status:s,predicate:n,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(M(t.options.mutationKey)!==M(u))return!1}else if(!q(t.options.mutationKey,u))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function Y(e,t){return((t==null?void 0:t.queryKeyHashFn)||M)(e)}function M(e){return JSON.stringify(e,(t,r)=>R(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function q(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>q(e[r],t[r])):!1}function B(e,t){if(e===t)return e;const r=D(e)&&D(t);if(r||R(e)&&R(t)){const s=r?e:Object.keys(e),n=s.length,u=r?t:Object.keys(t),y=u.length,i=r?[]:{},c=new Set(s);let S=0;for(let p=0;p<y;p++){const h=r?p:u[p];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(i[h]=void 0,S++):(i[h]=B(e[h],t[h]),i[h]===e[h]&&e[h]!==void 0&&S++)}return n===y&&S===n?e:i}return t}function we(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function D(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function R(e){if(!N(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!N(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function N(e){return Object.prototype.toString.call(e)==="[object Object]"}function Z(e){return new Promise(t=>{setTimeout(t,e)})}function je(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?B(e,t):t}function Se(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Ee(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ee=Symbol();function Fe(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ee?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Pe(e,t){return typeof e=="function"?e(...t):!!e}var w,m,E,U,te=(U=class extends g{constructor(){super();v(this,w);v(this,m);v(this,E);f(this,E,t=>{if(!O&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){o(this,m)||this.setEventListener(o(this,E))}onUnsubscribe(){var t;this.hasListeners()||((t=o(this,m))==null||t.call(this),f(this,m,void 0))}setEventListener(t){var r;f(this,E,t),(r=o(this,m))==null||r.call(this),f(this,m,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){o(this,w)!==t&&(f(this,w,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof o(this,w)=="boolean"?o(this,w):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},w=new WeakMap,m=new WeakMap,E=new WeakMap,U),re=new te,F,b,P,z,se=(z=class extends g{constructor(){super();v(this,F,!0);v(this,b);v(this,P);f(this,P,t=>{if(!O&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){o(this,b)||this.setEventListener(o(this,P))}onUnsubscribe(){var t;this.hasListeners()||((t=o(this,b))==null||t.call(this),f(this,b,void 0))}setEventListener(t){var r;f(this,P,t),(r=o(this,b))==null||r.call(this),f(this,b,t(this.setOnline.bind(this)))}setOnline(t){o(this,F)!==t&&(f(this,F,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return o(this,F)}},F=new WeakMap,b=new WeakMap,P=new WeakMap,z),H=new se;function ne(){let e,t;const r=new Promise((n,u)=>{e=n,t=u});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}function ie(e){return Math.min(1e3*2**e,3e4)}function ue(e){return(e??"online")==="online"?H.isOnline():!0}var V=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Te(e){return e instanceof V}function Oe(e){let t=!1,r=0,s=!1,n;const u=ne(),y=a=>{var l;s||(C(new V(a)),(l=e.abort)==null||l.call(e))},i=()=>{t=!0},c=()=>{t=!1},S=()=>re.isFocused()&&(e.networkMode==="always"||H.isOnline())&&e.canRun(),p=()=>ue(e.networkMode)&&e.canRun(),h=a=>{var l;s||(s=!0,(l=e.onSuccess)==null||l.call(e,a),n==null||n(),u.resolve(a))},C=a=>{var l;s||(s=!0,(l=e.onError)==null||l.call(e,a),n==null||n(),u.reject(a))},K=()=>new Promise(a=>{var l;n=d=>{(s||S())&&a(d)},(l=e.onPause)==null||l.call(e)}).then(()=>{var a;n=void 0,s||(a=e.onContinue)==null||a.call(e)}),L=()=>{if(s)return;let a;const l=r===0?e.initialPromise:void 0;try{a=l??e.fn()}catch(d){a=Promise.reject(d)}Promise.resolve(a).then(h).catch(d=>{var Q;if(s)return;const T=e.retry??(O?0:3),x=e.retryDelay??ie,_=typeof x=="function"?x(r,d):x,$=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,d);if(t||!$){C(d);return}r++,(Q=e.onFail)==null||Q.call(e,r,d),Z(_).then(()=>S()?void 0:K()).then(()=>{t?C(d):L()})})};return{promise:u,cancel:y,continue:()=>(n==null||n(),u),cancelRetry:i,continueRetry:c,canStart:p,start:()=>(p()?L():K().then(L),u)}}var ae=e=>setTimeout(e,0);function oe(){let e=[],t=0,r=i=>{i()},s=i=>{i()},n=ae;const u=i=>{t?e.push(i):n(()=>{r(i)})},y=()=>{const i=e;e=[],i.length&&n(()=>{s(()=>{i.forEach(c=>{r(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||y()}return c},batchCalls:i=>(...c)=>{u(()=>{i(...c)})},schedule:u,setNotifyFunction:i=>{r=i},setBatchNotifyFunction:i=>{s=i},setScheduler:i=>{n=i}}}var Ce=oe(),j,G,Le=(G=class{constructor(){v(this,j)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),X(this.gcTime)&&f(this,j,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(O?1/0:5*60*1e3))}clearGcTimeout(){o(this,j)&&(clearTimeout(o(this,j)),f(this,j,void 0))}},j=new WeakMap,G),J=k.createContext(void 0),xe=e=>{const t=k.useContext(J);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Me=({client:e,children:t})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),W.jsx(J.Provider,{value:e,children:t}));export{ye as A,q as B,Me as Q,Le as R,g as S,he as a,we as b,Oe as c,Pe as d,je as e,me as f,ve as g,M as h,ue as i,Te as j,Fe as k,O as l,X as m,Ce as n,re as o,ne as p,Y as q,B as r,ee as s,de as t,xe as u,be as v,pe as w,Ee as x,Se as y,H as z};
