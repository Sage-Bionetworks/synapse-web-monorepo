import{r as t,ci as ce,ax as fe,ao as Se,j as W,bX as ge,aa as X}from"./iframe-C7HGvOUl.js";import{r as ve}from"./useAccessRequirements-CW-MGXNh.js";import{_ as he,a as o,h as Oe,b as C,u as me,S as _e}from"./Select-aab027f3.esm-CAVdbtFx.js";import{_ as ye}from"./defineProperty-CegpTSss.js";var Ie=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Ce(a){var r=a.defaultOptions,e=r===void 0?!1:r,l=a.cacheOptions,c=l===void 0?!1:l,S=a.loadOptions;a.options;var g=a.isLoading,d=g===void 0?!1:g,_=a.onInputChange,y=a.filterOption,s=y===void 0?null:y,v=he(a,Ie),u=v.inputValue,p=t.useRef(void 0),i=t.useRef(!1),F=t.useState(Array.isArray(e)?e:void 0),P=o(F,2),H=P[0],E=P[1],J=t.useState(typeof u<"u"?u:""),$=o(J,2),j=$[0],A=$[1],K=t.useState(e===!0),w=o(K,2),Q=w[0],h=w[1],U=t.useState(void 0),B=o(U,2),x=B[0],L=B[1],Y=t.useState([]),D=o(Y,2),Z=D[0],V=D[1],ee=t.useState(!1),N=o(ee,2),te=N[0],I=N[1],ae=t.useState({}),T=o(ae,2),O=T[0],k=T[1],ne=t.useState(void 0),M=o(ne,2),se=M[0],re=M[1],ue=t.useState(void 0),G=o(ue,2),ie=G[0],oe=G[1];c!==ie&&(k({}),oe(c)),e!==se&&(E(Array.isArray(e)?e:void 0),re(e)),t.useEffect(function(){return i.current=!0,function(){i.current=!1}},[]);var b=t.useCallback(function(m,f){if(!S)return f();var n=S(m,f);n&&typeof n.then=="function"&&n.then(f,function(){return f()})},[S]);t.useEffect(function(){e===!0&&b(j,function(m){i.current&&(E(m||[]),h(!!p.current))})},[]);var de=t.useCallback(function(m,f){var n=Oe(m,f,_);if(!n){p.current=void 0,A(""),L(""),V([]),h(!1),I(!1);return}if(c&&O[n])A(n),L(n),V(O[n]),h(!1),I(!1);else{var le=p.current={};A(n),h(!0),I(!x),b(n,function(R){i&&le===p.current&&(p.current=void 0,h(!1),L(n),V(R||[]),I(!1),k(R?C(C({},O),{},ye({},n,R)):O))})}},[c,b,x,O,_]),pe=te?[]:j&&x?Z:H||[];return C(C({},v),{},{options:pe,isLoading:Q||d,onInputChange:de,filterOption:s})}var Ae=t.forwardRef(function(a,r){var e=Ce(a),l=me(e);return t.createElement(_e,ce({ref:r},l))}),xe=Ae;function q(a,r){return a.toString()===r?r:`${r} (${a})`}function z(a){const{inputId:r,initialId:e,onChange:l,placeholder:c}=a,{palette:S}=fe(),{accessToken:g}=Se(),{data:d,isLoading:_}=ve(e,{enabled:!!e});async function y(s){var p;const v=parseInt(s);let u;return v&&(u=[await X.getAccessRequirementById(g,v)]),u||(u=(p=await X.searchAccessRequirements(g,{nameContains:s}))==null?void 0:p.results),(u==null?void 0:u.map(i=>({id:i.id.toString(),value:i.id.toString(),label:q(i.id,i.name)})))??[]}return e&&_?W.jsx(ge,{width:"100%"}):W.jsx(xe,{className:"AsyncSelect",defaultInputValue:e?q(e,(d==null?void 0:d.name)??e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:q(e,(d==null?void 0:d.name)??e.toString())}]:!0,inputId:r,cacheOptions:!0,isClearable:!0,styles:{control:s=>({...s,backgroundColor:S.grey[200]}),input:s=>({...s,input:{gridArea:"1 / 2 / 4 / 4 !important"}})},loadOptions:y,onChange:s=>{l(s==null?void 0:s.id.toString())},placeholder:c})}try{z.displayName="AccessRequirementSearchBox",z.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch{}export{z as A};
