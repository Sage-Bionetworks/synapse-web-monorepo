{"version":3,"file":"UserOrTeamBadge-522981a8.js","sources":["../../src/synapse-queries/user/useUserGroupHeader.ts","../../src/components/TeamBadge.tsx","../../src/components/UserOrTeamBadge/UserOrTeamBadge.tsx"],"sourcesContent":["import { useQuery, UseQueryOptions } from 'react-query'\nimport SynapseClient from '../../synapse-client'\nimport { SynapseClientError } from '../../utils/SynapseClientError'\nimport { useSynapseContext } from '../../utils/context/SynapseContext'\nimport { TYPE_FILTER, UserGroupHeader } from '@sage-bionetworks/synapse-types'\n\nexport function useGetUserGroupHeader(\n  principalId: string,\n  options?: UseQueryOptions<UserGroupHeader, SynapseClientError>,\n) {\n  const { accessToken, keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getUserGroupHeaderQueryKey(principalId)\n\n  return useQuery<UserGroupHeader, SynapseClientError>(\n    queryKey,\n    async () => {\n      const responsePage = await SynapseClient.getGroupHeadersBatch(\n        [principalId],\n        accessToken,\n      )\n      if (responsePage.children.length !== 1) {\n        throw new Error(\n          `Expected one response in useGetUserGroupHeader for id: ${principalId}, got ${responsePage.children.length}`,\n        )\n      }\n      return responsePage.children[0]\n    },\n    options,\n  )\n}\n\nexport function useSearchUserGroupHeaders(\n  prefix: string,\n  filter?: TYPE_FILTER,\n  options?: UseQueryOptions<UserGroupHeader[], SynapseClientError>,\n) {\n  const { keyFactory } = useSynapseContext()\n  const queryKey = keyFactory.getUserGroupHeaderSearchQueryKey(prefix, filter)\n\n  return useQuery<UserGroupHeader[], SynapseClientError>(\n    queryKey,\n    async () => {\n      const responsePage = await SynapseClient.getUserGroupHeaders(\n        prefix,\n        filter,\n      )\n      return responsePage.children\n    },\n    options,\n  )\n}\n\nexport function useGetUserGroupHeaderWithAlias(\n  aliases: string[],\n  options?: UseQueryOptions<UserGroupHeader[], SynapseClientError>,\n) {\n  const { keyFactory } = useSynapseContext()\n\n  const queryKey = keyFactory.getUserGroupHeaderWithAliasQueryKey(aliases)\n\n  return useQuery<UserGroupHeader[], SynapseClientError>(\n    queryKey,\n    async () => {\n      const response = await SynapseClient.postUserGroupHeadersWithAlias(\n        aliases,\n      )\n      return response.list\n    },\n    options,\n  )\n}\n","import React from 'react'\nimport { PRODUCTION_ENDPOINT_CONFIG } from '../utils/functions/getEndpoint'\nimport IconSvg from './IconSvg/IconSvg'\n\nexport type TeamBadgeProps = {\n  teamId: string | number\n  teamName: string\n  disableHref?: boolean\n}\n\nexport default function TeamBadge(props: TeamBadgeProps) {\n  const { teamId, teamName, disableHref } = props\n\n  return (\n    <span>\n      <IconSvg icon=\"team\" />\n      <a\n        style={{ marginLeft: '5px' }}\n        href={\n          disableHref\n            ? undefined\n            : `${PRODUCTION_ENDPOINT_CONFIG.PORTAL}#!Team:${teamId}`\n        }\n      >\n        {teamName}\n      </a>\n    </span>\n  )\n}\n","import { Skeleton } from '@mui/material'\nimport React, { useEffect, useState } from 'react'\nimport { useGetUserGroupHeader } from '../../synapse-queries/user/useUserGroupHeader'\nimport { SMALL_USER_CARD } from '../../utils/SynapseConstants'\nimport { useSynapseContext } from '../../utils/context/SynapseContext'\nimport { UserGroupHeader } from '@sage-bionetworks/synapse-types'\nimport TeamBadge from '../TeamBadge'\nimport UserCard from '../UserCard/UserCard'\n\nexport type UserOrTeamBadgeProps = {\n  /* The principal ID of the user or team. Required if userGroupHeader is undefined. */\n  principalId?: string | number\n  /* The userGroupHeader of the user or team. Required if principalId is undefined. */\n  userGroupHeader?: UserGroupHeader\n  showFullName?: boolean\n  disableHref?: boolean\n  showCardOnHover?: boolean\n}\n\nexport default function UserOrTeamBadge(props: UserOrTeamBadgeProps) {\n  let principalId = props.principalId\n  const {\n    disableHref,\n    showCardOnHover,\n    showFullName,\n    userGroupHeader: providedUserGroupHeader,\n  } = props\n\n  if (principalId == null) {\n    principalId = providedUserGroupHeader?.ownerId\n  }\n\n  const { accessToken } = useSynapseContext()\n  const [userGroupHeader, setUserGroupHeader] = useState<\n    UserGroupHeader | undefined\n  >(providedUserGroupHeader)\n\n  const { data: fetchedUserGroupHeader } = useGetUserGroupHeader(\n    (principalId ?? '').toString(),\n    {\n      enabled: !providedUserGroupHeader,\n    },\n  )\n\n  useEffect(() => {\n    if (principalId && userGroupHeader == undefined && fetchedUserGroupHeader) {\n      setUserGroupHeader(fetchedUserGroupHeader)\n    }\n  }, [accessToken, principalId, userGroupHeader, fetchedUserGroupHeader])\n\n  if (principalId == null && providedUserGroupHeader == null) {\n    console.error(\n      'Expected one of principalId or userGroupHeader to be defined but both were null or undefined',\n    )\n    return <></>\n  } else if (userGroupHeader === undefined) {\n    return <Skeleton width={125} height={30} />\n  } else if (userGroupHeader.isIndividual) {\n    return (\n      <UserCard\n        ownerId={principalId!.toString()}\n        size={SMALL_USER_CARD}\n        disableLink={disableHref}\n        showFullName={showFullName}\n        showCardOnHover={showCardOnHover}\n      />\n    )\n  } else {\n    return (\n      <TeamBadge\n        teamId={principalId!}\n        teamName={userGroupHeader.userName}\n        disableHref={disableHref}\n      />\n    )\n  }\n}\n"],"names":["useGetUserGroupHeader","principalId","options","accessToken","keyFactory","useSynapseContext","queryKey","useQuery","responsePage","SynapseClient","useSearchUserGroupHeaders","prefix","filter","useGetUserGroupHeaderWithAlias","aliases","TeamBadge","props","teamId","teamName","disableHref","jsxs","jsx","IconSvg","PRODUCTION_ENDPOINT_CONFIG","UserOrTeamBadge","showCardOnHover","showFullName","providedUserGroupHeader","userGroupHeader","setUserGroupHeader","useState","fetchedUserGroupHeader","useEffect","Fragment","Skeleton","UserCard","SMALL_USER_CARD"],"mappings":"oYAMgB,SAAAA,EACdC,EACAC,EACA,CACA,KAAM,CAAE,YAAAC,EAAa,WAAAC,CAAW,EAAIC,EAAkB,EAChDC,EAAWF,EAAW,2BAA2BH,CAAW,EAE3D,OAAAM,EACLD,EACA,SAAY,CACJ,MAAAE,EAAe,MAAMC,EAAc,qBACvC,CAACR,CAAW,EACZE,CAAA,EAEE,GAAAK,EAAa,SAAS,SAAW,EACnC,MAAM,IAAI,MACR,0DAA0DP,UAAoBO,EAAa,SAAS,QAAA,EAGjG,OAAAA,EAAa,SAAS,CAAC,CAChC,EACAN,CAAA,CAEJ,CAEgB,SAAAQ,EACdC,EACAC,EACAV,EACA,CACM,KAAA,CAAE,WAAAE,GAAeC,IACjBC,EAAWF,EAAW,iCAAiCO,EAAQC,CAAM,EAEpE,OAAAL,EACLD,EACA,UACuB,MAAMG,EAAc,oBACvCE,EACAC,CAAA,GAEkB,SAEtBV,CAAA,CAEJ,CAEgB,SAAAW,EACdC,EACAZ,EACA,CACM,KAAA,CAAE,WAAAE,GAAeC,IAEjBC,EAAWF,EAAW,oCAAoCU,CAAO,EAEhE,OAAAP,EACLD,EACA,UACmB,MAAMG,EAAc,8BACnCK,CAAA,GAEc,KAElBZ,CAAA,CAEJ,CC5DA,SAAAa,EAAAC,EAAA,CACE,KAAA,CAAA,OAAAC,EAAA,SAAAC,EAAA,YAAAC,CAAA,EAAAH,EAEA,OAAAI,EAAA,OAAA,CAAA,SAAA,CAEIC,EAAAC,EAAA,CAAA,KAAA,MAAA,CAAA,EAAqBD,EACrB,IAAC,CAAA,MAAA,CAAA,WAAA,KAAA,EAC4B,KAAAF,EAAA,OAAA,GAAAI,EAAA,gBAAAN,IAIyB,SAAAC,CAGnD,CAAA,CACH,CAAA,CAAA,CAGN,yYCTA,SAAAM,EAAAR,EAAA,CACE,IAAAf,EAAAe,EAAA,YACA,KAAA,CAAM,YAAAG,EACJ,gBAAAM,EACA,aAAAC,EACA,gBAAAC,CACiB,EAAAX,EAGnBf,GAAA,OACEA,EAAA0B,GAAA,YAAAA,EAAA,SAGF,KAAA,CAAA,YAAAxB,GAAAE,IACA,CAAAuB,EAAAC,CAAA,EAAAC,EAAA,SAAAH,CAAA,EAIA,CAAA,KAAAI,CAAA,EAAA/B,GAAyCC,GAAA,IAAA,SAAA,EACV,CAC7B,QAAA,CAAA0B,CACY,CACZ,EASF,OANAK,EAAAA,UAAA,IAAA,CACE/B,GAAA2B,GAAA,MAAAG,GACEF,EAAAE,CAAA,CACF,EAAA,CAAA5B,EAAAF,EAAA2B,EAAAG,CAAA,CAAA,EAGF9B,GAAA,MAAA0B,GAAA,MACE,QAAA,MAAQ,8FACN,EAEFN,EAAAY,EAAA,CAAA,CAAA,GAASL,IAAA,OAETP,EAAAa,EAAA,CAAA,MAAA,IAAA,OAAA,EAAA,CAAA,EAAyCN,EAAA,aAEzCP,EACEc,EAAC,CAAA,QAAAlC,EAAA,SAAA,EACgC,KAAAmC,EACzB,YAAAjB,EACO,aAAAO,EACb,gBAAAD,CACA,CAAA,EAIJJ,EACEN,EAAC,CAAA,OAAAd,EACS,SAAA2B,EAAA,SACkB,YAAAT,CAC1B,CAAA,CAIR"}