import{r as a,c3 as q,j as t,ag as L,V as b,X as o,W as h,a3 as j,c4 as T}from"./iframe-CS-qe6F5.js";import{a as N,b as M,c as O,d as P}from"./useAccessRequirements-dXP3fsXx.js";import{A as U}from"./AclEditor-rjQ8WYv0.js";import{u as w}from"./useUpdateAcl-3a6eApiR.js";const d={variant:"body1",lineHeight:"20px",color:"grey.800"},B="Only ACT has permissions on this AR.",V=["CAN_REVIEW_SUBMISSIONS","IS_EXEMPTION_ELIGIBLE","CAN_REVIEW_SUBMISSIONS_AND_IS_EXEMPTION_ELIGIBLE"],x=a.forwardRef(function(f,R){const{accessRequirementId:c,onSaveComplete:n}=f,[m,i]=a.useState(null),l=()=>{i(null),n(!0)},u=e=>{i(e.reason),n(!1)},{data:s,isLoading:y}=N(c,{staleTime:1/0}),{resourceAccessList:r,setResourceAccessList:A,addResourceAccessItem:g,updateResourceAccessItem:_,removeResourceAccessItem:C,resetDirtyState:v}=w({onChange:()=>i(null),onError:i});a.useEffect(()=>{s&&(v(),A(s.resourceAccess))},[s,A]);const{mutate:p}=M({onSuccess:()=>l(),onError:e=>u(e)}),{mutate:E}=O({onSuccess:()=>l(),onError:e=>u(e)}),{mutate:S}=P({onSuccess:()=>l(),onError:e=>u(e)});return a.useImperativeHandle(R,()=>({save(){const e=r.length===0?null:{...s,id:s?.id||c,resourceAccess:r};s===null&&e==null||q(s?.resourceAccess,r)&&s?.id===e?.id?n(!0):s===null&&e!==null?E(e):e===null?p(c):S(e)}}),[c,s,r,E,p,n,S]),t.jsxs(L,{direction:"column",sx:{gap:"20px"},children:[t.jsxs(b,{children:[t.jsx(o,{variant:"headline3",sx:{mb:"10px"},children:"Guide to AR permissions"}),t.jsxs(o,{sx:h({mb:"10px"},d),children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Can Review"})," means a user or team has access request review permission for this AR."]}),t.jsxs(o,{sx:h({mb:"10px"},d),children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Exempt Eligible"}),' users and teams can bypass access requirements for entities they have been granted "edit and delete" permission on, via the "Sharing Settings" dialog in the Project Settings.']}),t.jsx(o,{sx:{...d,color:"grey.900"},children:"ACT members always retain the ability to review or modify Access Requirements."})]}),t.jsx(U,{resourceAccessList:r,availablePermissionLevels:V,isLoading:y,canEdit:!0,emptyText:B,onAddPrincipalToAcl:e=>g(e,[j.REVIEW_SUBMISSIONS]),updateResourceAccessItem:_,removeResourceAccessItem:C,showAddRemovePublicButton:!1,showNotifyCheckbox:!1,isInherited:!1}),m&&t.jsx(T,{severity:"error",children:m})]})});try{x.displayName="AccessRequirementAclEditor",x.__docgenInfo={description:"",displayName:"AccessRequirementAclEditor",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSaveComplete:{defaultValue:null,description:"",name:"onSaveComplete",required:!0,type:{name:"(saveSuccessful: boolean) => void"}}}}}catch{}export{x as A};
