import{U as Te,j as e,r,b$ as H,al as _,V as O,e9 as Z,hf as Re,hg as Le,e5 as Oe,B,dZ as ke,Z as $e,J as k,cy as Be,dH as be,dG as xe,an as K,bV as He,c6 as qe,ay as Ce,hh as Ve,hi as ze,aH as Ue,F as Me,gZ as Ge,dB as je,X as $,fn as ve,c2 as We,e3 as Ye,bX as Ze,dU as Ke,aa as Qe}from"./iframe-BSxjDfu3.js";import{u as de,e as Se,f as ue,g as Xe}from"./useDownloadList-DuwQ1w5Z.js";import{u as Je}from"./useGetFeatureFlag-YIKcqB_k.js";import{H as Fe}from"./HelpPopover-Ck3jSwjq.js";import{P as Ne}from"./ProgrammaticInstructionsModal-DmXhZcx2.js";import{u as ea,g as aa,S as na,c as ta}from"./StyledTanStackTable-C5b2ADiF.js";import{F as sa}from"./FileEntityDirectDownload-DsxtdF67.js";import{I as ia}from"./InteractiveCopyIdsIcon-CgCj1Ysb.js";import"./SkeletonButton-Bu5XGQ_G.js";import"./SkeletonInlineBlock-B21sfNKh.js";import{S as oa}from"./SkeletonTable-Bd6B-VEF.js";import"./SkeletonParagraph-ssYRCcJC.js";import{T as W}from"./SynapseTableConstants-2qH3fDlQ.js";import{C as L}from"./ColumnHeader-bX9YIh-u.js";import{U as la}from"./UserBadge-GA8Aaaz5.js";import{p as te}from"./pluralize-DvqWrKl4.js";import{I as ra}from"./InputAdornment-uXRKWkBT.js";import{k as ca}from"./useEntity-KS5kNauW.js";import{D as da}from"./DialogBase-C7KiMXAc.js";import{u as ua,A as fa}from"./ActionRequiredListItem-9S4WSMUM.js";import{L as ga}from"./ActionRequiredCard-DZKErL3T.js";const ma=Te(e.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Pe=`import synapseclient
syn = synapseclient.Synapse()
syn.login(authToken="YOUR_TOKEN_HERE")
`,ha=`library(synapser)
synLogin(authToken="YOUR_TOKEN_HERE")
`;function se({entityId:n,version:t}){const[i,a]=r.useState(!1),u=`${ha}
# Obtain a pointer and download the data
${n} <- synGet(entity='${n}'${t?`, version=${t}`:""} ) `,d=`${Pe}
# Obtain a pointer and download the data
${n} = syn.get(entity='${n}'${t?`, version=${t}`:""} )

# Get the path to the local copy of the data file
filepath = ${n}.path`,p=`synapse get ${n} ${t?`--version ${t}`:""}`;return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Programmatic download options",enterNextDelay:W,placement:"left",children:e.jsx("span",{children:e.jsx("button",{className:"btn-download-icon",onClick:()=>a(!0),children:e.jsx(_,{icon:"code"})})})}),i&&e.jsx(Ne,{show:!0,onClose:()=>a(!1),title:"Download Programmatically",cliCode:p,rCode:u,pythonCode:d})]})}try{se.displayName="DirectProgrammaticDownload",se.__docgenInfo={description:"",displayName:"DirectProgrammaticDownload",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!1,type:{name:"number"}}}}}catch{}function ie(n){const{numFiles:t,numPackagableFiles:i,numBytes:a}=n,u=t-i,d=t===0,p=d?"SRC-inactive":"SRC-primary-text-color";return e.jsxs(O,{sx:{display:"flex",alignItems:"center",justifyContent:"start ",gap:"25px",fontWeight:"bold",svg:{mr:"5px"}},children:[e.jsx("span",{children:!d&&e.jsxs(e.Fragment,{children:[t.toLocaleString()," ",te("File",t)]})}),e.jsxs("span",{children:[e.jsx("span",{className:p,children:e.jsx(_,{wrap:!1,icon:"packagableFile"})}),!d&&e.jsxs(e.Fragment,{children:[i.toLocaleString()," ",te("File",i)," eligible for packaging"]})]}),a>0&&e.jsx(H,{title:"This is the total size of all files in the Download Cart that are available to download.",enterNextDelay:W,placement:"top",children:e.jsx("span",{className:"item",children:Z(a)})}),u>0&&e.jsxs("span",{className:"item",children:[e.jsx("span",{className:"SRC-warning-color",children:e.jsx(_,{icon:"warningOutlined"})}),!d&&e.jsxs(e.Fragment,{children:[u.toLocaleString()," ",te("File",u)," ineligible for packaging"]})]})]})}try{ie.displayName="DownloadDetails",ie.__docgenInfo={description:"",displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numPackagableFiles:{defaultValue:null,description:"",name:"numPackagableFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!0,type:{name:"number"}}}}}catch{}function pa(){const{data:n}=de({throwOnError:!0});return n?e.jsx("div",{children:e.jsx(ie,{numBytes:n.sumOfFileSizesAvailableForDownload,numPackagableFiles:n.numberOfFilesAvailableForDownloadAndEligibleForPackaging,numFiles:n.numberOfFilesAvailableForDownload})}):null}const ya="TESTING_TRASH_BTN_CLASS";function wa(n,t){k(`${t} has been removed from your list.`,"success",{title:n})}function ba(n){const{ctx:t}=n,{mutateAsync:i,isPending:a}=ue({onSuccess:()=>k(`${t.row.original.fileName} has been removed from your list.`,"success",{title:"File Removed"})});return e.jsx(H,{title:"Remove from Download Cart",placement:"left",enterNextDelay:W,children:e.jsx("span",{className:"removeItem",children:e.jsx("button",{className:ya,onClick:()=>{i({batchToRemove:[{fileEntityId:t.row.original.fileEntityId,versionNumber:t.row.original.versionNumber}]})},children:a?e.jsx(ke,{}):e.jsx(_,{icon:"removeCircle"})})})})}const T=ta(),xa=n=>{const{onCopySynIds:t,removeItem:i}=n;return[T.accessor("isEligibleForPackaging",{header:()=>e.jsx(e.Fragment,{}),cell:a=>e.jsxs("div",{children:[a.getValue()&&e.jsx(H,{title:"Eligible for packaging",enterNextDelay:W,placement:"right",children:e.jsx("span",{className:"eligibileIcon",children:e.jsx(_,{wrap:!1,icon:"packagableFile"})})}),!a.getValue()&&e.jsx(H,{title:"This file is ineligible for Web packaging because it is >100MB, or it is an external link, or it is not stored on Synapse native storage",enterNextDelay:W,placement:"right",children:e.jsx("span",{className:"ineligibileIcon",children:e.jsx(_,{wrap:!1,icon:"warningOutlined"})})})]}),enableResizing:!1,enableColumnFilter:!1,size:50}),T.accessor("fileName",{header:a=>e.jsx(L,{...a,title:"Name"}),cell:a=>e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`${Be.PORTAL}Synapse:${a.row.original.fileEntityId}.${a.row.original.versionNumber}`,children:a.getValue()}),enableColumnFilter:!1,size:160}),T.accessor("fileSizeBytes",{header:a=>e.jsx(L,{...a,title:"Size"}),cell:a=>a.getValue()!=null?Z(a.getValue()):e.jsx(e.Fragment,{}),enableColumnFilter:!1,size:100}),T.accessor("fileEntityId",{header:a=>e.jsx(L,{...a,title:"SynID",additionalButtons:e.jsx(ia,{size:"small",onCopy:t})}),cell:a=>`${a.getValue()}.${a.row.original.versionNumber}`,enableColumnFilter:!1,size:100}),T.accessor("projectName",{header:a=>e.jsx(L,{...a,title:"Project"}),enableColumnFilter:!1}),T.accessor("addedOn",{header:a=>e.jsx(L,{...a,title:"Added On"}),cell:a=>be(xe(a.getValue())),enableColumnFilter:!1}),T.accessor("createdBy",{header:a=>e.jsx(L,{...a,title:"Created By"}),cell:a=>e.jsx(la,{userId:a.getValue()}),enableColumnFilter:!1}),T.accessor("createdOn",{header:a=>e.jsx(L,{...a,title:"Created On"}),cell:a=>be(xe(a.getValue())),enableColumnFilter:!1}),T.display({id:"actions",header:a=>e.jsx(L,{...a,title:"Actions"}),cell:a=>e.jsxs("div",{className:"actionsContainer",children:[e.jsx("span",{className:"downloadItem",children:e.jsx(sa,{entityId:a.row.original.fileEntityId,entityVersionNumber:a.row.original.versionNumber,displayFileName:!1,onClickCallback:u=>{u||i({fileEntityId:a.row.original.fileEntityId,versionNumber:a.row.original.versionNumber},a.row.original.fileName,"File Downloaded")}})}),e.jsx("span",{className:"programmaticAccessItem",children:e.jsx(se,{entityId:a.row.original.fileEntityId,version:a.row.original.versionNumber})}),e.jsx(ba,{ctx:a})]}),enableResizing:!1,enableColumnFilter:!1,size:140,meta:{textAlign:"center"}})]};function ja(n){if(n.length===0)return;const t=n[0];let i="addedOn";return t.id==="fileName"?i="fileName":t.id==="fileSizeBytes"?i="fileSize":t.id==="fileEntityId"?i="synId":t.id==="projectName"?i="projectName":t.id==="addedOn"?i="addedOn":t.id==="createdBy"?i="createdBy":t.id==="createdOn"&&(i="createdOn"),{field:i,direction:t.desc?"DESC":"ASC"}}function va(){const n=Re(),[t,i]=r.useState(!1),[a,u]=r.useState([{desc:!0,id:"addedOn"}]),[d,p]=r.useState(void 0),{data:I,status:y,isFetchingNextPage:f,isLoading:v,hasNextPage:g,fetchNextPage:b,isError:o,error:x}=Se(ja(a),d);r.useEffect(()=>{o&&x&&n(x)},[o,x,n]);const{mutateAsync:j}=ue(),C=r.useCallback(async(m,F,w)=>{await j({batchToRemove:[m]}),wa(w,F)},[j]),P=r.useMemo(()=>I?.pages.flatMap(m=>m.page)??[],[I?.pages]),q=r.useMemo(()=>xa({removeItem:(...m)=>{C(...m)},onCopySynIds:()=>{i(!0)}}),[C]),Y=ea({data:P,columns:q,getCoreRowModel:aa(),manualSorting:!0,onSortingChange:u,state:{columnPinning:{right:["actions"]},sorting:a},columnResizeMode:"onChange",meta:{getRowClassNames(m){return m.original.isEligibleForPackaging?"":"ineligibleForPackaging"}}});r.useEffect(()=>{y==="success"&&!f&&g&&b&&t?b():!g&&t&&(()=>{const F=P.map(w=>`${w.fileEntityId}.${w.versionNumber}`).join(`
`);$e(F).then(()=>{k("Successfully copied to clipboard")}),i(!1)})()},[y,f,g,b,t,P]);const V=m=>m?m=="eligibleForPackaging"?"Only Eligible":"Only Ineligible":"All",Q=[void 0,"eligibleForPackaging","ineligibleForPackaging"];return e.jsxs("div",{children:[e.jsx(Le,{show:t}),e.jsxs(O,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:"center",py:"15px",rowGap:"15px"},children:[e.jsx(pa,{}),e.jsxs(O,{sx:{display:"flex",gap:"10px",alignItems:"inherit",justifyContent:"end"},children:[e.jsx(O,{sx:{fontWeight:"700",fontSize:"14px"},children:"Filter Files By"}),e.jsx(O,{sx:{button:{width:"144px"}},children:e.jsx(Oe,{native:!0,fullWidth:!0,value:V(d),children:Q.map(m=>e.jsx("option",{onClick:()=>{p(m)},children:V(m)},`${V(m)}-filter-option`))})})]})]}),P.length>0&&e.jsxs("div",{className:"DownloadListTableV2",children:[e.jsx(na,{table:Y,fullWidth:!1}),g&&e.jsx(O,{sx:{display:"flex",justifyContent:"right"},children:e.jsx(B,{variant:"contained",sx:{my:2,ml:"auto"},onClick:()=>{b()},disabled:f,startIcon:f?e.jsx(ke,{}):void 0,children:f?"Loading...":"Show More"})})]}),v&&e.jsx(oa,{numCols:5,numRows:3})]})}function oe(){const{accessToken:n}=K();return n?e.jsx(He,{children:e.jsx(va,{})}):e.jsx(e.Fragment,{})}try{oe.displayName="AvailableForDownloadTable",oe.__docgenInfo={description:"Table of the files added to the Download Cart that are currently available for download.",displayName:"AvailableForDownloadTable",props:{}}}catch{}const Fa="Please provide a package file name and try again.",le=n=>{const{accessToken:t}=K(),[i,a]=r.useState(!1),[u,d]=r.useState(""),[p,I]=r.useState(),[y,f]=r.useState(void 0),{onPackageCreation:v}=n,g=async o=>{if(o.preventDefault(),!u){I({message:Fa,variant:"danger"});return}a(!0);try{const x=`${u}.zip`,j=await Ve(x,t);f(j);const{resultFileHandleId:C}=j;try{window.location.href=await ze(C,t),d(""),f(void 0),v()}catch(P){console.error("Err on getFileHandleByIdURL = ",P)}}catch(x){I({message:x.reason,variant:"danger"})}finally{a(!1)}},b=o=>{d(o.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CreatePackageV2",children:e.jsxs("div",{className:"createPackageStep",children:[e.jsx("span",{className:"createPackageTitle",children:"Create your Download Package"}),e.jsx("span",{className:"createPackageDescription",children:"Name your download package and select Download Package to get started."}),!i&&!y&&e.jsxs(O,{sx:{display:"flex",alignItems:"stretch"},children:[e.jsx(qe,{onChange:b,type:"text",placeholder:"PackageName",sx:{width:"233px"},slotProps:{input:{endAdornment:e.jsx(ra,{position:"end",children:".zip"})}}}),e.jsx(B,{variant:"contained",color:"primary",onClick:o=>{g(o)},sx:{marginLeft:"20px"},disabled:!u,children:"Download Package"})]}),i&&e.jsxs("div",{className:"creatingPackage",children:[e.jsx("span",{className:"spinner"}),e.jsx("span",{style:{marginLeft:5},children:"Creating package..."})]})]})}),e.jsx(Ce,{show:!!p,variant:p?.variant?p.variant:"success",description:p?.message,autoCloseAfterDelayInSeconds:10,onClose:()=>{I(void 0)}})]})};try{le.displayName="CreatePackageV2",le.__docgenInfo={description:"",displayName:"CreatePackageV2",props:{onPackageCreation:{defaultValue:null,description:"",name:"onPackageCreation",required:!0,type:{name:"() => void"}}}}}catch{}function Da(n,t){return n.fileHandle?.fileName||t?.fileName||`file-${n.fileHandleId}`}function Ia(n,t){if(t.has(n)){const i=t.get(n)+1;t.set(n,i);const a=n.lastIndexOf(".");if(a>0){const u=n.substring(0,a),d=n.substring(a);return`${u} (${i})${d}`}else return`${n} (${i})`}else return t.set(n,0),n}function ka(n){return"showDirectoryPicker"in n}const De=50;function re(n){const{buttonText:t="Download Non-Packageable Files",variant:i="text"}=n,{accessToken:a,isAuthenticated:u}=K(),d=Ue(),p=ca(),[I,y]=r.useState(!1),f=r.useRef(!1),v=r.useRef(!1),[g,b]=r.useState(null),{data:o,status:x,hasNextPage:j,fetchNextPage:C,error:P}=Se(),{mutateAsync:q}=ue(),{refetch:Y}=de(),V=r.useCallback(async F=>{if(!f.current){if(!F||!u){y(!1);return}try{f.current=!0,v.current=!1;const S=F.pages.flatMap(s=>s.page).filter(s=>!s.isEligibleForPackaging);if(S.length===0){k("No non-packageable files available to download","info"),y(!1),f.current=!1;return}const fe=ka(window);let X;if(fe){const s=window;try{X=await s.showDirectoryPicker({mode:"readwrite"})}catch(l){console.error("Failed to select directory:",l),k("Directory selection is required to directly download files from the website.","warning"),y(!1),f.current=!1;return}}else k("Your browser will download files individually to your default downloads folder. Each file may trigger a separate download prompt.","info");b({currentFile:"",fileIndex:0,totalFiles:S.length,bytesDownloaded:0,totalBytes:0});const J=new Map,_e=S.map(async s=>{if(!v.current)try{const l=await d.ensureQueryData(p(s.fileEntityId,s.versionNumber?.toString())),c=`${l.id}-${s.versionNumber??"latest"}`;J.set(c,l.dataFileHandleId)}catch(l){console.error(`Failed to fetch entity ${s.fileEntityId}:`,l)}});await Promise.all(_e);const ee=S.filter(s=>{const l=`${s.fileEntityId}-${s.versionNumber??"latest"}`;return J.has(l)}).map(s=>{const l=`${s.fileEntityId}-${s.versionNumber??"latest"}`;return{fileHandleId:J.get(l),associateObjectId:s.fileEntityId,associateObjectType:Me.FileEntity}});if(ee.length===0){k("Failed to fetch file information for download","danger"),y(!1),f.current=!1;return}const ge=[];for(let s=0;s<ee.length;s+=De)ge.push(ee.slice(s,s+De));let A=0,R=0;const U=[],Ee=new Map,me=async(s,l)=>{try{const c=await fetch(s);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const E=await c.blob(),N=URL.createObjectURL(E),D=document.createElement("a");return D.href=N,D.download=l,D.style.display="none",document.body.appendChild(D),D.click(),document.body.removeChild(D),setTimeout(()=>URL.revokeObjectURL(N),1e3),!0}catch(c){console.error(`Failed to download file ${l}:`,c);try{return window.open(s,"_blank","noopener,noreferrer"),!0}catch(E){return console.error("Fallback window.open also failed:",E),!1}}},he=async(s,l)=>{try{let c;if(s.fileHandle&&Ge(s.fileHandle)?c=s.fileHandle.externalURL:s.preSignedURL&&(c=s.preSignedURL),!c)return!1;const E=Da(s,l),N=Ia(E,Ee),D=A+1;if(b(h=>h?{...h,currentFile:N,fileIndex:D,bytesDownloaded:0,totalBytes:0}:null),!fe){const h=await me(c,N);return h&&(A=D,l&&U.push(l)),h}if(!X)return!1;try{const h=await fetch(c);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const M=h.headers.get("content-length"),ae=M?parseInt(M,10):0;b(z=>z?{...z,bytesDownloaded:0,totalBytes:ae}:null);const G=await(await X.getFileHandle(N,{create:!0})).createWritable();if(h.body){const z=h.body.getReader();let pe=0;try{for(;;){const{done:ne,value:ye}=await z.read();if(ne)break;pe+=ye.length,await G.write(ye),b(we=>we?{...we,bytesDownloaded:pe}:null)}}catch(ne){throw await G.abort(),ne}finally{await G.close()}}else try{const z=await h.blob();await G.write(z)}finally{await G.close()}return A=D,l&&U.push(l),!0}catch(h){console.error(`Failed to fetch/write file ${s.fileHandleId}:`,h);try{return me(c,N),A=D,l&&U.push(l),!0}catch(M){return console.error(`Fallback downloadFileTraditional also failed for ${s.fileHandleId}:`,M),!1}}}catch(c){return console.error(`Failed to download file ${s.fileHandleId}:`,c),!1}},Ae=async s=>{console.info(`Attempting to fetch ${s.length} files individually after batch failure`);for(const l of s){if(v.current){console.info("Individual file fetch cancelled by user");break}const c=[l];try{const N=await je({requestedFiles:c,includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1},a);if(N.requestedFiles.length>0){const D=N.requestedFiles[0],h=S.find(ae=>ae.fileEntityId===l.associateObjectId);await he(D,h)||R++}else R++}catch(E){console.error(`Failed to fetch individual file ${l.fileHandleId}:`,E),R++}}};for(const s of ge){if(v.current){console.info("Download cancelled by user");break}let l=null;try{l=await je({requestedFiles:s,includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1},a)}catch(c){console.error("Failed to fetch batch:",c)}if(l)for(let c=0;c<l.requestedFiles.length;c++){if(v.current){console.info("Download cancelled by user during batch processing");break}const E=l.requestedFiles[c],N=S.find(h=>h.fileEntityId===s[c].associateObjectId);await he(E,N)||R++}else await Ae(s)}U.length>0&&(await q({batchToRemove:U.map(s=>({fileEntityId:s.fileEntityId,versionNumber:s.versionNumber}))}),await Y(),window.scrollTo({top:0,behavior:"smooth"})),v.current?k(`Download cancelled. ${A} file${A!==1?"s were":" was"} downloaded before cancellation.`,"info"):A>0?k(`Download started for ${A} file${A!==1?"s":""}${R>0?`. ${R} file${R!==1?"s":""} failed.`:"."}`,R>0?"warning":"success"):k("No files could be downloaded","warning")}catch(w){console.error("Error downloading files:",w);const S=w?.reason??(w instanceof Error?w.message:void 0)??"An error occurred while downloading files";k(S,"danger")}finally{b(null),y(!1),f.current=!1}}},[a,u,d,p,q,Y]),Q=r.useCallback(async()=>{if(!I){y(!0);try{let F=j,w=o;for(;F&&C;){const S=await C();F=S.hasNextPage,S.data&&(w=S.data)}x==="success"&&w?V(w):(y(!1),f.current=!1,k("Failed to load download list. Please try again.","danger"))}catch(F){console.error("Error downloading files:",F),y(!1),f.current=!1;const w=F?.reason??(F instanceof Error?F.message:void 0)??"An error occurred while preparing files for download";k(w,"danger")}}},[I,j,C,x,o,V]),m=r.useCallback(()=>{v.current=!0,b(null),y(!1),f.current=!1},[]);return P?null:e.jsxs(e.Fragment,{children:[e.jsx(da,{open:!!g,title:"Downloading Files",hasCloseButton:!1,onCancel:m,maxWidth:"sm",content:g?e.jsxs(e.Fragment,{children:[e.jsxs($,{variant:"body2",color:"text.secondary",gutterBottom:!0,id:"download-progress-description",children:["File ",g.fileIndex," of"," ",g.totalFiles]}),e.jsx($,{variant:"body2",noWrap:!0,gutterBottom:!0,children:g.currentFile}),g.totalBytes>0&&e.jsxs(e.Fragment,{children:[e.jsx(ve,{variant:"determinate",value:g.bytesDownloaded/g.totalBytes*100,sx:{my:2},"aria-label":"Download progress"}),e.jsxs($,{variant:"body2",color:"text.secondary","aria-live":"polite","aria-atomic":"true",children:[Z(g.bytesDownloaded)," ","of ",Z(g.totalBytes)]})]}),g.totalBytes===0&&e.jsx(ve,{sx:{my:2},"aria-label":"Download progress"})]}):null,actions:e.jsx(B,{variant:"outlined",color:"error",onClick:m,children:"Cancel"}),DialogProps:{"aria-describedby":"download-progress-description",disableEscapeKeyDown:!1}}),e.jsx(B,{variant:i,onClick:()=>{Q()},loading:I,startIcon:e.jsx(ma,{}),children:t})]})}try{re.displayName="DownloadIneligibleForPackagingFilesFromListButton",re.__docgenInfo={description:`Button component that downloads files from the user's download list that are ineligible for packaging.
Uses the infinite query hook to fetch all pages of download list items,
batches requests to get presigned URLs, and triggers browser downloads.`,displayName:"DownloadIneligibleForPackagingFilesFromListButton",props:{buttonText:{defaultValue:null,description:"",name:"buttonText",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"outlined"'},{value:'"contained"'}]}}}}}catch{}function ce(n){const{onViewSharingSettingsClicked:t}=n,{data:i,isLoading:a}=Xe({throwOnError:!0}),u=ua(i);return e.jsx(e.Fragment,{children:e.jsxs(O,{sx:{display:"flex",flexDirection:"column",gap:3,pt:5},children:[u.map((d,p)=>d?e.jsx(fa,{action:d.action,count:d.count,onViewSharingSettingsClicked:t},p):!1),a&&We(3).map(d=>e.jsx(ga,{},d))]})})}try{ce.displayName="DownloadListActionsRequired",ce.__docgenInfo={description:"",displayName:"DownloadListActionsRequired",props:{onViewSharingSettingsClicked:{defaultValue:null,description:'Invoked when a user clicks "View Sharing Settings" for a set of files that require the Download permission',name:"onViewSharingSettingsClicked",required:!1,type:{name:"(benefactorId: string) => void"}}}}}catch{}const Ca=`${Pe}
dl_list_file_entities = syn.get_download_list()`,Sa="synapse get-download-list";function Ie(n){const{accessToken:t}=K(),[i,a]=r.useState(0),[u,d]=r.useState(!1),[p,I]=r.useState(!1),[y,f]=r.useState(!1),[v,g]=r.useState(),b=Je(Ye.DOWNLOAD_CART_INELIGIBLE_FILE_DOWNLOADS),{data:o,isLoading:x,isError:j,error:C,refetch:P}=de();if(r.useEffect(()=>{j&&C&&g(C)},[j,C]),r.useEffect(()=>{o&&o.numberOfFilesRequiringAction==0&&a(1)},[o]),v)return e.jsx(Ze,{error:v});const q=async()=>{await Qe.clearDownloadListV2(t),P()};return e.jsxs("div",{className:"DownloadCartPage",children:[e.jsx("div",{children:e.jsxs("div",{className:"pageHeader",children:[e.jsxs("div",{className:"grid",children:[e.jsx("h3",{className:"pageHeaderTitle",children:"Your Download Cart"}),e.jsx(H,{title:"Immediately removes all items from your download cart",enterNextDelay:300,placement:"right",children:e.jsx(B,{onClick:()=>{q()},variant:"text",color:"primary",startIcon:e.jsx(Ke,{}),children:"Clear Your Download Cart"})})]}),e.jsx($,{className:"description",variant:"body1",sx:{display:{xs:"none",md:"block"}},children:"Your added files can be found in the tabs below. Files requiring actions before download are listed in the Access Actions Required tab, while those ready for download can be found in the Download List tab."})]})}),e.jsx("div",{className:"tabs-container",children:e.jsx("div",{className:"container",children:e.jsxs("ul",{className:"nav nav-tabs",children:[e.jsx("li",{className:`nav-item ${i==0?"active":""}`,"aria-selected":i==0,children:e.jsxs("button",{onClick:()=>a(0),children:["Access Actions Required",!j&&!x&&o&&e.jsx("span",{className:"fileCount",children:o.totalNumberOfFiles-o.numberOfFilesAvailableForDownload})]})}),e.jsx("li",{className:`nav-item ${i==1?"active":""}`,"aria-selected":i==1,children:e.jsxs("button",{onClick:()=>a(1),children:["Download List",!j&&!x&&o&&e.jsx("span",{className:"fileCount",children:o.numberOfFilesAvailableForDownload})]})})]})})}),e.jsxs("div",{style:{display:i==0&&!j&&!x&&o?"block":"none"},children:[o?.numberOfFilesRequiringAction&&o.numberOfFilesRequiringAction>0&&e.jsx("div",{children:e.jsx("div",{className:"actionsRequiredContainer container",children:e.jsx(ce,{...n})})}),o?.numberOfFilesRequiringAction===0&&e.jsx("div",{className:"placeholder",children:e.jsx("div",{children:"No actions are currently required."})})]}),i==1&&!j&&!x&&o&&e.jsxs("div",{children:[o.numberOfFilesAvailableForDownload>0&&e.jsxs("div",{className:"DownloadListTabContent",children:[e.jsx("div",{className:"subSectionOverviewContainer",children:e.jsxs("div",{className:"subSectionOverview container",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"headlineWithHelp",children:[e.jsxs($,{variant:"headline3",sx:{mb:2},children:[e.jsx(_,{icon:"packagableFile"})," Web Download"]}),e.jsx(Fe,{markdownText:"This will allow you to create a .zip file that contains eligible files. Files greater that 100 MB, external links, or files which are not stored on Synapse native storage are ineligible. In most cases, ineligible files can be downloaded individually. External links will require navigation to an external site, which may require a separate login process.",helpUrl:"https://help.synapse.org/docs/Downloading-Data-From-the-Synapse-UI.2004254837.html"})]}),e.jsx($,{variant:"body1",component:"div",sx:{mb:2,display:{xs:"none",md:"block"}},children:e.jsxs("ul",{children:[e.jsx("li",{children:"Eligible files will be added to .ZIP packages of up to 1GB in size"}),e.jsx("li",{children:"If you have more than 1GB, you can create multiple packages"}),e.jsx("li",{children:"Packages will only include files which are hosted on Synapse native storage"}),e.jsx("li",{children:"Packages include a CSV manifest that contains file annotations and other information for each file"})]})}),o.numberOfFilesAvailableForDownloadAndEligibleForPackaging>0&&e.jsx(B,{variant:"contained",onClick:()=>{d(!0)},startIcon:e.jsx(_,{icon:"download",wrap:!1}),children:"Download As .Zip Packages"}),o.numberOfFilesAvailableForDownloadAndEligibleForPackaging==0&&e.jsx(H,{title:"You cannot create a .zip package because there are no eligible files.",enterNextDelay:300,placement:"top",children:e.jsx("span",{children:e.jsx(B,{variant:"contained",disabled:!0,startIcon:e.jsx(_,{icon:"download",wrap:!1}),children:"Download As .Zip Packages"})})}),b&&o.numberOfFilesAvailableForDownloadAndEligibleForPackaging<o.numberOfFilesAvailableForDownload&&e.jsx("div",{style:{marginTop:"1rem"},children:e.jsx(re,{})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"headlineWithHelp",children:[e.jsxs($,{variant:"headline3",sx:{mb:2},children:[e.jsx(_,{icon:"code"})," Programmatic Download"]}),e.jsx(Fe,{markdownText:"This will provide syntax which you can enter into your programmatic client. It is suitable for large files (>100 MB), for packages > 1GB, and for files which arenâ€™t stored on Synapse native storage (e.g. in a special AWS S3 or Google Cloud bucket).  External links will require navigation to an external site, which may require a separate login process.",helpUrl:"https://help.synapse.org/docs/Downloading-Data-Programmatically.2003796248.html"})]}),e.jsx($,{variant:"body1",component:"div",sx:{mb:2,display:{xs:"none",md:"block"}},children:e.jsxs("ul",{children:[e.jsx("li",{children:"Requires installation of a programmatic client (R, Python, CLI)"}),e.jsx("li",{children:"No limit to the file size or the size of the package that can be downloaded"}),e.jsx("li",{children:"Will include files which are hosted on and off Synapse native storage"}),e.jsx("li",{children:"Packages include a CSV manifest that contains file annotations and other information for each file"})]})}),e.jsx(B,{variant:"contained",onClick:()=>{I(!0)},startIcon:e.jsx(_,{icon:"code",wrap:!1}),children:"Create Programmatic Package"})]})]})}),e.jsxs("div",{className:"availableForDownloadTableContainer container",children:[u&&e.jsx(le,{onPackageCreation:()=>{f(!0),P()}}),e.jsx(oe,{})]})]}),o.numberOfFilesAvailableForDownload===0&&e.jsx("div",{className:"placeholder",children:e.jsx("div",{children:"Your Download Cart is currently empty."})})]}),e.jsx(Ce,{show:y,variant:"success",title:"Package Created",description:"A package has been created with eligible files. The items contained in this .zip file have been removed from your list. If your package is over 1GB, you will need to create multiple packages.",autoCloseAfterDelayInSeconds:10,onClose:()=>{f(!1)}}),p&&e.jsx(Ne,{show:!0,onClose:()=>I(!1),title:"Download Programmatically",pythonCode:Ca,cliCode:Sa})]})}try{Ie.displayName="DownloadCartPage",Ie.__docgenInfo={description:"Show the Download Cart page.",displayName:"DownloadCartPage",props:{onViewSharingSettingsClicked:{defaultValue:null,description:'Invoked when a user clicks "View Sharing Settings" for a set of files that require the Download permission',name:"onViewSharingSettingsClicked",required:!1,type:{name:"(benefactorId: string) => void"}}}}}catch{}export{Ie as D,Pe as P,ha as R};
