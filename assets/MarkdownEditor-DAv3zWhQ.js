import{j as a}from"./jsx-runtime-DBMcmXCa.js";import{r as c}from"./index-DBlnVwD8.js";import{T as J}from"./VerificationSubmission-B0kBNeMy.js";import{I as v}from"./IconSvg-DdyM_0Iq.js";import{M as K}from"./MarkdownSynapse-ff_yF9wH.js";import{D as Q}from"./DialogBase-DEZ6K6O4.js";import{U as X}from"./UserSearchBoxV2-DPzot94R.js";import{a as ee}from"./_arrayReduce-CrxnWFSq.js";import{t as _}from"./toString-B0637kMA.js";import{u as re}from"./upperFirst-Uh7_TNSn.js";const ue=["title","bold","italic","strikethrough","code","latex","subscript","superscript","link","image"],A={title:{openSyntax:"###",closeSyntax:""},bold:{openSyntax:"**",closeSyntax:"**"},italic:{openSyntax:"_",closeSyntax:"_"},strikethrough:{openSyntax:"--",closeSyntax:"--"},code:{openSyntax:"```",closeSyntax:"```"},latex:{openSyntax:"$$\\(",closeSyntax:"\\)$$"},subscript:{openSyntax:"~",closeSyntax:"~"},superscript:{openSyntax:"^",closeSyntax:"^"},link:{openSyntax:"[",closeSyntax:"](url)"},image:{openSyntax:"![",closeSyntax:"](image-url)"}};function ae(e){return function(u){return e==null?void 0:e[u]}}var te={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},oe=ae(te),ne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,se="\\u0300-\\u036f",ce="\\ufe20-\\ufe2f",ie="\\u20d0-\\u20ff",de=se+ce+ie,le="["+de+"]",xe=RegExp(le,"g");function fe(e){return e=_(e),e&&e.replace(ne,oe).replace(xe,"")}var pe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function ge(e){return e.match(pe)||[]}var me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function be(e){return me.test(e)}var O="\\ud800-\\udfff",he="\\u0300-\\u036f",Se="\\ufe20-\\ufe2f",ye="\\u20d0-\\u20ff",Me=he+Se+ye,I="\\u2700-\\u27bf",L="a-z\\xdf-\\xf6\\xf8-\\xff",Re="\\xac\\xb1\\xd7\\xf7",Ce="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ee="\\u2000-\\u206f",ve=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",N=Re+Ce+Ee+ve,W="['’]",T="["+N+"]",Te="["+Me+"]",D="\\d+",we="["+I+"]",z="["+L+"]",V="[^"+O+N+D+I+L+$+"]",ke="\\ud83c[\\udffb-\\udfff]",je="(?:"+Te+"|"+ke+")",Ue="[^"+O+"]",Z="(?:\\ud83c[\\udde6-\\uddff]){2}",q="[\\ud800-\\udbff][\\udc00-\\udfff]",l="["+$+"]",_e="\\u200d",w="(?:"+z+"|"+V+")",Oe="(?:"+l+"|"+V+")",k="(?:"+W+"(?:d|ll|m|re|s|t|ve))?",j="(?:"+W+"(?:D|LL|M|RE|S|T|VE))?",F=je+"?",B="["+Ae+"]?",Ie="(?:"+_e+"(?:"+[Ue,Z,q].join("|")+")"+B+F+")*",Le="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ne=B+F+Ie,We="(?:"+[we,Z,q].join("|")+")"+Ne,De=RegExp([l+"?"+z+"+"+k+"(?="+[T,l,"$"].join("|")+")",Oe+"+"+j+"(?="+[T,l+w,"$"].join("|")+")",l+"?"+w+"+"+k,l+"+"+j,$e,Le,D,We].join("|"),"g");function ze(e){return e.match(De)||[]}function Ve(e,u,o){return e=_(e),u=u,u===void 0?be(e)?ze(e):ge(e):e.match(u)||[]}var Ze="['’]",qe=RegExp(Ze,"g");function Fe(e){return function(u){return ee(Ve(fe(u).replace(qe,"")),e,"")}}var Be=Fe(function(e,u,o){return e+(o?" ":"")+re(u)});function y({show:e,onClose:u,handleUserTag:o}){const x=c.useCallback((b,i)=>{b&&i&&o(i.userName),u()},[u,o]);return a.jsx(a.Fragment,{children:a.jsx(Q,{open:e,onCancel:u,title:"Find User or Team",content:a.jsx(X,{placeholder:"Search for a user or team name",onChange:x,typeFilter:J.ALL,focusOnSelect:!0}),sx:{".MuiDialog-paperFullWidth":{overflowY:"visible",".MuiDialogContent-root":{overflowY:"visible"}}}})})}try{y.displayName="UserMentionModal",y.__docgenInfo={description:"",displayName:"UserMentionModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},handleUserTag:{defaultValue:null,description:"",name:"handleUserTag",required:!0,type:{name:"(user: string) => void"}}}}}catch{}const He=["WRITE","PREVIEW"];function U({placeholder:e,text:u,setText:o}){const[x,b]=c.useState("WRITE"),[i,h]=c.useState(0),[M,S]=c.useState(!1),[H,R]=c.useState(!1),s=c.useRef(null);c.useEffect(()=>{const r=s.current;r&&r.setSelectionRange(i,i)},[s,i]),c.useEffect(()=>{var r;(r=s.current)==null||r.focus()},[M]);const P=r=>{const t=[],n=s.current;if(n){const d=n==null?void 0:n.selectionStart,f=u.substring(0,d),p=u.substring(d,u.length);h(d+r.length),t.push(f,`${H?"":"@"}${r.replace(/\s/g,"")}`,p)}o(t.join("")),R(!1)},Y=r=>{const t=s.current&&s.current.selectionStart;t&&t>0&&r.charAt(t-1)==="@"&&(R(!0),S(!0))},G=r=>{const t=s.current;if(t){const n=t.selectionStart,d=t.selectionEnd,f=u.substring(n,d),p=u.substring(0,n),C=u.substring(d,u.length),g=A[r].openSyntax,E=A[r].closeSyntax;switch(r){case"code":{const m=[];m.push(p,g,f,E,C),o(m.join(`\r
`)),t.focus(),h(n+g.length+2);break}case"title":case"bold":case"italic":case"strikethrough":case"latex":case"subscript":case"superscript":case"link":case"image":{const m=`${p}${g}${f}${E}${C}`;t.focus(),h(n+g.length),o(m)}}}};return a.jsxs("div",{className:"MarkdownEditor",children:[a.jsxs("div",{className:"MarkdownEditorControls",children:[a.jsx("div",{className:"Tabs",children:He.map(r=>a.jsx("button",{className:"Tab",role:"tab","aria-selected":r===x,onClick:t=>{t.stopPropagation(),b(r)},children:r},r))}),x==="WRITE"&&a.jsxs("div",{className:"MarkdownEditorControlsToolbar",children:[ue.map(r=>a.jsx("button",{onClick:()=>G(r),children:a.jsx(v,{icon:r,label:Be(r)})},r)),a.jsx("button",{onClick:()=>S(!0),children:a.jsx(v,{icon:"tag",label:"Mention"})})]})]}),a.jsx("div",{children:x==="WRITE"?a.jsx("textarea",{"aria-label":"markdown",onChange:r=>{o(r.target.value),Y(r.target.value)},style:{width:"100%"},rows:6,value:u,ref:s,placeholder:e}):u?a.jsx(K,{markdown:u}):"Nothing to preview"}),a.jsx(y,{show:M,onClose:()=>S(!1),handleUserTag:P})]})}try{U.displayName="MarkdownEditor",U.__docgenInfo={description:"",displayName:"MarkdownEditor",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},setText:{defaultValue:null,description:"",name:"setText",required:!0,type:{name:"(text: string) => void"}}}}}catch{}export{U as M};
