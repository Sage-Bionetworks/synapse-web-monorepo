var fs=Object.defineProperty;var hs=(e,t,r)=>t in e?fs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $=(e,t,r)=>(hs(e,typeof t!="symbol"?t+"":t,r),r);import{j as C,a as W,F as G}from"./jsx-runtime-9dc53467.js";import{a as _o,c as Z,g as ds}from"./_commonjsHelpers-de833af9.js";import{r as Tn,e as Or}from"./util-1969ce74.js";import{u as on,r as ps,b as ms}from"./browser-eb245909.js";import{b as vs}from"./index-cc134824.js";import{a as ys}from"./assert-a1982797.js";import{r as So}from"./index-b7592ba0.js";import{R as re,r as gs}from"./index-76fb7be0.js";import{F as _s}from"./FullWidthAlert-77167a31.js";import{bX as Ss,t as Ye}from"./SynapseClient-7700f4cc.js";import"./getEndpoint-ac94413e.js";import{S as Es}from"./SynapseConstants-c93e8ee4.js";import{z as bs,B as ws}from"./HelpPopover-5a96505e.js";import"./isPlainObject-cb19acc1.js";import"./mapValues-a94bd5d1.js";import"./index.modern-ebb8621a.js";import"./index-c71daf5e.js";import{S as Se,N as te,a as ie}from"./types-a4151757.js";import{I as yr}from"./IconSvg-b2c8dc9b.js";import{c as Eo}from"./cloneDeep-4246eae0.js";import{k as Rs}from"./_getAllKeys-fa8e70cf.js";import{a as Os,h as As,b as Ts,l as H}from"./ThemesPlot-752c0644.js";import{g as Tt}from"./_baseIteratee-19775889.js";import{a as Si}from"./isArray-5e3f9107.js";import{b as Ei,i as Ns}from"./pick-89ddd0c3.js";import{i as bi}from"./_Map-02912bad.js";import{W as Fs}from"./WarningDialog-8df440c1.js";import"./OrientationBanner-c0eacdfc.js";import{B as Cs}from"./Button-a2b8b546.js";var Pe={exports:{}};const Is=!1,xs=/\r?\n/,ks=/\bono[ @]/;function Ps(e){return!!(e&&e.configurable&&typeof e.get=="function")}function Ds(e){return!!(!e||e.writable||typeof e.set=="function")}function bo(e,t){let r=wo(e.stack),n=t?t.stack:void 0;return r&&n?r+`

`+n:r||n}function Ls(e,t,r){r?Object.defineProperty(t,"stack",{get:()=>{let n=e.get.apply(t);return bo({stack:n},r)},enumerable:!1,configurable:!0}):Bs(t,e)}function wo(e){if(e){let t=e.split(xs),r;for(let n=0;n<t.length;n++){let i=t[n];if(ks.test(i))r===void 0&&(r=n);else if(r!==void 0){t.splice(r,n-r);break}}if(t.length>0)return t.join(`
`)}return e}function Bs(e,t){Object.defineProperty(e,"stack",{get:()=>wo(t.get.apply(e)),enumerable:!1,configurable:!0})}const $s=["function","symbol","undefined"],Ms=["constructor","prototype","__proto__"],Us=Object.getPrototypeOf({});function Ro(){let e={},t=this;for(let r of Oo(t))if(typeof r=="string"){let n=t[r],i=typeof n;$s.includes(i)||(e[r]=n)}return e}function Oo(e,t=[]){let r=[];for(;e&&e!==Us;)r=r.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let n=new Set(r);for(let i of t.concat(Ms))n.delete(i);return n}const js=["name","message","stack"];function mr(e,t,r){let n=e;return Hs(n,t),t&&typeof t=="object"&&Vs(n,t),n.toJSON=Ro,r&&typeof r=="object"&&Object.assign(n,r),n}function Hs(e,t){let r=Object.getOwnPropertyDescriptor(e,"stack");Ps(r)?Ls(r,e,t):Ds(r)&&(e.stack=bo(e,t))}function Vs(e,t){let r=Oo(t,js),n=e,i=t;for(let o of r)if(n[o]===void 0)try{n[o]=i[o]}catch{}}function Ws(e){return e=e||{},{concatMessages:e.concatMessages===void 0?!0:!!e.concatMessages,format:e.format===void 0?Is:typeof e.format=="function"?e.format:!1}}function Ys(e,t){let r,n,i,o="";return typeof e[0]=="string"?i=e:typeof e[1]=="string"?(e[0]instanceof Error?r=e[0]:n=e[0],i=e.slice(1)):(r=e[0],n=e[1],i=e.slice(2)),i.length>0&&(t.format?o=t.format.apply(void 0,i):o=i.join(" ")),t.concatMessages&&r&&r.message&&(o+=(o?` 
`:"")+r.message),{originalError:r,props:n,message:o}}const Xe=Nn;function Nn(e,t){t=Ws(t);function r(...n){let{originalError:i,props:o,message:a}=Ys(n,t),l=new e(a);return mr(l,i,o)}return r[Symbol.species]=e,r}Nn.toJSON=function(t){return Ro.call(t)};Nn.extend=function(t,r,n){return n||r instanceof Error?mr(t,r,n):r?mr(t,void 0,r):mr(t)};const wi=De;De.error=new Xe(Error);De.eval=new Xe(EvalError);De.range=new Xe(RangeError);De.reference=new Xe(ReferenceError);De.syntax=new Xe(SyntaxError);De.type=new Xe(TypeError);De.uri=new Xe(URIError);const qs=De;function De(...e){let t=e[0];if(typeof t=="object"&&typeof t.name=="string"){for(let r of Object.values(qs))if(typeof r=="function"&&r.name==="ono"){let n=r[Symbol.species];if(n&&n!==Error&&(t instanceof n||t.name===n.name))return r.apply(void 0,e)}}return De.error.apply(void 0,e)}Tn();const Ks=Object.freeze(Object.defineProperty({__proto__:null,Ono:Xe,default:wi,ono:wi},Symbol.toStringTag,{value:"Module"})),vt=_o(Ks);var an={exports:{}};(function(e,t){let r=/^win/.test(process.platform),n=/\//g,i=/^(\w{2,}):\/\//i,o=e.exports,a=/~1/g,l=/~0/g,f=[/\?/g,"%3F",/\#/g,"%23"],v=[/\%23/g,"#",/\%24/g,"$",/\%26/g,"&",/\%2C/g,",",/\%40/g,"@"];t.parse=on.parse,t.resolve=on.resolve,t.cwd=function(){if(process.browser)return location.href;let m=process.cwd(),y=m.slice(-1);return y==="/"||y==="\\"?m:m+"/"},t.getProtocol=function(m){let y=i.exec(m);if(y)return y[1].toLowerCase()},t.getExtension=function(m){let y=m.lastIndexOf(".");return y>=0?o.stripQuery(m.substr(y).toLowerCase()):""},t.stripQuery=function(m){let y=m.indexOf("?");return y>=0&&(m=m.substr(0,y)),m},t.getHash=function(m){let y=m.indexOf("#");return y>=0?m.substr(y):"#"},t.stripHash=function(m){let y=m.indexOf("#");return y>=0&&(m=m.substr(0,y)),m},t.isHttp=function(m){let y=o.getProtocol(m);return y==="http"||y==="https"?!0:y===void 0?process.browser:!1},t.isFileSystemPath=function(m){if(process.browser)return!1;let y=o.getProtocol(m);return y===void 0||y==="file"},t.fromFileSystemPath=function(m){r&&(m=m.replace(/\\/g,"/")),m=encodeURI(m);for(let y=0;y<f.length;y+=2)m=m.replace(f[y],f[y+1]);return m},t.toFileSystemPath=function(m,y){m=decodeURI(m);for(let R=0;R<v.length;R+=2)m=m.replace(v[R],v[R+1]);let E=m.substr(0,7).toLowerCase()==="file://";return E&&(m=m[7]==="/"?m.substr(8):m.substr(7),r&&m[1]==="/"&&(m=m[0]+":"+m.substr(1)),y?m="file:///"+m:(E=!1,m=r?m:"/"+m)),r&&!E&&(m=m.replace(n,"\\"),m.substr(1,2)===":\\"&&(m=m[0].toUpperCase()+m.substr(1))),m},t.safePointerToPath=function(m){return m.length<=1||m[0]!=="#"||m[1]!=="/"?[]:m.slice(2).split("/").map(y=>decodeURIComponent(y).replace(a,"/").replace(l,"~"))}})(an,an.exports);var Re=an.exports,X={};const{Ono:Ao}=vt,{stripHash:To,toFileSystemPath:zs}=Re,Qe=X.JSONParserError=class extends Error{constructor(t,r){super(),this.code="EUNKNOWN",this.message=t,this.source=r,this.path=null,Ao.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}};Ze(Qe);const No=X.JSONParserErrorGroup=class Fo extends Error{constructor(t){super(),this.files=t,this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${zs(t.$refs._root$Ref.path)}'`,Ao.extend(this)}static getParserErrors(t){const r=[];for(const n of Object.values(t.$refs._$refs))n.errors&&r.push(...n.errors);return r}get errors(){return Fo.getParserErrors(this.files)}};Ze(No);const Gs=X.ParserError=class extends Qe{constructor(t,r){super(`Error parsing ${r}: ${t}`,r),this.code="EPARSER"}};Ze(Gs);const Js=X.UnmatchedParserError=class extends Qe{constructor(t){super(`Could not find parser for "${t}"`,t),this.code="EUNMATCHEDPARSER"}};Ze(Js);const Xs=X.ResolverError=class extends Qe{constructor(t,r){super(t.message||`Error reading file "${r}"`,r),this.code="ERESOLVER","code"in t&&(this.ioErrorCode=String(t.code))}};Ze(Xs);const Qs=X.UnmatchedResolverError=class extends Qe{constructor(t){super(`Could not find resolver for "${t}"`,t),this.code="EUNMATCHEDRESOLVER"}};Ze(Qs);const Zs=X.MissingPointerError=class extends Qe{constructor(t,r){super(`Token "${t}" does not exist.`,To(r)),this.code="EMISSINGPOINTER"}};Ze(Zs);const eu=X.InvalidPointerError=class extends Qe{constructor(t,r){super(`Invalid $ref pointer "${t}". Pointers must begin with "#/"`,To(r)),this.code="EINVALIDPOINTER"}};Ze(eu);function Ze(e){Object.defineProperty(e.prototype,"name",{value:e.name,enumerable:!0})}X.isHandledError=function(e){return e instanceof Qe||e instanceof No};X.normalizeError=function(e){return e.path===null&&(e.path=[]),e};var Hr,Ri;function Ar(){if(Ri)return Hr;Ri=1,Hr=p;const e=er(),t=Re,{JSONParserError:r,InvalidPointerError:n,MissingPointerError:i,isHandledError:o}=X,a=/\//g,l=/~/g,f=/~1/g,v=/~0/g;function p(R,g,b){this.$ref=R,this.path=g,this.originalPath=b||g,this.value=void 0,this.circular=!1,this.indirections=0}p.prototype.resolve=function(R,g,b){let O=p.parse(this.path,this.originalPath);this.value=E(R);for(let S=0;S<O.length;S++){if(m(this,g)&&(this.path=p.join(this.path,O.slice(S))),typeof this.value=="object"&&this.value!==null&&"$ref"in this.value)return this;let A=O[S];if(this.value[A]===void 0||this.value[A]===null)throw this.value=null,new i(A,decodeURI(this.originalPath));this.value=this.value[A]}return(!this.value||this.value.$ref&&t.resolve(this.path,this.value.$ref)!==b)&&m(this,g),this},p.prototype.set=function(R,g,b){let O=p.parse(this.path),S;if(O.length===0)return this.value=g,g;this.value=E(R);for(let A=0;A<O.length-1;A++)m(this,b),S=O[A],this.value&&this.value[S]!==void 0?this.value=this.value[S]:this.value=y(this,S,{});return m(this,b),S=O[O.length-1],y(this,S,g),R},p.parse=function(R,g){let b=t.getHash(R).substr(1);if(!b)return[];b=b.split("/");for(let O=0;O<b.length;O++)b[O]=decodeURIComponent(b[O].replace(f,"/").replace(v,"~"));if(b[0]!=="")throw new n(b,g===void 0?R:g);return b.slice(1)},p.join=function(R,g){R.indexOf("#")===-1&&(R+="#"),g=Array.isArray(g)?g:[g];for(let b=0;b<g.length;b++){let O=g[b];R+="/"+encodeURIComponent(O.replace(l,"~0").replace(a,"~1"))}return R};function m(R,g){if(e.isAllowed$Ref(R.value,g)){let b=t.resolve(R.path,R.value.$ref);if(b===R.path)R.circular=!0;else{let O=R.$ref.$refs._resolve(b,R.path,g);return O===null?!1:(R.indirections+=O.indirections+1,e.isExtended$Ref(R.value)?(R.value=e.dereference(R.value,O.value),!1):(R.$ref=O.$ref,R.path=O.path,R.value=O.value,!0))}}}function y(R,g,b){if(R.value&&typeof R.value=="object")g==="-"&&Array.isArray(R.value)?R.value.push(b):R.value[g]=b;else throw new r(`Error assigning $ref pointer "${R.path}". 
Cannot set "${g}" of a non-object.`);return b}function E(R){if(o(R))throw R;return R}return Hr}var Vr,Oi;function er(){if(Oi)return Vr;Oi=1,Vr=l;const e=Ar(),{InvalidPointerError:t,isHandledError:r,normalizeError:n}=X,{safePointerToPath:i,stripHash:o,getHash:a}=Re;function l(){this.path=void 0,this.value=void 0,this.$refs=void 0,this.pathType=void 0,this.errors=void 0}return l.prototype.addError=function(f){this.errors===void 0&&(this.errors=[]);const v=this.errors.map(({footprint:p})=>p);Array.isArray(f.errors)?this.errors.push(...f.errors.map(n).filter(({footprint:p})=>!v.includes(p))):v.includes(f.footprint)||this.errors.push(n(f))},l.prototype.exists=function(f,v){try{return this.resolve(f,v),!0}catch{return!1}},l.prototype.get=function(f,v){return this.resolve(f,v).value},l.prototype.resolve=function(f,v,p,m){let y=new e(this,f,p);try{return y.resolve(this.value,v,m)}catch(E){if(!v||!v.continueOnError||!r(E))throw E;return E.path===null&&(E.path=i(a(m))),E instanceof t&&(E.source=decodeURI(o(m))),this.addError(E),null}},l.prototype.set=function(f,v){let p=new e(this,f);this.value=p.set(this.value,v)},l.is$Ref=function(f){return f&&typeof f=="object"&&typeof f.$ref=="string"&&f.$ref.length>0},l.isExternal$Ref=function(f){return l.is$Ref(f)&&f.$ref[0]!=="#"},l.isAllowed$Ref=function(f,v){if(l.is$Ref(f)){if(f.$ref.substr(0,2)==="#/"||f.$ref==="#")return!0;if(f.$ref[0]!=="#"&&(!v||v.resolve.external))return!0}},l.isExtended$Ref=function(f){return l.is$Ref(f)&&Object.keys(f).length>1},l.dereference=function(f,v){if(v&&typeof v=="object"&&l.isExtended$Ref(f)){let p={};for(let m of Object.keys(f))m!=="$ref"&&(p[m]=f[m]);for(let m of Object.keys(v))m in p||(p[m]=v[m]);return p}else return v},Vr}const{ono:Co}=vt,tu=er(),Ge=Re;var ru=we;function we(){this.circular=!1,this._$refs={},this._root$Ref=null}we.prototype.paths=function(e){return Io(this._$refs,arguments).map(r=>r.decoded)};we.prototype.values=function(e){let t=this._$refs;return Io(t,arguments).reduce((n,i)=>(n[i.decoded]=t[i.encoded].value,n),{})};we.prototype.toJSON=we.prototype.values;we.prototype.exists=function(e,t){try{return this._resolve(e,"",t),!0}catch{return!1}};we.prototype.get=function(e,t){return this._resolve(e,"",t).value};we.prototype.set=function(e,t){let r=Ge.resolve(this._root$Ref.path,e),n=Ge.stripHash(r),i=this._$refs[n];if(!i)throw Co(`Error resolving $ref pointer "${e}". 
"${n}" not found.`);i.set(r,t)};we.prototype._add=function(e){let t=Ge.stripHash(e),r=new tu;return r.path=t,r.$refs=this,this._$refs[t]=r,this._root$Ref=this._root$Ref||r,r};we.prototype._resolve=function(e,t,r){let n=Ge.resolve(this._root$Ref.path,e),i=Ge.stripHash(n),o=this._$refs[i];if(!o)throw Co(`Error resolving $ref pointer "${e}". 
"${i}" not found.`);return o.resolve(n,r,e,t)};we.prototype._get$Ref=function(e){e=Ge.resolve(this._root$Ref.path,e);let t=Ge.stripHash(e);return this._$refs[t]};function Io(e,t){let r=Object.keys(e);return t=Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t),t.length>0&&t[0]&&(r=r.filter(n=>t.indexOf(e[n].pathType)!==-1)),r.map(n=>({encoded:n,decoded:e[n].pathType==="file"?Ge.toFileSystemPath(n,!0):n}))}var tr={};tr.all=function(e){return Object.keys(e).filter(t=>typeof e[t]=="object").map(t=>(e[t].name=t,e[t]))};tr.filter=function(e,t,r){return e.filter(n=>!!xo(n,t,r))};tr.sort=function(e){for(let t of e)t.order=t.order||Number.MAX_SAFE_INTEGER;return e.sort((t,r)=>t.order-r.order)};tr.run=function(e,t,r,n){let i,o,a=0;return new Promise((l,f)=>{v();function v(){if(i=e[a++],!i)return f(o);try{let E=xo(i,t,r,p,n);if(E&&typeof E.then=="function")E.then(m,y);else if(E!==void 0)m(E);else if(a===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(E){y(E)}}function p(E,R){E?y(E):m(R)}function m(E){l({plugin:i,result:E})}function y(E){o={plugin:i,error:E},v()}})};function xo(e,t,r,n,i){let o=e[t];if(typeof o=="function")return o.apply(e,[r,n,i]);if(!n){if(o instanceof RegExp)return o.test(r.url);if(typeof o=="string")return o===r.extension;if(Array.isArray(o))return o.indexOf(r.extension)!==-1}return o}const{ono:sn}=vt,Ai=Re,qe=tr,{ResolverError:Ti,ParserError:Ni,UnmatchedParserError:nu,UnmatchedResolverError:iu,isHandledError:ou}=X;var ko=au;async function au(e,t,r){e=Ai.stripHash(e);let n=t._add(e),i={url:e,extension:Ai.getExtension(e)};try{const o=await su(i,r,t);n.pathType=o.plugin.name,i.data=o.result;const a=await uu(i,r,t);return n.value=a.result,a.result}catch(o){throw ou(o)&&(n.value=o),o}}function su(e,t,r){return new Promise((n,i)=>{let o=qe.all(t.resolve);o=qe.filter(o,"canRead",e),qe.sort(o),qe.run(o,"read",e,r).then(n,a);function a(l){!l&&t.continueOnError?i(new iu(e.url)):!l||!("error"in l)?i(sn.syntax(`Unable to resolve $ref pointer "${e.url}"`)):l.error instanceof Ti?i(l.error):i(new Ti(l,e.url))}})}function uu(e,t,r){return new Promise((n,i)=>{let o=qe.all(t.parse),a=qe.filter(o,"canParse",e),l=a.length>0?a:o;qe.sort(l),qe.run(l,"parse",e,r).then(f,v);function f(p){!p.plugin.allowEmpty&&lu(p.result)?i(sn.syntax(`Error parsing "${e.url}" as ${p.plugin.name}. 
Parsed value is empty`)):n(p)}function v(p){!p&&t.continueOnError?i(new nu(e.url)):!p||!("error"in p)?i(sn.syntax(`Unable to parse ${e.url}`)):p.error instanceof Ni?i(p.error):i(new Ni(p.error.message,e.url))}})}function lu(e){return e===void 0||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0||Buffer.isBuffer(e)&&e.length===0}const{ParserError:cu}=X;var fu={order:100,allowEmpty:!0,canParse:".json",async parse(e){let t=e.data;if(Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string"){if(t.trim().length===0)return;try{return JSON.parse(t)}catch(r){throw new cu(r.message,e.url)}}else return t}},oe={},Fn={},Oe={};function Po(e){return typeof e>"u"||e===null}function hu(e){return typeof e=="object"&&e!==null}function du(e){return Array.isArray(e)?e:Po(e)?[]:[e]}function pu(e,t){var r,n,i,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)i=o[r],e[i]=t[i];return e}function mu(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function vu(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Oe.isNothing=Po;Oe.isObject=hu;Oe.toArray=du;Oe.repeat=mu;Oe.isNegativeZero=vu;Oe.extend=pu;function Do(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Gt(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Do(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Gt.prototype=Object.create(Error.prototype);Gt.prototype.constructor=Gt;Gt.prototype.toString=function(t){return this.name+": "+Do(this,t)};var rr=Gt,Yt=Oe;function Wr(e,t,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-t>l&&(o=" ... ",t=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+e.slice(t,r).replace(/\t/g,"→")+a,pos:n-t+o.length}}function Yr(e,t){return Yt.repeat(" ",t-e.length)+e}function yu(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",f,v,p=Math.min(e.line+t.linesAfter,i.length).toString().length,m=t.maxLength-(t.indent+p+3);for(f=1;f<=t.linesBefore&&!(a-f<0);f++)v=Wr(e.buffer,n[a-f],i[a-f],e.position-(n[a]-n[a-f]),m),l=Yt.repeat(" ",t.indent)+Yr((e.line-f+1).toString(),p)+" | "+v.str+`
`+l;for(v=Wr(e.buffer,n[a],i[a],e.position,m),l+=Yt.repeat(" ",t.indent)+Yr((e.line+1).toString(),p)+" | "+v.str+`
`,l+=Yt.repeat("-",t.indent+p+3+v.pos)+`^
`,f=1;f<=t.linesAfter&&!(a+f>=i.length);f++)v=Wr(e.buffer,n[a+f],i[a+f],e.position-(n[a]-n[a+f]),m),l+=Yt.repeat(" ",t.indent)+Yr((e.line+f+1).toString(),p)+" | "+v.str+`
`;return l.replace(/\n$/,"")}var gu=yu,Fi=rr,_u=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Su=["scalar","sequence","mapping"];function Eu(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function bu(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(_u.indexOf(r)===-1)throw new Fi('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Eu(t.styleAliases||null),Su.indexOf(this.kind)===-1)throw new Fi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ue=bu,jt=rr,qr=ue;function Ci(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function wu(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function un(e){return this.extend(e)}un.prototype.extend=function(t){var r=[],n=[];if(t instanceof qr)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new jt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof qr))throw new jt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new jt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new jt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof qr))throw new jt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(un.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Ci(i,"implicit"),i.compiledExplicit=Ci(i,"explicit"),i.compiledTypeMap=wu(i.compiledImplicit,i.compiledExplicit),i};var Lo=un,Ru=ue,Bo=new Ru("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Ou=ue,$o=new Ou("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Au=ue,Mo=new Au("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Tu=Lo,Uo=new Tu({explicit:[Bo,$o,Mo]}),Nu=ue;function Fu(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Cu(){return null}function Iu(e){return e===null}var jo=new Nu("tag:yaml.org,2002:null",{kind:"scalar",resolve:Fu,construct:Cu,predicate:Iu,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),xu=ue;function ku(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Pu(e){return e==="true"||e==="True"||e==="TRUE"}function Du(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Ho=new xu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ku,construct:Pu,predicate:Du,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Lu=Oe,Bu=ue;function $u(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Mu(e){return 48<=e&&e<=55}function Uu(e){return 48<=e&&e<=57}function ju(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!$u(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!Mu(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!Uu(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Hu(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Vu(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Lu.isNegativeZero(e)}var Vo=new Bu("tag:yaml.org,2002:int",{kind:"scalar",resolve:ju,construct:Hu,predicate:Vu,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Wo=Oe,Wu=ue,Yu=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function qu(e){return!(e===null||!Yu.test(e)||e[e.length-1]==="_")}function Ku(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var zu=/^[-+]?[0-9]+e/;function Gu(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Wo.isNegativeZero(e))return"-0.0";return r=e.toString(10),zu.test(r)?r.replace("e",".e"):r}function Ju(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Wo.isNegativeZero(e))}var Yo=new Wu("tag:yaml.org,2002:float",{kind:"scalar",resolve:qu,construct:Ku,predicate:Ju,represent:Gu,defaultStyle:"lowercase"}),qo=Uo.extend({implicit:[jo,Ho,Vo,Yo]}),Ko=qo,Xu=ue,zo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Go=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Qu(e){return e===null?!1:zo.exec(e)!==null||Go.exec(e)!==null}function Zu(e){var t,r,n,i,o,a,l,f=0,v=null,p,m,y;if(t=zo.exec(e),t===null&&(t=Go.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(o=+t[4],a=+t[5],l=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(p=+t[10],m=+(t[11]||0),v=(p*60+m)*6e4,t[9]==="-"&&(v=-v)),y=new Date(Date.UTC(r,n,i,o,a,l,f)),v&&y.setTime(y.getTime()-v),y}function el(e){return e.toISOString()}var Jo=new Xu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Qu,construct:Zu,instanceOf:Date,represent:el}),tl=ue;function rl(e){return e==="<<"||e===null}var Xo=new tl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:rl}),nl=ue,Cn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function il(e){if(e===null)return!1;var t,r,n=0,i=e.length,o=Cn;for(r=0;r<i;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function ol(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,o=Cn,a=0,l=[];for(t=0;t<i;t++)t%4===0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(t));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function al(e){var t="",r=0,n,i,o=e.length,a=Cn;for(n=0;n<o;n++)n%3===0&&n&&(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]),r=(r<<8)+e[n];return i=o%3,i===0?(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]):i===2?(t+=a[r>>10&63],t+=a[r>>4&63],t+=a[r<<2&63],t+=a[64]):i===1&&(t+=a[r>>2&63],t+=a[r<<4&63],t+=a[64],t+=a[64]),t}function sl(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Qo=new nl("tag:yaml.org,2002:binary",{kind:"scalar",resolve:il,construct:ol,predicate:sl,represent:al}),ul=ue,ll=Object.prototype.hasOwnProperty,cl=Object.prototype.toString;function fl(e){if(e===null)return!0;var t=[],r,n,i,o,a,l=e;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,cl.call(i)!=="[object Object]")return!1;for(o in i)if(ll.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function hl(e){return e!==null?e:[]}var Zo=new ul("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fl,construct:hl}),dl=ue,pl=Object.prototype.toString;function ml(e){if(e===null)return!0;var t,r,n,i,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(n=a[t],pl.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[t]=[i[0],n[i[0]]]}return!0}function vl(e){if(e===null)return[];var t,r,n,i,o,a=e;for(o=new Array(a.length),t=0,r=a.length;t<r;t+=1)n=a[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}var ea=new dl("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ml,construct:vl}),yl=ue,gl=Object.prototype.hasOwnProperty;function _l(e){if(e===null)return!0;var t,r=e;for(t in r)if(gl.call(r,t)&&r[t]!==null)return!1;return!0}function Sl(e){return e!==null?e:{}}var ta=new yl("tag:yaml.org,2002:set",{kind:"mapping",resolve:_l,construct:Sl}),In=Ko.extend({implicit:[Jo,Xo],explicit:[Qo,Zo,ea,ta]}),pt=Oe,ra=rr,El=gu,bl=In,Je=Object.prototype.hasOwnProperty,gr=1,na=2,ia=3,_r=4,Kr=1,wl=2,Ii=3,Rl=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ol=/[\x85\u2028\u2029]/,Al=/[,\[\]\{\}]/,oa=/^(?:!|!!|![a-z\-]+!)$/i,aa=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xi(e){return Object.prototype.toString.call(e)}function ke(e){return e===10||e===13}function mt(e){return e===9||e===32}function fe(e){return e===9||e===32||e===10||e===13}function Nt(e){return e===44||e===91||e===93||e===123||e===125}function Tl(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Nl(e){return e===120?2:e===117?4:e===85?8:0}function Fl(e){return 48<=e&&e<=57?e-48:-1}function ki(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function Cl(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var sa=new Array(256),ua=new Array(256);for(var bt=0;bt<256;bt++)sa[bt]=ki(bt)?1:0,ua[bt]=ki(bt);function Il(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||bl,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function la(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=El(r),new ra(t,r)}function D(e,t){throw la(e,t)}function Sr(e,t){e.onWarning&&e.onWarning.call(null,la(e,t))}var Pi={YAML:function(t,r,n){var i,o,a;t.version!==null&&D(t,"duplication of %YAML directive"),n.length!==1&&D(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&D(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&D(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&Sr(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,o;n.length!==2&&D(t,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],oa.test(i)||D(t,"ill-formed tag handle (first argument) of the TAG directive"),Je.call(t.tagMap,i)&&D(t,'there is a previously declared suffix for "'+i+'" tag handle'),aa.test(o)||D(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{D(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Ke(e,t,r,n){var i,o,a,l;if(t<r){if(l=e.input.slice(t,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||D(e,"expected valid JSON character");else Rl.test(l)&&D(e,"the stream contains non-printable characters");e.result+=l}}function Di(e,t,r,n){var i,o,a,l;for(pt.isObject(r)||D(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],Je.call(t,o)||(t[o]=r[o],n[o]=!0)}function Ft(e,t,r,n,i,o,a,l,f){var v,p;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),v=0,p=i.length;v<p;v+=1)Array.isArray(i[v])&&D(e,"nested arrays are not supported inside keys"),typeof i=="object"&&xi(i[v])==="[object Object]"&&(i[v]="[object Object]");if(typeof i=="object"&&xi(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(v=0,p=o.length;v<p;v+=1)Di(e,t,o[v],r);else Di(e,t,o,r);else!e.json&&!Je.call(r,i)&&Je.call(t,i)&&(e.line=a||e.line,e.lineStart=l||e.lineStart,e.position=f||e.position,D(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete r[i];return t}function xn(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):D(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function J(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;mt(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(ke(i))for(xn(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Sr(e,"deficient indentation"),n}function Tr(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||fe(r)))}function kn(e,t){t===1?e.result+=" ":t>1&&(e.result+=pt.repeat(`
`,t-1))}function xl(e,t,r){var n,i,o,a,l,f,v,p,m=e.kind,y=e.result,E;if(E=e.input.charCodeAt(e.position),fe(E)||Nt(E)||E===35||E===38||E===42||E===33||E===124||E===62||E===39||E===34||E===37||E===64||E===96||(E===63||E===45)&&(i=e.input.charCodeAt(e.position+1),fe(i)||r&&Nt(i)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,l=!1;E!==0;){if(E===58){if(i=e.input.charCodeAt(e.position+1),fe(i)||r&&Nt(i))break}else if(E===35){if(n=e.input.charCodeAt(e.position-1),fe(n))break}else{if(e.position===e.lineStart&&Tr(e)||r&&Nt(E))break;if(ke(E))if(f=e.line,v=e.lineStart,p=e.lineIndent,J(e,!1,-1),e.lineIndent>=t){l=!0,E=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=f,e.lineStart=v,e.lineIndent=p;break}}l&&(Ke(e,o,a,!1),kn(e,e.line-f),o=a=e.position,l=!1),mt(E)||(a=e.position+1),E=e.input.charCodeAt(++e.position)}return Ke(e,o,a,!1),e.result?!0:(e.kind=m,e.result=y,!1)}function kl(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Ke(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else ke(r)?(Ke(e,n,i,!0),kn(e,J(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Tr(e)?D(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);D(e,"unexpected end of the stream within a single quoted scalar")}function Pl(e,t){var r,n,i,o,a,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Ke(e,r,e.position,!0),e.position++,!0;if(l===92){if(Ke(e,r,e.position,!0),l=e.input.charCodeAt(++e.position),ke(l))J(e,!1,t);else if(l<256&&sa[l])e.result+=ua[l],e.position++;else if((a=Nl(l))>0){for(i=a,o=0;i>0;i--)l=e.input.charCodeAt(++e.position),(a=Tl(l))>=0?o=(o<<4)+a:D(e,"expected hexadecimal character");e.result+=Cl(o),e.position++}else D(e,"unknown escape sequence");r=n=e.position}else ke(l)?(Ke(e,r,n,!0),kn(e,J(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Tr(e)?D(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}D(e,"unexpected end of the stream within a double quoted scalar")}function Dl(e,t){var r=!0,n,i,o,a=e.tag,l,f=e.anchor,v,p,m,y,E,R=Object.create(null),g,b,O,S;if(S=e.input.charCodeAt(e.position),S===91)p=93,E=!1,l=[];else if(S===123)p=125,E=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),S=e.input.charCodeAt(++e.position);S!==0;){if(J(e,!0,t),S=e.input.charCodeAt(e.position),S===p)return e.position++,e.tag=a,e.anchor=f,e.kind=E?"mapping":"sequence",e.result=l,!0;r?S===44&&D(e,"expected the node content, but found ','"):D(e,"missed comma between flow collection entries"),b=g=O=null,m=y=!1,S===63&&(v=e.input.charCodeAt(e.position+1),fe(v)&&(m=y=!0,e.position++,J(e,!0,t))),n=e.line,i=e.lineStart,o=e.position,It(e,t,gr,!1,!0),b=e.tag,g=e.result,J(e,!0,t),S=e.input.charCodeAt(e.position),(y||e.line===n)&&S===58&&(m=!0,S=e.input.charCodeAt(++e.position),J(e,!0,t),It(e,t,gr,!1,!0),O=e.result),E?Ft(e,l,R,b,g,O,n,i,o):m?l.push(Ft(e,null,R,b,g,O,n,i,o)):l.push(g),J(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(r=!0,S=e.input.charCodeAt(++e.position)):r=!1}D(e,"unexpected end of the stream within a flow collection")}function Ll(e,t){var r,n,i=Kr,o=!1,a=!1,l=t,f=0,v=!1,p,m;if(m=e.input.charCodeAt(e.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(e.kind="scalar",e.result="";m!==0;)if(m=e.input.charCodeAt(++e.position),m===43||m===45)Kr===i?i=m===43?Ii:wl:D(e,"repeat of a chomping mode identifier");else if((p=Fl(m))>=0)p===0?D(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?D(e,"repeat of an indentation width identifier"):(l=t+p-1,a=!0);else break;if(mt(m)){do m=e.input.charCodeAt(++e.position);while(mt(m));if(m===35)do m=e.input.charCodeAt(++e.position);while(!ke(m)&&m!==0)}for(;m!==0;){for(xn(e),e.lineIndent=0,m=e.input.charCodeAt(e.position);(!a||e.lineIndent<l)&&m===32;)e.lineIndent++,m=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>l&&(l=e.lineIndent),ke(m)){f++;continue}if(e.lineIndent<l){i===Ii?e.result+=pt.repeat(`
`,o?1+f:f):i===Kr&&o&&(e.result+=`
`);break}for(n?mt(m)?(v=!0,e.result+=pt.repeat(`
`,o?1+f:f)):v?(v=!1,e.result+=pt.repeat(`
`,f+1)):f===0?o&&(e.result+=" "):e.result+=pt.repeat(`
`,f):e.result+=pt.repeat(`
`,o?1+f:f),o=!0,a=!0,f=0,r=e.position;!ke(m)&&m!==0;)m=e.input.charCodeAt(++e.position);Ke(e,r,e.position,!1)}return!0}function Li(e,t){var r,n=e.tag,i=e.anchor,o=[],a,l=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),!(f!==45||(a=e.input.charCodeAt(e.position+1),!fe(a))));){if(l=!0,e.position++,J(e,!0,-1)&&e.lineIndent<=t){o.push(null),f=e.input.charCodeAt(e.position);continue}if(r=e.line,It(e,t,ia,!1,!0),o.push(e.result),J(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&f!==0)D(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function Bl(e,t,r){var n,i,o,a,l,f,v=e.tag,p=e.anchor,m={},y=Object.create(null),E=null,R=null,g=null,b=!1,O=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=m),S=e.input.charCodeAt(e.position);S!==0;){if(!b&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,D(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(S===63||S===58)&&fe(n))S===63?(b&&(Ft(e,m,y,E,R,null,a,l,f),E=R=g=null),O=!0,b=!0,i=!0):b?(b=!1,i=!0):D(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=n;else{if(a=e.line,l=e.lineStart,f=e.position,!It(e,r,na,!1,!0))break;if(e.line===o){for(S=e.input.charCodeAt(e.position);mt(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),fe(S)||D(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Ft(e,m,y,E,R,null,a,l,f),E=R=g=null),O=!0,b=!1,i=!1,E=e.tag,R=e.result;else if(O)D(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=v,e.anchor=p,!0}else if(O)D(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=v,e.anchor=p,!0}if((e.line===o||e.lineIndent>t)&&(b&&(a=e.line,l=e.lineStart,f=e.position),It(e,t,_r,!0,i)&&(b?R=e.result:g=e.result),b||(Ft(e,m,y,E,R,g,a,l,f),E=R=g=null),J(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&S!==0)D(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&Ft(e,m,y,E,R,null,a,l,f),O&&(e.tag=v,e.anchor=p,e.kind="mapping",e.result=m),O}function $l(e){var t,r=!1,n=!1,i,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&D(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(r=!0,a=e.input.charCodeAt(++e.position)):a===33?(n=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):D(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!fe(a);)a===33&&(n?D(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),oa.test(i)||D(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),Al.test(o)&&D(e,"tag suffix cannot contain flow indicator characters")}o&&!aa.test(o)&&D(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{D(e,"tag name is malformed: "+o)}return r?e.tag=o:Je.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:D(e,'undeclared tag handle "'+i+'"'),!0}function Ml(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&D(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!fe(r)&&!Nt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&D(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Ul(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!fe(n)&&!Nt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&D(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Je.call(e.anchorMap,r)||D(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],J(e,!0,-1),!0}function It(e,t,r,n,i){var o,a,l,f=1,v=!1,p=!1,m,y,E,R,g,b;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=l=_r===r||ia===r,n&&J(e,!0,-1)&&(v=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;$l(e)||Ml(e);)J(e,!0,-1)?(v=!0,l=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):l=!1;if(l&&(l=v||i),(f===1||_r===r)&&(gr===r||na===r?g=t:g=t+1,b=e.position-e.lineStart,f===1?l&&(Li(e,b)||Bl(e,b,g))||Dl(e,g)?p=!0:(a&&Ll(e,g)||kl(e,g)||Pl(e,g)?p=!0:Ul(e)?(p=!0,(e.tag!==null||e.anchor!==null)&&D(e,"alias node should not have any properties")):xl(e,g,gr===r)&&(p=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(p=l&&Li(e,b))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&D(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),m=0,y=e.implicitTypes.length;m<y;m+=1)if(R=e.implicitTypes[m],R.resolve(e.result)){e.result=R.construct(e.result),e.tag=R.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Je.call(e.typeMap[e.kind||"fallback"],e.tag))R=e.typeMap[e.kind||"fallback"][e.tag];else for(R=null,E=e.typeMap.multi[e.kind||"fallback"],m=0,y=E.length;m<y;m+=1)if(e.tag.slice(0,E[m].tag.length)===E[m].tag){R=E[m];break}R||D(e,"unknown tag !<"+e.tag+">"),e.result!==null&&R.kind!==e.kind&&D(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+R.kind+'", not "'+e.kind+'"'),R.resolve(e.result,e.tag)?(e.result=R.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):D(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||p}function jl(e){var t=e.position,r,n,i,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(J(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),r=e.position;a!==0&&!fe(a);)a=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&D(e,"directive name must not be less than one character in length");a!==0;){for(;mt(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!ke(a));break}if(ke(a))break;for(r=e.position;a!==0&&!fe(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}a!==0&&xn(e),Je.call(Pi,n)?Pi[n](e,n,i):Sr(e,'unknown document directive "'+n+'"')}if(J(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,J(e,!0,-1)):o&&D(e,"directives end mark is expected"),It(e,e.lineIndent-1,_r,!1,!0),J(e,!0,-1),e.checkLineBreaks&&Ol.test(e.input.slice(t,e.position))&&Sr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Tr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,J(e,!0,-1));return}if(e.position<e.length-1)D(e,"end of the stream or a document separator is expected");else return}function ca(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Il(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,D(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)jl(r);return r.documents}function Hl(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=ca(e,r);if(typeof t!="function")return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function Vl(e,t){var r=ca(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ra("expected a single document in the stream, but found more")}}Fn.loadAll=Hl;Fn.load=Vl;var fa={},Nr=Oe,nr=rr,Wl=In,ha=Object.prototype.toString,da=Object.prototype.hasOwnProperty,Pn=65279,Yl=9,Jt=10,ql=13,Kl=32,zl=33,Gl=34,ln=35,Jl=37,Xl=38,Ql=39,Zl=42,pa=44,ec=45,Er=58,tc=61,rc=62,nc=63,ic=64,ma=91,va=93,oc=96,ya=123,ac=124,ga=125,ae={};ae[0]="\\0";ae[7]="\\a";ae[8]="\\b";ae[9]="\\t";ae[10]="\\n";ae[11]="\\v";ae[12]="\\f";ae[13]="\\r";ae[27]="\\e";ae[34]='\\"';ae[92]="\\\\";ae[133]="\\N";ae[160]="\\_";ae[8232]="\\L";ae[8233]="\\P";var sc=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],uc=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function lc(e,t){var r,n,i,o,a,l,f;if(t===null)return{};for(r={},n=Object.keys(t),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),f=e.compiledTypeMap.fallback[a],f&&da.call(f.styleAliases,l)&&(l=f.styleAliases[l]),r[a]=l;return r}function cc(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new nr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Nr.repeat("0",n-t.length)+t}var fc=1,Xt=2;function hc(e){this.schema=e.schema||Wl,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Nr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=lc(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Xt:fc,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Bi(e,t){for(var r=Nr.repeat(" ",t),n=0,i=-1,o="",a,l=e.length;n<l;)i=e.indexOf(`
`,n),i===-1?(a=e.slice(n),n=l):(a=e.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function cn(e,t){return`
`+Nr.repeat(" ",e.indent*t)}function dc(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function br(e){return e===Kl||e===Yl}function Qt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Pn||65536<=e&&e<=1114111}function $i(e){return Qt(e)&&e!==Pn&&e!==ql&&e!==Jt}function Mi(e,t,r){var n=$i(e),i=n&&!br(e);return(r?n:n&&e!==pa&&e!==ma&&e!==va&&e!==ya&&e!==ga)&&e!==ln&&!(t===Er&&!i)||$i(t)&&!br(t)&&e===ln||t===Er&&i}function pc(e){return Qt(e)&&e!==Pn&&!br(e)&&e!==ec&&e!==nc&&e!==Er&&e!==pa&&e!==ma&&e!==va&&e!==ya&&e!==ga&&e!==ln&&e!==Xl&&e!==Zl&&e!==zl&&e!==ac&&e!==tc&&e!==rc&&e!==Ql&&e!==Gl&&e!==Jl&&e!==ic&&e!==oc}function mc(e){return!br(e)&&e!==Er}function qt(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function _a(e){var t=/^\n* /;return t.test(e)}var Sa=1,fn=2,Ea=3,ba=4,Ot=5;function vc(e,t,r,n,i,o,a,l){var f,v=0,p=null,m=!1,y=!1,E=n!==-1,R=-1,g=pc(qt(e,0))&&mc(qt(e,e.length-1));if(t||a)for(f=0;f<e.length;v>=65536?f+=2:f++){if(v=qt(e,f),!Qt(v))return Ot;g=g&&Mi(v,p,l),p=v}else{for(f=0;f<e.length;v>=65536?f+=2:f++){if(v=qt(e,f),v===Jt)m=!0,E&&(y=y||f-R-1>n&&e[R+1]!==" ",R=f);else if(!Qt(v))return Ot;g=g&&Mi(v,p,l),p=v}y=y||E&&f-R-1>n&&e[R+1]!==" "}return!m&&!y?g&&!a&&!i(e)?Sa:o===Xt?Ot:fn:r>9&&_a(e)?Ot:a?o===Xt?Ot:fn:y?ba:Ea}function yc(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===Xt?'""':"''";if(!e.noCompatMode&&(sc.indexOf(t)!==-1||uc.test(t)))return e.quotingType===Xt?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=n||e.flowLevel>-1&&r>=e.flowLevel;function f(v){return dc(e,v)}switch(vc(t,l,e.indent,a,f,e.quotingType,e.forceQuotes&&!n,i)){case Sa:return t;case fn:return"'"+t.replace(/'/g,"''")+"'";case Ea:return"|"+Ui(t,e.indent)+ji(Bi(t,o));case ba:return">"+Ui(t,e.indent)+ji(Bi(gc(t,a),o));case Ot:return'"'+_c(t)+'"';default:throw new nr("impossible error: invalid scalar style")}}()}function Ui(e,t){var r=_a(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return r+o+`
`}function ji(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function gc(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var v=e.indexOf(`
`);return v=v!==-1?v:e.length,r.lastIndex=v,Hi(e.slice(0,v),t)}(),i=e[0]===`
`||e[0]===" ",o,a;a=r.exec(e);){var l=a[1],f=a[2];o=f[0]===" ",n+=l+(!i&&!o&&f!==""?`
`:"")+Hi(f,t),i=o}return n}function Hi(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,f="";n=r.exec(e);)l=n.index,l-i>t&&(o=a>i?a:l,f+=`
`+e.slice(i,o),i=o+1),a=l;return f+=`
`,e.length-i>t&&a>i?f+=e.slice(i,a)+`
`+e.slice(a+1):f+=e.slice(i),f.slice(1)}function _c(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=qt(e,i),n=ae[r],!n&&Qt(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||cc(r);return t}function Sc(e,t,r){var n="",i=e.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],e.replacer&&(l=e.replacer.call(r,String(o),l)),(je(e,t,l,!1,!1)||typeof l>"u"&&je(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Vi(e,t,r,n){var i="",o=e.tag,a,l,f;for(a=0,l=r.length;a<l;a+=1)f=r[a],e.replacer&&(f=e.replacer.call(r,String(a),f)),(je(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&je(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=cn(e,t)),e.dump&&Jt===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Ec(e,t,r){var n="",i=e.tag,o=Object.keys(r),a,l,f,v,p;for(a=0,l=o.length;a<l;a+=1)p="",n!==""&&(p+=", "),e.condenseFlow&&(p+='"'),f=o[a],v=r[f],e.replacer&&(v=e.replacer.call(r,f,v)),je(e,t,f,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),je(e,t,v,!1,!1)&&(p+=e.dump,n+=p));e.tag=i,e.dump="{"+n+"}"}function bc(e,t,r,n){var i="",o=e.tag,a=Object.keys(r),l,f,v,p,m,y;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new nr("sortKeys must be a boolean or a function");for(l=0,f=a.length;l<f;l+=1)y="",(!n||i!=="")&&(y+=cn(e,t)),v=a[l],p=r[v],e.replacer&&(p=e.replacer.call(r,v,p)),je(e,t+1,v,!0,!0,!0)&&(m=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,m&&(e.dump&&Jt===e.dump.charCodeAt(0)?y+="?":y+="? "),y+=e.dump,m&&(y+=cn(e,t)),je(e,t+1,p,!0,m)&&(e.dump&&Jt===e.dump.charCodeAt(0)?y+=":":y+=": ",y+=e.dump,i+=y));e.tag=o,e.dump=i||"{}"}function Wi(e,t,r){var n,i,o,a,l,f;for(i=r?e.explicitTypes:e.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(r?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(f=e.styleMap[l.tag]||l.defaultStyle,ha.call(l.represent)==="[object Function]")n=l.represent(t,f);else if(da.call(l.represent,f))n=l.represent[f](t,f);else throw new nr("!<"+l.tag+'> tag resolver accepts not "'+f+'" style');e.dump=n}return!0}return!1}function je(e,t,r,n,i,o,a){e.tag=null,e.dump=r,Wi(e,r,!1)||Wi(e,r,!0);var l=ha.call(e.dump),f=n,v;n&&(n=e.flowLevel<0||e.flowLevel>t);var p=l==="[object Object]"||l==="[object Array]",m,y;if(p&&(m=e.duplicates.indexOf(r),y=m!==-1),(e.tag!==null&&e.tag!=="?"||y||e.indent!==2&&t>0)&&(i=!1),y&&e.usedDuplicates[m])e.dump="*ref_"+m;else{if(p&&y&&!e.usedDuplicates[m]&&(e.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(e.dump).length!==0?(bc(e,t,e.dump,i),y&&(e.dump="&ref_"+m+e.dump)):(Ec(e,t,e.dump),y&&(e.dump="&ref_"+m+" "+e.dump));else if(l==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?Vi(e,t-1,e.dump,i):Vi(e,t,e.dump,i),y&&(e.dump="&ref_"+m+e.dump)):(Sc(e,t,e.dump),y&&(e.dump="&ref_"+m+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&yc(e,e.dump,t,o,f);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new nr("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(v=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?v="!"+v:v.slice(0,18)==="tag:yaml.org,2002:"?v="!!"+v.slice(18):v="!<"+v+">",e.dump=v+" "+e.dump)}return!0}function wc(e,t){var r=[],n=[],i,o;for(hn(e,r,n),i=0,o=n.length;i<o;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(o)}function hn(e,t,r){var n,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)hn(e[i],t,r);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)hn(e[n[i]],t,r)}function Rc(e,t){t=t||{};var r=new hc(t);r.noRefs||wc(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),je(r,0,n,!0,!0)?r.dump+`
`:""}fa.dump=Rc;var wa=Fn,Oc=fa;function Dn(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}oe.Type=ue;oe.Schema=Lo;oe.FAILSAFE_SCHEMA=Uo;oe.JSON_SCHEMA=qo;oe.CORE_SCHEMA=Ko;oe.DEFAULT_SCHEMA=In;oe.load=wa.load;oe.loadAll=wa.loadAll;oe.dump=Oc.dump;oe.YAMLException=rr;oe.types={binary:Qo,float:Yo,map:Mo,null:jo,pairs:ea,set:ta,timestamp:Jo,bool:Ho,int:Vo,merge:Xo,omap:Zo,seq:$o,str:Bo};oe.safeLoad=Dn("safeLoad","load");oe.safeLoadAll=Dn("safeLoadAll","loadAll");oe.safeDump=Dn("safeDump","dump");const{ParserError:Ac}=X,Tc=oe,{JSON_SCHEMA:Nc}=oe;var Fc={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let t=e.data;if(Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string")try{return Tc.load(t,{schema:Nc})}catch(r){throw new Ac(r.message,e.url)}else return t}};const{ParserError:Cc}=X;let Ic=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;var xc={order:300,allowEmpty:!0,encoding:"utf8",canParse(e){return(typeof e.data=="string"||Buffer.isBuffer(e.data))&&Ic.test(e.url)},parse(e){if(typeof e.data=="string")return e.data;if(Buffer.isBuffer(e.data))return e.data.toString(this.encoding);throw new Cc("data is not text",e.url)}};let kc=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;var Pc={order:400,allowEmpty:!0,canParse(e){return Buffer.isBuffer(e.data)&&kc.test(e.url)},parse(e){return Buffer.isBuffer(e.data)?e.data:Buffer.from(e.data)}},dn={exports:{}},yt={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.constants=void 0;et.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};var pn={};typeof BigInt=="function"?pn.default=BigInt:pn.default=function(){throw new Error("BigInt is not supported in this environment.")};Object.defineProperty(yt,"__esModule",{value:!0});yt.Stats=void 0;var tt=et,Dc=pn,Lc=tt.constants.S_IFMT,Bc=tt.constants.S_IFDIR,$c=tt.constants.S_IFREG,Mc=tt.constants.S_IFBLK,Uc=tt.constants.S_IFCHR,jc=tt.constants.S_IFLNK,Hc=tt.constants.S_IFIFO,Vc=tt.constants.S_IFSOCK,Ra=function(){function e(){}return e.build=function(t,r){r===void 0&&(r=!1);var n=new e,i=t.uid,o=t.gid,a=t.atime,l=t.mtime,f=t.ctime,v=r?Dc.default:function(m){return m};n.uid=v(i),n.gid=v(o),n.rdev=v(0),n.blksize=v(4096),n.ino=v(t.ino),n.size=v(t.getSize()),n.blocks=v(1),n.atime=a,n.mtime=l,n.ctime=f,n.birthtime=f,n.atimeMs=v(a.getTime()),n.mtimeMs=v(l.getTime());var p=v(f.getTime());return n.ctimeMs=p,n.birthtimeMs=p,n.dev=v(0),n.mode=v(t.mode),n.nlink=v(t.nlink),n},e.prototype._checkModeProperty=function(t){return(Number(this.mode)&Lc)===t},e.prototype.isDirectory=function(){return this._checkModeProperty(Bc)},e.prototype.isFile=function(){return this._checkModeProperty($c)},e.prototype.isBlockDevice=function(){return this._checkModeProperty(Mc)},e.prototype.isCharacterDevice=function(){return this._checkModeProperty(Uc)},e.prototype.isSymbolicLink=function(){return this._checkModeProperty(jc)},e.prototype.isFIFO=function(){return this._checkModeProperty(Hc)},e.prototype.isSocket=function(){return this._checkModeProperty(Vc)},e}();yt.Stats=Ra;yt.default=Ra;var xt={},Ln={},Fr={};(function(e){var t=Z&&Z.__spreadArray||function(a,l,f){if(f||arguments.length===2)for(var v=0,p=l.length,m;v<p;v++)(m||!(v in l))&&(m||(m=Array.prototype.slice.call(l,0,v)),m[v]=l[v]);return a.concat(m||Array.prototype.slice.call(l))};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferFrom=e.bufferAllocUnsafe=e.Buffer=void 0;var r=vs;Object.defineProperty(e,"Buffer",{enumerable:!0,get:function(){return r.Buffer}});function n(a){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];return new(r.Buffer.bind.apply(r.Buffer,t([void 0,a],l,!1)))}var i=r.Buffer.allocUnsafe||n;e.bufferAllocUnsafe=i;var o=r.Buffer.from||n;e.bufferFrom=o})(Fr);var Bn={};(function(e){var t=Z&&Z.__extends||function(){var g=function(b,O){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,A){S.__proto__=A}||function(S,A){for(var N in A)Object.prototype.hasOwnProperty.call(A,N)&&(S[N]=A[N])},g(b,O)};return function(b,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");g(b,O);function S(){this.constructor=b}b.prototype=O===null?Object.create(O):(S.prototype=O.prototype,new S)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.E=e.AssertionError=e.message=e.RangeError=e.TypeError=e.Error=void 0;var r=ys,n=Tn(),i=typeof Symbol>"u"?"_kCode":Symbol("code"),o={};function a(g){return function(b){t(O,b);function O(S){for(var A=[],N=1;N<arguments.length;N++)A[N-1]=arguments[N];var T=b.call(this,v(S,A))||this;return T.code=S,T[i]=S,T.name="".concat(b.prototype.name," [").concat(T[i],"]"),T}return O}(g)}var l=typeof globalThis<"u"?globalThis:Z,f=function(g){t(b,g);function b(O){var S=this;if(typeof O!="object"||O===null)throw new e.TypeError("ERR_INVALID_ARG_TYPE","options","object");return O.message?S=g.call(this,O.message)||this:S=g.call(this,"".concat(n.inspect(O.actual).slice(0,128)," ")+"".concat(O.operator," ").concat(n.inspect(O.expected).slice(0,128)))||this,S.generatedMessage=!O.message,S.name="AssertionError [ERR_ASSERTION]",S.code="ERR_ASSERTION",S.actual=O.actual,S.expected=O.expected,S.operator=O.operator,e.Error.captureStackTrace(S,O.stackStartFunction),S}return b}(l.Error);e.AssertionError=f;function v(g,b){r.strictEqual(typeof g,"string");var O=o[g];r(O,"An invalid error message key was used: ".concat(g,"."));var S;if(typeof O=="function")S=O;else{if(S=n.format,b===void 0||b.length===0)return O;b.unshift(O)}return String(S.apply(null,b))}e.message=v;function p(g,b){o[g]=typeof b=="function"?b:String(b)}e.E=p,e.Error=a(l.Error),e.TypeError=a(l.TypeError),e.RangeError=a(l.RangeError),p("ERR_ARG_NOT_ITERABLE","%s must be iterable"),p("ERR_ASSERTION","%s"),p("ERR_BUFFER_OUT_OF_BOUNDS",R),p("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),p("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),p("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),p("ERR_DNS_SET_SERVERS_FAILED",function(g,b){return'c-ares failed to set servers: "'.concat(g,'" [').concat(b,"]")}),p("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),p("ERR_ENCODING_NOT_SUPPORTED",function(g){return'The "'.concat(g,'" encoding is not supported')}),p("ERR_ENCODING_INVALID_ENCODED_DATA",function(g){return"The encoded data was not valid for encoding ".concat(g)}),p("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),p("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),p("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),p("ERR_INDEX_OUT_OF_RANGE","Index out of range"),p("ERR_INVALID_ARG_TYPE",m),p("ERR_INVALID_ARRAY_LENGTH",function(g,b,O){return r.strictEqual(typeof O,"number"),'The array "'.concat(g,'" (length ').concat(O,") must be of length ").concat(b,".")}),p("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),p("ERR_INVALID_CALLBACK","Callback must be a function"),p("ERR_INVALID_CHAR","Invalid character in %s"),p("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),p("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),p("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),p("ERR_INVALID_FILE_URL_PATH","File URL path %s"),p("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),p("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),p("ERR_INVALID_OPT_VALUE",function(g,b){return'The value "'.concat(String(b),'" is invalid for option "').concat(g,'"')}),p("ERR_INVALID_OPT_VALUE_ENCODING",function(g){return'The value "'.concat(String(g),'" is invalid for option "encoding"')}),p("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),p("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),p("ERR_INVALID_THIS",'Value of "this" must be of type %s'),p("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),p("ERR_INVALID_URL","Invalid URL: %s"),p("ERR_INVALID_URL_SCHEME",function(g){return"The URL must be ".concat(E(g,"scheme"))}),p("ERR_IPC_CHANNEL_CLOSED","Channel closed"),p("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),p("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),p("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),p("ERR_MISSING_ARGS",y),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),p("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),p("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),p("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),p("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),p("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),p("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),p("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),p("ERR_SOCKET_CANNOT_SEND","Unable to send data"),p("ERR_SOCKET_CLOSED","Socket is closed"),p("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),p("ERR_STDERR_CLOSE","process.stderr cannot be closed"),p("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),p("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),p("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),p("ERR_TLS_DH_PARAM_SIZE",function(g){return"DH parameter size ".concat(g," is less than 2048")}),p("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),p("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),p("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),p("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),p("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),p("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),p("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),p("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),p("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),p("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function m(g,b,O){r(g,"name is required");var S;b.includes("not ")?(S="must not be",b=b.split("not ")[1]):S="must be";var A;if(Array.isArray(g)){var N=g.map(function(I){return'"'.concat(I,'"')}).join(", ");A="The ".concat(N," arguments ").concat(S," ").concat(E(b,"type"))}else if(g.includes(" argument"))A="The ".concat(g," ").concat(S," ").concat(E(b,"type"));else{var T=g.includes(".")?"property":"argument";A='The "'.concat(g,'" ').concat(T," ").concat(S," ").concat(E(b,"type"))}return arguments.length>=3&&(A+=". Received type ".concat(O!==null?typeof O:"null")),A}function y(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];r(g.length>0,"At least one arg needs to be specified");var O="The ",S=g.length;switch(g=g.map(function(A){return'"'.concat(A,'"')}),S){case 1:O+="".concat(g[0]," argument");break;case 2:O+="".concat(g[0]," and ").concat(g[1]," arguments");break;default:O+=g.slice(0,S-1).join(", "),O+=", and ".concat(g[S-1]," arguments");break}return"".concat(O," must be specified")}function E(g,b){if(r(g,"expected is required"),r(typeof b=="string","thing is required"),Array.isArray(g)){var O=g.length;return r(O>0,"At least one expected value needs to be specified"),g=g.map(function(S){return String(S)}),O>2?"one of ".concat(b," ").concat(g.slice(0,O-1).join(", "),", or ")+g[O-1]:O===2?"one of ".concat(b," ").concat(g[0]," or ").concat(g[1]):"of ".concat(b," ").concat(g[0])}else return"of ".concat(b," ").concat(String(g))}function R(g,b){return b?"Attempt to write outside buffer bounds":'"'.concat(g,'" is outside of buffer bounds')}})(Bn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.strToEncoding=e.assertEncoding=e.ENCODING_UTF8=void 0;var t=Fr,r=Bn;e.ENCODING_UTF8="utf8";function n(o){if(o&&!t.Buffer.isEncoding(o))throw new r.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",o)}e.assertEncoding=n;function i(o,a){return!a||a===e.ENCODING_UTF8?o:a==="buffer"?new t.Buffer(o):new t.Buffer(o).toString(a)}e.strToEncoding=i})(Ln);Object.defineProperty(xt,"__esModule",{value:!0});xt.Dirent=void 0;var rt=et,Wc=Ln,Yc=rt.constants.S_IFMT,qc=rt.constants.S_IFDIR,Kc=rt.constants.S_IFREG,zc=rt.constants.S_IFBLK,Gc=rt.constants.S_IFCHR,Jc=rt.constants.S_IFLNK,Xc=rt.constants.S_IFIFO,Qc=rt.constants.S_IFSOCK,Oa=function(){function e(){this.name="",this.mode=0}return e.build=function(t,r){var n=new e,i=t.getNode().mode;return n.name=(0,Wc.strToEncoding)(t.getName(),r),n.mode=i,n},e.prototype._checkModeProperty=function(t){return(this.mode&Yc)===t},e.prototype.isDirectory=function(){return this._checkModeProperty(qc)},e.prototype.isFile=function(){return this._checkModeProperty(Kc)},e.prototype.isBlockDevice=function(){return this._checkModeProperty(zc)},e.prototype.isCharacterDevice=function(){return this._checkModeProperty(Gc)},e.prototype.isSymbolicLink=function(){return this._checkModeProperty(Jc)},e.prototype.isFIFO=function(){return this._checkModeProperty(Xc)},e.prototype.isSocket=function(){return this._checkModeProperty(Qc)},e}();xt.Dirent=Oa;xt.default=Oa;var Aa={};function Ie(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Yi(e,t){for(var r="",n=0,i=-1,o=0,a,l=0;l<=e.length;++l){if(l<e.length)a=e.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var f=r.lastIndexOf("/");if(f!==r.length-1){f===-1?(r="",n=0):(r=r.slice(0,f),n=r.length-1-r.lastIndexOf("/")),i=l,o=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=l,o=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(i+1,l):r=e.slice(i+1,l),n=l-i-1;i=l,o=0}else a===46&&o!==-1?++o:o=-1}return r}function Zc(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}var Ct={resolve:function(){for(var t="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var o;i>=0?o=arguments[i]:(n===void 0&&(n=process.cwd()),o=n),Ie(o),o.length!==0&&(t=o+"/"+t,r=o.charCodeAt(0)===47)}return t=Yi(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Ie(t),t.length===0)return".";var r=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=Yi(t,!r),t.length===0&&!r&&(t="."),t.length>0&&n&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return Ie(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,r=0;r<arguments.length;++r){var n=arguments[r];Ie(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":Ct.normalize(t)},relative:function(t,r){if(Ie(t),Ie(r),t===r||(t=Ct.resolve(t),r=Ct.resolve(r),t===r))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var i=t.length,o=i-n,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var l=r.length,f=l-a,v=o<f?o:f,p=-1,m=0;m<=v;++m){if(m===v){if(f>v){if(r.charCodeAt(a+m)===47)return r.slice(a+m+1);if(m===0)return r.slice(a+m)}else o>v&&(t.charCodeAt(n+m)===47?p=m:m===0&&(p=0));break}var y=t.charCodeAt(n+m),E=r.charCodeAt(a+m);if(y!==E)break;y===47&&(p=m)}var R="";for(m=n+p+1;m<=i;++m)(m===i||t.charCodeAt(m)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+r.slice(a+p):(a+=p,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(Ie(t),t.length===0)return".";for(var r=t.charCodeAt(0),n=r===47,i=-1,o=!0,a=t.length-1;a>=1;--a)if(r=t.charCodeAt(a),r===47){if(!o){i=a;break}}else o=!1;return i===-1?n?"/":".":n&&i===1?"//":t.slice(0,i)},basename:function(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');Ie(t);var n=0,i=-1,o=!0,a;if(r!==void 0&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var l=r.length-1,f=-1;for(a=t.length-1;a>=0;--a){var v=t.charCodeAt(a);if(v===47){if(!o){n=a+1;break}}else f===-1&&(o=!1,f=a+1),l>=0&&(v===r.charCodeAt(l)?--l===-1&&(i=a):(l=-1,i=f))}return n===i?i=f:i===-1&&(i=t.length),t.slice(n,i)}else{for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!o){n=a+1;break}}else i===-1&&(o=!1,i=a+1);return i===-1?"":t.slice(n,i)}},extname:function(t){Ie(t);for(var r=-1,n=0,i=-1,o=!0,a=0,l=t.length-1;l>=0;--l){var f=t.charCodeAt(l);if(f===47){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),f===46?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Zc("/",t)},parse:function(t){Ie(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;var n=t.charCodeAt(0),i=n===47,o;i?(r.root="/",o=1):o=0;for(var a=-1,l=0,f=-1,v=!0,p=t.length-1,m=0;p>=o;--p){if(n=t.charCodeAt(p),n===47){if(!v){l=p+1;break}continue}f===-1&&(v=!1,f=p+1),n===46?a===-1?a=p:m!==1&&(m=1):a!==-1&&(m=-1)}return a===-1||f===-1||m===0||m===1&&a===f-1&&a===l+1?f!==-1&&(l===0&&i?r.base=r.name=t.slice(1,f):r.base=r.name=t.slice(l,f)):(l===0&&i?(r.name=t.slice(1,a),r.base=t.slice(1,f)):(r.name=t.slice(l,a),r.base=t.slice(l,f)),r.ext=t.slice(a,f)),l>0?r.dir=t.slice(0,l-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Ct.posix=Ct;var ef=Ct,Ta={},kt={},zr={exports:{}},qi;function tf(){if(qi)return zr.exports;qi=1;var e=zr.exports={},t,r;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?r=clearTimeout:r=i}catch{r=i}})();function o(g){if(t===setTimeout)return setTimeout(g,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(g,0);try{return t(g,0)}catch{try{return t.call(null,g,0)}catch{return t.call(this,g,0)}}}function a(g){if(r===clearTimeout)return clearTimeout(g);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(g);try{return r(g)}catch{try{return r.call(null,g)}catch{return r.call(this,g)}}}var l=[],f=!1,v,p=-1;function m(){!f||!v||(f=!1,v.length?l=v.concat(l):p=-1,l.length&&y())}function y(){if(!f){var g=o(m);f=!0;for(var b=l.length;b;){for(v=l,l=[];++p<b;)v&&v[p].run();p=-1,b=l.length}v=null,f=!1,a(g)}}e.nextTick=function(g){var b=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)b[O-1]=arguments[O];l.push(new E(g,b)),l.length===1&&!f&&o(y)};function E(g,b){this.fun=g,this.array=b}E.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function R(){}return e.on=R,e.addListener=R,e.once=R,e.off=R,e.removeListener=R,e.removeAllListeners=R,e.emit=R,e.prependListener=R,e.prependOnceListener=R,e.listeners=function(g){return[]},e.binding=function(g){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(g){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},zr.exports}var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});var mn;typeof setImmediate=="function"?mn=setImmediate.bind(typeof globalThis<"u"?globalThis:Z):mn=setTimeout.bind(typeof globalThis<"u"?globalThis:Z);Cr.default=mn;Object.defineProperty(kt,"__esModule",{value:!0});kt.createProcess=void 0;var rf=function(){if(typeof process<"u")return process;try{return tf()}catch{return}};function Na(){var e=rf()||{};return e.cwd||(e.cwd=function(){return"/"}),e.nextTick||(e.nextTick=Cr.default),e.emitWarning||(e.emitWarning=function(t,r){console.warn("".concat(r).concat(r?": ":"").concat(t))}),e.env||(e.env={}),e}kt.createProcess=Na;kt.default=Na();(function(e){var t=Z&&Z.__extends||function(){var O=function(S,A){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,T){N.__proto__=T}||function(N,T){for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(N[I]=T[I])},O(S,A)};return function(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");O(S,A);function N(){this.constructor=S}S.prototype=A===null?Object.create(A):(N.prototype=A.prototype,new N)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.File=e.Link=e.Node=e.SEP=void 0;var r=kt,n=Fr,i=et,o=Or,a=yt,l=i.constants.S_IFMT,f=i.constants.S_IFDIR,v=i.constants.S_IFREG,p=i.constants.S_IFLNK,m=i.constants.O_APPEND,y=function(){var O,S;return(S=(O=r.default.getuid)===null||O===void 0?void 0:O.call(r.default))!==null&&S!==void 0?S:0},E=function(){var O,S;return(S=(O=r.default.getgid)===null||O===void 0?void 0:O.call(r.default))!==null&&S!==void 0?S:0};e.SEP="/";var R=function(O){t(S,O);function S(A,N){N===void 0&&(N=438);var T=O.call(this)||this;return T._uid=y(),T._gid=E(),T._atime=new Date,T._mtime=new Date,T._ctime=new Date,T._perm=438,T.mode=v,T._nlink=1,T._perm=N,T.mode|=N,T.ino=A,T}return Object.defineProperty(S.prototype,"ctime",{get:function(){return this._ctime},set:function(A){this._ctime=A},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"uid",{get:function(){return this._uid},set:function(A){this._uid=A,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"gid",{get:function(){return this._gid},set:function(A){this._gid=A,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"atime",{get:function(){return this._atime},set:function(A){this._atime=A,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"mtime",{get:function(){return this._mtime},set:function(A){this._mtime=A,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"perm",{get:function(){return this._perm},set:function(A){this._perm=A,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"nlink",{get:function(){return this._nlink},set:function(A){this._nlink=A,this.ctime=new Date},enumerable:!1,configurable:!0}),S.prototype.getString=function(A){return A===void 0&&(A="utf8"),this.atime=new Date,this.getBuffer().toString(A)},S.prototype.setString=function(A){this.buf=(0,n.bufferFrom)(A,"utf8"),this.touch()},S.prototype.getBuffer=function(){return this.atime=new Date,this.buf||this.setBuffer((0,n.bufferAllocUnsafe)(0)),(0,n.bufferFrom)(this.buf)},S.prototype.setBuffer=function(A){this.buf=(0,n.bufferFrom)(A),this.touch()},S.prototype.getSize=function(){return this.buf?this.buf.length:0},S.prototype.setModeProperty=function(A){this.mode=this.mode&~l|A},S.prototype.setIsFile=function(){this.setModeProperty(v)},S.prototype.setIsDirectory=function(){this.setModeProperty(f)},S.prototype.setIsSymlink=function(){this.setModeProperty(p)},S.prototype.isFile=function(){return(this.mode&l)===v},S.prototype.isDirectory=function(){return(this.mode&l)===f},S.prototype.isSymlink=function(){return(this.mode&l)===p},S.prototype.makeSymlink=function(A){this.symlink=A,this.setIsSymlink()},S.prototype.write=function(A,N,T,I){if(N===void 0&&(N=0),T===void 0&&(T=A.length),I===void 0&&(I=0),this.buf||(this.buf=(0,n.bufferAllocUnsafe)(0)),I+T>this.buf.length){var L=(0,n.bufferAllocUnsafe)(I+T);this.buf.copy(L,0,0,this.buf.length),this.buf=L}return A.copy(this.buf,I,N,N+T),this.touch(),T},S.prototype.read=function(A,N,T,I){N===void 0&&(N=0),T===void 0&&(T=A.byteLength),I===void 0&&(I=0),this.atime=new Date,this.buf||(this.buf=(0,n.bufferAllocUnsafe)(0));var L=T;return L>A.byteLength&&(L=A.byteLength),L+I>this.buf.length&&(L=this.buf.length-I),this.buf.copy(A,N,I,I+L),L},S.prototype.truncate=function(A){if(A===void 0&&(A=0),!A)this.buf=(0,n.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,n.bufferAllocUnsafe)(0)),A<=this.buf.length)this.buf=this.buf.slice(0,A);else{var N=(0,n.bufferAllocUnsafe)(A);this.buf.copy(N),N.fill(0,this.buf.length),this.buf=N}this.touch()},S.prototype.chmod=function(A){this.perm=A,this.mode=this.mode&-512|A,this.touch()},S.prototype.chown=function(A,N){this.uid=A,this.gid=N,this.touch()},S.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},S.prototype.canRead=function(A,N){return A===void 0&&(A=y()),N===void 0&&(N=E()),!!(this.perm&4||N===this.gid&&this.perm&32||A===this.uid&&this.perm&256)},S.prototype.canWrite=function(A,N){return A===void 0&&(A=y()),N===void 0&&(N=E()),!!(this.perm&2||N===this.gid&&this.perm&16||A===this.uid&&this.perm&128)},S.prototype.del=function(){this.emit("delete",this)},S.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},S}(o.EventEmitter);e.Node=R;var g=function(O){t(S,O);function S(A,N,T){var I=O.call(this)||this;return I.children={},I._steps=[],I.ino=0,I.length=0,I.vol=A,I.parent=N,I.name=T,I.syncSteps(),I}return Object.defineProperty(S.prototype,"steps",{get:function(){return this._steps},set:function(A){this._steps=A;for(var N=0,T=Object.entries(this.children);N<T.length;N++){var I=T[N],L=I[0],K=I[1];L==="."||L===".."||K==null||K.syncSteps()}},enumerable:!1,configurable:!0}),S.prototype.setNode=function(A){this.node=A,this.ino=A.ino},S.prototype.getNode=function(){return this.node},S.prototype.createChild=function(A,N){N===void 0&&(N=this.vol.createNode());var T=new S(this.vol,this,A);return T.setNode(N),N.isDirectory()&&(T.children["."]=T,T.getNode().nlink++),this.setChild(A,T),T},S.prototype.setChild=function(A,N){N===void 0&&(N=new S(this.vol,this,A)),this.children[A]=N,N.parent=this,this.length++;var T=N.getNode();return T.isDirectory()&&(N.children[".."]=this,this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",N,this),N},S.prototype.deleteChild=function(A){var N=A.getNode();N.isDirectory()&&(delete A.children[".."],this.getNode().nlink--),delete this.children[A.getName()],this.length--,this.getNode().mtime=new Date,this.emit("child:delete",A,this)},S.prototype.getChild=function(A){if(this.getNode().mtime=new Date,Object.hasOwnProperty.call(this.children,A))return this.children[A]},S.prototype.getPath=function(){return this.steps.join(e.SEP)},S.prototype.getName=function(){return this.steps[this.steps.length-1]},S.prototype.walk=function(A,N,T){if(N===void 0&&(N=A.length),T===void 0&&(T=0),T>=A.length)return this;if(T>=N)return this;var I=A[T],L=this.getChild(I);return L?L.walk(A,N,T+1):null},S.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},S.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},S}(o.EventEmitter);e.Link=g;var b=function(){function O(S,A,N,T){this.position=0,this.link=S,this.node=A,this.flags=N,this.fd=T}return O.prototype.getString=function(S){return this.node.getString()},O.prototype.setString=function(S){this.node.setString(S)},O.prototype.getBuffer=function(){return this.node.getBuffer()},O.prototype.setBuffer=function(S){this.node.setBuffer(S)},O.prototype.getSize=function(){return this.node.getSize()},O.prototype.truncate=function(S){this.node.truncate(S)},O.prototype.seekTo=function(S){this.position=S},O.prototype.stats=function(){return a.default.build(this.node)},O.prototype.write=function(S,A,N,T){A===void 0&&(A=0),N===void 0&&(N=S.length),typeof T!="number"&&(T=this.position),this.flags&m&&(T=this.getSize());var I=this.node.write(S,A,N,T);return this.position=T+I,I},O.prototype.read=function(S,A,N,T){A===void 0&&(A=0),N===void 0&&(N=S.byteLength),typeof T!="number"&&(T=this.position);var I=this.node.read(S,A,N,T);return this.position=T+I,I},O.prototype.chmod=function(S){this.node.chmod(S)},O.prototype.chown=function(S,A){this.node.chown(S,A)},O}();e.File=b})(Ta);var $n={};Object.defineProperty($n,"__esModule",{value:!0});function nf(e,t,r){var n=setTimeout.apply(typeof globalThis<"u"?globalThis:Z,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}$n.default=nf;var ir={},Ki=Z&&Z.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(ir,"__esModule",{value:!0});ir.FileHandle=void 0;function U(e,t,r){return r===void 0&&(r=function(n){return n}),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new Promise(function(o,a){e[t].bind(e).apply(void 0,Ki(Ki([],n,!1),[function(l,f){return l?a(l):o(r(f))}],!1))})}}var At=function(){function e(t,r){this.vol=t,this.fd=r}return e.prototype.appendFile=function(t,r){return U(this.vol,"appendFile")(this.fd,t,r)},e.prototype.chmod=function(t){return U(this.vol,"fchmod")(this.fd,t)},e.prototype.chown=function(t,r){return U(this.vol,"fchown")(this.fd,t,r)},e.prototype.close=function(){return U(this.vol,"close")(this.fd)},e.prototype.datasync=function(){return U(this.vol,"fdatasync")(this.fd)},e.prototype.read=function(t,r,n,i){return U(this.vol,"read",function(o){return{bytesRead:o,buffer:t}})(this.fd,t,r,n,i)},e.prototype.readFile=function(t){return U(this.vol,"readFile")(this.fd,t)},e.prototype.stat=function(t){return U(this.vol,"fstat")(this.fd,t)},e.prototype.sync=function(){return U(this.vol,"fsync")(this.fd)},e.prototype.truncate=function(t){return U(this.vol,"ftruncate")(this.fd,t)},e.prototype.utimes=function(t,r){return U(this.vol,"futimes")(this.fd,t,r)},e.prototype.write=function(t,r,n,i){return U(this.vol,"write",function(o){return{bytesWritten:o,buffer:t}})(this.fd,t,r,n,i)},e.prototype.writeFile=function(t,r){return U(this.vol,"writeFile")(this.fd,t,r)},e}();ir.FileHandle=At;function of(e){return typeof Promise>"u"?null:{FileHandle:At,access:function(t,r){return U(e,"access")(t,r)},appendFile:function(t,r,n){return U(e,"appendFile")(t instanceof At?t.fd:t,r,n)},chmod:function(t,r){return U(e,"chmod")(t,r)},chown:function(t,r,n){return U(e,"chown")(t,r,n)},copyFile:function(t,r,n){return U(e,"copyFile")(t,r,n)},lchmod:function(t,r){return U(e,"lchmod")(t,r)},lchown:function(t,r,n){return U(e,"lchown")(t,r,n)},link:function(t,r){return U(e,"link")(t,r)},lstat:function(t,r){return U(e,"lstat")(t,r)},mkdir:function(t,r){return U(e,"mkdir")(t,r)},mkdtemp:function(t,r){return U(e,"mkdtemp")(t,r)},open:function(t,r,n){return U(e,"open",function(i){return new At(e,i)})(t,r,n)},readdir:function(t,r){return U(e,"readdir")(t,r)},readFile:function(t,r){return U(e,"readFile")(t instanceof At?t.fd:t,r)},readlink:function(t,r){return U(e,"readlink")(t,r)},realpath:function(t,r){return U(e,"realpath")(t,r)},rename:function(t,r){return U(e,"rename")(t,r)},rmdir:function(t){return U(e,"rmdir")(t)},rm:function(t,r){return U(e,"rm")(t,r)},stat:function(t,r){return U(e,"stat")(t,r)},symlink:function(t,r,n){return U(e,"symlink")(t,r,n)},truncate:function(t,r){return U(e,"truncate")(t,r)},unlink:function(t){return U(e,"unlink")(t)},utimes:function(t,r,n){return U(e,"utimes")(t,r,n)},writeFile:function(t,r,n){return U(e,"writeFile")(t instanceof At?t.fd:t,r,n)}}}ir.default=of;var Ht={},zi;function af(){if(zi)return Ht;zi=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.correctPath=o,Ht.unixify=i;var e=process.platform==="win32";function t(a){var l=a.length-1;if(l<2)return a;for(;r(a,l);)l--;return a.substr(0,l+1)}function r(a,l){var f=a[l];return l>0&&(f==="/"||e&&f==="\\")}function n(a,l){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),l!==!1&&(a=t(a)),a}function i(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e?(a=n(a,l),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function o(a){return i(a.replace(/^\\\\\?\\.:\\/,"\\"))}return Ht}(function(e){var t=Z&&Z.__extends||function(){var h=function(s,u){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(c[_]=d[_])},h(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");h(s,u);function c(){this.constructor=s}s.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),r=Z&&Z.__spreadArray||function(h,s,u){if(u||arguments.length===2)for(var c=0,d=s.length,_;c<d;c++)(_||!(c in s))&&(_||(_=Array.prototype.slice.call(s,0,c)),_[c]=s[c]);return h.concat(_||Array.prototype.slice.call(s))};Object.defineProperty(e,"__esModule",{value:!0}),e.FSWatcher=e.StatWatcher=e.Volume=e.toUnixTimestamp=e.bufferToEncoding=e.dataToBuffer=e.dataToStr=e.pathToSteps=e.filenameToSteps=e.pathToFilename=e.flagsToNumber=e.FLAGS=void 0;var n=ef,i=Ta,o=yt,a=xt,l=Fr,f=Cr,v=kt,p=$n,m=ps(),y=et,E=Or,R=Ln,g=Bn,b=Tn(),O=ir,S=n.resolve,A=y.constants.O_RDONLY,N=y.constants.O_WRONLY,T=y.constants.O_RDWR,I=y.constants.O_CREAT,L=y.constants.O_EXCL,K=y.constants.O_TRUNC,Te=y.constants.O_APPEND,ne=y.constants.O_SYNC,nt=y.constants.O_DIRECTORY,it=y.constants.F_OK,He=y.constants.COPYFILE_EXCL,Ne=y.constants.COPYFILE_FICLONE_FORCE,se=n.posix?n.posix:n,ee=se.sep,le=se.relative,de=se.join,ot=se.dirname,Lt=v.default.platform==="win32",Ua=128,$e={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},ja=function(h){return"Expected options to be either an object or a string, but got ".concat(h," instead")},Y="ENOENT",Lr="EBADF",Qn="EINVAL",Ha="EPERM",Va="EPROTO",Ve="EEXIST",at="ENOTDIR",Zn="EMFILE",ei="EACCES",Br="EISDIR",ti="ENOTEMPTY",ri="ENOSYS",ni="ERR_FS_EISDIR";function Wa(h,s,u,c){s===void 0&&(s=""),u===void 0&&(u=""),c===void 0&&(c="");var d="";switch(u&&(d=" '".concat(u,"'")),c&&(d+=" -> '".concat(c,"'")),h){case Y:return"ENOENT: no such file or directory, ".concat(s).concat(d);case Lr:return"EBADF: bad file descriptor, ".concat(s).concat(d);case Qn:return"EINVAL: invalid argument, ".concat(s).concat(d);case Ha:return"EPERM: operation not permitted, ".concat(s).concat(d);case Va:return"EPROTO: protocol error, ".concat(s).concat(d);case Ve:return"EEXIST: file already exists, ".concat(s).concat(d);case at:return"ENOTDIR: not a directory, ".concat(s).concat(d);case Br:return"EISDIR: illegal operation on a directory, ".concat(s).concat(d);case ei:return"EACCES: permission denied, ".concat(s).concat(d);case ti:return"ENOTEMPTY: directory not empty, ".concat(s).concat(d);case Zn:return"EMFILE: too many open files, ".concat(s).concat(d);case ri:return"ENOSYS: function not implemented, ".concat(s).concat(d);case ni:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(s," returned EISDIR (is a directory) ").concat(u);default:return"".concat(h,": error occurred, ").concat(s).concat(d)}}function M(h,s,u,c,d){s===void 0&&(s=""),u===void 0&&(u=""),c===void 0&&(c=""),d===void 0&&(d=Error);var _=new d(Wa(h,s,u,c));return _.code=h,u&&(_.path=u),_}var st;(function(h){h[h.r=A]="r",h[h["r+"]=T]="r+",h[h.rs=A|ne]="rs",h[h.sr=h.rs]="sr",h[h["rs+"]=T|ne]="rs+",h[h["sr+"]=h["rs+"]]="sr+",h[h.w=N|I|K]="w",h[h.wx=N|I|K|L]="wx",h[h.xw=h.wx]="xw",h[h["w+"]=T|I|K]="w+",h[h["wx+"]=T|I|K|L]="wx+",h[h["xw+"]=h["wx+"]]="xw+",h[h.a=N|Te|I]="a",h[h.ax=N|Te|I|L]="ax",h[h.xa=h.ax]="xa",h[h["a+"]=T|Te|I]="a+",h[h["ax+"]=T|Te|I|L]="ax+",h[h["xa+"]=h["ax+"]]="xa+"})(st=e.FLAGS||(e.FLAGS={}));function ut(h){if(typeof h=="number")return h;if(typeof h=="string"){var s=st[h];if(typeof s<"u")return s}throw new g.TypeError("ERR_INVALID_OPT_VALUE","flags",h)}e.flagsToNumber=ut;function $r(h,s){var u;if(s){var c=typeof s;switch(c){case"string":u=Object.assign({},h,{encoding:s});break;case"object":u=Object.assign({},h,s);break;default:throw TypeError(ja(c))}}else return h;return u.encoding!=="buffer"&&(0,R.assertEncoding)(u.encoding),u}function lt(h){return function(s){return $r(h,s)}}function ce(h){if(typeof h!="function")throw TypeError($e.CB);return h}function _t(h){return function(s,u){return typeof s=="function"?[h(),s]:[h(s),ce(u)]}}var Mr={encoding:"utf8"},sr=lt(Mr),ii=_t(sr),Ya={flag:"r"},oi=lt(Ya),ai={encoding:"utf8",mode:438,flag:st[st.w]},si=lt(ai),ui={encoding:"utf8",mode:438,flag:st[st.a]},li=lt(ui),qa=_t(li),Ka=Mr,ci=lt(Ka),za=_t(ci),fi={mode:511,recursive:!1},hi=function(h){return typeof h=="number"?Object.assign({},fi,{mode:h}):Object.assign({},fi,h)},Ga={recursive:!1},di=function(h){return Object.assign({},Ga,h)},Ja=lt(Mr),Xa=_t(Ja),Qa={encoding:"utf8",withFileTypes:!1},pi=lt(Qa),Za=_t(pi),es={bigint:!1},Bt=function(h){return h===void 0&&(h={}),Object.assign({},es,h)},Ur=function(h,s){return typeof h=="function"?[Bt(),h]:[Bt(h),ce(s)]};function ts(h){if(h.hostname!=="")throw new g.TypeError("ERR_INVALID_FILE_URL_HOST",v.default.platform);for(var s=h.pathname,u=0;u<s.length;u++)if(s[u]==="%"){var c=s.codePointAt(u+2)|32;if(s[u+1]==="2"&&c===102)throw new g.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(s)}function P(h){if(typeof h!="string"&&!l.Buffer.isBuffer(h)){try{if(!(h instanceof on.URL))throw new TypeError($e.PATH_STR)}catch{throw new TypeError($e.PATH_STR)}h=ts(h)}var s=String(h);return jr(s),s}e.pathToFilename=P;var $t=function(h,s){return s===void 0&&(s=v.default.cwd()),S(s,h)};if(Lt){var rs=$t,ns=af().unixify;$t=function(h,s){return ns(rs(h,s))}}function z(h,s){var u=$t(h,s),c=u.substring(1);return c?c.split(ee):[]}e.filenameToSteps=z;function is(h){return z(P(h))}e.pathToSteps=is;function os(h,s){return s===void 0&&(s=R.ENCODING_UTF8),l.Buffer.isBuffer(h)?h.toString(s):h instanceof Uint8Array?(0,l.bufferFrom)(h).toString(s):String(h)}e.dataToStr=os;function Mt(h,s){return s===void 0&&(s=R.ENCODING_UTF8),l.Buffer.isBuffer(h)?h:h instanceof Uint8Array?(0,l.bufferFrom)(h):(0,l.bufferFrom)(String(h),s)}e.dataToBuffer=Mt;function mi(h,s){return!s||s==="buffer"?h:h.toString(s)}e.bufferToEncoding=mi;function jr(h,s){if((""+h).indexOf("\0")!==-1){var u=new Error("Path must be a string without null bytes");if(u.code=Y,typeof s!="function")throw u;return v.default.nextTick(s,u),!1}return!0}function as(h,s){if(typeof h=="number")return h;if(typeof h=="string")return parseInt(h,8);if(s)return he(s)}function he(h,s){var u=as(h,s);if(typeof u!="number"||isNaN(u))throw new TypeError($e.MODE_INT);return u}function ct(h){return h>>>0===h}function Ut(h){if(!ct(h))throw TypeError($e.FD)}function Me(h){if(typeof h=="string"&&+h==h)return+h;if(h instanceof Date)return h.getTime()/1e3;if(isFinite(h))return h<0?Date.now()/1e3:h;throw new Error("Cannot parse time: "+h)}e.toUnixTimestamp=Me;function St(h){if(typeof h!="number")throw TypeError($e.UID)}function Et(h){if(typeof h!="number")throw TypeError($e.GID)}function ss(h){var s={};function u(c,d){for(var _ in d){var w=d[_],F=de(c,_);typeof w=="string"?s[F]=w:typeof w=="object"&&w!==null&&Object.keys(w).length>0?u(F,w):s[F]=null}}return u("",h),s}var us=function(){function h(s){s===void 0&&(s={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,O.default)(this),this.statWatchers={},this.props=Object.assign({Node:i.Node,Link:i.Link,File:i.File},s);var u=this.createLink();u.setNode(this.createNode(!0));var c=this;this.StatWatcher=function(w){t(F,w);function F(){return w.call(this,c)||this}return F}(vi);var d=Fe;this.ReadStream=function(w){t(F,w);function F(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];return w.apply(this,r([c],x,!1))||this}return F}(d);var _=me;this.WriteStream=function(w){t(F,w);function F(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];return w.apply(this,r([c],x,!1))||this}return F}(_),this.FSWatcher=function(w){t(F,w);function F(){return w.call(this,c)||this}return F}(gi),u.setChild(".",u),u.getNode().nlink++,u.setChild("..",u),u.getNode().nlink++,this.root=u}return h.fromJSON=function(s,u){var c=new h;return c.fromJSON(s,u),c},h.fromNestedJSON=function(s,u){var c=new h;return c.fromNestedJSON(s,u),c},Object.defineProperty(h.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),h.prototype.createLink=function(s,u,c,d){if(c===void 0&&(c=!1),!s)return new this.props.Link(this,null,"");if(!u)throw new Error("createLink: name cannot be empty");return s.createChild(u,this.createNode(c,d))},h.prototype.deleteLink=function(s){var u=s.parent;return u?(u.deleteChild(s),!0):!1},h.prototype.newInoNumber=function(){var s=this.releasedInos.pop();return s||(this.ino=(this.ino+1)%4294967295,this.ino)},h.prototype.newFdNumber=function(){var s=this.releasedFds.pop();return typeof s=="number"?s:h.fd--},h.prototype.createNode=function(s,u){s===void 0&&(s=!1);var c=new this.props.Node(this.newInoNumber(),u);return s&&c.setIsDirectory(),this.inodes[c.ino]=c,c},h.prototype.getNode=function(s){return this.inodes[s]},h.prototype.deleteNode=function(s){s.del(),delete this.inodes[s.ino],this.releasedInos.push(s.ino)},h.prototype.genRndStr=function(){var s=(Math.random()+1).toString(36).substring(2,8);return s.length===6?s:this.genRndStr()},h.prototype.getLink=function(s){return this.root.walk(s)},h.prototype.getLinkOrThrow=function(s,u){var c=z(s),d=this.getLink(c);if(!d)throw M(Y,u,s);return d},h.prototype.getResolvedLink=function(s){for(var u=typeof s=="string"?z(s):s,c=this.root,d=0;d<u.length;){var _=u[d];if(c=c.getChild(_),!c)return null;var w=c.getNode();if(w.isSymlink()){u=w.symlink.concat(u.slice(d+1)),c=this.root,d=0;continue}d++}return c},h.prototype.getResolvedLinkOrThrow=function(s,u){var c=this.getResolvedLink(s);if(!c)throw M(Y,u,s);return c},h.prototype.resolveSymlinks=function(s){return this.getResolvedLink(s.steps.slice(1))},h.prototype.getLinkAsDirOrThrow=function(s,u){var c=this.getLinkOrThrow(s,u);if(!c.getNode().isDirectory())throw M(at,u,s);return c},h.prototype.getLinkParent=function(s){return this.root.walk(s,s.length-1)},h.prototype.getLinkParentAsDirOrThrow=function(s,u){var c=s instanceof Array?s:z(s),d=this.getLinkParent(c);if(!d)throw M(Y,u,ee+c.join(ee));if(!d.getNode().isDirectory())throw M(at,u,ee+c.join(ee));return d},h.prototype.getFileByFd=function(s){return this.fds[String(s)]},h.prototype.getFileByFdOrThrow=function(s,u){if(!ct(s))throw TypeError($e.FD);var c=this.getFileByFd(s);if(!c)throw M(Lr,u);return c},h.prototype.wrapAsync=function(s,u,c){var d=this;ce(c),(0,f.default)(function(){var _;try{_=s.apply(d,u)}catch(w){c(w);return}c(null,_)})},h.prototype._toJSON=function(s,u,c){var d;s===void 0&&(s=this.root),u===void 0&&(u={});var _=!0,w=s.children;s.getNode().isFile()&&(w=(d={},d[s.getName()]=s.parent.getChild(s.getName()),d),s=s.parent);for(var F in w)if(!(F==="."||F==="..")){_=!1;var x=s.getChild(F);if(!x)throw new Error("_toJSON: unexpected undefined");var k=x.getNode();if(k.isFile()){var B=x.getPath();c&&(B=le(c,B)),u[B]=k.getString()}else k.isDirectory()&&this._toJSON(x,u,c)}var j=s.getPath();return c&&(j=le(c,j)),j&&_&&(u[j]=null),u},h.prototype.toJSON=function(s,u,c){u===void 0&&(u={}),c===void 0&&(c=!1);var d=[];if(s){s instanceof Array||(s=[s]);for(var _=0,w=s;_<w.length;_++){var F=w[_],x=P(F),k=this.getResolvedLink(x);k&&d.push(k)}}else d.push(this.root);if(!d.length)return u;for(var B=0,j=d;B<j.length;B++){var k=j[B];this._toJSON(k,u,c?k.getPath():"")}return u},h.prototype.fromJSON=function(s,u){u===void 0&&(u=v.default.cwd());for(var c in s){var d=s[c];if(c=$t(c,u),typeof d=="string"){var _=ot(c);this.mkdirpBase(_,511),this.writeFileSync(c,d)}else this.mkdirpBase(c,511)}},h.prototype.fromNestedJSON=function(s,u){this.fromJSON(ss(s),u)},h.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},h.prototype.mountSync=function(s,u){this.fromJSON(u,s)},h.prototype.openLink=function(s,u,c){if(c===void 0&&(c=!0),this.openFiles>=this.maxFiles)throw M(Zn,"open",s.getPath());var d=s;if(c&&(d=this.resolveSymlinks(s)),!d)throw M(Y,"open",s.getPath());var _=d.getNode();if(_.isDirectory()){if((u&(A|T|N))!==A)throw M(Br,"open",s.getPath())}else if(u&nt)throw M(at,"open",s.getPath());if(!(u&N)&&!_.canRead())throw M(ei,"open",s.getPath());var w=new this.props.File(s,_,u,this.newFdNumber());return this.fds[w.fd]=w,this.openFiles++,u&K&&w.truncate(),w},h.prototype.openFile=function(s,u,c,d){d===void 0&&(d=!0);var _=z(s),w=d?this.getResolvedLink(_):this.getLink(_);if(w&&u&L)throw M(Ve,"open",s);if(!w&&u&I){var F=this.getResolvedLink(_.slice(0,_.length-1));if(!F)throw M(Y,"open",ee+_.join(ee));u&I&&typeof c=="number"&&(w=this.createLink(F,_[_.length-1],!1,c))}if(w)return this.openLink(w,u,d);throw M(Y,"open",s)},h.prototype.openBase=function(s,u,c,d){d===void 0&&(d=!0);var _=this.openFile(s,u,c,d);if(!_)throw M(Y,"open",s);return _.fd},h.prototype.openSync=function(s,u,c){c===void 0&&(c=438);var d=he(c),_=P(s),w=ut(u);return this.openBase(_,w,d)},h.prototype.open=function(s,u,c,d){var _=c,w=d;typeof c=="function"&&(_=438,w=c),_=_||438;var F=he(_),x=P(s),k=ut(u);this.wrapAsync(this.openBase,[x,k,F],w)},h.prototype.closeFile=function(s){this.fds[s.fd]&&(this.openFiles--,delete this.fds[s.fd],this.releasedFds.push(s.fd))},h.prototype.closeSync=function(s){Ut(s);var u=this.getFileByFdOrThrow(s,"close");this.closeFile(u)},h.prototype.close=function(s,u){Ut(s),this.wrapAsync(this.closeSync,[s],u)},h.prototype.openFileOrGetById=function(s,u,c){if(typeof s=="number"){var d=this.fds[s];if(!d)throw M(Y);return d}else return this.openFile(P(s),u,c)},h.prototype.readBase=function(s,u,c,d,_){var w=this.getFileByFdOrThrow(s);return w.read(u,Number(c),Number(d),_)},h.prototype.readSync=function(s,u,c,d,_){return Ut(s),this.readBase(s,u,c,d,_)},h.prototype.read=function(s,u,c,d,_,w){var F=this;if(ce(w),d===0)return v.default.nextTick(function(){w&&w(null,0,u)});(0,f.default)(function(){try{var x=F.readBase(s,u,c,d,_);w(null,x,u)}catch(k){w(k)}})},h.prototype.readFileBase=function(s,u,c){var d,_=typeof s=="number",w=_&&ct(s),F;if(w)F=s;else{var x=P(s),k=z(x),B=this.getResolvedLink(k);if(B){var j=B.getNode();if(j.isDirectory())throw M(Br,"open",B.getPath())}F=this.openSync(s,u)}try{d=mi(this.getFileByFdOrThrow(F).getBuffer(),c)}finally{w||this.closeSync(F)}return d},h.prototype.readFileSync=function(s,u){var c=oi(u),d=ut(c.flag);return this.readFileBase(s,d,c.encoding)},h.prototype.readFile=function(s,u,c){var d=_t(oi)(u,c),_=d[0],w=d[1],F=ut(_.flag);this.wrapAsync(this.readFileBase,[s,F,_.encoding],w)},h.prototype.writeBase=function(s,u,c,d,_){var w=this.getFileByFdOrThrow(s,"write");return w.write(u,c,d,_)},h.prototype.writeSync=function(s,u,c,d,_){Ut(s);var w,F,x,k,B=typeof u!="string";B?(F=(c||0)|0,x=d,k=_):(k=c,w=d);var j=Mt(u,w);return B?typeof x>"u"&&(x=j.length):(F=0,x=j.length),this.writeBase(s,j,F,x,k)},h.prototype.write=function(s,u,c,d,_,w){var F=this;Ut(s);var x,k,B,j,Q,ft=typeof u,Ce=typeof c,We=typeof d,ht=typeof _;ft!=="string"?Ce==="function"?Q=c:We==="function"?(x=c|0,Q=d):ht==="function"?(x=c|0,k=d,Q=_):(x=c|0,k=d,B=_,Q=w):Ce==="function"?Q=c:We==="function"?(B=c,Q=d):ht==="function"&&(B=c,j=d,Q=_);var q=Mt(u,j);ft!=="string"?typeof k>"u"&&(k=q.length):(x=0,k=q.length);var ve=ce(Q);(0,f.default)(function(){try{var ge=F.writeBase(s,q,x,k,B);ft!=="string"?ve(null,ge,q):ve(null,ge,u)}catch(ur){ve(ur)}})},h.prototype.writeFileBase=function(s,u,c,d){var _=typeof s=="number",w;_?w=s:w=this.openBase(P(s),c,d);var F=0,x=u.length,k=c&Te?void 0:0;try{for(;x>0;){var B=this.writeSync(w,u,F,x,k);F+=B,x-=B,k!==void 0&&(k+=B)}}finally{_||this.closeSync(w)}},h.prototype.writeFileSync=function(s,u,c){var d=si(c),_=ut(d.flag),w=he(d.mode),F=Mt(u,d.encoding);this.writeFileBase(s,F,_,w)},h.prototype.writeFile=function(s,u,c,d){var _=c,w=d;typeof c=="function"&&(_=ai,w=c);var F=ce(w),x=si(_),k=ut(x.flag),B=he(x.mode),j=Mt(u,x.encoding);this.wrapAsync(this.writeFileBase,[s,j,k,B],F)},h.prototype.linkBase=function(s,u){var c=z(s),d=this.getLink(c);if(!d)throw M(Y,"link",s,u);var _=z(u),w=this.getLinkParent(_);if(!w)throw M(Y,"link",s,u);var F=_[_.length-1];if(w.getChild(F))throw M(Ve,"link",s,u);var x=d.getNode();x.nlink++,w.createChild(F,x)},h.prototype.copyFileBase=function(s,u,c){var d=this.readFileSync(s);if(c&He&&this.existsSync(u))throw M(Ve,"copyFile",s,u);if(c&Ne)throw M(ri,"copyFile",s,u);this.writeFileBase(u,d,st.w,438)},h.prototype.copyFileSync=function(s,u,c){var d=P(s),_=P(u);return this.copyFileBase(d,_,(c||0)|0)},h.prototype.copyFile=function(s,u,c,d){var _=P(s),w=P(u),F,x;typeof c=="function"?(F=0,x=c):(F=c,x=d),ce(x),this.wrapAsync(this.copyFileBase,[_,w,F],x)},h.prototype.linkSync=function(s,u){var c=P(s),d=P(u);this.linkBase(c,d)},h.prototype.link=function(s,u,c){var d=P(s),_=P(u);this.wrapAsync(this.linkBase,[d,_],c)},h.prototype.unlinkBase=function(s){var u=z(s),c=this.getLink(u);if(!c)throw M(Y,"unlink",s);if(c.length)throw Error("Dir not empty...");this.deleteLink(c);var d=c.getNode();d.nlink--,d.nlink<=0&&this.deleteNode(d)},h.prototype.unlinkSync=function(s){var u=P(s);this.unlinkBase(u)},h.prototype.unlink=function(s,u){var c=P(s);this.wrapAsync(this.unlinkBase,[c],u)},h.prototype.symlinkBase=function(s,u){var c=z(u),d=this.getLinkParent(c);if(!d)throw M(Y,"symlink",s,u);var _=c[c.length-1];if(d.getChild(_))throw M(Ve,"symlink",s,u);var w=d.createChild(_);return w.getNode().makeSymlink(z(s)),w},h.prototype.symlinkSync=function(s,u,c){var d=P(s),_=P(u);this.symlinkBase(d,_)},h.prototype.symlink=function(s,u,c,d){var _=ce(typeof c=="function"?c:d),w=P(s),F=P(u);this.wrapAsync(this.symlinkBase,[w,F],_)},h.prototype.realpathBase=function(s,u){var c=z(s),d=this.getResolvedLink(c);if(!d)throw M(Y,"realpath",s);return(0,R.strToEncoding)(d.getPath()||"/",u)},h.prototype.realpathSync=function(s,u){return this.realpathBase(P(s),ci(u).encoding)},h.prototype.realpath=function(s,u,c){var d=za(u,c),_=d[0],w=d[1],F=P(s);this.wrapAsync(this.realpathBase,[F,_.encoding],w)},h.prototype.lstatBase=function(s,u,c){u===void 0&&(u=!1),c===void 0&&(c=!1);var d=this.getLink(z(s));if(d)return o.default.build(d.getNode(),u);if(c)throw M(Y,"lstat",s)},h.prototype.lstatSync=function(s,u){var c=Bt(u),d=c.throwIfNoEntry,_=d===void 0?!0:d,w=c.bigint,F=w===void 0?!1:w;return this.lstatBase(P(s),F,_)},h.prototype.lstat=function(s,u,c){var d=Ur(u,c),_=d[0],w=_.throwIfNoEntry,F=w===void 0?!0:w,x=_.bigint,k=x===void 0?!1:x,B=d[1];this.wrapAsync(this.lstatBase,[P(s),k,F],B)},h.prototype.statBase=function(s,u,c){u===void 0&&(u=!1),c===void 0&&(c=!0);var d=this.getResolvedLink(z(s));if(d)return o.default.build(d.getNode(),u);if(c)throw M(Y,"stat",s)},h.prototype.statSync=function(s,u){var c=Bt(u),d=c.bigint,_=d===void 0?!0:d,w=c.throwIfNoEntry,F=w===void 0?!0:w;return this.statBase(P(s),_,F)},h.prototype.stat=function(s,u,c){var d=Ur(u,c),_=d[0],w=_.bigint,F=w===void 0?!1:w,x=_.throwIfNoEntry,k=x===void 0?!0:x,B=d[1];this.wrapAsync(this.statBase,[P(s),F,k],B)},h.prototype.fstatBase=function(s,u){u===void 0&&(u=!1);var c=this.getFileByFd(s);if(!c)throw M(Lr,"fstat");return o.default.build(c.node,u)},h.prototype.fstatSync=function(s,u){return this.fstatBase(s,Bt(u).bigint)},h.prototype.fstat=function(s,u,c){var d=Ur(u,c),_=d[0],w=d[1];this.wrapAsync(this.fstatBase,[s,_.bigint],w)},h.prototype.renameBase=function(s,u){var c=this.getLink(z(s));if(!c)throw M(Y,"rename",s,u);var d=z(u),_=this.getLinkParent(d);if(!_)throw M(Y,"rename",s,u);var w=c.parent;w&&w.deleteChild(c);var F=d[d.length-1];c.name=F,c.steps=r(r([],_.steps,!0),[F],!1),_.setChild(c.getName(),c)},h.prototype.renameSync=function(s,u){var c=P(s),d=P(u);this.renameBase(c,d)},h.prototype.rename=function(s,u,c){var d=P(s),_=P(u);this.wrapAsync(this.renameBase,[d,_],c)},h.prototype.existsBase=function(s){return!!this.statBase(s)},h.prototype.existsSync=function(s){try{return this.existsBase(P(s))}catch{return!1}},h.prototype.exists=function(s,u){var c=this,d=P(s);if(typeof u!="function")throw Error($e.CB);(0,f.default)(function(){try{u(c.existsBase(d))}catch{u(!1)}})},h.prototype.accessBase=function(s,u){this.getLinkOrThrow(s,"access")},h.prototype.accessSync=function(s,u){u===void 0&&(u=it);var c=P(s);u=u|0,this.accessBase(c,u)},h.prototype.access=function(s,u,c){var d=it,_;typeof u!="function"?(d=u|0,_=ce(c)):_=u;var w=P(s);this.wrapAsync(this.accessBase,[w,d],_)},h.prototype.appendFileSync=function(s,u,c){c===void 0&&(c=ui);var d=li(c);(!d.flag||ct(s))&&(d.flag="a"),this.writeFileSync(s,u,d)},h.prototype.appendFile=function(s,u,c,d){var _=qa(c,d),w=_[0],F=_[1];(!w.flag||ct(s))&&(w.flag="a"),this.writeFile(s,u,w,F)},h.prototype.readdirBase=function(s,u){var c=z(s),d=this.getResolvedLink(c);if(!d)throw M(Y,"readdir",s);var _=d.getNode();if(!_.isDirectory())throw M(at,"scandir",s);if(u.withFileTypes){var w=[];for(var F in d.children){var x=d.getChild(F);!x||F==="."||F===".."||w.push(a.default.build(x,u.encoding))}return!Lt&&u.encoding!=="buffer"&&w.sort(function(j,Q){return j.name<Q.name?-1:j.name>Q.name?1:0}),w}var k=[];for(var B in d.children)B==="."||B===".."||k.push((0,R.strToEncoding)(B,u.encoding));return!Lt&&u.encoding!=="buffer"&&k.sort(),k},h.prototype.readdirSync=function(s,u){var c=pi(u),d=P(s);return this.readdirBase(d,c)},h.prototype.readdir=function(s,u,c){var d=Za(u,c),_=d[0],w=d[1],F=P(s);this.wrapAsync(this.readdirBase,[F,_],w)},h.prototype.readlinkBase=function(s,u){var c=this.getLinkOrThrow(s,"readlink"),d=c.getNode();if(!d.isSymlink())throw M(Qn,"readlink",s);var _=ee+d.symlink.join(ee);return(0,R.strToEncoding)(_,u)},h.prototype.readlinkSync=function(s,u){var c=sr(u),d=P(s);return this.readlinkBase(d,c.encoding)},h.prototype.readlink=function(s,u,c){var d=ii(u,c),_=d[0],w=d[1],F=P(s);this.wrapAsync(this.readlinkBase,[F,_.encoding],w)},h.prototype.fsyncBase=function(s){this.getFileByFdOrThrow(s,"fsync")},h.prototype.fsyncSync=function(s){this.fsyncBase(s)},h.prototype.fsync=function(s,u){this.wrapAsync(this.fsyncBase,[s],u)},h.prototype.fdatasyncBase=function(s){this.getFileByFdOrThrow(s,"fdatasync")},h.prototype.fdatasyncSync=function(s){this.fdatasyncBase(s)},h.prototype.fdatasync=function(s,u){this.wrapAsync(this.fdatasyncBase,[s],u)},h.prototype.ftruncateBase=function(s,u){var c=this.getFileByFdOrThrow(s,"ftruncate");c.truncate(u)},h.prototype.ftruncateSync=function(s,u){this.ftruncateBase(s,u)},h.prototype.ftruncate=function(s,u,c){var d=typeof u=="number"?u:0,_=ce(typeof u=="number"?c:u);this.wrapAsync(this.ftruncateBase,[s,d],_)},h.prototype.truncateBase=function(s,u){var c=this.openSync(s,"r+");try{this.ftruncateSync(c,u)}finally{this.closeSync(c)}},h.prototype.truncateSync=function(s,u){if(ct(s))return this.ftruncateSync(s,u);this.truncateBase(s,u)},h.prototype.truncate=function(s,u,c){var d=typeof u=="number"?u:0,_=ce(typeof u=="number"?c:u);if(ct(s))return this.ftruncate(s,d,_);this.wrapAsync(this.truncateBase,[s,d],_)},h.prototype.futimesBase=function(s,u,c){var d=this.getFileByFdOrThrow(s,"futimes"),_=d.node;_.atime=new Date(u*1e3),_.mtime=new Date(c*1e3)},h.prototype.futimesSync=function(s,u,c){this.futimesBase(s,Me(u),Me(c))},h.prototype.futimes=function(s,u,c,d){this.wrapAsync(this.futimesBase,[s,Me(u),Me(c)],d)},h.prototype.utimesBase=function(s,u,c){var d=this.openSync(s,"r");try{this.futimesBase(d,u,c)}finally{this.closeSync(d)}},h.prototype.utimesSync=function(s,u,c){this.utimesBase(P(s),Me(u),Me(c))},h.prototype.utimes=function(s,u,c,d){this.wrapAsync(this.utimesBase,[P(s),Me(u),Me(c)],d)},h.prototype.mkdirBase=function(s,u){var c=z(s);if(!c.length)throw M(Ve,"mkdir",s);var d=this.getLinkParentAsDirOrThrow(s,"mkdir"),_=c[c.length-1];if(d.getChild(_))throw M(Ve,"mkdir",s);d.createChild(_,this.createNode(!0,u))},h.prototype.mkdirpBase=function(s,u){for(var c=$t(s),d=c.substring(1),_=d?d.split(ee):[],w=this.root,F=!1,x=0;x<_.length;x++){var k=_[x];if(!w.getNode().isDirectory())throw M(at,"mkdir",w.getPath());var B=w.getChild(k);if(B)if(B.getNode().isDirectory())w=B;else throw M(at,"mkdir",B.getPath());else w=w.createChild(k,this.createNode(!0,u)),F=!0}return F?c:void 0},h.prototype.mkdirSync=function(s,u){var c=hi(u),d=he(c.mode,511),_=P(s);if(c.recursive)return this.mkdirpBase(_,d);this.mkdirBase(_,d)},h.prototype.mkdir=function(s,u,c){var d=hi(u),_=ce(typeof u=="function"?u:c),w=he(d.mode,511),F=P(s);d.recursive?this.wrapAsync(this.mkdirpBase,[F,w],_):this.wrapAsync(this.mkdirBase,[F,w],_)},h.prototype.mkdirpSync=function(s,u){return this.mkdirSync(s,{mode:u,recursive:!0})},h.prototype.mkdirp=function(s,u,c){var d=typeof u=="function"?void 0:u,_=ce(typeof u=="function"?u:c);this.mkdir(s,{mode:d,recursive:!0},_)},h.prototype.mkdtempBase=function(s,u,c){c===void 0&&(c=5);var d=s+this.genRndStr();try{return this.mkdirBase(d,511),(0,R.strToEncoding)(d,u)}catch(_){if(_.code===Ve){if(c>1)return this.mkdtempBase(s,u,c-1);throw Error("Could not create temp dir.")}else throw _}},h.prototype.mkdtempSync=function(s,u){var c=sr(u).encoding;if(!s||typeof s!="string")throw new TypeError("filename prefix is required");return jr(s),this.mkdtempBase(s,c)},h.prototype.mkdtemp=function(s,u,c){var d=ii(u,c),_=d[0].encoding,w=d[1];if(!s||typeof s!="string")throw new TypeError("filename prefix is required");jr(s)&&this.wrapAsync(this.mkdtempBase,[s,_],w)},h.prototype.rmdirBase=function(s,u){var c=di(u),d=this.getLinkAsDirOrThrow(s,"rmdir");if(d.length&&!c.recursive)throw M(ti,"rmdir",s);this.deleteLink(d)},h.prototype.rmdirSync=function(s,u){this.rmdirBase(P(s),u)},h.prototype.rmdir=function(s,u,c){var d=di(u),_=ce(typeof u=="function"?u:c);this.wrapAsync(this.rmdirBase,[P(s),d],_)},h.prototype.rmBase=function(s,u){u===void 0&&(u={});var c=this.getResolvedLink(s);if(!c){if(!u.force)throw M(Y,"stat",s);return}if(c.getNode().isDirectory()&&!u.recursive)throw M(ni,"rm",s);this.deleteLink(c)},h.prototype.rmSync=function(s,u){this.rmBase(P(s),u)},h.prototype.rm=function(s,u,c){var d=Xa(u,c),_=d[0],w=d[1];this.wrapAsync(this.rmBase,[P(s),_],w)},h.prototype.fchmodBase=function(s,u){var c=this.getFileByFdOrThrow(s,"fchmod");c.chmod(u)},h.prototype.fchmodSync=function(s,u){this.fchmodBase(s,he(u))},h.prototype.fchmod=function(s,u,c){this.wrapAsync(this.fchmodBase,[s,he(u)],c)},h.prototype.chmodBase=function(s,u){var c=this.openSync(s,"r");try{this.fchmodBase(c,u)}finally{this.closeSync(c)}},h.prototype.chmodSync=function(s,u){var c=he(u),d=P(s);this.chmodBase(d,c)},h.prototype.chmod=function(s,u,c){var d=he(u),_=P(s);this.wrapAsync(this.chmodBase,[_,d],c)},h.prototype.lchmodBase=function(s,u){var c=this.openBase(s,T,0,!1);try{this.fchmodBase(c,u)}finally{this.closeSync(c)}},h.prototype.lchmodSync=function(s,u){var c=he(u),d=P(s);this.lchmodBase(d,c)},h.prototype.lchmod=function(s,u,c){var d=he(u),_=P(s);this.wrapAsync(this.lchmodBase,[_,d],c)},h.prototype.fchownBase=function(s,u,c){this.getFileByFdOrThrow(s,"fchown").chown(u,c)},h.prototype.fchownSync=function(s,u,c){St(u),Et(c),this.fchownBase(s,u,c)},h.prototype.fchown=function(s,u,c,d){St(u),Et(c),this.wrapAsync(this.fchownBase,[s,u,c],d)},h.prototype.chownBase=function(s,u,c){var d=this.getResolvedLinkOrThrow(s,"chown"),_=d.getNode();_.chown(u,c)},h.prototype.chownSync=function(s,u,c){St(u),Et(c),this.chownBase(P(s),u,c)},h.prototype.chown=function(s,u,c,d){St(u),Et(c),this.wrapAsync(this.chownBase,[P(s),u,c],d)},h.prototype.lchownBase=function(s,u,c){this.getLinkOrThrow(s,"lchown").getNode().chown(u,c)},h.prototype.lchownSync=function(s,u,c){St(u),Et(c),this.lchownBase(P(s),u,c)},h.prototype.lchown=function(s,u,c,d){St(u),Et(c),this.wrapAsync(this.lchownBase,[P(s),u,c],d)},h.prototype.watchFile=function(s,u,c){var d=P(s),_=u,w=c;if(typeof _=="function"&&(w=u,_=null),typeof w!="function")throw Error('"watchFile()" requires a listener function');var F=5007,x=!0;_&&typeof _=="object"&&(typeof _.interval=="number"&&(F=_.interval),typeof _.persistent=="boolean"&&(x=_.persistent));var k=this.statWatchers[d];return k||(k=new this.StatWatcher,k.start(d,x,F),this.statWatchers[d]=k),k.addListener("change",w),k},h.prototype.unwatchFile=function(s,u){var c=P(s),d=this.statWatchers[c];d&&(typeof u=="function"?d.removeListener("change",u):d.removeAllListeners("change"),d.listenerCount("change")===0&&(d.stop(),delete this.statWatchers[c]))},h.prototype.createReadStream=function(s,u){return new this.ReadStream(s,u)},h.prototype.createWriteStream=function(s,u){return new this.WriteStream(s,u)},h.prototype.watch=function(s,u,c){var d=P(s),_=u;typeof u=="function"&&(c=u,_=null);var w=sr(_),F=w.persistent,x=w.recursive,k=w.encoding;F===void 0&&(F=!0),x===void 0&&(x=!1);var B=new this.FSWatcher;return B.start(d,F,x,k),c&&B.addListener("change",c),B},h.fd=2147483647,h}();e.Volume=us;function ls(h){h.emit("stop")}var vi=function(h){t(s,h);function s(u){var c=h.call(this)||this;return c.onInterval=function(){try{var d=c.vol.statSync(c.filename);c.hasChanged(d)&&(c.emit("change",d,c.prev),c.prev=d)}finally{c.loop()}},c.vol=u,c}return s.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},s.prototype.hasChanged=function(u){return u.mtimeMs>this.prev.mtimeMs||u.nlink!==this.prev.nlink},s.prototype.start=function(u,c,d){c===void 0&&(c=!0),d===void 0&&(d=5007),this.filename=P(u),this.setTimeout=c?setTimeout.bind(typeof globalThis<"u"?globalThis:Z):p.default,this.interval=d,this.prev=this.vol.statSync(this.filename),this.loop()},s.prototype.stop=function(){clearTimeout(this.timeoutRef),v.default.nextTick(ls,this)},s}(E.EventEmitter);e.StatWatcher=vi;var pe;function cs(h){pe=(0,l.bufferAllocUnsafe)(h),pe.used=0}b.inherits(Fe,m.Readable),e.ReadStream=Fe;function Fe(h,s,u){if(!(this instanceof Fe))return new Fe(h,s,u);if(this._vol=h,u=Object.assign({},$r(u,{})),u.highWaterMark===void 0&&(u.highWaterMark=64*1024),m.Readable.call(this,u),this.path=P(s),this.fd=u.fd===void 0?null:u.fd,this.flags=u.flags===void 0?"r":u.flags,this.mode=u.mode===void 0?438:u.mode,this.start=u.start,this.end=u.end,this.autoClose=u.autoClose===void 0?!0:u.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}Fe.prototype.open=function(){var h=this;this._vol.open(this.path,this.flags,this.mode,function(s,u){if(s){h.autoClose&&h.destroy&&h.destroy(),h.emit("error",s);return}h.fd=u,h.emit("open",u),h.read()})},Fe.prototype._read=function(h){if(typeof this.fd!="number")return this.once("open",function(){this._read(h)});if(this.destroyed)return;(!pe||pe.length-pe.used<Ua)&&cs(this._readableState.highWaterMark);var s=pe,u=Math.min(pe.length-pe.used,h),c=pe.used;if(this.pos!==void 0&&(u=Math.min(this.end-this.pos+1,u)),u<=0)return this.push(null);var d=this;this._vol.read(this.fd,pe,pe.used,u,this.pos,_),this.pos!==void 0&&(this.pos+=u),pe.used+=u;function _(w,F){if(w)d.autoClose&&d.destroy&&d.destroy(),d.emit("error",w);else{var x=null;F>0&&(d.bytesRead+=F,x=s.slice(c,c+F)),d.push(x)}}},Fe.prototype._destroy=function(h,s){this.close(function(u){s(h||u)})},Fe.prototype.close=function(h){var s=this,u;if(h&&this.once("close",h),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",yi);return}return v.default.nextTick(function(){return s.emit("close")})}typeof((u=this._readableState)===null||u===void 0?void 0:u.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(c){c?s.emit("error",c):s.emit("close")}),this.fd=null};function yi(h){this.close()}b.inherits(me,m.Writable),e.WriteStream=me;function me(h,s,u){if(!(this instanceof me))return new me(h,s,u);if(this._vol=h,u=Object.assign({},$r(u,{})),m.Writable.call(this,u),this.path=P(s),this.fd=u.fd===void 0?null:u.fd,this.flags=u.flags===void 0?"w":u.flags,this.mode=u.mode===void 0?438:u.mode,this.start=u.start,this.autoClose=u.autoClose===void 0?!0:!!u.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}u.encoding&&this.setDefaultEncoding(u.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}me.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,(function(h,s){if(h){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",h);return}this.fd=s,this.emit("open",s)}).bind(this))},me.prototype._write=function(h,s,u){if(!(h instanceof l.Buffer||h instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(h,s,u)});var c=this;this._vol.write(this.fd,h,0,h.length,this.pos,function(d,_){if(d)return c.autoClose&&c.destroy&&c.destroy(),u(d);c.bytesWritten+=_,u()}),this.pos!==void 0&&(this.pos+=h.length)},me.prototype._writev=function(h,s){if(typeof this.fd!="number")return this.once("open",function(){this._writev(h,s)});for(var u=this,c=h.length,d=new Array(c),_=0,w=0;w<c;w++){var F=h[w].chunk;d[w]=F,_+=F.length}var x=l.Buffer.concat(d);this._vol.write(this.fd,x,0,x.length,this.pos,function(k,B){if(k)return u.destroy&&u.destroy(),s(k);u.bytesWritten+=B,s()}),this.pos!==void 0&&(this.pos+=_)},me.prototype.close=function(h){var s=this,u;if(h&&this.once("close",h),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",yi);return}return v.default.nextTick(function(){return s.emit("close")})}typeof((u=this._writableState)===null||u===void 0?void 0:u.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(c){c?s.emit("error",c):s.emit("close")}),this.fd=null},me.prototype._destroy=Fe.prototype._destroy,me.prototype.destroySoon=me.prototype.end;var gi=function(h){t(s,h);function s(u){var c=h.call(this)||this;return c._filename="",c._filenameEncoded="",c._recursive=!1,c._encoding=R.ENCODING_UTF8,c._listenerRemovers=new Map,c._onParentChild=function(d){d.getName()===c._getName()&&c._emit("rename")},c._emit=function(d){c.emit("change",d,c._filenameEncoded)},c._persist=function(){c._timer=setTimeout(c._persist,1e6)},c._vol=u,c}return s.prototype._getName=function(){return this._steps[this._steps.length-1]},s.prototype.start=function(u,c,d,_){var w=this;c===void 0&&(c=!0),d===void 0&&(d=!1),_===void 0&&(_=R.ENCODING_UTF8),this._filename=P(u),this._steps=z(this._filename),this._filenameEncoded=(0,R.strToEncoding)(this._filename),this._recursive=d,this._encoding=_;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(j){var F=new Error("watch ".concat(this._filename," ").concat(j.code));throw F.code=j.code,F.errno=j.code,F}var x=function(j){var Q,ft=j.getPath(),Ce=j.getNode(),We=function(){var q=le(w._filename,ft);return q||(q=w._getName()),w.emit("change","change",q)};Ce.on("change",We);var ht=(Q=w._listenerRemovers.get(Ce.ino))!==null&&Q!==void 0?Q:[];ht.push(function(){return Ce.removeListener("change",We)}),w._listenerRemovers.set(Ce.ino,ht)},k=function(j){var Q,ft=j.getNode(),Ce=function(q){w.emit("change","rename",le(w._filename,q.getPath())),setTimeout(function(){x(q),k(q)})},We=function(q){var ve=function(ge){var ur=ge.getNode().ino,_i=w._listenerRemovers.get(ur);_i&&(_i.forEach(function(lr){return lr()}),w._listenerRemovers.delete(ur)),Object.values(ge.children).forEach(function(lr){lr&&ve(lr)})};ve(q),w.emit("change","rename",le(w._filename,q.getPath()))};Object.entries(j.children).forEach(function(q){var ve=q[0],ge=q[1];ge&&ve!=="."&&ve!==".."&&x(ge)}),j.on("child:add",Ce),j.on("child:delete",We);var ht=(Q=w._listenerRemovers.get(ft.ino))!==null&&Q!==void 0?Q:[];ht.push(function(){j.removeListener("child:add",Ce),j.removeListener("child:delete",We)}),d&&Object.entries(j.children).forEach(function(q){var ve=q[0],ge=q[1];ge&&ve!=="."&&ve!==".."&&k(ge)})};x(this._link),k(this._link);var B=this._link.parent;B&&(B.setMaxListeners(B.getMaxListeners()+1),B.on("child:delete",this._onParentChild)),c&&this._persist()},s.prototype.close=function(){clearTimeout(this._timer),this._listenerRemovers.forEach(function(c){c.forEach(function(d){return d()})}),this._listenerRemovers.clear();var u=this._link.parent;u&&u.removeListener("child:delete",this._onParentChild)},s}(E.EventEmitter);e.FSWatcher=gi})(Aa);var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.fsSyncMethods=ze.fsProps=ze.fsAsyncMethods=void 0;var sf=["constants","F_OK","R_OK","W_OK","X_OK","Stats"];ze.fsProps=sf;var uf=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","rmSync","createReadStream","createWriteStream"];ze.fsSyncMethods=uf;var lf=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","rm","watchFile","unwatchFile","watch"];ze.fsAsyncMethods=lf;(function(e,t){var r=Z&&Z.__assign||function(){return r=Object.assign||function(g){for(var b,O=1,S=arguments.length;O<S;O++){b=arguments[O];for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&(g[A]=b[A])}return g},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.fs=t.createFsFromVolume=t.vol=t.Volume=void 0;var n=yt,i=xt,o=Aa,a=ze,l=a.fsSyncMethods,f=a.fsAsyncMethods,v=et,p=v.constants.F_OK,m=v.constants.R_OK,y=v.constants.W_OK,E=v.constants.X_OK;t.Volume=o.Volume,t.vol=new o.Volume;function R(g){for(var b={F_OK:p,R_OK:m,W_OK:y,X_OK:E,constants:v.constants,Stats:n.default,Dirent:i.default},O=0,S=l;O<S.length;O++){var A=S[O];typeof g[A]=="function"&&(b[A]=g[A].bind(g))}for(var N=0,T=f;N<T.length;N++){var A=T[N];typeof g[A]=="function"&&(b[A]=g[A].bind(g))}return b.StatWatcher=g.StatWatcher,b.FSWatcher=g.FSWatcher,b.WriteStream=g.WriteStream,b.ReadStream=g.ReadStream,b.promises=g.promises,b._toUnixTimestamp=o.toUnixTimestamp,b}t.createFsFromVolume=R,t.fs=R(t.vol),e.exports=r(r({},e.exports),t.fs),e.exports.semantic=!0})(dn,dn.exports);var cf=dn.exports;const ff=cf,{ono:Gr}=vt,Gi=Re,{ResolverError:Jr}=X;var hf={order:100,canRead(e){return Gi.isFileSystemPath(e.url)},read(e){return new Promise((t,r)=>{let n;try{n=Gi.toFileSystemPath(e.url)}catch(i){r(new Jr(Gr.uri(i,`Malformed URI: ${e.url}`),e.url))}try{ff.readFile(n,(i,o)=>{i?r(new Jr(Gr(i,`Error opening file "${n}"`),n)):t(o)})}catch(i){r(new Jr(Gr(i,`Error opening file "${n}"`),n))}})}};const df=So,pf=So,{ono:cr}=vt,Kt=Re,{ResolverError:Ji}=X;var mf={order:200,headers:null,timeout:5e3,redirects:5,withCredentials:!1,canRead(e){return Kt.isHttp(e.url)},read(e){let t=Kt.parse(e.url);return process.browser&&!t.protocol&&(t.protocol=Kt.parse(location.href).protocol),Fa(t,this)}};function Fa(e,t,r){return new Promise((n,i)=>{e=Kt.parse(e),r=r||[],r.push(e.href),vf(e,t).then(o=>{if(o.statusCode>=400)throw cr({status:o.statusCode},`HTTP ERROR ${o.statusCode}`);if(o.statusCode>=300)if(r.length>t.redirects)i(new Ji(cr({status:o.statusCode},`Error downloading ${r[0]}. 
Too many redirects: 
  ${r.join(` 
  `)}`)));else if(o.headers.location){let a=Kt.resolve(e,o.headers.location);Fa(a,t,r).then(n,i)}else throw cr({status:o.statusCode},`HTTP ${o.statusCode} redirect with no location header`);else n(o.body||Buffer.alloc(0))}).catch(o=>{i(new Ji(cr(o,`Error downloading ${e.href}`),e.href))})})}function vf(e,t){return new Promise((r,n)=>{let o=(e.protocol==="https:"?pf:df).get({hostname:e.hostname,port:e.port,path:e.path,auth:e.auth,protocol:e.protocol,headers:t.headers||{},withCredentials:t.withCredentials});typeof o.setTimeout=="function"&&o.setTimeout(t.timeout),o.on("timeout",()=>{o.abort()}),o.on("error",n),o.once("response",a=>{a.body=Buffer.alloc(0),a.on("data",l=>{a.body=Buffer.concat([a.body,Buffer.from(l)])}),a.on("error",n),a.on("end",()=>{r(a)})})})}const yf=fu,gf=Fc,_f=xc,Sf=Pc,Ef=hf,bf=mf;var wf=Mn;function Mn(e){vn(this,Mn.defaults),vn(this,e)}Mn.defaults={parse:{json:yf,yaml:gf,text:_f,binary:Sf},resolve:{file:Ef,http:bf,external:!0},continueOnError:!1,dereference:{circular:!0,excludedPathMatcher:()=>!1}};function vn(e,t){if(Xi(t)){let r=Object.keys(t);for(let n=0;n<r.length;n++){let i=r[n],o=t[i],a=e[i];Xi(o)?e[i]=vn(a||{},o):o!==void 0&&(e[i]=o)}}return e}function Xi(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}const Qi=wf;var Rf=Of;function Of(e){let t,r,n,i;return e=Array.prototype.slice.call(e),typeof e[e.length-1]=="function"&&(i=e.pop()),typeof e[0]=="string"?(t=e[0],typeof e[2]=="object"?(r=e[1],n=e[2]):(r=void 0,n=e[1])):(t="",r=e[0],n=e[1]),n instanceof Qi||(n=new Qi(n)),{path:t,schema:r,options:n,callback:i}}const Zi=er(),Af=Ar(),Tf=ko,Vt=Re,{isHandledError:Nf}=X;var Ff=Cf;function Cf(e,t){if(!t.resolve.external)return Promise.resolve();try{let r=Un(e.schema,e.$refs._root$Ref.path+"#",e.$refs,t);return Promise.all(r)}catch(r){return Promise.reject(r)}}function Un(e,t,r,n,i){i=i||new Set;let o=[];if(e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!i.has(e))if(i.add(e),Zi.isExternal$Ref(e))o.push(eo(e,t,r,n));else for(let a of Object.keys(e)){let l=Af.join(t,a),f=e[a];Zi.isExternal$Ref(f)?o.push(eo(f,l,r,n)):o=o.concat(Un(f,l,r,n,i))}return o}async function eo(e,t,r,n){let i=Vt.resolve(t,e.$ref),o=Vt.stripHash(i);if(e=r._$refs[o],e)return Promise.resolve(e.value);try{const a=await Tf(i,r,n);let l=Un(a,o+"#",r,n);return Promise.all(l)}catch(a){if(!n.continueOnError||!Nf(a))throw a;return r._$refs[o]&&(a.source=decodeURI(Vt.stripHash(t)),a.path=Vt.safePointerToPath(Vt.getHash(t))),[]}}const wr=er(),Zt=Ar(),Xr=Re;var If=xf;function xf(e,t){let r=[];jn(e,"schema",e.$refs._root$Ref.path+"#","#",0,r,e.$refs,t),kf(r)}function jn(e,t,r,n,i,o,a,l){let f=t===null?e:e[t];if(f&&typeof f=="object"&&!ArrayBuffer.isView(f))if(wr.isAllowed$Ref(f))to(e,t,r,n,i,o,a,l);else{let v=Object.keys(f).sort((p,m)=>p==="definitions"?-1:m==="definitions"?1:p.length-m.length);for(let p of v){let m=Zt.join(r,p),y=Zt.join(n,p),E=f[p];wr.isAllowed$Ref(E)?to(f,p,r,y,i,o,a,l):jn(f,p,m,y,i,o,a,l)}}}function to(e,t,r,n,i,o,a,l){let f=t===null?e:e[t],v=Xr.resolve(r,f.$ref),p=a._resolve(v,n,l);if(p===null)return;let m=Zt.parse(n).length,y=Xr.stripHash(p.path),E=Xr.getHash(p.path),R=y!==a._root$Ref.path,g=wr.isExtended$Ref(f);i+=p.indirections;let b=Pf(o,e,t);if(b)if(m<b.depth||i<b.indirections)Df(o,b);else return;o.push({$ref:f,parent:e,key:t,pathFromRoot:n,depth:m,file:y,hash:E,value:p.value,circular:p.circular,extended:g,external:R,indirections:i}),b||jn(p.value,null,p.path,n,i+1,o,a,l)}function kf(e){e.sort((i,o)=>{if(i.file!==o.file)return i.file<o.file?-1:1;if(i.hash!==o.hash)return i.hash<o.hash?-1:1;if(i.circular!==o.circular)return i.circular?-1:1;if(i.extended!==o.extended)return i.extended?1:-1;if(i.indirections!==o.indirections)return i.indirections-o.indirections;if(i.depth!==o.depth)return i.depth-o.depth;{let a=i.pathFromRoot.lastIndexOf("/definitions"),l=o.pathFromRoot.lastIndexOf("/definitions");return a!==l?l-a:i.pathFromRoot.length-o.pathFromRoot.length}});let t,r,n;for(let i of e)i.external?i.file===t&&i.hash===r?i.$ref.$ref=n:i.file===t&&i.hash.indexOf(r+"/")===0?i.$ref.$ref=Zt.join(n,Zt.parse(i.hash.replace(r,"#"))):(t=i.file,r=i.hash,n=i.pathFromRoot,i.$ref=i.parent[i.key]=wr.dereference(i.$ref,i.value),i.circular&&(i.$ref.$ref=i.pathFromRoot)):i.$ref.$ref=i.hash}function Pf(e,t,r){for(let n=0;n<e.length;n++){let i=e[n];if(i.parent===t&&i.key===r)return i}}function Df(e,t){let r=e.indexOf(t);e.splice(r,1)}const yn=er(),ro=Ar(),{ono:Lf}=vt,Bf=Re;var $f=Mf;function Mf(e,t){let r=Hn(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,t);e.$refs.circular=r.circular,e.schema=r.value}function Hn(e,t,r,n,i,o,a,l){let f,v={value:e,circular:!1},p=l.dereference.excludedPathMatcher;if((l.dereference.circular==="ignore"||!i.has(e))&&e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!p(r)){if(n.add(e),i.add(e),yn.isAllowed$Ref(e,l))f=no(e,t,r,n,i,o,a,l),v.circular=f.circular,v.value=f.value;else for(const m of Object.keys(e)){let y=ro.join(t,m),E=ro.join(r,m);if(p(E))continue;let R=e[m],g=!1;yn.isAllowed$Ref(R,l)?(f=no(R,y,E,n,i,o,a,l),g=f.circular,e[m]!==f.value&&(e[m]=f.value)):n.has(R)?g=Ca(y,a,l):(f=Hn(R,y,E,n,i,o,a,l),g=f.circular,e[m]!==f.value&&(e[m]=f.value)),v.circular=v.circular||g}n.delete(e)}return v}function no(e,t,r,n,i,o,a,l){let f=Bf.resolve(t,e.$ref);const v=o.get(f);if(v){const g=Object.keys(e);if(g.length>1){const b={};for(let O of g)O!=="$ref"&&!(O in v.value)&&(b[O]=e[O]);return{circular:v.circular,value:Object.assign({},v.value,b)}}return v}let p=a._resolve(f,t,l);if(p===null)return{circular:!1,value:null};let m=p.circular,y=m||n.has(p.value);y&&Ca(t,a,l);let E=yn.dereference(e,p.value);if(!y){let g=Hn(E,p.path,r,n,i,o,a,l);y=g.circular,E=g.value}y&&!m&&l.dereference.circular==="ignore"&&(E=e),m&&(E.$ref=r);const R={circular:y,value:E};return Object.keys(e).length===1&&o.set(f,R),R}function Ca(e,t,r){if(t.circular=!0,!r.dereference.circular)throw Lf.reference(`Circular $ref pointer found at ${e}`);return!0}function Uf(){return typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:typeof setImmediate=="function"?setImmediate:function(t){setTimeout(t,0)}}var jf=Uf(),io=jf,Hf=function(t,r){if(t){r.then(function(n){io(function(){t(null,n)})},function(n){io(function(){t(n)})});return}else return r};const Ia=ru,Vf=ko,Ir=Rf,Wf=Ff,Yf=If,qf=$f,wt=Re,{JSONParserError:Kf,InvalidPointerError:zf,MissingPointerError:Gf,ResolverError:Jf,ParserError:Xf,UnmatchedParserError:Qf,UnmatchedResolverError:Zf,isHandledError:eh,JSONParserErrorGroup:oo}=X,Ee=Hf,{ono:ao}=vt;Pe.exports=Le;Pe.exports.default=Le;Pe.exports.JSONParserError=Kf;Pe.exports.InvalidPointerError=zf;Pe.exports.MissingPointerError=Gf;Pe.exports.ResolverError=Jf;Pe.exports.ParserError=Xf;Pe.exports.UnmatchedParserError=Qf;Pe.exports.UnmatchedResolverError=Zf;function Le(){this.schema=null,this.$refs=new Ia}Le.parse=function(t,r,n,i){let o=this,a=new o;return a.parse.apply(a,arguments)};Le.prototype.parse=async function(t,r,n,i){let o=Ir(arguments),a;if(!o.path&&!o.schema){let v=ao(`Expected a file path, URL, or object. Got ${o.path||o.schema}`);return Ee(o.callback,Promise.reject(v))}this.schema=null,this.$refs=new Ia;let l="http";if(wt.isFileSystemPath(o.path)&&(o.path=wt.fromFileSystemPath(o.path),l="file"),o.path=wt.resolve(wt.cwd(),o.path),o.schema&&typeof o.schema=="object"){let v=this.$refs._add(o.path);v.value=o.schema,v.pathType=l,a=Promise.resolve(o.schema)}else a=Vf(o.path,this.$refs,o.options);let f=this;try{let v=await a;if(v!==null&&typeof v=="object"&&!Buffer.isBuffer(v))return f.schema=v,Ee(o.callback,Promise.resolve(f.schema));if(o.options.continueOnError)return f.schema=null,Ee(o.callback,Promise.resolve(f.schema));throw ao.syntax(`"${f.$refs._root$Ref.path||v}" is not a valid JSON Schema`)}catch(v){return!o.options.continueOnError||!eh(v)?Ee(o.callback,Promise.reject(v)):(this.$refs._$refs[wt.stripHash(o.path)]&&this.$refs._$refs[wt.stripHash(o.path)].addError(v),Ee(o.callback,Promise.resolve(null)))}};Le.resolve=function(t,r,n,i){let o=this,a=new o;return a.resolve.apply(a,arguments)};Le.prototype.resolve=async function(t,r,n,i){let o=this,a=Ir(arguments);try{return await this.parse(a.path,a.schema,a.options),await Wf(o,a.options),Vn(o),Ee(a.callback,Promise.resolve(o.$refs))}catch(l){return Ee(a.callback,Promise.reject(l))}};Le.bundle=function(t,r,n,i){let o=this,a=new o;return a.bundle.apply(a,arguments)};Le.prototype.bundle=async function(t,r,n,i){let o=this,a=Ir(arguments);try{return await this.resolve(a.path,a.schema,a.options),Yf(o,a.options),Vn(o),Ee(a.callback,Promise.resolve(o.schema))}catch(l){return Ee(a.callback,Promise.reject(l))}};Le.dereference=function(t,r,n,i){let o=this,a=new o;return a.dereference.apply(a,arguments)};Le.prototype.dereference=async function(t,r,n,i){let o=this,a=Ir(arguments);try{return await this.resolve(a.path,a.schema,a.options),qf(o,a.options),Vn(o),Ee(a.callback,Promise.resolve(o.schema))}catch(l){return Ee(a.callback,Promise.reject(l))}};function Vn(e){if(oo.getParserErrors(e).length>0)throw new oo(e)}var th=Pe.exports;const rh=ds(th);var be={},Ue={},or={},zt=typeof Symbol=="function"?Symbol("curriable placeholder"):60881;function nh(e,t){function r(n){return function(){var i=n.length,o=arguments,a=o.length,l=[],f=0,v=t,p;if(i)for(var m=-1;++m<i;)l[m]=p=n[m]===zt&&f<a?o[f++]:n[m],p!==zt&&--v;if(f<a)for(;f<a;)l[l.length]=p=o[f],p!==zt&&f<t&&--v,++f;return v>0?r(l):e.apply(this,l)}}return r([])}function gt(e,t){var r=typeof t=="number"?t:e.length,n=nh(e,r);return n.arity=r,n.fn=e,n}gt.__=zt;function ih(e){return e===zt}gt.isPlaceholder=ih;function oh(e){return e.fn}gt.uncurry=oh;var fr,hr,_e,Rt,ah=typeof Buffer<"u"&&typeof Buffer.from=="function",sh=typeof Uint16Array=="function",uh=/\[object (HTML(.*)Element)\]/,lh=/\[object (SVG(.*)Element)\]/,ch=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"],xe=ch.reduce(function(e,t){return e["[object "+t+"]"]=t,e},{}),V=Object.keys(xe).reduce(function(e,t){return e[xe[t].toUpperCase()]=t,e},{}),fh={"[object Map]":!0,"[object Set]":!0},hh={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},dh=(fr={},fr[V.ARGUMENTS]=!0,fr[V.ARRAY]=!0,fr),ph=(hr={},hr[V.REGEXP]=!0,hr[V.SYMBOL]=!0,hr),mh=(_e={},_e[V.FLOAT32ARRAY]=!0,_e[V.FLOAT64ARRAY]=!0,_e[V.INT8ARRAY]=!0,_e[V.INT16ARRAY]=!0,_e[V.INT32ARRAY]=!0,_e[V.UINT8ARRAY]=!0,_e[V.UINT8CLAMPEDARRAY]=!0,_e[V.UINT16ARRAY]=!0,_e[V.UINT32ARRAY]=!0,_e),vh=(Rt={},Rt[V.GENERATOR]=!0,Rt[V.PROMISE]=!0,Rt[V.WEAKMAP]=!0,Rt[V.WEAKSET]=!0,Rt),yh=/^\s*function\s*([^(]*)/i,xa=Object.prototype.toString,gh=Object.keys;function _h(e){return e.name||(e.toString().match(yh)||[])[1]||"anonymous"}function Sh(e){for(var t=e.length,r=5381,n=52711,i;t--;)i=e.charCodeAt(t),r=r*33^i,n=n*33^i;return(r>>>0)*4096+(n>>>0)}function Eh(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function ka(e,t){return e>t}function bh(e,t){return e[0]>t[0]}function gn(e,t){for(var r,n,i=0;i<e.length;++i){for(n=e[i],r=i-1;~r&&t(e[r],n);--r)e[r+1]=e[r];e[r+1]=n}return e}function wh(e,t,r){var n=typeof e.get=="function",i=[];n?(e.forEach(function(v,p){i.push([vr(p,t,r),vr(v,t,r)])}),gn(i,bh)):(e.forEach(function(v){i.push(vr(v,t,r))}),gn(i,ka));for(var o=_h(e.constructor)+"|[",a=0,l=i.length,f;a<l;++a)f=i[a],o+=(a?",":"")+(n?"["+f[0]+","+f[1]+"]":f);return o+"]"}function Rh(e){for(var t=gn(gh(e),ka),r={},n,i=0;i<t.length;++i)n=t[i],r[n]=e[n];return r}function Oh(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function Ah(e){return Buffer.from(e).toString("utf8")}function Th(){return""}var so=function(){return ah?Ah:sh?Oh:Th}();function Nh(e){for(var t=e.children,r="",n=0;n<t.length;++n)r+=t[n].outerHTML;return r}function uo(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r+1;return 0}function Rr(e,t,r,n){if(n===void 0){var i=typeof e;if(i==="string"||hh[i])return i+"|"+e;if(e===null)return"null|"+e}var o=n||xa.call(e);return dh[o]?e:o===V.OBJECT?Rh(e):ph[o]?xe[o]+"|"+e.toString():fh[o]?wh(e,t,r):o===V.DATE?xe[o]+"|"+e.getTime():o===V.ERROR?xe[o]+"|"+e.stack:o===V.EVENT?Eh(e):vh[o]?xe[o]+"|NOT_ENUMERABLE":uh.test(o)||lh.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===V.DOCUMENTFRAGMENT?xe[o]+"|"+Nh(e):mh[o]?xe[o]+"|"+e.join(","):o===V.ARRAYBUFFER?xe[o]+"|"+so(e):o===V.DATAVIEW?xe[o]+"|"+so(e.buffer):e}function Fh(e,t){return e===void 0&&(e=[]),t===void 0&&(t=[]),function(r,n){if(typeof n=="object")if(e.length){var i=uo(e,this);i===0?e.push(this):(e.splice(i),t.splice(i)),t.push(r);var o=uo(e,n);if(o!==0)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(n)}else e[0]=n,t[0]=r;return r&&this[r]instanceof Date?Rr(this[r],e,t,V.DATE):Rr(n,e,t)}}function vr(e,t,r){if(!e||typeof e!="object")return Rr(e,t,r);var n=xa.call(e);return n===V.DATE||n===V.REGEXP?Rr(e,t,r,n):JSON.stringify(e,Fh(t,r))}function ye(e){return Sh(vr(e))}ye.is=gt(function(e,t){return ye(e)===ye(t)});ye.is.all=gt(function(e){for(var t=ye.is(e),r=1;r<arguments.length;++r)if(!t(arguments[r]))return!1;return!0},2);ye.is.any=gt(function(e){for(var t=ye.is(e),r=1;r<arguments.length;r++)if(t(arguments[r]))return!0;return!1},2);ye.is.not=gt(function(e,t){return ye(e)!==ye(t)});const Ch=Object.freeze(Object.defineProperty({__proto__:null,default:ye,hash:ye},Symbol.toStringTag,{value:"Module"})),Ih=_o(Ch);Object.defineProperty(or,"__esModule",{value:!0});var xh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),kh=Ih,Ph=Dh(kh);function Dh(e){return e&&e.__esModule?e:{default:e}}function Lh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Wn=function(){function e(t,r,n){Lh(this,e),this.id=t;var i={cache:!0};if(typeof n>"u"&&(n=i),typeof r!="function"?(this.value=r,this.type=this.constructor.CONSTANT):(this.calculationMethod=r,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");if(typeof this.value>"u"&&typeof this.calculationMethod>"u")throw new Error("facts must have a value or method");return this.priority=parseInt(n.priority||1,10),this.options=Object.assign({},i,n),this.cacheKeyMethod=this.defaultCacheKeys,this}return xh(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(r,n){return this.hasOwnProperty("value")?this.value:this.calculationMethod(r,n)}},{key:"defaultCacheKeys",value:function(r,n){return{params:n,id:r}}},{key:"getCacheKey",value:function(r){if(this.options.cache===!0){var n=this.cacheKeyMethod(this.id,r),i=e.hashFromObject(n);return i}}}],[{key:"hashFromObject",value:function(r){return(0,Ph.default)(r)}}]),e}();Wn.CONSTANT="CONSTANT";Wn.DYNAMIC="DYNAMIC";or.default=Wn;var xr={},Yn={},Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.default=Bh;function Bh(e){(typeof process<"u"&&process.env&&{}.DEBUG&&{}.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}function $h(e){return!!e&&typeof e=="object"}var Pa=$h;Object.defineProperty(Yn,"__esModule",{value:!0});var Mh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Uh=Pt,jh=Da(Uh),Hh=Pa,Vh=Da(Hh);function Da(e){return e&&e.__esModule?e:{default:e}}function Wh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Yh=function(){function e(t){if(Wh(this,e),!t)throw new Error("Condition: constructor options required");var r=e.booleanOperator(t);if(Object.assign(this,t),r){var n=t[r];if(!Array.isArray(n))throw new Error('"'+r+'" must be an array');this.operator=r,this.priority=parseInt(t.priority,10)||1,this[r]=n.map(function(i){return new e(i)})}else{if(!t.hasOwnProperty("fact"))throw new Error('Condition: constructor "fact" property required');if(!t.hasOwnProperty("operator"))throw new Error('Condition: constructor "operator" property required');if(!t.hasOwnProperty("value"))throw new Error('Condition: constructor "value" property required');t.hasOwnProperty("priority")&&(t.priority=parseInt(t.priority,10))}}return Mh(e,[{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={};this.priority&&(n.priority=this.priority);var i=e.booleanOperator(this);return i?n[i]=this[i].map(function(o){return o.toJSON(r)}):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,this.factResult!==void 0&&(n.factResult=this.factResult),this.result!==void 0&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),r?JSON.stringify(n):n}},{key:"_getValue",value:function(r){var n=this.value;return(0,Vh.default)(n)&&n.hasOwnProperty("fact")?r.factValue(n.fact,n.params,n.path):Promise.resolve(n)}},{key:"evaluate",value:function(r,n){var i=this;if(!r)return Promise.reject(new Error("almanac required"));if(!n)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var o=n.get(this.operator);return o?this._getValue(r).then(function(a){return r.factValue(i.fact,i.params,i.path).then(function(l){var f=o.evaluate(l,a);return(0,jh.default)("condition::evaluate <"+l+" "+i.operator+" "+a+"?> ("+f+")"),{result:f,leftHandSideValue:l,rightHandSideValue:a,operator:i.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return e.booleanOperator(this)!==void 0}}],[{key:"booleanOperator",value:function(r){if(r.hasOwnProperty("any"))return"any";if(r.hasOwnProperty("all"))return"all"}}]),e}();Yn.default=Yh;var qn={},La={exports:{}};(function(e){var t=function(){function r(y,E){return E!=null&&y instanceof E}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(y,E,R,g,b){typeof E=="object"&&(R=E.depth,g=E.prototype,b=E.includeNonEnumerable,E=E.circular);var O=[],S=[],A=typeof Buffer<"u";typeof E>"u"&&(E=!0),typeof R>"u"&&(R=1/0);function N(T,I){if(T===null)return null;if(I===0)return T;var L,K;if(typeof T!="object")return T;if(r(T,n))L=new n;else if(r(T,i))L=new i;else if(r(T,o))L=new o(function(le,de){T.then(function(ot){le(N(ot,I-1))},function(ot){de(N(ot,I-1))})});else if(a.__isArray(T))L=[];else if(a.__isRegExp(T))L=new RegExp(T.source,m(T)),T.lastIndex&&(L.lastIndex=T.lastIndex);else if(a.__isDate(T))L=new Date(T.getTime());else{if(A&&Buffer.isBuffer(T))return Buffer.allocUnsafe?L=Buffer.allocUnsafe(T.length):L=new Buffer(T.length),T.copy(L),L;r(T,Error)?L=Object.create(T):typeof g>"u"?(K=Object.getPrototypeOf(T),L=Object.create(K)):(L=Object.create(g),K=g)}if(E){var Te=O.indexOf(T);if(Te!=-1)return S[Te];O.push(T),S.push(L)}r(T,n)&&T.forEach(function(le,de){var ot=N(de,I-1),Lt=N(le,I-1);L.set(ot,Lt)}),r(T,i)&&T.forEach(function(le){var de=N(le,I-1);L.add(de)});for(var ne in T){var nt;K&&(nt=Object.getOwnPropertyDescriptor(K,ne)),!(nt&&nt.set==null)&&(L[ne]=N(T[ne],I-1))}if(Object.getOwnPropertySymbols)for(var it=Object.getOwnPropertySymbols(T),ne=0;ne<it.length;ne++){var He=it[ne],Ne=Object.getOwnPropertyDescriptor(T,He);Ne&&!Ne.enumerable&&!b||(L[He]=N(T[He],I-1),Ne.enumerable||Object.defineProperty(L,He,{enumerable:!1}))}if(b)for(var se=Object.getOwnPropertyNames(T),ne=0;ne<se.length;ne++){var ee=se[ne],Ne=Object.getOwnPropertyDescriptor(T,ee);Ne&&Ne.enumerable||(L[ee]=N(T[ee],I-1),Object.defineProperty(L,ee,{enumerable:!1}))}return L}return N(y,R)}a.clonePrototype=function(E){if(E===null)return null;var R=function(){};return R.prototype=E,new R};function l(y){return Object.prototype.toString.call(y)}a.__objToStr=l;function f(y){return typeof y=="object"&&l(y)==="[object Date]"}a.__isDate=f;function v(y){return typeof y=="object"&&l(y)==="[object Array]"}a.__isArray=v;function p(y){return typeof y=="object"&&l(y)==="[object RegExp]"}a.__isRegExp=p;function m(y){var E="";return y.global&&(E+="g"),y.ignoreCase&&(E+="i"),y.multiline&&(E+="m"),E}return a.__getRegExpFlags=m,a}();e.exports&&(e.exports=t)})(La);var qh=La.exports;Object.defineProperty(qn,"__esModule",{value:!0});var Kh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),zh=qh,dr=Gh(zh);function Gh(e){return e&&e.__esModule?e:{default:e}}function Jh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xh=function(){function e(t,r,n,i){Jh(this,e),this.conditions=(0,dr.default)(t),this.event=(0,dr.default)(r),this.priority=(0,dr.default)(n),this.name=(0,dr.default)(i),this.result=null}return Kh(e,[{key:"setResult",value:function(r){this.result=r}},{key:"toJSON",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return r?JSON.stringify(n):n}}]),e}();qn.default=Xh;Object.defineProperty(xr,"__esModule",{value:!0});var Qh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Zh=Yn,ed=Kn(Zh),td=qn,rd=Kn(td),nd=Or,id=Pt,Qr=Kn(id);function Kn(e){return e&&e.__esModule?e:{default:e}}function od(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ad(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function sd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ud=function(e){sd(t,e);function t(r){od(this,t);var n=ad(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));typeof r=="string"&&(r=JSON.parse(r)),r&&r.conditions&&n.setConditions(r.conditions),r&&r.onSuccess&&n.on("success",r.onSuccess),r&&r.onFailure&&n.on("failure",r.onFailure),r&&(r.name||r.name===0)&&n.setName(r.name);var i=r&&r.priority||1;n.setPriority(i);var o=r&&r.event||{type:"unknown"};return n.setEvent(o),n}return Qh(t,[{key:"setPriority",value:function(n){if(n=parseInt(n,10),n<=0)throw new Error("Priority must be greater than zero");return this.priority=n,this}},{key:"setName",value:function(n){if(!n&&n!==0)throw new Error('Rule "name" must be defined');return this.name=n,this}},{key:"setConditions",value:function(n){if(!n.hasOwnProperty("all")&&!n.hasOwnProperty("any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new ed.default(n),this}},{key:"setEvent",value:function(n){if(!n)throw new Error("Rule: setEvent() requires event object");if(!n.hasOwnProperty("type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:n.type},n.params&&(this.event.params=n.params),this}},{key:"setEngine",value:function(n){return this.engine=n,this}},{key:"toJSON",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return n?JSON.stringify(i):i}},{key:"prioritizeConditions",value:function(n){var i=this,o=n.reduce(function(a,l){var f=l.priority;if(!f){var v=i.engine.getFact(l.fact);f=v&&v.priority||1}return a[f]||(a[f]=[]),a[f].push(l),a},{});return Object.keys(o).sort(function(a,l){return Number(a)>Number(l)?-1:1}).map(function(a){return o[a]})}},{key:"evaluate",value:function(n){var i=this,o=new rd.default(this.conditions,this.event,this.priority,this.name),a=function(E){if(E.isBooleanOperator()){var R=E[E.operator],g=void 0;return E.operator==="all"?g=p(R):g=v(R),g.then(function(b){var O=b===!0;return E.result=O,O})}else return E.evaluate(n,i.engine.operators).then(function(b){var O=b.result;return E.factResult=b.leftHandSideValue,E.result=O,O})},l=function(E,R){return Array.isArray(E)||(E=[E]),Promise.all(E.map(function(g){return a(g)})).then(function(g){return(0,Qr.default)("rule::evaluateConditions results",g),R.call(g,function(b){return b===!0})})},f=function(E,R){if(E.length===0)return Promise.resolve(!0);var g=Array.prototype.some;R==="all"&&(g=Array.prototype.every);for(var b=i.prioritizeConditions(E),O=Promise.resolve(),S=function(T){var I=b[T],L=!1;O=O.then(function(K){return R==="any"&&K===!0||L?((0,Qr.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),L=!0,!0):R==="all"&&K===!1||L?((0,Qr.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),L=!0,!1):l(I,g)})},A=0;A<b.length;A++)S(A);return O},v=function(E){return f(E,"any")},p=function(E){return f(E,"all")},m=function(E){return o.setResult(E),E?i.emit("success",o.event,n,o):i.emit("failure",o.event,n,o),o};return o.conditions.any?v(o.conditions.any).then(function(y){return m(y)}):p(o.conditions.all).then(function(y){return m(y)})}}]),t}(nd.EventEmitter);xr.default=ud;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});var ld=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function cd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var fd=function(){function e(t,r,n){if(cd(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if(typeof r!="function")throw new Error("Missing operator callback");this.cb=r,this.factValueValidator=n,this.factValueValidator||(this.factValueValidator=function(){return!0})}return ld(e,[{key:"evaluate",value:function(r,n){return this.factValueValidator(r)&&this.cb(r,n)}}]),e}();ar.default=fd;var zn={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});function hd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Gn.UndefinedFactError=function(e){pd(t,e);function t(){var r;hd(this,t);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=dd(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(i)));return a.code="UNDEFINED_FACT",a}return t}(Error);var Zr,lo;function md(){return lo||(lo=1,Zr=function(e){var t=this,r;if(arguments.length<2)r=function(){if(this instanceof r){var o=t.apply(this,arguments);return Object(o)===o?o:this}else return t.apply(e,arguments)};else{for(var n=new Array(arguments.length-1),i=1;i<arguments.length;i++)n[i-1]=arguments[i];r=function(){var o=n.length,a=new Array(o+arguments.length),l;for(l=0;l<o;l++)a[l]=n[l];for(l=0;l<arguments.length;l++)a[o+l]=arguments[l];if(this instanceof r){var f=t.apply(this,a);return Object(f)===f?f:this}else return t.apply(e,a)}}return r.prototype=t.prototype,r}),Zr}/*!
 * imports.
 */var vd=Function.prototype.bind||md();/*!
 * exports.
 */var yd=gd;function gd(e,t){var r=function(){return arguments.length===0?r:arguments.length>1?e.apply(t,arguments):vd.call(e,t,arguments[0])};return r.uncurry=function(){return e},r}/*!
 * exports.
 */var _d=bd;/*!
 * regexp patterns.
 */var Sd=/\[([^\[\]]+)\]/g,Ed=/^[.]*|[.]*$/g;function bd(e){return{}.toString.call(e)=="[object String]"?e.replace(Sd,".$1").replace(Ed,""):""}var wd=Object.prototype.toString;function Rd(e){for(var t=-1,r=Ad(Od(e).split(".")),n=r.length,i=[];++t<n;)i.push(Td(r[t]));return i}function Od(e){return(wd.call(e)==="[object String]"?e:"").replace(/\\\./g,"￿")}function Ad(e){for(var t=-1,r=e.length,n=[];++t<r;)e[t]&&n.push(e[t]);return n}function Td(e){return e.replace(/\uffff/g,".")}/*!
 * exports.
 */var Nd=Rd,Fd=yd,co=ms("selectn"),Cd=_d,Id=Nd,xd=Object.prototype.toString,kd=Fd(Pd);function Pd(e,t){co("arguments:",{path:e,object:t});for(var r=-1,n=xd.call(e)==="[object Array]"?e:Id(Cd(e)),i=n.length,o=i?t:void 0;++r<i;){if(Object(o)!==o)return;o=o[n[r]]}return co("ref:",o),typeof o=="function"?o():o}Object.defineProperty(zn,"__esModule",{value:!0});var fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ld=or,en=kr(Ld),Bd=Gn,$d=Pt,Wt=kr($d),Md=kd,Ud=kr(Md),jd=Pa,Hd=kr(jd);function kr(e){return e&&e.__esModule?e:{default:e}}function Vd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Wd=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Vd(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=!!n.allowUndefinedFacts;for(var i in r){var o=void 0;r[i]instanceof en.default?o=r[i]:o=new en.default(i,r[i]),this._addConstantFact(o),(0,Wt.default)("almanac::constructor initialized runtime fact:"+o.id+" with "+o.value+"<"+fo(o.value)+">")}}return Dd(e,[{key:"_getFact",value:function(r){return this.factMap.get(r)}},{key:"_addConstantFact",value:function(r){this.factMap.set(r.id,r),this._setFactValue(r,{},r.value)}},{key:"_setFactValue",value:function(r,n,i){var o=r.getCacheKey(n),a=Promise.resolve(i);return o&&this.factResultsCache.set(o,a),a}},{key:"addRuntimeFact",value:function(r,n){var i=new en.default(r,n);return this._addConstantFact(i)}},{key:"factValue",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=void 0,a=this._getFact(r);if(a===void 0)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new Bd.UndefinedFactError("Undefined fact: "+r));if(a.isConstant())o=Promise.resolve(a.calculate(n,this));else{var l=a.getCacheKey(n),f=l&&this.factResultsCache.get(l);f?(o=Promise.resolve(f),(0,Wt.default)("almanac::factValue cache hit for fact:"+r)):((0,Wt.default)("almanac::factValue cache miss for fact:"+r+"; calculating"),o=this._setFactValue(a,n,a.calculate(n,this)))}return i?o.then(function(v){if((0,Hd.default)(v)){var p=(0,Ud.default)(i)(v);return(0,Wt.default)("condition::evaluate extracting object property "+i+", received: "+p),p}else return(0,Wt.default)("condition::evaluate could not compute object path("+i+") of non-object: "+v+" <"+(typeof v>"u"?"undefined":fo(v))+">; continuing with "+v),v}):o}}]),e}();zn.default=Wd;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var Yd=function(){var t=[];return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r.event&&t.push(r.event),t}};Jn.SuccessEventFact=Yd;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});var qd=ar,Be=Kd(qd);function Kd(e){return e&&e.__esModule?e:{default:e}}var Ae=[];Ae.push(new Be.default("equal",function(e,t){return e===t}));Ae.push(new Be.default("notEqual",function(e,t){return e!==t}));Ae.push(new Be.default("in",function(e,t){return t.indexOf(e)>-1}));Ae.push(new Be.default("notIn",function(e,t){return t.indexOf(e)===-1}));Ae.push(new Be.default("contains",function(e,t){return e.indexOf(t)>-1},Array.isArray));Ae.push(new Be.default("doesNotContain",function(e,t){return e.indexOf(t)===-1},Array.isArray));function Pr(e){return Number.parseFloat(e).toString()!=="NaN"}Ae.push(new Be.default("lessThan",function(e,t){return e<t},Pr));Ae.push(new Be.default("lessThanInclusive",function(e,t){return e<=t},Pr));Ae.push(new Be.default("greaterThan",function(e,t){return e>t},Pr));Ae.push(new Be.default("greaterThanInclusive",function(e,t){return e>=t},Pr));Xn.default=Ae;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.FINISHED=Ue.RUNNING=Ue.READY=void 0;var zd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Gd=or,pr=Dt(Gd),Jd=xr,tn=Dt(Jd),Xd=ar,rn=Dt(Xd),Qd=zn,Zd=Dt(Qd),ep=Or,tp=Jn,rp=Xn,np=Dt(rp),ip=Pt,dt=Dt(ip);function Dt(e){return e&&e.__esModule?e:{default:e}}function op(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ap(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function sp(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var up=Ue.READY="READY",ho=Ue.RUNNING="RUNNING",po=Ue.FINISHED="FINISHED",lp=function(e){sp(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};op(this,t);var i=ap(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.rules=[],i.allowUndefinedFacts=n.allowUndefinedFacts||!1,i.operators=new Map,i.facts=new Map,i.status=up,r.map(function(o){return i.addRule(o)}),np.default.map(function(o){return i.addOperator(o)}),i}return zd(t,[{key:"addRule",value:function(n){if(!n)throw new Error("Engine: addRule() requires options");if(!n.hasOwnProperty("conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!n.hasOwnProperty("event"))throw new Error('Engine: addRule() argument requires "event" property');var i=void 0;return n instanceof tn.default?i=n:i=new tn.default(n),i.setEngine(this),this.rules.push(i),this.prioritizedRules=null,this}},{key:"removeRule",value:function(n){if(!(n instanceof tn.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var i=this.rules.indexOf(n);return i===-1?!1:(this.prioritizedRules=null,!!this.rules.splice(i,1).length)}},{key:"addOperator",value:function(n,i){var o=void 0;n instanceof rn.default?o=n:o=new rn.default(n,i),(0,dt.default)("engine::addOperator name:"+o.name),this.operators.set(o.name,o)}},{key:"removeOperator",value:function(n){var i=void 0;return n instanceof rn.default?i=n.name:i=n,this.operators.delete(i)}},{key:"addFact",value:function(n,i,o){var a=n,l=void 0;return n instanceof pr.default?(a=n.id,l=n):l=new pr.default(n,i,o),(0,dt.default)("engine::addFact id:"+a),this.facts.set(a,l),this}},{key:"removeFact",value:function(n){var i=void 0;return n instanceof pr.default?i=n.id:i=n,this.facts.delete(i)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var n=this.rules.reduce(function(i,o){var a=o.priority;return i[a]||(i[a]=[]),i[a].push(o),i},{});this.prioritizedRules=Object.keys(n).sort(function(i,o){return Number(i)>Number(o)?-1:1}).map(function(i){return n[i]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=po,this}},{key:"getFact",value:function(n){return this.facts.get(n)}},{key:"evaluateRules",value:function(n,i){var o=this;return Promise.all(n.map(function(a){if(o.status!==ho){(0,dt.default)("engine::run status:"+o.status+"; skipping remaining rules");return}return a.evaluate(i).then(function(l){(0,dt.default)("engine::run ruleResult:"+l.result),l.result?(o.emit("success",a.event,i,l),o.emit(a.event.type,a.event.params,i,l),i.factValue("success-events",{event:a.event})):o.emit("failure",a.event,i,l)})}))}},{key:"run",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,dt.default)("engine::run started"),(0,dt.default)("engine::run runtimeFacts:",i),i["success-events"]=new pr.default("success-events",(0,tp.SuccessEventFact)(),{cache:!1}),this.status=ho;var o=new Zd.default(this.facts,i,{allowUndefinedFacts:this.allowUndefinedFacts}),a=this.prioritizeRules(),l=Promise.resolve();return new Promise(function(f,v){a.map(function(p){return l=l.then(function(){return n.evaluateRules(p,o)}).catch(v),l}),l.then(function(){return n.status=po,(0,dt.default)("engine::run completed"),o.factValue("success-events")}).then(function(p){f({events:p,almanac:o})}).catch(v)})}}]),t}(ep.EventEmitter);Ue.default=lp;Object.defineProperty(be,"__esModule",{value:!0});be.Engine=be.Operator=be.Rule=be.Fact=void 0;be.default=function(e,t){return new Ba.default(e,t)};var cp=Ue,Ba=Dr(cp),fp=or,hp=Dr(fp),dp=xr,pp=Dr(dp),mp=ar,vp=Dr(mp);function Dr(e){return e&&e.__esModule?e:{default:e}}be.Fact=hp.default;be.Rule=pp.default;be.Operator=vp.default;be.Engine=Ba.default;var mo=be;function _n(e){let t=C(G,{});return e.isSubmitted?t=C("div",{children:"Your information has been submitted"}):e.bodyText&&(t=C("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),W("div",{className:`submission-header${e.isSubmitted?" submitted":""}`,children:[C("h2",{children:e.title}),t,C("hr",{})]})}try{_n.displayName="Header",_n.__docgenInfo={description:"",displayName:"Header",props:{isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}},bodyText:{defaultValue:null,description:"",name:"bodyText",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}}}catch{}function Sn(e){const t=e.stepList.filter(o=>o.child!==!0),r=(o,a,l,f)=>{let v="circle";return l||f?{iconDef:v}:(a?v="block":o===Se.COMPLETED?v="checkCircle":o===Se.ERROR&&(v="errorOutlined"),{iconDef:v})},n=(o,a=!1)=>{let l="item";return o&&(l=`${l} pointed `),a&&(l=`${l} static`),l},i=(o,a,l=!1)=>{if(!o||o.child&&!l)return C(G,{});const f=(m,y,E)=>!m.inProgress&&(!y||m.final)?C("button",{className:"btn btn-link",onClick:()=>E(m),children:m.title}):C("span",{children:m.title}),v=r(o.state,o.excluded,o.static,o.final),p=n(o.inProgress,o.static);return W("div",{className:p,children:[C(yr,{icon:v.iconDef}),f(o,a,e.onStepChange)]})};return C("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"},children:C("ul",{children:t.map((o,a)=>W("li",{className:"item-wrap",children:[i(o,!!e.isWizardMode),o.children&&o.children.length>0&&C("div",{className:"subMenu",children:C("ul",{children:o.children&&o.children.map((l,f)=>{const v=e.stepList.find(p=>p.id===l);return typeof v>"u"?C(G,{}):C("li",{className:"item-wrap",children:i(v,!!e.isWizardMode,!0)},`${f}-${l}`)})})})]},`${a}-${o.id}`))})})}try{Sn.displayName="StepsSideNav",Sn.__docgenInfo={description:"",displayName:"StepsSideNav",props:{stepList:{defaultValue:null,description:"",name:"stepList",required:!0,type:{name:"Step[]"}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:"(step: Step) => void"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}}}}}catch{}function En(e){const r=(o=>o.isWizardMode?o.previousStepIds&&o.previousStepIds.length>0:o.steps.findIndex(a=>a.id===o.currentStep.id)>0)(e)?C("button",{type:"button",onClick:o=>e.onNavAction(te.PREVIOUS),className:"btn btn-link nav-link prev",children:C(yr,{icon:"chevronLeft"})}):C(G,{}),n=e.currentStep.final?C(G,{}):C("button",{type:"button",onClick:o=>e.onNavAction(te.NEXT),className:"btn btn-link nav-link next",children:C(yr,{icon:"chevronRight"})}),i=C("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:o=>e.onNavAction(te.SAVE),children:"SAVE"});return W("div",{children:[C("hr",{}),W("div",{className:"buttonWrapper pull-right",children:[r," ",n," ",i]})]})}function bn(e){const t=e.steps.find(r=>r.id===e.nextStepId);return typeof t>"u"?C(G,{}):W("span",{className:"nav-link",children:[C("a",{onClick:r=>e.onNavAction(t),children:t.title}),C(yr,{icon:"chevronRight"})]})}try{En.displayName="NavButtons",En.__docgenInfo={description:"",displayName:"NavButtons",props:{isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},previousStepIds:{defaultValue:null,description:"",name:"previousStepIds",required:!0,type:{name:"string[]"}},onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"(action: NavActionEnum) => void"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},currentStep:{defaultValue:null,description:"",name:"currentStep",required:!0,type:{name:"Step"}},isFormSubmitted:{defaultValue:null,description:"",name:"isFormSubmitted",required:!1,type:{name:"boolean"}}}}}catch{}try{bn.displayName="NextStepLink",bn.__docgenInfo={description:"",displayName:"NextStepLink",props:{onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"(step: Step) => void"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},nextStepId:{defaultValue:null,description:"",name:"nextStepId",required:!0,type:{name:"string | undefined"}}}}}catch{}function wn(e){const t=W("div",{children:[C("h6",{children:"Data"}),C("pre",{children:JSON.stringify(e.formData,null,2)})]});return C(G,{children:!e.hidden&&t})}try{wn.displayName="DataDebug",wn.__docgenInfo={description:"",displayName:"DataDebug",props:{formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!0,type:{name:"boolean"}}}}}catch{}function yp(e,t,r){const n=/\[\d+\]\./g,i=/\.(\d)+/g;e=e.replace(i,"[$1]");const a=`${e.split(".").join(".properties.")}.title`,l=`${e}.ui:title`,f=a.replace(n,".items."),v=l.replace(n,".items."),p=a.match(n);let m=As(p);m&&(m=m.substring(1,m.length-2),m=isNaN(parseInt(m))?"":`${parseInt(m)+1}`);const y=Tt(r,l)||Tt(t.properties,a)||Tt(r,v)||Tt(t.properties,f)||`${f}`;return`${m?"["+m+"] ":""}${y}`}function gp(e,t,r,n){function i(f,v,p){const m=".";return Object.keys(f).forEach(y=>{if(f[y]===null)v[p+y]="";else if(Si(f[y])&&!Ei(f[y]))for(const E in f[y])if(Si(f[y][E])||bi(f[y])&&!Ei(f[y][E]))i(f[y][E],v,`${p}${y}[${E}]${m}`);else{let R=v[`${p}${y}`];R=R?`${R}, `:"",v[`${p}${y}`]=R+f[y][E]}else bi(f[y])&&!Ts(f[y])?i(f[y],v,`${p}${y}${m}`):v[p+y]=f[y]}),v}const o=i(Eo(e),{},"");return console.log(o),Rs(o).map(f=>{let v=o[f];o[f]===!1&&(v="false"),o[f]===!0&&(v="true");const p=f.indexOf(".");return{screen:Os(t,{id:f.substring(0,p)}),label:yp(f,r,n),value:v}}).filter(f=>f.label.indexOf(".properties.included.title")===-1).filter(f=>f.screen&&typeof f.value<"u").map(f=>({label:f.label,value:f.value,screen:f.screen})).sort((f,v)=>f.screen.order-v.screen.order)}function Rn(e){let t=[];t=gp(Eo(e.formData),e.steps,e.schema,e.uiSchema);let r="";const n=W(G,{children:[C("table",{className:"table summary-table-header",children:C("thead",{children:W("tr",{children:[C("th",{children:"Step"}),C("th",{children:"Label"}),C("th",{children:"Value"})]})})}),C("div",{className:"scroll-area table-body",children:C("table",{className:"table summary-table",children:C("tbody",{children:t.map((i,o)=>W("tr",{children:[C("td",{children:r!==i.screen.id&&(r=i.screen.id)&&C("span",{children:i.screen.title})}),C("td",{children:i.label}),C("td",{children:i.value})]},`${o}-${i.screen.id}-${i.label}`))})})})]});return W(G,{children:[C("p",{className:"step-exclude-directions",children:'Below is all of the data you have entered. Before submitting, click "Validate" to ensure that all of the required data has been entered.'}),C("button",{className:"nav-link pull-right",onClick:()=>window.print(),children:"Print this data"}),C("div",{className:"panel panel-default padding-full wrap",children:C("div",{className:"summary scroll-area",children:n})})]})}try{Rn.displayName="SummaryTable",Rn.__docgenInfo={description:"",displayName:"SummaryTable",props:{isWizard:{defaultValue:null,description:"",name:"isWizard",required:!1,type:{name:"boolean"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},callbackFn:{defaultValue:null,description:"",name:"callbackFn",required:!1,type:{name:"((screenId: string) => void)"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}}}}}catch{}function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},On.apply(this,arguments)}var _p=re.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},re.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),Sp=re.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},re.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function vo(e){if(e.length===7)return e;for(var t="#",r=1;r<4;r+=1)t+=e[r]+e[r];return t}function yo(e,t,r,n,i){return function(o,a,l,f,v){var p=(o-l)/(a-l);if(p===0)return f;if(p===1)return v;for(var m="#",y=1;y<6;y+=2){var E=parseInt(f.substr(y,2),16),R=parseInt(v.substr(y,2),16),g=Math.round((1-p)*E+p*R).toString(16);g.length===1&&(g="0"+g),m+=g}return m}(e,t,r,vo(n),vo(i))}var $a=function(e){function t(r){e.call(this,r);var n=r.height,i=r.width,o=r.checked;this.t=r.handleDiameter||n-2,this.i=Math.max(i-n,i-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={h:o?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.m=this.m.bind(this),this.M=this.M.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentDidMount=function(){this.W=!0},t.prototype.componentDidUpdate=function(r){r.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},t.prototype.componentWillUnmount=function(){this.W=!1},t.prototype.I=function(r){this.H.focus(),this.setState({R:r,j:!0,B:Date.now()})},t.prototype.L=function(r){var n=this.state,i=n.R,o=n.h,a=(this.props.checked?this.i:this.o)+r-i;n.N||r===i||this.setState({N:!0});var l=Math.min(this.i,Math.max(this.o,a));l!==o&&this.setState({h:l})},t.prototype.U=function(r){var n=this.state,i=n.h,o=n.N,a=n.B,l=this.props.checked,f=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var v=Date.now()-a;(!o||v<250||l&&i<=f||!l&&i>=f)&&this.A(r),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},t.prototype.p=function(r){r.preventDefault(),typeof r.button=="number"&&r.button!==0||(this.I(r.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.g))},t.prototype.v=function(r){r.preventDefault(),this.L(r.clientX)},t.prototype.g=function(r){this.U(r),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.g)},t.prototype.k=function(r){this.X=null,this.I(r.touches[0].clientX)},t.prototype.m=function(r){this.L(r.touches[0].clientX)},t.prototype.M=function(r){r.preventDefault(),this.U(r)},t.prototype.$=function(r){Date.now()-this.l>50&&(this.A(r),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},t.prototype.C=function(){this.u=Date.now()},t.prototype.D=function(){this.setState({j:!0})},t.prototype.O=function(){this.setState({j:!1})},t.prototype.S=function(r){this.H=r},t.prototype.T=function(r){r.preventDefault(),this.H.focus(),this.A(r),this.W&&this.setState({j:!1})},t.prototype.A=function(r){var n=this.props;(0,n.onChange)(!n.checked,r,n.id)},t.prototype.render=function(){var r=this.props,n=r.checked,i=r.disabled,o=r.className,a=r.offColor,l=r.onColor,f=r.offHandleColor,v=r.onHandleColor,p=r.checkedIcon,m=r.uncheckedIcon,y=r.checkedHandleIcon,E=r.uncheckedHandleIcon,R=r.boxShadow,g=r.activeBoxShadow,b=r.height,O=r.width,S=r.borderRadius,A=function(se,ee){var le={};for(var de in se)Object.prototype.hasOwnProperty.call(se,de)&&ee.indexOf(de)===-1&&(le[de]=se[de]);return le}(r,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),N=this.state,T=N.h,I=N.N,L=N.j,K={position:"relative",display:"inline-block",textAlign:"left",opacity:i?.5:1,direction:"ltr",borderRadius:b/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},Te={height:b,width:O,margin:Math.max(0,(this.t-b)/2),position:"relative",background:yo(T,this.i,this.o,a,l),borderRadius:typeof S=="number"?S:b/2,cursor:i?"default":"pointer",WebkitTransition:I?null:"background 0.25s",MozTransition:I?null:"background 0.25s",transition:I?null:"background 0.25s"},ne={height:b,width:Math.min(1.5*b,O-(this.t+b)/2+1),position:"relative",opacity:(T-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:I?null:"opacity 0.25s",MozTransition:I?null:"opacity 0.25s",transition:I?null:"opacity 0.25s"},nt={height:b,width:Math.min(1.5*b,O-(this.t+b)/2+1),position:"absolute",opacity:1-(T-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:I?null:"opacity 0.25s",MozTransition:I?null:"opacity 0.25s",transition:I?null:"opacity 0.25s"},it={height:this.t,width:this.t,background:yo(T,this.i,this.o,f,v),display:"inline-block",cursor:i?"default":"pointer",borderRadius:typeof S=="number"?S-1:"50%",position:"absolute",transform:"translateX("+T+"px)",top:Math.max(0,(b-this.t)/2),outline:0,boxShadow:L?g:R,border:0,WebkitTransition:I?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:I?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:I?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},He={height:this.t,width:this.t,opacity:Math.max(2*(1-(T-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:I?null:"opacity 0.25s",MozTransition:I?null:"opacity 0.25s",transition:I?null:"opacity 0.25s"},Ne={height:this.t,width:this.t,opacity:Math.max(2*((T-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:I?null:"opacity 0.25s",MozTransition:I?null:"opacity 0.25s",transition:I?null:"opacity 0.25s"};return re.createElement("div",{className:o,style:K},re.createElement("div",{className:"react-switch-bg",style:Te,onClick:i?null:this.T,onMouseDown:function(se){return se.preventDefault()}},p&&re.createElement("div",{style:ne},p),m&&re.createElement("div",{style:nt},m)),re.createElement("div",{className:"react-switch-handle",style:it,onClick:function(se){return se.preventDefault()},onMouseDown:i?null:this.p,onTouchStart:i?null:this.k,onTouchMove:i?null:this.m,onTouchEnd:i?null:this.M,onTouchCancel:i?null:this.O},E&&re.createElement("div",{style:He},E),y&&re.createElement("div",{style:Ne},y)),re.createElement("input",On({},{type:"checkbox",role:"switch","aria-checked":n,checked:n,disabled:i,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},A,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},t}(gs.Component);$a.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:_p,checkedIcon:Sp,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56};class An extends re.Component{constructor(r){super(r);$(this,"excludeWarningText",W("div",{children:[C("p",{children:"This action will clear any entered data on this page and remove this form from your submission. You can include it again at anytime. Only this page will be affected."}),C("p",{children:"Are you sure you want to skip this step and clear any entered data?"})]}));$(this,"excludeWarningHeader","Skip This Step?");$(this,"unsavedDataWarning","You might have some unsaved data. Are you sure you want to leave?");$(this,"formRef");$(this,"submitButtonRef");$(this,"formDivRef");$(this,"navAction",te.NONE);$(this,"uiSchema");$(this,"nextStep");$(this,"extraErrors",[]);$(this,"isNewForm",r=>Object.keys(r).length==1&&Object.keys(r)[0]==="metadata"||Object.keys(r).length==0);$(this,"getFirstStep",(r,n)=>this.isNewForm(n)?r[0]:r.find(i=>i.final===!0)||r[0]);$(this,"onUnload",r=>this.state.hasUnsavedChanges?(r.preventDefault(),r.returnValue=this.unsavedDataWarning):void 0);$(this,"setupBeforeUnloadListener",()=>{window.addEventListener("beforeunload",this.onUnload)});$(this,"_setIncludedPropInFormDataNonWizard",(r,n)=>{const i={},o=r.formData;return Object.keys(n).forEach(a=>{H.get(n[a],"properties.included")&&H.set(i,`${a}.included`,!0)}),{...o,...i}});$(this,"_setIncludedPropInFormDataWizard",r=>{const n=r.currentStep.id,i=H.cloneDeep(r.formData);return H.set(i,`${n}.included`,!0),i});$(this,"getSchema",({id:r,final:n})=>n?this.props.schema:H.pick(this.props.schema,["title","type",`properties.${r}`]));$(this,"getNextStepId",async(r,n,i)=>{if(i)return i;if(!r.rules||r.rules.length===0)return r.default;const o=new mo.Engine(r.rules);try{const a=await o.run(n);return a.events.length>0?a.events[0].params.next:r.default}catch{return r.default}});$(this,"moveStep",async(r,n,i,o=[...this.state.previousStepIds])=>{var m;const a=this.state.currentStep;let l;(m=this.formRef)!=null&&m.current&&this.formRef.current.setState({errorSchema:{}});const f=this.props.isWizardMode&&!n;f&&o.push(a.id),i?l=Se.ERROR:(l=Se.COMPLETED,!f&&this.props.isWizardMode&&(l=Se.TODO)),n=await this.getNextStepId(a,r,n);const v=this.state.steps.map(y=>y.id===a.id?{...y,state:l,inProgress:!1}:y.id===n?{...y,inProgress:!0}:y);f&&H.set(r,`${n}.included`,!0);const p=this.state.steps.find(y=>y.id===n);this.props.isWizardMode&&p.final&&Object.keys(r).forEach(y=>{r[y].included===void 0&&(r[y]={})}),this.saveStepState(o,v,p,r)});$(this,"saveStepState",(r,n,i,o)=>{this.setState({previousStepIds:r,steps:n,currentStep:i,formData:o,hasValidated:!1,doShowErrors:!1})});$(this,"goPrevious",async(r,n)=>{let i;const o=[...this.state.previousStepIds];if(this.props.isWizardMode)i=o.pop(),this.isSubmitScreen()||H.set(r,`${this.state.currentStep.id}.included`,void 0);else{const a=H.findIndex(this.state.steps,{id:this.state.currentStep.id});a>0&&(i=this.state.steps[a-1].id)}if(!H.isUndefined(i))return this.moveStep(r,i,n,o)});$(this,"triggerAction",async r=>{if(r===te.SAVE)return this.props.onSave(this.state.formData);this.navAction=r,this.extraErrors=await this.runCustomValidation(this.state.formData,this.state.currentStep,this.state.steps),this.submitButtonRef.current&&this.submitButtonRef.current.click()});$(this,"triggerStepChange",r=>{this.nextStep=r,this.triggerAction(te.GO_TO_STEP)});$(this,"onError",r=>{if(this.setState({doShowErrors:!0,hasValidated:!1}),this.navAction===te.VALIDATE){const n=this.setStepStatusForFailedValidation(r.props,this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep));this.setState({steps:n}),this.formDivRef.current.scrollTo(0,0),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,n[0].id,!0),this.setState({isLoadingSaved:!1}))}});$(this,"setStepStatusForFailedValidation",(r,n,i,o,a)=>{const l=r.map(p=>H.trimStart(p.property,".").split(".")[0]),f=Object.keys(a);return n.map(p=>{if(l.indexOf(p.id)>-1)return{...p,state:Se.ERROR};if(f.indexOf(p.id)>-1){let m=Se.COMPLETED;return i&&!H.get(o[p.id],"included")&&(m=p.state),{...p,state:m}}else return p})});$(this,"onSubmit",()=>{this.performAction(this.navAction,this.state.currentStep.state===Se.ERROR)});$(this,"isSubmitScreen",()=>this.state.currentStep.final===!0&&!this.state.isLoadingSaved);$(this,"showExcludeStateWarningDialog",(r,n=!1)=>{this.setState({modalContext:{action:this.toggleExcludeStep,arguments:[r,!0,n]}})});$(this,"toggleExcludeStep",(r,n)=>{this.setState((i,o)=>{const a=i.steps.map(v=>v.id===r?{...v,excluded:n}:v),l=H.cloneDeep(i.formData),f=H.cloneDeep(i.currentStep);return f.id===r&&(f.excluded=n),n?l[r]={}:H.set(l,`${r}.included`,!0),{steps:a,formData:l,modalContext:void 0,currentStep:f}})});$(this,"renderNotification",r=>r===ie.SAVE_SUCCESS?C("div",{className:"notification-area",children:" Successfully saved "}):r===ie.SUBMIT_SUCCESS?C("div",{className:"notification-area",children:" Successfully submitted "}):r===ie.PROGRESS?C("div",{className:"notification-area",children:" working on it ...."}):C(G,{}));$(this,"renderTextForStaticScreen",()=>{if(!this.state.currentStep.copy)return C(G,{});const r=this.state.currentStep.copy;return C("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:r}})});$(this,"renderOptionalFormSubheader",(r=!1)=>{if(r)return C(G,{});const n=this.state.currentStep;return n.excluded===!0?W("div",{className:"step-exclude-directions",children:["This form is currently not included in the submission.",C("button",{className:"btn btn-link",onClick:()=>this.toggleExcludeStep(n.id,!1),children:"Include"})]}):n.excluded===!1?W("div",{className:"step-exclude-directions",children:['This form is currently included in the submission. Enter some data if you have it, or click "Skip".',C("button",{className:"btn btn-link",onClick:()=>this.showExcludeStateWarningDialog(this.state.currentStep.id),children:"Skip"})]}):C(G,{})});$(this,"renderHelpToggle",(r,n,i)=>r.static||r.final?C(G,{}):C(G,{children:W("label",{className:"pull-right toggle-help-label",children:[C("span",{children:"Hide help"}),C($a,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:()=>i(),checked:n}),C("span",{children:"Show help"})]})}));$(this,"runCustomValidation",async(r,n,i)=>{const o=[];let a=n.validationRules||[],l={[n.id]:r[n.id]};if(n.final&&(a=i.reduce((p,m)=>m.validationRules&&m.validationRules.length>0?p.concat(m.validationRules):p,[]),l=H.cloneDeep(r)),a.length===0)return[];const f=[];a.forEach(p=>{const m=p.event.params.property;if(m.indexOf("[*]")===-1)f.push(p);else{const y=m.split("[*]")[0].substring(1),E=H.get(r,y);if(Array.isArray(E)&&typeof E!="string")for(let R=0;R<E.length;R++){const g=JSON.parse(JSON.stringify(p).replace(/\[\*\]/g,`[${R}]`));f.push(g)}else f.push(p)}});const v=new mo.Engine(f,{allowUndefinedFacts:!0});try{(await v.run(l)).events.forEach(y=>{const E={...y.params,params:{},stack:`${y.params.property} ${y.params.message}`};o.push(E)})}catch(p){console.log(p)}return o});$(this,"transformErrors",r=>{if(this.extraErrors.forEach(i=>{r.find(o=>o.stack===i.stack)||r.push(i)}),this.navAction!==te.SUBMIT&&this.navAction!==te.VALIDATE&&(!this.props.isWizardMode||this.state.currentStep.final)){const i={...this.state.currentStep};return r.length>0?i.state=Se.ERROR:i.state=Se.COMPLETED,this.setState({currentStep:i}),[]}return r.filter(i=>i.name==="required").forEach(i=>{if(i.property){const o=i.property.substring(0,i.property.lastIndexOf("."));H.remove(r,a=>(a.property||"").indexOf(o)>-1&&(a.name==="enum"||a.name==="oneOf"))}}),r.map(i=>(i.message&&(i.message=i.message.replace("property","field")),i))});$(this,"renderErrorListTemplate",r=>{const{errors:n}=r,i=n.map((o,a)=>Ep(this.state.steps,o,this.uiSchema,a,this.props.schema)).sort((o,a)=>o.order-a.order).map(o=>o.element);return C("div",{className:"form-error-summary",children:C("ul",{className:"error-detail",children:i})})});this.uiSchema=Ma(H.cloneDeep(r.uiSchema),"ui:help");const n=r.navSchema.steps.map((o,a)=>({...o,inProgress:a===0})).sort((o,a)=>o.order-a.order);this.formRef=re.createRef(),this.formDivRef=re.createRef(),this.submitButtonRef=re.createRef();const i=this.getFirstStep(n,r.formData);this.state={currentStep:i,steps:n,previousStepIds:[],formData:r.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:r.isSubmitted,isLoadingSaved:!this.isNewForm(this.props.formData)}}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}componentDidUpdate(r){const n=this.props.callbackStatus!==r.callbackStatus,i=this.props.callbackStatus===ie.SAVE_SUCCESS||this.props.callbackStatus===ie.SUBMIT_SUCCESS;n&&i&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===ie.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}componentDidMount(){this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData)?this.setState(n=>({formData:this.props.isWizardMode?this._setIncludedPropInFormDataWizard(n):this._setIncludedPropInFormDataNonWizard(n,this.props.schema)})):this.triggerAction(te.VALIDATE)}handleOnChange({formData:r}){if(!this.isSubmitScreen()&&!this.state.currentStep.excluded){const n=!H.isEqual(this.state.formData,r);this.setState({formData:r,hasUnsavedChanges:n})}}performAction(r,n){const i=this.state.formData;switch(r){case te.NEXT:return this.moveStep(i,void 0,n);case te.PREVIOUS:return this.goPrevious(i,n);case te.GO_TO_STEP:return this.nextStep?this.moveStep(i,this.nextStep.id,n):void 0;case te.SUBMIT:{this.props.onSubmit(i);return}case te.VALIDATE:{const o=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),a={...this.state.currentStep,state:Se.COMPLETED};this.setState({hasValidated:!0,currentStep:a,steps:o}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,o[0].id,!1),this.setState({isLoadingSaved:!1}));return}default:return}}render(){return W("div",{className:"outter-wrap",children:[C(Ss,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),C(_n,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),C("div",{children:W("div",{className:"inner-wrap",children:[C(Sn,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&C("div",{className:"text-center",children:C("span",{className:"spinner"})}),W("div",{className:"form-wrap",children:[C("div",{className:"form-title",children:this.state.currentStep.title}),this.renderNotification(this.props.callbackStatus),W("div",{className:`right-top-actions ${this.state.isSubmitted?"hide":""}`,children:[!this.state.currentStep.static&&C("button",{type:"button",className:"btn btn-action save pull-right",onClick:()=>{this.triggerAction(te.VALIDATE)},children:"VALIDATE"}),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,()=>this.setState({doShowHelp:!this.state.doShowHelp})),this.isSubmitScreen()&&C("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:()=>{this.triggerAction(te.SUBMIT)},children:"SUBMIT"})]}),this.renderOptionalFormSubheader(this.props.isWizardMode),W("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap",children:[this.state.hasValidated&&C("div",{className:"notification-area",children:"Great! All required data on this form has been entered."}),W("div",{ref:this.formDivRef,className:`scroll-area ${this.state.currentStep.excluded?"disabled":" "} `,children:[C(bs,{validator:ws,noHtml5Validate:!0,className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:r=>this.handleOnChange(r),onError:r=>this.onError({props:r,form:this.formRef}),showErrorList:this.state.doShowErrors||this.props.isWizardMode?"top":!1,templates:{ErrorListTemplate:this.renderErrorListTemplate},transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted,children:C("div",{style:{display:"none"},children:C("button",{type:"submit",ref:this.submitButtonRef})})}),this.renderTextForStaticScreen(),!this.props.isWizardMode&&C(bn,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:r=>this.triggerStepChange(r)})]})]}),this.isSubmitScreen()&&C(Rn,{formData:this.state.formData,steps:this.state.steps,callbackFn:r=>this.showExcludeStateWarningDialog(r,!0),uiSchema:this.props.uiSchema,schema:this.props.schema}),C(En,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:r=>{this.triggerAction(r)}})]})]})}),this.state.modalContext&&C(Fs,{open:!0,title:this.excludeWarningHeader,content:this.excludeWarningText,className:`theme-${this.props.formClass}`,onConfirmCallbackArgs:this.state.modalContext.arguments,onCancel:()=>this.setState({modalContext:void 0}),onConfirm:(r,n)=>this.toggleExcludeStep(r,n)}),C(wn,{formData:this.state.formData,hidden:!0})]})}}function Ep(e,t,r,n,i){const o=H.trimStart(t.property,"."),a=o.split("."),l=`${a.join(".properties.")}.title`,f=`${o}.ui:title`,v=l.replace(/\[.*?\]/,".items"),p=f.replace(/\[.*?\]/,".items"),m=l.match(/\[.*?\]/);let y=H.first(m);y&&(y=y.substring(1,y.length-1),y=isNaN(parseInt(y))?"":` [${parseInt(y)+1}]`);const E=H.get(r,f)||H.get(i.properties,l)||H.get(r,p)||H.get(i.properties,v)||t.property,R=H.find(e,{id:a[0]})||{title:a[0],order:0},g=C("li",{className:"",children:W("span",{children:[W("strong",{children:[R.title,y,":"]}),E,"  ",t.message]})},n);return{order:R.order,element:g}}function Ma(e,t){return H.keys(e).some(r=>{if(r===t){const n=e[r];return e[r]=C("span",{dangerouslySetInnerHTML:{__html:n}}),e}e[r]&&typeof e[r]=="object"&&Ma(e[r],t)}),e}try{An.displayName="SynapseForm",An.__docgenInfo={description:"",displayName:"SynapseForm",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}},navSchema:{defaultValue:null,description:"",name:"navSchema",required:!0,type:{name:"{ steps: any[]; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"IFormData"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(formData: IFormData) => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(formData: IFormData) => void"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},callbackStatus:{defaultValue:null,description:"",name:"callbackStatus",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}}}}}catch{}async function nn(e,t,r,n){try{const i=await Ye.getEntity(e,t,r),o=await Ye.getFileResult(i,e,!0,!0),a=await Ye.getFileHandleContent(o.fileHandle,o.preSignedURL),l=JSON.parse(a);return{version:i.versionNumber,content:l}}catch(i){const o={message:`${i.message}:  configuration data for ${t} failed to load`};return n&&n(o),Promise.reject(o)}}class go extends re.Component{constructor(r){var n,i;super(r);$(this,"getFileEntityDataDereferenced",async(r,n,i)=>{const{version:o,content:a}=await nn(r,n,i,this.onError),l=await rh.dereference(a);return{version:o,content:l}});$(this,"getData",async r=>{if(r)try{let n={},i,o,a,l,f;const{searchParams:v}=this.props;if(v&&({dataFileHandleId:i,submitted:o}=v),i){const y=await Ye.getFileHandleContentFromID(i,r);n=JSON.parse(y),o&&n&&n.metadata&&({formSchemaVersion:a,uiSchemaVersion:l,navSchemaVersion:f}=n.metadata)}const p=[this.getFileEntityDataDereferenced(r,this.props.formSchemaEntityId,a),nn(r,this.props.formUiSchemaEntityId,l,this.onError),nn(r,this.props.formNavSchemaEntityId,f,this.onError)],m=await Promise.all(p);i||(n={metadata:{formSchemaVersion:m[0].version,uiSchemaVersion:m[1].version,navSchemaVersion:m[2].version}}),this.setState({formData:n,formSchema:m[0].content,formUiSchema:m[1].content,formNavSchema:m[2].content,isLoading:!1})}catch(n){this.onError({message:n})}finally{this.setState({isLoading:!1})}});$(this,"finishedProcessing",(r,n)=>{this.setState({isLoading:!1,notification:{type:r,message:n},status:r}),setTimeout(()=>{this.setState({status:void 0})},7e3)});$(this,"onError",r=>{this.setState({notification:{type:ie.ERROR,message:r.message,name:r.name},status:ie.ERROR,isLoading:!1})});$(this,"submitForm",async r=>{await this.saveToFile(r),this.setState({isLoading:!0}),await Ye.submitFormData(this.state.formDataId,this.props.token),this.finishedProcessing(ie.SUBMIT_SUCCESS,"File Submitted")});$(this,"createOrUpdateFormDataFile",async(r,n)=>{r=`${r}.json`;const i=await Ye.uploadFile(this.props.token,r,n),{searchParams:o}=this.props,a=o&&o.formGroupId;if(!a)throw console.error("formGroupId must be defined"),"formGroupId must be defined";try{const l=i.fileHandleId;let f;return this.state.formDataId?f=await Ye.updateFormData(this.state.formDataId,r,l,this.props.token):f=await Ye.createFormData(a,r,l,this.props.token),f}catch(l){throw this.onError(l),l}});$(this,"saveToFile",async r=>{const n=Tt(r,this.props.fileNamePath);if(this.setState({status:ie.PROGRESS,notification:{type:ie.PROGRESS,message:"Progress"},isLoading:!0}),!n){let i="File Name";try{const o=`${this.props.fileNamePath.replace(".",".properties.")}.title`;i=Tt(this.state.formSchema.properties,o,i)}finally{const o=`Please Provide the ${i} before saving`;this.onError({message:o})}return}try{const i=new Blob([JSON.stringify(r)],{type:"text/json"}),o=await this.createOrUpdateFormDataFile(n,i);this.setState({formDataId:o.formDataId}),this.finishedProcessing(ie.SAVE_SUCCESS,"File Saved")}catch(i){this.onError({message:i})}});$(this,"isReadyToDisplayForm",r=>this.state.status!==ie.ERROR_CRITICAL&&r.formSchema&&r.formUiSchema&&r.formNavSchema&&r.formData);$(this,"renderLoader",(r,n)=>Ns([ie.ERROR,ie.ERROR_CRITICAL],r.status)&&n.token&&r.isLoading?C("div",{className:"text-center",children:C("span",{className:"spinner"})}):C(G,{}));$(this,"renderNotification",r=>r?r.type===ie.ERROR?C(_s,{variant:"danger",title:"Error",isGlobal:!1,description:W(G,{children:[r.name," ",r.message]}),onClose:()=>this.setState({status:void 0})}):C(G,{}):C(G,{}));$(this,"renderUnauthenticatedView",r=>r?C(G,{}):W("div",{className:"panel padding-full unauthenticated text-center",children:["Please",C(Cs,{variant:"text",color:"primary",sx:{mx:1,fontSize:"1.4rem",verticalAlign:"baseline",textTransform:"none"},className:`${Es}`,children:"sign in"}),"to initiate or continue your submission"]}));this.state={isLoading:!0,formDataId:(i=(n=this.props)==null?void 0:n.searchParams)==null?void 0:i.formDataId}}async componentDidMount(){await this.getData(this.props.token)}async componentDidUpdate(r){this.props.token!==r.token&&await this.getData(this.props.token)}render(){return C("div",{className:`theme-${this.props.formClass}`,children:W("div",{className:"SRC-ReactJsonForm",children:[this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&C("div",{children:C(An,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:r=>{this.saveToFile(r)},onSubmit:r=>{this.submitForm(r)},isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted})})]})})}}try{go.displayName="SynapseFormWrapper",go.__docgenInfo={description:"",displayName:"SynapseFormWrapper",props:{formSchemaEntityId:{defaultValue:null,description:"",name:"formSchemaEntityId",required:!0,type:{name:"string"}},formUiSchemaEntityId:{defaultValue:null,description:"",name:"formUiSchemaEntityId",required:!0,type:{name:"string"}},formNavSchemaEntityId:{defaultValue:null,description:"",name:"formNavSchemaEntityId",required:!0,type:{name:"string"}},token:{defaultValue:null,description:"",name:"token",required:!1,type:{name:"string"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"UploadToolSearchParams"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},fileNamePath:{defaultValue:null,description:"",name:"fileNamePath",required:!0,type:{name:"string"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}}}}}catch{}export{go as S};
