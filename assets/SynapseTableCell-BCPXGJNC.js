import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{l as P,bw as Y}from"./useFiles-ChepUPeC.js";import{g as l,F as D}from"./VerificationSubmission-OWkqLMYZ.js";import{i as K,j as X,k as $}from"./StringUtils-C5rFena9.js";import"./OrientationBanner-BMTtxCRZ.js";import{r as N}from"./index-DlbKFsS_.js";import{u as W}from"./useEntity-PQz6LpOZ.js";import{f as R}from"./DateFormatter-BgZQ8i6H.js";import{d as C}from"./dayjs.min-twCecxUk.js";import{D as Q}from"./DirectDownload-DZzGS9Gf.js";import{E as T}from"./EntityLink-E2POteVF.js";import{S as z,L as V}from"./SynapseCardLabel-Qt-MN5h5.js";import"./GenericCard-VpoDf9pC.js";import"./HeaderCardV2-B3LUBXWd.js";import"./CardUtils-CrYzjLaT.js";import{u as Z}from"./QueryContext-CfHo4vkT.js";import{U as w}from"./UserOrTeamBadge-BOVs0vdk.js";import{N as ee}from"./SynapseTableConstants-2qH3fDlQ.js";import{a as ae}from"./SynapseTableUtils-CRJVRtBC.js";import{a as te}from"./useGetEntityHeaders-BEJe4R7B.js";import{S as F}from"./Stack-CICCoKMV.js";import{u as re}from"./index-DfVmOC-M.js";import{T as u}from"./Typography-QhlHI-oV.js";import{E as U}from"./ExpandCollapseButton-CkEUs5A_.js";import{C as q}from"./Collapse-DBT4GF4U.js";import{B}from"./Box-C41TTZyw.js";import{C as ne}from"./ComplexJSONRenderer-C5Oszg0O.js";import{L as le}from"./Link-CxT6ZAtC.js";function S(r){const{entityIdList:a,...t}=r,{data:n}=te(a.map(i=>({targetId:i})),{});return e.jsx(F,{sx:{gap:1},children:n==null?void 0:n.results.map(i=>e.jsx(T,{entity:i,...t},i.id))})}try{S.displayName="EntityIdList",S.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},link:{defaultValue:null,description:"Whether the component should link to the entity page in Synapse. Link can be overriden by passing a string. Default true",name:"link",required:!1,type:{name:"string | boolean"}},showIcon:{defaultValue:null,description:"Whether to display an icon identifying the entity type. Default true",name:"showIcon",required:!1,type:{name:"boolean"}},displayTextField:{defaultValue:null,description:"The field of the entity to display. Default is 'name'",name:"displayTextField",required:!1,type:{name:"enum",value:[{value:'"name"'},{value:'"type"'},{value:'"id"'},{value:'"versionNumber"'},{value:'"description"'},{value:'"etag"'},{value:'"createdOn"'},{value:'"modifiedOn"'},{value:'"createdBy"'},{value:'"modifiedBy"'},{value:'"parentId"'},{value:'"concreteType"'},{value:'"versionLabel"'},{value:'"benefactorId"'},{value:'"isLatestVersion"'}]}}}}}catch{}function E(r){const{accessToken:a}=P(),{evaluationId:t}=r,[n,i]=N.useState(),{ref:c,inView:o}=re();let m=!0;N.useEffect(()=>(m&&o&&I(),()=>{m=!1}),[t,o]);const I=()=>{t&&Y(t,a).then(p=>{i(p.name)}).catch(p=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",p)})};return e.jsx("p",{ref:c,children:n})}try{E.displayName="EvaluationIdRenderer",E.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}function _(r){return r===null?!0:typeof r=="number"?!Number.isNaN(r)&&Number.isFinite(r):["string","boolean"].includes(typeof r)}function se(r){return Object.values(r).every(a=>_(a))}function v(r){const{value:a}=r;return a===null?e.jsx(u,{variant:"smallText1",className:"SRC-inactive",children:"<null value>"}):typeof a=="number"?e.jsx(e.Fragment,{children:a.toLocaleString()}):e.jsx(e.Fragment,{children:String(a)})}try{v.displayName="JSONPrimitiveRenderer",v.__docgenInfo={description:`Handles rendering a JSON "primitive" value in a Synapse table cell.

A JSON primitive value is a string, number, boolean, or null.`,displayName:"JSONPrimitiveRenderer",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"JSONPrimitiveType"}}}}}catch{}function j(r){const{value:a}=r,[t,n]=N.useState(!1),i=a.length>1;return a.length===0?e.jsx(u,{variant:"smallText1",className:"SRC-inactive",children:"Empty array"}):a.length===1?e.jsx(u,{variant:"smallText1",children:e.jsx(v,{value:a[0]})}):e.jsxs(e.Fragment,{children:[i&&e.jsxs(u,{variant:"smallText1",sx:{color:"grey.600",fontStyle:"italic",mb:1},children:[`${a.length.toLocaleString()} items`,e.jsx(U,{isExpanded:t,className:"ExpandableTableData__expandButton",onClick:()=>n(!t)})]}),e.jsx(q,{in:t,children:a.map((c,o)=>e.jsx(B,{sx:{display:"flex",gap:.5,mb:1},children:e.jsx(u,{variant:"smallText1",children:e.jsx(v,{value:c})})},o))})]})}try{j.displayName="JSONArrayRenderer",j.__docgenInfo={description:'Handles rendering a JSON array of "primitive" types in a Synapse table cell.',displayName:"JSONArrayRenderer",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"JSONPrimitiveType[]"}}}}}catch{}const x=3;function A(r){const{keyName:a,value:t}=r;return e.jsxs(B,{sx:{display:"flex",mb:1},children:[e.jsx(u,{variant:"smallText1",children:e.jsx(v,{value:a})}),e.jsx(u,{variant:"smallText1",sx:{color:"grey.600",fontStyle:"italic",px:.5},children:e.jsx(v,{value:t})})]})}function g(r){const{value:a}=r,t=Object.keys(a).length,n=t>x,[i,c]=N.useState(!1);return t===0?e.jsx(u,{variant:"smallText1",className:"SRC-inactive",children:"Empty object"}):e.jsxs(e.Fragment,{children:[Object.entries(a).slice(0,x).map(([o,m])=>e.jsx(A,{keyName:o,value:m},o)),n&&e.jsxs(e.Fragment,{children:[e.jsx(q,{in:i,children:Object.entries(a).slice(x).map(([o,m])=>e.jsx(A,{keyName:o,value:m},o))}),e.jsxs(u,{variant:"smallText1",sx:{mb:.5,color:"grey.600",fontStyle:"italic"},children:[i?"":`${(t-x).toLocaleString()} more`,e.jsx(U,{isExpanded:i,className:"ExpandableTableData__expandButton",onClick:()=>c(o=>!o)})]})]})]})}try{g.displayName="JSONObjectRenderer",g.__docgenInfo={description:"Handles rendering a JSON object where all values are JSON primitives in a Synapse table cell.",displayName:"JSONObjectRenderer",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"Record<string, JSONPrimitiveType>"}}}}}catch{}function h(r){let a=r.value;try{typeof a=="string"&&(a=JSON.parse(a))}catch(t){console.warn("JSONTableCellRenderer: failed to parse JSON",t)}return _(a)||a===null?e.jsx(u,{variant:"smallText1",children:e.jsx(v,{value:a})}):Array.isArray(a)&&a.every(_)?e.jsx(j,{value:a}):typeof a=="object"&&se(a)?e.jsx(g,{value:a}):e.jsx(ne,{value:a})}try{h.displayName="JSONTableCellRenderer",h.__docgenInfo={description:"",displayName:"JSONTableCellRenderer",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}}}}}catch{}function L(r){const{userIds:a}=r;return e.jsx(F,{sx:{gap:1},children:a.map(t=>e.jsx(w,{principalId:t},t))})}try{L.displayName="UserIdList",L.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}}}catch{}function J(r){return r.toLowerCase()==="id"?"id":"name"}function O(r){const{columnType:a,columnValue:t,isBold:n,columnLinkConfig:i,columnName:c,selectColumns:o,columnModels:m,rowData:I,rowId:p,rowVersionNumber:b,isRowEntityColumn:k}=r,{entityId:G,versionNumber:M}=Z(),{data:y}=W(G,M);if(!t)return e.jsx("p",{className:"SRC-inactive",children:ee});if(i)return e.jsx(z,{value:t,columnName:c,selectColumns:o,columnModels:m,isHeader:!1,labelLink:i,rowData:I,rowId:p});if((y&&(K(y)||X(y)||$(y))||k)&&(c==="id"||c==="name")&&p&&b)return e.jsx("p",{children:e.jsx(T,{entity:p,versionNumber:b,className:`${n}`,showIcon:!1,displayTextField:c})});switch(a){case l.ENTITYID:{const s=J(c);return e.jsx("p",{children:e.jsx(T,{entity:t,className:`${n}`,displayTextField:s,showIcon:!1})})}case l.DATE_LIST:{const s=JSON.parse(t);return e.jsxs("p",{children:[s.map((d,f)=>e.jsxs("span",{className:n,children:[R(C(Number(d))),f!==s.length-1?", ":""]},f))," "]})}case l.BOOLEAN_LIST:{const s=JSON.parse(t);return e.jsx("p",{children:s.map((d,f)=>e.jsxs("span",{className:n,children:[d?"true":"false",f!==s.length-1?", ":""]},f))})}case l.FILEHANDLEID:{let s=y.id,d=D.TableEntity;return ae(y)&&c==="dataFileHandleId"&&(s=String(p),d=D.FileEntity),e.jsx(e.Fragment,{children:y&&e.jsx("p",{children:e.jsx(Q,{iconSvgPropOverrides:{sx:{color:"primary.main"}},associatedObjectId:s,associatedObjectType:d,fileHandleId:t,displayFileName:!0})})})}case l.ENTITYID_LIST:{const s=J(c),d=JSON.parse(t);return e.jsx("p",{children:e.jsx(S,{entityIdList:d,displayTextField:s,showIcon:!1})})}case l.USERID_LIST:{const s=JSON.parse(t);return e.jsx("p",{children:e.jsx(L,{userIds:s})})}case l.STRING_LIST:case l.INTEGER_LIST:{const s=JSON.parse(t);return e.jsx("p",{className:n,children:s.map((d,f)=>{const H=a==l.STRING_LIST?e.jsx(V,{text:d}):e.jsx(e.Fragment,{children:d});return e.jsxs(N.Fragment,{children:[H,f!==s.length-1?", ":""]},d)})})}case l.EVALUATIONID:return e.jsx(E,{evaluationId:t});case l.DATE:return e.jsx("p",{className:n,children:R(C(Number(t)))});case l.USERID:return e.jsx(w,{principalId:t});case l.LINK:return e.jsx("p",{children:e.jsx(le,{target:"_blank",rel:"noopener noreferrer",href:t,children:t})});case l.STRING:case l.BOOLEAN:case l.MEDIUMTEXT:case l.LARGETEXT:return e.jsx(u,{variant:"smallText1",className:n,children:e.jsx(V,{text:t})});case l.INTEGER:return e.jsx(u,{variant:"smallText1",sx:{textAlign:"right"},className:n,children:parseInt(t).toLocaleString()});case l.DOUBLE:return e.jsx(u,{variant:"smallText1",sx:{textAlign:"right"},className:n,children:parseFloat(t).toLocaleString()});case l.JSON:return e.jsx(h,{value:t});default:return console.warn(`ColumnType ${a} has unspecified handler. Rendering the column value.`),e.jsx(u,{variant:"smallText1",className:n,children:t})}return e.jsx("p",{className:n,children:t})}const we=N.memo(O);try{O.displayName="SynapseTableCell",O.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"any"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"string"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}},isRowEntityColumn:{defaultValue:null,description:"",name:"isRowEntityColumn",required:!1,type:{name:"boolean"}}}}}catch{}export{we as S};
