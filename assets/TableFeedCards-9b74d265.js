import{a as p,j as t}from"./jsx-runtime-9dc53467.js";import{c as F}from"./SynapseConstants-567f6998.js";import{r as l}from"./index-76fb7be0.js";import"./getEndpoint-ac94413e.js";import{v as R,x as T}from"./SynapseClient-ceb0e6d4.js";import{d as _}from"./dayjs.min-f79c4412.js";import{c as M}from"./SynapseTableCell-a0770d03.js";import{l as E}from"./LoadingScreen-d62555af.js";import{L as q}from"./LargeButton-c1a4d54e.js";const f=({tableEntityId:o})=>{const{accessToken:m}=R(),[r,y]=l.useState(),[d,h]=l.useState(3);let u=!0;if(l.useEffect(()=>((()=>{if(u){if(r)return;const n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT "categories", "date", "title", "mdDescription" FROM ${o} ORDER BY "date" desc`},entityId:o,partMask:F};T.getQueryTableResults(n,m).then(s=>{var a;y((a=s.queryResult)==null?void 0:a.queryResults)})}})(),()=>{u=!1}),[o,m]),!r)return E;const i=r.headers,I=i.findIndex(e=>e.name==="categories"),g=i.findIndex(e=>e.name==="date"),w=i.findIndex(e=>e.name==="title"),x=i.findIndex(e=>e.name==="mdDescription");return p("div",{className:"Feed",children:[t("div",{className:"FeedItems",children:r.rows.map((e,n)=>{if(n>d-1)return;const s=e.values;s.some(c=>c===null)&&console.warn("Row has null value(s) when no nulls expected");const a=JSON.parse(s[I]),C=s[g],S=s[w],N=s[x];return t("div",{className:"FeedItem",children:p("div",{children:[a&&t("div",{className:"FeedItemCategories",children:a.map((c,v)=>t("div",{className:"FeedItemCategory",children:c},`row-${n},categoryIndex-${v}`))}),t("p",{className:"FeedItemDate",children:_(new Date(parseInt(C))).format("MMMM YYYY")}),t("p",{className:"FeedItemTitle",children:S}),t("div",{className:"FeedItemDescription",children:t(M,{markdown:N})})]})},`row-${n}`)})}),r.rows.length>d&&t("div",{className:"FeedViewAllNewsButtonContainer",children:t(q,{color:"primary",variant:"contained",onClick:()=>h(d+3),children:"View More News"})})]})};try{f.displayName="TableFeedCards",f.__docgenInfo={description:"",displayName:"TableFeedCards",props:{tableEntityId:{defaultValue:null,description:"",name:"tableEntityId",required:!0,type:{name:"string"}}}}}catch{}export{f as T};
//# sourceMappingURL=TableFeedCards-9b74d265.js.map
