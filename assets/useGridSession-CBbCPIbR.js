import{l as r}from"./useFiles-DP5r_8h_.js";import{w as y}from"./waitForAsyncResult-Cb_jNxh0.js";import{q as d}from"./queryOptions-C9woPjwX.js";import{u}from"./QueryClientProvider-Drv3DDYU.js";import{u as o}from"./useMutation-CR2RaXsm.js";import{u as S}from"./useInfiniteQuery-DB4BPXxg.js";async function l(e,s){const n=await e.gridServicesClient.postRepoV1GridSessionAsyncStart({createGridRequest:s});if(!n.token)throw new Error("No async job token returned from startGridSession");return(await y(()=>e.asynchronousJobServicesClient.getRepoV1AsynchronousJobJobId({jobId:n.token}))).responseBody}function f(e){const s=u(),{keyFactory:n,synapseClient:t}=r();return o({...e,mutationFn:i=>t.gridServicesClient.postRepoV1GridSessionSessionIdReplica({sessionId:i,createReplicaRequest:{gridSessionId:i}}),onSuccess:async(i,a,c)=>{await s.invalidateQueries({queryKey:n.getGridSessionListKey()})}})}function q(e){const s=u(),{keyFactory:n,synapseClient:t}=r();return o({...e,mutationFn:i=>t.gridServicesClient.deleteRepoV1GridSessionSessionId({sessionId:i}),onSuccess:async(i,a,c)=>{await s.invalidateQueries({queryKey:n.getGridSessionListKey()}),e!=null&&e.onSuccess&&await e.onSuccess(i,a,c)}})}const w=(e,s)=>d({queryKey:s.keyFactory.getGridSessionListKey(e),queryFn:()=>s.synapseClient.gridServicesClient.postRepoV1GridSessionList({listGridSessionsRequest:e})});function F(e,s){const{keyFactory:n,synapseClient:t}=r();return S({...s,queryKey:n.getGridSessionListKey(e),queryFn:async i=>await t.gridServicesClient.postRepoV1GridSessionList({listGridSessionsRequest:{...e,nextPageToken:i.pageParam}}),initialPageParam:void 0,getNextPageParam:i=>i.nextPageToken})}const b=e=>{const{synapseClient:s}=r();return o({...e,mutationFn:async n=>await l(s,n)})};export{f as a,q as b,F as c,w as g,b as u};
