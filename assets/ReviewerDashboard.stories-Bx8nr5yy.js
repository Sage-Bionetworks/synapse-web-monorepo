import{j as e}from"./jsx-runtime-DoxjgJx5.js";import{r as n,a as je}from"./index-Cu9bd8lq.js";import{L as Ne,B as be,N as ge}from"./react-router-dom-Dm3I-QQ7.js";import{k as De,S as Pe,P as le,r as ce,br as $,bs as K,a0 as qe,H as Oe,bt as we,bu as P,bv as Me}from"./SynapseClient-CCAdBNnm.js";import{S as Fe,b as Ue,I as Le}from"./IconSvg-Uicv0V0N.js";import{S as U}from"./LoadingScreen-DEKCJTB1.js";import{u as me,U as w}from"./UserSearchBoxV2-ZW3bKRYi.js";import{af as v,D as I,ae as q,r as pe,T as de,ag as ue,e as he,ah as Se,M as Ee,ai as fe,d as Re,aj as xe,L as _e,ak as Ie,f as Ve,S as Z}from"./index-DfM7mfu0.js";import{d as g}from"./dayjs.min-D1RcYm3-.js";import{u as ke}from"./useInfiniteQuery-DdR8RdBU.js";import{S as Be}from"./RegularExpressions-DlyA5nPV.js";import{O as Ye}from"./OrientationBanner-BsmFKABX.js";import{S as k}from"./Sort-DSm6XQDI.js";import{f as D}from"./DateFormatter-DxcYfMy8.js";import{U as Ae}from"./UserBadge-Bl3wnd9-.js";import{T as Ce}from"./Table-DV5t9hyQ.js";import{a as ye}from"./ThemesPlot-B-IMpVel.js";import{T as R}from"./Typography-5kwXSe6k.js";import{B as M}from"./Button-PewxtVEx.js";import{ak as Ge,a1 as He,z as T,G as Qe,x as ze,B as We,y as $e}from"./ConfirmationDialog-Dw_cqoYk.js";import{A as X}from"./SynapseConstants-CnTS8uWh.js";import{U as N}from"./UserOrTeamBadge-C9Krm0Hk.js";import{S as Ke}from"./Stack-B3TCA9BM.js";import{A as ve}from"./AccessRequirementSearchBox-CJQoPzBH.js";import{S as Xe,F as Je}from"./useEntitySelection-BfTrYo2v.js";import{o as J}from"./omitBy-Ciek9Yr-.js";import{E as Ze}from"./EntityFinderModal-CQHaJkTN.js";import{e as er}from"./useAccessRequirements-DQwhcr_p.js";import{E as rr}from"./EntityLink-C5Ak9ll9.js";import{L as tr}from"./Link-Cn1DJ6En.js";import{n as Te}from"./noop-DX6rZLP_.js";import{I as sr}from"./InputSizedButton-qV8M7o9x.js";import{T as ee}from"./TextField-GbZ9n7Oq.js";import{I as ar}from"./InputAdornment-DodXTKPq.js";import{B as ir}from"./Box-CSxp1att.js";import{S as or}from"./SubmissionPage-B25al7qZ.js";import"./TransitionGroupContext-C4KIfRep.js";import"./useForkRef-Bm_QQ74L.js";import"./createTheme-CSXEdrm4.js";import"./index-GEGPABih.js";import"./tiny-invariant-CopsF_GD.js";import"./useQuery-ChYzlhEH.js";import"./tinycolor-Begke6kS.js";import"./createSvgIcon-RFCzz5wB.js";import"./styled-DhbZfYjm.js";import"./InfoTwoTone-q2nFdSda.js";import"./CheckCircleTwoTone-DZeepUDu.js";import"./colorManipulator-CBwtHKAF.js";import"./inputBaseClasses-OXp8mACw.js";import"./Fade-BnvAYJFW.js";import"./utils-BX4sETT_.js";import"./index-BlO3JfGB.js";import"./index-DnaZGQZH.js";import"./index-SDyqs4cU.js";import"./FullWidthAlert-DfzvViOl.js";import"./Alert-BjW6UdMW.js";import"./mergeSlotProps-BvStzxp7.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-BNspCzZ8.js";import"./IconButton-dV1PosdL.js";import"./ButtonBase-B1PyklHR.js";import"./useIsFocusVisible-Lp1_y5xp.js";import"./AlertTitle-CaC9w9kZ.js";import"./Grow-WB7TPAH6.js";import"./ClickAwayListener-Ba-YFlDA.js";import"./ownerDocument-DW-IO8s5.js";import"./Tooltip-BUEOzDXu.js";import"./useControlled-JEQ1v-P8.js";import"./useId-g68bhPgm.js";import"./_getTag-CNUVqXoc.js";import"./_Map-BfIf8dAI.js";import"./isArray-ggc3KxVp.js";import"./isObject-C3e4t58V.js";import"./StringUtils-5IsdMFw2.js";import"./LayersTwoTone-_9iArYlq.js";import"./ErrorOutlined-CY90nJ7_.js";import"./GetAppTwoTone-6qo15GJD.js";import"./InfoOutlined-so_MDirv.js";import"./Backdrop-C5PbY0-B.js";import"./LinearProgress-We-7bK11.js";import"./Select-49a62830.esm-pLx9TGnO.js";import"./use-deep-compare-effect.esm-BJt8Qld_.js";import"./uniq-Cy-BBoCV.js";import"./_baseSlice-F8doVSIJ.js";import"./_isIterateeCall-EdIsgZUA.js";import"./_Uint8Array-C7sos_v8.js";import"./_baseTimes-DoMoQz2v.js";import"./toInteger-CYyrx-ZX.js";import"./isSymbol-BzKS7Qf1.js";import"./_cacheHas-C64lAb-V.js";import"./without-0L9FeH2O.js";import"./_baseIndexOf-DlmoT9Yo.js";import"./toString-CYyvKWOl.js";import"./_baseRest-vR1t9Scu.js";import"./identity-DKeuBCMA.js";import"./_overRest-efmwaQJG.js";import"./_defineProperty-7gnA7JV6.js";import"./isArrayLikeObject-CXzUEkDq.js";import"./_setToArray-CSiN_fit.js";import"./Skeleton-DTl-q8yD.js";import"./timezone-ClTQq11v.js";import"./Menu-ak7szB2C.js";import"./Modal-CslmxWuO.js";import"./getScrollbarSize-Bqq2hMjQ.js";import"./ownerWindow-BN2rbQ_G.js";import"./createChainedFunction-BO_9K8Jh.js";import"./MenuList-CzULwBAB.js";import"./List-pdzHoHkt.js";import"./useFiles-D_8ZN9GB.js";import"./cloneDeep-DAplHtCV.js";import"./_baseClone-Mno-BXwZ.js";import"./_initCloneObject-Sqh2TOTy.js";import"./_getAllKeys-C1rIrh0g.js";import"./SkeletonTable-BTaXwfue.js";import"./times-BHmAKp8a.js";import"./ToastMessage-CYxNBQ90.js";import"./CSSTransition-DXnOs121.js";import"./hasClass-D5ZjVvBY.js";import"./uniqueId-CSw6ftlJ.js";import"./Divider-C8oTyohe.js";import"./dividerClasses-CsfQPY9V.js";import"./MenuItem-Chy-1kke.js";import"./listItemTextClasses-T2uoXzON.js";import"./Card-DJqInpis.js";import"./Avatar-AKVRAh1I.js";import"./ThemeProvider-BS-PCUTx.js";import"./ElementWithTooltip-HBZgOeY6.js";import"./SynapseTableConstants-2qH3fDlQ.js";import"./index-CNYXWvLi.js";import"./Icon-B5DRttpk.js";import"./SortDown-Bz1uWA0S.js";import"./ShowMore-D9tD7OdY.js";import"./Dropdown-CjHsm-1X.js";import"./createWithBsPrefix-DPLuecgn.js";import"./SqlFunctions-D3GfCIKQ.js";import"./factory-DQ_FQLjW.js";import"./sortBy-Dibl79kw.js";import"./_baseFlatten-CT67ljg7.js";import"./_baseIteratee-CFzkGn5y.js";import"./_getMatchData-CwqTgbfK.js";import"./isEqual-ChBGaxNe.js";import"./hasIn-CaC8O0qN.js";import"./_baseFor-CpEDs2Sd.js";import"./omit-CPxT9cLb.js";import"./isPlainObject-C3asuwMF.js";import"./merge-BbJjHYq8.js";import"./pick-DhepJ9ZX.js";import"./isEqualWith-CyH8OKK6.js";import"./isNil-DEcgN-Nr.js";import"./isNumber-BM-UBS4N.js";import"./createSvgIcon-tWZhfgI5.js";import"./isMuiElement-yx-QWTmT.js";import"./WideButton-BOHZkkT8.js";import"./useEntity-DPU5nF9E.js";import"./useQueries-BhgaWmyT.js";import"./useMutation-DAMF4D7y.js";import"./QueryFilterUtils-Bx0-Q9iO.js";import"./InfiniteQueryUtils-CKlRW-xB.js";import"./useTeamMembers-BXs9MKKI.js";import"./index-S6oMIluj.js";import"./EntityIcon-DXoKncRq.js";import"./pluralize-D3rOHoU0.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./index.modern-BSaf6tm9.js";import"./_getPrototype-DSx75BAr.js";import"./index-8oAhYXzt.js";import"./isPlainObject-BDeK4qKc.js";import"./toNumber-DDV9Xfgs.js";import"./now-3qigre4W.js";import"./useGetEntityHeaders-De7tGpSZ.js";import"./useGetQueryResultBundle-BkPIOrRL.js";import"./DownloadConfirmationUI-BLQYXX0G.js";import"./useDownloadList-Bcdx1BGz.js";import"./SkeletonInlineBlock-jATawT4h.js";import"./StandaloneLoginForm-DiIwPSU5.js";import"./Constants-KD_IheD4.js";import"./useTwoFactorEnrollment-BgAhfpj8.js";import"./TextField-BoiWERKx.js";import"./StyledFormControl-DWTp7XLz.js";import"./FormControl-B1FZbS9n.js";import"./useFormControl-vG3XTiAH.js";import"./InputLabel-P11qyNNg.js";import"./LoginMethodButton-CVbQOhTj.js";import"./LastLoginInfo-C4K2uEBO.js";import"./TwoFactorEnrollmentForm-CpD9GQCI.js";import"./LeftRightPanel-C7Q4Ozvz.js";import"./Dialog-nCKBZOpF.js";import"./DialogContent-AsBaVXxE.js";import"./Grid-1uyFiREx.js";import"./Form-AJVHSZW_.js";import"./Col-udcBiYAB.js";import"./RadioGroup-CFc4OODL.js";import"./Radio-D3lT42_G.js";import"./FormControlLabel-N7jszZ_A.js";import"./FormGroup-BTH3eeIG.js";import"./UploadDocumentField-5U-qydon.js";import"./FileUpload-C6H2w7bU.js";import"./AuthenticatedRequirement-CEoNE_Jl.js";import"./RequirementItem-kdndFQFx.js";import"./ConditionalWrapper-C6_4TcM5.js";import"./CertificationRequirement-DnQ7hOJ2.js";import"./ValidationRequirement-O9Nbp8YC.js";import"./TwoFactorAuthEnabledRequirement-DcJyNQs0.js";import"./EnumFacetFilterSkeleton-CBqtONSH.js";import"./Checkbox-CGc3q-5A.js";import"./Select-DpA6F0ME.js";import"./Chip-DV4rSXeY.js";import"./IconList-DmU-YtDb.js";import"./LightTooltip-C-gj4rGY.js";import"./SkeletonButton-DkbNcQyC.js";import"./SkeletonParagraph-u6_MNbF7.js";import"./SelectionCriteriaPill-CcbYYyZH.js";import"./Close-C6uk4mpe.js";import"./UserCardList-5aA5oDnD.js";import"./ActionRequiredCard-CH8mXd4e.js";import"./useGetFeatureFlag-CBfD7ZbH.js";import"./OpenData-DXn7HNlH.js";import"./AclEditor-D7XatJKX.js";import"./IconSvgButton-CjXHQpk7.js";import"./useUpdateAcl-m89Ynhlk.js";import"./Box-CPhvi0PE.js";import"./NoSearchResults-CxWDZiwB.js";import"./NoData-C6O5T8E1.js";import"./Tabs-lZoRW13k.js";import"./QueryCount-0XM4BXiS.js";import"./UpsetPlot-FGAAWELo.js";import"./lz-string-D345GCHL.js";import"./react-sizeme-CSOwE_ZL.js";import"./ColorGradient-Zy7TAKxK.js";import"./colorPalette-BALeOMsp.js";import"./LargeButton-D0ufXxZ0.js";import"./RangeSlider-CjfvnETH.js";import"./Slider-_N_RybSf.js";import"./SynapseVideo-D6kK9BfW.js";import"./TeamBadge-D0DIlq5s.js";import"./immutable.es-DHy1u56X.js";import"./Search-BVgnwPfV.js";import"./SchemaDrivenAnnotationEditor-DpgYiKCN.js";import"./MuiForm-C4xLC6Rf.js";import"./ListItem-Qj3w5zMb.js";import"./listItemButtonClasses-DbOSaINN.js";import"./ListItemIcon-xNnxl8Ej.js";import"./ListItemText-DPvFcSQk.js";import"./ContentCopy-CgjYFLSV.js";import"./ErrorListTemplate-DcYQ05_L.js";import"./DateTimePicker-C3SYSYhh.js";import"./useMediaQuery-Ci3ddotx.js";import"./ArrowUpward-CZZiNhbL.js";import"./EntityModal-DxWVT5RY.js";import"./FileHandleUtils-Clr3SVvW.js";import"./WarningDialog-BDL5P9Pn.js";import"./useFavorites-9NO0MAau.js";import"./DropdownSelect-CyUDaluX.js";import"./ErrorChip-Dgjvq6bM.js";import"./RejectDataAccessRequestModal-C_9LYd13.js";import"./CannedRejectionDialog-QO89Z-A6.js";function nr(r,a){const{accessToken:t,keyFactory:s}=De();return ke({...a,queryKey:s.searchAccessApprovalsQueryKey(r),queryFn:l=>Pe.searchAccessApprovals({...r,nextPageToken:l.pageParam},t),initialPageParam:void 0,getNextPageParam:l=>l.nextPageToken})}function L(r,a,t=0){const[s,l]=n.useState(r);return[s,Ge(l,[],a,t)]}const B=({accessorId:r,accessRequirementId:a})=>{const[t,s]=n.useState({field:v.MODIFIED_ON,direction:I.DESC}),l=n.useMemo(()=>({accessorId:r,accessRequirementId:a,sort:[t]}),[r,a,t]),{data:c,hasNextPage:d,fetchNextPage:S,isLoading:o}=nr(l),u=(c==null?void 0:c.pages.flatMap(i=>i.results))??[],h=i=>{t.field===i?s({field:i,direction:t.direction===I.DESC?I.ASC:I.DESC}):s({field:i,direction:I.DESC})};return e.jsxs("div",{className:"AccessApprovalsTable bootstrap-4-backport",children:[e.jsxs(Ce,{striped:!0,borderless:!0,bordered:!1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"AR ID"}),e.jsx("th",{children:"Access Requirement Name"}),e.jsx("th",{children:"Submitter"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:e.jsxs("span",{className:"SRC-split",children:[e.jsx("span",{children:"Modified Date"}),e.jsx(k,{role:"button",active:t.field===v.MODIFIED_ON,direction:t.field===v.MODIFIED_ON?t.direction==="DESC"?I.DESC:I.ASC:I.DESC,onClick:()=>h(v.MODIFIED_ON)})]})}),e.jsx("th",{children:e.jsxs("span",{className:"SRC-split",children:[e.jsx("span",{children:"Expires"}),e.jsx(k,{role:"button",active:t.field===v.EXPIRED_ON,direction:t.field===v.EXPIRED_ON?t.direction==="DESC"?I.DESC:I.ASC:I.DESC,onClick:()=>h(v.EXPIRED_ON)})]})})]})}),e.jsx("tbody",{children:u.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("a",{href:`${le.PORTAL}AccessRequirement:AR_ID=${i.accessRequirementId}`,children:i.accessRequirementId})}),e.jsx("td",{children:i.accessRequirementName}),e.jsx("td",{children:e.jsx(Ae,{userId:i.submitterId})}),e.jsx("td",{children:ye(i.state.toLocaleLowerCase())}),e.jsx("td",{children:D(g(i.modifiedOn))}),e.jsx("td",{className:`${i.expiredOn?new Date>new Date(i.expiredOn)?"expired":"":"non-expire"} remove-border`,children:i.expiredOn?D(g(i.expiredOn)):"Never"})]},i.id))})]}),o&&e.jsx("div",{className:"SRC-center-text",children:e.jsx(U,{size:40})}),!o&&u.length===0&&e.jsx(R,{className:"SRC-center-text",variant:"body1",children:"No Results"}),d&&e.jsx(M,{variant:"outlined",color:"primary",onClick:()=>{S()},children:"Show More"})]})};try{B.displayName="AccessApprovalsTable",B.__docgenInfo={description:"",displayName:"AccessApprovalsTable",props:{accessorId:{defaultValue:null,description:"",name:"accessorId",required:!0,type:{name:"string"}},accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!1,type:{name:"string"}}}}}catch{}const F=({showSubmitter:r,showStatus:a,showRequesters:t,accessorId:s,accessRequirementId:l,reviewerId:c,submissionState:d,reviewerFilterType:S})=>{const[o,u]=n.useState({field:q.CREATED_ON,direction:I.DESC}),h=n.useMemo(()=>({accessorId:s,accessRequirementId:l,submissionState:d,reviewerId:c,reviewerFilterType:S,sort:[o]}),[s,l,d,c,S,o]),{data:i,hasNextPage:A,fetchNextPage:f,isLoading:E}=He(h),_=(i==null?void 0:i.pages.flatMap(m=>m.results))??[],C=m=>{o.field===m?u({field:m,direction:o.direction==="DESC"?"ASC":"DESC"}):u({field:m,direction:"DESC"})};return e.jsxs("div",{className:"bootstrap-4-backport AccessSubmissionTable",children:[e.jsxs(Ce,{striped:!0,borderless:!0,bordered:!1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"REQUEST"}),e.jsx("th",{children:"Access Requirement Name"}),r&&e.jsx("th",{children:"Submitter"}),a&&e.jsx("th",{children:"Status"}),t&&e.jsx("th",{children:"Requesters"}),e.jsx("th",{children:"Reviewer(s)"}),e.jsxs("th",{children:["Created Date",e.jsx(k,{role:"button",style:{float:"right"},active:o.field===q.CREATED_ON,"aria-label":"Sort by Created On",direction:o.field===q.CREATED_ON?o.direction==="DESC"?"DESC":"ASC":"DESC",onClick:()=>C(q.CREATED_ON)})]})]})}),e.jsx("tbody",{children:_.map(m=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(Ne,{to:`/Submissions/${m.id}`,children:m.id})}),e.jsx("td",{children:m.accessRequirementName}),r&&e.jsx("td",{children:e.jsx(N,{principalId:m.submitterId})}),a&&e.jsx("td",{children:ye(m.state.toLocaleLowerCase())}),t&&e.jsxs("td",{children:[e.jsx(N,{principalId:m.submitterId}),m.accessorChanges.filter(p=>m.submitterId!==p.userId).map(p=>e.jsx("li",{children:e.jsx(Ae,{userId:p.userId,className:"requester"})},p.userId))]}),e.jsx("td",{children:e.jsx(Ke,{gap:1,children:m.accessRequirementReviewerIds.length===0?e.jsx(N,{principalId:X}):m.accessRequirementReviewerIds.map(p=>e.jsx(N,{principalId:p},p))})}),e.jsx("td",{children:D(g(m.createdOn))})]},m.id))})]}),E&&e.jsx("div",{className:"SRC-center-text",children:e.jsx(U,{size:40})}),!E&&_.length==0&&e.jsx(R,{className:"SRC-center-text",variant:"body1",children:"No Results"}),A?e.jsx(M,{variant:"outlined",color:"primary",onClick:()=>{f()},children:"Show More"}):""]})};try{F.displayName="AccessRequestSubmissionTable",F.__docgenInfo={description:"",displayName:"AccessRequestSubmissionTable",props:{showSubmitter:{defaultValue:null,description:"",name:"showSubmitter",required:!1,type:{name:"boolean"}},showStatus:{defaultValue:null,description:"",name:"showStatus",required:!1,type:{name:"boolean"}},showRequesters:{defaultValue:null,description:"",name:"showRequesters",required:!1,type:{name:"boolean"}},accessorId:{defaultValue:null,description:"",name:"accessorId",required:!1,type:{name:"string"}},accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!1,type:{name:"string"}},reviewerId:{defaultValue:null,description:"",name:"reviewerId",required:!1,type:{name:"string"}},submissionState:{defaultValue:null,description:"",name:"submissionState",required:!1,type:{name:"enum",value:[{value:'"SUBMITTED"'},{value:'"APPROVED"'},{value:'"REJECTED"'},{value:'"CANCELLED"'}]}},reviewerFilterType:{defaultValue:null,description:"",name:"reviewerFilterType",required:!1,type:{name:"enum",value:[{value:'"ALL"'},{value:'"ACT_ONLY"'},{value:'"DELEGATED_ONLY"'}]}}}}}catch{}const lr=()=>e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"SearchPlaceholderImage",height:"167px"}),e.jsx(R,{variant:"body1Italic",children:"Select a user using the search field above to view their data access history"})]}),cr=()=>{const[r,a]=n.useState(),[t,s]=n.useState(""),[l,c]=n.useState({accessorId:t,accessRequirementId:r}),[d,S]=n.useState({showStatus:!0,showSubmitter:!0,accessorId:t,accessRequirementId:r}),{data:o}=ce(),u=o==null?void 0:o.isACTMember,h=$(),i=K(),A=500,f=n.useCallback(E=>{s(E||"")},[]);return n.useEffect(()=>{(()=>{const _=new URLSearchParams(h.search);a(_.get("accessRequirementId")??void 0),s(_.get("accessorId")??"")})()},[h.search]),me(()=>{((_,C)=>{const m=new URLSearchParams(J({accessRequirementId:_,accessorId:C},p=>p===void 0||p===""));i.replace({pathname:h.pathname,search:m.toString()})})(r,t),c({accessorId:t,accessRequirementId:r}),S({showStatus:!0,showSubmitter:!0,accessorId:t,accessRequirementId:r})},[r,t,i,h.pathname],A),e.jsxs("div",{className:"UserHistoryDashboard bootstrap-4-backport",children:[e.jsxs("div",{className:"InputPanel",children:[e.jsxs("div",{children:[e.jsx(R,{component:"label",variant:"smallText2",htmlFor:"user-filter",children:"Select a user to view their access history"}),e.jsx(w,{inputId:"user-filter",onChange:f,defaultValue:t,placeholder:"Search for a user name",typeFilter:pe.USERS_ONLY})]}),t&&e.jsxs("div",{children:[e.jsx(R,{component:"label",variant:"smallText2",htmlFor:"arName-filter",children:"Filter by Access Requirement Name"}),e.jsx(ve,{inputId:"arName-filter",placeholder:"Search for an Access Requirement Name ",onChange:a})]})]}),t?e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"headline3",children:["Submissions including ",e.jsx(N,{principalId:t})]}),e.jsx(F,{...d}),u&&e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"headline3",children:"Status in Access Requirements"}),e.jsx(B,{...l})]})]}):e.jsx(lr,{})]})};function Y(r){switch(r){case de:return ue;case he:return Se;case Ee:return fe;case Re:return xe;case _e:return Ie;default:return"Unknown"}}const mr=r=>/^\d+$/.test(r),j=Qe(),pr=[j.accessor("id",{header:r=>e.jsx(T,{...r,title:"AR ID"}),cell:({getValue:r})=>e.jsx(tr,{href:`${le.PORTAL}AccessRequirement:AR_ID=${r()}`,children:r()}),enableSorting:!1,enableColumnFilter:!1}),j.accessor("name",{header:r=>e.jsx(T,{...r,title:"Access Requirement Name"}),cell:({getValue:r})=>r(),enableSorting:!0,enableColumnFilter:!1}),j.accessor("type",{header:r=>e.jsx(T,{...r,title:"Type"}),cell:({getValue:r})=>Y(r()),enableSorting:!1,enableColumnFilter:!0,meta:{filterVariant:"enumeration",enumValues:[{value:de,displayText:ue},{value:he,displayText:Se},{value:Ee,displayText:fe},{value:Re,displayText:xe},{value:_e,displayText:Ie}],enableMultipleSelect:!1}}),j.accessor("relatedProjectIds",{header:r=>e.jsx(T,{...r,title:"Related to Projects"}),cell:({getValue:r})=>e.jsx(e.Fragment,{children:r().map(a=>e.jsxs(je.Fragment,{children:[e.jsx(rr,{entity:a})," ",e.jsxs(R,{component:"span",variant:"smallText1",color:"grey.700",children:["(",a,")"]}),e.jsx("br",{})]},a))}),enableSorting:!1,enableColumnFilter:!1}),j.accessor("reviewerIds",{header:r=>e.jsx(T,{...r,title:"Reviewer"}),cell:({getValue:r})=>e.jsx(e.Fragment,{children:r().length===0?e.jsx(N,{principalId:X}):r().map(a=>e.jsx(N,{principalId:a},a))}),enableSorting:!1,enableColumnFilter:!1}),j.accessor("modifiedOn",{header:r=>e.jsx(T,{...r,title:"Last Modified"}),cell:({getValue:r})=>D(g(r())),enableSorting:!1,enableColumnFilter:!1}),j.accessor("createdOn",{header:r=>e.jsx(T,{...r,title:"Created On"}),cell:({getValue:r})=>D(g(r())),enableSorting:!0,enableColumnFilter:!1})],dr=[{desc:!0,id:"createdOn"}];function ur(r){const a=r.desc?"DESC":"ASC";if(r.id=="createdOn")return{field:"CREATED_ON",direction:a};if(r.id=="name")return{field:"NAME",direction:a};throw new Error(`Could not map sort field ${r.id} to AccessRequirementSortField`)}function hr(r){const a=(r||[]).find(s=>s.id==="type"),t=a==null?void 0:a.value;if(t)return t[0]}function G(r){const{nameOrID:a,relatedProjectId:t,reviewerId:s,accessType:l,typeFilter:c,onTypeFilterChange:d=Te}=r,[S,o]=n.useState(dr),u=n.useMemo(()=>c?[{id:"type",value:[c]}]:[],[c]),h=n.useCallback(x=>{const y=typeof x=="function"?x(u):x,b=hr(y);d(b)},[u,d]),i=n.useMemo(()=>S.map(ur),[S]),A=n.useMemo(()=>{let x,y;if(a!==void 0){const b=a.trim();mr(b)?y=[Number.parseInt(b)]:x=b}return{ids:y,nameContains:x,relatedProjectId:t,reviewerId:s,accessType:l,sort:i,type:c}},[a,t,s,l,i,c]),{data:f,hasNextPage:E,fetchNextPage:_,isLoading:C}=er(A),m=n.useMemo(()=>(f==null?void 0:f.pages.flatMap(x=>x.results))??[],[f]);return{table:ze({data:m,columns:pr,state:{sorting:S,columnFilters:u},onSortingChange:o,onColumnFiltersChange:h,getRowId:x=>x.id,getCoreRowModel:We(),columnResizeMode:"onChange",manualSorting:!0,enableMultiSort:!1,enableSortingRemoval:!1,manualFiltering:!0}),isLoading:C,hasNextPage:E,fetchNextPage:_}}try{Y.displayName="accessRequirementConcreteTypeValueToDisplayValue",Y.__docgenInfo={description:"",displayName:"accessRequirementConcreteTypeValueToDisplayValue",props:{}}}catch{}try{G.displayName="useAccessRequirementTable",G.__docgenInfo={description:"",displayName:"useAccessRequirementTable",props:{nameOrID:{defaultValue:null,description:"",name:"nameOrID",required:!1,type:{name:"string"}},relatedProjectId:{defaultValue:null,description:"",name:"relatedProjectId",required:!1,type:{name:"string"}},reviewerId:{defaultValue:null,description:"",name:"reviewerId",required:!1,type:{name:"string"}},accessType:{defaultValue:null,description:"",name:"accessType",required:!1,type:{name:"enum",value:[{value:'"CREATE"'},{value:'"READ"'},{value:'"UPDATE"'},{value:'"DELETE"'},{value:'"CHANGE_PERMISSIONS"'},{value:'"DOWNLOAD"'},{value:'"UPLOAD"'},{value:'"PARTICIPATE"'},{value:'"SUBMIT"'},{value:'"READ_PRIVATE_SUBMISSION"'},{value:'"UPDATE_SUBMISSION"'},{value:'"DELETE_SUBMISSION"'},{value:'"TEAM_MEMBERSHIP_UPDATE"'},{value:'"SEND_MESSAGE"'},{value:'"CHANGE_SETTINGS"'},{value:'"MODERATE"'},{value:'"REVIEW_SUBMISSIONS"'},{value:'"EXEMPTION_ELIGIBLE"'}]}},typeFilter:{defaultValue:null,description:"",name:"typeFilter",required:!1,type:{name:"string"}},onTypeFilterChange:{defaultValue:null,description:"",name:"onTypeFilterChange",required:!1,type:{name:"((typeFilter: string) => void)"}}}}}catch{}function H(r){const{nameOrID:a,relatedProjectId:t,reviewerId:s,accessType:l,onCreateNewAccessRequirementClicked:c,typeFilter:d,onTypeFilterChange:S=Te}=r,{table:o,isLoading:u,hasNextPage:h,fetchNextPage:i}=G({nameOrID:a,relatedProjectId:t,reviewerId:s,accessType:l,typeFilter:d,onTypeFilterChange:S});return e.jsxs("div",{children:[e.jsxs("div",{className:"SRC-split",children:[e.jsx(R,{variant:"headline3",style:{marginBottom:0},children:"Access Requirements"}),c&&e.jsx(M,{variant:"outlined",color:"primary",onClick:c,startIcon:e.jsx(Fe,{}),children:"New Access Requirement"})]}),e.jsxs("div",{children:[e.jsx($e,{table:o,styledTableContainerProps:{sx:{my:2}}}),u&&e.jsx("div",{className:"SRC-center-text",children:e.jsx(U,{size:40})}),!u&&o.getRowModel().rows.length===0&&e.jsx(R,{className:"SRC-center-text",variant:"body1",children:"No Results"}),h?e.jsx(M,{variant:"outlined",color:"primary",onClick:()=>{i()},children:"Show More"}):e.jsx(e.Fragment,{})]})]})}try{H.displayName="AccessRequirementTable",H.__docgenInfo={description:"",displayName:"AccessRequirementTable",props:{nameOrID:{defaultValue:null,description:"",name:"nameOrID",required:!1,type:{name:"string"}},relatedProjectId:{defaultValue:null,description:"",name:"relatedProjectId",required:!1,type:{name:"string"}},reviewerId:{defaultValue:null,description:"",name:"reviewerId",required:!1,type:{name:"string"}},accessType:{defaultValue:null,description:"",name:"accessType",required:!1,type:{name:"enum",value:[{value:'"CREATE"'},{value:'"READ"'},{value:'"UPDATE"'},{value:'"DELETE"'},{value:'"CHANGE_PERMISSIONS"'},{value:'"DOWNLOAD"'},{value:'"UPLOAD"'},{value:'"PARTICIPATE"'},{value:'"SUBMIT"'},{value:'"READ_PRIVATE_SUBMISSION"'},{value:'"UPDATE_SUBMISSION"'},{value:'"DELETE_SUBMISSION"'},{value:'"TEAM_MEMBERSHIP_UPDATE"'},{value:'"SEND_MESSAGE"'},{value:'"CHANGE_SETTINGS"'},{value:'"MODERATE"'},{value:'"REVIEW_SUBMISSIONS"'},{value:'"EXEMPTION_ELIGIBLE"'}]}},onCreateNewAccessRequirementClicked:{defaultValue:null,description:"",name:"onCreateNewAccessRequirementClicked",required:!1,type:{name:"(() => void)"}},typeFilter:{defaultValue:null,description:"",name:"typeFilter",required:!1,type:{name:"string"}},onTypeFilterChange:{defaultValue:null,description:"",name:"onTypeFilterChange",required:!1,type:{name:"((typeFilter: string) => void)"}}}}}catch{}const re="nameOrID",te="relatedProjectId",se="reviewerId",ae="type";function Q(r){const{onCreateNewAccessRequirementClicked:t}=r,s=$(),l=n.useMemo(()=>new URLSearchParams(s.search),[s.search]),c=K(),[d,S]=L(l.get(re)??"",500),[o,u]=L(l.get(te)??void 0,500),[h,i]=L(l.get(se)??void 0,500),[A,f]=n.useState(l.get(ae)??void 0),E=n.useMemo(()=>!!(o&&!Be.exec(o)),[o]),[_,C]=n.useState(!1);n.useEffect(()=>{const p=J({[re]:d,[te]:o,[se]:h,[ae]:A},y=>y===void 0||y===""),x=new URLSearchParams(p);c.replace({pathname:s.pathname,search:x.toString()})},[d,o,h,A,c,s.pathname]);const m=n.useCallback(p=>{i(p||void 0)},[i]);return e.jsxs("div",{className:"AccessRequirementDashboard",children:[e.jsx(Ze,{configuration:{initialScope:Je.ALL_PROJECTS,initialContainer:null,selectMultiple:!1,selectableTypes:[Ve.PROJECT],treeOnly:!0},show:_,onCancel:()=>{C(!1)},title:"Select Project to Filter Access Requirements",promptCopy:"Select a project to find Access Requirements that are associated with that project. Access Requirements will be found if the Access Requirement is applied to the project, or if it is applied to any item inside the project.",onConfirm:p=>{u(p[0].targetId),C(!1)},confirmButtonCopy:"Select"}),e.jsxs("form",{className:"InputPanel",children:[e.jsx("div",{children:e.jsx(ee,{label:"Filter by Access Requirement Name or ID",id:"ar-name-filter",type:"text",fullWidth:!0,placeholder:"Search for an Access Requirement Name or ID",onChange:p=>{S(p.target.value)},InputProps:{endAdornment:e.jsx(ar,{position:"end",children:e.jsx(Ue,{})})}})}),e.jsxs(ir,{display:"flex",gap:"5px",alignItems:"stretch",children:[e.jsx(ee,{label:"Filter by Project",id:"project-id-filter",type:"text",fullWidth:!0,placeholder:"Enter a project SynID",error:E,helperText:E?'Value must be a Synapse ID, e.g. "syn1234"':void 0,onChange:p=>{const x=p.target.value;u(x===""?void 0:x)}}),e.jsx(sr,{variant:"outlined",color:"primary",onClick:()=>{C(!0)},children:"Browse"})]}),e.jsxs("div",{children:[e.jsx(R,{component:"label",variant:"smallText2",htmlFor:"reviewer-filter",children:"Filter by Reviewer"}),e.jsx(w,{inputId:"reviewer-filter",placeholder:"Search for a username or team name",defaultValue:h,onChange:m})]})]}),e.jsx(H,{nameOrID:d,relatedProjectId:o,reviewerId:h,onCreateNewAccessRequirementClicked:t,typeFilter:A,onTypeFilterChange:f})]})}try{Q.displayName="AccessRequirementDashboard",Q.__docgenInfo={description:"",displayName:"AccessRequirementDashboard",props:{onCreateNewAccessRequirementClicked:{defaultValue:null,description:"",name:"onCreateNewAccessRequirementClicked",required:!1,type:{name:"(() => void)"}}}}}catch{}const z=r=>{if(r&&r!==X.toString())return r},Sr=()=>{const[r,a]=n.useState(),[t,s]=n.useState(),[l,c]=n.useState(),[d,S]=n.useState({accessRequirementId:r,accessorId:t,reviewerId:l,showRequesters:!0,submissionState:Z.SUBMITTED}),o=$(),u=K(),h=500;n.useEffect(()=>{(()=>{const E=new URLSearchParams(o.search);a(E.get("accessRequirementId")??void 0),s(E.get("accessorId")??void 0),c(E.get("reviewerId")??void 0)})()},[o.search]);const i=n.useCallback(f=>{s(f||void 0)},[]),A=n.useCallback(f=>{c(z(f))},[]);return me(()=>{((E,_,C)=>{const m=new URLSearchParams(J({accessRequirementId:E,accessorId:_,reviewerId:C},p=>p===void 0||p===""));u.replace({pathname:o.pathname,search:m.toString()})})(r,t,l),S({accessRequirementId:r,accessorId:t,reviewerId:l,showRequesters:!0,submissionState:Z.SUBMITTED})},[r,t,l,u,o.pathname],h),e.jsxs("div",{className:"AccessSubmissionDashboard",children:[e.jsxs("div",{className:"InputPanel",children:[e.jsxs("div",{children:[e.jsx(R,{component:"label",variant:"smallText2",htmlFor:"arId-filter",children:"Filter by Access Requirement Name"}),e.jsx(ve,{inputId:"arId-filter",onChange:a,placeholder:"Search for an Access Requirement Name "})]}),e.jsxs("div",{children:[e.jsx(R,{component:"label",variant:"smallText2",htmlFor:"requester-filter",children:"Filter by Requester"}),e.jsx(w,{inputId:"requester-filter",placeholder:"Search for a user name",defaultValue:t,onChange:i,typeFilter:pe.USERS_ONLY})]}),e.jsxs("div",{children:[e.jsx(R,{component:"label",variant:"smallText2",htmlFor:"reviewer-filter",children:"Filter by Reviewer"}),e.jsx(w,{inputId:"reviewer-filter",placeholder:"Search for a user or team name",defaultValue:l,onChange:A})]})]}),e.jsx(R,{variant:"headline3",children:"Access Request Submissions"}),e.jsx(F,{...d})]})};try{z.displayName="getReviewerFilterID",z.__docgenInfo={description:"",displayName:"getReviewerFilterID",props:{}}}catch{}function V(r){const{href:a,children:t,icon:s}=r;return e.jsxs(ge,{className:"Tab",role:"tab",to:a,children:[e.jsx(Le,{icon:s,sx:{paddingRight:"0.2rem"}}),e.jsx(R,{variant:"buttonLink",children:t})]})}function W(r){const{routerBaseName:a="DataAccessManagement:default",useMemoryRouter:t=!1}=r,{data:s,isLoading:l}=ce(),c=s==null?void 0:s.isACTMember,d=(s==null?void 0:s.isACTMember)||(s==null?void 0:s.isARReviewer),S=n.useCallback(o=>t?e.jsx(qe,{...o}):e.jsx(be,{...o}),[t]);return l?e.jsx(U,{size:50}):e.jsx(S,{basename:a,children:e.jsxs("div",{className:"ReviewerDashboard",children:[e.jsxs("div",{className:"Tabs",role:"tablist",children:[c&&e.jsx(V,{href:"/AccessRequirements",icon:"accessClosed",children:"Access Requirements"}),d&&e.jsx(V,{href:"/Submissions",icon:"discussion",children:"Submissions"}),d&&e.jsx(V,{href:"/UserAccessHistory",icon:"history",children:"User Access History"})]}),e.jsx("div",{className:"TabContentContainer",children:e.jsx(Oe,{children:e.jsxs(we,{children:[c&&e.jsx(P,{path:"/AccessRequirements",children:e.jsx(Q,{})}),d&&[e.jsxs(P,{exact:!0,path:"/Submissions",children:[!c&&e.jsx(Ye,{name:"DataAccessManagement",title:"Getting Started With Data Access Management",text:"When someone requests access to data, that request will show up here. Clicking on the Request ID will take you to a page where you can review the request.",sx:{margin:"-20px -30px 20px -30px",width:"auto"}}),e.jsx(Sr,{})]},"/Submissions"),e.jsx(P,{path:"/Submissions/:id",children:e.jsx(Er,{})},"/Submissions/:id")],e.jsx(P,{exact:!0,path:"/UserAccessHistory",children:e.jsx(cr,{})})]})})})]})})}function Er(){const{id:r}=Me();return e.jsx(or,{submissionId:r})}try{W.displayName="ReviewerDashboard",W.__docgenInfo={description:"",displayName:"ReviewerDashboard",props:{routerBaseName:{defaultValue:null,description:"Used to determine the base path for the component. Default is DataAccessManagement:default",name:"routerBaseName",required:!1,type:{name:"string"}},useMemoryRouter:{defaultValue:null,description:"If true use a MemoryRouter, which prevents the browser URL from updating. For demo purposes only.",name:"useMemoryRouter",required:!1,type:{name:"boolean"}}}}}catch{}const so={title:"Governance/ReviewerDashboard",component:W},O={args:{useMemoryRouter:!0,routerBaseName:"/Other Components/ReviewerDashboard"}};var ie,oe,ne;O.parameters={...O.parameters,docs:{...(ie=O.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    useMemoryRouter: true,
    routerBaseName: '/Other Components/ReviewerDashboard'
  }
}`,...(ne=(oe=O.parameters)==null?void 0:oe.docs)==null?void 0:ne.source}}};const ao=["Demo"];export{O as Demo,ao as __namedExportsOrder,so as default};
