import{r as d}from"./index-BUsvr3pR.js";import{u as l}from"./index-C_D488zC.js";import{i as m}from"./const-BP60AzNb.js";let o;function v(){if(!m)return;if(o)return o;const e=new Map,c=new ResizeObserver(r=>{for(const n of r){const s=e.get(n.target);if(!(s===void 0||s.size===0))for(const i of s)setTimeout(()=>{i(n)},0)}});return o={observer:c,subscribe(r,n){let s=e.get(r);s||(s=new Set,e.set(r,s),c.observe(r)),s.add(n)},unsubscribe(r,n){const s=e.get(r);s&&(s.delete(n),s.size===0&&(e.delete(r),c.unobserve(r)))}},o}function R(e,c,r=!0){const n=r&&v(),s=l(c),i=e&&"current"in e?e.current:e;d.useEffect(()=>{const t=e&&"current"in e?e.current:e;if(!n||!t)return;let u=!0;const b=(...f)=>{u&&s.current(...f)};return n.subscribe(t,b),()=>{u=!1,n.unsubscribe(t,b)}},[i,n])}export{R as u};
