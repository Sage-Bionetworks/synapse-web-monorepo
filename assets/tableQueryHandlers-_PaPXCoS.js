import{g as r,B as u,aK as T,aL as y}from"./useFiles-Bmp6q2a5.js";import{l}from"./index-D3ZXqs7N.js";import{g as c}from"./asyncJobHandlers-BrcMUpEv.js";import{n as p,y as E,l as f,m as S,z as _,j as N,f as R,i as I}from"./SynapseConstants-DJnXKVNq.js";import{B as D}from"./BasicMockedCrudService-B9-MBExs.js";import{o as g}from"./omit-3ca3Q2CL.js";import{c as m}from"./cloneDeep-BBUYS9nA.js";import{u as U}from"./uniqueId-BgIHj4wm.js";const A=[{name:"id",columnType:"ENTITYID",id:"81721"},{name:"name",columnType:"STRING",id:"81722",maximumSize:256},{name:"description",columnType:"STRING",id:"87941",maximumSize:1e3},{name:"createdOn",columnType:"DATE",facetType:"range",id:"81723"},{name:"createdBy",columnType:"USERID",facetType:"enumeration",id:"81724"},{name:"etag",columnType:"STRING",id:"81725",maximumSize:36},{name:"modifiedOn",columnType:"DATE",facetType:"range",id:"81726"},{name:"modifiedBy",columnType:"USERID",facetType:"enumeration",id:"81727"},{name:"type",columnType:"STRING",facetType:"enumeration",id:"196992",maximumSize:20},{name:"currentVersion",columnType:"INTEGER",id:"81729"},{name:"parentId",columnType:"ENTITYID",facetType:"enumeration",id:"81730"},{name:"benefactorId",columnType:"ENTITYID",id:"81731"},{name:"projectId",columnType:"ENTITYID",facetType:"enumeration",id:"81732"},{name:"dataFileHandleId",columnType:"FILEHANDLEID",id:"81733"},{name:"dataFileName",columnType:"STRING",id:"199088",maximumSize:256},{name:"dataFileSizeBytes",columnType:"INTEGER",id:"112368"},{name:"dataFileMD5Hex",columnType:"STRING",id:"112369",maximumSize:100},{name:"dataFileConcreteType",columnType:"STRING",facetType:"enumeration",id:"196995",maximumSize:65},{name:"dataFileBucket",columnType:"STRING",facetType:"enumeration",id:"196996",maximumSize:100},{name:"dataFileKey",columnType:"STRING",id:"184972",maximumSize:700}],M={[I]:"queryResult",[R]:"queryCount",[N]:"selectColumns",[_]:"maxRowsPerPage",[S]:"columnModels",[f]:"facets",[E]:"sumFileSizes",[p]:"lastUpdatedOn"},i=new D({idField:"id",autoGenerateId:!0});function B(e,t){const n=m(e);return Object.entries(M).forEach(([a,o])=>{t&parseInt(a)||delete n[o]}),n}function O(e,t=25,n=0){var o;const a=m(e);return(o=a.queryResult)!=null&&o.queryResults.rows&&(a.queryResult.queryResults.rows=a.queryResult.queryResults.rows.slice(n,n+t)),a}function L(e,t){let n=t;return n=B(n,e.partMask),n=O(n,e.query.limit,e.query.offset),n}function d(e){return g(m(e),["limit","offset"])}function F(e){const t=i.getOneByField("query",e.query);t?i.update(t.id,{...e,id:t.id}):i.create(e)}function C(e){const t=d(e.query),n=i.getOneByField("query",t);if(n==null)throw new Error(`mockTableQueryService does not have a query result for the given query:
${JSON.stringify(e,null,2)}`);return L(e,n.result)}function x(e,t){F({query:d(e),result:t})}function z(e=r(u.REPO_ENDPOINT),t=":id"){return c(y(t),n=>T(t,n),n=>C(n),e)}function K(e,t=r(u.REPO_ENDPOINT)){return c("/repo/v1/column/view/scope/async/start",n=>`/repo/v1/column/view/scope/async/get/${n}`,e,t)}function k(e=r(u.REPO_ENDPOINT)){return[l.rest.get(`${e}/repo/v1/column/tableview/defaults`,async(t,n,a)=>n(a.status(200),a.json({concreteType:"org.sagebionetworks.repo.model.table.ColumnModel",list:A})))]}function h(e=r(u.REPO_ENDPOINT)){return l.rest.post(`${e}/repo/v1/column/batch`,async(t,n,a)=>{const{list:o}=await t.json();return o.forEach(s=>{s.id||(s.id=U())}),n(a.status(201),a.json({concreteType:"org.sagebionetworks.repo.model.table.ColumnModel",list:o}))})}export{k as a,K as b,h as c,A as d,z as g,x as r};
