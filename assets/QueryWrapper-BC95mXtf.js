import{j as y}from"./jsx-runtime-BFXWMKZc.js";import{g as W}from"./VerificationSubmission-CMrrYimb.js";import{ah as Ee,aM as J,bQ as Se,bR as Ne,l as Pe,bS as De,bT as _e,bU as ce,bV as de,bW as ve,bX as Ae,bY as ke}from"./useFiles-08ax02E-.js";import{s as Oe,F as Ue,y as ze,U as Me,z as Le,i as Qe}from"./SynapseConstants-DmRaMcRv.js";import{r as u}from"./index-D_pyoJeF.js";import{N as me,O as ye,z as fe}from"./StringUtils-Bdqa-HwM.js";import"./OrientationBanner-CkWPScZc.js";import{u as je}from"./unCamelCase-ZiU_emRy.js";import{u as z,n as Be}from"./useQuery-DpIURBis.js";import{b as Re,a as Ke,u as We}from"./use-deep-compare-effect.esm-DadJV_7L.js";import{u as le,a as He}from"./QueryContext-BORdsNU2.js";import{N as Je}from"./NoSearchResults-BLpWa0Ux.js";import{s as Ye}from"./NoData-K7kRZP0k.js";import{p as Ge,b as $e}from"./SqlFunctions-DPgti-mT.js";import{c as g}from"./cloneDeep-mbs_mYf7.js";import{i as V}from"./isEqual-DKQ9N4pb.js";import{u as Xe}from"./index-CHVqCMN7.js";import{C as Ze}from"./ConfirmationDialog-BbaDm7E1.js";import{o as et}from"./omit-DMFeLOtw.js";import{c as tt,a as nt,i as rt,r as st,s as at}from"./TableRowSelectionState-BhWXTjlB.js";import{u as ot}from"./useEntity-BhaYqTxh.js";import{c as ut}from"./SynapseTableUtils-D2Sfzdn7.js";import{P as lt,d as te}from"./react-CCDHJzMi.js";function pe(e,n){return t=>{typeof t=="function"?e(s=>{const o=t(s);return o&&n(!1),o}):t?(e(!0),n(!1)):e(!1)}}function it(e,n){const[t,s]=u.useState(e),[o,r]=u.useState(n),l=u.useMemo(()=>pe(s,r),[]),i=u.useMemo(()=>pe(r,s),[]);return[t,l,o,i]}function he(e){const{queryMetadataQueryOptions:n}=le(),t={...n,...e};return z(t)}function cn(e){const{queryMetadataQueryOptions:n}=le(),t={...n,...e};return Ee(t)}const ct=()=>{try{return JSON.parse(sessionStorage.getItem(Le)||"")}catch{return[]}},dt=()=>{try{return JSON.parse(sessionStorage.getItem(Me)||"")}catch{return[]}},mt=()=>{try{return JSON.parse(sessionStorage.getItem(ze)||"")}catch{return[]}},yt=e=>{const n=ct().find(t=>t.id===e);return(n==null?void 0:n.name)??e},ft=e=>{const n=mt().find(t=>t.id===e);return(n==null?void 0:n.name)||e},pt=e=>{const n=dt().find(t=>t.ownerId===e);return(n==null?void 0:n.userName)||e},ht=(e,n)=>{if(e===Oe)return Ue;switch(n){case W.ENTITYID:case W.ENTITYID_LIST:return yt(e);case W.USERID:case W.USERID_LIST:return pt(e);case W.EVALUATIONID:return ft(e);default:return e}};var H=(e=>(e.INTERACTIVE="INTERACTIVE",e.STATIC="STATIC",e.HIDDEN="HIDDEN",e))(H||{});function Ct(){return y.jsxs("div",{className:"text-center",children:[y.jsx(Je,{className:"no-search-results",display:"block",height:"181px",sx:{pt:"40px",pb:"10px"}}),y.jsx("h4",{children:"No Matching Results"}),y.jsx("p",{children:"Try checking the spelling or removing filters."})]})}function gt(){return y.jsxs("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[Ye,y.jsx("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]})}function qt(){return y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),y.jsx("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}function oe(e){const{type:n,hasResettableFilters:t}=e;switch(n){case H.INTERACTIVE:return t?y.jsx(Ct,{}):y.jsx(gt,{});case H.HIDDEN:return y.jsx(y.Fragment,{});case H.STATIC:default:return y.jsx(qt,{})}}try{oe.displayName="NoContentPlaceholder",oe.__docgenInfo={description:"",displayName:"NoContentPlaceholder",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},hasResettableFilters:{defaultValue:null,description:"",name:"hasResettableFilters",required:!0,type:{name:"boolean"}}}}}catch{}const Y=u.createContext(void 0),ue=({children:e,queryVisualizationContext:n})=>y.jsx(Y.Provider,{value:n,children:e});function dn(){const e=u.useContext(Y);if(e===void 0)throw new Error("useQueryVisualizationContext must be used within a QueryVisualizationWrapper");return e}const Ce=Y.Consumer;try{Y.displayName="QueryVisualizationContext",Y.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryVisualizationContext",props:{}}}catch{}try{ue.displayName="QueryVisualizationContextProvider",ue.__docgenInfo={description:"Provides fields and functions related to visualizing a Synapse table query. For actual query data, see QueryContextProvider.",displayName:"QueryVisualizationContextProvider",props:{queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{Ce.displayName="QueryVisualizationContextConsumer",Ce.__docgenInfo={description:"",displayName:"QueryVisualizationContextConsumer",props:{}}}catch{}const bt=[];function ge(e){const{noContentPlaceholderType:n=H.INTERACTIVE,defaultShowSearchBar:t=!1,defaultShowPlots:s=!0,hideCopyToClipboard:o=!1,hideSearchBarControl:r=!1,unitDescription:l="result",helpConfiguration:i,hasCustomPlots:p=!1,visibleColumnCount:d=1/0,enabledExternalAnalysisPlatforms:a=bt}=e,c=u.useMemo(()=>e.columnAliases??{},[e.columnAliases]),{getCurrentQueryRequest:b,hasFacetedSelectColumn:q,hasResettableFilters:I,rowDataQueryOptions:M}=le(),{data:S}=he(),{data:L}=z({...M,select:f=>{var h,R;return(R=(h=f.responseBody)==null?void 0:h.queryResult)==null?void 0:R.queryResults.headers},placeholderData:f=>f}),{data:F}=he({select:f=>{var h;return(h=f.responseBody)==null?void 0:h.selectColumns},placeholderData:f=>f}),x=Re(L??F??[]),[D,Q]=u.useState(!1),[T,j]=u.useState(s),[_,B]=u.useState(!o),[v,K]=u.useState(!0),[A,k,O,m]=it(t&&!r,!1),[C,w]=u.useState(!1),[U,G]=u.useState([]),ne=u.useMemo(()=>b(),[b]);u.useEffect(()=>{G(x.slice(0,d).map(f=>f.name))},[x,ne.query.sql,d]);const $=u.useCallback((f,h)=>{var E;const R=localStorage.getItem("force-display-original-column-names")==="true";if(!f||R&&!h)return f;if(c[f])return c[f];if(h){const N=(E=S==null?void 0:S.columnModels)==null?void 0:E.find(P=>P.name===f);if(N!=null&&N.jsonSubColumns){const P=N.jsonSubColumns.find(ee=>ee.jsonPath===h);if(P)return P.name}}return je(f)},[c,S==null?void 0:S.columnModels]),X=u.useCallback((f,h)=>{if(Array.isArray(i)){const R=i.find(E=>E.columnName===f&&E.jsonPath===h);return R==null?void 0:R.helpText}},[i]),Z=u.useCallback(()=>y.jsx(oe,{type:n,hasResettableFilters:I}),[n,I]),re=u.useMemo(()=>({columnsToShowInTable:U,setColumnsToShowInTable:G,rgbIndex:e.rgbIndex,unitDescription:l,showLastUpdatedOn:e.showLastUpdatedOn,getColumnDisplayName:$,getDisplayValue:ht,getHelpText:X,NoContentPlaceholder:Z,isShowingExportToAnalysisPlatformModal:C,setIsShowingExportToAnalysisPlatformModal:w,showFacetFilter:q?v:!1,setShowFacetFilter:K,hideSearchBarControl:r,showSearchBar:A,setShowSearchBar:k,showDownloadConfirmation:O,setShowDownloadConfirmation:m,showSqlEditor:D,setShowSqlEditor:Q,showPlots:p||q?T:!1,setShowPlots:j,showCopyToClipboard:_,setShowCopyToClipboard:B,enabledExternalAnalysisPlatforms:a}),[Z,$,X,q,C,e.rgbIndex,e.showLastUpdatedOn,m,k,_,O,v,T,A,D,l,U,p,a]),{children:se}=e;return y.jsx(ue,{queryVisualizationContext:re,children:se})}try{ge.displayName="QueryVisualizationWrapper",ge.__docgenInfo={description:`QueryVisualizationWrapper manages UI state for components that query tables in Synapse. That state can be accessed
or updated using QueryVisualizationContext. A QueryVisualizationWrapper must be used within a QueryWrapper.`,displayName:"QueryVisualizationWrapper",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:'The singular word to use to describe a what a row represents (e.g. "file"). Defaults to "result"',name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},hiddenColumns:{defaultValue:null,description:"",name:"hiddenColumns",required:!1,type:{name:"string[]"}},defaultShowPlots:{defaultValue:null,description:"",name:"defaultShowPlots",required:!1,type:{name:"boolean"}},hideCopyToClipboard:{defaultValue:null,description:"",name:"hideCopyToClipboard",required:!1,type:{name:"boolean"}},hideSearchBarControl:{defaultValue:null,description:"",name:"hideSearchBarControl",required:!1,type:{name:"boolean"}},defaultShowSearchBar:{defaultValue:null,description:"",name:"defaultShowSearchBar",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},rowSelectionPrimaryKey:{defaultValue:null,description:`The set of columns that defines a uniqueness constraint on the table for the purposes of filtering based on row selection.
Note that Synapse tables have no internal concept of a primary key.`,name:"rowSelectionPrimaryKey",required:!1,type:{name:"string[]"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:`Look for additional filters using the given key.  If not provided, the entity ID will be used.
@deprecated - configure the filter before passing a query`,name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}},helpConfiguration:{defaultValue:null,description:"Configuration to add a help popover to each corresponding column header",name:"helpConfiguration",required:!1,type:{name:"ColumnOrFacetHelpConfig[]"}},hasCustomPlots:{defaultValue:null,description:"",name:"hasCustomPlots",required:!1,type:{name:"boolean"}},enabledExternalAnalysisPlatforms:{defaultValue:{value:"[] (no platforms are enabled)"},description:"The set of external analysis platform to which the UI will support exporting data.",name:"enabledExternalAnalysisPlatforms",required:!1,type:{name:"ExternalAnalysisPlatform[]"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}}}}}catch{}function Ve(e,n){return`${e}${n}`}function qe(e,n,t){const s=n!==void 0?Ve(e,n):e,o=new URLSearchParams(window.location.search);t?o.set(s,t):o.delete(s);const r=o.toString();window.history.replaceState(null,"",window.location.pathname+(Array.from(o).length>0?`?${r.toString()}`:""))}function St(e,n){const t=Ve(e,n),s=new URLSearchParams(window.location.search).get(t);let o;if(s){const r=JSON.parse(s);r.sql&&(o={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:Ge(r.sql),query:r})}return o}function Qt(e,n){const t=g(n),{queryOrUpdater:s}=e;return typeof s=="function"?s(t):s}function Rt(e,n){const t=g(n),{facet:s,value:o}=e,r=t.query.selectedFacets??[],l=r.find(i=>i.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnValuesRequest"&&J(s,i));return l?l.facetValues.includes(o)||l.facetValues.push(o):r.push({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:s.columnName,jsonPath:s.jsonPath,facetValues:[o]}),t.query.selectedFacets=r,V(t,n)||(t.query.offset=0),t}function Vt(e,n){const t=g(n),{facetsToRemove:s}=e,o=Array.isArray(s);return t.query.selectedFacets=(t.query.selectedFacets??[]).filter(r=>o?!s.find(l=>J(l,r)):!J(s,r)),V(t,n)||(t.query.offset=0),t}function wt(e,n){const t=g(n),{facet:s,min:o,max:r}=e,l=g(t.query.selectedFacets??[]),i=l.find(p=>p.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnRangeRequest"&&J(s,p));return i&&o==null&&r==null?l.splice(l.indexOf(i),1):i?(i.min=o,i.max=r):l.push({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnRangeRequest",columnName:s.columnName,jsonPath:s.jsonPath,min:o,max:r}),t.query.selectedFacets=l,V(t,n)||(t.query.offset=0),t}function Ft(e,n){const t=g(n),{facet:s,value:o}=e;return t.query.selectedFacets=(t.query.selectedFacets??[]).map(r=>(fe(r)&&J(s,r)&&(r.facetValues=r.facetValues.filter(l=>l!==o)),r)).filter(r=>fe(r)?Array.isArray(r.facetValues)&&r.facetValues.length>0:!0),V(t,n)||(t.query.offset=0),t}function It(e,n){const t=g(n),{queryFilter:s}=e;return t.query.additionalFilters=(t.query.additionalFilters??[]).filter(o=>!V(o,s)),V(t,n)||(t.query.offset=0),t}function xt(e,n){const t=g(n),{queryFilter:s,value:o}=e;return t.query.additionalFilters=(t.query.additionalFilters??[]).map(r=>((me(r)||ye(r))&&V(r,s)&&(r.values=r.values.filter(l=>l!==o)),r)).filter(r=>me(r)||ye(r)?Array.isArray(r.values)&&r.values.length>0:!0),V(t,n)||(t.query.offset=0),t}function Tt(e,n){const t=g(n),{pageSize:s}=e;return t.query.limit=s,t}function Et(e,n){const t=g(n),{pageNumber:s}=e,o=n.query.limit??Qe;return t.query.offset=(s-1)*o,t}function Nt(e,n,t){const[s,o]=u.useState(0),[r,l]=u.useState(!1),[i,p]=u.useReducer((d,a)=>{let c=d.nextQueryRequest;switch(a.type){case"resetDebounce":return o(q=>q+1),d;case"setQuery":{c=Qt(a,d.nextQueryRequest);break}case"addValueToSelectedFacet":{c=Rt(a,d.nextQueryRequest);break}case"removeSelectedFacet":{c=Vt(a,d.nextQueryRequest);break}case"setRangeFacetValue":{c=wt(a,d.nextQueryRequest);break}case"removeValueFromSelectedFacet":{c=Ft(a,d.nextQueryRequest);break}case"removeQueryFilter":{c=It(a,d.nextQueryRequest);break}case"removeValueFromQueryFilter":{c=xt(a,d.nextQueryRequest);break}case"setPageSize":{c=Tt(a,d.nextQueryRequest);break}case"goToPage":{c=Et(a,d.nextQueryRequest);break}case"resetQuery":{c=e;break}case"cancelChanges":case"resetUncommittedChanges":{c=d.currentQueryRequest;break}case"confirmChanges":case"commitChanges":{c=g(d.nextQueryRequest);break}}c.query=Se(c.query);const b=n&&!Ne(d.currentQueryRequest.query,c.query);if(a.commitOptions&&"noCommit"in a.commitOptions||b&&a.type!=="confirmChanges"&&a.type!=="cancelChanges")return{currentQueryRequest:d.currentQueryRequest,nextQueryRequest:c,isConfirmingChange:b};if(a.commitOptions&&"debounce"in a.commitOptions)return l(!0),{currentQueryRequest:d.currentQueryRequest,nextQueryRequest:c,isConfirmingChange:b};if(l(!1),t&&!V(d.currentQueryRequest,c)){const q=JSON.stringify(c.query);t(q)}return{currentQueryRequest:c,nextQueryRequest:c,isConfirmingChange:!1}},{currentQueryRequest:e,nextQueryRequest:e,isConfirmingChange:!1});return Xe(()=>{r&&(p({type:"commitChanges"}),l(!1))},[i.nextQueryRequest,r,l,s],Pt),u.useMemo(()=>({currentQueryRequest:i.currentQueryRequest,nextQueryRequest:i.nextQueryRequest,isConfirmingChange:i.isConfirmingChange,dispatch:p}),[i.currentQueryRequest,i.isConfirmingChange,i.nextQueryRequest])}const Pt=750;function Dt(e,n,t,s,o){u.useEffect(()=>{if(e){const r=St("QueryWrapper",n);r&&r.query&&t(l=>({...l,...r,query:{...l.query,...r.query}}))}},[n]),u.useEffect(()=>{if(e)if(V(s,o))qe("QueryWrapper",n,null);else{const r=JSON.stringify(o.query);qe("QueryWrapper",n,r)}},[n,o,s,e])}function _t(e){const{initQueryRequest:n,componentIndex:t=0,shouldDeepLink:s=!1,onQueryChange:o,requireConfirmationOnChange:r=!1}=e,l=u.useMemo(()=>{const m=g(n);return m.query=Se(m.query),m},[n]),{currentQueryRequest:i,nextQueryRequest:p,isConfirmingChange:d,dispatch:a}=Nt(l,r,o),c=u.useCallback(()=>{a({type:"confirmChanges"})},[a]),b=u.useCallback(()=>g(i),[i]),q=u.useCallback(()=>g(l),[l]),I=u.useCallback((m,C)=>{a({type:"setQuery",queryOrUpdater:m,commitOptions:C})},[a]);Dt(s,t,I,l,i);const M=u.useCallback(()=>{a({type:"cancelChanges"})},[a]),{entityId:S,versionNumber:L}=u.useMemo(()=>$e(i.query.sql),[i.query.sql]),F=i.query.limit??Qe,x=Math.ceil(((i.query.offset??0)+Number(F))/F),D=u.useCallback(m=>{a({type:"setPageSize",pageSize:m})},[a]),Q=u.useCallback(m=>{a({type:"goToPage",pageNumber:m})},[a]),T=u.useCallback(()=>{a({type:"resetQuery"})},[a]);Ke(()=>{i!=l&&T()},[l]);const j=u.useCallback((m,C,w)=>{a({type:"addValueToSelectedFacet",facet:m,value:C,commitOptions:w})},[a]),_=u.useCallback((m,C,w,U)=>{a({type:"setRangeFacetValue",facet:m,min:C,max:w,commitOptions:U})},[a]),B=u.useCallback(m=>{a({type:"removeSelectedFacet",facetsToRemove:m})},[a]),v=u.useCallback((m,C,w)=>{a({type:"removeValueFromSelectedFacet",facet:m,value:C,commitOptions:w})},[a]),K=u.useCallback(m=>{a({type:"removeQueryFilter",queryFilter:m})},[a]),A=u.useCallback((m,C)=>{a({type:"removeValueFromQueryFilter",queryFilter:m,value:C})},[a]),k=u.useCallback(()=>{a({type:"commitChanges"})},[a]),O=u.useCallback(()=>{a({type:"resetDebounce"})},[a]);return{entityId:S,commitChanges:k,resetDebounceTimer:O,currentQueryRequest:i,nextQueryRequest:p,versionNumber:L,getInitQueryRequest:q,getCurrentQueryRequest:b,setQuery:I,pageSize:F,currentPage:x,setPageSize:D,goToPage:Q,resetQuery:T,removeSelectedFacet:B,removeValueFromSelectedFacet:v,removeQueryFilter:K,removeValueFromQueryFilter:A,isConfirmingChange:d,onConfirmChange:c,onCancelChange:M,addValueToSelectedFacet:j,setRangeFacetValue:_}}function vt(e,n,t,s){const{rowDataRequest:o,queryMetadataRequest:r}=De(e),l={...de,queryKey:t.getEntityTableQueryResultWithAsyncStatusQueryKey(o,!1),queryFn:()=>ce(o,s),select:d=>{var a,c;return(c=(a=d.responseBody)==null?void 0:a.queryResult)==null?void 0:c.queryResults}},i={..._e(o,t,s)},p={...de,queryKey:t.getEntityTableQueryResultWithAsyncStatusQueryKey(r,!1),queryFn:()=>ce(r,s),select:d=>et(ve(d.responseBody,n),"queryResults")};return{rowDataQueryOptions:l,rowDataInfiniteQueryOptions:i,queryMetadataQueryOptions:p}}function we(e,n){const{keyFactory:t,accessToken:s}=Pe();return u.useMemo(()=>vt(e,n,t,s),[t,s,e,n])}function At(e){const{rowSelectionPrimaryKeyFromProps:n,entityId:t,versionNumber:s,queryMetadataQueryOptions:o}=e,{data:r}=ot(t,s),{data:l}=z(o);return u.useMemo(()=>{if(n)return n;if(r&&(l!=null&&l.columnModels))return ut(r,l.columnModels)},[n,r,l==null?void 0:l.columnModels])}function kt(e){const{data:n,isLoading:t}=z(e);return n?Ae(n.facets,n.selectColumns):t}function Ot(e){const{queryBundleRequest:n,onChange:t}=e,{rowDataQueryOptions:s,queryMetadataQueryOptions:o}=we(n),{data:r,isLoading:l}=z({...s,select:c=>c.responseBody}),{data:i,isLoading:p}=z(o),[d,a]=u.useState();u.useEffect(()=>{r&&i&&!l&&!p&&a({...i,...r})},[i,p,r,l]),We(()=>{d&&t&&t(d)},[d,t])}function Ut(e){const{initQueryRequest:n,onQueryChange:t,onQueryResultBundleChange:s=Be,lockedColumn:o,componentIndex:r,shouldDeepLink:l,onViewSharingSettingsClicked:i,isRowSelectionVisible:p=!1,isRowSelectionUIFloating:d=!0,rowSelectionPrimaryKey:a,isInfinite:c=!1,combineRangeFacetConfig:b,fileIdColumnName:q,fileVersionColumnName:I,fileNameColumnName:M}=e,S=tt(),L=_t({initQueryRequest:n,shouldDeepLink:l,componentIndex:r,onQueryChange:t,requireConfirmationOnChange:S}),{entityId:F,versionNumber:x,getInitQueryRequest:D,getCurrentQueryRequest:Q,setQuery:T,resetQuery:j,removeSelectedFacet:_,removeValueFromSelectedFacet:B,removeQueryFilter:v,removeValueFromQueryFilter:K,onConfirmChange:A,isConfirmingChange:k,onCancelChange:O,nextQueryRequest:m,currentQueryRequest:C,addValueToSelectedFacet:w,setRangeFacetValue:U,resetDebounceTimer:G,currentPage:ne,goToPage:$,pageSize:X,setPageSize:Z}=L,re=u.useMemo(()=>Q(),[Q]),{rowDataQueryOptions:se,rowDataInfiniteQueryOptions:f,queryMetadataQueryOptions:h}=we(re,o),R=kt(h),E=u.useMemo(()=>{const ae=Q();return ke(ae.query,o)},[Q,o]),N=te(nt);u.useEffect(()=>{N(p)},[p,N]);const P=te(rt);u.useEffect(()=>{P(d)},[d,P]);const ee=At({entityId:F,versionNumber:x,rowSelectionPrimaryKeyFromProps:a,queryMetadataQueryOptions:h}),ie=te(st);u.useEffect(()=>{ie(ee)},[ee,ie]);const Fe=te(at),Ie=u.useCallback(ae=>s(JSON.stringify(ae)),[s]);Ot({queryBundleRequest:Q(),onChange:Ie});const xe=Re({isInfinite:c,entityId:F,versionNumber:x,nextQueryRequest:m,currentQueryRequest:C,getCurrentQueryRequest:Q,getInitQueryRequest:D,executeQueryRequest:T,hasFacetedSelectColumn:R,hasResettableFilters:E,removeSelectedFacet:_,removeValueFromSelectedFacet:B,resetQuery:j,removeQueryFilter:v,removeValueFromQueryFilter:K,onViewSharingSettingsClicked:i,addValueToSelectedFacet:w,combineRangeFacetConfig:b,setRangeFacetValue:U,resetDebounceTimer:G,rowDataQueryOptions:se,rowDataInfiniteQueryOptions:f,queryMetadataQueryOptions:h,currentPage:ne,goToPage:$,pageSize:X,setPageSize:Z,lockedColumn:o,fileIdColumnName:q,fileVersionColumnName:I,fileNameColumnName:M}),{children:Te}=e;return y.jsxs(He,{queryContext:xe,children:[y.jsx(Ze,{open:k,title:"Change Query and Clear Selection?",content:"Changing the current query will cause your current selection to be lost. Are you sure you want to proceed?",confirmButtonProps:{children:"Clear Selection and Update Query"},onConfirm:()=>{Fe([]),A()},onCancel:()=>{O()}}),Te]})}function be(e){return y.jsx(lt,{children:y.jsx(Ut,{...e})})}try{be.displayName="QueryWrapper",be.__docgenInfo={description:"",displayName:"QueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"(newQueryJson: string) => void"}},onQueryResultBundleChange:{defaultValue:null,description:"Called when the query result rows change",name:"onQueryResultBundleChange",required:!1,type:{name:"(newQueryResultBundleJson: string) => void"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"(benefactorId: string) => void"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},rowSelectionPrimaryKey:{defaultValue:null,description:`The set of columns that defines a uniqueness constraint on the table for the purposes of filtering based on row selection.
Note that Synapse tables have no internal concept of a primary key.`,name:"rowSelectionPrimaryKey",required:!1,type:{name:"string[]"}},isRowSelectionUIFloating:{defaultValue:null,description:"By default, the row selection UI will float at the bottom of the viewport.  Set to false to make it inline",name:"isRowSelectionUIFloating",required:!1,type:{name:"boolean"}},isInfinite:{defaultValue:null,description:"",name:"isInfinite",required:!1,type:{name:"boolean"}},combineRangeFacetConfig:{defaultValue:null,description:"",name:"combineRangeFacetConfig",required:!1,type:{name:"CombineRangeFacetConfig"}},fileIdColumnName:{defaultValue:null,description:"If provided, will use the value in this column instead of the rowID for the access column, download column, etc",name:"fileIdColumnName",required:!1,type:{name:"string"}},fileNameColumnName:{defaultValue:null,description:"",name:"fileNameColumnName",required:!1,type:{name:"string"}},fileVersionColumnName:{defaultValue:null,description:"If provided, will use the value in this column instead of the row version number for the access column, download column, etc",name:"fileVersionColumnName",required:!1,type:{name:"string"}}}}}catch{}export{H as N,be as Q,ge as a,Ce as b,he as c,cn as d,vt as e,qt as f,Et as g,dn as u};
