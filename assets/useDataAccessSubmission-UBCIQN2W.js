import{l as r,S as i}from"./useFiles-DBKLnBhU.js";import"./VerificationSubmission-NmfK1W18.js";import"./StringUtils-Dsx1COFf.js";import{u as S}from"./useQuery-DZw2U2Bh.js";import{u as y}from"./QueryClientProvider-CRWXaDQK.js";import{u as o}from"./useMutation-DfXyzvsj.js";import{u as m}from"./useInfiniteQuery-BgfoUYrG.js";function d(e,a){const{accessToken:u,keyFactory:t}=r();return S({...a,queryKey:t.getDataAccessSubmissionByIdQueryKey(String(e.toString())),queryFn:()=>i.getSubmissionById(e,u)})}function Q(e,a){const{keyFactory:u,synapseClient:t}=r();return m({...a,queryKey:u.searchDataAccessSubmissionUserRequestsQueryKey(e),queryFn:s=>t.dataAccessServicesClient.postRepoV1DataAccessSubmissionUserRequests({userSubmissionSearchRequest:{...e,nextPageToken:s.pageParam}}),initialPageParam:void 0,getNextPageParam:s=>s.nextPageToken})}function k(e,a){const{accessToken:u,keyFactory:t}=r();return m({...a,queryKey:t.searchDataAccessSubmissionQueryKey(e),queryFn:async s=>await i.searchAccessSubmission({...e,nextPageToken:s.pageParam},u),initialPageParam:void 0,getNextPageParam:s=>s.nextPageToken})}function K(e){const a=y(),{accessToken:u,keyFactory:t}=r();return o({...e,mutationFn:s=>i.updateSubmissionStatus(s,u),onSuccess:async(s,c,n)=>{await a.invalidateQueries({queryKey:t.searchDataAccessSubmissionQueryKey()}),a.setQueryData(t.getDataAccessSubmissionByIdQueryKey(c.submissionId),s),e!=null&&e.onSuccess&&await e.onSuccess(s,c,n)}})}function D(e){const a=y(),{accessToken:u,keyFactory:t}=r();return o({...e,mutationFn:async({request:s,accessRequirementId:c})=>{if(s.subjectId==null||s.subjectType==null){const{subjects:n}=await i.getSubjects(u,c);s.subjectId=n[0].id,s.subjectType=n[0].type}return i.submitDataAccessRequest(s,u)},onSuccess:async(s,c,n)=>{await Promise.all([a.invalidateQueries({queryKey:t.getAccessRequirementStatusQueryKey(c.accessRequirementId)}),a.invalidateQueries({queryKey:t.getDataAccessSubmissionQueryKey()})]),e!=null&&e.onSuccess&&await e.onSuccess(s,c,n)}})}export{D as a,d as b,k as c,Q as d,K as u};
