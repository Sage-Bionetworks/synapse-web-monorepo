import{j as e}from"./jsx-runtime-D_zvdyIk.js";import"./useFiles-B-MOJFSh.js";import"./VerificationSubmission-OWkqLMYZ.js";import"./StringUtils-C5rFena9.js";import"./OrientationBanner-C0ehmwb7.js";import{r}from"./index-DEetYTfk.js";import{c as g}from"./MarkdownSynapse-C5XPmRnA.js";import{C as w}from"./ConfirmationDialog-mn3l6Kk7.js";import{D as x}from"./DialogBase-BfD3ZtqL.js";import{S as y}from"./LoadingScreen-c19m9cTC.js";import{M as N}from"./MarkdownEditor-B2BIk0P3.js";import{n as m}from"./useQuery-DM1NJ13Q.js";import{B as p}from"./Box-CKaaiV7a.js";import{B as S}from"./Button-BL_fp4Os.js";import{T as R}from"./TextField-BGg694UE.js";import{A as h}from"./Alert-_bV9OJzj.js";const k="Unsaved Changes",M="Any unsaved changes may be lost. Are you sure that you would like to navigate away from this editor?",j="Could not save your changes. It is recommended that you copy your version of the wiki text so that it is not lost. ";function I(l){const{open:E,ownerObjectId:v,ownerObjectType:A,wikiPage:a,onCancel:s=m,onSave:T=m}=l,[u,C]=r.useState(a.title),[o,f]=r.useState(a.markdown),[_,n]=r.useState(!1),d=()=>{a&&a.markdown!==o?n(!0):s()},{mutate:O,isPending:t,error:c}=g({onSuccess:()=>T()});return e.jsx(x,{open:E,onCancel:d,maxWidth:"xl",fullWidth:!0,title:"Edit Wiki Markdown",content:e.jsxs(e.Fragment,{children:[t&&e.jsx(y,{}),a&&e.jsxs(e.Fragment,{children:[a.parentWikiId&&e.jsx(R,{label:"Title",placeholder:"Title",fullWidth:!0,sx:{mb:2},value:u,onChange:i=>C(i.target.value)}),e.jsx(N,{text:o,setText:f}),e.jsx(w,{open:_,title:k,content:M,onCancel:()=>n(!1),onConfirm:()=>{n(!1),s()}})]}),c&&e.jsx(h,{severity:"error",children:j+c.reason})]}),actions:e.jsxs(p,{sx:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",width:"100%"},children:[e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(S,{variant:"outlined",disabled:t,onClick:d,children:"Cancel"}),e.jsx(S,{variant:"contained",color:"primary",disabled:t,onClick:()=>{if(a){const i={ownerObjectId:v,ownerObjectType:A,wikiPage:{...a,title:u,markdown:o}};O(i)}},children:t?"Saving...":"Save"})]}),!1]})})}try{I.displayName="WikiMarkdownEditor",I.__docgenInfo={description:"",displayName:"WikiMarkdownEditor",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},ownerObjectType:{defaultValue:null,description:"",name:"ownerObjectType",required:!0,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},ownerObjectId:{defaultValue:null,description:"",name:"ownerObjectId",required:!0,type:{name:"string"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPage"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"() => void"}}}}}catch{}export{I as W};
