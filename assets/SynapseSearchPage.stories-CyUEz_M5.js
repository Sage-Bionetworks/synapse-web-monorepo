import{ao as U,an as G,V as $,j as e,em as V,a1 as K,en as z,W as y,Y as Q,$ as H,a2 as W,g$ as J,r as g,eQ as X,c7 as Z,B as F,bs as ee,ai as re,jT as te,jU as oe,jV as se,jW as ae,jX as ne,jY as P}from"./iframe-BNuX63Gg.js";import{S as ie}from"./SynapseSearchResultsCard-nj9t7rTT.js";import{S as k}from"./Search-CFj-7-Xg.js";import{u as pe}from"./useSearch-hbpKO8hQ.js";import{I as ue}from"./InputAdornment-k3B2jUW5.js";import"./index-Chi_LkuB.js";import"./EntityIcon-2anmf3qi.js";import"./FavoriteButton-DtRXNcXU.js";import"./useFavorites-DpYmPHLX.js";import"./useInfiniteQuery-ETBFsHKX.js";import"./InfiniteQueryUtils-CKlRW-xB.js";import"./DropdownMenu-DSDsZe9U.js";import"./MenuItem-QgPCDudv.js";import"./ListItemIcon-DKCvFIfb.js";import"./ListItemText-BSnkaMEH.js";import"./ProgrammaticInstructionsModal-CzkuKcy_.js";import"./ConfirmationDialog-w4vciXYo.js";import"./DialogBase-CT_QCuKJ.js";import"./Close-DnYx9FSk.js";import"./HelpPopover-BxitrOSl.js";import"./MarkdownPopover-Cqj5utYy.js";import"./LightTooltip-B2c4vJ-r.js";import"./MarkdownSynapse-CllS4xt7.js";import"./SkeletonButton-Q_wdDaMT.js";import"./SkeletonInlineBlock-BaXmg-Ho.js";import"./SkeletonTable-B24h57Dq.js";import"./SkeletonParagraph-Bh-mJsSp.js";import"./Tabs-DRDjC5BE.js";import"./KeyboardArrowRight-B9iy6Wvj.js";import"./ModalDownload-Byen6ZTP.js";import"./index-Dx6win7Q.js";import"./enums-BwuVJP_H.js";import"./_baseIteratee-BV0dwrmo.js";import"./isString-CUEBVvBN.js";import"./_arrayReduce-CrxnWFSq.js";import"./_baseEach-CkrVvfzN.js";import"./uniq-yHAgUkeJ.js";import"./forEach-CWOCpBhE.js";import"./pickBy-MqZLkr5W.js";import"./Add-C1qeAPk3.js";import"./Grid-DJDQfnqx.js";import"./ListItem-Dn0E00jq.js";import"./listItemButtonClasses-Bekp9Iwc.js";import"./ArrowUpward-Dojuk04q.js";import"./ContentCopy-CaO3wKZo.js";import"./FormControlLabel-CzBjWoYC.js";import"./Checkbox-CM0Tixh-.js";import"./SwitchBase-DQ3y_lJs.js";import"./FormGroup-C7VwY6p-.js";import"./RadioGroup-k7eUTwGZ.js";import"./Radio-Bj8k1w4U.js";import"./Slider-DuO94Iaw.js";import"./visuallyHidden-Dan1xhjv.js";import"./index-C148XJoK.js";import"./SynapseFormRadioWidget-DpuvS2A5.js";import"./useDownloadList-j5MTmZ4N.js";import"./waitForAsyncResult-BAm47mPG.js";import"./useEntity-3KpRmlIl.js";import"./useQueries-92nI7yPX.js";import"./useSuspenseQuery-5mc94Bck.js";import"./useEntityBundle-DAdG-b2G.js";import"./DownloadConfirmationUtils-BmTpqOUM.js";import"./useHasAccess-2gBHipu-.js";import"./AccessIcon-CxeViy7L.js";import"./AccessRequirementList-Caj79SbZ.js";import"./useAccessRequirements-_0RQX0yI.js";import"./index-CsZzG_M-.js";import"./_baseOrderBy-IYGbYqmr.js";import"./_baseMap-8byQYP5F.js";import"./groupBy-BPs4Qcx5.js";import"./_createAggregator-ci3cIJOJ.js";import"./EntityLink-CqZYJN6J.js";import"./useGetEntityHeaders-DiFB5Zwy.js";import"./ErrorChip-vdAsbLyw.js";import"./Chip-Dbkz0kTt.js";import"./UserOrTeamBadge-C3ixqtAK.js";import"./UserBadge-DiHQ1_7F.js";import"./useUserBundle-BeMY8viL.js";import"./Card-o20fYyBP.js";import"./TeamBadge-bUN2zYg9.js";import"./UnmanagedACTAccessRequirementItem-DjdX9XKc.js";import"./RequirementItem-ClItA_DE.js";import"./LockTwoTone-BoBkoRh3.js";import"./UserSearchBoxV2-C0q7COL3.js";import"./useDebouncedEffect-BLdJbogE.js";import"./use-deep-compare-effect.esm-DawoZLOl.js";import"./without-EiPJ8F95.js";import"./Select-aab027f3.esm-CDKLzpoI.js";import"./defineProperty-Cp4flQ_6.js";import"./toPropertyKey-C9c9JG92.js";import"./ManagedACTAccessRequirementItemView-9JY3yyQK.js";import"./SelfSignAccessRequirementItem-BwznRGJj.js";import"./DataAccessRequestAccessorsFilesForm-C310saFV.js";import"./useDataAccessSubmission-CfsEb9-U.js";import"./UploadDocumentField-BCJ7BE_q.js";import"./FileUpload-CrUpKYwB.js";import"./ManagedACTAccessRequirementFormWikiWrapper-D9dWLBRB.js";import"./GridLegacy-VREhilKw.js";import"./ResearchProjectForm-SQx9Y8cz.js";import"./TextFieldWithWordLimit-Vn56dfCn.js";import"./AuthenticatedRequirement-CfuDGCh8.js";import"./CertificationRequirement-CullP4Sq.js";import"./TwoFactorAuthEnabledRequirement-MtWEPJiA.js";import"./ValidationRequirement-nuUJdDQH.js";function le(t,p){const{synapseClient:r,keyFactory:s}=U();return G({...p,queryKey:s.getSuggestionQueryKey(t),queryFn:()=>r.searchServicesClient.postRepoV1Suggestion({suggestionQuery:t})})}const ce=$(e.jsx("path",{d:"M7 6h10l-5.01 6.3zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"})),me="_didYouMeanContainer_1wx9h_1",de="_didYouMeanSuggestion_1wx9h_8",ge="_searchIcon_1wx9h_14",ye="_suggestionText_1wx9h_18",he="_didYouMeanCurrentlyShowing_1wx9h_23",xe="_didYouMeanArrowContainer_1wx9h_27",fe="_didYouMeanText_1wx9h_33",m={didYouMeanContainer:me,didYouMeanSuggestion:de,searchIcon:ge,suggestionText:ye,didYouMeanCurrentlyShowing:he,didYouMeanArrowContainer:xe,didYouMeanText:fe};function R({entityIds:t,dataCatalogEntityId:p="syn61609402",sourceAppConfigTableID:r="syn45291362"}){const s=t.length>0?[{concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter",columnName:"id",operator:V.IN,values:t}]:[],{data:i}=K({entityId:p,query:{sql:`SELECT appId, link FROM ${p}`,additionalFilters:s},partMask:W,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest"},{enabled:t.length>0}),n=i?.responseBody?.queryResult?.queryResults,a=!!n&&n?.rows.length>0,h=n?.rows.map(u=>u.values[0]),j=h&&h.length>0?[{concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter",columnName:"appId",operator:V.IN,values:h}]:[],x=z(r,j),C=!!x&&x.length>0;return!a||!C?null:e.jsx(e.Fragment,{children:x.map((u,N)=>e.jsxs(y,{sx:{display:"flex",padding:"32px",backgroundColor:"secondary.100",borderRadius:"8px",transition:"background-color 0.3s",justifyContent:"space-between",alignItems:"center",gap:"50px",boxShadow:"0 4px 10px 0 rgba(0, 0, 0, 0.10), 0 1px 1px 0 rgba(0, 0, 0, 0.05)"},children:[e.jsx(y,{children:e.jsxs(Q,{variant:"smallText1",sx:{color:"grey.900",mt:"4px",lineHeight:"20px"},children:["Looks like you’re searching for information about"," ",u.shortDescription," ",e.jsxs(H,{component:"a",href:u.appURL,target:"_blank",rel:"noopener noreferrer",sx:{color:f=>`${f.palette.grey[900]} !important`,textDecorationColor:f=>`${f.palette.grey[900]} !important`},children:["Visit the ",u.friendlyName]}),". ",u.description]})}),e.jsx(y,{sx:{"> *":{height:"48px",width:"auto"}},children:u?.logo})]},N))})}try{R.displayName="SearchPagePortalBanners",R.__docgenInfo={description:"Portal banner based on entities found in the first page of search results.",displayName:"SearchPagePortalBanners",props:{entityIds:{defaultValue:null,description:"",name:"entityIds",required:!0,type:{name:"string[]"}},dataCatalogEntityId:{defaultValue:{value:"syn61609402"},description:"",name:"dataCatalogEntityId",required:!1,type:{name:"string"}},sourceAppConfigTableID:{defaultValue:{value:"syn45291362"},description:"",name:"sourceAppConfigTableID",required:!1,type:{name:"string"}}}}}catch{}function b(t){const{query:r,setQuery:s}=t;J({title:`Search: ${r?.queryTerm?.join(" ")}`});const[i,n]=g.useState(r?.queryTerm?.join(" ")||"");g.useEffect(()=>{n(r?.queryTerm?.join(" ")||"")},[r]);const{data:a,isLoading:h,error:j,fetchNextPage:x,hasNextPage:C,isFetchingNextPage:u}=pe(r?{...r,size:50,returnFields:["path"]}:{queryTerm:[],size:50,returnFields:["path"]},{enabled:!!r?.queryTerm?.[0]}),N=o=>{n(o.target.value)},f=()=>{if(s){const o={queryTerm:i?i.split(" ").map(l=>l.trim()).filter(Boolean):[]};s(o)}},{data:A}=le({searchTerm:r?.queryTerm},{enabled:!!r?.queryTerm?.[0]}),S=g.useMemo(()=>{const o=A?.suggestions,l=r?.queryTerm||[];if(!o)return null;const c=new Map;let d=!1;for(const _ of o){const E=_.key,w=Array.from(_.values??[]).reduce((T,I)=>I.score===void 0||I.score<.75?T:!T||I.score>T.score?I:T,null);w?.term&&w.term!==E&&(c.set(E,w.term),d=!0)}return d?l.map(_=>c.get(_)||_).join(" "):null},[A,r?.queryTerm]),D=g.useMemo(()=>{if(!a?.pages||a.pages.length===0)return[];const o=new Set,l=a.pages[0];if(l?.hits){for(const d of l.hits)if(d.id&&o.add(d.id),d.path?.path)for(const q of d.path.path.slice(1))q.id&&o.add(q.id)}return Array.from(o)},[a]),L=()=>{if(s&&S){const o={queryTerm:S.split(" ").map(l=>l.trim()).filter(Boolean)};s(o)}},B=a?.pages?.[0]?.hits?.length===0,O=X.test(r?.queryTerm?.[0]||"");return e.jsxs(y,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(y,{sx:{display:"flex",flexDirection:"column",height:"200px",bgcolor:o=>o.palette.primary.dark,py:"40px",px:"80px",gap:"16px",marginBottom:"20px"},children:[e.jsx(Z,{placeholder:"Search…",value:i,onChange:N,onKeyDown:o=>{o.key==="Enter"&&f()},slotProps:{input:{startAdornment:e.jsx(ue,{position:"start",children:e.jsx(k,{sx:{color:"secondary.600"}})})}}}),e.jsx(F,{variant:"outlined",endIcon:e.jsx(ce,{}),sx:{py:"10px",px:"20px",width:"200px",bgcolor:"grey.700",color:"white","&:hover":{boxShadow:"none",color:"white"}},children:"Filter By"})]}),B&&e.jsxs("div",{className:m.didYouMeanCurrentlyShowing,children:[" ","No results found for ",e.jsx("b",{children:r?.queryTerm?.join(" ")}),"."]}),a&&!O&&S&&!B&&e.jsxs("div",{className:m.didYouMeanContainer,children:[e.jsxs("div",{className:m.didYouMeanCurrentlyShowing,children:["Currently showing results for ",e.jsx("b",{children:r?.queryTerm?.join(" ")}),"."]}),e.jsxs("div",{className:m.didYouMeanSuggestion,children:[e.jsx(k,{sx:{color:"grey.600"},className:m.searchIcon}),e.jsxs(Q,{variant:"body1",className:m.didYouMeanText,children:["Search for ",e.jsx("b",{className:m.suggestionText,children:S})," ","instead?"]}),e.jsx(ee,{className:m.didYouMeanArrowContainer,onClick:L,"aria-label":`Search for ${S} instead`,sx:{borderColor:"primary.main",svg:{color:"primary.main"}},children:e.jsx(re,{})})]})]}),e.jsxs(y,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"25px"},children:[h&&e.jsx("div",{children:"Loading..."}),j&&e.jsxs("div",{children:["Error: ",j.message]}),e.jsx(R,{entityIds:D}),a&&a.pages&&a.pages.map((o,l)=>o.hits.map(c=>e.jsx(ie,{entityId:c.id,name:c.name,entityType:c.node_type,modifiedOn:c.modified_on},c.id+"-"+l))),C&&e.jsx(F,{onClick:()=>{x()},loading:u,variant:"contained",sx:{mt:2},children:u?"Loading more...":"Load More"})]})]})}try{b.displayName="SynapseSearchPageResults",b.__docgenInfo={description:"",displayName:"SynapseSearchPageResults",props:{query:{defaultValue:null,description:"",name:"query",required:!1,type:{name:"SearchQuery"}},setQuery:{defaultValue:null,description:"",name:"setQuery",required:!1,type:{name:"(newQuery: SearchQuery) => void"}}}}}catch{}function v(t){const{children:p,routerBaseName:r="/SearchV2:default",useMemoryRouter:s=!1}=t,i=g.useMemo(()=>[{path:"/",element:e.jsx(e.Fragment,{children:p})}],[p,s]),n=g.useMemo(()=>s?te(i,{basename:r}):oe(i,{basename:r}),[s,i,r]);return s?e.jsx(se,{router:n}):e.jsx(ae,{router:n})}try{v.displayName="SynapseSearchPageRouter",v.__docgenInfo={description:"",displayName:"SynapseSearchPageRouter",props:{routerBaseName:{defaultValue:null,description:"",name:"routerBaseName",required:!1,type:{name:"string"}},useMemoryRouter:{defaultValue:null,description:"",name:"useMemoryRouter",required:!1,type:{name:"boolean"}}}}}catch{}function Se(){const[t,p]=ne(),r=t.get(P)||"",s=r?JSON.parse(r):{queryTerm:[]},i=n=>{p(a=>(n&&n.queryTerm&&n.queryTerm.length>0?a.set(P,JSON.stringify(n)):a.delete(P),a))};return e.jsx(b,{query:s,setQuery:i})}function Y(t){return e.jsx(v,{...t,children:e.jsx(Se,{})})}try{Y.displayName="SynapseSearchPage",Y.__docgenInfo={description:"",displayName:"SynapseSearchPage",props:{routerBaseName:{defaultValue:null,description:"",name:"routerBaseName",required:!1,type:{name:"string"}},useMemoryRouter:{defaultValue:null,description:"",name:"useMemoryRouter",required:!1,type:{name:"boolean"}}}}}catch{}const xt={title:"Components/SynapseSearch/SynapseSearchPage",component:Y,parameters:{stack:"production",requireLogin:!1},args:{useMemoryRouter:!0,routerBaseName:"/"}},M={};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:"{} satisfies Story",...M.parameters?.docs?.source}}};const ft=["Page"];export{M as Page,ft as __namedExportsOrder,xt as default};
