import{j,c0 as yn,W as gn,an as $n,r as we,dI as Fe,d6 as wn,dk as Se,d2 as Oe,cu as jn,cv as kn,az as bn,dJ as vn}from"./iframe-D-3jDgkP.js";import{l as An}from"./useEntity-B6svLYEJ.js";import{u as In,b as En,a as xn}from"./useSchema-DIafcpO5.js";import{g as It}from"./index-Chi_LkuB.js";import"./SkeletonButton-C7XBrhUR.js";import"./SkeletonInlineBlock-DPp6vqqG.js";import{S as Sn}from"./SkeletonTable-gbeUh3ur.js";import"./SkeletonParagraph-BGwjKkDC.js";function De(e){const{annotationKey:t,title:n,description:r}=e;return n==t&&!r?t:j.jsx(yn,{placement:"left",title:j.jsxs(j.Fragment,{children:[n!=t&&j.jsx("p",{children:j.jsxs("strong",{children:["Annotation Key: ",t]})}),j.jsx("p",{children:r})]}),children:j.jsx(gn,{component:"span",sx:o=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:"15%",textDecorationColor:o.palette.secondary.main,textUnderlineOffset:"4px",cursor:"pointer"}),children:n})})}try{De.displayName="EntityAnnotationKey",De.__docgenInfo={description:"A component used to display an Entity annotation key.",displayName:"EntityAnnotationKey",props:{annotationKey:{defaultValue:null,description:"The key of the annotation",name:"annotationKey",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"An optional title of the annotation",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"An optional",name:"description",required:!1,type:{name:"string"}}}}}catch{}function On(e){if(!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return!1;const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e}const je="[a-fA-F0-9]",ne="[a-zA-Z0-9-._~]",D="[!$&'()*+,;=]",Z=`%${je}${je}`,fe="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",ze=`${fe}\\.${fe}\\.${fe}\\.${fe}`,w=`${je}{1,4}`,z=`(?:${w}:${w}|${ze})`,Pn=`(?:(?:${w}:){6}${z}|::(?:${w}:){5}${z}|(?:${w})?::(?:${w}:){4}${z}|(?:(?:${w}:){0,1}${w})?::(?:${w}:){3}${z}|(?:(?:${w}:){0,2}${w})?::(?:${w}:){2}${z}|(?:(?:${w}:){0,3}${w})?::(?:${w}:){1}${z}|(?:(?:${w}:){0,4}${w})?::${z}|(?:(?:${w}:){0,5}${w})?::${w}|(?:(?:${w}:){0,6}${w})?::)`,Rn=`v${je}+\\.(?:${ne}|${D}|:)+`,Et=`\\[(?:${Pn}|${Rn})\\]`,re="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",xt=":(?<port>\\d*)",_n=`(?:${ne}|${Z}|${D})*?`,Tn=`(?<host>${Et}|${ze}|${_n})`,Nn=`(?<userinfo>(?:${ne}|${Z}|${D}|:)*)`,Be=`(?:${ne}|${Z}|${D}|:|@)`,St=`${Be}*?`,Ot=`(?:/${St})*`,Ge=`(?<authority>(?:${Nn}@)?${Tn}(?:${xt})?)`,Je=`(?<path>${Ot})`,Ze=`(?<path2>(?!//)${St}${Ot})`,We=`(?:\\?(?<query>(?:${Be}|/|\\?)*))?`,Pt=`(?:#(?<fragment>(?:${Be}|/|\\?)*))?`,Fn=`^${re}:(?://${Ge}${Je}|${Ze})${We}${Pt}$`,Dn=`^(?:${re}:|)(?://${Ge}${Je}|${Ze})${We}${Pt}$`,Un=`^${re}:(?://${Ge}${Je}|${Ze})${We}$`,le="[a-zA-Z0-9\\-._~\\u{A0}-\\u{D7FF}\\u{F900}-\\u{FDCF}\\u{FDF0}-\\u{FFEF}\\u{10000}-\\u{1FFFD}\\u{20000}-\\u{2FFFD}\\u{30000}-\\u{3FFFD}\\u{40000}-\\u{4FFFD}\\u{50000}-\\u{5FFFD}\\u{60000}-\\u{6FFFD}\\u{70000}-\\u{7FFFD}\\u{80000}-\\u{8FFFD}\\u{90000}-\\u{9FFFD}\\u{A0000}-\\u{AFFFD}\\u{B0000}-\\u{BFFFD}\\u{C0000}-\\u{CFFFD}\\u{D0000}-\\u{DFFFD}\\u{E1000}-\\u{EFFFD}]",Mn="[\\u{E000}-\\u{F8FF}\\u{F0000}-\\u{FFFFD}\\u{100000}-\\u{10FFFD}]",qn=`(?:${le}|${Z}|${D})*?`,Vn=`(?<host>${Et}|${ze}|${qn})`,Cn=`(?<userinfo>(?:${le}|${Z}|${D}|:)*)`,Xe=`(?:${le}|${Z}|${D}|:|@)`,Rt=`${Xe}*?`,_t=`(?:/${Rt})*`,Qe=`(?<authority>(?:${Cn}@)?${Vn}(?:${xt})?)`,He=`(?<path>${_t})`,Ye=`(?<path2>(?!//)${Rt}${_t})`,et=`(?:\\?(?<query>(?:${Xe}|${Mn}|/|\\?)*))?`,Tt=`(?:#(?<fragment>(?:${Xe}|/|\\?)*))?`,Nt=`^${re}:(?://${Qe}${He}|${Ye})${et}${Tt}$`,Ft=`^(?:${re}:|)(?://${Qe}${He}|${Ye})${et}${Tt}$`,Dt=`^${re}:(?://${Qe}${He}|${Ye})${et}$`,Ln=e=>(t,n)=>{const r=e.parseReference(t);if(r.scheme===void 0){const o=e.parseAbsolute(n);r.scheme=o.scheme,r.authority===void 0&&(r.authority=o.authority,r.path===""?(r.path=o.path,r.query??=o.query):r.path.startsWith("/")||(r.path=Kn(r.path,o)))}return Ut(e,r)},Kn=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const n=t.path.lastIndexOf("/");return n===-1?e:t.path.slice(0,n+1)+e}},zn=/^\.?\.\/|^\.\.?$/,Bn=/^\/\.(?:\/|$)/,Gn=/^\/\.\.(?:\/|$)/,Jn=e=>{let t="";for(;e.length>0;)if(zn.test(e))e=pt(e);else if(Bn.test(e))e=dt(e);else if(Gn.test(e))e=dt(e),t=Zn(t);else{const n=Wn(e);e=pt(e),t+=n}return t},pt=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},dt=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},Zn=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},Wn=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},Ut=(e,t)=>{let n=t.scheme.toLowerCase()+":";return n+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),n+=e.normalizePath(t.path),n+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),n+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),n},Mt=new RegExp(Z,"g"),qt=e=>t=>{const n=parseInt(t.slice(1),16),r=String.fromCharCode(n);return e(r)?r:t.toUpperCase()};RegExp.prototype.test.bind(new RegExp(`${ne}|${D}|[:@]`));const Xn=RegExp.prototype.test.bind(new RegExp(`${le}|${D}|[:@]`,"u")),Qn=e=>t=>Jn(t).replaceAll(Mt,qt(e));RegExp.prototype.test.bind(new RegExp(`${ne}|${D}|[:@/?]`));const mt=RegExp.prototype.test.bind(new RegExp(`${le}|${D}|[:@/?]`,"u")),lt=e=>t=>t.replaceAll(Mt,qt(e));RegExp.prototype.test.bind(new RegExp(Fn));RegExp.prototype.test.bind(new RegExp(Dn));RegExp.prototype.test.bind(new RegExp(Un));RegExp.prototype.test.bind(new RegExp(Nt,"u"));RegExp.prototype.test.bind(new RegExp(Ft,"u"));RegExp.prototype.test.bind(new RegExp(Dt,"u"));const tt=(e,t)=>n=>{const r=e.exec(n);if(r===null)throw Error(`Invalid ${t}: ${n}`);const o=r.groups;return o.authority===void 0&&(o.path=o.path2),delete o.path2,o},nt=tt(new RegExp(Nt,"u"),"IRI"),Vt=tt(new RegExp(Ft,"u"),"IRI-reference"),Hn=tt(new RegExp(Dt,"u"),"absolute-IRI"),Ct={iri:{parseAbsolute:Hn,parseReference:Vt,parse:nt,normalizePath:Qn(Xn),normalizeQuery:lt(mt),normalizeFragment:lt(mt)}},Yn=e=>t=>{const n=e.parse(t);return delete n.fragment,Ut(e,n)},C=Yn(Ct.iri),ce=Ln(Ct.iri),er="",ke=function*(e){if(e.length>0&&!e.startsWith("/"))throw Error("Invalid JSON Pointer");let t=1,n=0;for(;n<e.length;){const r=e.indexOf("/",t);n=r===-1?e.length:r;const o=e.slice(t,n);t=n+1,yield rr(o)}},tr=(e,t=void 0)=>{if(t===void 0){const n=[...ke(e)];return r=>ut(n,r)}else return ut(ke(e),t)},ut=(e,t)=>{let n=er;for(const r of e)t=sr(t,r,n),n=J(r,n);return t},J=(e,t)=>t+"/"+nr(e),nr=e=>e.toString().replace(/~/g,"~0").replace(/\//g,"~1"),rr=e=>e.toString().replace(/~1/g,"/").replace(/~0/g,"~"),or=(e,t)=>Array.isArray(e)?t==="-"?e.length:parseInt(t,10):t,sr=(e,t,n="")=>{if(e===void 0)throw TypeError(`Value at '${n}' is undefined and does not have property '${t}'`);if(e===null)throw TypeError(`Value at '${n}' is null and does not have property '${t}'`);if(ir(e))throw TypeError(`Value at '${n}' is a ${typeof e} and does not have property '${t}'`);{const r=or(e,t);if(Object.hasOwn(e,r))return e[r]}},ir=e=>e===null||typeof e!="object",Lt=e=>{const t=typeof e;switch(t){case"number":case"string":case"boolean":case"undefined":return t;case"object":if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype)return"object";default:{const n=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JSON compatible type: ${n}`)}}},rt=e=>{const t=e.indexOf("#"),n=t===-1?e.length:t;return e.slice(0,n)},Kt=e=>decodeURIComponent(Vt(e).fragment||""),be={},zt=e=>{if(e.indexOf("#")!==-1){const t=rt(e);return{...be[t],id:e}}return be[e]},ar=(e,t)=>{const n=Bt(e,t);if(!n)throw Error(`Encountered unknown keyword '${e}'`);const r=zt(n);if(!r)throw Error(`Encountered unsupported keyword ${e}. You can provide an implementation for the '${n}' keyword using the 'addKeyword' function.`);return r},c=e=>{be[e.id]=e},ge={},q=(e,t)=>{ge[e]=t},H={},Bt=(e,t)=>{const n=Gt(t);return n.keywords[e]??(n.allowUnknownKeywords||e.startsWith("x-")?`https://json-schema.org/keyword/unknown#${e}`:void 0)},b=(e,t)=>{const n=Gt(e);for(const r in n.keywords)if(n.keywords[r]===t)return r},Gt=e=>{if(!(e in H))throw Error(`Encountered unknown dialect '${e}'`);return H[e]},ot=(e,t,n=!1,r=!0)=>{H[e]={keywords:{},allowUnknownKeywords:n,persistentDialects:H[e]?.persistentDialects||r};for(const o in t)if(o in ge)for(const s in ge[o]){let i=ge[o][s];!(i in be)&&!t[o]&&(i=`https://json-schema.org/keyword/unknown#${s}`),H[e].keywords[s]=i}else if(!n||t[o])throw delete H[e],Error(`Unrecognized vocabulary: ${o}. You can define this vocabulary with the 'defineVocabulary' function.`)};var ye={};var ht;function cr(){if(ht)return ye;ht=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,o=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;ye.format=i,ye.parse=a;function i(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var y=m.parameters,k=m.type;if(!k||!s.test(k))throw new TypeError("invalid type");var g=k;if(y&&typeof y=="object")for(var A,F=Object.keys(y).sort(),I=0;I<F.length;I++){if(A=F[I],!n.test(A))throw new TypeError("invalid parameter name");g+="; "+A+"="+f(y[A])}return g}function a(m){if(!m)throw new TypeError("argument string is required");var y=typeof m=="object"?d(m):m;if(typeof y!="string")throw new TypeError("argument string is required to be a string");var k=y.indexOf(";"),g=k!==-1?y.slice(0,k).trim():y.trim();if(!s.test(g))throw new TypeError("invalid media type");var A=new h(g.toLowerCase());if(k!==-1){var F,I,S;for(e.lastIndex=k;I=e.exec(y);){if(I.index!==k)throw new TypeError("invalid parameter format");k+=I[0].length,F=I[1].toLowerCase(),S=I[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(r,"$1"))),A.parameters[F]=S}if(k!==y.length)throw new TypeError("invalid parameter format")}return A}function d(m){var y;if(typeof m.getHeader=="function"?y=m.getHeader("content-type"):typeof m.headers=="object"&&(y=m.headers&&m.headers["content-type"]),typeof y!="string")throw new TypeError("content-type header is missing from object");return y}function f(m){var y=String(m);if(n.test(y))return y;if(y.length>0&&!t.test(y))throw new TypeError("invalid parameter value");return'"'+y.replace(o,"\\$1")+'"'}function h(m){this.parameters=Object.create(null),this.type=m}return ye}var Jt=cr();const pr=It(Jt),pe={},Zt=(e,t)=>{pe[e]=t},dr=e=>{const t=e.headers.get("content-type");if(t===null)throw new yr("The media type of the response could not be determined. Make sure the response includes a 'Content-Type' header.",{cause:e});const n=Jt.parse(t);for(const r in pe)if(ur(r,n.type))return pe[r].parse(e);throw new fr(n.type,`'${n.type}' is not supported. Use the 'addMediaTypePlugin' function to add support for this media type.`,{cause:e})},mr="A-Za-z",Pe=`[!#$%&'*\\-_.^\`|~\\d${mr}]+`,lr=`(?<type>${Pe})/(?<subType>${Pe}(?:\\+(?<suffix>${Pe}))?)`,ft=new RegExp(lr),ur=(e,t)=>{if(e===t)return!0;const n=ft.exec(e)?.groups;if(!n)throw Error(`Unable to parse media-range: ${e}`);const r=ft.exec(t)?.groups;if(!r)throw Error(`Unable to parse media-type: ${t}`);return(n.type===r.type||n.type==="*")&&(n.subType===r.subType||n.subType==="*"||n.subType===r.suffix)},hr=()=>{let e="";for(const t in pe)e=yt(e,t,pe[t].quality);return yt(e,"*/*","0.001")},yt=(e,t,n)=>(e.length>0&&(e+=", "),e+=t,n&&(e+=`; q=${n}`),e);class fr extends Error{constructor(t,n=void 0){super(n),this.name=this.constructor.name,this.mediaType=t}}class yr extends Error{constructor(t=void 0){super(t),this.name=this.constructor.name}}const gr=(e,t=void 0)=>JSON.parse(e,(n,r)=>{const o=r!==null&&typeof r.$ref=="string"?new G(r.$ref):r;return t?t(n,o):o});class G{#e;#t;constructor(t,n=void 0){this.#e=t,this.#t=n??{$ref:t}}get href(){return this.#e}toJSON(){return this.#t}}const Wt=e=>{const t=typeof e;switch(t){case"bigint":return"number";case"number":case"string":case"boolean":case"undefined":return t;case"object":if(e instanceof G)return"reference";if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)return"object";default:{const n=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JRef compatible type: ${n}`)}}},$r={parse:async e=>({baseUri:e.url,root:gr(await e.text()),anchorLocation:wr}),fileMatcher:e=>/[^/]\.jref$/.test(e)},wr=e=>decodeURI(e||""),Ue={},Xt=(e,t)=>{Ue[e]=t},jr=(e,t)=>{e=ce(e,t);const{scheme:n}=nt(e);if(!(n in Ue))throw new kr(n,`The '${n}:' URI scheme is not supported. Use the 'addUriSchemePlugin' function to add support for '${n}:' URIs.`);return Ue[n].retrieve(e,t)};class kr extends Error{constructor(t,n=void 0){super(n),this.name=this.constructor.name,this.scheme=t}}const br=new Set([200,203]),vr=async e=>{const t=await fetch(e,{headers:{Accept:hr()}});if(t.status>=400)throw new gt(t,`Failed to retrieve '${e}'`);if(!br.has(t.status))throw new gt(t,"Unsupported HTTP response status code");return t},Qt={retrieve:vr};class gt extends Error{constructor(t,n=void 0){super(`${t.status} ${t.statusText}${n?` -- ${n}`:""}`),this.name=this.constructor.name,this.response=t}}var Ht=Ar;function Ar(e,t){return function n(){t==null&&(t=e.length);var r=[].slice.call(arguments);return r.length>=t?e.apply(this,r):function(){return n.apply(this,r.concat([].slice.call(arguments)))}}}const Ir=()=>globalThis.document?.location?.toString()??"",st=async(e,t={_cache:{}})=>{const n=t.document?.baseUri??Ir();e=ce(e,n);const r=C(e),{fragment:o}=nt(e),s=t._cache[r]??t.document?.embedded?.[r];if(s)t.document=s,t.uri=e,t.cursor=t.document.anchorLocation(o);else{try{const i=await jr(e,n);t.document=await dr(i),t.uri=i.url+(o===void 0?"":`#${o}`),t.cursor=t.document.anchorLocation(o)}catch(i){const a=t.uri?` Referenced from '${t.uri}'.`:"";throw new xr(`Unable to load resource '${e}'.${a}`,i)}t._cache[r]=t.document}return t._value=tr(t.cursor,t.document.root),Yt(t)},Yt=e=>Wt(l(e))==="reference"?st(l(e).href,e):e,l=e=>e._value,T=e=>Wt(e._value),en=(e,t)=>e in t._value,it=e=>e._value.length,R=Ht((e,t)=>Yt({...t,cursor:J(`${e}`,t.cursor),_value:t._value[e]})),V=async function*(e){for(let t=0;t<l(e).length;t++)yield R(t,e)},Me=function*(e){for(const t in l(e))yield t},Er=async function*(e){for(const t in l(e))yield R(t,e)},L=async function*(e){for(const t in l(e))yield[t,await R(t,e)]};class xr extends Error{constructor(t,n){super(t,{cause:n}),this.name=this.constructor.name}}Zt("application/reference+json",$r);Xt("http",Qt);Xt("https",Qt);const Sr={parse:async e=>{const t=pr.parse(e.headers.get("content-type")??""),n=t.parameters.schema??t.parameters.profile;return ve(await e.json(),e.url,n)},fileMatcher:async e=>/(\.|\/)schema\.json$/.test(e)},de={},tn=async(e,t=void 0)=>{t||(t={_cache:{}});for(const r in de)r in t._cache||(t._cache[r]=de[r]);const n=await st(e,{...t});if(typeof n.document.dialectId!="string")throw Error(`The document at ${n.document.baseUri} is not a schema.`);return n},U=(e,t,n)=>{e=structuredClone(e);const r=ve(e,t,n);if(r.baseUri in de)throw Error(`A schema has already been registered for '${r.baseUri}. You can use 'unregisterSchema' to remove the old schema before registering the new one.`);if(r.baseUri.startsWith("file:"))throw Error(`Registering a schema with a 'file:' URI scheme is not allowed: ${r.baseUri}`);de[t?C(t):r.baseUri]=r},Or=e=>e in de,ve=(e,t,n,r={})=>{if(typeof e.$schema=="string"&&(n=e.$schema,delete e.$schema),!n)throw Error("Unable to determine a dialect for the schema. The dialect can be declared in a number of ways, but the recommended way is to use the '$schema' keyword in your schema.");n=C(n);const o=b(n,"https://json-schema.org/keyword/draft-04/id"),s=b(n,"https://json-schema.org/keyword/id")||o;if(!e[s]&&!t)throw Error(`Unable to determine an identifier for the schema. Use the '${s}' keyword or pass a retrievalUri when loading the schema.`);const i=ce(e[s]??"",t??"");t=C(i),o&&i.length>t.length?e[s]="#"+Kt(i):delete e[s];const a=b(n,"https://json-schema.org/keyword/vocabulary");if(Lt(e[a])==="object"){const m=e[a]["https://json-schema.org/draft/2019-09/vocab/core"]||e[a]["https://json-schema.org/draft/2020-12/vocab/core"];ot(t,e[a],m,!1),delete e[a]}const d={"":""},f={},h=b(n,"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor");return e[h]===!0&&(f[""]=`${t}#`),delete e[h],r[t]={baseUri:t,dialectId:n,root:qe(e,t,n,"",r,d,f),anchorLocation:m=>{if(m===void 0)return"";if(m=decodeURI(m),m[0]==="/")return m;if(m in d)return d[m];throw Error(`No such anchor '${t}#${encodeURI(m)}'`)},anchors:d,dynamicAnchors:f,embedded:r},r[t]},qe=(e,t,n,r,o,s,i)=>{if(Lt(e)==="object"){const a=typeof e.$schema=="string"?C(e.$schema):n,d=b(a,"https://json-schema.org/keyword/id");if(typeof e[d]=="string"){const g=C(ce(e[d],t));return e[d]=g,o[g]=ve(e,g,a,o),new G(g,{})}const f=b(a,"https://json-schema.org/keyword/draft-04/id");if(typeof e[f]=="string")if(e[f][0]==="#"){const g=decodeURIComponent(e[f].slice(1));s[g]=r,delete e[f]}else{const g=C(ce(e[f],t));return e[f]=g,o[g]=ve(e,g,a,o),new G(g,{})}const h=b(n,"https://json-schema.org/keyword/draft-04/ref");if(typeof e[h]=="string")return new G(e[h],e);const m=b(n,"https://json-schema.org/keyword/anchor");typeof e[m]=="string"&&(s[e[m]]=r,delete e[m]);const y=b(n,"https://json-schema.org/keyword/dynamicAnchor");typeof e[y]=="string"&&(i[e[y]]=`${t}#${encodeURI(r)}`,delete e[y]);const k=b(n,"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor");typeof e[k]=="string"&&(i[e[k]]=`${t}#${encodeURI(r)}`,s[e[k]]=r,delete e[k]);for(const g in e){const A=b(n,"https://json-schema.org/keyword/ref");g===A&&typeof e[g]=="string"?e[g]=new G(e[g],e[g]):e[g]=qe(e[g],t,n,J(g,r),o,s,i)}}else if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=qe(e[a],t,n,J(a,r),o,s,i);return e},Ae=e=>`${e.document.baseUri}#${encodeURI(e.cursor)}`,oe=(e=>(...t)=>{const n=e.length===1?e(t[0]):e(t[0],t[1]),r=t[e.length];return r===void 0?n:n(r)}),Pr=oe(e=>function*(t){for(const n of t)yield e(n)}),E=oe(e=>async function*(t){for await(const n of t)yield e(n)}),nn=oe(e=>function*(t){let n=0;for(const r of t)n++>=e&&(yield r)}),Rr=e=>{const n=sn(e).next();return n.done?void 0:n.value},$t=function*(){},rn=function*(e,t){const n=sn(t);for(const r of e)yield[r,n.next().value]},_r=function*(...e){for(const t of e)yield*t},on=oe(((e,t)=>n=>{for(const r of n)t=e(t,r);return t})),Tr=oe(e=>t=>{for(const n of t)if(e(n))return!0;return!1}),_=async e=>{const t=[];for await(const n of e)t.push(n);return t},Ve=async e=>{const t=Object.create(null);for await(const[n,r]of e)t[n]=r;return t},Nr=oe(e=>t=>{let n=Rr(t)??"";for(const r of t)n+=e+r;return n}),sn=e=>{if(typeof e?.[Symbol.iterator]=="function")return e[Symbol.iterator]();throw TypeError("`iter` is not iterable")},x=((e,...t)=>on((n,r)=>r(n),e,t)),Y=(e,t="",n="",r=void 0)=>{const o=typeof e;switch(o){case"number":case"string":case"boolean":return ae(t,n,e,o,[],r);case"object":if(e===null)return ae(t,n,e,"null",[],r);if(Array.isArray(e)){const s=ae(t,n,e,"array",[],r);return s.children=e.map((i,a)=>Y(i,t,J(a,n),s)),s}else if(Object.getPrototypeOf(e)===Object.prototype){const s=ae(t,n,e,"object",[],r);return s.children=Object.entries(e).map(i=>{const a=J(i[0],n),d=ae(t,a,void 0,"property",[],s);return d.children[0]=Y(i[0],t,"*"+a,d),d.children[1]=Y(i[1],t,a,d),d}),s}else if(e instanceof G)return Y(e.toJSON(),t,n,r);default:{const s=o==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":o;throw Error(`Not a JSON compatible type: ${s}`)}}},ae=(e,t,n,r,o,s)=>{const i={baseUri:e?C(e):"",pointer:t,value:n,type:r,children:o,parent:s,annotations:{}};return i.root=s?.root??i,i},Fr=(e,t)=>{const n=rt(e);if(n!==t.baseUri&&n!=="")throw Error(`Reference '${e}' is not local to '${t.baseUri}'`);let r=!1,o=Kt(e);o.startsWith("*")&&(o=o.slice(1),r=!0);const s=on((i,a)=>(a=a==="-"&&u(i)==="array"?Ee(i):a,Dr(a,i)),t.root,ke(o));return r?s.parent.children[0]:s},me=e=>`${e.baseUri}#${encodeURI(e.pointer)}`,v=e=>e.value,u=e=>e.type,te=(e,t)=>e in t.value,Dr=(e,t)=>{switch(t.type){case"object":return t.children.find(r=>v(r.children[0])===e)?.children[1];case"array":{const n=parseInt(e,10);return t.children[n]}default:return}},M=function*(e){e.type==="array"&&(yield*e.children)},at=function*(e){if(e.type==="object")for(const t of e.children)yield t.children[0]},ue=function*(e){if(e.type==="object")for(const t of e.children)t.children.length===2&&(yield t.children)},Ee=e=>{if(e.type==="array")return e.children.length},ee={};let Ur=0;const Mr=(e,t)=>{e in ee||(ee[e]={});const n=`pubsub_subscription_${Ur++}`;return ee[e][n]=t,n},qr=async(e,t)=>{const n=[];for(const r in ee)if(r===e||e.startsWith(`${r}.`))for(const o in ee[r])n.push(ee[e][o](e,t));await Promise.all(n)};let an;const Vr=()=>an,Cr=e=>{an=e};class Lr extends Error{constructor(t){super("Invalid Schema"),this.name=this.constructor.name,this.output=t}}const Kr="https://json-schema.org/evaluation/validate",zr=async(e,t)=>{await qr("validate.metaValidate",e),e.document.baseUri in t.metaData||(t.metaData[e.document.baseUri]={dynamicAnchors:e.document.dynamicAnchors});const n=Ae(e);if(!(n in t)){t[n]=!1;const r=l(e);if(!["object","boolean"].includes(typeof r))throw Error(`No schema found at '${n}'`);t[n]=typeof r=="boolean"?r:await x(L(e),E(async([o,s])=>{const i=ar(o,e.document.dialectId);i.plugin&&t.plugins.add(i.plugin);const a=await i.compile(s,t,e);return[i.id,J(o,Ae(e)),a]}),_)}return n},Br=(e,t,n)=>{let r=!0;for(const o of n.plugins)o.beforeSchema?.(e,t,n);if(typeof n.ast[e]=="boolean")r=n.ast[e];else for(const o of n.ast[e]){const[s,,i]=o,a=zt(s),d={ast:n.ast,plugins:n.plugins};for(const h of n.plugins)h.beforeKeyword?.(o,t,d,n,a);const f=a.interpret(i,t,d);f||(r=!1);for(const h of n.plugins)h.afterKeyword?.(o,t,d,f,n,a)}for(const o of n.plugins)o.afterSchema?.(e,t,n,r);return r},p={id:Kr,compile:zr,interpret:Br};class Gr{beforeSchema(t,n,r){r.errors??=[]}beforeKeyword(t,n,r){r.errors=[]}afterKeyword(t,n,r,o,s,i){if(!o){if(!i.simpleApplicator){const[a,d]=t;s.errors.push({keyword:a,absoluteKeywordLocation:d,instanceLocation:me(n)})}s.errors.push(...r.errors)}}afterSchema(t,n,r,o){typeof r.ast[t]=="boolean"&&!o&&r.errors.push({keyword:p.id,absoluteKeywordLocation:t,instanceLocation:me(n)}),this.errors=r.errors}}class Jr{beforeSchema(t,n,r){r.errors??=[]}beforeKeyword(t,n,r){r.errors=[]}afterKeyword(t,n,r,o,s){if(!o){const[i,a]=t,d={keyword:i,absoluteKeywordLocation:a,instanceLocation:me(n)};s.errors.push(d),r.errors.length>0&&(d.errors=r.errors)}}afterSchema(t,n,r,o){typeof r.ast[t]=="boolean"&&!o&&r.errors.push({keyword:p.id,absoluteKeywordLocation:t,instanceLocation:me(n)}),this.errors=r.errors}}const $e="FLAG",Ce="BASIC",Zr="DETAILED";Cr($e);const cn=async e=>{const t={metaData:{},plugins:new Set},n=await p.compile(e,t);return{ast:t,schemaUri:n}},pn=Ht(({ast:e,schemaUri:t},n,r=$e)=>{const o=typeof r=="string"?r:r.outputFormat??$e,s=r.plugins??[],i={ast:e,plugins:[...e.plugins,...s]};let a;switch(o){case $e:break;case Ce:a=new Gr,i.plugins.push(a);break;case Zr:a=new Jr,i.plugins.push(a);break;default:throw Error(`Unsupported output format '${o}'`)}const d=p.interpret(t,n,i);return!d&&a?{valid:d,errors:a.errors}:{valid:d}}),Re={};Mr("validate.metaValidate",async(e,t)=>{if(!t.document.validated){if(t.document.validated=!0,!(t.document.dialectId in Re)){const o=await tn(t.document.dialectId,t),s=await cn(o);Re[t.document.dialectId]=pn(s)}const n=Y(t.document.root,t.document.baseUri),r=Re[t.document.dialectId](n,Vr());if(!r.valid)throw new Lr(r)}});class Wr{beforeSchema(t,n,r){r.annotations??=[],r.schemaAnnotations=[]}beforeKeyword(t,n,r){r.annotations=[]}afterKeyword(t,n,r,o,s,i){if(o){const[a,d,f]=t,h=i.annotation?.(f,n,r);h!==void 0&&s.schemaAnnotations.push({keyword:a,absoluteKeywordLocation:d,instanceLocation:me(n),annotation:h}),s.schemaAnnotations.push(...r.annotations)}}afterSchema(t,n,r,o){o&&r.annotations.push(...r.schemaAnnotations),this.annotations=r.annotations}}const Xr="https://json-schema.org/keyword/additionalProperties",Qr=async(e,t,n)=>{const r=b(e.document.dialectId,"https://json-schema.org/keyword/properties"),o=await R(r,n),s=T(o)==="object"?Pr(h=>"^"+Hr(h)+"$",Me(o)):$t(),i=b(e.document.dialectId,"https://json-schema.org/keyword/patternProperties"),a=await R(i,n),d=T(a)==="object"?Me(a):$t(),f=x(_r(s,d),Nr("|"))||"(?!)";return[new RegExp(f,"u"),await p.compile(e,t)]},Hr=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Yr=([e,t],n,r)=>{if(u(n)!=="object")return!0;let o=!0;for(const[s,i]of ue(n)){const a=v(s);e.test(a)||(p.interpret(t,i,r)||(o=!1),r.evaluatedProperties?.add(a))}return o},eo=!0,to={id:Xr,compile:Qr,interpret:Yr,simpleApplicator:eo},no="https://json-schema.org/keyword/allOf",ro=(e,t)=>x(V(e),E(n=>p.compile(n,t)),_),oo=(e,t,n,r,o)=>{let s=!0;for(const i of e)p.interpret(i,t,n,r,o)||(s=!1);return s},so=!0,io={id:no,compile:ro,interpret:oo,simpleApplicator:so},ao={id:"https://json-schema.org/keyword/anchor"},co="https://json-schema.org/keyword/anyOf",po=(e,t)=>x(V(e),E(n=>p.compile(n,t)),_),mo=(e,t,n,r,o)=>e.filter(i=>p.interpret(i,t,n,r,o)).length>0,lo={id:co,compile:po,interpret:mo},uo="https://json-schema.org/keyword/conditional",ho=(e,t)=>x(V(e),dn,E(n=>p.compile(n,t)),_),fo=(e,t,n)=>{for(let r=0;r<e.length;r+=2){const o=p.interpret(e[r],t,n);if(r+1===e.length)return o;if(o)return p.interpret(e[r+1],t,n)}return!0},dn=async function*(e,t=1){for await(const n of e)t>0&&T(n)==="array"?yield*dn(V(n),t-1):yield n},yo={id:uo,compile:ho,interpret:fo};var _e,wt;function go(){return wt||(wt=1,_e={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify}),_e}var Te,jt;function B(){return jt||(jt=1,Te={isArray:Array.isArray,assign:Object.assign,isObject:e=>typeof e=="object",isFunction:e=>typeof e=="function",isBoolean:e=>typeof e=="boolean",isRegex:e=>e instanceof RegExp,keys:Object.keys}),Te}var Ne,kt;function $o(){if(kt)return Ne;kt=1;const e=go(),t=B().isFunction,n=B().isBoolean,r=B().isObject,o=B().isArray,s=B().isRegex,i=B().assign,a=B().keys;function d(h){return h==null?h:s(h)?h.toString():h.toJSON?h.toJSON():h}function f(h,m){m=m||i({},e),t(m)&&(m={compare:m});const y=m.space||e.space,k=n(m.cycles)?m.cycles:e.cycles,g=m.replacer||e.replacer,A=m.stringify||e.stringify,F=m.compare&&(function(S){return function(W){return function(X,$){const P={key:X,value:W[X]},Q={key:$,value:W[$]};return S(P,Q)}}})(m.compare);k||A(h);const I=[];return(function S(W,X,$,P){const Q=y?`
`+new Array(P+1).join(y):"",hn=y?": ":":";if($=d($),$=g.call(W,X,$),$!==void 0){if(!r($)||$===null)return A($);if(o($)){const se=[];for(let K=0;K<$.length;K++){const ie=S($,K,$[K],P+1)||A(null);se.push(Q+y+ie)}return"["+se.join(",")+Q+"]"}else{if(k){if(I.indexOf($)!==-1)return A("[Circular]");I.push($)}const se=a($).sort(F&&F($)),K=[];for(let ie=0;ie<se.length;ie++){const xe=se[ie],ct=S($,xe,$[xe],P+1);if(!ct)continue;const fn=A(xe)+hn+ct;K.push(Q+y+fn)}return I.splice(I.indexOf($),1),"{"+K.join(",")+Q+"}"}}})({"":h},"",h,0)}return Ne=f,Ne}var wo=$o();const he=It(wo),jo="https://json-schema.org/keyword/const",ko=e=>he(l(e)),bo=(e,t)=>he(v(t))===e,vo={id:jo,compile:ko,interpret:bo},Ao="https://json-schema.org/keyword/contains",Io=async(e,t,n)=>{const r=await p.compile(e,t),o=b(e.document.dialectId,"https://json-schema.org/keyword/minContains"),s=await R(o,n),i=T(s)==="number"?l(s):1,a=b(e.document.dialectId,"https://json-schema.org/keyword/maxContains"),d=await R(a,n),f=T(d)==="number"?l(d):Number.MAX_SAFE_INTEGER;return{contains:r,minContains:i,maxContains:f}},Eo=({contains:e,minContains:t,maxContains:n},r,o)=>{if(u(r)!=="array")return!0;let s=0,i=0;for(const a of M(r))p.interpret(e,a,o)&&(s++,o.evaluatedItems?.add(i)),i++;return s>=t&&s<=n},xo={id:Ao,compile:Io,interpret:Eo},So="https://json-schema.org/keyword/comment",Oo=()=>{},Po=()=>!0,Ro={id:So,compile:Oo,interpret:Po},_o="https://json-schema.org/keyword/contentEncoding",To=e=>l(e),No=()=>!0,Fo=(e,t)=>{if(u(t)==="string")return e},Do={id:_o,compile:To,interpret:No,annotation:Fo},Uo="https://json-schema.org/keyword/contentMediaType",Mo=e=>l(e),qo=()=>!0,Vo=(e,t)=>{if(u(t)==="string")return e},Co={id:Uo,compile:Mo,interpret:qo,annotation:Vo},Lo="https://json-schema.org/keyword/contentSchema",Ko=async(e,t,n)=>{const r=b(e.document.dialectId,"https://json-schema.org/keyword/contentMediaType"),o=await R(r,n);if(l(o)!==void 0)return l(e)},zo=()=>!0,Bo=(e,t)=>{if(!(!e||u(t)!=="string"))return e},Go={id:Lo,compile:Ko,interpret:zo,annotation:Bo},Jo="https://json-schema.org/keyword/default",Zo=e=>l(e),Wo=()=>!0,Xo=e=>e,Qo={id:Jo,compile:Zo,interpret:Wo,annotation:Xo},Ho="https://json-schema.org/keyword/definitions",Yo=(e,t)=>x(Er(e),E(n=>p.compile(n,t)),_),es=()=>!0,ts={id:Ho,compile:Yo,interpret:es},ns="https://json-schema.org/keyword/dependentRequired",rs=e=>x(L(e),E(([t,n])=>[t,l(n)]),_),os=(e,t)=>{if(u(t)!=="object")return!0;let n=!0;for(const[r,o]of e)te(r,t)&&!o.every(s=>te(s,t))&&(n=!1);return n},ss={id:ns,compile:rs,interpret:os},is="https://json-schema.org/keyword/dependentSchemas",as=(e,t)=>x(L(e),E(async([n,r])=>[n,await p.compile(r,t)]),_),cs=(e,t,n)=>{if(u(t)!=="object")return!0;let r=!0;for(const[o,s]of e)te(o,t)&&!p.interpret(s,t,n)&&(r=!1);return r},ps=!0,ds={id:is,compile:as,interpret:cs,simpleApplicator:ps},ms="https://json-schema.org/keyword/deprecated",ls=e=>l(e),us=()=>!0,hs=e=>e,fs={id:ms,compile:ls,interpret:us,annotation:hs},ys="https://json-schema.org/keyword/description",gs=e=>l(e),$s=()=>!0,ws=e=>e,js={id:ys,compile:gs,interpret:$s,annotation:ws},ks={id:"https://json-schema.org/keyword/dynamicAnchor"},bs="https://json-schema.org/keyword/dynamicRef",vs=async(e,t)=>{const n=l(e),r=await st(e.document.baseUri,e);return await p.compile(r,t),n},As=(e,t,n)=>{if(!(e in n.dynamicAnchors))throw Error(`No dynamic anchor found for "${e}"`);return p.interpret(n.dynamicAnchors[e],t,n)},Is=!0,Es={beforeSchema(e,t,n){n.dynamicAnchors={...n.ast.metaData[rt(e)].dynamicAnchors,...n.dynamicAnchors}},beforeKeyword(e,t,n,r){n.dynamicAnchors=r.dynamicAnchors}},xs={id:bs,compile:vs,interpret:As,simpleApplicator:Is,plugin:Es},Ss="https://json-schema.org/keyword/else",Os=async(e,t,n)=>{const r=b(e.document.dialectId,"https://json-schema.org/keyword/if");if(en(r,n)){const o=await R(r,n);return[await p.compile(o,t),await p.compile(e,t)]}else return[]},Ps=([e,t],n,r)=>e===void 0||p.interpret(e,n,{...r,plugins:r.ast.plugins})||p.interpret(t,n,r),Rs=!0,_s={id:Ss,compile:Os,interpret:Ps,simpleApplicator:Rs},Ts="https://json-schema.org/keyword/enum",Ns=e=>x(V(e),E(l),E(he),_),Fs=(e,t)=>{const n=he(v(t));return e.some(r=>n===r)},Ds={id:Ts,compile:Ns,interpret:Fs},Us="https://json-schema.org/keyword/examples",Ms=e=>l(e),qs=()=>!0,Vs=e=>e,Cs={id:Us,compile:Ms,interpret:qs,annotation:Vs},Ls="https://json-schema.org/keyword/exclusiveMaximum",Ks=e=>l(e),zs=(e,t)=>u(t)!=="number"||v(t)<e,Bs={id:Ls,compile:Ks,interpret:zs},Gs="https://json-schema.org/keyword/exclusiveMinimum",Js=e=>l(e),Zs=(e,t)=>u(t)!=="number"||v(t)>e,Ws={id:Gs,compile:Js,interpret:Zs},Xs="https://json-schema.org/keyword/format",Qs=e=>l(e),Hs=()=>!0,Ys=e=>e,ei={id:Xs,compile:Qs,interpret:Hs,annotation:Ys},ti={id:"https://json-schema.org/keyword/id"},ni="https://json-schema.org/keyword/if",ri=(e,t)=>p.compile(e,t),oi=(e,t,n)=>(p.interpret(e,t,n),!0),si=!0,ii={id:ni,compile:ri,interpret:oi,simpleApplicator:si},ai=()=>{const e=N(!1),t=N(!0);return O(e,t),{start:e,end:t}},ci=e=>{const t=N(!1),n=N(!0);return hi(t,n,e),{start:t,end:n}},pi=(e,t)=>e===void 0?t:(O(e.end,t.start),e.end.isEnd=!1,{start:e.start,end:t.end}),di=(e,t)=>{const n=N(!1);O(n,e.start),O(n,t.start);const r=N(!0);return O(e.end,r),e.end.isEnd=!1,O(t.end,r),t.end.isEnd=!1,{start:n,end:r}},mi=e=>{const t=N(!1),n=N(!0);return O(t,n),O(t,e.start),O(e.end,n),O(e.end,e.start),e.end.isEnd=!1,{start:t,end:n}},li=e=>{const t=N(!1),n=N(!0);return O(t,n),O(t,e.start),O(e.end,n),e.end.isEnd=!1,{start:t,end:n}},ui=e=>{const t=N(!1),n=N(!0);return O(t,e.start),O(e.end,n),O(e.end,e.start),e.end.isEnd=!1,{start:t,end:n}},O=(e,t)=>{e.epsilonTransitions.push(t)},hi=(e,t,n)=>{e.transition[n]=t},N=e=>({isEnd:e,transition:{},epsilonTransitions:[]}),fi="https://json-schema.org/keyword/itemPattern",mn=async(e,t)=>{const n=[[]];let r=n[0];for await(const o of V(e))if(T(o)==="string"){const s=l(o);if(s==="*")r.push(mi(r.pop()));else if(s==="?")r.push(li(r.pop()));else if(s==="+")r.push(ui(r.pop()));else if(s==="|")r=[],n.push(r);else throw Error(`Unsupported pattern syntax: ${s}`)}else{const s=T(o)==="array"?mn(o,t):ci(await p.compile(o,t));r.push(await s)}return it(e)===0?ai():n.map(o=>o.reduce(pi)).reduce(di)},yi=(e,t,n)=>{if(u(t)!=="array")return!0;let r=[];Le(e.start,r,[]);for(const o of M(t)){const s=[];for(const i of r){const a=gi(i.transition,o,n);a&&Le(a,s,[])}r=s}return!!r.find(o=>o.isEnd)},Le=(e,t,n)=>{if(e.epsilonTransitions.length)for(const r of e.epsilonTransitions)n.find(o=>o===r)||(n.push(r),Le(r,t,n));else t.push(e)},gi=(e,t,n)=>{for(const r in e)if(p.interpret(r,t,n))return e[r]},$i={id:fi,compile:mn,interpret:yi},wi="https://json-schema.org/keyword/items",ji=async(e,t,n)=>{const r=b(e.document.dialectId,"https://json-schema.org/keyword/prefixItems"),o=await R(r,n);return[T(o)==="array"?it(o):0,await p.compile(e,t)]},ki=([e,t],n,r)=>{if(u(n)!=="array")return!0;let o=!0,s=e;for(const i of nn(e,M(n)))p.interpret(t,i,r)||(o=!1),r.evaluatedItems?.add(s),s++;return o},bi=!0,vi={id:wi,compile:ji,interpret:ki,simpleApplicator:bi},Ai="https://json-schema.org/keyword/maxContains",Ii=e=>l(e),Ei=()=>!0,xi={id:Ai,compile:Ii,interpret:Ei},Si="https://json-schema.org/keyword/maxItems",Oi=e=>l(e),Pi=(e,t)=>u(t)!=="array"||Ee(t)<=e,Ri={id:Si,compile:Oi,interpret:Pi},_i="https://json-schema.org/keyword/maxLength",Ti=e=>l(e),Ni=(e,t)=>u(t)!=="string"||[...v(t)].length<=e,Fi={id:_i,compile:Ti,interpret:Ni},Di="https://json-schema.org/keyword/maxProperties",Ui=e=>l(e),Mi=(e,t)=>u(t)!=="object"||[...at(t)].length<=e,qi={id:Di,compile:Ui,interpret:Mi},Vi="https://json-schema.org/keyword/maximum",Ci=e=>l(e),Li=(e,t)=>u(t)!=="number"||v(t)<=e,Ki={id:Vi,compile:Ci,interpret:Li},zi="https://json-schema.org/keyword/minContains",Bi=e=>l(e),Gi=()=>!0,Ji={id:zi,compile:Bi,interpret:Gi},Zi="https://json-schema.org/keyword/minItems",Wi=e=>l(e),Xi=(e,t)=>u(t)!=="array"||Ee(t)>=e,Qi={id:Zi,compile:Wi,interpret:Xi},Hi="https://json-schema.org/keyword/minLength",Yi=e=>l(e),ea=(e,t)=>u(t)!=="string"||[...v(t)].length>=e,ta={id:Hi,compile:Yi,interpret:ea},na="https://json-schema.org/keyword/minProperties",ra=e=>l(e),oa=(e,t)=>u(t)!=="object"||[...at(t)].length>=e,sa={id:na,compile:ra,interpret:oa},ia="https://json-schema.org/keyword/minimum",aa=e=>l(e),ca=(e,t)=>u(t)!=="number"||v(t)>=e,pa={id:ia,compile:aa,interpret:ca},da="https://json-schema.org/keyword/multipleOf",ma=e=>l(e),la=(e,t)=>{if(u(t)!=="number")return!0;const n=v(t)%e;return bt(0,n)||bt(e,n)},bt=(e,t)=>Math.abs(e-t)<11920929e-14,ua={id:da,compile:ma,interpret:la},ha="https://json-schema.org/keyword/not",fa=(...e)=>p.compile(...e),ya=(...e)=>!p.interpret(...e),ga={id:ha,compile:fa,interpret:ya},$a="https://json-schema.org/keyword/oneOf",wa=(e,t)=>x(V(e),E(n=>p.compile(n,t)),_),ja=(e,t,n)=>{let r=0;for(const o of e)p.interpret(o,t,n)&&r++;return r===1},ka={id:$a,compile:wa,interpret:ja},ba="https://json-schema.org/keyword/pattern",va=e=>new RegExp(l(e),"u"),Aa=(e,t)=>u(t)!=="string"||e.test(v(t)),Ia={id:ba,compile:va,interpret:Aa},Ea="https://json-schema.org/keyword/patternProperties",xa=(e,t)=>x(L(e),E(async([n,r])=>[new RegExp(n,"u"),await p.compile(r,t)]),_),Sa=(e,t,n)=>{if(u(t)!=="object")return!0;let r=!0;for(const[o,s]of e)for(const[i,a]of ue(t)){const d=v(i);o.test(d)&&(p.interpret(s,a,n)||(r=!1),n.evaluatedProperties?.add(d))}return r},Oa=!0,Pa={id:Ea,compile:xa,interpret:Sa,simpleApplicator:Oa},Ra="https://json-schema.org/keyword/prefixItems",_a=(e,t)=>x(V(e),E(n=>p.compile(n,t)),_),Ta=(e,t,n)=>{if(u(t)!=="array")return!0;let r=!0,o=0;const s=Ee(t);for(const[i,a]of rn(e,M(t))){if(o>=s)break;p.interpret(i,a,n)||(r=!1),n.evaluatedItems?.add(o),o++}return r},Na=!0,Fa={id:Ra,compile:_a,interpret:Ta,simpleApplicator:Na},Da="https://json-schema.org/keyword/properties",Ua=(e,t)=>x(L(e),E(async([n,r])=>[n,await p.compile(r,t)]),Ve),Ma=(e,t,n)=>{if(u(t)!=="object")return!0;let r=!0;for(const[o,s]of ue(t)){const i=v(o);i in e&&(p.interpret(e[i],s,n)||(r=!1),n.evaluatedProperties?.add(i))}return r},qa=!0,Va={id:Da,compile:Ua,interpret:Ma,simpleApplicator:qa},Ca="https://json-schema.org/keyword/propertyDependencies",La=(e,t)=>x(L(e),E(async([n,r])=>[n,await x(L(r),E(async([o,s])=>[o,await p.compile(s,t)]),Ve)]),Ve),Ka=(e,t,n)=>{if(u(t)!=="object")return!0;let r=!0;const o=v(t);for(const[s,i]of Object.entries(e)){const a=o[s];te(s,t)&&a in i&&!p.interpret(i[a],t,n)&&(r=!1)}return r},za=!0,Ba={id:Ca,compile:La,interpret:Ka,simpleApplicator:za},Ga="https://json-schema.org/keyword/propertyNames",Ja=(e,t)=>p.compile(e,t),Za=(e,t,n)=>{if(u(t)!=="object")return!0;let r=!0;for(const o of at(t))p.interpret(e,o,n)||(r=!1);return r},Wa=!0,Xa={id:Ga,compile:Ja,interpret:Za,simpleApplicator:Wa},Qa="https://json-schema.org/keyword/readOnly",Ha=e=>l(e),Ya=()=>!0,ec=e=>e,tc={id:Qa,compile:Ha,interpret:Ya,annotation:ec},nc="https://json-schema.org/keyword/ref",rc=(...e)=>p.compile(...e),oc=(...e)=>p.interpret(...e),sc=!0,ic={id:nc,compile:rc,interpret:oc,simpleApplicator:sc},ac="https://json-schema.org/keyword/requireAllExcept",cc=async(e,t,n)=>{const r=await l(e),o=b(e.document.dialectId,"https://json-schema.org/keyword/properties"),s=await R(o,n),i=T(s)==="object"?Me(s):[],a=new Set(i);return r.forEach(d=>i.remove(d)),[...a]},pc=(e,t)=>u(t)!=="object"||e.every(n=>Object.hasOwn(v(t),n)),dc={id:ac,compile:cc,interpret:pc},mc="https://json-schema.org/keyword/required",lc=e=>l(e),uc=(e,t)=>u(t)!=="object"||e.every(n=>Object.hasOwn(v(t),n)),hc={id:mc,compile:lc,interpret:uc},fc="https://json-schema.org/keyword/title",yc=e=>l(e),gc=()=>!0,$c=e=>e,wc={id:fc,compile:yc,interpret:gc,annotation:$c},jc="https://json-schema.org/keyword/then",kc=async(e,t,n)=>{const r=b(e.document.dialectId,"https://json-schema.org/keyword/if");if(en(r,n)){const o=await R(r,n);return[await p.compile(o,t),await p.compile(e,t)]}else return[]},bc=([e,t],n,r)=>e===void 0||!p.interpret(e,n,{...r,plugins:r.ast.plugins})||p.interpret(t,n,r),vc=!0,Ac={id:jc,compile:kc,interpret:bc,simpleApplicator:vc},Ic="https://json-schema.org/keyword/type",Ec=e=>l(e),xc=(e,t)=>typeof e=="string"?vt(t)(e):e.some(vt(t)),vt=e=>t=>t==="integer"?u(e)==="number"&&Number.isInteger(v(e)):u(e)===t,Sc={id:Ic,compile:Ec,interpret:xc},Oc="https://json-schema.org/keyword/unevaluatedItems",Pc=async(e,t,n)=>[Ae(n),await p.compile(e,t)],Rc=([e,t],n,r)=>{if(u(n)!=="array"||r.rootSchema===e)return!0;const o=new Tc(e);p.interpret(e,n,{...r,plugins:[...r.ast.plugins,o]});const s=o.evaluatedItems;let i=!0,a=0;for(const d of M(n))s.has(a)||(p.interpret(t,d,r)||(i=!1),r.evaluatedItems?.add(a)),a++;return i},_c=!0;class Tc{constructor(t){this.rootSchema=t}beforeSchema(t,n,r){r.evaluatedItems??=new Set,r.schemaEvaluatedItems??=new Set}beforeKeyword(t,n,r){r.rootSchema=this.rootSchema,r.evaluatedItems=new Set}afterKeyword(t,n,r,o,s){if(o)for(const i of r.evaluatedItems)s.schemaEvaluatedItems.add(i)}afterSchema(t,n,r,o){if(o)for(const s of r.schemaEvaluatedItems)r.evaluatedItems.add(s);this.evaluatedItems=r.evaluatedItems}}const Nc={id:Oc,compile:Pc,interpret:Rc,simpleApplicator:_c},Fc="https://json-schema.org/keyword/unevaluatedProperties",Dc=async(e,t,n)=>[Ae(n),await p.compile(e,t)],Uc=([e,t],n,r)=>{if(u(n)!=="object"||r.rootSchema===e)return!0;const o=new qc(e);p.interpret(e,n,{...r,plugins:[...r.ast.plugins,o]});const s=o.evaluatedProperties;let i=!0;for(const[a,d]of ue(n)){const f=v(a);s.has(f)||(p.interpret(t,d,r)||(i=!1),r.evaluatedProperties?.add(f))}return i},Mc=!0;class qc{constructor(t){this.rootSchema=t}beforeSchema(t,n,r){r.evaluatedProperties??=new Set,r.schemaEvaluatedProperties??=new Set}beforeKeyword(t,n,r){r.rootSchema=this.rootSchema,r.evaluatedProperties=new Set}afterKeyword(t,n,r,o,s){if(o)for(const i of r.evaluatedProperties)s.schemaEvaluatedProperties.add(i)}afterSchema(t,n,r,o){if(o)for(const s of r.schemaEvaluatedProperties)r.evaluatedProperties.add(s);this.evaluatedProperties=r.evaluatedProperties}}const Vc={id:Fc,compile:Dc,interpret:Uc,simpleApplicator:Mc},Cc="https://json-schema.org/keyword/uniqueItems",Lc=e=>l(e),Kc=(e,t)=>{if(u(t)!=="array"||e===!1)return!0;const n=v(t).map(he);return new Set(n).size===n.length},zc={id:Cc,compile:Lc,interpret:Kc},Bc="https://json-schema.org/keyword/unknown",Gc=e=>[[...ke(e.cursor)].pop(),l(e)],Jc=()=>!0,Zc=([,e])=>e,Wc={id:Bc,compile:Gc,interpret:Jc,annotation:Zc},Xc={id:"https://json-schema.org/keyword/vocabulary"},Qc="https://json-schema.org/keyword/writeOnly",Hc=e=>l(e),Yc=()=>!0,ep=e=>e,tp={id:Qc,compile:Hc,interpret:Yc,annotation:ep};Zt("application/schema+json",Sr);c(to);c(io);c(ao);c(lo);c(yo);c(vo);c(xo);c(Ro);c(Do);c(Co);c(Go);c(Qo);c(ts);c(ss);c(ds);c(fs);c(js);c(ks);c(xs);c(_s);c(Ds);c(Cs);c(Bs);c(Ws);c(ei);c(ti);c(ii);c($i);c(vi);c(xi);c(Ri);c(Fi);c(qi);c(Ki);c(Ji);c(Qi);c(ta);c(sa);c(pa);c(ua);c(ga);c(ka);c(Ia);c(Pa);c(Fa);c(Va);c(Ba);c(Xa);c(tc);c(ic);c(dc);c(hc);c(wc);c(Ac);c(Sc);c(Nc);c(Vc);c(zc);c(Wc);c(Xc);c(tp);const np={$schema:"https://json-schema.org/validation",$vocabulary:{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/unevaluated":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0},title:"Core and Validation specifications meta-schema",$dynamicAnchor:"meta",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}]},rp={$schema:"https://json-schema.org/validation",title:"Core vocabulary meta-schema",$dynamicAnchor:"meta",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{$ref:"#/$defs/anchor"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{$ref:"#/$defs/anchor"},$dynamicAnchor:{$ref:"#/$defs/anchor"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},$defs:{anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"}}},op={$schema:"https://json-schema.org/validation",title:"Applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"meta"},contains:{$dynamicRef:"meta"},itemPattern:{$ref:"#/$defs/itemPattern"},additionalProperties:{$dynamicRef:"meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"meta"}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"},propertyNames:{format:"regex"}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"meta"}},propertyDependencies:{type:"object",additionalProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},propertyNames:{$dynamicRef:"meta"},if:{$dynamicRef:"meta"},then:{$dynamicRef:"meta"},else:{$dynamicRef:"meta"},conditional:{type:"array",items:{if:{type:"array"},then:{items:{$dynamicRef:"meta"}},else:{$dynamicRef:"meta"}}},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"meta"}},itemPattern:{type:"array",itemPattern:[[{if:{type:"array"},then:{$ref:"#/$defs/itemPattern"},else:{$dynamicRef:"meta"}},{enum:["?","*","+"]},"?","|",{const:"|"}],"*"]}}},sp={$schema:"https://json-schema.org/validation",title:"Validation vocabulary meta-schema",$dynamicAnchor:"meta",properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeInteger"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeInteger"},uniqueItems:{type:"boolean"},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger"},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeInteger"},required:{$ref:"#/$defs/stringArray"},optional:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0}}},ip={$schema:"https://json-schema.org/validation",title:"Meta-data vocabulary meta-schema",$dynamicAnchor:"meta",properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean"},readOnly:{type:"boolean"},writeOnly:{type:"boolean"},examples:{type:"array"}}},ap={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for annotation results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},cp={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for assertion results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},pp={$schema:"https://json-schema.org/validation",title:"Content vocabulary meta-schema",$dynamicAnchor:"meta",properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"meta"}}},dp={$schema:"https://json-schema.org/validation",title:"Unevaluated applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{unevaluatedItems:{$dynamicRef:"meta"},unevaluatedProperties:{$dynamicRef:"meta"}}};q("https://json-schema.org/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});q("https://json-schema.org/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",minContains:"https://json-schema.org/keyword/minContains",maxContains:"https://json-schema.org/keyword/maxContains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",conditional:"https://json-schema.org/keyword/conditional",items:"https://json-schema.org/keyword/items",itemPattern:"https://json-schema.org/keyword/itemPattern",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyDependencies:"https://json-schema.org/keyword/propertyDependencies",propertyNames:"https://json-schema.org/keyword/propertyNames"});q("https://json-schema.org/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",requireAllExcept:"https://json-schema.org/keyword/requireAllExcept",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});q("https://json-schema.org/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});q("https://json-schema.org/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});q("https://json-schema.org/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});q("https://json-schema.org/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});q("https://json-schema.org/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});const ln="https://json-schema.org/validation";ot(ln,{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0,"https://json-schema.org/vocab/unevaluated":!0});U(np,ln);U(rp,"https://json-schema.org/meta/core");U(op,"https://json-schema.org/meta/applicator");U(sp,"https://json-schema.org/meta/validation");U(ip,"https://json-schema.org/meta/meta-data");U(ap,"https://json-schema.org/meta/format-annotation");U(cp,"https://json-schema.org/meta/format-assertion");U(pp,"https://json-schema.org/meta/content");U(dp,"https://json-schema.org/meta/unevaluated");const mp={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},lp="https://json-schema.org/keyword/draft-04/additionalItems",up=async(e,t,n)=>{const r=b(e.document.dialectId,"https://json-schema.org/keyword/draft-04/items"),o=await R(r,n);return[T(o)==="array"?it(o):Number.MAX_SAFE_INTEGER,await p.compile(e,t)]},hp=([e,t],n,r)=>{if(u(n)!=="array")return!0;let o=!0,s=e;for(const i of nn(e,M(n)))p.interpret(t,i,r)||(o=!1),r.evaluatedItems?.add(s),s++;return o},fp=!0,yp={id:lp,compile:up,interpret:hp,simpleApplicator:fp},gp="https://json-schema.org/keyword/draft-06/contains",$p=(e,t)=>p.compile(e,t),wp=(e,t,n)=>u(t)!=="array"||Tr(r=>p.interpret(e,r,n),M(t)),jp={id:gp,compile:$p,interpret:wp},kp="https://json-schema.org/keyword/draft-04/dependencies",bp=(e,t)=>x(L(e),E(async([n,r])=>[n,T(r)==="array"?l(r):await p.compile(r,t)]),_),vp=(e,t,n)=>u(t)!=="object"?!0:e.every(([r,o])=>te(r,t)?Array.isArray(o)?o.every(s=>te(s,t)):p.interpret(o,t,n):!0),Ap={id:kp,compile:bp,interpret:vp},Ip="https://json-schema.org/keyword/draft-04/items",Ep=(e,t)=>T(e)==="array"?x(V(e),E(n=>p.compile(n,t)),_):p.compile(e,t),xp=(e,t,n)=>{if(u(t)!=="array")return!0;let r=!0,o=0;if(typeof e=="string")for(const s of M(t))p.interpret(e,s,n)||(r=!1),n.evaluatedItems?.add(o++);else for(const[s,i]of rn(e,M(t))){if(!i)break;p.interpret(s,i,n)||(r=!1),n.evaluatedItems?.add(o),o++}return r},Sp=!0,Op={id:Ip,compile:Ep,interpret:xp,simpleApplicator:Sp},Pp={id:"https://json-schema.org/keyword/draft-04/id"},Rp={id:"https://json-schema.org/keyword/draft-04/ref"};c(yp);c(jp);c(Ap);c(Pp);c(Op);c(Rp);const Ke="http://json-schema.org/draft-07/schema";q(Ke,{$id:"https://json-schema.org/keyword/draft-04/id",$ref:"https://json-schema.org/keyword/draft-04/ref",$comment:"https://json-schema.org/keyword/comment",additionalItems:"https://json-schema.org/keyword/draft-04/additionalItems",additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",const:"https://json-schema.org/keyword/const",contains:"https://json-schema.org/keyword/draft-06/contains",contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",default:"https://json-schema.org/keyword/default",definitions:"https://json-schema.org/keyword/definitions",dependencies:"https://json-schema.org/keyword/draft-04/dependencies",description:"https://json-schema.org/keyword/description",enum:"https://json-schema.org/keyword/enum",examples:"https://json-schema.org/keyword/examples",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",format:"https://json-schema.org/keyword/format",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/draft-04/items",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",pattern:"https://json-schema.org/keyword/pattern",patternProperties:"https://json-schema.org/keyword/patternProperties",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames",readOnly:"https://json-schema.org/keyword/readOnly",required:"https://json-schema.org/keyword/required",title:"https://json-schema.org/keyword/title",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems",writeOnly:"https://json-schema.org/keyword/writeOnly"});ot(Ke,{[Ke]:!0},!0);U(mp);const _p="https://json-schema.org/validation",Tp=(e,t,n=_p)=>{const r=Bt(t,n);return e.annotations[r]??[]};class Np extends Error{constructor(t){super("Validation Error"),this.name=this.constructor.name,this.output=t}}const Fp=async(e,t=void 0,n=void 0)=>{const r=await tn(e),o=await cn(r),s=(i,a)=>Dp(o,Y(i),a);return t===void 0?s:s(t,n)},Dp=(e,t,n=Ce)=>{const r=new Wr,o=n.plugins??[],s=pn(e,t,{outputFormat:typeof n=="string"?n:n.outputFormat??Ce,plugins:[r,...o]});if(!s.valid)throw new Np(s);for(const i of r.annotations){const a=Fr(i.instanceLocation,t),d=i.keyword;a.annotations[d]||(a.annotations[d]=[]),a.annotations[d].unshift(i.annotation)}return t};function un(e,t,n){if(t){for(const[r,o]of ue(t))if(v(r)===e)return Tp(o,n)[0]}}function Up(e,t){if(t){const n=un(e,t,"title");if(n)return n}return e}function Mp(e,t){if(t)return un(e,t,"description")}function qp(e){const[t,n]=we.useState(!1);return we.useEffect(()=>{if(e&&e.$id)if(Or(e.$id))n(!0);else try{U(e),n(!0)}catch(r){console.error("Unable to register JSON Schema in @hyperjump/json-schema:",r)}},[e]),t}function Vp(e,t){const n=qp(t);return $n({queryKey:["getAnnotatedInstance",{json:e,schema:t,schemaIsRegistered:n}],queryFn:()=>{if(e&&t&&n)try{return Fp(t.$id,e)}catch(r){console.error("Could not create annotated schema instance:",r)}return null},enabled:!!(t&&e)})}function Ie(e){return typeof e=="number"||typeof e=="boolean"?e.toString():On(e)?vn(Fe(e)):e}function At(e){const{entityId:t,versionNumber:n}=e,[r,o]=we.useState(!1),{data:s,isLoading:i,refetch:a}=An(t,n,!0),d=s?.entityMetadata,f=s?.annotations,{data:h,isLoading:m}=In(t),{data:y,isLoading:k}=En(h?.jsonSchemaVersionInfo.$id,{enabled:!!h}),{data:g,isLoading:A}=Vp(s?.entity,y),{data:F,refetch:I}=xn(t,{enabled:!!h}),S=!!h,W=!!d&&!!F&&Fe(d.modifiedOn).diff(Fe(F.validatedOn))>0,X=we.useCallback(async()=>{o(!0);const P=[void a(),void I()];await Promise.allSettled(P),o(!1)},[a,I]);return i||m||k||A||r?j.jsx(Sn,{numRows:3,numCols:2}):j.jsxs(j.Fragment,{children:[d&&f&&wn(f)?j.jsxs("div",{className:"placeholder",children:["This"," ",Se(Oe(d.concreteType))," ","has no annotations."]}):null,j.jsx("table",{className:"AnnotationsTable",children:j.jsxs("tbody",{children:[f&&Object.keys(f).map(P=>j.jsxs("tr",{className:"AnnotationsTable__Row",children:[j.jsx("td",{className:"AnnotationsTable__Row__Key",children:j.jsx(De,{annotationKey:P,title:Up(P,g),description:Mp(P,g)})}),j.jsx("td",{className:"AnnotationsTable__Row__Value",children:Array.isArray(f[P])?f[P].map(Ie).join(", "):Ie(f[P])})]},P)),S?j.jsxs("tr",{className:"AnnotationsTable__Row",children:[j.jsx("td",{className:"AnnotationsTable__Row__Key Schema",children:"Validation Schema"}),j.jsx("td",{className:"AnnotationsTable__Row__Value",children:j.jsx("a",{href:`${jn(kn.REPO_ENDPOINT)}/repo/v1/schema/type/registered/${h.jsonSchemaVersionInfo.$id}`,target:"_blank",rel:"noopener noreferrer",children:h.jsonSchemaVersionInfo.schemaName})})]}):null]})}),d&&S&&W&&j.jsx(bn,{variant:"warning",description:`This ${Se(Oe(d.concreteType))} has changed since it has been last validated. If this ${Se(Oe(d.concreteType))} is expected to have annotations derived from the Validation Schema, they may not yet be visible.`,primaryButtonConfig:{text:"Reload Annotations",onClick:()=>{X()}},isGlobal:!1})]})}try{Ie.displayName="getDisplayedAnnotation",Ie.__docgenInfo={description:"",displayName:"getDisplayedAnnotation",props:{}}}catch{}try{At.displayName="AnnotationsTable",At.__docgenInfo={description:"",displayName:"AnnotationsTable",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}export{At as A,Ie as g};
