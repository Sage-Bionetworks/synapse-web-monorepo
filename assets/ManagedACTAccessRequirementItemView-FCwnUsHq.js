import{r as v,j as e,ag as j,S as s,c4 as l,dG as f,X as r,dH as I,_ as k,V as D}from"./iframe-z21gSILm.js";import{a as i,R as P}from"./RequirementItem-HAOW-e2a.js";const V="Your data access request has been approved.",w="This data access requirement is fulfilled by your team membership and permissions.";function N(n,c){if(c)return i.COMPLETE;switch(n.currentSubmissionStatus?.state){case s.APPROVED:return n.isApproved?i.COMPLETE:i.LOCKED;case s.SUBMITTED:return i.PENDING;case s.REJECTED:case s.CANCELLED:default:return i.LOCKED}}function L(n,c,t,d){const{onRequestAccess:m,onRejectTerms:h,onCancelDataAccessRequest:p}=d,a=[];return n&&(n.currentSubmissionStatus==null?(a.push({variant:"outlined",onClick:m,children:"Request access"}),c||a.push({variant:"text",onClick:h,children:"I do not accept"})):[s.APPROVED,s.REJECTED,s.CANCELLED].includes(n.currentSubmissionStatus.state)?a.push({variant:"outlined",onClick:m,children:"Update Request"}):n.currentSubmissionStatus.state===s.SUBMITTED&&a.push({variant:"outlined",onClick:p,children:"Cancel Request",loading:t})),a}function x(n){const{accessRequirement:c,accessRequirementStatus:t,isLoading:d,wikiPage:m,restrictionInformation:h,onRejectTerms:p,onRequestAccess:a,error:A,onCancelDataAccessRequest:T,cancelRequestIsPending:E}=n,C=h?.restrictionDetails?.find(S=>S.accessRequirementId===c.id),[q,b]=v.useState(!0),o=t?.isApproved,u=!!C?.isExempt,R=e.jsxs(j,{gap:2,children:[m,t?.currentSubmissionStatus?.state===s.SUBMITTED&&e.jsx(l,{className:"access-requirement-list-alert",severity:"info",children:e.jsx("strong",{children:"You have submitted a data access request."})}),t?.currentSubmissionStatus?.state===s.APPROVED&&o&&e.jsx(l,{className:"access-requirement-list-alert",severity:"success",children:e.jsx("strong",{children:"Your data access request has been approved."})}),t?.currentSubmissionStatus?.state===s.APPROVED&&!o&&e.jsxs(l,{className:"access-requirement-list-alert",severity:"warning",children:[e.jsx(r,{variant:"smallText1",gutterBottom:!0,children:e.jsx("strong",{children:"Your data access has been revoked."})}),t.expiredOn&&f(t.expiredOn).isBefore(f())&&e.jsxs(r,{variant:"smallText1",gutterBottom:!0,children:["Your access expired on"," ",I(f(t.expiredOn)),"."]})]}),t?.currentSubmissionStatus?.state===s.REJECTED&&e.jsxs(l,{className:"access-requirement-list-alert",severity:"error",children:[e.jsx(r,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Your data access request has been rejected."})}),e.jsx(r,{variant:"body1",gutterBottom:!0,sx:{whiteSpace:"pre-line"},children:t?.currentSubmissionStatus.rejectedReason||""})]}),t?.currentSubmissionStatus?.state===s.CANCELLED&&e.jsx(l,{className:"access-requirement-list-alert",severity:"info",children:e.jsx(r,{variant:"body1",children:"Your data access request has been canceled."})})]});let g=[];!d&&t&&(g=L(t,u,E,{onRequestAccess:a,onRejectTerms:p,onCancelDataAccessRequest:T}));let y=i.LOADING;return!d&&t&&(y=N(t,u)),e.jsxs(P,{"data-testid":"ManagedACTAccessRequirementItem",status:y,actions:g,children:[!o&&!u&&e.jsx(e.Fragment,{children:R}),(o||u)&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"body1",children:[o&&V," ",u&&w," ",e.jsx(k,{role:"button",onClick:()=>{b(!q)},children:q?"View Terms":"Hide Terms"})]}),!q&&e.jsx(D,{sx:{my:1},children:R})]}),A]})}try{x.displayName="ManagedACTAccessRequirementItemView",x.__docgenInfo={description:`Renders a {@link RequirementItem} for a ManagedACTAccessRequirement, which allows a user to see if they have met the
requirement, and if not, complete a data access request to apply for access.

This is a UI-only component that does not make any requests to external stores, and is exported for testing/Storybook only.`,displayName:"ManagedACTAccessRequirementItemView",props:{accessRequirement:{defaultValue:null,description:"The ManagedACTAccessRequirement to be displayed.",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"The user's status for this access requirement.",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},wikiPage:{defaultValue:null,description:"A ReactNode that contains the wiki page content for this access requirement.",name:"wikiPage",required:!1,type:{name:"ReactNode"}},isLoading:{defaultValue:null,description:"Whether the component is currently loading data.",name:"isLoading",required:!0,type:{name:"boolean"}},restrictionInformation:{defaultValue:null,description:`If available, the restriction information relevant to the subject that this
access requirement is being displayed for.

This is used to determine if the user is exempt from meeting this requirement.`,name:"restrictionInformation",required:!1,type:{name:"RestrictionInformationResponse"}},onRejectTerms:{defaultValue:null,description:'Invoked when the user clicks the "I do not accept" button.',name:"onRejectTerms",required:!0,type:{name:"() => void"}},onRequestAccess:{defaultValue:null,description:'Invoked when the user clicks the "Request access" button.',name:"onRequestAccess",required:!0,type:{name:"() => void"}},onCancelDataAccessRequest:{defaultValue:null,description:'Invoked when the user clicks the "Cancel Request" button (only shown if a request is active).',name:"onCancelDataAccessRequest",required:!0,type:{name:"() => void"}},error:{defaultValue:null,description:"ReactNode to display if there is an error in the component.",name:"error",required:!1,type:{name:"ReactNode"}},cancelRequestIsPending:{defaultValue:null,description:"Whether the a request to cancel the data access request is currently pending.",name:"cancelRequestIsPending",required:!0,type:{name:"boolean"}}}}}catch{}export{x as M};
