import{j as e}from"./jsx-runtime-Du8NFWEI.js";import{r as a,R as N}from"./index-Dl6G-zuu.js";import"./SynapseClient-D4M9LQNp.js";import"./OrientationBanner-BV5RFxzC.js";import"./getEndpoint-CjoHA800.js";import{d as v,c as U}from"./useAccessRequirements-DaFxdnki.js";import{S as w}from"./LoadingScreen-Cp1NTgGu.js";import{O as V,L as O,c as g,T as j,d as b,M as A}from"./index-Pxtlv3yl.js";import{C as k}from"./HelpPopover-D8Z1j-iS.js";import{B as y}from"./Box-DRdN2jdb.js";import{T as d}from"./Typography-B88_J_TK.js";import{B as D}from"./Button-mb55Lwfk.js";import{W as F}from"./WikiMarkdownEditorButton-DJJqgEJz.js";import{C as f}from"./Checkbox-ByKpZRhl.js";import{M as I}from"./Alert-HJYNNEvY.js";const _=r=>{const{accessRequirement:t}=r;return e.jsxs(y,{mb:2,children:[e.jsx(d,{variant:"body1",fontWeight:700,children:"Instructions (wiki)"}),e.jsx(F,{ownerObjectType:V.ACCESS_REQUIREMENT,ownerObjectId:t.id.toString(),displayWikiMarkdown:!0,buttonProps:{children:"Edit Instructions"}})]})};try{_.displayName="AccessRequirementWikiInstructions",_.__docgenInfo={description:"",displayName:"AccessRequirementWikiInstructions",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}}}}}catch{}const M="Access restricted pending review by Synapse Access and Compliance Team.",B=r=>{switch(r.concreteType){case A:case b:return"";case j:return r.termsOfUse;case g:return r.actContactInfo;case O:return M}},L=r=>r.concreteType===b||r.concreteType==A,E=r=>{const{accessRequirement:t,onChange:i}=r;return e.jsx(e.Fragment,{children:L(t)&&e.jsx(e.Fragment,{children:e.jsxs(y,{mb:2,children:[e.jsx(d,{variant:"body1",fontWeight:700,children:"Accessor requirements"}),e.jsx(f,{label:"Accessors must be certified.",checked:t.isCertifiedUserRequired,onChange:n=>i({...t,isCertifiedUserRequired:n})}),e.jsx(f,{label:"Accessors must have a validated profile.",checked:t.isValidatedProfileRequired,onChange:n=>i({...t,isValidatedProfileRequired:n})}),t.concreteType===A&&e.jsx(f,{label:"Accessors must use two-factor authentication (2FA).",checked:t.isTwoFaRequired,onChange:n=>i({...t,isTwoFaRequired:n})})]})})})};try{E.displayName="AccessorRequirements",E.__docgenInfo={description:"",displayName:"AccessorRequirements",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(updatedAr: AccessRequirement) => void"}}}}}catch{}const q=r=>{const{accessRequirement:t,onConfirmDelete:i,allowDelete:n=!1}=r,[u,c]=a.useState(!1),l=B(t);return e.jsx(e.Fragment,{children:!!l&&e.jsxs(y,{mb:2,children:[e.jsx(d,{variant:"body1",fontWeight:700,mb:1,children:"Legacy text-only instructions"}),e.jsx(d,{variant:"body1",mb:1,children:l}),n&&e.jsxs(e.Fragment,{children:[e.jsx(D,{variant:"contained",color:"error",onClick:()=>c(!0),children:"Delete old instructions"}),e.jsx(k,{open:u,title:"Are you sure?",content:"Deleting the old instructions cannot be undone. Continue?",onCancel:()=>c(!1),onConfirm:()=>{const s={...t};s.concreteType===j?s.termsOfUse=void 0:s.concreteType===g&&(s.actContactInfo=void 0),i(s),c(!1)}})]})]})})};try{q.displayName="AccessRequirementTextInstructions",q.__docgenInfo={description:"",displayName:"AccessRequirementTextInstructions",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},onConfirmDelete:{defaultValue:null,description:"",name:"onConfirmDelete",required:!0,type:{name:"(updatedAr: AccessRequirement) => void"}},allowDelete:{defaultValue:null,description:"",name:"allowDelete",required:!1,type:{name:"boolean"}}}}}catch{}const S=N.forwardRef(function(t,i){const{accessRequirementId:n,onSave:u,onError:c,allowDeleteTextInstructions:l=!1}=t,[s,m]=a.useState(null),{data:p,error:C}=v(n,{staleTime:1/0});a.useEffect(()=>{p&&m(p)},[p]);const{mutateAsync:T,error:h}=U(),R=a.useCallback(async(o,x)=>{try{await T(o),m(o),x||u()}catch{x||c()}},[u,c,T]);return a.useImperativeHandle(i,()=>({save(){s&&R(s,!1)}}),[s,R]),s?e.jsxs(e.Fragment,{children:[e.jsx(q,{accessRequirement:s,allowDelete:l,onConfirmDelete:o=>{R(o,!0)}}),e.jsx(_,{accessRequirement:s}),e.jsx(E,{accessRequirement:s,onChange:o=>m(o)}),h&&e.jsx(I,{severity:"error",sx:{marginTop:2},children:h.reason})]}):C?e.jsx(I,{severity:"error",children:C.reason}):e.jsx(w,{})});try{S.displayName="SetBasicAccessRequirementFields",S.__docgenInfo={description:"",displayName:"SetBasicAccessRequirementFields",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"() => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!0,type:{name:"() => void"}},allowDeleteTextInstructions:{defaultValue:null,description:"",name:"allowDeleteTextInstructions",required:!1,type:{name:"boolean"}}}}}catch{}export{_ as A,S,E as a};
