import{j as t}from"./jsx-runtime-DoxjgJx5.js";import{r as C,a as b}from"./index-Cu9bd8lq.js";import{k as Y}from"./index-BNbykmw2.js";import{s as H,S as j,bZ as fe,aO as he}from"./useFiles-BJeg8vt1.js";import{_ as se,K as _e,N as Ee,L as Re,$ as ie,a0 as Oe}from"./SynapseConstants-xMHIvvjg.js";import{u as ue}from"./useMutation-BUHlmdy0.js";import"./RegularExpressions-B4RNwTAQ.js";import"./OrientationBanner-CRHvrKf4.js";import{b as Ae}from"./useTwoFactorEnrollment-IalElIGA.js";import{n as X}from"./noop-DX6rZLP_.js";import{F as Te}from"./FullWidthAlert-D_YBTMJr.js";import{T as re}from"./TextField-CyttDcj_.js";import{L as M}from"./Link-D8sP8KOh.js";import{B as G}from"./Button-BfexmcsD.js";import{L as $}from"./LoginMethodButton-CZ62SoLr.js";import{B as L}from"./Box-BXEUN41W.js";import{s as ye}from"./styled-D9q5EqxT.js";import{T as we}from"./TextField-cHNg-UFf.js";import{T as K}from"./Typography-BmBIKDjf.js";import{A as Se}from"./Alert-B_MCCiJI.js";import{I as Ie}from"./IconSvg-IR6jdOX4.js";import{I as Fe}from"./IconButton-CLlNv19f.js";const le=["VERIFICATION_CODE","RECOVERY_CODE","LOGGED_IN","DISABLE_2FA_PROMPT"];function Ce(n){const{sessionCallback:o=X,twoFaErrorResponse:u,onTwoFactorAuthRequired:s=X}=n,[c,r]=C.useState("CHOOSE_AUTH_METHOD"),[m,i]=C.useState(),[l,p]=C.useState(),A=new URLSearchParams;A.set("errorCode",Y.PASSWORD_RESET_VIA_EMAIL_REQUIRED);const f=H("/changePassword",A);C.useEffect(()=>{u&&p(u)},[u]),C.useEffect(()=>{const d=new URL(window.location.href),{searchParams:R}=d;if(R){const I=R.get("userId"),e=R.get("twoFaToken");I&&e&&(p({errorCode:Y.TWO_FA_REQUIRED,reason:"",userId:parseInt(I,10),twoFaToken:e,concreteType:"org.sagebionetworks.repo.model.auth.TwoFactorAuthErrorResponse"}),le.includes(c)||r("VERIFICATION_CODE"))}},[c]),C.useEffect(()=>{l&&(p(l),le.includes(c)||r("VERIFICATION_CODE"))},[l]),C.useEffect(()=>{l&&s(l)},[s,l]),C.useEffect(()=>{i(void 0)},[c]);async function y(d){await j.setAccessTokenCookie(d.accessToken),localStorage.setItem(se,d.authenticationReceipt??""),r("LOGGED_IN"),o&&o()}const{mutate:S,isPending:w}=ue({mutationFn:({username:d,password:R,authenticationReceipt:I})=>j.login(d,R,I),onError:d=>{i(d.reason);const{errorResponse:R}=d;R&&"errorCode"in R&&R.errorCode==Y.PASSWORD_RESET_VIA_EMAIL_REQUIRED&&window.location.assign(f.toString())},onSuccess:async d=>{d&&(fe(d)?(r("VERIFICATION_CODE"),p(d)):await y(d))}}),{mutate:O,isPending:v}=ue({mutationFn:j.loginWith2fa,onError:d=>{i(d.reason),(d.reason.includes("The provided twoFaToken is invalid")||d.reason.includes("Token has expired"))&&(console.warn(d),i("Something went wrong. Refresh the page and try again."),window.location.href.includes("twoFaToken")&&window.history.replaceState({},document.title,window.location.href.replaceAll(/(twoFaToken|userId)=[^&]*&?/g,"")))},onSuccess:y}),{mutate:U,isSuccess:V,isPending:k}=Ae({onError:d=>{i(d.reason)}}),_=(d,R)=>{i(void 0);const I=localStorage.getItem(se);S({username:d,password:R,authenticationReceipt:I})};function P(d){return d==null?(i("You did not first log in with your password or a third-party identity provider."),!1):!0}return{step:c,onStepChange:r,submitUsernameAndPassword:_,submitOneTimePassword:(d,R=c==="RECOVERY_CODE"?"RECOVERY_CODE":"TOTP")=>{if(i(void 0),P(l)){const I={userId:l.userId,twoFaToken:l.twoFaToken,otpCode:d,otpType:R};O(I)}},errorMessage:m,loginIsPending:w||v,beginTwoFactorAuthReset:d=>{if(i(void 0),P(l)){const R={userId:l.userId,twoFaToken:l.twoFaToken,twoFaResetEndpoint:d};U(R)}},twoFactorAuthResetIsPending:k,twoFactorAuthResetIsSuccess:V}}function Q(n){return t.jsx(re,{required:!0,fullWidth:!0,autoComplete:"current-password",label:"Password",id:"current-password",type:"password",...n})}try{Q.displayName="PasswordField",Q.__docgenInfo={description:"",displayName:"PasswordField",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}}}}}catch{}function z(n){const o=H("/resetPassword"),{resetPasswordUrl:u=o.toString(),onSubmit:s,loginIsPending:c,hideForgotPasswordButton:r}=n,[m,i]=C.useState(""),[l,p]=C.useState("");function A(f){f.preventDefault(),s(m,l)}return t.jsxs("form",{onSubmit:f=>{A(f)},children:[t.jsx(re,{required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"username",label:"Username or Email Address",id:"username",type:"text",value:m,onChange:f=>i(f.target.value)}),t.jsx(Q,{value:l,onChange:f=>p(f.target.value)}),!r&&t.jsx(M,{href:u,target:u.startsWith("/")?void 0:"_blank",children:"Forgot password?"}),t.jsx(G,{fullWidth:!0,type:"submit",color:"primary",variant:"contained",disabled:c,sx:{height:"50px",mt:4,mb:2},children:c?"Logging you in...":"Sign in"})]})}try{z.displayName="UsernamePasswordForm",z.__docgenInfo={description:"",displayName:"UsernamePasswordForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(username: string, password: string) => void"}},resetPasswordUrl:{defaultValue:null,description:"",name:"resetPasswordUrl",required:!1,type:{name:"string"}},loginIsPending:{defaultValue:null,description:"",name:"loginIsPending",required:!0,type:{name:"boolean"}},hideForgotPasswordButton:{defaultValue:null,description:"",name:"hideForgotPasswordButton",required:!1,type:{name:"boolean"}}}}}catch{}function Z(n){const{onBeginOAuthSignIn:o,ssoRedirectUrl:u,onSelectUsernameAndPassword:s,state:c}=n;function r(m,i){o&&o(),m.preventDefault();const l=u?`${u}${i}`:`${j.getRootURL()}?provider=${i}`;j.oAuthUrlRequest(i,l,c).then(p=>{window.location=p.authorizationUrl}).catch(p=>{console.log("Error on oAuth url ",p)})}return t.jsxs(L,{children:[t.jsx($,{loginMethod:_e,iconName:"google24",onClick:m=>{r(m,ie.GOOGLE)}}),t.jsx($,{loginMethod:Ee,iconName:"orcid",onClick:m=>{r(m,ie.ORCID)}}),t.jsx($,{loginMethod:Re,iconName:"email",onClick:s})]})}try{Z.displayName="AuthenticationMethodSelection",Z.__docgenInfo={description:`To support Google SSO in your portal, you must add your domain to the Authorized Redirect URIs for Synapse authentication.
This can be done by visiting https://sagebionetworks.jira.com/servicedesk/customer/portal/9 to set up a collaboration.
Synapse engineers must add your redirect URL in the Google API console found at https://console.cloud.google.com/ for this functionality to work.`,displayName:"AuthenticationMethodSelection",props:{ssoRedirectUrl:{defaultValue:null,description:"",name:"ssoRedirectUrl",required:!1,type:{name:"string"}},onBeginOAuthSignIn:{defaultValue:null,description:"",name:"onBeginOAuthSignIn",required:!1,type:{name:"(() => void)"}},onSelectUsernameAndPassword:{defaultValue:null,description:"",name:"onSelectUsernameAndPassword",required:!0,type:{name:"() => void"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"OAuth2State"}}}}}catch{}const Pe=ye(we)`
  input {
    text-align: center;
  }
`,De={TextFieldStyled:Pe},xe=n=>t.jsx(De.TextFieldStyled,{...n}),B={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function be(n,o){return n<=0?[]:Array.from({length:n},o)}function ve(n,o,u){return n.map((s,c)=>o===c?u:s)}function de(n){return n.join("")}function ce(n,o){return[...n,o]}function Ue(n,o,u){return n.reduce((s,c,r)=>{const{characters:m,restArrayMerged:i}=s;if(r<u)return{restArrayMerged:i,characters:ce(m,c)};const[l,...p]=i;return{restArrayMerged:p,characters:ce(m,l||"")}},{restArrayMerged:o,characters:[]}).characters}function Ve(n){return n.split("")}function pe(n){const o=b.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return b.useInsertionEffect(()=>{o.current=n}),b.useCallback((...u)=>{var s;return(s=o.current)==null?void 0:s.call(o,...u)},[])}const ke=()=>!0,Ne=b.forwardRef((n,o)=>{const{value:u="",length:s=4,autoFocus:c=!1,onChange:r,TextFieldsProps:m,onComplete:i,validateChar:l=ke,className:p,onBlur:A,...f}=n,y=b.useRef(u),S=pe(i),w=pe(e=>{const a=e.slice(0,s);return{isCompleted:a.length===s,finalValue:a}});b.useEffect(()=>{const{isCompleted:e,finalValue:a}=w(y.current);e&&S(a)},[s,S,w]);const O=be(s,(e,a)=>({character:u[a]||"",inputRef:b.createRef()})),v=e=>O.findIndex(({inputRef:a})=>a.current===e),U=()=>O.map(({character:e})=>e),V=(e,a)=>{const g=ve(U(),e,a);return de(g)},k=e=>{var a,g;(g=(a=O[e])==null?void 0:a.inputRef.current)==null||g.focus()},_=e=>{var a,g;(g=(a=O[e])==null?void 0:a.inputRef.current)==null||g.select()},P=e=>{e+1!==s&&(O[e+1].character?_(e+1):k(e+1))},N=(e,a)=>typeof l!="function"?!0:l(e,a),ae=e=>{const a=v(e.target);if(a===0&&e.target.value.length>1){const{finalValue:x,isCompleted:q}=w(e.target.value);r==null||r(x),q&&(i==null||i(x)),_(x.length-1);return}const g=e.target.value[0]||"";let T=g;T&&!N(T,a)&&(T="");const h=V(a,T);r==null||r(h);const{isCompleted:D,finalValue:F}=w(h);D&&(i==null||i(F)),T!==""?h.length-1<a?_(h.length):P(a):g===""&&h.length<=a&&_(a-1)},d=e=>{const a=e.target,g=a.selectionStart,T=a.selectionEnd,h=v(a),D=g===0&&T===0;if(a.value===e.key)e.preventDefault(),P(h);else if(B.backspace===e.key){if(!a.value)e.preventDefault(),_(h-1);else if(D){e.preventDefault();const F=V(h,"");r==null||r(F),F.length<=h&&_(h-1)}}else B.left===e.key?(e.preventDefault(),_(h-1)):B.right===e.key?(e.preventDefault(),_(h+1)):B.home===e.key?(e.preventDefault(),_(0)):B.end===e.key&&(e.preventDefault(),_(O.length-1))},R=e=>{const a=e.clipboardData.getData("text/plain"),g=e.target,T=O.findIndex(({character:E,inputRef:W})=>E===""||W.current===g),h=U(),D=Ue(h,Ve(a),T).map((E,W)=>N(E,W)?E:""),F=de(D);r==null||r(F);const{isCompleted:x,finalValue:q}=w(F);x?(i==null||i(q),_(s-1)):_(F.length)},I=e=>{if(!O.some(({inputRef:a})=>a.current===e.relatedTarget)){const{isCompleted:a,finalValue:g}=w(u);A==null||A(g,a)}};return t.jsx(L,{display:"flex",gap:"20px",alignItems:"center",ref:o,className:`MuiOtpInput-Box ${p||""}`,...f,children:O.map(({character:e,inputRef:a},g)=>{const{onPaste:T,onFocus:h,onKeyDown:D,className:F,onBlur:x,...q}=typeof m=="function"?m(g)||{}:m||{};return t.jsx(xe,{autoFocus:c?g===0:!1,autoComplete:"one-time-code",value:e,inputRef:a,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${g+1} ${F||""}`,onPaste:E=>{E.preventDefault(),R(E),T==null||T(E)},onFocus:E=>{E.preventDefault(),E.target.select(),h==null||h(E)},onChange:ae,onKeyDown:E=>{d(E),D==null||D(E)},onBlur:E=>{x==null||x(E),I(E)},...q},g)})})}),me=6,Me=["0","1","2","3","4","5","6","7","8","9"];function J(n){const{onSubmit:o,loginIsPending:u}=n,[s,c]=b.useState("");return t.jsxs(L,{children:[t.jsx(Ne,{autoFocus:!0,length:me,value:s,onChange:c,onComplete:o,validateChar:r=>Me.includes(r)||r==="",gap:"2px",sx:{mx:"auto",maxWidth:"350px",".MuiInputBase-root":{paddingLeft:"5px",paddingRight:"5px"},".MuiFormControl-root:first-of-type > .MuiInputBase-root":{borderTopRightRadius:0,borderBottomRightRadius:0},".MuiFormControl-root:last-of-type > .MuiInputBase-root":{borderTopLeftRadius:0,borderBottomLeftRadius:0},".MuiFormControl-root:not(:first-of-type):not(:last-of-type) > .MuiInputBase-root":{borderRadius:0}}}),t.jsx(G,{fullWidth:!0,type:"submit",color:"primary",variant:"contained",sx:{height:"50px",mt:4,mb:2},disabled:s.length!==me||u,onClick:r=>{r.preventDefault(),o(s)},children:u?"Verifying...":"Submit"})]})}try{J.displayName="TOTPForm",J.__docgenInfo={description:"",displayName:"TOTPForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: string) => void"}},loginIsPending:{defaultValue:null,description:"",name:"loginIsPending",required:!0,type:{name:"boolean"}}}}}catch{}const Le=19;function ee(n){const{onSubmit:o,loginIsPending:u}=n,[s,c]=b.useState("");return t.jsxs(L,{children:[t.jsx(re,{placeholder:"Enter backup code",value:s,onChange:r=>{const m=r.target.value.toLowerCase().replace(/[^a-z0-9-]/gi,"");c(m)}}),t.jsx(G,{fullWidth:!0,type:"submit",color:"primary",variant:"contained",sx:{height:"50px",mt:4,mb:2},disabled:s.length!==Le||u,onClick:r=>{r.preventDefault(),o(s)},children:u?"Verifying...":"Submit"})]})}try{ee.displayName="RecoveryCodeForm",ee.__docgenInfo={description:"",displayName:"RecoveryCodeForm",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: string) => void"}},loginIsPending:{defaultValue:null,description:"",name:"loginIsPending",required:!0,type:{name:"boolean"}}}}}catch{}const qe="Use a backup code instead",Be="Use authenticator app instead",je="Lost access to your codes?",He="Send Instructions",Ge="Instructions to reset two-factor authentication were sent to the primary email address associated with your account.";function te(n){const{step:o,loginIsPending:u,onSubmit:s,onClickUseBackupCode:c,onClickUseTOTP:r,hideReset2FA:m,onClickPromptReset2FA:i,onClickReset2FA:l,twoFactorAuthResetIsSuccess:p,twoFactorAuthResetIsPending:A}=n;return t.jsxs(t.Fragment,{children:[o==="VERIFICATION_CODE"&&t.jsxs(t.Fragment,{children:[t.jsx(J,{loginIsPending:u,onSubmit:f=>{s(f,"TOTP")}}),t.jsx(M,{align:"center",color:"grey.700",sx:{display:"block",mx:"auto",my:2},onClick:()=>{c()},children:qe})]}),o==="RECOVERY_CODE"&&t.jsxs(t.Fragment,{children:[t.jsx(ee,{loginIsPending:u,onSubmit:f=>{s(f,"RECOVERY_CODE")}}),t.jsx(M,{align:"center",color:"grey.700",sx:{display:"block",mx:"auto",my:2},onClick:()=>{r()},children:Be})]}),!m&&i&&l&&o!=="DISABLE_2FA_PROMPT"&&t.jsx(M,{align:"center",color:"grey.700",sx:{display:"block",mx:"auto",my:2},onClick:()=>{i()},children:je}),o==="DISABLE_2FA_PROMPT"&&l&&t.jsxs(t.Fragment,{children:[t.jsx(K,{variant:"body1",align:"center",sx:{my:2},children:"To reset two-factor authentication on your account, an email containing instructions will be sent to the primary email address on your account."}),t.jsx(G,{fullWidth:!0,variant:"contained",onClick:l,disabled:A||p,sx:{my:2},children:He}),p&&t.jsx(Se,{severity:"success",sx:{my:1},children:Ge}),t.jsx(M,{align:"center",color:"grey.700",sx:{display:"block",mx:"auto",my:2},onClick:()=>{r()},children:"Go back"})]})]})}try{te.displayName="OneTimePasswordForm",te.__docgenInfo={description:`Component that allows the user to enter a one-time password second authentication factor,
such as a timed one-time password (TOTP) generated using a shared secret, or a single-use recovery code.

The user may also use this UI to begin the process of disabling 2FA on their account.`,displayName:"OneTimePasswordForm",props:{step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"enum",value:[{value:'"VERIFICATION_CODE"'},{value:'"RECOVERY_CODE"'},{value:'"DISABLE_2FA_PROMPT"'}]}},loginIsPending:{defaultValue:null,description:"",name:"loginIsPending",required:!0,type:{name:"boolean"}},onClickUseTOTP:{defaultValue:null,description:"",name:"onClickUseTOTP",required:!0,type:{name:"() => void"}},onClickUseBackupCode:{defaultValue:null,description:"",name:"onClickUseBackupCode",required:!0,type:{name:"() => void"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(code: string, otpType: TwoFactorAuthOtpType) => void"}},hideReset2FA:{defaultValue:null,description:"",name:"hideReset2FA",required:!1,type:{name:"boolean"}},onClickPromptReset2FA:{defaultValue:null,description:"",name:"onClickPromptReset2FA",required:!1,type:{name:"(() => void)"}},onClickReset2FA:{defaultValue:null,description:"",name:"onClickReset2FA",required:!1,type:{name:"(() => void)"}},twoFactorAuthResetIsSuccess:{defaultValue:null,description:"",name:"twoFactorAuthResetIsSuccess",required:!0,type:{name:"boolean"}},twoFactorAuthResetIsPending:{defaultValue:null,description:"",name:"twoFactorAuthResetIsPending",required:!0,type:{name:"boolean"}}}}}catch{}function ne(n){const o=H("/register1"),u=H("/reset2FA"),{ssoRedirectUrl:s,ssoState:c,registerAccountUrl:r=o.toString(),resetPasswordUrl:m,onBeginOAuthSignIn:i,onStepChange:l,step:p,submitUsernameAndPassword:A,submitOneTimePassword:f,errorMessage:y,loginIsPending:S,beginTwoFactorAuthReset:w,hideRegisterButton:O,hideForgotPasswordButton:v,twoFactorAuthResetIsSuccess:U,twoFactorAuthResetIsPending:V,twoFactorAuthResetUri:k=he(u,"twoFAResetToken"),onPasswordLoginSelected:_=X}=n;return t.jsxs(t.Fragment,{children:[p=="CHOOSE_AUTH_METHOD"&&t.jsx(Z,{onSelectUsernameAndPassword:()=>{_(),l("USERNAME_PASSWORD")},onBeginOAuthSignIn:i,ssoRedirectUrl:s,state:c}),p==="USERNAME_PASSWORD"&&t.jsx(z,{loginIsPending:S,resetPasswordUrl:m,onSubmit:(P,N)=>{A(P,N)},hideForgotPasswordButton:v}),(p==="VERIFICATION_CODE"||p==="RECOVERY_CODE"||p==="DISABLE_2FA_PROMPT")&&t.jsx(te,{step:p,loginIsPending:S,onSubmit:(P,N)=>{f(P,N)},onClickUseTOTP:()=>{l("VERIFICATION_CODE")},onClickUseBackupCode:()=>{l("RECOVERY_CODE")},onClickPromptReset2FA:()=>{l("DISABLE_2FA_PROMPT")},onClickReset2FA:()=>{w(k)},twoFactorAuthResetIsPending:V,twoFactorAuthResetIsSuccess:U}),!O&&(p==="CHOOSE_AUTH_METHOD"||p==="USERNAME_PASSWORD")&&t.jsx(L,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:t.jsx(M,{href:r,align:"center",children:"Don't have an account? Create one now"})}),y&&t.jsx(Te,{variant:"warning",isGlobal:!1,description:y})]})}try{ne.displayName="LoginForm",ne.__docgenInfo={description:"",displayName:"LoginForm",props:{ssoRedirectUrl:{defaultValue:null,description:"",name:"ssoRedirectUrl",required:!1,type:{name:"string"}},registerAccountUrl:{defaultValue:null,description:"",name:"registerAccountUrl",required:!1,type:{name:"string"}},resetPasswordUrl:{defaultValue:null,description:"",name:"resetPasswordUrl",required:!1,type:{name:"string"}},onBeginOAuthSignIn:{defaultValue:null,description:"",name:"onBeginOAuthSignIn",required:!1,type:{name:"(() => void)"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"enum",value:[{value:'"CHOOSE_AUTH_METHOD"'},{value:'"USERNAME_PASSWORD"'},{value:'"VERIFICATION_CODE"'},{value:'"RECOVERY_CODE"'},{value:'"DISABLE_2FA_PROMPT"'},{value:'"LOGGED_IN"'}]}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:'(step: "CHOOSE_AUTH_METHOD" | "USERNAME_PASSWORD" | ONE_TIME_PASSWORD_STEP | "LOGGED_IN") => void'}},twoFactorAuthenticationRequired:{defaultValue:null,description:"",name:"twoFactorAuthenticationRequired",required:!1,type:{name:"TwoFactorAuthErrorResponse"}},submitUsernameAndPassword:{defaultValue:null,description:"",name:"submitUsernameAndPassword",required:!0,type:{name:"(username: string, password: string) => void"}},submitOneTimePassword:{defaultValue:null,description:"",name:"submitOneTimePassword",required:!0,type:{name:"(code: string, otpType?: TwoFactorAuthOtpType | undefined) => void"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!0,type:{name:"string | undefined"}},loginIsPending:{defaultValue:null,description:"",name:"loginIsPending",required:!0,type:{name:"boolean"}},beginTwoFactorAuthReset:{defaultValue:null,description:"",name:"beginTwoFactorAuthReset",required:!0,type:{name:"(twoFaResetEndpoint: string) => void"}},twoFactorAuthResetIsSuccess:{defaultValue:null,description:"",name:"twoFactorAuthResetIsSuccess",required:!0,type:{name:"boolean"}},twoFactorAuthResetIsPending:{defaultValue:null,description:"",name:"twoFactorAuthResetIsPending",required:!0,type:{name:"boolean"}},hideRegisterButton:{defaultValue:null,description:"",name:"hideRegisterButton",required:!1,type:{name:"boolean"}},hideForgotPasswordButton:{defaultValue:null,description:"",name:"hideForgotPasswordButton",required:!1,type:{name:"boolean"}},ssoState:{defaultValue:null,description:"",name:"ssoState",required:!1,type:{name:"OAuth2State"}},twoFactorAuthResetUri:{defaultValue:null,description:"",name:"twoFactorAuthResetUri",required:!1,type:{name:"string"}},onPasswordLoginSelected:{defaultValue:null,description:"",name:"onPasswordLoginSelected",required:!1,type:{name:"(() => void)"}}}}}catch{}function We(n){switch(n){case"CHOOSE_AUTH_METHOD":return"CHOOSE_AUTH_METHOD";case"USERNAME_PASSWORD":return"CHOOSE_AUTH_METHOD";case"VERIFICATION_CODE":return"CHOOSE_AUTH_METHOD";case"RECOVERY_CODE":return"VERIFICATION_CODE";case"DISABLE_2FA_PROMPT":return"VERIFICATION_CODE";case"LOGGED_IN":return"LOGGED_IN"}}function oe(n){const{step:o,onStepChange:u,sx:s}=n;return o==="USERNAME_PASSWORD"||o==="VERIFICATION_CODE"||o==="RECOVERY_CODE"?t.jsx(Fe,{className:Oe,type:"button",onClick:()=>{u(We(o))},sx:s,children:t.jsx(Ie,{icon:"arrowBack",wrap:!1,sx:{height:"24px",width:"24px"}})}):null}try{oe.displayName="LoginFlowBackButton",oe.__docgenInfo={description:"",displayName:"LoginFlowBackButton",props:{step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"enum",value:[{value:'"CHOOSE_AUTH_METHOD"'},{value:'"USERNAME_PASSWORD"'},{value:'"VERIFICATION_CODE"'},{value:'"RECOVERY_CODE"'},{value:'"DISABLE_2FA_PROMPT"'},{value:'"LOGGED_IN"'}]}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:'(step: "CHOOSE_AUTH_METHOD" | "USERNAME_PASSWORD" | ONE_TIME_PASSWORD_STEP | "LOGGED_IN") => void'}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps"}}}}}catch{}const Ye="Enter the 6-digit, time-based verification code provided by your authenticator app.",$e="Enter a one-time backup code. Your backup code is a 16 digit code, with groups of 4 letters or numbers separated by hyphens.";function ge(n){const{ssoRedirectUrl:o,sessionCallback:u,registerAccountUrl:s,resetPasswordUrl:c,onBeginOAuthSignIn:r,onTwoFactorAuthRequired:m,hideRegisterButton:i,hideForgotPasswordButton:l,ssoState:p,twoFactorAuthResetUri:A,onPasswordLoginSelected:f}=n,{step:y,onStepChange:S,submitUsernameAndPassword:w,submitOneTimePassword:O,errorMessage:v,loginIsPending:U,beginTwoFactorAuthReset:V,twoFactorAuthResetIsPending:k,twoFactorAuthResetIsSuccess:_}=Ce({sessionCallback:u,twoFaErrorResponse:n.twoFactorAuthenticationRequired,onTwoFactorAuthRequired:m});return t.jsxs(L,{sx:{width:"330px",p:0,mx:"auto",bgColor:"transparent"},children:[t.jsx(oe,{step:y,onStepChange:S,sx:{p:0,mb:1}}),y==="VERIFICATION_CODE"&&t.jsx(K,{variant:"body1",sx:{my:2},align:"center",children:Ye}),y==="RECOVERY_CODE"&&t.jsx(K,{variant:"body1",sx:{my:2},align:"center",children:$e}),t.jsx(ne,{step:y,onStepChange:S,submitUsernameAndPassword:w,submitOneTimePassword:O,errorMessage:v,ssoRedirectUrl:o,registerAccountUrl:s,resetPasswordUrl:c,onBeginOAuthSignIn:r,loginIsPending:U,beginTwoFactorAuthReset:V,hideRegisterButton:i,hideForgotPasswordButton:l,twoFactorAuthResetIsPending:k,twoFactorAuthResetIsSuccess:_,ssoState:p,twoFactorAuthResetUri:A,onPasswordLoginSelected:f})]})}try{ge.displayName="StandaloneLoginForm",ge.__docgenInfo={description:"",displayName:"StandaloneLoginForm",props:{ssoRedirectUrl:{defaultValue:null,description:"",name:"ssoRedirectUrl",required:!1,type:{name:"string"}},sessionCallback:{defaultValue:null,description:"",name:"sessionCallback",required:!0,type:{name:"() => void"}},registerAccountUrl:{defaultValue:null,description:"",name:"registerAccountUrl",required:!1,type:{name:"string"}},resetPasswordUrl:{defaultValue:null,description:"",name:"resetPasswordUrl",required:!1,type:{name:"string"}},onBeginOAuthSignIn:{defaultValue:null,description:"",name:"onBeginOAuthSignIn",required:!1,type:{name:"(() => void)"}},twoFactorAuthenticationRequired:{defaultValue:null,description:"",name:"twoFactorAuthenticationRequired",required:!1,type:{name:"TwoFactorAuthErrorResponse"}},onTwoFactorAuthRequired:{defaultValue:null,description:"",name:"onTwoFactorAuthRequired",required:!1,type:{name:'((twoFaErrorResponse: Pick<TwoFactorAuthErrorResponse, "twoFaToken" | "userId">) => void)'}},hideRegisterButton:{defaultValue:null,description:"",name:"hideRegisterButton",required:!1,type:{name:"boolean"}},hideForgotPasswordButton:{defaultValue:null,description:"",name:"hideForgotPasswordButton",required:!1,type:{name:"boolean"}},ssoState:{defaultValue:null,description:"",name:"ssoState",required:!1,type:{name:"OAuth2State"}},twoFactorAuthResetUri:{defaultValue:null,description:"",name:"twoFactorAuthResetUri",required:!1,type:{name:"string"}},onPasswordLoginSelected:{defaultValue:null,description:"",name:"onPasswordLoginSelected",required:!1,type:{name:"(() => void)"}}}}}catch{}export{te as O,$e as R,ge as S,Ye as T};
