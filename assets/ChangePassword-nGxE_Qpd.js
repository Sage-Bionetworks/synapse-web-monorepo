import{r,an as R,J as w,j as e,h8 as q,c4 as h,c6 as n,h9 as W,B as L,_ as U,fm as k}from"./iframe-CjPdK8o3.js";import{d as D}from"./useUserBundle-Bny1QVf1.js";import{u as G}from"./useChangePasswordFormState-eQOlReq5.js";const g="Your password was successfully changed.";function f(u){const{redirectToRoute:l,hideReset2FA:P=!1}=u,[d,x]=r.useState(""),[o,C]=r.useState(""),[y,v]=r.useState(void 0),[i,j]=r.useState(""),[a,c]=r.useState(""),{isAuthenticated:m}=R(),{data:t,isLoading:S}=D({enabled:m});r.useEffect(()=>{t&&a==""&&c(t.userName??t.emails[0])},[a,t,t?.userName]);const{promptForTwoFactorAuth:_,TwoFactorAuthPrompt:A,successfullyChangedPassword:N,isPending:b,handleChangePasswordWithCurrentPassword:E,error:p}=G({hideReset2FA:P}),F=s=>{s.preventDefault(),o!==i?w("Passwords do not match.","danger"):E(a,d,o)};return N?l?(w(g,"success"),e.jsx(q,{to:l})):e.jsx(h,{severity:"success",children:g}):e.jsxs("div",{children:[_?e.jsx(A,{}):e.jsxs("form",{onSubmit:s=>{F(s)},children:[!m&&e.jsx(n,{required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"username",label:"Username or Email Address",id:"username",type:"text",value:a,onChange:s=>c(s.target.value)}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"currentPassword",label:"Current password",onChange:s=>x(s.target.value),value:d}),e.jsx(n,{fullWidth:!0,required:!0,helperText:y,margin:"normal",type:"password",id:"newPassword",label:"New password",onChange:s=>{const T=W(s.target.value);v(T),C(s.target.value)},value:o}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"confirmPassword",label:"Confirm password",onChange:s=>j(s.target.value),value:i}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx(L,{sx:{marginRight:"26px"},disabled:!d||!o||!i||!a||S||b,variant:"contained",type:"submit",children:"Change Password"}),e.jsx(U,{component:k,to:"/resetPassword",sx:{display:"block",marginTop:"1em",marginLeft:"5px"},children:"Forgot password?"})]})]}),p&&e.jsx(h,{severity:"error",sx:{my:2},children:p.reason})]})}try{f.displayName="ChangePassword",f.__docgenInfo={description:"",displayName:"ChangePassword",props:{redirectToRoute:{defaultValue:null,description:"",name:"redirectToRoute",required:!1,type:{name:"string"}},hideReset2FA:{defaultValue:null,description:"",name:"hideReset2FA",required:!1,type:{name:"boolean"}}}}}catch{}export{f as C};
