var bt=e=>{throw TypeError(e)};var kt=(e,t,n)=>t.has(e)||bt("Cannot "+n);var Ce=(e,t,n)=>(kt(e,t,"read from private field"),n?n.call(e):t.get(e)),De=(e,t,n)=>t.has(e)?bt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ve=(e,t,n,o)=>(kt(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);import{j as p}from"./jsx-runtime-D_zvdyIk.js";import{u as Ut}from"./useEntityBundle-CC8z0cRy.js";import{e as de,c as Ue,A as Fn,W as Cn,Q as Dn}from"./StringUtils-BmiE0y30.js";import{g as qt,B as Lt,v as Vn}from"./useFiles-CwBFozNb.js";import{r as F}from"./index-ChY5Rm6r.js";import{C as Un}from"./ConfirmationDialog-CERq6Ciz.js";import{D as qn}from"./DialogBase-DDeV8lZ9.js";import{u as Ln,a as Kn,S as Bn}from"./SchemaDrivenAnnotationEditor-DqzhO3-t.js";import{d as zn}from"./ToastMessage-Bp4UvL21.js";import{T as Kt}from"./Tooltip-DyXSSX-F.js";import{B as Gn}from"./Box-DnISmt3M.js";import{d as Jn}from"./useEntity-MbJT470l.js";import{u as Wn}from"./useSchema-CKO2nXkW.js";import{f as Ge}from"./DateFormatter-D4o8pckM.js";import{g as Bt}from"./iframe-CqQBMbol.js";import{u as Zn,n as Xn}from"./useQuery-qLmhWmxw.js";import{d as le}from"./dayjs.min-NAl5tlfA.js";import{F as Qn}from"./FullWidthAlert-BORMZYsm.js";import"./SkeletonButton-CIVdic4R.js";import"./SkeletonInlineBlock-WwVItYM2.js";import{S as Hn}from"./SkeletonTable-DSUve1AL.js";import"./SkeletonParagraph-Agn3W6LW.js";import{i as Yn}from"./_baseUniq-BNiF46u2.js";import{g as eo,u as to,d as no}from"./FileHandleUtils-D8azhY4k.js";import{U as vt}from"./UserBadge-Bgd__TlB.js";import{B as ve}from"./Button-CHpGI9QY.js";import{S as oo}from"./Skeleton-DsgEN2lO.js";function Je(e){const{annotationKey:t,title:n,description:o}=e;return n==t&&!o?t:p.jsx(Kt,{placement:"left",title:p.jsxs(p.Fragment,{children:[n!=t&&p.jsx("p",{children:p.jsxs("strong",{children:["Annotation Key: ",t]})}),p.jsx("p",{children:o})]}),children:p.jsx(Gn,{component:"span",sx:r=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:"15%",textDecorationColor:r.palette.secondary.main,textUnderlineOffset:"4px",cursor:"pointer"}),children:n})})}try{Je.displayName="EntityAnnotationKey",Je.__docgenInfo={description:"A component used to display an Entity annotation key.",displayName:"EntityAnnotationKey",props:{annotationKey:{defaultValue:null,description:"The key of the annotation",name:"annotationKey",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"An optional title of the annotation",name:"title",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"An optional",name:"description",required:!1,type:{name:"string"}}}}}catch{}function ro(e){if(!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return!1;const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e}const Te="[a-fA-F0-9]",ie="[a-zA-Z0-9-._~]",C="[!$&'()*+,;=]",ee=`%${Te}${Te}`,Ae="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",ot=`${Ae}\\.${Ae}\\.${Ae}\\.${Ae}`,v=`${Te}{1,4}`,X=`(?:${v}:${v}|${ot})`,so=`(?:(?:${v}:){6}${X}|::(?:${v}:){5}${X}|(?:${v})?::(?:${v}:){4}${X}|(?:(?:${v}:){0,1}${v})?::(?:${v}:){3}${X}|(?:(?:${v}:){0,2}${v})?::(?:${v}:){2}${X}|(?:(?:${v}:){0,3}${v})?::(?:${v}:){1}${X}|(?:(?:${v}:){0,4}${v})?::${X}|(?:(?:${v}:){0,5}${v})?::${v}|(?:(?:${v}:){0,6}${v})?::)`,io=`v${Te}+\\.(?:${ie}|${C}|:)+`,zt=`\\[(?:${so}|${io})\\]`,ae="(?<scheme>[a-zA-Z][a-zA-Z0-9-+.]*)",Gt=":(?<port>\\d*)",ao=`(?:${ie}|${ee}|${C})*?`,co=`(?<host>${zt}|${ot}|${ao})`,po=`(?<userinfo>(?:${ie}|${ee}|${C}|:)*)`,rt=`(?:${ie}|${ee}|${C}|:|@)`,Jt=`${rt}*?`,Wt=`(?:/${Jt})*`,st=`(?<authority>(?:${po}@)?${co}(?:${Gt})?)`,it=`(?<path>${Wt})`,at=`(?<path2>${Jt}${Wt})`,ct=`(?:\\?(?<query>(?:${rt}|/|\\?)*))?`,Zt=`(?:#(?<fragment>(?:${rt}|/|\\?)*))?`,lo=`^${ae}:(?://${st}${it}|${at})${ct}${Zt}$`,mo=`^(?:${ae}:|)(?://${st}${it}|${at})${ct}${Zt}$`,uo=`^${ae}:(?://${st}${it}|${at})${ct}$`,$e="[a-zA-Z0-9-._~\\00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD]",ho="[\\uE000-\\uF8FF\\uF0000-\\uFFFFD\\u100000-\\u10FFFD]",fo=`(?:${$e}|${ee}|${C})*?`,yo=`(?<host>${zt}|${ot}|${fo})`,go=`(?<userinfo>(?:${$e}|${ee}|${C}|:)*)`,pt=`(?:${$e}|${ee}|${C}|:|@)`,Xt=`${pt}*?`,Qt=`(?:/${Xt})*`,dt=`(?<authority>(?:${go}@)?${yo}(?:${Gt})?)`,lt=`(?<path>${Qt})`,mt=`(?<path2>${Xt}${Qt})`,ut=`(?:\\?(?<query>(?:${pt}|${ho}|/|\\?)*))?`,Ht=`(?:#(?<fragment>(?:${pt}|/|\\?)*))?`,Yt=`^${ae}:(?://${dt}${lt}|${mt})${ut}${Ht}$`,en=`^(?:${ae}:|)(?://${dt}${lt}|${mt})${ut}${Ht}$`,tn=`^${ae}:(?://${dt}${lt}|${mt})${ut}$`,$o=e=>(t,n)=>{const o=e.parseReference(t);if(o.scheme===void 0){const r=e.parseAbsolute(n);o.scheme=r.scheme,o.authority===void 0&&(o.authority=r.authority,o.path===""?(o.path=r.path,o.query===void 0&&(o.query=r.query)):o.path.startsWith("/")||(o.path=wo(o.path,r)))}return nn(e,o)},wo=(e,t)=>{if(t.authority&&t.path==="")return"/"+e;{const n=t.path.lastIndexOf("/");return n===-1?e:t.path.slice(0,n+1)+e}},jo=/^\.?\.\/|^\.\.?$/,bo=/^\/\.(?:\/|$)/,ko=/^\/\.\.(?:\/|$)/,vo=e=>{let t="";for(;e.length>0;)if(jo.test(e))e=At(e);else if(bo.test(e))e=_t(e);else if(ko.test(e))e=_t(e),t=Ao(t);else{const n=_o(e);e=At(e),t+=n}return t},At=e=>{const t=e.indexOf("/",1);return t===-1?"":"/"+e.slice(t+1)},_t=e=>{const t=e.indexOf("/",1);return t===-1?"/":"/"+e.slice(t+1)},Ao=e=>{const t=e.lastIndexOf("/");return t===-1?e:e.slice(0,t)},_o=e=>{const t=e.indexOf("/",1);return t===-1?e:e.slice(0,t)},nn=(e,t)=>{let n=t.scheme.toLowerCase()+":";return n+=t.authority===void 0?"":"//"+t.authority.toLowerCase(),n+=e.normalizePath(t.path),n+=t.query===void 0?"":"?"+e.normalizeQuery(t.query),n+=t.fragment===void 0?"":"#"+e.normalizeFragment(t.fragment),n},on=new RegExp(ee,"g"),rn=e=>t=>{const n=parseInt(t.slice(1),16),o=String.fromCharCode(n);return e(o)?o:t.toUpperCase()};RegExp.prototype.test.bind(new RegExp(`${ie}|${C}|[:@]`));const Eo=RegExp.prototype.test.bind(new RegExp(`${$e}|${C}|[:@]`)),Io=e=>t=>vo(t).replaceAll(on,rn(e));RegExp.prototype.test.bind(new RegExp(`${ie}|${C}|[:@/?]`));const Et=RegExp.prototype.test.bind(new RegExp(`${$e}|${C}|[:@/?]`)),It=e=>t=>t.replaceAll(on,rn(e));RegExp.prototype.test.bind(new RegExp(lo));RegExp.prototype.test.bind(new RegExp(mo));RegExp.prototype.test.bind(new RegExp(uo));RegExp.prototype.test.bind(new RegExp(Yt));RegExp.prototype.test.bind(new RegExp(en));RegExp.prototype.test.bind(new RegExp(tn));const ht=(e,t)=>n=>{const o=e.exec(n);if(o===null)throw Error(`Invalid ${t}: ${n}`);const r=o.groups;return r.authority===void 0&&(r.path=r.path2),delete r.path2,r},ft=ht(new RegExp(Yt),"IRI"),sn=ht(new RegExp(en),"IRI-reference"),To=ht(new RegExp(tn),"absolute-IRI"),an={iri:{parseAbsolute:To,parseReference:sn,parse:ft,normalizePath:Io(Eo),normalizeQuery:It(Et),normalizeFragment:It(Et)}},xo=e=>t=>{const n=e.parse(t);return delete n.fragment,nn(e,n)},G=xo(an.iri),me=$o(an.iri),No="",xe=function*(e){if(e.length>0&&!e.startsWith("/"))throw Error("Invalid JSON Pointer");let t=1,n=0;for(;n<e.length;){const o=e.indexOf("/",t);n=o===-1?e.length:o;const r=e.slice(t,n);t=n+1,yield Ro(r)}},So=(e,t=void 0)=>{if(t===void 0){const n=[...xe(e)];return o=>Tt(n,o)}else return Tt(xe(e),t)},Tt=(e,t)=>{let n=No;for(const o of e)t=Mo(t,o,n),n=Y(o,n);return t},Y=(e,t)=>t+"/"+Oo(e),Oo=e=>e.toString().replace(/~/g,"~0").replace(/\//g,"~1"),Ro=e=>e.toString().replace(/~1/g,"/").replace(/~0/g,"~"),Po=(e,t)=>Array.isArray(e)?t==="-"?e.length:parseInt(t,10):t,Mo=(e,t,n="")=>{if(e===void 0)throw TypeError(`Value at '${n}' is undefined and does not have property '${t}'`);if(e===null)throw TypeError(`Value at '${n}' is null and does not have property '${t}'`);if(Fo(e))throw TypeError(`Value at '${n}' is a ${typeof e} and does not have property '${t}'`);{const o=Po(e,t);if(Object.hasOwn(e,o))return e[o]}},Fo=e=>e===null||typeof e!="object",cn=e=>{const t=typeof e;switch(t){case"number":case"string":case"boolean":case"undefined":return t;case"object":if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype)return"object";default:{const n=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JSON compatible type: ${n}`)}}},yt=e=>{const t=e.indexOf("#"),n=t===-1?e.length:t;return e.slice(0,n)},pn=e=>decodeURIComponent(sn(e).fragment||""),Ne={},dn=e=>{if(e.indexOf("#")!==-1){const t=yt(e);return{...Ne[t],id:e}}return Ne[e]},Co=(e,t)=>{const n=ln(e,t);if(!n)throw Error(`Encountered unknown keyword '${e}'`);const o=dn(n);if(!o)throw Error(`Encountered unsupported keyword ${e}. You can provide an implementation for the '${n}' keyword using the 'addKeyword' function.`);return o},d=e=>{Ne[e.id]=e},Ee={},L=(e,t)=>{Ee[e]=t},ne={},ln=(e,t)=>{const n=mn(t);return n.keywords[e]??(n.allowUnknownKeywords||e.startsWith("x-")?`https://json-schema.org/keyword/unknown#${e}`:void 0)},A=(e,t)=>{const n=mn(e);for(const o in n.keywords)if(n.keywords[o]===t)return o},mn=e=>{if(!(e in ne))throw Error(`Encountered unknown dialect '${e}'`);return ne[e]},gt=(e,t,n=!1,o=!0)=>{var r;ne[e]={keywords:{},allowUnknownKeywords:n,persistentDialects:((r=ne[e])==null?void 0:r.persistentDialects)||o};for(const s in t)if(s in Ee)for(const i in Ee[s]){let a=Ee[s][i];!(a in Ne)&&!t[s]&&(a=`https://json-schema.org/keyword/unknown#${i}`),ne[e].keywords[i]=a}else if(!n||t[s])throw delete ne[e],Error(`Unrecognized vocabulary: ${s}. You can define this vocabulary with the 'defineVocabulary' function.`)};var _e={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var xt;function Do(){if(xt)return _e;xt=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,o=/\\([\u000b\u0020-\u00ff])/g,r=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;_e.format=i,_e.parse=a;function i(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var f=m.parameters,$=m.type;if(!$||!s.test($))throw new TypeError("invalid type");var h=$;if(f&&typeof f=="object")for(var k,S=Object.keys(f).sort(),j=0;j<S.length;j++){if(k=S[j],!n.test(k))throw new TypeError("invalid parameter name");h+="; "+k+"="+u(f[k])}return h}function a(m){if(!m)throw new TypeError("argument string is required");var f=typeof m=="object"?c(m):m;if(typeof f!="string")throw new TypeError("argument string is required to be a string");var $=f.indexOf(";"),h=$!==-1?f.slice(0,$).trim():f.trim();if(!s.test(h))throw new TypeError("invalid media type");var k=new g(h.toLowerCase());if($!==-1){var S,j,E;for(e.lastIndex=$;j=e.exec(f);){if(j.index!==$)throw new TypeError("invalid parameter format");$+=j[0].length,S=j[1].toLowerCase(),E=j[2],E.charCodeAt(0)===34&&(E=E.slice(1,-1),E.indexOf("\\")!==-1&&(E=E.replace(o,"$1"))),k.parameters[S]=E}if($!==f.length)throw new TypeError("invalid parameter format")}return k}function c(m){var f;if(typeof m.getHeader=="function"?f=m.getHeader("content-type"):typeof m.headers=="object"&&(f=m.headers&&m.headers["content-type"]),typeof f!="string")throw new TypeError("content-type header is missing from object");return f}function u(m){var f=String(m);if(n.test(f))return f;if(f.length>0&&!t.test(f))throw new TypeError("invalid parameter value");return'"'+f.replace(r,"\\$1")+'"'}function g(m){this.parameters=Object.create(null),this.type=m}return _e}var un=Do();const Vo=Bt(un),ue={},hn=(e,t)=>{ue[e]=t},Uo=e=>{const t=e.headers.get("content-type");if(t===null)throw new Go("The media type of the response could not be determined. Make sure the response includes a 'Content-Type' header.",{cause:e});const n=un.parse(t);for(const o in ue)if(Ko(o,n.type))return ue[o].parse(e);throw new zo(n.type,`'${n.type}' is not supported. Use the 'addMediaTypePlugin' function to add support for this media type.`,{cause:e})},qo="A-Za-z",qe=`[!#$%&'*\\-_.^\`|~\\d${qo}]+`,Lo=`(?<type>${qe})/(?<subType>${qe}(?:\\+(?<suffix>${qe}))?)`,Nt=new RegExp(Lo),Ko=(e,t)=>{var r,s;if(e===t)return!0;const n=(r=Nt.exec(e))==null?void 0:r.groups;if(!n)throw Error(`Unable to parse media-range: ${e}`);const o=(s=Nt.exec(t))==null?void 0:s.groups;if(!o)throw Error(`Unable to parse media-type: ${t}`);return(n.type===o.type||n.type==="*")&&(n.subType===o.subType||n.subType==="*"||n.subType===o.suffix)},Bo=()=>{let e="";for(const t in ue)e=St(e,t,ue[t].quality);return St(e,"*/*","0.001")},St=(e,t,n)=>(e.length>0&&(e+=", "),e+=t,n&&(e+=`; q=${n}`),e);class zo extends Error{constructor(t,n=void 0){super(n),this.name=this.constructor.name,this.mediaType=t}}class Go extends Error{constructor(t=void 0){super(t),this.name=this.constructor.name}}const Jo=(e,t=void 0)=>JSON.parse(e,(n,o)=>{const r=o!==null&&typeof o.$ref=="string"?new H(o.$ref):o;return t?t(n,r):r});var ye,ge;class H{constructor(t,n=void 0){De(this,ye);De(this,ge);Ve(this,ye,t),Ve(this,ge,n??{$ref:t})}get href(){return Ce(this,ye)}toJSON(){return Ce(this,ge)}}ye=new WeakMap,ge=new WeakMap;const fn=e=>{const t=typeof e;switch(t){case"bigint":return"number";case"number":case"string":case"boolean":case"undefined":return t;case"object":if(e instanceof H)return"reference";if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)return"object";default:{const n=t==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":t;throw Error(`Not a JRef compatible type: ${n}`)}}},Wo={parse:async e=>({baseUri:e.url,root:Jo(await e.text()),anchorLocation:Zo}),fileMatcher:e=>/[^/]\.jref$/.test(e)},Zo=e=>decodeURI(e||""),We={},yn=(e,t)=>{We[e]=t},Xo=(e,t)=>{e=me(e,t);const{scheme:n}=ft(e);if(!(n in We))throw new Qo(n,`The '${n}:' URI scheme is not supported. Use the 'addUriSchemePlugin' function to add support for '${n}:' URIs.`);return We[n].retrieve(e,t)};class Qo extends Error{constructor(t,n=void 0){super(n),this.name=this.constructor.name,this.scheme=t}}const Ho=new Set([200,203]),Yo=async e=>{const t=await fetch(e,{headers:{Accept:Bo()}});if(t.status>=400)throw new Ot(t,`Failed to retrieve '${e}'`);if(!Ho.has(t.status))throw new Ot(t,"Unsupported HTTP response status code");return t},gn={retrieve:Yo};class Ot extends Error{constructor(t,n=void 0){super(`${t.status} ${t.statusText}${n?` -- ${n}`:""}`),this.name=this.constructor.name,this.response=t}}var $n=er;function er(e,t){return function n(){t==null&&(t=e.length);var o=[].slice.call(arguments);return o.length>=t?e.apply(this,o):function(){return n.apply(this,o.concat([].slice.call(arguments)))}}}const tr=()=>{var e,t;return((t=(e=globalThis.document)==null?void 0:e.location)==null?void 0:t.toString())??""},$t=async(e,t={_cache:{}})=>{var i,a,c;const n=((i=t.document)==null?void 0:i.baseUri)??tr();e=me(e,n);const o=G(e),{fragment:r}=ft(e),s=t._cache[o]??((c=(a=t.document)==null?void 0:a.embedded)==null?void 0:c[o]);if(s)t.document=s,t.uri=e,t.cursor=t.document.anchorLocation(r);else{try{const u=await Xo(e,n);t.document=await Uo(u),t.uri=u.url+(r===void 0?"":`#${r}`),t.cursor=t.document.anchorLocation(r)}catch(u){const g=t.uri?` Referenced from '${t.uri}'.`:"";throw new or(`Unable to load resource '${e}'.${g}`,u)}t._cache[o]=t.document}return t._value=So(t.cursor,t.document.root),wn(t)},wn=e=>fn(y(e))==="reference"?$t(y(e).href,e):e,y=e=>e._value,P=e=>fn(e._value),jn=(e,t)=>e in t._value,wt=e=>e._value.length,O=$n((e,t)=>wn({...t,cursor:Y(`${e}`,t.cursor),_value:t._value[e]})),K=async function*(e){for(let t=0;t<y(e).length;t++)yield O(t,e)},Ze=function*(e){for(const t in y(e))yield t},nr=async function*(e){for(const t in y(e))yield O(t,e)},J=async function*(e){for(const t in y(e))yield[t,await O(t,e)]};class or extends Error{constructor(t,n){super(t,{cause:n}),this.name=this.constructor.name}}hn("application/reference+json",Wo);yn("http",gn);yn("https",gn);const rr={parse:async e=>{const t=Vo.parse(e.headers.get("content-type")??""),n=t.parameters.schema??t.parameters.profile;return Se(await e.json(),e.url,n)},fileMatcher:async e=>/(\.|\/)schema\.json$/.test(e)},he={},bn=async(e,t=void 0)=>{t||(t={_cache:{}});for(const o in he)o in t._cache||(t._cache[o]=he[o]);const n=await $t(e,{...t});if(typeof n.document.dialectId!="string")throw Error(`The document at ${n.document.baseUri} is not a schema.`);return n},D=(e,t,n)=>{e=structuredClone(e);const o=Se(e,t,n);if(o.baseUri in he)throw Error(`A schema has already been registered for '${o.baseUri}. You can use 'unregisterSchema' to remove the old schema before registering the new one.`);if(o.baseUri.startsWith("file:"))throw Error(`Registering a schema with a 'file:' URI scheme is not allowed: ${o.baseUri}`);he[t?G(t):o.baseUri]=o},sr=e=>e in he,Se=(e,t,n,o={})=>{if(typeof e.$schema=="string"&&(n=e.$schema,delete e.$schema),!n)throw Error("Unable to determine a dialect for the schema. The dialect can be declared in a number of ways, but the recommended way is to use the '$schema' keyword in your schema.");n=G(n);const r=A(n,"https://json-schema.org/keyword/draft-04/id"),s=A(n,"https://json-schema.org/keyword/id")||r;if(!e[s]&&!t)throw Error(`Unable to determine an identifier for the schema. Use the '${s}' keyword or pass a retrievalUri when loading the schema.`);const i=me(e[s]??"",t??"");t=G(i),r&&i.length>t.length?e[s]="#"+pn(i):delete e[s];const a=A(n,"https://json-schema.org/keyword/vocabulary");if(cn(e[a])==="object"){const m=e[a]["https://json-schema.org/draft/2019-09/vocab/core"]||e[a]["https://json-schema.org/draft/2020-12/vocab/core"];gt(t,e[a],m,!1),delete e[a]}const c={"":""},u={},g=A(n,"https://json-schema.org/keyword/draft-2019-09/recursiveAnchor");return e[g]===!0&&(u[""]=`${t}#`),delete e[g],o[t]={baseUri:t,dialectId:n,root:Xe(e,t,n,"",o,c,u),anchorLocation:m=>{if(m===void 0)return"";if(m=decodeURI(m),m[0]==="/")return m;if(m in c)return c[m];throw Error(`No such anchor '${t}#${encodeURI(m)}'`)},anchors:c,dynamicAnchors:u,embedded:o},o[t]},Xe=(e,t,n,o,r,s,i)=>{if(cn(e)==="object"){const a=typeof e.$schema=="string"?G(e.$schema):n,c=A(a,"https://json-schema.org/keyword/id");if(typeof e[c]=="string"){const h=G(me(e[c],t));return e[c]=h,r[h]=Se(e,h,a,r),new H(h,{})}const u=A(a,"https://json-schema.org/keyword/draft-04/id");if(typeof e[u]=="string")if(e[u][0]==="#"){const h=decodeURIComponent(e[u].slice(1));s[h]=o,delete e[u]}else{const h=G(me(e[u],t));return e[u]=h,r[h]=Se(e,h,a,r),new H(h,{})}const g=A(n,"https://json-schema.org/keyword/draft-04/ref");if(typeof e[g]=="string")return new H(e[g],e);const m=A(n,"https://json-schema.org/keyword/anchor");typeof e[m]=="string"&&(s[e[m]]=o,delete e[m]);const f=A(n,"https://json-schema.org/keyword/dynamicAnchor");typeof e[f]=="string"&&(i[e[f]]=`${t}#${encodeURI(o)}`,delete e[f]);const $=A(n,"https://json-schema.org/keyword/draft-2020-12/dynamicAnchor");typeof e[$]=="string"&&(i[e[$]]=`${t}#${encodeURI(o)}`,s[e[$]]=o,delete e[$]);for(const h in e){const k=A(n,"https://json-schema.org/keyword/ref");h===k&&typeof e[h]=="string"?e[h]=new H(e[h],e[h]):e[h]=Xe(e[h],t,n,Y(h,o),r,s,i)}}else if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=Xe(e[a],t,n,Y(a,o),r,s,i);return e},Oe=e=>`${e.document.baseUri}#${encodeURI(e.cursor)}`,ce=e=>(...t)=>{const n=e.length===1?e(t[0]):e(t[0],t[1]),o=t[e.length];return o===void 0?n:n(o)},ir=ce(e=>function*(t){for(const n of t)yield e(n)}),T=ce(e=>async function*(t){for await(const n of t)yield e(n)}),kn=ce(e=>function*(t){let n=0;for(const o of t)n++>=e&&(yield o)}),ar=e=>{const n=_n(e).next();return n.done?void 0:n.value},Rt=function*(){},vn=function*(e,t){const n=_n(t);for(const o of e)yield[o,n.next().value]},cr=function*(...e){for(const t of e)yield*t},An=ce((e,t)=>n=>{for(const o of n)t=e(t,o);return t}),pr=ce(e=>t=>{for(const n of t)if(e(n))return!0;return!1}),R=async e=>{const t=[];for await(const n of e)t.push(n);return t},Qe=async e=>{const t=Object.create(null);for await(const[n,o]of e)t[n]=o;return t},dr=ce(e=>t=>{let n=ar(t)??"";for(const o of t)n+=e+o;return n}),_n=e=>{if(typeof(e==null?void 0:e[Symbol.iterator])=="function")return e[Symbol.iterator]();throw TypeError("`iter` is not iterable")},x=(e,...t)=>An((n,o)=>o(n),e,t),oe=(e,t="",n="",o=void 0)=>{const r=typeof e;switch(r){case"number":case"string":case"boolean":return pe(t,n,e,r,[],o);case"object":if(e===null)return pe(t,n,e,"null",[],o);if(Array.isArray(e)){const s=pe(t,n,e,"array",[],o);return s.children=e.map((i,a)=>oe(i,t,Y(a,n),s)),s}else if(Object.getPrototypeOf(e)===Object.prototype){const s=pe(t,n,e,"object",[],o);return s.children=Object.entries(e).map(i=>{const a=Y(i[0],n),c=pe(t,a,void 0,"property",[],s);return c.children[0]=oe(i[0],t,"*"+a,c),c.children[1]=oe(i[1],t,a,c),c}),s}else if(e instanceof H)return oe(e.toJSON(),t,n,o);default:{const s=r==="object"?Object.getPrototypeOf(e).constructor.name||"anonymous":r;throw Error(`Not a JSON compatible type: ${s}`)}}},pe=(e,t,n,o,r,s)=>{const i={baseUri:e?G(e):"",pointer:t,value:n,type:o,children:r,parent:s,annotations:{}};return i.root=(s==null?void 0:s.root)??i,i},lr=(e,t)=>{const n=yt(e);if(n!==t.baseUri&&n!=="")throw Error(`Reference '${e}' is not local to '${t.baseUri}'`);let o=!1,r=pn(e);r.startsWith("*")&&(r=r.slice(1),o=!0);const s=An((i,a)=>(a=a==="-"&&w(i)==="array"?Pe(i):a,mr(a,i)),t.root,xe(r));return o?s.parent.children[0]:s},fe=e=>`${e.baseUri}#${encodeURI(e.pointer)}`,_=e=>e.value,w=e=>e.type,se=(e,t)=>e in t.value,mr=(e,t)=>{switch(t.type){case"object":{const n=t.children.find(o=>_(o.children[0])===e);return n==null?void 0:n.children[1]}case"array":{const n=parseInt(e,10);return t.children[n]}default:return}},q=function*(e){e.type==="array"&&(yield*e.children)},jt=function*(e){if(e.type==="object")for(const t of e.children)yield t.children[0]},we=function*(e){if(e.type==="object")for(const t of e.children)t.children.length===2&&(yield t.children)},Pe=e=>{if(e.type==="array")return e.children.length},re={};let ur=0;const hr=(e,t)=>{e in re||(re[e]={});const n=`pubsub_subscription_${ur++}`;return re[e][n]=t,n},fr=async(e,t)=>{const n=[];for(const o in re)if(o===e||e.startsWith(`${o}.`))for(const r in re[o])n.push(re[e][r](e,t));await Promise.all(n)};let En;const yr=()=>En,gr=e=>{En=e};class $r extends Error{constructor(t){super("Invalid Schema"),this.name=this.constructor.name,this.output=t}}const wr="https://json-schema.org/evaluation/validate",jr=async(e,t)=>{await fr("validate.metaValidate",e),e.document.baseUri in t.metaData||(t.metaData[e.document.baseUri]={dynamicAnchors:e.document.dynamicAnchors});const n=Oe(e);if(!(n in t)){t[n]=!1;const o=y(e);if(!["object","boolean"].includes(typeof o))throw Error(`No schema found at '${n}'`);t[n]=typeof o=="boolean"?o:await x(J(e),T(async([r,s])=>{const i=Co(r,e.document.dialectId);i.plugin&&t.plugins.add(i.plugin);const a=await i.compile(s,t,e);return[i.id,Y(r,Oe(e)),a]}),R)}return n},br=(e,t,n)=>{var r,s,i,a;let o=!0;for(const c of n.plugins)(r=c.beforeSchema)==null||r.call(c,e,t,n);if(typeof n.ast[e]=="boolean")o=n.ast[e];else for(const c of n.ast[e]){const[u,,g]=c,m=dn(u),f={ast:n.ast,plugins:n.plugins};for(const h of n.plugins)(s=h.beforeKeyword)==null||s.call(h,c,t,f,n,m);const $=m.interpret(g,t,f);$||(o=!1);for(const h of n.plugins)(i=h.afterKeyword)==null||i.call(h,c,t,f,$,n,m)}for(const c of n.plugins)(a=c.afterSchema)==null||a.call(c,e,t,n,o);return o},l={id:wr,compile:jr,interpret:br};class kr{beforeSchema(t,n,o){o.errors??(o.errors=[])}beforeKeyword(t,n,o){o.errors=[]}afterKeyword(t,n,o,r,s,i){if(!r){if(!i.simpleApplicator){const[a,c]=t;s.errors.push({keyword:a,absoluteKeywordLocation:c,instanceLocation:fe(n)})}s.errors.push(...o.errors)}}afterSchema(t,n,o,r){typeof o.ast[t]=="boolean"&&!r&&o.errors.push({keyword:l.id,absoluteKeywordLocation:t,instanceLocation:fe(n)}),this.errors=o.errors}}class vr{beforeSchema(t,n,o){o.errors??(o.errors=[])}beforeKeyword(t,n,o){o.errors=[]}afterKeyword(t,n,o,r,s){if(!r){const[i,a]=t,c={keyword:i,absoluteKeywordLocation:a,instanceLocation:fe(n)};s.errors.push(c),o.errors.length>0&&(c.errors=o.errors)}}afterSchema(t,n,o,r){typeof o.ast[t]=="boolean"&&!r&&o.errors.push({keyword:l.id,absoluteKeywordLocation:t,instanceLocation:fe(n)}),this.errors=o.errors}}const Ie="FLAG",He="BASIC",Ar="DETAILED";gr(Ie);const In=async e=>{const t={metaData:{},plugins:new Set},n=await l.compile(e,t);return{ast:t,schemaUri:n}},Tn=$n(({ast:e,schemaUri:t},n,o=Ie)=>{const r=typeof o=="string"?o:o.outputFormat??Ie,s=o.plugins??[],i={ast:e,plugins:[...e.plugins,...s]};let a;switch(r){case Ie:break;case He:a=new kr,i.plugins.push(a);break;case Ar:a=new vr,i.plugins.push(a);break;default:throw Error(`Unsupported output format '${r}'`)}const c=l.interpret(t,n,i);return!c&&a?{valid:c,errors:a.errors}:{valid:c}}),Le={};hr("validate.metaValidate",async(e,t)=>{if(!t.document.validated){if(t.document.validated=!0,!(t.document.dialectId in Le)){const r=await bn(t.document.dialectId,t),s=await In(r);Le[t.document.dialectId]=Tn(s)}const n=oe(t.document.root,t.document.baseUri),o=Le[t.document.dialectId](n,yr());if(!o.valid)throw new $r(o)}});class _r{beforeSchema(t,n,o){o.annotations??(o.annotations=[]),o.schemaAnnotations=[]}beforeKeyword(t,n,o){o.annotations=[]}afterKeyword(t,n,o,r,s,i){var a;if(r){const[c,u,g]=t,m=(a=i.annotation)==null?void 0:a.call(i,g,n,o);m!==void 0&&s.schemaAnnotations.push({keyword:c,absoluteKeywordLocation:u,instanceLocation:fe(n),annotation:m}),s.schemaAnnotations.push(...o.annotations)}}afterSchema(t,n,o,r){r&&o.annotations.push(...o.schemaAnnotations),this.annotations=o.annotations}}const Er="https://json-schema.org/keyword/additionalProperties",Ir=async(e,t,n)=>{const o=A(e.document.dialectId,"https://json-schema.org/keyword/properties"),r=await O(o,n),s=P(r)==="object"?ir(g=>"^"+Tr(g)+"$",Ze(r)):Rt(),i=A(e.document.dialectId,"https://json-schema.org/keyword/patternProperties"),a=await O(i,n),c=P(a)==="object"?Ze(a):Rt(),u=x(cr(s,c),dr("|"))||"(?!)";return[new RegExp(u,"u"),await l.compile(e,t)]},Tr=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),xr=([e,t],n,o)=>{var s;if(w(n)!=="object")return!0;let r=!0;for(const[i,a]of we(n)){const c=_(i);e.test(c)||(l.interpret(t,a,o)||(r=!1),(s=o.evaluatedProperties)==null||s.add(c))}return r},Nr=!0,Sr={id:Er,compile:Ir,interpret:xr,simpleApplicator:Nr},Or="https://json-schema.org/keyword/allOf",Rr=(e,t)=>x(K(e),T(n=>l.compile(n,t)),R),Pr=(e,t,n,o,r)=>{let s=!0;for(const i of e)l.interpret(i,t,n,o,r)||(s=!1);return s},Mr=!0,Fr={id:Or,compile:Rr,interpret:Pr,simpleApplicator:Mr},Cr={id:"https://json-schema.org/keyword/anchor"},Dr="https://json-schema.org/keyword/anyOf",Vr=(e,t)=>x(K(e),T(n=>l.compile(n,t)),R),Ur=(e,t,n,o,r)=>e.filter(i=>l.interpret(i,t,n,o,r)).length>0,qr={id:Dr,compile:Vr,interpret:Ur},Lr="https://json-schema.org/keyword/conditional",Kr=(e,t)=>x(K(e),xn,T(n=>l.compile(n,t)),R),Br=(e,t,n)=>{for(let o=0;o<e.length;o+=2){const r=l.interpret(e[o],t,n);if(o+1===e.length)return r;if(r)return l.interpret(e[o+1],t,n)}return!0},xn=async function*(e,t=1){for await(const n of e)t>0&&P(n)==="array"?yield*xn(K(n),t-1):yield n},zr={id:Lr,compile:Kr,interpret:Br};var Ke,Pt;function Gr(){return Pt||(Pt=1,Ke={space:"",cycles:!1,replacer:(e,t)=>t,stringify:JSON.stringify}),Ke}var Be,Mt;function Q(){return Mt||(Mt=1,Be={isArray:Array.isArray,assign:Object.assign,isObject:e=>typeof e=="object",isFunction:e=>typeof e=="function",isBoolean:e=>typeof e=="boolean",isRegex:e=>e instanceof RegExp,keys:Object.keys}),Be}var ze,Ft;function Jr(){if(Ft)return ze;Ft=1;const e=Gr(),t=Q().isFunction,n=Q().isBoolean,o=Q().isObject,r=Q().isArray,s=Q().isRegex,i=Q().assign,a=Q().keys;function c(g){return g==null?g:s(g)?g.toString():g.toJSON?g.toJSON():g}function u(g,m){m=m||i({},e),t(m)&&(m={compare:m});const f=m.space||e.space,$=n(m.cycles)?m.cycles:e.cycles,h=m.replacer||e.replacer,k=m.stringify||e.stringify,S=m.compare&&function(E){return function(V){return function(B,b){const I={key:B,value:V[B]},z={key:b,value:V[b]};return E(I,z)}}}(m.compare);$||k(g);const j=[];return function E(V,B,b,I){const z=f?`
`+new Array(I+1).join(f):"",Me=f?": ":":";if(b=c(b),b=h.call(V,B,b),b!==void 0){if(!o(b)||b===null)return k(b);if(r(b)){const W=[];for(let U=0;U<b.length;U++){const Z=E(b,U,b[U],I+1)||k(null);W.push(z+f+Z)}return"["+W.join(",")+z+"]"}else{if($){if(j.indexOf(b)!==-1)return k("[Circular]");j.push(b)}const W=a(b).sort(S&&S(b)),U=[];for(let Z=0;Z<W.length;Z++){const te=W[Z],be=E(b,te,b[te],I+1);if(!be)continue;const Fe=k(te)+Me+be;U.push(z+f+Fe)}return j.splice(j.indexOf(b),1),"{"+U.join(",")+z+"}"}}}({"":g},"",g,0)}return ze=u,ze}var Wr=Jr();const je=Bt(Wr),Zr="https://json-schema.org/keyword/const",Xr=e=>je(y(e)),Qr=(e,t)=>je(_(t))===e,Hr={id:Zr,compile:Xr,interpret:Qr},Yr="https://json-schema.org/keyword/contains",es=async(e,t,n)=>{const o=await l.compile(e,t),r=A(e.document.dialectId,"https://json-schema.org/keyword/minContains"),s=await O(r,n),i=P(s)==="number"?y(s):1,a=A(e.document.dialectId,"https://json-schema.org/keyword/maxContains"),c=await O(a,n),u=P(c)==="number"?y(c):Number.MAX_SAFE_INTEGER;return{contains:o,minContains:i,maxContains:u}},ts=({contains:e,minContains:t,maxContains:n},o,r)=>{var a;if(w(o)!=="array")return!0;let s=0,i=0;for(const c of q(o))l.interpret(e,c,r)&&(s++,(a=r.evaluatedItems)==null||a.add(i)),i++;return s>=t&&s<=n},ns={id:Yr,compile:es,interpret:ts},os="https://json-schema.org/keyword/comment",rs=()=>{},ss=()=>!0,is={id:os,compile:rs,interpret:ss},as="https://json-schema.org/keyword/contentEncoding",cs=e=>y(e),ps=()=>!0,ds=(e,t)=>{if(w(t)==="string")return e},ls={id:as,compile:cs,interpret:ps,annotation:ds},ms="https://json-schema.org/keyword/contentMediaType",us=e=>y(e),hs=()=>!0,fs=(e,t)=>{if(w(t)==="string")return e},ys={id:ms,compile:us,interpret:hs,annotation:fs},gs="https://json-schema.org/keyword/contentSchema",$s=async(e,t,n)=>{const o=A(e.document.dialectId,"https://json-schema.org/keyword/contentMediaType"),r=await O(o,n);if(y(r)!==void 0)return y(e)},ws=()=>!0,js=(e,t)=>{if(!(!e||w(t)!=="string"))return e},bs={id:gs,compile:$s,interpret:ws,annotation:js},ks="https://json-schema.org/keyword/default",vs=e=>y(e),As=()=>!0,_s=e=>e,Es={id:ks,compile:vs,interpret:As,annotation:_s},Is="https://json-schema.org/keyword/definitions",Ts=(e,t)=>x(nr(e),T(n=>l.compile(n,t)),R),xs=()=>!0,Ns={id:Is,compile:Ts,interpret:xs},Ss="https://json-schema.org/keyword/dependentRequired",Os=e=>x(J(e),T(([t,n])=>[t,y(n)]),R),Rs=(e,t)=>{if(w(t)!=="object")return!0;let n=!0;for(const[o,r]of e)se(o,t)&&!r.every(s=>se(s,t))&&(n=!1);return n},Ps={id:Ss,compile:Os,interpret:Rs},Ms="https://json-schema.org/keyword/dependentSchemas",Fs=(e,t)=>x(J(e),T(async([n,o])=>[n,await l.compile(o,t)]),R),Cs=(e,t,n)=>{if(w(t)!=="object")return!0;let o=!0;for(const[r,s]of e)se(r,t)&&!l.interpret(s,t,n)&&(o=!1);return o},Ds=!0,Vs={id:Ms,compile:Fs,interpret:Cs,simpleApplicator:Ds},Us="https://json-schema.org/keyword/deprecated",qs=e=>y(e),Ls=()=>!0,Ks=e=>e,Bs={id:Us,compile:qs,interpret:Ls,annotation:Ks},zs="https://json-schema.org/keyword/description",Gs=e=>y(e),Js=()=>!0,Ws=e=>e,Zs={id:zs,compile:Gs,interpret:Js,annotation:Ws},Xs={id:"https://json-schema.org/keyword/dynamicAnchor"},Qs="https://json-schema.org/keyword/dynamicRef",Hs=async(e,t)=>{const n=y(e),o=await $t(e.document.baseUri,e);return await l.compile(o,t),n},Ys=(e,t,n)=>{if(!(e in n.dynamicAnchors))throw Error(`No dynamic anchor found for "${e}"`);return l.interpret(n.dynamicAnchors[e],t,n)},ei=!0,ti={beforeSchema(e,t,n){n.dynamicAnchors={...n.ast.metaData[yt(e)].dynamicAnchors,...n.dynamicAnchors}},beforeKeyword(e,t,n,o){n.dynamicAnchors=o.dynamicAnchors}},ni={id:Qs,compile:Hs,interpret:Ys,simpleApplicator:ei,plugin:ti},oi="https://json-schema.org/keyword/else",ri=async(e,t,n)=>{const o=A(e.document.dialectId,"https://json-schema.org/keyword/if");if(jn(o,n)){const r=await O(o,n);return[await l.compile(r,t),await l.compile(e,t)]}else return[]},si=([e,t],n,o)=>e===void 0||l.interpret(e,n,{...o,plugins:o.ast.plugins})||l.interpret(t,n,o),ii=!0,ai={id:oi,compile:ri,interpret:si,simpleApplicator:ii},ci="https://json-schema.org/keyword/enum",pi=e=>x(K(e),T(y),T(je),R),di=(e,t)=>{const n=je(_(t));return e.some(o=>n===o)},li={id:ci,compile:pi,interpret:di},mi="https://json-schema.org/keyword/examples",ui=e=>y(e),hi=()=>!0,fi=e=>e,yi={id:mi,compile:ui,interpret:hi,annotation:fi},gi="https://json-schema.org/keyword/exclusiveMaximum",$i=e=>y(e),wi=(e,t)=>w(t)!=="number"||_(t)<e,ji={id:gi,compile:$i,interpret:wi},bi="https://json-schema.org/keyword/exclusiveMinimum",ki=e=>y(e),vi=(e,t)=>w(t)!=="number"||_(t)>e,Ai={id:bi,compile:ki,interpret:vi},_i="https://json-schema.org/keyword/format",Ei=e=>y(e),Ii=()=>!0,Ti=e=>e,xi={id:_i,compile:Ei,interpret:Ii,annotation:Ti},Ni={id:"https://json-schema.org/keyword/id"},Si="https://json-schema.org/keyword/if",Oi=(e,t)=>l.compile(e,t),Ri=(e,t,n)=>(l.interpret(e,t,n),!0),Pi=!0,Mi={id:Si,compile:Oi,interpret:Ri,simpleApplicator:Pi},Fi=()=>{const e=M(!1),t=M(!0);return N(e,t),{start:e,end:t}},Ci=e=>{const t=M(!1),n=M(!0);return Ki(t,n,e),{start:t,end:n}},Di=(e,t)=>e===void 0?t:(N(e.end,t.start),e.end.isEnd=!1,{start:e.start,end:t.end}),Vi=(e,t)=>{const n=M(!1);N(n,e.start),N(n,t.start);const o=M(!0);return N(e.end,o),e.end.isEnd=!1,N(t.end,o),t.end.isEnd=!1,{start:n,end:o}},Ui=e=>{const t=M(!1),n=M(!0);return N(t,n),N(t,e.start),N(e.end,n),N(e.end,e.start),e.end.isEnd=!1,{start:t,end:n}},qi=e=>{const t=M(!1),n=M(!0);return N(t,n),N(t,e.start),N(e.end,n),e.end.isEnd=!1,{start:t,end:n}},Li=e=>{const t=M(!1),n=M(!0);return N(t,e.start),N(e.end,n),N(e.end,e.start),e.end.isEnd=!1,{start:t,end:n}},N=(e,t)=>{e.epsilonTransitions.push(t)},Ki=(e,t,n)=>{e.transition[n]=t},M=e=>({isEnd:e,transition:{},epsilonTransitions:[]}),Bi="https://json-schema.org/keyword/itemPattern",Nn=async(e,t)=>{const n=[[]];let o=n[0];for await(const r of K(e))if(P(r)==="string"){const s=y(r);if(s==="*")o.push(Ui(o.pop()));else if(s==="?")o.push(qi(o.pop()));else if(s==="+")o.push(Li(o.pop()));else if(s==="|")o=[],n.push(o);else throw Error(`Unsupported pattern syntax: ${s}`)}else{const s=P(r)==="array"?Nn(r,t):Ci(await l.compile(r,t));o.push(await s)}return wt(e)===0?Fi():n.map(r=>r.reduce(Di)).reduce(Vi)},zi=(e,t,n)=>{if(w(t)!=="array")return!0;let o=[];Ye(e.start,o,[]);for(const r of q(t)){const s=[];for(const i of o){const a=Gi(i.transition,r,n);a&&Ye(a,s,[])}o=s}return!!o.find(r=>r.isEnd)},Ye=(e,t,n)=>{if(e.epsilonTransitions.length)for(const o of e.epsilonTransitions)n.find(r=>r===o)||(n.push(o),Ye(o,t,n));else t.push(e)},Gi=(e,t,n)=>{for(const o in e)if(l.interpret(o,t,n))return e[o]},Ji={id:Bi,compile:Nn,interpret:zi},Wi="https://json-schema.org/keyword/items",Zi=async(e,t,n)=>{const o=A(e.document.dialectId,"https://json-schema.org/keyword/prefixItems"),r=await O(o,n);return[P(r)==="array"?wt(r):0,await l.compile(e,t)]},Xi=([e,t],n,o)=>{var i;if(w(n)!=="array")return!0;let r=!0,s=e;for(const a of kn(e,q(n)))l.interpret(t,a,o)||(r=!1),(i=o.evaluatedItems)==null||i.add(s),s++;return r},Qi=!0,Hi={id:Wi,compile:Zi,interpret:Xi,simpleApplicator:Qi},Yi="https://json-schema.org/keyword/maxContains",ea=e=>y(e),ta=()=>!0,na={id:Yi,compile:ea,interpret:ta},oa="https://json-schema.org/keyword/maxItems",ra=e=>y(e),sa=(e,t)=>w(t)!=="array"||Pe(t)<=e,ia={id:oa,compile:ra,interpret:sa},aa="https://json-schema.org/keyword/maxLength",ca=e=>y(e),pa=(e,t)=>w(t)!=="string"||[..._(t)].length<=e,da={id:aa,compile:ca,interpret:pa},la="https://json-schema.org/keyword/maxProperties",ma=e=>y(e),ua=(e,t)=>w(t)!=="object"||[...jt(t)].length<=e,ha={id:la,compile:ma,interpret:ua},fa="https://json-schema.org/keyword/maximum",ya=e=>y(e),ga=(e,t)=>w(t)!=="number"||_(t)<=e,$a={id:fa,compile:ya,interpret:ga},wa="https://json-schema.org/keyword/minContains",ja=e=>y(e),ba=()=>!0,ka={id:wa,compile:ja,interpret:ba},va="https://json-schema.org/keyword/minItems",Aa=e=>y(e),_a=(e,t)=>w(t)!=="array"||Pe(t)>=e,Ea={id:va,compile:Aa,interpret:_a},Ia="https://json-schema.org/keyword/minLength",Ta=e=>y(e),xa=(e,t)=>w(t)!=="string"||[..._(t)].length>=e,Na={id:Ia,compile:Ta,interpret:xa},Sa="https://json-schema.org/keyword/minProperties",Oa=e=>y(e),Ra=(e,t)=>w(t)!=="object"||[...jt(t)].length>=e,Pa={id:Sa,compile:Oa,interpret:Ra},Ma="https://json-schema.org/keyword/minimum",Fa=e=>y(e),Ca=(e,t)=>w(t)!=="number"||_(t)>=e,Da={id:Ma,compile:Fa,interpret:Ca},Va="https://json-schema.org/keyword/multipleOf",Ua=e=>y(e),qa=(e,t)=>{if(w(t)!=="number")return!0;const n=_(t)%e;return Ct(0,n)||Ct(e,n)},Ct=(e,t)=>Math.abs(e-t)<11920929e-14,La={id:Va,compile:Ua,interpret:qa},Ka="https://json-schema.org/keyword/not",Ba=(...e)=>l.compile(...e),za=(...e)=>!l.interpret(...e),Ga={id:Ka,compile:Ba,interpret:za},Ja="https://json-schema.org/keyword/oneOf",Wa=(e,t)=>x(K(e),T(n=>l.compile(n,t)),R),Za=(e,t,n)=>{let o=0;for(const r of e)l.interpret(r,t,n)&&o++;return o===1},Xa={id:Ja,compile:Wa,interpret:Za},Qa="https://json-schema.org/keyword/pattern",Ha=e=>new RegExp(y(e),"u"),Ya=(e,t)=>w(t)!=="string"||e.test(_(t)),ec={id:Qa,compile:Ha,interpret:Ya},tc="https://json-schema.org/keyword/patternProperties",nc=(e,t)=>x(J(e),T(async([n,o])=>[new RegExp(n,"u"),await l.compile(o,t)]),R),oc=(e,t,n)=>{var r;if(w(t)!=="object")return!0;let o=!0;for(const[s,i]of e)for(const[a,c]of we(t)){const u=_(a);s.test(u)&&(l.interpret(i,c,n)||(o=!1),(r=n.evaluatedProperties)==null||r.add(u))}return o},rc=!0,sc={id:tc,compile:nc,interpret:oc,simpleApplicator:rc},ic="https://json-schema.org/keyword/prefixItems",ac=(e,t)=>x(K(e),T(n=>l.compile(n,t)),R),cc=(e,t,n)=>{var i;if(w(t)!=="array")return!0;let o=!0,r=0;const s=Pe(t);for(const[a,c]of vn(e,q(t))){if(r>=s)break;l.interpret(a,c,n)||(o=!1),(i=n.evaluatedItems)==null||i.add(r),r++}return o},pc=!0,dc={id:ic,compile:ac,interpret:cc,simpleApplicator:pc},lc="https://json-schema.org/keyword/properties",mc=(e,t)=>x(J(e),T(async([n,o])=>[n,await l.compile(o,t)]),Qe),uc=(e,t,n)=>{var r;if(w(t)!=="object")return!0;let o=!0;for(const[s,i]of we(t)){const a=_(s);a in e&&(l.interpret(e[a],i,n)||(o=!1),(r=n.evaluatedProperties)==null||r.add(a))}return o},hc=!0,fc={id:lc,compile:mc,interpret:uc,simpleApplicator:hc},yc="https://json-schema.org/keyword/propertyDependencies",gc=(e,t)=>x(J(e),T(async([n,o])=>[n,await x(J(o),T(async([r,s])=>[r,await l.compile(s,t)]),Qe)]),Qe),$c=(e,t,n)=>{if(w(t)!=="object")return!0;let o=!0;const r=_(t);for(const[s,i]of Object.entries(e)){const a=r[s];se(s,t)&&a in i&&!l.interpret(i[a],t,n)&&(o=!1)}return o},wc=!0,jc={id:yc,compile:gc,interpret:$c,simpleApplicator:wc},bc="https://json-schema.org/keyword/propertyNames",kc=(e,t)=>l.compile(e,t),vc=(e,t,n)=>{if(w(t)!=="object")return!0;let o=!0;for(const r of jt(t))l.interpret(e,r,n)||(o=!1);return o},Ac=!0,_c={id:bc,compile:kc,interpret:vc,simpleApplicator:Ac},Ec="https://json-schema.org/keyword/readOnly",Ic=e=>y(e),Tc=()=>!0,xc=e=>e,Nc={id:Ec,compile:Ic,interpret:Tc,annotation:xc},Sc="https://json-schema.org/keyword/ref",Oc=(...e)=>l.compile(...e),Rc=(...e)=>l.interpret(...e),Pc=!0,Mc={id:Sc,compile:Oc,interpret:Rc,simpleApplicator:Pc},Fc="https://json-schema.org/keyword/requireAllExcept",Cc=async(e,t,n)=>{const o=await y(e),r=A(e.document.dialectId,"https://json-schema.org/keyword/properties"),s=await O(r,n),i=P(s)==="object"?Ze(s):[],a=new Set(i);return o.forEach(c=>i.remove(c)),[...a]},Dc=(e,t)=>w(t)!=="object"||e.every(n=>Object.hasOwn(_(t),n)),Vc={id:Fc,compile:Cc,interpret:Dc},Uc="https://json-schema.org/keyword/required",qc=e=>y(e),Lc=(e,t)=>w(t)!=="object"||e.every(n=>Object.hasOwn(_(t),n)),Kc={id:Uc,compile:qc,interpret:Lc},Bc="https://json-schema.org/keyword/title",zc=e=>y(e),Gc=()=>!0,Jc=e=>e,Wc={id:Bc,compile:zc,interpret:Gc,annotation:Jc},Zc="https://json-schema.org/keyword/then",Xc=async(e,t,n)=>{const o=A(e.document.dialectId,"https://json-schema.org/keyword/if");if(jn(o,n)){const r=await O(o,n);return[await l.compile(r,t),await l.compile(e,t)]}else return[]},Qc=([e,t],n,o)=>e===void 0||!l.interpret(e,n,{...o,plugins:o.ast.plugins})||l.interpret(t,n,o),Hc=!0,Yc={id:Zc,compile:Xc,interpret:Qc,simpleApplicator:Hc},ep="https://json-schema.org/keyword/type",tp=e=>y(e),np=(e,t)=>typeof e=="string"?Dt(t)(e):e.some(Dt(t)),Dt=e=>t=>t==="integer"?w(e)==="number"&&Number.isInteger(_(e)):w(e)===t,op={id:ep,compile:tp,interpret:np},rp="https://json-schema.org/keyword/unevaluatedItems",sp=async(e,t,n)=>[Oe(n),await l.compile(e,t)],ip=([e,t],n,o)=>{var c;if(w(n)!=="array"||o.rootSchema===e)return!0;const r=new cp(e);l.interpret(e,n,{...o,plugins:[...o.ast.plugins,r]});const s=r.evaluatedItems;let i=!0,a=0;for(const u of q(n))s.has(a)||(l.interpret(t,u,o)||(i=!1),(c=o.evaluatedItems)==null||c.add(a)),a++;return i},ap=!0;class cp{constructor(t){this.rootSchema=t}beforeSchema(t,n,o){o.evaluatedItems??(o.evaluatedItems=new Set),o.schemaEvaluatedItems??(o.schemaEvaluatedItems=new Set)}beforeKeyword(t,n,o){o.rootSchema=this.rootSchema,o.evaluatedItems=new Set}afterKeyword(t,n,o,r,s){if(r)for(const i of o.evaluatedItems)s.schemaEvaluatedItems.add(i)}afterSchema(t,n,o,r){if(r)for(const s of o.schemaEvaluatedItems)o.evaluatedItems.add(s);this.evaluatedItems=o.evaluatedItems}}const pp={id:rp,compile:sp,interpret:ip,simpleApplicator:ap},dp="https://json-schema.org/keyword/unevaluatedProperties",lp=async(e,t,n)=>[Oe(n),await l.compile(e,t)],mp=([e,t],n,o)=>{var a;if(w(n)!=="object"||o.rootSchema===e)return!0;const r=new hp(e);l.interpret(e,n,{...o,plugins:[...o.ast.plugins,r]});const s=r.evaluatedProperties;let i=!0;for(const[c,u]of we(n)){const g=_(c);s.has(g)||(l.interpret(t,u,o)||(i=!1),(a=o.evaluatedProperties)==null||a.add(g))}return i},up=!0;class hp{constructor(t){this.rootSchema=t}beforeSchema(t,n,o){o.evaluatedProperties??(o.evaluatedProperties=new Set),o.schemaEvaluatedProperties??(o.schemaEvaluatedProperties=new Set)}beforeKeyword(t,n,o){o.rootSchema=this.rootSchema,o.evaluatedProperties=new Set}afterKeyword(t,n,o,r,s){if(r)for(const i of o.evaluatedProperties)s.schemaEvaluatedProperties.add(i)}afterSchema(t,n,o,r){if(r)for(const s of o.schemaEvaluatedProperties)o.evaluatedProperties.add(s);this.evaluatedProperties=o.evaluatedProperties}}const fp={id:dp,compile:lp,interpret:mp,simpleApplicator:up},yp="https://json-schema.org/keyword/uniqueItems",gp=e=>y(e),$p=(e,t)=>{if(w(t)!=="array"||e===!1)return!0;const n=_(t).map(je);return new Set(n).size===n.length},wp={id:yp,compile:gp,interpret:$p},jp="https://json-schema.org/keyword/unknown",bp=e=>[[...xe(e.cursor)].pop(),y(e)],kp=()=>!0,vp=([,e])=>e,Ap={id:jp,compile:bp,interpret:kp,annotation:vp},_p={id:"https://json-schema.org/keyword/vocabulary"},Ep="https://json-schema.org/keyword/writeOnly",Ip=e=>y(e),Tp=()=>!0,xp=e=>e,Np={id:Ep,compile:Ip,interpret:Tp,annotation:xp};hn("application/schema+json",rr);d(Sr);d(Fr);d(Cr);d(qr);d(zr);d(Hr);d(ns);d(is);d(ls);d(ys);d(bs);d(Es);d(Ns);d(Ps);d(Vs);d(Bs);d(Zs);d(Xs);d(ni);d(ai);d(li);d(yi);d(ji);d(Ai);d(xi);d(Ni);d(Mi);d(Ji);d(Hi);d(na);d(ia);d(da);d(ha);d($a);d(ka);d(Ea);d(Na);d(Pa);d(Da);d(La);d(Ga);d(Xa);d(ec);d(sc);d(dc);d(fc);d(jc);d(_c);d(Nc);d(Mc);d(Vc);d(Kc);d(Wc);d(Yc);d(op);d(pp);d(fp);d(wp);d(Ap);d(_p);d(Np);const Sp={$schema:"https://json-schema.org/validation",$vocabulary:{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/unevaluated":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0},title:"Core and Validation specifications meta-schema",$dynamicAnchor:"meta",allOf:[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}]},Op={$schema:"https://json-schema.org/validation",title:"Core vocabulary meta-schema",$dynamicAnchor:"meta",type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{type:"string",format:"uri"},$anchor:{$ref:"#/$defs/anchor"},$ref:{type:"string",format:"uri-reference"},$dynamicRef:{$ref:"#/$defs/anchor"},$dynamicAnchor:{$ref:"#/$defs/anchor"},$vocabulary:{type:"object",propertyNames:{type:"string",format:"uri"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},$defs:{anchor:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"}}},Rp={$schema:"https://json-schema.org/validation",title:"Applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"meta"},contains:{$dynamicRef:"meta"},itemPattern:{$ref:"#/$defs/itemPattern"},additionalProperties:{$dynamicRef:"meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"meta"}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"},propertyNames:{format:"regex"}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"meta"}},propertyDependencies:{type:"object",additionalProperties:{type:"object",additionalProperties:{$dynamicRef:"meta"}}},propertyNames:{$dynamicRef:"meta"},if:{$dynamicRef:"meta"},then:{$dynamicRef:"meta"},else:{$dynamicRef:"meta"},conditional:{type:"array",items:{if:{type:"array"},then:{items:{$dynamicRef:"meta"}},else:{$dynamicRef:"meta"}}},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"meta"}},$defs:{schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"meta"}},itemPattern:{type:"array",itemPattern:[[{if:{type:"array"},then:{$ref:"#/$defs/itemPattern"},else:{$dynamicRef:"meta"}},{enum:["?","*","+"]},"?","|",{const:"|"}],"*"]}}},Pp={$schema:"https://json-schema.org/validation",title:"Validation vocabulary meta-schema",$dynamicAnchor:"meta",properties:{multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeInteger"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeInteger"},uniqueItems:{type:"boolean"},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger"},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeInteger"},required:{$ref:"#/$defs/stringArray"},optional:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}},const:!0,enum:{type:"array",items:!0},type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]}},$defs:{nonNegativeInteger:{type:"integer",minimum:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0}}},Mp={$schema:"https://json-schema.org/validation",title:"Meta-data vocabulary meta-schema",$dynamicAnchor:"meta",properties:{title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean"},readOnly:{type:"boolean"},writeOnly:{type:"boolean"},examples:{type:"array"}}},Fp={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for annotation results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},Cp={$schema:"https://json-schema.org/validation",title:"Format vocabulary meta-schema for assertion results",$dynamicAnchor:"meta",properties:{format:{type:"string"}}},Dp={$schema:"https://json-schema.org/validation",title:"Content vocabulary meta-schema",$dynamicAnchor:"meta",properties:{contentMediaType:{type:"string"},contentEncoding:{type:"string"},contentSchema:{$dynamicRef:"meta"}}},Vp={$schema:"https://json-schema.org/validation",title:"Unevaluated applicator vocabulary meta-schema",$dynamicAnchor:"meta",properties:{unevaluatedItems:{$dynamicRef:"meta"},unevaluatedProperties:{$dynamicRef:"meta"}}};L("https://json-schema.org/vocab/core",{$anchor:"https://json-schema.org/keyword/anchor",$comment:"https://json-schema.org/keyword/comment",$defs:"https://json-schema.org/keyword/definitions",$dynamicAnchor:"https://json-schema.org/keyword/dynamicAnchor",$dynamicRef:"https://json-schema.org/keyword/dynamicRef",$id:"https://json-schema.org/keyword/id",$ref:"https://json-schema.org/keyword/ref",$vocabulary:"https://json-schema.org/keyword/vocabulary"});L("https://json-schema.org/vocab/applicator",{additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",contains:"https://json-schema.org/keyword/contains",minContains:"https://json-schema.org/keyword/minContains",maxContains:"https://json-schema.org/keyword/maxContains",dependentSchemas:"https://json-schema.org/keyword/dependentSchemas",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",conditional:"https://json-schema.org/keyword/conditional",items:"https://json-schema.org/keyword/items",itemPattern:"https://json-schema.org/keyword/itemPattern",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",patternProperties:"https://json-schema.org/keyword/patternProperties",prefixItems:"https://json-schema.org/keyword/prefixItems",properties:"https://json-schema.org/keyword/properties",propertyDependencies:"https://json-schema.org/keyword/propertyDependencies",propertyNames:"https://json-schema.org/keyword/propertyNames"});L("https://json-schema.org/vocab/validation",{const:"https://json-schema.org/keyword/const",dependentRequired:"https://json-schema.org/keyword/dependentRequired",enum:"https://json-schema.org/keyword/enum",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",requireAllExcept:"https://json-schema.org/keyword/requireAllExcept",pattern:"https://json-schema.org/keyword/pattern",required:"https://json-schema.org/keyword/required",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems"});L("https://json-schema.org/vocab/meta-data",{default:"https://json-schema.org/keyword/default",deprecated:"https://json-schema.org/keyword/deprecated",description:"https://json-schema.org/keyword/description",examples:"https://json-schema.org/keyword/examples",readOnly:"https://json-schema.org/keyword/readOnly",title:"https://json-schema.org/keyword/title",writeOnly:"https://json-schema.org/keyword/writeOnly"});L("https://json-schema.org/vocab/format-annotation",{format:"https://json-schema.org/keyword/format"});L("https://json-schema.org/vocab/format-assertion",{format:"https://json-schema.org/keyword/format-assertion"});L("https://json-schema.org/vocab/content",{contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",contentSchema:"https://json-schema.org/keyword/contentSchema"});L("https://json-schema.org/vocab/unevaluated",{unevaluatedItems:"https://json-schema.org/keyword/unevaluatedItems",unevaluatedProperties:"https://json-schema.org/keyword/unevaluatedProperties"});const Sn="https://json-schema.org/validation";gt(Sn,{"https://json-schema.org/vocab/core":!0,"https://json-schema.org/vocab/applicator":!0,"https://json-schema.org/vocab/validation":!0,"https://json-schema.org/vocab/meta-data":!0,"https://json-schema.org/vocab/format-annotation":!0,"https://json-schema.org/vocab/content":!0,"https://json-schema.org/vocab/unevaluated":!0});D(Sp,Sn);D(Op,"https://json-schema.org/meta/core");D(Rp,"https://json-schema.org/meta/applicator");D(Pp,"https://json-schema.org/meta/validation");D(Mp,"https://json-schema.org/meta/meta-data");D(Fp,"https://json-schema.org/meta/format-annotation");D(Cp,"https://json-schema.org/meta/format-assertion");D(Dp,"https://json-schema.org/meta/content");D(Vp,"https://json-schema.org/meta/unevaluated");const Up={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},qp="https://json-schema.org/keyword/draft-04/additionalItems",Lp=async(e,t,n)=>{const o=A(e.document.dialectId,"https://json-schema.org/keyword/draft-04/items"),r=await O(o,n);return[P(r)==="array"?wt(r):Number.MAX_SAFE_INTEGER,await l.compile(e,t)]},Kp=([e,t],n,o)=>{var i;if(w(n)!=="array")return!0;let r=!0,s=e;for(const a of kn(e,q(n)))l.interpret(t,a,o)||(r=!1),(i=o.evaluatedItems)==null||i.add(s),s++;return r},Bp=!0,zp={id:qp,compile:Lp,interpret:Kp,simpleApplicator:Bp},Gp="https://json-schema.org/keyword/draft-06/contains",Jp=(e,t)=>l.compile(e,t),Wp=(e,t,n)=>w(t)!=="array"||pr(o=>l.interpret(e,o,n),q(t)),Zp={id:Gp,compile:Jp,interpret:Wp},Xp="https://json-schema.org/keyword/draft-04/dependencies",Qp=(e,t)=>x(J(e),T(async([n,o])=>[n,P(o)==="array"?y(o):await l.compile(o,t)]),R),Hp=(e,t,n)=>w(t)!=="object"?!0:e.every(([o,r])=>se(o,t)?Array.isArray(r)?r.every(s=>se(s,t)):l.interpret(r,t,n):!0),Yp={id:Xp,compile:Qp,interpret:Hp},ed="https://json-schema.org/keyword/draft-04/items",td=(e,t)=>P(e)==="array"?x(K(e),T(n=>l.compile(n,t)),R):l.compile(e,t),nd=(e,t,n)=>{var s,i;if(w(t)!=="array")return!0;let o=!0,r=0;if(typeof e=="string")for(const a of q(t))l.interpret(e,a,n)||(o=!1),(s=n.evaluatedItems)==null||s.add(r++);else for(const[a,c]of vn(e,q(t))){if(!c)break;l.interpret(a,c,n)||(o=!1),(i=n.evaluatedItems)==null||i.add(r),r++}return o},od=!0,rd={id:ed,compile:td,interpret:nd,simpleApplicator:od},sd={id:"https://json-schema.org/keyword/draft-04/id"},id={id:"https://json-schema.org/keyword/draft-04/ref"};d(zp);d(Zp);d(Yp);d(sd);d(rd);d(id);const et="http://json-schema.org/draft-07/schema";L(et,{$id:"https://json-schema.org/keyword/draft-04/id",$ref:"https://json-schema.org/keyword/draft-04/ref",$comment:"https://json-schema.org/keyword/comment",additionalItems:"https://json-schema.org/keyword/draft-04/additionalItems",additionalProperties:"https://json-schema.org/keyword/additionalProperties",allOf:"https://json-schema.org/keyword/allOf",anyOf:"https://json-schema.org/keyword/anyOf",const:"https://json-schema.org/keyword/const",contains:"https://json-schema.org/keyword/draft-06/contains",contentEncoding:"https://json-schema.org/keyword/contentEncoding",contentMediaType:"https://json-schema.org/keyword/contentMediaType",default:"https://json-schema.org/keyword/default",definitions:"https://json-schema.org/keyword/definitions",dependencies:"https://json-schema.org/keyword/draft-04/dependencies",description:"https://json-schema.org/keyword/description",enum:"https://json-schema.org/keyword/enum",examples:"https://json-schema.org/keyword/examples",exclusiveMaximum:"https://json-schema.org/keyword/exclusiveMaximum",exclusiveMinimum:"https://json-schema.org/keyword/exclusiveMinimum",format:"https://json-schema.org/keyword/format",if:"https://json-schema.org/keyword/if",then:"https://json-schema.org/keyword/then",else:"https://json-schema.org/keyword/else",items:"https://json-schema.org/keyword/draft-04/items",maxItems:"https://json-schema.org/keyword/maxItems",maxLength:"https://json-schema.org/keyword/maxLength",maxProperties:"https://json-schema.org/keyword/maxProperties",maximum:"https://json-schema.org/keyword/maximum",minItems:"https://json-schema.org/keyword/minItems",minLength:"https://json-schema.org/keyword/minLength",minProperties:"https://json-schema.org/keyword/minProperties",minimum:"https://json-schema.org/keyword/minimum",multipleOf:"https://json-schema.org/keyword/multipleOf",not:"https://json-schema.org/keyword/not",oneOf:"https://json-schema.org/keyword/oneOf",pattern:"https://json-schema.org/keyword/pattern",patternProperties:"https://json-schema.org/keyword/patternProperties",properties:"https://json-schema.org/keyword/properties",propertyNames:"https://json-schema.org/keyword/propertyNames",readOnly:"https://json-schema.org/keyword/readOnly",required:"https://json-schema.org/keyword/required",title:"https://json-schema.org/keyword/title",type:"https://json-schema.org/keyword/type",uniqueItems:"https://json-schema.org/keyword/uniqueItems",writeOnly:"https://json-schema.org/keyword/writeOnly"});gt(et,{[et]:!0},!0);D(Up);const ad="https://json-schema.org/validation",cd=(e,t,n=ad)=>{const o=ln(t,n);return e.annotations[o]??[]};class pd extends Error{constructor(t){super("Validation Error"),this.name=this.constructor.name,this.output=t}}const dd=async(e,t=void 0,n=void 0)=>{const o=await bn(e),r=await In(o),s=(i,a)=>ld(r,oe(i),a);return t===void 0?s:s(t,n)},ld=(e,t,n=He)=>{const o=new _r,r=n.plugins??[],s=Tn(e,t,{outputFormat:typeof n=="string"?n:n.outputFormat??He,plugins:[o,...r]});if(!s.valid)throw new pd(s);for(const i of o.annotations){const a=lr(i.instanceLocation,t),c=i.keyword;a.annotations[c]||(a.annotations[c]=[]),a.annotations[c].unshift(i.annotation)}return t};function On(e,t,n){if(t){for(const[o,r]of we(t))if(_(o)===e)return cd(r,n)[0]}}function md(e,t){if(t){const n=On(e,t,"title");if(n)return n}return e}function ud(e,t){if(t)return On(e,t,"description")}function hd(e){const[t,n]=F.useState(!1);return F.useEffect(()=>{if(e&&e.$id)if(sr(e.$id))n(!0);else try{D(e),n(!0)}catch(o){console.error("Unable to register JSON Schema in @hyperjump/json-schema:",o)}},[e]),t}function fd(e,t){const n=hd(t);return Zn({queryKey:["getAnnotatedInstance",{json:e,schema:t,schemaIsRegistered:n}],queryFn:()=>{if(e&&t&&n)try{return dd(t.$id,e)}catch(o){console.error("Could not create annotated schema instance:",o)}return null},enabled:!!(t&&e)})}function Re(e){return typeof e=="number"||typeof e=="boolean"?e.toString():ro(e)?Ge(le(e)):e}function tt(e){const{entityId:t,versionNumber:n}=e,[o,r]=F.useState(!1),{data:s,isLoading:i,refetch:a}=Jn(t,n,!0),c=s==null?void 0:s.entityMetadata,u=s==null?void 0:s.annotations,{data:g,isLoading:m}=Ln(t),{data:f,isLoading:$}=Wn(g==null?void 0:g.jsonSchemaVersionInfo.$id,{enabled:!!g}),{data:h,isLoading:k}=fd(s==null?void 0:s.entity,f),{data:S,refetch:j}=Kn(t,{enabled:!!g}),E=!!g,V=!!c&&!!S&&le(c.modifiedOn).diff(le(S.validatedOn))>0,B=F.useCallback(async()=>{r(!0);const I=[void a(),void j()];await Promise.allSettled(I),r(!1)},[a,j]);return i||m||$||k||o?p.jsx(Hn,{numRows:3,numCols:2}):p.jsxs(p.Fragment,{children:[c&&u&&Yn(u)?p.jsxs("div",{className:"placeholder",children:["This"," ",de(Ue(c.concreteType))," ","has no annotations."]}):null,p.jsx("table",{className:"AnnotationsTable",children:p.jsxs("tbody",{children:[u&&Object.keys(u).map(I=>p.jsxs("tr",{className:"AnnotationsTable__Row",children:[p.jsx("td",{className:"AnnotationsTable__Row__Key",children:p.jsx(Je,{annotationKey:I,title:md(I,h),description:ud(I,h)})}),p.jsx("td",{className:"AnnotationsTable__Row__Value",children:Array.isArray(u[I])?u[I].map(Re).join(", "):Re(u[I])})]},I)),E?p.jsxs("tr",{className:"AnnotationsTable__Row",children:[p.jsx("td",{className:"AnnotationsTable__Row__Key Schema",children:"Validation Schema"}),p.jsx("td",{className:"AnnotationsTable__Row__Value",children:p.jsx("a",{href:`${qt(Lt.REPO_ENDPOINT)}/repo/v1/schema/type/registered/${g.jsonSchemaVersionInfo.$id}`,target:"_blank",rel:"noopener noreferrer",children:g.jsonSchemaVersionInfo.schemaName})})]}):null]})}),c&&E&&V&&p.jsx(Qn,{variant:"warning",description:`This ${de(Ue(c.concreteType))} has changed since it has been last validated. If this ${de(Ue(c.concreteType))} is expected to have annotations derived from the Validation Schema, they may not yet be visible.`,primaryButtonConfig:{text:"Reload Annotations",onClick:()=>{B()}},isGlobal:!1})]})}try{Re.displayName="getDisplayedAnnotation",Re.__docgenInfo={description:"",displayName:"getDisplayedAnnotation",props:{}}}catch{}try{tt.displayName="AnnotationsTable",tt.__docgenInfo={description:"",displayName:"AnnotationsTable",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}const nt=({entityId:e,versionNumber:t})=>{var u,g,m,f,$,h,k;const{data:n}=Ut(e,t),o=n&&Fn(n.entity),r=n?eo(n):void 0,s=(u=n==null?void 0:n.entity)==null?void 0:u.parentId,i=r==null?void 0:r.storageLocationId,{data:a}=to(s,i,{enabled:s!==void 0&&i!=null});let c;return r&&(c=no(r,a)),n?p.jsx("table",{className:"MetadataTable",children:p.jsxs("tbody",{children:[p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:"Name"}),p.jsx("td",{className:"MetadataTable__Row__Value",children:(g=n.entity)==null?void 0:g.name})]}),p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:"Type"}),p.jsx("td",{className:"MetadataTable__Row__Value",children:de(n.entityType)})]}),p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:"Synapse ID"}),p.jsx("td",{className:"MetadataTable__Row__Value",children:(m=n.entity)==null?void 0:m.id})]}),o&&p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:"Version"}),p.jsx("td",{className:"MetadataTable__Row__Value",children:Cn(n.entity)})]}),c&&p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:"Storage"}),p.jsx("td",{className:"MetadataTable__Row__Value",children:c})]}),p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:" Last Modified By"}),p.jsxs("td",{className:"MetadataTable__Row__Value",children:[p.jsx(vt,{userId:(f=n.entity)==null?void 0:f.modifiedBy})," at"," ",Ge(le(($=n.entity)==null?void 0:$.modifiedOn))]})]}),p.jsxs("tr",{className:"MetadataTable__Row",children:[p.jsx("td",{className:"MetadataTable__Row__Key",children:"Created By"}),p.jsxs("td",{className:"MetadataTable__Row__Value",children:[p.jsx(vt,{userId:(h=n.entity)==null?void 0:h.createdBy})," at"," ",Ge(le((k=n.entity)==null?void 0:k.createdOn))]})]})]})}):null};try{nt.displayName="MetadataTable",nt.__docgenInfo={description:"",displayName:"MetadataTable",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}const yd=["METADATA","ANNOTATIONS"];function Vt(e){const{entityId:t,versionNumber:n,show:o,onClose:r,initialTab:s="METADATA",showTabs:i=!0,onEditModeChanged:a=Xn}=e,c=F.useRef(null),[u,g]=F.useState(s),[m,f]=F.useState(!1),[$,h]=F.useState(!1),[k,S]=F.useState(()=>h(!1));F.useEffect(()=>(a($),()=>{a(!1)}),[$,a]);const{data:j}=Ut(t,n),E=j&&j.permissions.canEdit,V=j&&Dn(j.entityType),B=V&&j.entity.isLatestVersion,b=u==="METADATA"&&j&&!window.location.href.includes(t),I=p.jsxs(ve,{variant:"contained",onClick:()=>window.open(`${qt(Lt.PORTAL_ENDPOINT)}Synapse:${t}`,"_blank","noopener"),children:["Open"," ",j?de(j==null?void 0:j.entityType):""]}),z=u==="ANNOTATIONS"&&$,Me=p.jsx(ve,{variant:"contained",onClick:()=>{c.current.formElement.current.requestSubmit()},children:"Save Annotations"}),W=u==="ANNOTATIONS"&&$,U=p.jsx(ve,{variant:"outlined",onClick:()=>{S(()=>()=>h(!1)),f(!0)},children:"Cancel"}),Z=E&&u==="ANNOTATIONS"&&!$,te=V&&!B,be=p.jsx(Kt,{title:te?"Annotations can only be edited on the latest version":void 0,children:p.jsx("span",{children:p.jsx(ve,{variant:"contained",disabled:te,onClick:()=>{h(!0)},children:"Edit"})})}),Fe=p.jsxs(p.Fragment,{children:[i&&!$?p.jsx("div",{className:"Tabs",children:yd.map(ke=>p.jsx("div",{className:"Tab",role:"tab",onClick:Mn=>{Mn.stopPropagation(),g(ke)},"aria-selected":ke===u,children:ke},ke))}):null,p.jsx("div",{style:u==="ANNOTATIONS"?{}:{display:"none"},children:$?p.jsx(Vn,{children:p.jsx(Bn,{entityId:t,formRef:c,hideActions:!0,onSuccess:()=>{zn("Annotations successfully updated.","success"),h(!1)},onCancel:()=>h(!1)})}):p.jsx(tt,{entityId:t,versionNumber:n})}),p.jsx("div",{style:u==="METADATA"?{}:{display:"none"},children:p.jsx(nt,{entityId:t,versionNumber:n})})]}),Rn=p.jsx(Un,{open:m,title:"Unsaved Changes",content:"Any unsaved changes will be lost. Are you sure you want to close the editor?",onCancel:()=>{f(!1)},onConfirm:()=>{f(!1),k()}}),Pn=F.useMemo(()=>{if(j!=null&&j.entity.name){if(u==="ANNOTATIONS")return`${$?"Edit ":""}Annotations for ${j.entity.name}`}else return p.jsx(oo,{width:"40%"});return j.entity.name},[u,j==null?void 0:j.entity.name,$]);return p.jsx(qn,{className:"EntityMetadata",open:o,onCancel:()=>{$?(f(!0),S(()=>()=>{h(!1),r()})):r()},maxWidth:$?"md":"sm",title:Pn,content:Fe,actions:p.jsxs(p.Fragment,{children:[Rn,W&&U,z&&Me,Z&&be,b&&I]})})}try{Vt.displayName="EntityModal",Vt.__docgenInfo={description:"",displayName:"EntityModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},initialTab:{defaultValue:null,description:"",name:"initialTab",required:!1,type:{name:"enum",value:[{value:'"METADATA"'},{value:'"ANNOTATIONS"'}]}},showTabs:{defaultValue:null,description:"",name:"showTabs",required:!1,type:{name:"boolean"}},onEditModeChanged:{defaultValue:null,description:"",name:"onEditModeChanged",required:!1,type:{name:"(isInEditMode: boolean) => void"}}}}}catch{}export{Vt as E,Re as g};
