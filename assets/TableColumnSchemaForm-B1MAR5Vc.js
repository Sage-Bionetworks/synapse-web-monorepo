import{U as Ye,j as l,as as Xe,ar as Ft,aE as gn,a9 as Qe,bG as Ke,r as I,f0 as Ae,eN as j,c5 as De,av as at,eb as it,dL as ot,dO as Y,b_ as xt,b1 as vn,eO as wt,i6 as Pt,hX as zt,fl as et,bA as Fe,V as w,da as bt,db as _n,_ as $t,c2 as Bt,J as lt,dr as xn,i7 as bn,B as P,X as Ze,aq as Tn,e5 as ut,gS as Cn,dn as dt,e_ as Sn,c8 as kn,c1 as jn,aY as wn,e3 as nt,dq as In}from"./iframe-DkJtXMGY.js";import{A as En}from"./SchemaDrivenAnnotationEditor-ahYb2L0A.js";import{p as Ut}from"./pluralize-Dtp1DlEB.js";import{D as Nn}from"./DateTimePicker-BR4MscyF.js";import{M as qt,i as ct,g as It,f as mt,D as Mn,c as Pe,a as Tt,b as Wt,d as Jt,e as Et,h as An,j as On,k as Vn,l as Ln,m as Rn,n as Zn,o as Dn,t as Nt}from"./MultiValueField-YKPycj2i.js";import{a2 as Fn}from"./useMobilePicker-BQTbo9ri.js";import{M as ve}from"./MenuItem-__VZzdvD.js";import{E as Pn}from"./EntityFinderModal-BOkmhP5J.js";import{F as Mt}from"./EntityFinder-BSjdqWAe.js";import{V as zn}from"./useEntitySelection-D5WeSzBR.js";import{C as $n}from"./ConfirmationDialog-DYXCYbxt.js";import{C as Gt}from"./Checkbox-1S1SsZEO.js";import{B as Bn}from"./DropdownSelect-DbPTI3Fr.js";import{g as Ht}from"./groupBy-CDC241_8.js";const Un=Ye([l.jsx("path",{d:"M13 9V5h-2v6H9.83L12 13.17 14.17 11H13z",opacity:".3"},"0"),l.jsx("path",{d:"M15 9V3H9v6H5l7 7 7-7zm-3 4.17L9.83 11H11V5h2v6h1.17zM5 18h14v2H5z"},"1")]),qn=Ye(l.jsx("path",{d:"m17.73 12.02 3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34a.996.996 0 0 0-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29s.51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2.66 9.34-3.63-3.62 3.63-3.63 3.62 3.62z"})),Wn=Ye(l.jsx("path",{d:"m5 9 1.41 1.41L11 5.83V22h2V5.83l4.59 4.59L19 9l-7-7z"})),Jn=Ye(l.jsx("path",{d:"m19 15-1.41-1.41L13 18.17V2h-2v16.17l-4.59-4.59L5 15l7 7z"}));function Gn(n,e,t){const{keyFactory:s}=Xe();return Ft({...t,queryKey:s.getDefaultColumnModelsQueryKey(n,e),queryFn:async()=>(await Qe.getDefaultColumnModels(n,e)).list})}function Hn(n,e){const{accessToken:t,keyFactory:s}=Xe();return Ft({...e,queryKey:s.getAnnotationColumnModelsQueryKey(n),queryFn:()=>Qe.getAnnotationColumnModels(n,t)})}function ma(n){const{accessToken:e}=Xe();return gn({...n,mutationFn:async t=>(await Qe.createColumnModels(e,t)).list})}const Yn={};function Xn(n,e){return Ke(n,function(t,s,r){s(this,e(t(this),r))})}const st=(n,e,t)=>(e.has(t)?e:e.set(t,n())).get(t),Qn=new WeakMap,Kn=(n,e,t,s)=>{const r=st(()=>new WeakMap,Qn,e),a=st(()=>new WeakMap,r,t);return st(n,a,s)};function Yt(n,e,t=Object.is){return Kn(()=>{const s=Symbol(),r=([i,o])=>{if(o===s)return e(i);const d=e(i,o);return t(o,d)?o:d},a=Ke(i=>{const o=i(a),d=i(n);return r([d,o])});return a.init=s,a},n,e,t)}const es=n=>typeof(n==null?void 0:n.then)=="function";function ts(n=()=>{try{return window.localStorage}catch(t){(Yn?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(t);return}},e){var t;let s,r;const a={getItem:(d,u)=>{var m,b;const M=A=>{if(A=A||"",s!==A){try{r=JSON.parse(A,e==null?void 0:e.reviver)}catch{return u}s=A}return r},g=(b=(m=n())==null?void 0:m.getItem(d))!=null?b:null;return es(g)?g.then(M):M(g)},setItem:(d,u)=>{var m;return(m=n())==null?void 0:m.setItem(d,JSON.stringify(u,void 0))},removeItem:d=>{var u;return(u=n())==null?void 0:u.removeItem(d)}},i=d=>(u,m,b)=>d(u,M=>{let g;try{g=JSON.parse(M||"")}catch{g=b}m(g)});let o;try{o=(t=n())==null?void 0:t.subscribe}catch{}return!o&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(o=(d,u)=>{if(!(n()instanceof window.Storage))return()=>{};const m=b=>{b.storageArea===n()&&b.key===d&&u(b.newValue)};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}}),o&&(a.subscribe=i(o)),a}ts();function ns(n,e){const t=I.useMemo(()=>Ke(null,(s,r,...a)=>n(s,r,...a)),[n]);return Ae(t,e)}Y.extend(Fn);function ss(n){const{onChange:e,value:t,disabled:s,SelectProps:r,selectFormHelperText:a}=n;return l.jsxs(at,{fullWidth:!0,children:[l.jsxs(it,{...r,disabled:s,value:t||"",onChange:i=>{i.target.value==null?e(void 0):e(i.target.value)},children:[l.jsx(ve,{value:void 0,children:""}),l.jsx(ve,{value:"true",children:"true"}),l.jsx(ve,{value:"false",children:"false"})]}),a&&l.jsx(ot,{color:"error.main",children:a})]})}function rs(n){const{onChange:e,value:t=null,disabled:s,TextFieldProps:r}=n,a=I.useMemo(()=>t?Y(t,"x"):null,[t]);return l.jsx(Nn,{value:a,onChange:i=>{i==null?e(void 0):e(String(i.valueOf()))},disabled:s,slotProps:{textField:r}})}function as(n){const{onChange:e,value:t=null,columnModel:s,TextFieldProps:r,disabled:a}=n,i=I.useMemo(()=>{try{return s.columnType===j.DATE_LIST&&Array.isArray(t)?t.map(o=>Y(o,"x").toISOString()):t}catch{return null}},[t,s.columnType]);return l.jsx(qt,{value:i,onChange:o=>{o==null?e(void 0):s.columnType===j.DATE_LIST?e(o.map(d=>Y(d).valueOf())):e(o)},columnType:s.columnType,TextFieldProps:{...r,disabled:a}})}function ft(n){const{columnModel:e,onChange:t,value:s,disabled:r,TextFieldProps:a}=n,{columnType:i}=e;return i===j.BOOLEAN?l.jsx(ss,{...n}):i===j.DATE?l.jsx(rs,{...n}):i.endsWith("_LIST")?l.jsx(as,{...n}):l.jsx(De,{...a,type:"text",value:s||void 0,onChange:o=>{o.target.value==""?t(void 0):t(o.target.value)},disabled:r})}try{ft.displayName="DefaultValueField",ft.__docgenInfo={description:"",displayName:"DefaultValueField",props:{columnModel:{defaultValue:null,description:"",name:"columnModel",required:!0,type:{name:'{ name?: string; defaultValue?: string | any[]; id?: string; isSelected?: boolean; columnType?: ColumnTypeEnum; maximumSize?: string | number; maximumListLength?: string | number; enumValues?: (string | number)[]; facetType?: "range" | "enumeration"; jsonSubColumns?: { ...; }[]; isOriginallyDefaultColumn?: boolean; }'}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"T"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T) => void"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},TextFieldProps:{defaultValue:null,description:"",name:"TextFieldProps",required:!1,type:{name:'Omit<TextFieldProps, "disabled" | "value" | "onChange">'}},SelectProps:{defaultValue:null,description:"",name:"SelectProps",required:!1,type:{name:'Omit<SelectProps, "disabled" | "variant" | "value" | "onChange">'}},selectFormHelperText:{defaultValue:null,description:"",name:"selectFormHelperText",required:!1,type:{name:"ReactNode"}}}}}catch{}function ze(n){const{value:e,originalValue:t,recommendedValue:s,columnType:r,error:a,...i}=n,o=ct(e,s),d=t!=null&&It(e)!==It(t),u=!!a||o;let m=null,b;return o?m=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:"Data annotations are longer than allowed by current schema."}),l.jsxs("p",{children:["Recommended size is ",l.jsx("strong",{children:s}),"."]}),j.STRING===r&&l.jsx("p",{children:"If unsure, choose “MediumText” from the Column Type menu."})]}):d&&(m=l.jsxs(l.Fragment,{children:[l.jsx("p",{children:"This value has changed since the table was last saved."}),l.jsxs("p",{children:["The last saved value was ",t,"."]})]}),b=M=>({"& .MuiInputBase-root":{backgroundColor:vn(M.palette.info.main,.1),border:"1px solid",borderColor:M.palette.info.main}})),l.jsx(xt,{title:m,children:l.jsx(De,{value:e??"",error:u,color:u?"error":void 0,focused:o?!0:void 0,sx:[...Array.isArray(i.sx)?i.sx:[i.sx],b],...i})})}try{ze.displayName="FieldWithRecommendedMinimum",ze.__docgenInfo={description:"",displayName:"FieldWithRecommendedMinimum",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},slots:{defaultValue:{value:"{}"},description:"The components used for each slot inside.",name:"slots",required:!1,type:{name:"Partial<TextFieldSlots>"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each slot inside.",name:"slotProps",required:!1,type:{name:"{ root?: SlotProps<ElementType<FormControlProps, keyof IntrinsicElements>, {}, BaseTextFieldProps>; ... 4 more ...; select?: SlotProps<...>; } | { ...; } | { ...; }"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}},originalValue:{defaultValue:null,description:"",name:"originalValue",required:!1,type:{name:"string | number"}},recommendedValue:{defaultValue:null,description:"",name:"recommendedValue",required:!1,type:{name:"number"}},columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}}}}}catch{}function Xt(n){return n.length>0&&n.every(e=>e.isSelected&&(e.jsonSubColumns??[]).every(t=>t.isSelected))}function is(n){return n.reduce((e,t)=>(t.isSelected&&(e+=1),t.jsonSubColumns&&t.jsonSubColumns.forEach(s=>{s.isSelected&&(e+=1)}),e),0)}function os(){return{name:"",columnType:j.STRING,maximumSize:Mn,isOriginallyDefaultColumn:!1,isSelected:!1}}function ls(){return{name:"",jsonPath:"",columnType:j.STRING,facetType:"enumeration",isSelected:!1}}function At(n,e){const t=[...n];return t.forEach((s,r)=>{if(r>0&&e(s)&&!e(t[r-1])){const a=t[r-1];t[r-1]=t[r],t[r]=a}}),t}function Ot(n,e){const t=[...n];for(let s=t.length-1;s>=0;s--){const r=t[s];if(s<t.length-1&&e(r)&&!e(t[s+1])){const a=t[s];t[s]=t[s+1],t[s+1]=a}}return t}function us(n,e){const{annotationColumnModels:t}=n;return e.map(s=>{const r=t?mt(t,s):void 0;return r==null||(ct(s.maximumSize,r.maximumSize)&&(s={...s,maximumSize:r.maximumSize}),ct(s.maximumListLength,r.maximumListLength)&&(s={...s,maximumListLength:r.maximumListLength})),s})}function ds(n,e){const{columnModelIndex:t,jsonSubColumnModelIndex:s,newColumnType:r}=n;let a;if(e&&e[t])e[t].jsonSubColumns&&s!==void 0?a=wt(e[t].jsonSubColumns[s]):a=wt(e[t]);else throw new Error("Cannot change column model type for a column that does not exist");a.columnType=r,!Pe(r)&&"maximumSize"in a&&delete a.maximumSize,!Tt(r)&&"maximumListLength"in a&&delete a.maximumListLength,"enumValues"in a&&delete a.enumValues,"defaultValue"in a&&delete a.defaultValue;const i=Wt(r,!!s);"facetType"in a&&(i===null||!i.includes(a.facetType))&&delete a.facetType,"jsonSubColumns"in a&&r!==j.JSON&&delete a.jsonSubColumns,e&&e[t]&&(e[t].jsonSubColumns&&s!==void 0?e[t].jsonSubColumns[s]=a:e[t]=a)}function cs(n){return Xt(n)?n.map(t=>{var s;return{...t,jsonSubColumns:(s=t.jsonSubColumns)==null?void 0:s.map(r=>({...r,isSelected:!1})),isSelected:!1}}):n.map(t=>{var s;return{...t,jsonSubColumns:(s=t.jsonSubColumns)==null?void 0:s.map(r=>({...r,isSelected:!0})),isSelected:!0}})}function ms(n,e){const{columnModelIndex:t,jsonSubColumnModelIndex:s,value:r}=n;e&&e[t]&&(e[t].jsonSubColumns&&s!==void 0?e[t].jsonSubColumns[s]=r:e[t]=r)}function fs(n,e){const{columnModelIndex:t,jsonSubColumnModelIndex:s}=n;if(e&&e[t])if(e[t].jsonSubColumns&&s!==void 0){const r=e[t].jsonSubColumns[s];e[t].jsonSubColumns[s]={...r,isSelected:!r.isSelected}}else{const r=e[t];e[t]={...r,isSelected:!r.isSelected}}}function hs(n){return n.filter(e=>!e.isSelected).map(e=>(e.jsonSubColumns&&(e={...e,jsonSubColumns:e.jsonSubColumns.filter(t=>!t.isSelected)}),e))}function ps(n,e,t){if(e==t)return n;const s=[...n],r=s[e];return s.splice(e,1),s.splice(t,0,r),s}function ys(n,e){const{from:t,to:s}=n,r=t.jsonSubColumnModelIndex!==void 0?e[t.columnModelIndex].jsonSubColumns:e,a=t.jsonSubColumnModelIndex!==void 0?t.jsonSubColumnModelIndex:t.columnModelIndex,i=s.jsonSubColumnModelIndex!==void 0?s.jsonSubColumnModelIndex:s.columnModelIndex,o=ps(r,a,i);return t.jsonSubColumnModelIndex!==void 0?(e[t.columnModelIndex].jsonSubColumns=o,e):o}function gs(n,e){switch(e.type){case"setValue":n=e.value;break;case"toggleSelectAll":{n=cs(n);break}case"setColumnModelValue":{ms(e,n);break}case"changeColumnModelType":{ds(e,n);break}case"appendColumn":n.push(os());break;case"appendJsonSubColumn":{const{columnModelIndex:t}=e;n[t]={...n[t],jsonSubColumns:[...n[t].jsonSubColumns??[],ls()]};break}case"toggleSelect":{fs(e,n);break}case"delete":n=hs(n);break;case"move":{n=ys(e,n);break}case"moveUp":n=At(n,t=>t.isSelected),n.forEach(t=>{t.jsonSubColumns&&(t.jsonSubColumns=At(t.jsonSubColumns,s=>s.isSelected))});break;case"moveDown":n=Ot(n,t=>t.isSelected),n.forEach(t=>{t.jsonSubColumns&&(t.jsonSubColumns=Ot(t.jsonSubColumns,s=>s.isSelected))});break;case"updateColumnSizesToRecommendedValues":n=us(e,n);break;default:throw new Error("Unexpected action",e)}return[...n]}const J=Xn([],gs),vs={height:"28px",fontSize:"12px"},_s={height:"38px",fontSize:"14px"};function xs(n,e){return n==null?"":Fe(n)?n.map(String).join(", "):n}const oe=!0;function $e(n){const{columnModelIndex:e,jsonSubColumnIndex:t,entityType:s,isDefaultColumn:r,disabled:a=!1,validationErrors:i=null,defaultAnnotationModel:o,originalColumnModel:d}=n,u=t!=null,m=Ae(J),b=Pt.includes(zt(s)),M=I.useMemo(()=>Yt(J,C=>u?C[e].jsonSubColumns[t]:C[e],Bt),[e,u,t]),g=et(M),A=I.useMemo(()=>Jt(b,u),[b,u]),ae=I.useMemo(()=>Wt(g.columnType,u),[g.columnType,u]),R=I.useMemo(()=>u?vs:_s,[u]),k=I.useMemo(()=>{if(i&&Fe(i)){const C={};return i.forEach(U=>{U.path&&(C[U.path[U.path.length-1]]=U.message)}),C}return{}},[i]);return l.jsxs(l.Fragment,{children:[l.jsxs(w,{sx:{display:"grid",gridColumn:"1 / span 10",gridTemplateColumns:"subgrid"},children:[u&&l.jsx(w,{sx:{gridColumn:"1 / span 1"},children:Dt}),l.jsx(w,{"data-testid":"ColumnModelForm",sx:{display:"flex",alignItems:"start",gridColumn:u?"2 / span 1":" 1 / span 1",mt:u?"0px":"5px"},children:l.jsx(Gt,{checked:g.isSelected,inputProps:{"aria-label":"Select"},disabled:a,onChange:()=>{m({type:"toggleSelect",columnModelIndex:e,jsonSubColumnModelIndex:t})}})}),l.jsx(w,{sx:{my:r?"auto":void 0,gridColumn:u?"3 / span 1":"2 / span 2"},children:r?g.name:l.jsx(De,{value:g.name,placeholder:u?"Facet name":"Column name",onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,name:C.target.value}})},disabled:a,fullWidth:!0,error:!!k.name,helperText:k.name,slotProps:{input:{disableInjectingGlobalStyles:oe,sx:R,slotProps:{input:{"aria-label":"Name"}}}}})}),l.jsx(w,{sx:{my:r?"auto":void 0},children:r?Et(g.columnType):l.jsxs(at,{fullWidth:!0,children:[l.jsx(it,{label:"Column Type",value:g.columnType,onChange:C=>{m({type:"changeColumnModelType",columnModelIndex:e,jsonSubColumnModelIndex:t,newColumnType:C.target.value})},slotProps:{input:{"aria-label":"Column Type"}},sx:R,disabled:a,error:!!k.columnType,children:A.map(C=>l.jsx(ve,{value:C,children:Et(C)},C))}),k.columnType&&l.jsx(ot,{color:"error.main",children:k.columnType})]})}),l.jsx(w,{sx:{my:r?"auto":void 0},children:r?g.maximumSize??"":l.jsx(ze,{value:g.maximumSize??"",originalValue:d==null?void 0:d.maximumSize,recommendedValue:o==null?void 0:o.maximumSize,columnType:g.columnType,disabled:a||!Pe(g.columnType),InputProps:{disableInjectingGlobalStyles:oe,slotProps:{input:{"aria-label":"Maximum Size",min:1,max:Pe(g.columnType)?An(g.columnType):void 0}},sx:R},onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,maximumSize:C.target.value}})},fullWidth:!0,error:!!k.maximumSize,helperText:k.maximumSize})}),l.jsx(w,{sx:{my:r?"auto":void 0},children:r?g.maximumListLength??"":l.jsx(ze,{value:g.maximumListLength??"",originalValue:d==null?void 0:d.maximumListLength,recommendedValue:o==null?void 0:o.maximumListLength,columnType:g.columnType,disabled:a||!Tt(g.columnType),onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,maximumListLength:C.target.value}})},InputProps:{disableInjectingGlobalStyles:oe,slotProps:{input:{"aria-label":"Maximum List Length"}},sx:R},fullWidth:!0,error:!!k.maximumListLength,helperText:k.maximumListLength})}),l.jsx(w,{sx:{my:r?"auto":void 0},children:r?xs(g==null?void 0:g.defaultValue,g.columnType):l.jsx(ft,{TextFieldProps:{InputProps:{disableInjectingGlobalStyles:oe,slotProps:{input:{"aria-label":"Default Value"}},sx:R},fullWidth:!0,error:!!k.defaultValue,helperText:k.defaultValue},SelectProps:{label:"Default Value",sx:R,slotProps:{input:{"aria-label":"Default Value"}},error:!!k.defaultValue},selectFormHelperText:k.defaultValue,columnModel:g,value:(g==null?void 0:g.defaultValue)||null,onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,defaultValue:C||void 0}})},disabled:a||!On(g.columnType,b,u)})}),l.jsx(w,{children:l.jsx(qt,{value:g==null?void 0:g.enumValues,onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,enumValues:C==null||bt(C)?void 0:C}})},columnType:g.columnType,TextFieldProps:{fullWidth:!0,disabled:a||!Vn(g.columnType,u),InputProps:{disableInjectingGlobalStyles:oe,readOnly:!0,sx:R,slotProps:{input:{"aria-label":"Restrict Values"}}},error:!!k.enumValues,helperText:k.enumValues}})}),l.jsx(w,{children:l.jsxs(at,{fullWidth:!0,children:[l.jsx(it,{label:"Facet Type",value:g.facetType||"",disabled:a||ae===null,onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,facetType:C.target.value}})},sx:R,slotProps:{input:{"aria-label":"Facet Type"}},error:!!k.facetType,children:(ae??[]).map((C,U)=>l.jsx(ve,{value:C,children:C===void 0?"":Ln(C)},U))}),k.facetType&&l.jsx(ot,{color:"error.main",children:k.facetType})]})})]}),u&&l.jsxs(w,{sx:{display:"grid",gridColumn:"1 / span 10",gridTemplateColumns:"subgrid"},children:[l.jsx(w,{sx:{gridColumn:"1 / span 1"},children:Dt}),l.jsx(w,{}),l.jsx(w,{sx:{gridColumn:"3 / span 7"},children:l.jsx(De,{placeholder:"JSON Path",value:g.jsonPath,onChange:C=>{m({type:"setColumnModelValue",columnModelIndex:e,jsonSubColumnModelIndex:t,value:{...g,jsonPath:C.target.value}})},disabled:a,fullWidth:!0,slotProps:{input:{disableInjectingGlobalStyles:oe,sx:R,endAdornment:l.jsx(xt,{title:l.jsxs(l.Fragment,{children:[l.jsx("p",{children:l.jsx($t,{href:"https://dev.mysql.com/doc/refman/8.0/en/json.html#json-path-syntax",children:"Please use a valid JSON Path selector, following this format."})}),l.jsx("p",{children:"This field is for linking the sub-column facet to the corresponding location in the JSON data, so that it can be used as facet filter. The correct selector will point to the key referenced in the sub-column JSON Path."})]}),children:l.jsx(_n,{sx:{color:"grey.700"}})}),slotProps:{input:{"aria-label":"JSON Path"}}}},error:!!k.jsonPath,helperText:k.jsonPath})})]})]})}try{$e.displayName="ColumnModelForm",$e.__docgenInfo={description:"",displayName:"ColumnModelForm",props:{entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"link"'},{value:'"table"'},{value:'"file"'},{value:'"folder"'},{value:'"entityview"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"project"'},{value:'"dockerrepo"'},{value:'"materializedview"'},{value:'"virtualtable"'},{value:'"recordset"'}]}},columnModelIndex:{defaultValue:null,description:"",name:"columnModelIndex",required:!0,type:{name:"number"}},jsonSubColumnIndex:{defaultValue:null,description:"",name:"jsonSubColumnIndex",required:!1,type:{name:"number"}},isDefaultColumn:{defaultValue:null,description:"",name:"isDefaultColumn",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},validationErrors:{defaultValue:null,description:"",name:"validationErrors",required:!1,type:{name:"ZodIssue[]"}},defaultAnnotationModel:{defaultValue:null,description:"",name:"defaultAnnotationModel",required:!1,type:{name:"ColumnModel"}},originalColumnModel:{defaultValue:null,description:"",name:"originalColumnModel",required:!1,type:{name:"ColumnModel"}}}}}catch{}function ht(n){const{initialFinderProjectId:e,onAddColumns:t,...s}=n,[r,a]=I.useState(!1),{accessToken:i}=Xe(),o=I.useCallback(async u=>{const{tableBundle:m}=await Qe.getEntityBundleV2(u.targetId,{includeTableBundle:!0},u.targetVersionNumber,i);return m.columnModels.map(b=>({...b,id:void 0}))},[i]),d=I.useCallback(async u=>{try{const m=u[0];if(m){const b=await o(m);t(b)}}catch(m){console.error(m),lt(m.message,"danger")}finally{a(!1)}},[o,t]);return l.jsxs(l.Fragment,{children:[l.jsx(Pn,{configuration:{initialScope:e?Mt.CURRENT_PROJECT:Mt.ALL_PROJECTS,initialContainer:e??"root",selectMultiple:!1,selectableTypes:bn.ALL_TABLES,visibleTypesInTree:[xn.project],versionSelection:zn.UNTRACKED},show:r,title:"Import Columns from Table",promptCopy:"Find Tables to import columns",titleHelpPopoverProps:{markdownText:"Search or Browse Synapse to find an existing Table in order to import columns into this Table"},onConfirm:u=>{d(u)},confirmButtonCopy:"Import Columns",onCancel:()=>{a(!1)}}),l.jsx(P,{variant:"outlined",onClick:()=>{a(!0)},startIcon:l.jsx(Un,{}),...s,children:"Import Columns"})]})}try{ht.displayName="ImportTableColumnsButton",ht.__docgenInfo={description:"",displayName:"ImportTableColumnsButton",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},initialFinderProjectId:{defaultValue:null,description:"",name:"initialFinderProjectId",required:!1,type:{name:"string"}},onAddColumns:{defaultValue:null,description:"",name:"onAddColumns",required:!0,type:{name:"(columnModels: { name: string; defaultValue?: string; columnType: ColumnType; maximumSize?: number; maximumListLength?: number; enumValues?: string[]; facetType?: FacetType; jsonSubColumns?: JsonSubColumnModel[]; id?: string; }[]) => void"}}}}}catch{}const bs="Use Recommended Sizes",Ts=l.jsxs(l.Fragment,{children:[l.jsx(Ze,{variant:"body1",children:"Proceeding will adjust columns with size values that are shorter than longest data in your annotations."}),l.jsx(Ze,{variant:"body1",children:"Changed size values will appear in blue. Hover to see the previous value."}),l.jsx(Ze,{variant:"body1",children:"Changes are saved only after clicking “Save” in the Schema editor. Click “Cancel” to discard unsaved changes."})]});function pt(n){const{disabled:e=!1,annotationColumnModelsQuery:t}=n,s=Ae(J),r=et(J),a=Xt(r),i=is(r),[o,d]=I.useState(!1),u=t.isLoading||t.data,m=t.data?Rn(r,t.data):0;return l.jsxs(w,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[l.jsxs(P,{"aria-label":"Select All",variant:"outlined",color:"neutral",onClick:()=>{s({type:"toggleSelectAll"})},sx:{alignSelf:"stretch"},disabled:e||r.length==0,children:[l.jsx(Gt,{sx:{mr:1},checked:a,indeterminate:i>0&&!a,disabled:e||r.length==0}),l.jsxs(Ze,{variant:"smallText1",sx:{color:"text.secondary"},children:[i," selected"]})]}),l.jsxs(Bn,{sx:{alignSelf:"stretch"},children:[l.jsx(P,{"aria-label":"Move Down",variant:"outlined",color:"neutral",onClick:()=>{s({type:"moveDown"})},disabled:e||i==0,children:l.jsx(Jn,{fontSize:"small"})}),l.jsx(P,{"aria-label":"Move Up",variant:"outlined",color:"neutral",onClick:()=>{s({type:"moveUp"})},disabled:e||i==0,children:l.jsx(Wn,{fontSize:"small"})})]}),l.jsx(P,{"aria-label":"Delete",variant:"outlined",color:"neutral",onClick:()=>{s({type:"delete"})},sx:{alignSelf:"stretch"},disabled:e||i==0,children:l.jsx(Tn,{fontSize:"small",icon:"delete",wrap:!1})}),l.jsx(w,{sx:{flexGrow:1}}),l.jsx($t,{sx:{display:"block",py:"10px",mr:"10px",textAlign:"right"},href:"https://help.synapse.org/docs/Organizing-Data-With-Tables.2011038095.html",target:"_blank",children:"About schemas and column types"}),u&&l.jsxs(l.Fragment,{children:[l.jsx($n,{open:o,onConfirm:()=>{s({type:"updateColumnSizesToRecommendedValues",annotationColumnModels:t.data}),d(!1)},onCancel:()=>{d(!1)},title:`This will change ${m.toLocaleString()} ${Ut("column",m)} in this schema`,content:Ts,confirmButtonProps:{children:bs}}),l.jsx(xt,{title:m>0?"":"All schema values meet the minimum recommended sizes.",children:l.jsx(w,{children:l.jsx(P,{sx:{height:"100%"},variant:"outlined",startIcon:t.isLoading?l.jsx(ut,{}):l.jsx(qn,{}),onClick:()=>{d(!0)},disabled:t.isLoading||m==0,children:"Use Recommended Sizes"})})})]})]})}try{pt.displayName="TableColumnSchemaFormActions",pt.__docgenInfo={description:"",displayName:"TableColumnSchemaFormActions",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},annotationColumnModelsQuery:{defaultValue:null,description:"",name:"annotationColumnModelsQuery",required:!0,type:{name:"any"}}}}}catch{}var S;(function(n){n.assertEqual=r=>r;function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const a={};for(const i of r)a[i]=i;return a},n.getValidEnumValues=r=>{const a=n.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of a)i[o]=r[o];return n.objectValues(i)},n.objectValues=r=>n.objectKeys(r).map(function(a){return r[a]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.push(i);return a},n.find=(r,a)=>{for(const i of r)if(a(i))return i},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function s(r,a=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}n.joinValues=s,n.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(S||(S={}));var yt;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(yt||(yt={}));const p=S.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),W=n=>{switch(typeof n){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(n)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(n)?p.array:n===null?p.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?p.promise:typeof Map<"u"&&n instanceof Map?p.map:typeof Set<"u"&&n instanceof Set?p.set:typeof Date<"u"&&n instanceof Date?p.date:p.object;default:return p.unknown}},c=S.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Cs=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class L extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},s={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)s._errors.push(t(i));else{let o=s,d=0;for(;d<i.path.length;){const u=i.path[d];d===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(t(i))):o[u]=o[u]||{_errors:[]},o=o[u],d++}}};return r(this),s}static assert(e){if(!(e instanceof L))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,S.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}L.create=n=>new L(n);const ce=(n,e)=>{let t;switch(n.code){case c.invalid_type:n.received===p.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case c.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,S.jsonStringifyReplacer)}`;break;case c.unrecognized_keys:t=`Unrecognized key(s) in object: ${S.joinValues(n.keys,", ")}`;break;case c.invalid_union:t="Invalid input";break;case c.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${S.joinValues(n.options)}`;break;case c.invalid_enum_value:t=`Invalid enum value. Expected ${S.joinValues(n.options)}, received '${n.received}'`;break;case c.invalid_arguments:t="Invalid function arguments";break;case c.invalid_return_type:t="Invalid function return type";break;case c.invalid_date:t="Invalid date";break;case c.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:S.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case c.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case c.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case c.custom:t="Invalid input";break;case c.invalid_intersection_types:t="Intersection results could not be merged";break;case c.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case c.not_finite:t="Number must be finite";break;default:t=e.defaultError,S.assertNever(n)}return{message:t}};let Qt=ce;function Ss(n){Qt=n}function Be(){return Qt}const Ue=n=>{const{data:e,path:t,errorMaps:s,issueData:r}=n,a=[...t,...r.path||[]],i={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let o="";const d=s.filter(u=>!!u).slice().reverse();for(const u of d)o=u(i,{data:e,defaultError:o}).message;return{...r,path:a,message:o}},ks=[];function f(n,e){const t=Be(),s=Ue({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===ce?void 0:ce].filter(r=>!!r)});n.common.issues.push(s)}class O{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const r of t){if(r.status==="aborted")return _;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const r of t){const a=await r.key,i=await r.value;s.push({key:a,value:i})}return O.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const r of t){const{key:a,value:i}=r;if(a.status==="aborted"||i.status==="aborted")return _;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(s[a.value]=i.value)}return{status:e.value,value:s}}}const _=Object.freeze({status:"aborted"}),ue=n=>({status:"dirty",value:n}),V=n=>({status:"valid",value:n}),gt=n=>n.status==="aborted",vt=n=>n.status==="dirty",ne=n=>n.status==="valid",_e=n=>typeof Promise<"u"&&n instanceof Promise;function qe(n,e,t,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Kt(n,e,t,s,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var y;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));var ye,ge;class ${constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Vt=(n,e)=>{if(ne(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new L(n.common.issues);return this._error=t,this._error}}};function x(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:r}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,o)=>{var d,u;const{message:m}=n;return i.code==="invalid_enum_value"?{message:m??o.defaultError}:typeof o.data>"u"?{message:(d=m??s)!==null&&d!==void 0?d:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(u=m??t)!==null&&u!==void 0?u:o.defaultError}},description:r}}class T{get description(){return this._def.description}_getType(e){return W(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:W(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new O,ctx:{common:e.parent.common,data:e.data,parsedType:W(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_e(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const r={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:W(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Vt(r,a)}"~validate"(e){var t,s;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:W(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return ne(a)?{value:a.value}:{issues:r.common.issues}}catch(a){!((s=(t=a==null?void 0:a.message)===null||t===void 0?void 0:t.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>ne(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:W(e)},r=this._parse({data:e,path:s.path,parent:s}),a=await(_e(r)?r:Promise.resolve(r));return Vt(s,a)}refine(e,t){const s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const i=e(r),o=()=>a.addIssue({code:c.custom,...s(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(d=>d?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new F({schema:this,typeName:v.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return z.create(this,this._def)}nullable(){return ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return D.create(this)}promise(){return fe.create(this,this._def)}or(e){return Ce.create([this,e],this._def)}and(e){return Se.create(this,e,this._def)}transform(e){return new F({...x(this._def),schema:this,typeName:v.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ee({...x(this._def),innerType:this,defaultValue:t,typeName:v.ZodDefault})}brand(){return new Ct({typeName:v.ZodBranded,type:this,...x(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ne({...x(this._def),innerType:this,catchValue:t,typeName:v.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Oe.create(this,e)}readonly(){return Me.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const js=/^c[^\s-]{8,}$/i,ws=/^[0-9a-z]+$/,Is=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Es=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ns=/^[a-z0-9_-]{21}$/i,Ms=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,As=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Os=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Vs="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rt;const Ls=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Rs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Zs=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ds=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Fs=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ps=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,en="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",zs=new RegExp(`^${en}$`);function tn(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function $s(n){return new RegExp(`^${tn(n)}$`)}function nn(n){let e=`${en}T${tn(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Bs(n,e){return!!((e==="v4"||!e)&&Ls.test(n)||(e==="v6"||!e)&&Zs.test(n))}function Us(n,e){if(!Ms.test(n))return!1;try{const[t]=n.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function qs(n,e){return!!((e==="v4"||!e)&&Rs.test(n)||(e==="v6"||!e)&&Ds.test(n))}class Z extends T{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const a=this._getOrReturnCtx(e);return f(a,{code:c.invalid_type,expected:p.string,received:a.parsedType}),_}const s=new O;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),f(r,{code:c.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),f(r,{code:c.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?f(r,{code:c.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&f(r,{code:c.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Os.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"email",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")rt||(rt=new RegExp(Vs,"u")),rt.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"emoji",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")Es.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"uuid",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")Ns.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"nanoid",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")js.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"cuid",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")ws.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"cuid2",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")Is.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"ulid",code:c.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),f(r,{validation:"url",code:c.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"regex",code:c.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),f(r,{code:c.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),f(r,{code:c.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),f(r,{code:c.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?nn(a).test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{code:c.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?zs.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{code:c.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?$s(a).test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{code:c.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?As.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"duration",code:c.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Bs(e.data,a.version)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"ip",code:c.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?Us(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"jwt",code:c.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?qs(e.data,a.version)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"cidr",code:c.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?Fs.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"base64",code:c.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?Ps.test(e.data)||(r=this._getOrReturnCtx(e,r),f(r,{validation:"base64url",code:c.invalid_string,message:a.message}),s.dirty()):S.assertNever(a);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:c.invalid_string,...y.errToObj(s)})}_addCheck(e){return new Z({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...y.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...y.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...y.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...y.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new Z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Z({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Z({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Z.create=n=>{var e;return new Z({checks:[],typeName:v.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...x(n)})};function Ws(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,a=parseInt(n.toFixed(r).replace(".","")),i=parseInt(e.toFixed(r).replace(".",""));return a%i/Math.pow(10,r)}class X extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const a=this._getOrReturnCtx(e);return f(a,{code:c.invalid_type,expected:p.number,received:a.parsedType}),_}let s;const r=new O;for(const a of this._def.checks)a.kind==="int"?S.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:c.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?Ws(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),f(s,{code:c.not_finite,message:a.message}),r.dirty()):S.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,s,r){return new X({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:y.toString(r)}]})}_addCheck(e){return new X({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&S.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}X.create=n=>new X({checks:[],typeName:v.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...x(n)});class Q extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==p.bigint)return this._getInvalidInput(e);let s;const r=new O;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),f(s,{code:c.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):S.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:p.bigint,received:t.parsedType}),_}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,s,r){return new Q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:y.toString(r)}]})}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Q.create=n=>{var e;return new Q({checks:[],typeName:v.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...x(n)})};class xe extends T{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:p.boolean,received:s.parsedType}),_}return V(e.data)}}xe.create=n=>new xe({typeName:v.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...x(n)});class se extends T{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const a=this._getOrReturnCtx(e);return f(a,{code:c.invalid_type,expected:p.date,received:a.parsedType}),_}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return f(a,{code:c.invalid_date}),_}const s=new O;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),f(r,{code:c.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),f(r,{code:c.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):S.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new se({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}se.create=n=>new se({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:v.ZodDate,...x(n)});class We extends T{_parse(e){if(this._getType(e)!==p.symbol){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:p.symbol,received:s.parsedType}),_}return V(e.data)}}We.create=n=>new We({typeName:v.ZodSymbol,...x(n)});class be extends T{_parse(e){if(this._getType(e)!==p.undefined){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:p.undefined,received:s.parsedType}),_}return V(e.data)}}be.create=n=>new be({typeName:v.ZodUndefined,...x(n)});class Te extends T{_parse(e){if(this._getType(e)!==p.null){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:p.null,received:s.parsedType}),_}return V(e.data)}}Te.create=n=>new Te({typeName:v.ZodNull,...x(n)});class me extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return V(e.data)}}me.create=n=>new me({typeName:v.ZodAny,...x(n)});class te extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return V(e.data)}}te.create=n=>new te({typeName:v.ZodUnknown,...x(n)});class G extends T{_parse(e){const t=this._getOrReturnCtx(e);return f(t,{code:c.invalid_type,expected:p.never,received:t.parsedType}),_}}G.create=n=>new G({typeName:v.ZodNever,...x(n)});class Je extends T{_parse(e){if(this._getType(e)!==p.undefined){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:p.void,received:s.parsedType}),_}return V(e.data)}}Je.create=n=>new Je({typeName:v.ZodVoid,...x(n)});class D extends T{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==p.array)return f(t,{code:c.invalid_type,expected:p.array,received:t.parsedType}),_;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(f(t,{code:i?c.too_big:c.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(f(t,{code:c.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(f(t,{code:c.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new $(t,i,t.path,o)))).then(i=>O.mergeArray(s,i));const a=[...t.data].map((i,o)=>r.type._parseSync(new $(t,i,t.path,o)));return O.mergeArray(s,a)}get element(){return this._def.type}min(e,t){return new D({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new D({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new D({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}D.create=(n,e)=>new D({type:n,minLength:null,maxLength:null,exactLength:null,typeName:v.ZodArray,...x(e)});function le(n){if(n instanceof N){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=z.create(le(s))}return new N({...n._def,shape:()=>e})}else return n instanceof D?new D({...n._def,type:le(n.element)}):n instanceof z?z.create(le(n.unwrap())):n instanceof ee?ee.create(le(n.unwrap())):n instanceof B?B.create(n.items.map(e=>le(e))):n}class N extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=S.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==p.object){const u=this._getOrReturnCtx(e);return f(u,{code:c.invalid_type,expected:p.object,received:u.parsedType}),_}const{status:s,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof G&&this._def.unknownKeys==="strip"))for(const u in r.data)i.includes(u)||o.push(u);const d=[];for(const u of i){const m=a[u],b=r.data[u];d.push({key:{status:"valid",value:u},value:m._parse(new $(r,b,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof G){const u=this._def.unknownKeys;if(u==="passthrough")for(const m of o)d.push({key:{status:"valid",value:m},value:{status:"valid",value:r.data[m]}});else if(u==="strict")o.length>0&&(f(r,{code:c.unrecognized_keys,keys:o}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const m of o){const b=r.data[m];d.push({key:{status:"valid",value:m},value:u._parse(new $(r,b,r.path,m)),alwaysSet:m in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const m of d){const b=await m.key,M=await m.value;u.push({key:b,value:M,alwaysSet:m.alwaysSet})}return u}).then(u=>O.mergeObjectSync(s,u)):O.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new N({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var r,a,i,o;const d=(i=(a=(r=this._def).errorMap)===null||a===void 0?void 0:a.call(r,t,s).message)!==null&&i!==void 0?i:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=y.errToObj(e).message)!==null&&o!==void 0?o:d}:{message:d}}}:{}})}strip(){return new N({...this._def,unknownKeys:"strip"})}passthrough(){return new N({...this._def,unknownKeys:"passthrough"})}extend(e){return new N({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new N({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:v.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new N({...this._def,catchall:e})}pick(e){const t={};return S.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new N({...this._def,shape:()=>t})}omit(e){const t={};return S.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new N({...this._def,shape:()=>t})}deepPartial(){return le(this)}partial(e){const t={};return S.objectKeys(this.shape).forEach(s=>{const r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}),new N({...this._def,shape:()=>t})}required(e){const t={};return S.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof z;)a=a._def.innerType;t[s]=a}}),new N({...this._def,shape:()=>t})}keyof(){return sn(S.objectKeys(this.shape))}}N.create=(n,e)=>new N({shape:()=>n,unknownKeys:"strip",catchall:G.create(),typeName:v.ZodObject,...x(e)});N.strictCreate=(n,e)=>new N({shape:()=>n,unknownKeys:"strict",catchall:G.create(),typeName:v.ZodObject,...x(e)});N.lazycreate=(n,e)=>new N({shape:n,unknownKeys:"strip",catchall:G.create(),typeName:v.ZodObject,...x(e)});class Ce extends T{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function r(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new L(o.ctx.common.issues));return f(t,{code:c.invalid_union,unionErrors:i}),_}if(t.common.async)return Promise.all(s.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(r);{let a;const i=[];for(const d of s){const u={...t,common:{...t.common,issues:[]},parent:null},m=d._parseSync({data:t.data,path:t.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(d=>new L(d));return f(t,{code:c.invalid_union,unionErrors:o}),_}}get options(){return this._def.options}}Ce.create=(n,e)=>new Ce({options:n,typeName:v.ZodUnion,...x(e)});const q=n=>n instanceof je?q(n.schema):n instanceof F?q(n.innerType()):n instanceof we?[n.value]:n instanceof K?n.options:n instanceof Ie?S.objectValues(n.enum):n instanceof Ee?q(n._def.innerType):n instanceof be?[void 0]:n instanceof Te?[null]:n instanceof z?[void 0,...q(n.unwrap())]:n instanceof ee?[null,...q(n.unwrap())]:n instanceof Ct||n instanceof Me?q(n.unwrap()):n instanceof Ne?q(n._def.innerType):[];class tt extends T{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.object)return f(t,{code:c.invalid_type,expected:p.object,received:t.parsedType}),_;const s=this.discriminator,r=t.data[s],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(f(t,{code:c.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const r=new Map;for(const a of t){const i=q(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,a)}}return new tt({typeName:v.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...x(s)})}}function _t(n,e){const t=W(n),s=W(e);if(n===e)return{valid:!0,data:n};if(t===p.object&&s===p.object){const r=S.objectKeys(e),a=S.objectKeys(n).filter(o=>r.indexOf(o)!==-1),i={...n,...e};for(const o of a){const d=_t(n[o],e[o]);if(!d.valid)return{valid:!1};i[o]=d.data}return{valid:!0,data:i}}else if(t===p.array&&s===p.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<n.length;a++){const i=n[a],o=e[a],d=_t(i,o);if(!d.valid)return{valid:!1};r.push(d.data)}return{valid:!0,data:r}}else return t===p.date&&s===p.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Se extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=(a,i)=>{if(gt(a)||gt(i))return _;const o=_t(a.value,i.value);return o.valid?((vt(a)||vt(i))&&t.dirty(),{status:t.value,value:o.data}):(f(s,{code:c.invalid_intersection_types}),_)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,i])=>r(a,i)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Se.create=(n,e,t)=>new Se({left:n,right:e,typeName:v.ZodIntersection,...x(t)});class B extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.array)return f(s,{code:c.invalid_type,expected:p.array,received:s.parsedType}),_;if(s.data.length<this._def.items.length)return f(s,{code:c.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;!this._def.rest&&s.data.length>this._def.items.length&&(f(s,{code:c.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...s.data].map((i,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new $(s,i,s.path,o)):null}).filter(i=>!!i);return s.common.async?Promise.all(a).then(i=>O.mergeArray(t,i)):O.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new B({...this._def,rest:e})}}B.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new B({items:n,typeName:v.ZodTuple,rest:null,...x(e)})};class ke extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.object)return f(s,{code:c.invalid_type,expected:p.object,received:s.parsedType}),_;const r=[],a=this._def.keyType,i=this._def.valueType;for(const o in s.data)r.push({key:a._parse(new $(s,o,s.path,o)),value:i._parse(new $(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?O.mergeObjectAsync(t,r):O.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof T?new ke({keyType:e,valueType:t,typeName:v.ZodRecord,...x(s)}):new ke({keyType:Z.create(),valueType:e,typeName:v.ZodRecord,...x(t)})}}class Ge extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.map)return f(s,{code:c.invalid_type,expected:p.map,received:s.parsedType}),_;const r=this._def.keyType,a=this._def.valueType,i=[...s.data.entries()].map(([o,d],u)=>({key:r._parse(new $(s,o,s.path,[u,"key"])),value:a._parse(new $(s,d,s.path,[u,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of i){const u=await d.key,m=await d.value;if(u.status==="aborted"||m.status==="aborted")return _;(u.status==="dirty"||m.status==="dirty")&&t.dirty(),o.set(u.value,m.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const d of i){const u=d.key,m=d.value;if(u.status==="aborted"||m.status==="aborted")return _;(u.status==="dirty"||m.status==="dirty")&&t.dirty(),o.set(u.value,m.value)}return{status:t.value,value:o}}}}Ge.create=(n,e,t)=>new Ge({valueType:e,keyType:n,typeName:v.ZodMap,...x(t)});class re extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.set)return f(s,{code:c.invalid_type,expected:p.set,received:s.parsedType}),_;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(f(s,{code:c.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(f(s,{code:c.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(d){const u=new Set;for(const m of d){if(m.status==="aborted")return _;m.status==="dirty"&&t.dirty(),u.add(m.value)}return{status:t.value,value:u}}const o=[...s.data.values()].map((d,u)=>a._parse(new $(s,d,s.path,u)));return s.common.async?Promise.all(o).then(d=>i(d)):i(o)}min(e,t){return new re({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new re({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}re.create=(n,e)=>new re({valueType:n,minSize:null,maxSize:null,typeName:v.ZodSet,...x(e)});class de extends T{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.function)return f(t,{code:c.invalid_type,expected:p.function,received:t.parsedType}),_;function s(o,d){return Ue({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Be(),ce].filter(u=>!!u),issueData:{code:c.invalid_arguments,argumentsError:d}})}function r(o,d){return Ue({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Be(),ce].filter(u=>!!u),issueData:{code:c.invalid_return_type,returnTypeError:d}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof fe){const o=this;return V(async function(...d){const u=new L([]),m=await o._def.args.parseAsync(d,a).catch(g=>{throw u.addIssue(s(d,g)),u}),b=await Reflect.apply(i,this,m);return await o._def.returns._def.type.parseAsync(b,a).catch(g=>{throw u.addIssue(r(b,g)),u})})}else{const o=this;return V(function(...d){const u=o._def.args.safeParse(d,a);if(!u.success)throw new L([s(d,u.error)]);const m=Reflect.apply(i,this,u.data),b=o._def.returns.safeParse(m,a);if(!b.success)throw new L([r(m,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new de({...this._def,args:B.create(e).rest(te.create())})}returns(e){return new de({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new de({args:e||B.create([]).rest(te.create()),returns:t||te.create(),typeName:v.ZodFunction,...x(s)})}}class je extends T{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}je.create=(n,e)=>new je({getter:n,typeName:v.ZodLazy,...x(e)});class we extends T{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:c.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}we.create=(n,e)=>new we({value:n,typeName:v.ZodLiteral,...x(e)});function sn(n,e){return new K({values:n,typeName:v.ZodEnum,...x(e)})}class K extends T{constructor(){super(...arguments),ye.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return f(t,{expected:S.joinValues(s),received:t.parsedType,code:c.invalid_type}),_}if(qe(this,ye)||Kt(this,ye,new Set(this._def.values)),!qe(this,ye).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return f(t,{received:t.data,code:c.invalid_enum_value,options:s}),_}return V(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return K.create(e,{...this._def,...t})}exclude(e,t=this._def){return K.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}ye=new WeakMap;K.create=sn;class Ie extends T{constructor(){super(...arguments),ge.set(this,void 0)}_parse(e){const t=S.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==p.string&&s.parsedType!==p.number){const r=S.objectValues(t);return f(s,{expected:S.joinValues(r),received:s.parsedType,code:c.invalid_type}),_}if(qe(this,ge)||Kt(this,ge,new Set(S.getValidEnumValues(this._def.values))),!qe(this,ge).has(e.data)){const r=S.objectValues(t);return f(s,{received:s.data,code:c.invalid_enum_value,options:r}),_}return V(e.data)}get enum(){return this._def.values}}ge=new WeakMap;Ie.create=(n,e)=>new Ie({values:n,typeName:v.ZodNativeEnum,...x(e)});class fe extends T{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.promise&&t.common.async===!1)return f(t,{code:c.invalid_type,expected:p.promise,received:t.parsedType}),_;const s=t.parsedType===p.promise?t.data:Promise.resolve(t.data);return V(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}fe.create=(n,e)=>new fe({type:n,typeName:v.ZodPromise,...x(e)});class F extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===v.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:i=>{f(s,i),i.fatal?t.abort():t.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const i=r.transform(s.data,a);if(s.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return _;const d=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return d.status==="aborted"?_:d.status==="dirty"||t.value==="dirty"?ue(d.value):d});{if(t.value==="aborted")return _;const o=this._def.schema._parseSync({data:i,path:s.path,parent:s});return o.status==="aborted"?_:o.status==="dirty"||t.value==="dirty"?ue(o.value):o}}if(r.type==="refinement"){const i=o=>{const d=r.refinement(o,a);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?_:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?_:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ne(i))return i;const o=r.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>ne(i)?Promise.resolve(r.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);S.assertNever(r)}}F.create=(n,e,t)=>new F({schema:n,typeName:v.ZodEffects,effect:e,...x(t)});F.createWithPreprocess=(n,e,t)=>new F({schema:e,effect:{type:"preprocess",transform:n},typeName:v.ZodEffects,...x(t)});class z extends T{_parse(e){return this._getType(e)===p.undefined?V(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}z.create=(n,e)=>new z({innerType:n,typeName:v.ZodOptional,...x(e)});class ee extends T{_parse(e){return this._getType(e)===p.null?V(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ee.create=(n,e)=>new ee({innerType:n,typeName:v.ZodNullable,...x(e)});class Ee extends T{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===p.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ee.create=(n,e)=>new Ee({innerType:n,typeName:v.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...x(e)});class Ne extends T{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return _e(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new L(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new L(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ne.create=(n,e)=>new Ne({innerType:n,typeName:v.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...x(e)});class He extends T{_parse(e){if(this._getType(e)!==p.nan){const s=this._getOrReturnCtx(e);return f(s,{code:c.invalid_type,expected:p.nan,received:s.parsedType}),_}return{status:"valid",value:e.data}}}He.create=n=>new He({typeName:v.ZodNaN,...x(n)});const Js=Symbol("zod_brand");class Ct extends T{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Oe extends T{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?_:a.status==="dirty"?(t.dirty(),ue(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?_:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new Oe({in:e,out:t,typeName:v.ZodPipeline})}}class Me extends T{_parse(e){const t=this._def.innerType._parse(e),s=r=>(ne(r)&&(r.value=Object.freeze(r.value)),r);return _e(t)?t.then(r=>s(r)):s(t)}unwrap(){return this._def.innerType}}Me.create=(n,e)=>new Me({innerType:n,typeName:v.ZodReadonly,...x(e)});function Lt(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function rn(n,e={},t){return n?me.create().superRefine((s,r)=>{var a,i;const o=n(s);if(o instanceof Promise)return o.then(d=>{var u,m;if(!d){const b=Lt(e,s),M=(m=(u=b.fatal)!==null&&u!==void 0?u:t)!==null&&m!==void 0?m:!0;r.addIssue({code:"custom",...b,fatal:M})}});if(!o){const d=Lt(e,s),u=(i=(a=d.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0;r.addIssue({code:"custom",...d,fatal:u})}}):me.create()}const Gs={object:N.lazycreate};var v;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(v||(v={}));const Hs=(n,e={message:`Input not instance of ${n.name}`})=>rn(t=>t instanceof n,e),an=Z.create,on=X.create,Ys=He.create,Xs=Q.create,ln=xe.create,Qs=se.create,Ks=We.create,er=be.create,tr=Te.create,nr=me.create,sr=te.create,rr=G.create,ar=Je.create,ir=D.create,or=N.create,lr=N.strictCreate,ur=Ce.create,dr=tt.create,cr=Se.create,mr=B.create,fr=ke.create,hr=Ge.create,pr=re.create,yr=de.create,gr=je.create,vr=we.create,_r=K.create,xr=Ie.create,br=fe.create,Rt=F.create,Tr=z.create,Cr=ee.create,Sr=F.createWithPreprocess,kr=Oe.create,jr=()=>an().optional(),wr=()=>on().optional(),Ir=()=>ln().optional(),Er={string:n=>Z.create({...n,coerce:!0}),number:n=>X.create({...n,coerce:!0}),boolean:n=>xe.create({...n,coerce:!0}),bigint:n=>Q.create({...n,coerce:!0}),date:n=>se.create({...n,coerce:!0})},Nr=_;var h=Object.freeze({__proto__:null,defaultErrorMap:ce,setErrorMap:Ss,getErrorMap:Be,makeIssue:Ue,EMPTY_PATH:ks,addIssueToContext:f,ParseStatus:O,INVALID:_,DIRTY:ue,OK:V,isAborted:gt,isDirty:vt,isValid:ne,isAsync:_e,get util(){return S},get objectUtil(){return yt},ZodParsedType:p,getParsedType:W,ZodType:T,datetimeRegex:nn,ZodString:Z,ZodNumber:X,ZodBigInt:Q,ZodBoolean:xe,ZodDate:se,ZodSymbol:We,ZodUndefined:be,ZodNull:Te,ZodAny:me,ZodUnknown:te,ZodNever:G,ZodVoid:Je,ZodArray:D,ZodObject:N,ZodUnion:Ce,ZodDiscriminatedUnion:tt,ZodIntersection:Se,ZodTuple:B,ZodRecord:ke,ZodMap:Ge,ZodSet:re,ZodFunction:de,ZodLazy:je,ZodLiteral:we,ZodEnum:K,ZodNativeEnum:Ie,ZodPromise:fe,ZodEffects:F,ZodTransformer:F,ZodOptional:z,ZodNullable:ee,ZodDefault:Ee,ZodCatch:Ne,ZodNaN:He,BRAND:Js,ZodBranded:Ct,ZodPipeline:Oe,ZodReadonly:Me,custom:rn,Schema:T,ZodSchema:T,late:Gs,get ZodFirstPartyTypeKind(){return v},coerce:Er,any:nr,array:ir,bigint:Xs,boolean:ln,date:Qs,discriminatedUnion:dr,effect:Rt,enum:_r,function:yr,instanceof:Hs,intersection:cr,lazy:gr,literal:vr,map:hr,nan:Ys,nativeEnum:xr,never:rr,null:tr,nullable:Cr,number:on,object:or,oboolean:Ir,onumber:wr,optional:Tr,ostring:jr,pipeline:kr,preprocess:Sr,promise:br,record:fr,set:pr,strictObject:lr,string:an,symbol:Ks,transformer:Rt,tuple:mr,undefined:er,union:ur,unknown:sr,void:ar,NEVER:Nr,ZodIssueCode:c,quotelessJson:Cs,ZodError:L});const Mr=h.string().transform((n,e)=>{if(["NaN","Infinity","-Infinity"].includes(n))return n;const t=Number(n);return isNaN(t)&&e.addIssue({code:h.ZodIssueCode.invalid_type,expected:"number",received:"string",path:[],message:"Must be a number"}),t}),Ar=h.union([h.number(),h.nan(),Mr]).transform(n=>typeof n=="number"?isNaN(n)?"NaN":n===1/0?"Infinity":n===-1/0?"-Infinity":n:n);Y.extend(Cn);const Or=h.string().transform(n=>n.match(/^\d+$/)?Y.utc(parseInt(n)).toISOString():Y.utc(n).toISOString()),Vr=h.union([h.number(),Or,h.date()]).transform(n=>Y(n).toISOString()),Lr=h.enum(["true","false"]).transform(n=>n==="true"),Rr=h.union([Lr,h.boolean()]),pe=h.union([h.string().transform(n=>n===""?null:n),h.null(),h.number().int()]).pipe(h.union([h.null(),h.coerce.number().int()])),Zr=h.union([h.string().regex(/^(syn)?\d+$/),h.number().int()]),Dr=h.string().transform((n,e)=>{try{const t=JSON.parse(n);return Array.isArray(t)||e.addIssue({code:h.ZodIssueCode.custom,message:"Object was valid JSON, but was not an array"}),t}catch{e.addIssue({code:h.ZodIssueCode.custom,message:"Invalid JSON array"})}return n});function St(n){if(n.endsWith("_LIST")){const e=St(n.replace("_LIST",""));return h.union([h.array(e),Dr.pipe(h.array(e))])}switch(n){case j.STRING:return h.coerce.string();case j.BOOLEAN:return Rr;case j.INTEGER:return pe;case j.DOUBLE:return Ar;case j.DATE:return Vr;case j.FILEHANDLEID:return pe;case j.ENTITYID:return Zr;case j.LINK:return h.coerce.string();case j.MEDIUMTEXT:return h.coerce.string();case j.LARGETEXT:return h.coerce.string();case j.USERID:return pe;case j.EVALUATIONID:return pe;case j.SUBMISSIONID:return pe;case j.JSON:return h.string().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}});default:return console.warn(`No validator for column type ${n}`),h.any()}}function Fr(n){const e=St(n);return h.union([h.null(),h.string().length(0).transform(()=>null),e]).optional().refine(t=>n.endsWith("_LIST")?t==null||Fe(t):!0,"Default value cannot be an array for a non-list column type").transform(t=>{if(!(t==null||t===""||Fe(t)&&bt(t)))return typeof t=="string"?t:JSON.stringify(t)})}function Pr(n){const e=St(n);return h.union([h.array(e),h.null(),h.string().length(0).transform(()=>null),e.transform(t=>[t])]).optional().transform(t=>{if(t!=null&&(t=t.filter(s=>s!==""&&s!=null),!bt(t)))return t.map(s=>typeof s=="string"?s:JSON.stringify(s))})}const Zt=h.string().optional().transform(n=>n===""?void 0:n),un=h.union([h.literal("enumeration"),h.literal("range")]),dn=h.object({name:h.string().min(1,{message:"Name is required"}),columnType:h.nativeEnum(j)}),cn=dn.merge(h.object({jsonPath:h.string().startsWith("$"),facetType:un})),mn=dn.merge(h.object({id:h.string().optional(),defaultValue:h.union([h.string(),h.array(h.any())]).optional(),maximumSize:h.union([Zt,h.number()]).pipe(h.coerce.number().finite().int().min(1).max(Dn).optional()),maximumListLength:h.union([Zt,h.number()]).pipe(h.coerce.number().finite().int().min(1).max(Zn).optional()),enumValues:h.array(h.union([h.string(),h.number().int()]).pipe(h.coerce.string())).optional(),jsonSubColumns:h.array(cn).optional(),facetType:un.optional()})),zr=mn.refine(n=>n.maximumSize==null||Pe(n.columnType),{message:"Size is not allowed for this column type",path:["maximumSize"]}).refine(n=>n.maximumListLength==null||Tt(n.columnType),{message:"Maximum list length is not allowed for this column type",path:["maximumListLength"]}).refine(n=>n.jsonSubColumns!=null?n.columnType===j.JSON:!0,{message:"Only JSON columns can have JSON sub-columns.",path:["columnType"]}).transform((n,e)=>{if(n.defaultValue!=null){const s=Fr(n.columnType).safeParse(n.defaultValue);let r;return s.success?r=s.data:(s.error.issues.forEach(a=>{e.addIssue({...a,path:["defaultValue"]})}),r=void 0),{...n,defaultValue:r}}return dt(n,"defaultValue")}).transform((n,e)=>{if(n.enumValues!=null){const s=Pr(n.columnType).safeParse(n.enumValues);let r;return s.success?r=s.data:(s.error.issues.forEach(a=>{e.addIssue({...a,path:["enumValues"]})}),r=void 0),{...n,enumValues:r}}return dt(n,"enumValues")}),$r=h.array(zr),Br=cn.merge(h.object({isSelected:h.boolean()}));mn.merge(h.object({isSelected:h.boolean(),isOriginallyDefaultColumn:h.boolean(),jsonSubColumns:h.array(Br).optional()}));function Ur(n){return $r.safeParse(n)}const qr="18px 18px 1.75fr 1.75fr 0.75fr 1fr 1.25fr 1.25fr 1fr",Wr=6,Dt=l.jsx(w,{sx:{width:"1px",height:`calc(100% + 2 * ${Wr}px)`,backgroundColor:"grey.400",marginLeft:"8px"}}),Jr=l.jsx(w,{sx:n=>({width:"50%",height:"60%",borderLeft:`1px solid ${n.palette.grey[400]}`,borderBottom:`1px solid ${n.palette.grey[400]}`,marginLeft:"8px",marginBottom:"auto",marginRight:"0",borderBottomLeftRadius:"5px"})}),H=wn(w,{label:"ColumnHeader"})({fontWeight:700}),Gr="Add All Annotations";function Hr(n,e){const{initialData:t,entityType:s,viewScope:r,onSubmit:a=kn,isSubmitting:i=!1,originalColumnModels:o}=n,d=et(I.useMemo(()=>Ke(E=>E(J).length),[])),u=Ae(J),[m,b]=I.useState(null),M=ns(I.useCallback(E=>E(J),[])),g=zt(s),A=Pt.includes(g),ae=A,R=A,{data:k,isLoading:C}=Gn(r==null?void 0:r.viewEntityType,r==null?void 0:r.viewTypeMask,{enabled:R,staleTime:1/0}),U=Hn({viewScope:r,includeDerivedAnnotations:!0,concreteType:"org.sagebionetworks.repo.model.table.ViewColumnModelRequest"},{enabled:ae}),{data:Ve,isLoading:kt}=U;I.useEffect(()=>{t&&!C&&u({type:"setValue",value:Nt(t,k??[])})},[C]);const Le=I.useCallback(()=>{const E=Ur(M());return E.success?b(null):b(E.error),E},[M]);I.useImperativeHandle(e,()=>({submit(){const E=Le();E.success&&a(E.data)},getEditedColumnModels(){const E=Le();if(!E.success)throw new Error("Column models were not valid");return E.data},validate(){return Le().success}}),[a,Le]);const he=I.useCallback(E=>{const jt=M();let ie=E.filter(Re=>Jt(A,!1).includes(Re.columnType)?!jt.find(yn=>yn.name===Re.name):!1);ie=ie.map(Re=>dt(Re,["id"])),ie.length>0?(u({type:"setValue",value:[...jt,...Nt(ie,k)]}),lt(`${ie.length} ${Ut("column",ie.length)} added to schema.`,"success")):lt("No columns added. All columns to add are present in the column schema.","info")},[k,u,A,M]),fn=I.useCallback(()=>{k&&he(k)},[k,he]),hn=I.useCallback(()=>{Ve&&he(Ve)},[Ve,he]),pn=I.useMemo(()=>m?Ht(m.errors,E=>E.path[0]):{},[m]);return l.jsxs(w,{component:"form",sx:{py:2.5},children:[l.jsx(pt,{disabled:i,annotationColumnModelsQuery:U}),l.jsxs(w,{sx:{display:"grid",gap:"8px",gridTemplateColumns:qr,py:2.5},children:[l.jsx(H,{}),l.jsx(H,{sx:{gridColumn:"2 / span 2"},children:"Column Name"}),l.jsx(H,{children:"Column Type"}),l.jsx(H,{children:"Size"}),l.jsx(H,{children:"Max List Length"}),l.jsx(H,{children:"Default Value"}),l.jsx(H,{children:"Restrict Values"}),l.jsx(H,{children:"Facet"}),l.jsx(w,{sx:{gridColumn:"1 / span 10",backgroundColor:"grey.300",height:"2px"}}),jn(d,E=>l.jsx(Yr,{entityType:s,columnModelIndex:E,disabled:i,columnModelValidationErrors:pn[E],annotationColumnModels:Ve,originalColumnModels:o},E))]}),l.jsxs(w,{sx:{display:"flex",gap:1},children:[l.jsx(P,{variant:"outlined",onClick:()=>{u({type:"appendColumn"})},startIcon:l.jsx(nt,{}),disabled:i,children:"Add Column"}),R&&l.jsxs(P,{variant:"outlined",startIcon:C?l.jsx(ut,{}):l.jsx(nt,{}),onClick:()=>{fn()},disabled:C||i,children:["Add Default ",In(s)," Columns"]}),ae&&l.jsx(P,{variant:"outlined",startIcon:kt?l.jsx(ut,{}):l.jsx(nt,{}),disabled:kt||i,onClick:()=>{hn()},children:Gr}),l.jsx(ht,{onAddColumns:E=>{he(E)},disabled:i})]})]})}function Yr(n){const{columnModelIndex:e,entityType:t,disabled:s,columnModelValidationErrors:r=null,annotationColumnModels:a,originalColumnModels:i}=n,o=Ae(J),d=et(I.useMemo(()=>Yt(J,g=>g[e],Bt),[e])),u=i?mt(i,d):void 0,m=a?mt(a,d):void 0,b=I.useMemo(()=>{if(r){const g=r.filter(A=>A.path[0]===e&&A.path[1]=="jsonSubColumns");return Ht(g,A=>A.path[2])}return{}},[e,r]);if(!d)return l.jsx(l.Fragment,{});const M=d.isOriginallyDefaultColumn;return l.jsxs(l.Fragment,{children:[l.jsx($e,{entityType:t,columnModelIndex:e,isDefaultColumn:M,disabled:s,validationErrors:r,defaultAnnotationModel:m,originalColumnModel:u}),d.columnType===j.JSON&&d.jsonSubColumns&&d.jsonSubColumns.map((g,A)=>l.jsx($e,{entityType:t,columnModelIndex:e,jsonSubColumnIndex:A,isDefaultColumn:M,disabled:s,validationErrors:b[A]},A)),d.columnType===j.JSON&&l.jsxs(l.Fragment,{children:[l.jsx(w,{sx:{gridColumn:"1 / span 2"},children:Jr}),l.jsx(w,{sx:{gridColumn:"3 / span 5"},children:l.jsx(P,{startIcon:l.jsx(En,{}),variant:"text",disabled:s,onClick:()=>o({type:"appendJsonSubColumn",columnModelIndex:e}),children:"Add sub-column"})})]})]})}const Xr=I.forwardRef(Hr),fa=I.forwardRef(function(e,t){return l.jsx(Sn,{children:l.jsx(Xr,{...e,ref:t})})});try{TableColumnSchemaForm.displayName="TableColumnSchemaForm",TableColumnSchemaForm.__docgenInfo={description:"",displayName:"TableColumnSchemaForm",props:{entityType:{defaultValue:null,description:"",name:"entityType",required:!0,type:{name:"enum",value:[{value:'"link"'},{value:'"table"'},{value:'"file"'},{value:'"folder"'},{value:'"entityview"'},{value:'"submissionview"'},{value:'"dataset"'},{value:'"datasetcollection"'},{value:'"project"'},{value:'"dockerrepo"'},{value:'"materializedview"'},{value:'"virtualtable"'},{value:'"recordset"'}]}},viewScope:{defaultValue:null,description:"",name:"viewScope",required:!1,type:{name:"ViewScope"}},initialData:{defaultValue:null,description:"",name:"initialData",required:!1,type:{name:"{ name: string; defaultValue?: string; columnType: ColumnType; maximumSize?: number; maximumListLength?: number; enumValues?: string[]; facetType?: FacetType; jsonSubColumns?: JsonSubColumnModel[]; id?: string; }[]"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"(newColumnModels: { name: string; defaultValue?: string; columnType: ColumnType; maximumSize?: number; maximumListLength?: number; enumValues?: string[]; facetType?: FacetType; jsonSubColumns?: JsonSubColumnModel[]; id?: string; }[]) => void"}},isSubmitting:{defaultValue:null,description:"",name:"isSubmitting",required:!1,type:{name:"boolean"}},originalColumnModels:{defaultValue:null,description:"The original/current column models that are applied to the table, if they exist.",name:"originalColumnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}export{fa as T,ma as a,Gn as u};
