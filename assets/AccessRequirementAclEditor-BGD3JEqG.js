import{r as i,c3 as g,j as t,bq as b,V as L,X as a,W as h,a3 as j,c4 as T}from"./iframe-kh7i1csa.js";import{a as N,b as M,c as O,d as P}from"./useAccessRequirements-C0APFYXT.js";import{A as U}from"./AclEditor-B0gvTzNS.js";import{u as w}from"./useUpdateAcl-CqY_X4rJ.js";const d={variant:"body1",lineHeight:"20px",color:"grey.800"},B="Only ACT has permissions on this AR.",V=["CAN_REVIEW_SUBMISSIONS","IS_EXEMPTION_ELIGIBLE","CAN_REVIEW_SUBMISSIONS_AND_IS_EXEMPTION_ELIGIBLE"],x=i.forwardRef(function(f,R){const{accessRequirementId:n,onSaveComplete:c}=f,[m,o]=i.useState(null),l=()=>{o(null),c(!0)},u=e=>{o(e.reason),c(!1)},{data:s,isLoading:y}=N(n,{staleTime:1/0}),{resourceAccessList:r,setResourceAccessList:p,addResourceAccessItem:_,updateResourceAccessItem:C,removeResourceAccessItem:v,resetDirtyState:q}=w({onChange:()=>o(null),onError:o});i.useEffect(()=>{s&&(q(),p(s.resourceAccess))},[s,p]);const{mutate:A}=M({onSuccess:()=>l(),onError:e=>u(e)}),{mutate:E}=O({onSuccess:()=>l(),onError:e=>u(e)}),{mutate:S}=P({onSuccess:()=>l(),onError:e=>u(e)});return i.useImperativeHandle(R,()=>({save(){const e=r.length===0?null:{...s,id:(s==null?void 0:s.id)||n,resourceAccess:r};s===null&&e==null||g(s==null?void 0:s.resourceAccess,r)&&(s==null?void 0:s.id)===(e==null?void 0:e.id)?c(!0):s===null&&e!==null?E(e):e===null?A(n):S(e)}}),[n,s,r,E,A,c,S]),t.jsxs(b,{direction:"column",sx:{gap:"20px"},children:[t.jsxs(L,{children:[t.jsx(a,{variant:"headline3",sx:{mb:"10px"},children:"Guide to AR permissions"}),t.jsxs(a,{sx:h({mb:"10px"},d),children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Can Review"})," means a user or team has access request review permission for this AR."]}),t.jsxs(a,{sx:h({mb:"10px"},d),children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Exempt Eligible"}),' users and teams can bypass access requirements for entities they have been granted "edit and delete" permission on, via the "Sharing Settings" dialog in the Project Settings.']}),t.jsx(a,{sx:{...d,color:"grey.900"},children:"ACT members always retain the ability to review or modify Access Requirements."})]}),t.jsx(U,{resourceAccessList:r,availablePermissionLevels:V,isLoading:y,canEdit:!0,emptyText:B,onAddPrincipalToAcl:e=>_(e,[j.REVIEW_SUBMISSIONS]),updateResourceAccessItem:C,removeResourceAccessItem:v,showAddRemovePublicButton:!1,showNotifyCheckbox:!1,isInherited:!1}),m&&t.jsx(T,{severity:"error",children:m})]})});try{x.displayName="AccessRequirementAclEditor",x.__docgenInfo={description:"",displayName:"AccessRequirementAclEditor",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSaveComplete:{defaultValue:null,description:"",name:"onSaveComplete",required:!0,type:{name:"(saveSuccessful: boolean) => void"}}}}}catch{}export{x as A};
