import{at as O,dy as k,d8 as U,de as b,r as _,j as e,X as E,_ as w,V,c4 as L,v as M}from"./iframe-DgbfDeQR.js";import{f as B,e as D,p as G}from"./useAccessRequirements-1IyDJ5cP.js";import{M as g}from"./MarkdownSynapse-D4qxv4i6.js";import{R as N,a as p}from"./RequirementItem-Dj1d8sPz.js";function v(f){const{accessRequirement:s,onHide:x}=f,{accessToken:A}=O(),R=!!A,a=k(s),{data:r}=U(),{data:i}=b(),o=R&&i&&!a&&s.isCertifiedUserRequired&&!i.isCertified,d=R&&i&&!a&&s.isValidatedProfileRequired&&!i.isVerified,{data:l,isLoading:y}=B(String(s.id)),m=l==null?void 0:l.isApproved,{data:t}=D(s.id.toString()),[u,T]=_.useState(!1),{mutate:h,isPending:j,error:q}=G({onError:n=>{console.error("Error creating access approval: ",n)}}),C=()=>{const n={requirementId:s==null?void 0:s.id,submitterId:r==null?void 0:r.ownerId,accessorId:r==null?void 0:r.ownerId,state:M.APPROVED};h(n)};let c=e.jsx(e.Fragment,{});a&&s.termsOfUse?c=e.jsx(g,{markdown:s.termsOfUse}):t&&(c=e.jsx(g,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType}));let S;if(A&&!m){let n="I Accept Terms of Use",I=!1;(o||d)&&(I=!0,n=`You must ${o?"be certified":""}${o&&d?" and ":""}${d?"have a validated user profile":""} to accept`),S=[{variant:"outlined",onClick:C,children:n,disabled:j||I},{variant:"text",onClick:x,children:"I do not accept"}]}return e.jsxs(N,{"data-testid":"SelfSignAccessRequirementItem",status:y?p.LOADING:m?p.COMPLETE:p.LOCKED,actions:S,children:[m?e.jsxs(e.Fragment,{children:[e.jsxs(E,{variant:"body1",children:["You have accepted the terms of use."," ",e.jsx(w,{role:"button",onClick:()=>T(!u),children:u?"Hide Terms":"View Terms"})]}),u&&e.jsx(V,{sx:{my:1},children:c})]}):c,q&&e.jsx(L,{severity:"error",children:q.reason})]})}try{v.displayName="SelfSignAccessRequirementItem",v.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}export{v as S};
