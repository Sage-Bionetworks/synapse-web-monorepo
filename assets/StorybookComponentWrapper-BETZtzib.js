import{j as n}from"./jsx-runtime-Du8NFWEI.js";import{r as a,R as u}from"./index-Dl6G-zuu.js";import{Y as m,Z as y,_ as f,q as c,$ as C,a as k,a0 as S,a1 as h,a2 as g,X as x,a3 as w,a4 as E}from"./SynapseClient-CkXq5sDK.js";import"./OrientationBanner-D6e-DxhT.js";import"./EntityTypeUtils-B_e8UrIf.js";import{S as b}from"./getEndpoint-CjoHA800.js";import{S as _}from"./ToastMessage-DLv4YVhE.js";import{d as v}from"./dayjs.min-d18Up55D.js";var T=function(){return null};async function R(){let e=await h(),o;try{o=await g(e)}catch(t){throw t instanceof x&&t.status===401&&(console.error("Encountered error fetching profile: ",t,"Signing out..."),await w(),e=void 0),t}let r;return e&&E(e).then(t=>{r=v(t.authenticatedOn).format("L LT")}),{accessToken:e,profile:o,authenticatedOn:r}}const i=new m(y);function j(e){const o=b[e];window.SRC={OVERRIDE_ENDPOINT_CONFIG:o}}function d(e){const{storybookContext:o}=e,r=o.globals.stack||o.parameters.stack;a.useEffect(()=>{j(r)},[r]);const[t,l]=u.useState(void 0);f(),a.useEffect(()=>{R().then(s=>{l(s.accessToken)})}),a.useEffect(()=>{async function s(){await i.cancelQueries(),await i.resetQueries()}s()},[t,r]);const p=a.useMemo(()=>({accessToken:t,isInExperimentalMode:c.isInSynapseExperimentalMode(),utcTime:c.getUseUtcTimeFromCookie(),withErrorBoundary:!0,downloadCartPageUrl:"/?path=/story/download-downloadcartpage--demo"}),[t]);return n.jsx(C,{client:i,children:n.jsxs(k,{synapseContext:p,children:[o.globals.showReactQueryDevtools&&n.jsx(T,{}),n.jsxs(S,{children:[n.jsx(_,{}),n.jsx("main",{children:e.children})]})]})})}try{d.displayName="StorybookComponentWrapper",d.__docgenInfo={description:"Wraps storybook story components to ensure that all components receive required context.",displayName:"StorybookComponentWrapper",props:{storybookContext:{defaultValue:null,description:"",name:"storybookContext",required:!0,type:{name:"{ globals: { stack?: SynapseStack | undefined; showReactQueryDevtools?: boolean | undefined; }; parameters: { stack?: SynapseStack | undefined; }; }"}}}}}catch{}export{d as S,R as s};
