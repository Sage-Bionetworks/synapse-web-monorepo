import{j as n}from"./jsx-runtime-Du8NFWEI.js";import{r as i}from"./index-Dl6G-zuu.js";import{C as e,l as m,o as N}from"./index-S3N2_v0E.js";import{J as f}from"./JSONArrayEditorModal-C8JP_9OP.js";import{i as p,aT as l,s as I,b3 as D,b4 as d}from"./SynapseClient-Ihq4xrvb.js";import{f as _}from"./DateFormatter-BB-wk6UA.js";import{d as v}from"./dayjs.min-d18Up55D.js";import{M as A}from"./TextField-BYBL0P0S.js";const R=[e.LARGETEXT,e.MEDIUMTEXT,e.JSON];function B(a,t){return Object.values(e).filter(s=>a?!R.includes(s):!0).filter(s=>{if(t)switch(s){case e.JSON:case e.STRING_LIST:case e.INTEGER_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.USERID_LIST:case e.ENTITYID_LIST:return!1;default:return!0}return!0})}function C(a){switch(a){case"enumeration":return"Values";case"range":return"Range";default:return a}}function b(a){switch(a){case e.STRING:return"String";case e.DOUBLE:return"Double";case e.BOOLEAN:return"Boolean";case e.INTEGER:return"Integer";case e.DATE:return"Date";case e.FILEHANDLEID:return"File";case e.ENTITYID:return"Entity";case e.LINK:return"Link";case e.MEDIUMTEXT:return"MediumText";case e.LARGETEXT:return"LargeText";case e.USERID:return"User";case e.STRING_LIST:return"String List";case e.INTEGER_LIST:return"Integer List";case e.BOOLEAN_LIST:return"Boolean List";case e.DATE_LIST:return"Date List";case e.USERID_LIST:return"User ID List";case e.ENTITYID_LIST:return"Entity ID List";case e.EVALUATIONID:return"Evaluation";case e.SUBMISSIONID:return"Submission";case e.JSON:return"JSON";default:return a}}function Y(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return!0;default:return!1}}function j(a){switch(a){case e.STRING_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.INTEGER_LIST:return!0;default:return!1}}function k(a,t){let s;switch(a){case e.INTEGER:case e.INTEGER_LIST:s=["enumeration","range"];break;case e.STRING:case e.BOOLEAN:case e.USERID:case e.ENTITYID:case e.STRING_LIST:case e.BOOLEAN_LIST:case e.ENTITYID_LIST:case e.USERID_LIST:case e.EVALUATIONID:s=["enumeration"];break;case e.DOUBLE:case e.DATE:case e.DATE_LIST:s=["range"];break;default:s=null}return s&&!t&&(s=[void 0,...s]),s}function X(a,t,s){if(t)return!1;if(s)return!1;switch(a){case e.ENTITYID:case e.ENTITYID_LIST:case e.FILEHANDLEID:case e.USERID:case e.USERID_LIST:case e.MEDIUMTEXT:case e.LARGETEXT:case e.JSON:case e.SUBMISSIONID:case e.EVALUATIONID:return!1;default:return!0}}const J=50,y=1e3,H=100;function K(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return y;default:throw new Error(`Type is not known to have a max size: ${a}`)}}function P(a,t){if(t)return!1;switch(a){case e.STRING:case e.INTEGER:case e.ENTITYID:return!0;default:return!1}}function O(a,t){return t===e.INTEGER?a.map(s=>parseInt(s)):a}function z(a,t=[]){return a.map(s=>({...s,columnType:s.columnType,maximumSize:s.maximumSize==null?void 0:s.maximumSize.toString(),maximumListLength:s.maximumListLength==null?void 0:s.maximumListLength.toString(),isSelected:!1,isOriginallyDefaultColumn:t.some(r=>r.name===s.name),jsonSubColumns:s.jsonSubColumns?s.jsonSubColumns.map(r=>({...r,columnType:r.columnType,isSelected:!1})):void 0,defaultValue:s.defaultValue&&s.columnType.endsWith("_LIST")?JSON.parse(s.defaultValue):s.defaultValue,enumValues:s.enumValues!=null?O(s.enumValues,s.columnType):void 0}))}function q(a){if(p(a))return{scope:a.scopeIds,viewTypeMask:a.viewTypeMask,viewEntityType:l(a.concreteType)};if(I(a)||D(a)){const t=I(a)?m:N;return{scope:(a.items??[]).map(s=>`${s.entityId}.${s.versionNumber}`),viewTypeMask:t,viewEntityType:l(a.concreteType)}}else if(d(a))return{scope:a.scopeIds,viewTypeMask:void 0,viewEntityType:l(a.concreteType)}}function g(a){switch(a){case e.STRING:case e.STRING_LIST:return{type:"string",minLength:1};case e.DOUBLE:return{type:"number"};case e.BOOLEAN:case e.BOOLEAN_LIST:return{type:"boolean"};case e.INTEGER:case e.INTEGER_LIST:return{type:"integer"};case e.DATE:case e.DATE_LIST:return{type:"string",format:"datetime"};case e.FILEHANDLEID:case e.ENTITYID:case e.ENTITYID_LIST:case e.LINK:case e.MEDIUMTEXT:case e.LARGETEXT:case e.USERID:case e.USERID_LIST:case e.SUBMISSIONID:case e.JSON:case e.EVALUATIONID:default:return{type:"string",minLength:1}}}function o(a){const{columnType:t,onChange:s,value:r=[],TextFieldProps:c}=a,[E,u]=i.useState(!1),S=i.useMemo(()=>g(t),[t]),L=i.useMemo(()=>r==null?"":t===e.DATE_LIST?r.map(T=>_(v(T))).join(", "):r.join(", "),[r,t]);return n.jsxs(n.Fragment,{children:[n.jsx(f,{arrayItemDefinition:S,value:r??void 0,isShowingModal:E,onConfirm:T=>{s(T),u(!1)},onCancel:()=>u(!1)}),n.jsx(A,{...c,value:L,onClick:()=>{u(!0)}})]})}try{o.displayName="MultiValueField",o.__docgenInfo={description:"",displayName:"MultiValueField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T[] | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T[] | null) => void"}},columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}},TextFieldProps:{defaultValue:null,description:"",name:"TextFieldProps",required:!1,type:{name:'Omit<TextFieldProps, "value" | "onChange">'}}}}}catch{}export{J as D,o as M,j as a,k as b,Y as c,B as d,b as e,K as f,q as g,X as h,P as i,C as j,y as k,H as l,z as t};
