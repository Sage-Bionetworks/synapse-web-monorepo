import{j as s}from"./jsx-runtime-DBMcmXCa.js";import{N as K,I as X,bk as J,l as W,bl as Q}from"./useFiles-BCC9o9bm.js";import{F as ee}from"./VerificationSubmission-B0kBNeMy.js";import"./StringUtils-CzgJJW-6.js";import"./OrientationBanner-D1D6xyRZ.js";import{r as L}from"./index-DBlnVwD8.js";import{u as te}from"./useDownloadList-B6Ze_7I6.js";import{c as se}from"./calculateFriendlyFileSize-z3744QQS.js";import{d as k}from"./dayjs.min-Dkt-OZPU.js";import{c as ne,g as ie}from"./iframe-D_N6e9gY.js";import{r as oe}from"./relativeTime-BO9yLbWH.js";import{S as b}from"./SkeletonInlineBlock-L2OJ_ShH.js";import{T as Y}from"./SynapseTableConstants-2qH3fDlQ.js";import{I as ae,L as re}from"./LayersTwoTone-Bl1teumH.js";import{T as P}from"./Tooltip-DtNzDJHf.js";import{c as le}from"./createSvgIcon-CSOVfYb_.js";import{A as de}from"./Alert-Dn4rajYU.js";import{B as ce}from"./Box-Chsd4vbP.js";import{B as z}from"./Button-CNqVIcaA.js";import{T as F}from"./Typography-DqN6Bou9.js";const ue=le([s.jsx("path",{d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8m4.2 12.2L11 13V7h1.5v5.2l4.5 2.7z",opacity:".3"},"0"),s.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7z"},"1")],"WatchLaterTwoTone"),me=200,q="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",B="ESTIMATED_DOWNLOAD_SPEED",fe="syn12600511",he=h=>new Promise((d,c)=>{const o=localStorage.getItem(q),p=localStorage.getItem(B);if(o&&p&&new Date().getTime()<Number(o)){d(Number(p));return}K(h,fe).then(m=>{const y=m,x={includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:y.id,associateObjectType:ee.FileEntity,fileHandleId:y.dataFileHandleId}]};X(x,h).then(l=>{const $=l.requestedFiles[0].preSignedURL,E=l.requestedFiles[0].fileHandle,T=new Date().getTime();return J(E,$).then(()=>{const D=E.contentSize/((new Date().getTime()-T-me)/1e3),w=new Date().getTime();localStorage.setItem(q,(w+1e3*60*5).toString()),localStorage.setItem(B,D.toString()),d(D)})})}).catch(m=>c(m))});var U={exports:{}};(function(h,d){(function(c,o){h.exports=o()})(ne,function(){var c,o,p=1e3,m=6e4,y=36e5,g=864e5,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,$=2628e6,E=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,T={years:l,months:$,days:g,hours:y,minutes:m,seconds:p,milliseconds:1,weeks:6048e5},D=function(n){return n instanceof O},w=function(n,t,e){return new O(n,e,t.$l)},v=function(n){return o.p(n)+"s"},A=function(n){return n<0},j=function(n){return A(n)?Math.ceil(n):Math.floor(n)},V=function(n){return Math.abs(n)},I=function(n,t){return n?A(n)?{negative:!0,format:""+V(n)+t}:{negative:!1,format:""+n+t}:{negative:!1,format:""}},O=function(){function n(e,i,r){var a=this;if(this.$d={},this.$l=r,e===void 0&&(this.$ms=0,this.parseFromMilliseconds()),i)return w(e*T[v(i)],this);if(typeof e=="number")return this.$ms=e,this.parseFromMilliseconds(),this;if(typeof e=="object")return Object.keys(e).forEach(function(S){a.$d[v(S)]=e[S]}),this.calMilliseconds(),this;if(typeof e=="string"){var u=e.match(E);if(u){var f=u.slice(2).map(function(S){return S!=null?Number(S):0});return this.$d.years=f[0],this.$d.months=f[1],this.$d.weeks=f[2],this.$d.days=f[3],this.$d.hours=f[4],this.$d.minutes=f[5],this.$d.seconds=f[6],this.calMilliseconds(),this}}return this}var t=n.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(i,r){return i+(e.$d[r]||0)*T[r]},0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=j(e/l),e%=l,this.$d.months=j(e/$),e%=$,this.$d.days=j(e/g),e%=g,this.$d.hours=j(e/y),e%=y,this.$d.minutes=j(e/m),e%=m,this.$d.seconds=j(e/p),e%=p,this.$d.milliseconds=e},t.toISOString=function(){var e=I(this.$d.years,"Y"),i=I(this.$d.months,"M"),r=+this.$d.days||0;this.$d.weeks&&(r+=7*this.$d.weeks);var a=I(r,"D"),u=I(this.$d.hours,"H"),f=I(this.$d.minutes,"M"),S=this.$d.seconds||0;this.$d.milliseconds&&(S+=this.$d.milliseconds/1e3,S=Math.round(1e3*S)/1e3);var M=I(S,"S"),G=e.negative||i.negative||a.negative||u.negative||f.negative||M.negative,Z=u.format||f.format||M.format?"T":"",_=(G?"-":"")+"P"+e.format+i.format+a.format+Z+u.format+f.format+M.format;return _==="P"||_==="-P"?"P0D":_},t.toJSON=function(){return this.toISOString()},t.format=function(e){var i=e||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:o.s(this.$d.years,2,"0"),YYYY:o.s(this.$d.years,4,"0"),M:this.$d.months,MM:o.s(this.$d.months,2,"0"),D:this.$d.days,DD:o.s(this.$d.days,2,"0"),H:this.$d.hours,HH:o.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:o.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:o.s(this.$d.seconds,2,"0"),SSS:o.s(this.$d.milliseconds,3,"0")};return i.replace(x,function(a,u){return u||String(r[a])})},t.as=function(e){return this.$ms/T[v(e)]},t.get=function(e){var i=this.$ms,r=v(e);return r==="milliseconds"?i%=1e3:i=r==="weeks"?j(i/T[r]):this.$d[r],i||0},t.add=function(e,i,r){var a;return a=i?e*T[v(i)]:D(e)?e.$ms:w(e,this).$ms,w(this.$ms+a*(r?-1:1),this)},t.subtract=function(e,i){return this.add(e,i,!0)},t.locale=function(e){var i=this.clone();return i.$l=e,i},t.clone=function(){return w(this.$ms,this)},t.humanize=function(e){return c().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.valueOf=function(){return this.asMilliseconds()},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},n}(),H=function(n,t,e){return n.add(t.years()*e,"y").add(t.months()*e,"M").add(t.days()*e,"d").add(t.hours()*e,"h").add(t.minutes()*e,"m").add(t.seconds()*e,"s").add(t.milliseconds()*e,"ms")};return function(n,t,e){c=e,o=e().$utils(),e.duration=function(a,u){var f=e.locale();return w(a,{$l:f},u)},e.isDuration=D;var i=t.prototype.add,r=t.prototype.subtract;t.prototype.add=function(a,u){return D(a)?H(this,a,1):i.bind(this)(a,u)},t.prototype.subtract=function(a,u){return D(a)?H(this,a,-1):r.bind(this)(a,u)}}})})(U);var pe=U.exports;const ye=ie(pe);k.extend(ye);k.extend(oe);function N(h){const{numFiles:d,numBytes:c}=h,{accessToken:o}=W(),p=!!c,[m,y]=L.useState({isLoading:p,downloadSpeed:0}),{isLoading:g,downloadSpeed:x}=m;L.useEffect(()=>{o&&he(o).then(v=>{y({isLoading:!1,downloadSpeed:v})})},[o]);const l=g||x===0||!c?0:c/x,$=l===0,E=$?"":k.duration({seconds:l}).humanize(),T=d===0,D=T?"SRC-inactive":"SRC-primary-text-color",w=$?"SRC-inactive":"SRC-primary-text-color";return s.jsxs("span",{className:"download-details-container",children:[s.jsxs("span",{children:[s.jsx(ae,{className:D}),T?s.jsx(b,{width:50}):s.jsxs(s.Fragment,{children:[d.toLocaleString(),"Â files"]})]}),p&&s.jsx(P,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Y,placement:"top",children:s.jsxs("span",{"data-testid":"numBytesUI",children:[s.jsx(re,{className:w}),$?s.jsx(b,{width:50}):se(c)]})}),p&&s.jsx(P,{title:"This is an estimate of how long package download will take.",enterNextDelay:Y,placement:"top",children:s.jsxs("span",{"data-testid":"downloadTimeEstimateUI",children:[s.jsx(ue,{className:w}),g&&d>0?s.jsx(b,{width:50}):E]})})]})}try{N.displayName="DownloadDetails",N.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link ../DownloadCart/DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}}}catch{}const C={2:{severity:"info",infoText:"Would you like to add these files to the download cart?",closeText:"Cancel"},3:{severity:"info",infoText:s.jsxs(s.Fragment,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",s.jsx("br",{}),"If you don't want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},1:{severity:"info",infoText:"Adding files to download cart",closeText:"Cancel"},0:{severity:"info",infoText:"Calculating file size",closeText:"Cancel"},4:{severity:"error",closeText:"Close",infoText:s.jsxs(s.Fragment,{children:["Please ",s.jsx(Q,{})," to add files to your download cart."]})}};function ge(h){const{status:d,fileCount:c,fileSize:o}=h;switch(d){case 0:case 1:return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"spinner white"}),s.jsx(F,{variant:"smallText1",children:C[d].infoText})]});case 4:return s.jsx(F,{variant:"smallText1",children:C[d].infoText});case 2:case 3:return s.jsxs(s.Fragment,{children:[s.jsx(N,{numFiles:c,numBytes:o}),s.jsx(F,{variant:"smallText1",sx:{flexGrow:1},children:C[d].infoText})]});default:return s.jsx(s.Fragment,{})}}function R(h){const{onAddToDownloadCart:d,onCancel:c,fileCount:o,fileSize:p,isLoadingStats:m=!1,isAddingToDownloadCart:y=!1}=h,{accessToken:g}=W(),{data:x}=te(),l=L.useMemo(()=>g?m?0:y?1:x&&x.totalNumberOfFiles>0?3:2:4,[g,m,y,x]);return s.jsx(s.Fragment,{children:s.jsx(de,{sx:{pr:4,py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},icon:C[l].severity==="error"?void 0:!1,severity:C[l].severity,className:"download-confirmation",action:s.jsxs(s.Fragment,{children:[l!==1&&s.jsx(z,{variant:"text",color:"primary",onClick:c,children:C[l].closeText}),(l===2||l===3)&&s.jsx(z,{variant:"contained",color:"primary",onClick:()=>{d()},sx:{ml:"5px"},children:"Add"})]}),children:s.jsx(ce,{display:"flex",alignItems:"center",gap:1,children:s.jsx(ge,{status:l,fileCount:o,fileSize:p})})})})}try{R.displayName="DownloadConfirmationUI",R.__docgenInfo={description:`This component is used to display the download confirmation dialog that presents to a user the number of files and the
total size of the files they are about to add to their download cart.`,displayName:"DownloadConfirmationUI",props:{onAddToDownloadCart:{defaultValue:null,description:"",name:"onAddToDownloadCart",required:!0,type:{name:"() => void"}},fileCount:{defaultValue:null,description:"",name:"fileCount",required:!0,type:{name:"number"}},fileSize:{defaultValue:null,description:"",name:"fileSize",required:!1,type:{name:"number"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},isLoadingStats:{defaultValue:null,description:"",name:"isLoadingStats",required:!1,type:{name:"boolean"}},isAddingToDownloadCart:{defaultValue:null,description:"",name:"isAddingToDownloadCart",required:!1,type:{name:"boolean"}}}}}catch{}export{R as D,ye as d};
