import{c8 as S,r as l,j as e,V as I,B as p,e5 as g,c5 as w,c3 as x}from"./iframe-DkJtXMGY.js";import{c as y}from"./MarkdownSynapse-Cj88j8IZ.js";import{C as N}from"./ConfirmationDialog-DYXCYbxt.js";import{D as R}from"./DialogBase-buJoyvfa.js";import{M as h}from"./MarkdownEditor-1ImM08Yn.js";const k="Unsaved Changes",M="Any unsaved changes may be lost. Are you sure that you would like to navigate away from this editor?",j="Could not save your changes. It is recommended that you copy your version of the wiki text so that it is not lost. ";function E(r){const{open:v,ownerObjectId:A,ownerObjectType:m,wikiPage:a,onCancel:s=S,onSave:T=S}=r,[u,C]=l.useState(a.title),[n,_]=l.useState(a.markdown),[f,o]=l.useState(!1),d=()=>{a&&a.markdown!==n?o(!0):s()},{mutate:O,isPending:t,error:c}=y({onSuccess:()=>T()});return e.jsx(R,{open:v,onCancel:d,maxWidth:"xl",fullWidth:!0,title:"Edit Wiki Markdown",content:e.jsxs(e.Fragment,{children:[t&&e.jsx(g,{}),a&&e.jsxs(e.Fragment,{children:[a.parentWikiId&&e.jsx(w,{label:"Title",placeholder:"Title",fullWidth:!0,sx:{mb:2},value:u,onChange:i=>C(i.target.value)}),e.jsx(h,{text:n,setText:_}),e.jsx(N,{open:f,title:k,content:M,onCancel:()=>o(!1),onConfirm:()=>{o(!1),s()}})]}),c&&e.jsx(x,{severity:"error",children:j+c.reason})]}),actions:e.jsxs(I,{sx:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",width:"100%"},children:[e.jsxs(I,{sx:{display:"flex",gap:1},children:[e.jsx(p,{variant:"outlined",disabled:t,onClick:d,children:"Cancel"}),e.jsx(p,{variant:"contained",color:"primary",disabled:t,onClick:()=>{if(a){const i={ownerObjectId:A,ownerObjectType:m,wikiPage:{...a,title:u,markdown:n}};O(i)}},children:t?"Saving...":"Save"})]}),!1]})})}try{E.displayName="WikiMarkdownEditor",E.__docgenInfo={description:"",displayName:"WikiMarkdownEditor",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},ownerObjectType:{defaultValue:null,description:"",name:"ownerObjectType",required:!0,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},ownerObjectId:{defaultValue:null,description:"",name:"ownerObjectId",required:!0,type:{name:"string"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPage"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"() => void"}}}}}catch{}export{E as W};
