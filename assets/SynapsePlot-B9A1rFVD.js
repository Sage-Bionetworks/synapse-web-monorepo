import{$ as v,eG as Q,a1 as A,j as s,c1 as B}from"./iframe-BE9PbKHz.js";import{P as D}from"./Plot-8-4KtZRf.js";const f=r=>{const{query:c}=r.synapsePlotWidgetParams,{selectedFacets:h,additionalFilters:q,onCustomPlotClick:y,queryContext:d}=r.customPlotParams??{},S={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:A,entityId:v(c),query:{sql:c,selectedFacets:h,additionalFilters:q}},{data:l,isLoading:R}=Q(S);if(R)return s.jsx(B,{width:"100%",height:"200px"});if(!l)return s.jsx(s.Fragment,{});const{title:_,xtitle:m,ytitle:p,type:w,xaxistype:P,showlegend:j,barmode:k,horizontal:i,displayModeBar:C}=r.synapsePlotWidgetParams,F={displayModeBar:C},a={showlegend:j,title:_,barmode:k};m&&(a.xaxis={title:m}),P&&(a.xaxis={...a.xaxis,type:P}),p&&(a.yaxis={title:p});const o=[],N=i?"h":"v",u=l.queryResult?.queryResults.headers??[],x=l.queryResult?.queryResults.rows??[];if(u.length==0||x.length==0)return s.jsx(s.Fragment,{});for(let t=0;t<u.length-1;t+=1)o[t]={orientation:N,name:u[t+1].name,type:w,x:[],y:[],customdata:[]};for(const t of x)for(let e=1;e<t.values.length;e+=1){const n=t.values,W=o[e-1].x,E=o[e-1].y,b=o[e-1].customdata;W.push(i?n[e]:n[0]),E.push(i?n[0]:n[e]),b.push(JSON.stringify(t))}let g;return y&&d&&(g=t=>{const e=JSON.parse(t.points[0].customdata);y({row:e,queryContext:d})}),s.jsx(D,{style:{width:"100%",height:"450px"},layout:a,data:o,config:F,onClick:g})};try{f.displayName="SynapsePlot",f.__docgenInfo={description:"",displayName:"SynapsePlot",props:{synapsePlotWidgetParams:{defaultValue:null,description:"",name:"synapsePlotWidgetParams",required:!0,type:{name:"SynapsePlotWidgetParams"}},customPlotParams:{defaultValue:null,description:"",name:"customPlotParams",required:!1,type:{name:"QueryWrapperPlotNavCustomPlotParams"}}}}}catch{}export{f as S};
