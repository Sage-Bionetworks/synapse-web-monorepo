import{r as _,j as t,gt as D,eE as j,eJ as K,eF as M,eG as v,eI as P,a0 as O,eL as B}from"./iframe-SFoYirDz.js";import{u as W}from"./useEntity-DJx9kr6F.js";import{p as h,a as Y}from"./SqlFunctions-CtcOBfAw.js";import{T as k,F as z,S as G}from"./TopLevelControls-CeoeI_1l.js";import{b as J}from"./QueryContext-fne1vZTO.js";import{N as S,Q as Z,b as H,e as X}from"./QueryWrapper-Cms9zKKm.js";import{a as $,R as ee}from"./RowSetView-D0KhefAK.js";import{S as te}from"./QueryWrapperErrorBoundary--JJqnuWz.js";const l=e=>({partMask:K|M|v|P|O|B,entityId:h(e.sql),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{limit:j,offset:0,...e}});function i(e){if(e.query)return e.query;{const n=Y(e.searchParams,e.sqlOperator,e.additionalFiltersSessionStorageKey);return{sql:e.sql,additionalFilters:n,offset:0}}}function C(e){var p;const{hideDownload:n}=e,{showAccessColumn:E,sql:q,hideAddToDownloadListColumn:u=n,hideQueryCount:g,name:Q,showTopLevelControls:a=!1,searchConfiguration:r,unitDescription:T="Results",rgbIndex:F,showLastUpdatedOn:x,noContentPlaceholderType:N=a?S.INTERACTIVE:S.STATIC,cardConfiguration:d,tableConfiguration:L,shouldDeepLink:w,...o}=e,[c,R]=_.useState(1),I=()=>{R(c+1)},U=((p=e.query)==null?void 0:p.sql)??q??"",b=i(e),m=l(b),V=h(U),{data:s}=W(V),A=JSON.stringify(m)+c;return _.createElement(Z,{...o,initQueryRequest:m,shouldDeepLink:w,key:A},t.jsx(H,{rgbIndex:F,unitDescription:T,showLastUpdatedOn:x,noContentPlaceholderType:N,...o,children:t.jsx(J,{children:y=>{if(y===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return t.jsx(X,{children:f=>{if(f===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return t.jsxs(t.Fragment,{children:[a&&t.jsx(k,{showColumnSelection:!0,name:Q,hideDownload:u,hideQueryCount:g,hideFacetFilterControl:!0,hideVisualizationsControl:!0,remount:I}),s&&D(s)&&s.isSearchEnabled?t.jsx(z,{ftsConfig:r==null?void 0:r.ftsConfig}):t.jsx(G,{...r,queryContext:y,queryVisualizationContext:f}),t.jsx(te,{}),a&&t.jsx($,{frontText:""}),t.jsx(ee,{tableConfiguration:d?void 0:{...L,showAccessColumn:E,hideAddToDownloadListColumn:u,...o},cardConfiguration:d})]})}})}})}))}try{i.displayName="getQueryFromProps",i.__docgenInfo={description:"",displayName:"getQueryFromProps",props:{}}}catch{}try{l.displayName="generateInitQueryRequest",l.__docgenInfo={description:"",displayName:"generateInitQueryRequest",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}},additionalFilters:{defaultValue:null,description:"",name:"additionalFilters",required:!1,type:{name:"QueryFilter[]"}},selectFileColumn:{defaultValue:null,description:"",name:"selectFileColumn",required:!1,type:{name:"number"}},selectFileVersionColumn:{defaultValue:null,description:"",name:"selectFileVersionColumn",required:!1,type:{name:"number"}}}}}catch{}try{C.displayName="StandaloneQueryWrapper",C.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{}}}catch{}export{C as S};
