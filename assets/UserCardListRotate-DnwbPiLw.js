import{j as i}from"./jsx-runtime-Du8NFWEI.js";import{L as x}from"./LargeButton-BqIaw-qM.js";import{l as T,S as V}from"./useFiles-CqHcB9r4.js";import{p as w,g as j}from"./SqlFunctions-BME-TI9h.js";import"./StringUtils-BUxkeJpG.js";import{i as F,h as O}from"./SynapseConstants-CMdv2tqR.js";import{r as f}from"./index-Dl6G-zuu.js";import{u as k}from"./use-deep-compare-effect.esm-COSQ_O61.js";import{g as M}from"./VerificationSubmission-CtqFoX_D.js";import"./OrientationBanner-N5yxtprX.js";import{L as Q}from"./UserBadge-BGfWRiP0.js";import{U as b}from"./UserCardList-qrWsArbr.js";const J="sage_rotate_uids",B=3,G=(e=[],a=B,r)=>{let o=[],t=[];const u=localStorage.getItem(r);if(u!=null&&(o=JSON.parse(u)),o.length){const s=e.filter(n=>!o.includes(n));if(s.length>=a)return t=s.slice(0,a),localStorage.setItem(r,JSON.stringify(o.concat(t))),t;{localStorage.removeItem(r);const n=e.slice(0,a-s.length);return localStorage.setItem(r,JSON.stringify(n)),s.concat(n)}}else return t=e.slice(0,a),localStorage.setItem(r,JSON.stringify(t)),t};function E({sql:e,count:a,useQueryResultUserData:r=!1,size:o=F,summaryLink:t,summaryLinkText:u,selectedFacets:s,searchParams:n,sqlOperator:y,additionalFiltersSessionStorageKey:U}){var L;const{accessToken:S}=T(),[c,_]=f.useState([]),[m,C]=f.useState(),[p,g]=f.useState();let R=!0;const q=`${J}-${e}-${JSON.stringify(s)}`;return k(()=>(async function(){g(!0);const A=w(e),v=j(U,n,y),D={partMask:O,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:A,query:{sql:e,additionalFilters:v,selectedFacets:s}},I=await V.getFullQueryTableResults(D,S),{queryResult:d}=I;if(d!=null&&d.queryResults.rows){const h=d.queryResults.headers.findIndex(l=>l.columnType===M.USERID),N=d.queryResults.rows.map(l=>l.values[h]).filter(l=>l!==null);if(R){const l=G(N,a,q);_(l),r&&C(I),g(!1)}}else console.log("UserCardListRotate: Error getting data")}(),()=>{R=!1}),[e,s,a,S,n,y]),i.jsxs("div",{className:"UserCardListRotate",children:[p&&i.jsx(Q,{}),!p&&c.length===0&&i.jsx("p",{className:"font-italic",children:"No one was found."}),!p&&c.length>0&&i.jsx(b,{list:c,size:o,rowSet:(L=m==null?void 0:m.queryResult)==null?void 0:L.queryResults}),t&&u&&i.jsx("div",{className:"UserCardListRotate__summary",children:i.jsx(x,{color:"secondary",variant:"contained",href:t,children:u})})]})}try{E.displayName="UserCardListRotate",E.__docgenInfo={description:"",displayName:"UserCardListRotate",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},useQueryResultUserData:{defaultValue:{value:"false"},description:"",name:"useQueryResultUserData",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"LARGE USER CARD"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},summaryLink:{defaultValue:null,description:"",name:"summaryLink",required:!1,type:{name:"string"}},summaryLinkText:{defaultValue:null,description:"",name:"summaryLinkText",required:!1,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:"",name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}}}}}catch{}export{E as U};
