import{ao as b,aJ as g,ke as D,kf as l,ca as I,r as j,j as m,c7 as h,kg as e,K as C,a3 as v,e0 as y,b as P}from"./iframe-MmUnwf_I.js";import{m as q}from"./mockRejectionReasonsTableQueryResultBundle-DI70dpzk.js";import{C as M}from"./CannedRejectionDialog-CX4lL-oR.js";import"./index-Chi_LkuB.js";import"./immutable.es-C7Y1z7XT.js";import"./ConfirmationDialog-GHfYW2YY.js";import"./DialogBase-jau6DM0L.js";import"./Close-B3vYte_0.js";import"./HelpPopover-DtES8MA2.js";import"./MarkdownPopover-DoWodOdq.js";import"./LightTooltip-4Nk8Q6mg.js";import"./MarkdownSynapse-CVJ0Q6XW.js";import"./SkeletonButton-I9hMZOT-.js";import"./SkeletonInlineBlock-Di0FCUFm.js";import"./SkeletonTable-BLb5k01Q.js";import"./SkeletonParagraph-_n4WmOaG.js";import"./FormControlLabel-kiBD7IDn.js";import"./Checkbox-BQeLkSuG.js";import"./SwitchBase-DN75FVfu.js";function V(o){const{accessToken:r}=b();return g({...o,mutationFn:({id:i,verificationState:s})=>D(i,s,r)})}const A="Thank you for submitting your Synapse profile for validation. Before we can accept your request:",N=`
If you have questions, do not respond to this email address. Instead, reply to:
act@sagebionetworks.org`,O="You may wish to reject the user's profile validation request for a specific reason. The list below contains some common rejection reasons. You will have a chance to edit the response before submitting it, including adding any rejection reason(s) not listed here.";function c(o){const{verificationSubmissionId:r,tableId:i=l,open:s,onRejectionSubmittedSuccess:p=I,onClose:u,currentState:f}=o,[d,E]=j.useState(""),{mutate:S,error:R}=V();function T(t,_){let a;switch(f){case e.SUBMITTED:a=e.REJECTED;break;case e.APPROVED:a=e.SUSPENDED;break;case e.REJECTED:case e.SUSPENDED:console.error("Cannot reject a request where the current state is already rejected or suspended"),u();return}S({id:r,verificationState:{state:a,reason:t,notes:_}},{onSuccess:()=>{p(),C(`Submission ${a===e.REJECTED?"rejected":"suspended"} and message sent to requester`,"info"),u()}})}return m.jsx(M,{open:s,tableId:i,onConfirm:t=>T(t,d),onClose:u,defaultMessagePrefix:A,defaultMessageAppend:N,rejectionFormPromptCopy:O,error:R,children:m.jsx(h,{label:"ACT Internal Notes",fullWidth:!0,multiline:!0,rows:3,sx:{mt:2},value:d,onChange:t=>E(t.target.value)})})}try{c.displayName="RejectProfileValidationRequestModal",c.__docgenInfo={description:`Modal component presented to an ACT profile validation reviewer when they decide to reject a validation request (a.k.a. a verificationSubmission).
The modal contains a form for selecting rejection reasons and a text field for editing the rejection message.
After crafting a message, the user can reject the request and send the message to the requester.`,displayName:"RejectProfileValidationRequestModal",props:{verificationSubmissionId:{defaultValue:null,description:"",name:"verificationSubmissionId",required:!0,type:{name:"string"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!1,type:{name:"string"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onRejectionSubmittedSuccess:{defaultValue:null,description:"",name:"onRejectionSubmittedSuccess",required:!1,type:{name:"() => void"}},currentState:{defaultValue:null,description:"",name:"currentState",required:!0,type:{name:"enum",value:[{value:'"SUBMITTED"'},{value:'"APPROVED"'},{value:'"REJECTED"'},{value:'"SUSPENDED"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}}}catch{}const{fn:k}=__STORYBOOK_MODULE_TEST__,oe={title:"Governance/RejectProfileValidationRequestModal",component:c,loaders:[()=>y({sql:`SELECT * FROM ${l}`},q)],parameters:{stack:"mock",msw:{handlers:[...v(P)]}}},n={name:"RejectProfileValidationRequestModal",args:{open:!0,currentState:e.SUBMITTED,tableId:l,verificationSubmissionId:"",onClose:k()}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  name: 'RejectProfileValidationRequestModal',
  args: {
    open: true,
    currentState: VerificationStateEnum.SUBMITTED,
    tableId: REJECT_VALIDATION_CANNED_RESPONSES_TABLE,
    verificationSubmissionId: '',
    onClose: fn()
  }
}`,...n.parameters?.docs?.source}}};const ae=["Demo"];export{n as Demo,ae as __namedExportsOrder,oe as default};
