import{l as i}from"./index-CEoZaRdy.js";import{g as P}from"./entityHandlers-BrEYLQKI.js";import{g as _,a as w}from"./userProfileHandlers-CYtPuflR.js";import{bf as y,bg as E,bh as N,bi as C,bj as O,bk as b,m as T,B as D}from"./SynapseClient-DLsmXUrC.js";import{c as F}from"./accessRequirementHandlers-CYoZpYpr.js";import{b as M}from"./MockSubmission-Dugyi4GJ.js";import{g as L}from"./dataAccessRequestHandlers-DTP2XDs6.js";import{g as U}from"./researchProjectHandlers-mTTxDkgq.js";import{g as B}from"./fileHandlers-Dzp0CC_z.js";import{H as p,x as v,aa as d}from"./index-Cf31rgEj.js";import{m as H,a as R}from"./mock_discussion-BIeWOcja.js";import{M as m}from"./mock_user_profile-DyzXylki.js";import{m as V}from"./mockProject-BK1gUz0t.js";import{B as j}from"./BasicMockedCrudService-CwcyrTsg.js";import{f as A}from"./fakerUtils-JZNSDtdI.js";import{c as q,b as G,a as K,g as W}from"./tableQueryHandlers-DEkeSjsU.js";import{a as I}from"./mockEvaluationQueue-DgIShNpQ.js";import{M as Y}from"./mockAnnotationColumns-CHJO4M9s.js";import{g as X}from"./personalAccessTokenHandlers-BW2hq78N.js";import{g as J,a as Q}from"./teamHandlers-BhY1-SBM.js";import{g as z}from"./accessRequirementAclHandlers-hOf8Ypb_.js";import{g as Z}from"./resetTwoFactorAuthHandlers-CoFQHnav.js";import"./RegularExpressions-RV1YxBM7.js";import"./OrientationBanner-BKoSQ39U.js";import"./index-Cu9bd8lq.js";import"./jsx-runtime-DoxjgJx5.js";const x=new j({initialData:H,idField:"id",autoGenerateId:!0}),S=new j({initialData:R,idField:"id",autoGenerateId:!0});function k(t,r){return S.getMany(o=>o.forumId===t).filter(o=>{switch(r){case p.NO_FILTER:return!0;case p.DELETED_ONLY:return o.isDeleted;case p.EXCLUDE_DELETED:return!o.isDeleted}})}function tt(t){return[i.rest.get(`${t}${y}/:id`,async(r,o,e)=>{let s=404,a={reason:`MSW could not find a mock forum object with ID ${r.params.id}`};const n=x.getOneById(r.params.id);return n&&(s=200,a=n),o(e.status(s),e.json(a))}),i.rest.get(`${t}${E}/:id`,async(r,o,e)=>{let s=404,a={reason:`MSW could not find a mock discussion thread bundle object with ID ${r.params.id}`};r.params.id==="messageUrl"&&(a={reason:"GET /thread/messageUrl is not yet implemented"});const n=S.getOneById(r.params.id);return n&&(s=200,a=n),o(e.status(s),e.json(a))}),i.rest.post(`${t}${E}`,async(r,o,e)=>{const s=await r.json(),a=S.create({forumId:s.forumId,projectId:V.id,title:s.title,createdOn:new Date().toISOString(),createdBy:String(m),modifiedOn:new Date().toISOString(),etag:"etag",messageKey:"todo key",numberOfViews:0,numberOfReplies:0,lastActivity:new Date().toISOString(),activeAuthors:[String(m)],isEdited:!1,isDeleted:!1,isPinned:!1});return o(e.status(201),e.json(a))}),i.rest.get(`${t}${N(":forumId")}`,async(r,o,e)=>{const s=r.url.searchParams.get("offset"),a=s?parseInt(s):0,n=r.url.searchParams.get("limit"),u=n?parseInt(n):10,c=r.params.filter??p.EXCLUDE_DELETED,l=k(r.params.forumId,c),g={results:l.slice(a,a+u),totalNumberOfResults:l.length};return o(e.status(200),e.json(g))}),i.rest.get(`${t}${y}/:id/moderators`,async(r,o,e)=>{const s={results:[String(m)],totalNumberOfResults:1};return o(e.status(200),e.json(s))})]}function $(t){return{subscriptionId:String(A.number.int({min:1e3,max:9999})),subscriberId:String(m),createdOn:A.date.anytime().toISOString(),...t}}const et=H.map(t=>$({objectId:t.id,objectType:v.FORUM})),st=R.map(t=>$({objectType:v.THREAD,objectId:t.id})),f=new j({initialData:[...et,...st],idField:"subscriptionId",autoGenerateId:!0});function h(t,r="ASC",o=0,e=10,s){const a=f.getAll().filter(u=>t?u.objectType===t:!0).filter(u=>s?s.includes(u.objectId):!0).sort((u,c)=>{const l=new Date(c.createdOn).getTime()-new Date(u.createdOn).getTime();return r==="ASC"?l:-1*l}),n=a.length;return{results:a.slice(o,o+e),totalNumberOfResults:n}}function rt(t){return[i.rest.get(`${t}/repo/v1/subscription/all`,async(r,o,e)=>{const s=r.url.searchParams.get("objectType")??void 0,a=r.url.searchParams.get("sortDirection")??void 0,n=r.url.searchParams.get("offset"),u=n?parseInt(n):void 0,c=r.url.searchParams.get("limit"),l=c?parseInt(c):void 0,g=h(s??void 0,a,u,l);return o(e.status(200),e.json(g))}),i.rest.post(`${t}/repo/v1/subscription/list`,async(r,o,e)=>{const s=await r.json(),a=h(s.objectType,s.sortDirection,void 0,void 0,s.idList);return o(e.status(200),e.json(a))}),i.rest.post(`${t}/repo/v1/subscription`,async(r,o,e)=>{const s=await r.json(),a=f.create({subscriberId:String(m),objectId:s.objectId,objectType:s.objectType,createdOn:new Date().toISOString()});return o(e.status(201),e.json(a))}),i.rest.delete(`${t}/repo/v1/subscription/:id`,async(r,o,e)=>{const s=r.params.id;return f.delete(s),o(e.status(200),e.body(""))}),i.rest.post(`${t}/repo/v1/subscription/subscribers`,async(r,o,e)=>{const s=await r.json(),n={subscribers:f.getMany(u=>u.objectType===s.objectType&&u.objectId===s.objectId).map(u=>u.subscriberId)};return o(e.status(200),e.json(n))})]}function ot(t){return[i.rest.get(`${t}${C(":evaluationId")}`,async(r,o,e)=>{let s=404,a={reason:`Mock Service worker could not find a mock evaluation queue with ID ${r.params.evaluationId}`};const n=I.find(u=>u.id===r.params.entityId);return n&&(a=n,s=200),o(e.status(s),e.json(a))}),i.rest.get(`${t}${O}`,async(r,o,e)=>{let s=200,a={results:I,totalNumberOfResults:I.length};return o(e.status(s),e.json(a))})]}function at(t){return[i.rest.post(`${t}${b}/message`,async(r,o,e)=>{const s=await r.json();return o(e.status(201),e.json(s))})]}const nt={[d.DESCRIPTION_FIELD]:!1,[d.VIRTUALTABLE_SUPPORT]:!1,[d.JSONSCHEMA_VALIDATION_STATUS]:!1,[d.REACT_ENTITY_ACL_EDITOR]:!1};function it(t={portalOrigin:T(D.PORTAL_ENDPOINT),overrides:{}}){const{portalOrigin:r,overrides:o}=t;return i.rest.get(`${r}Portal/featureflags`,(e,s,a)=>s(a.status(200),a.json({...nt,...o}),a.set("Content-Type","application/json")))}const ut={creators:[{creatorName:"Farnsworth, Hubert"},{creatorName:"Wong, Amy"}],titles:[{title:"Mathematics of quantum neutrino fields"}],publicationYear:3024};function lt(t,r=ut){return[i.rest.get(`${t}${b}/doi`,async(o,e,s)=>e(s.status(201),s.json(r)))]}const ct=(t,r)=>[i.rest.options("*",async(o,e,s)=>e(s.status(200))),i.rest.get(`${t}/auth/v1/authenticatedOn`,async(o,e,s)=>e(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...P(t),..._(t),w(t,!0,!0),...M(t),...F(t),...z(t),...L(t),...U(t),...B(t),...tt(t),...rt(t),...ot(t),q(t),...G(Y,t),...K(t),...X(t),...J(t),...Q(t),...Z(t),...at(t),it({portalOrigin:r}),...W(t),...lt(t)];ct(T(D.REPO_ENDPOINT),T(D.PORTAL_ENDPOINT));export{ct as g};
