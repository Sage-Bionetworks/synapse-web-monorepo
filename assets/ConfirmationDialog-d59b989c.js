var gC=Object.defineProperty;var yC=(e,t,n)=>t in e?gC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Le=(e,t,n)=>(yC(e,typeof t!="symbol"?t+"":t,n),n);import{a as L,j as m,F as Q}from"./jsx-runtime-095bf462.js";import{r as bC,i as wC,a as SC}from"./jsx-runtime_commonjs-proxy-4022e807.js";import{r as $,R as B}from"./index-8db94870.js";import{g as Et,c as Gr}from"./_commonjsHelpers-042e6b4d.js";import{u as qe,ar as ca,aP as Wa,S as je,aQ as ib,aR as ob,aS as _C,aT as ar,aU as EC,K as Oc,b as sb,a as CC,aV as xC,aW as wi,aX as hp,aY as lb,aZ as NC,a_ as ub,a$ as IC,b0 as ue,b1 as Si,b2 as cb,f as It,b3 as TC,b4 as PC,g as RC,E as mp,b5 as AC,b6 as kC,b7 as jh,ai as db,R as $C,b8 as qC,b9 as OC,ba as DC}from"./SynapseClient-3acc417d.js";import{W as da}from"./WideButton-cf30711c.js";import{i as FC,a as vp,b as gp,c as Dc,d as To,e as Po,f as LC,g as VC,h as MC,j as BC}from"./IsType-17a1374f.js";import{S as Ns,l as yp}from"./LoadingScreen-8ddf62a3.js";import{u as UC,U as Zn,a as fb,g as zC}from"./UserCard-b8b5c23f.js";import{T as HC,M as WC,S as Ro,m as fa,n as pa,o as bp,V as ja,p as Is,q as jC,r as QC,s as GC,t as Ts,u as Ps,v as Rs,w as As,x as Pl,y as YC,E as Fc,h as wp,z as KC,C as XC,j as pb,B as Sp,H as ZC,I as hb,O as Lc,J as Qh,G as JC,F as e1,K as Gh}from"./SynapseConstants-1ebc8be6.js";import{p as t1,S as mb,D as r1}from"./RegularExpressions-bc0adf55.js";import{u as ha}from"./react-intersection-observer.modern-64b519d2.js";import{u as vb}from"./useInfiniteQuery-5e534d21.js";import{f as Qa}from"./DateFormatter-6a850d02.js";import{d as ir}from"./dayjs.min-8d4ef725.js";import{S as _p}from"./SkeletonTable-54d7f6f9.js";import{S as fn}from"./Skeleton-e84f6548.js";import{c as gb,b as n1,d as Bn,f as a1,a as Jn,g as yb,h as bb,j as i1,i as wb}from"./EntityTypeUtils-3a2289b7.js";import{P as or,g as o1,B as s1}from"./getEndpoint-ac94413e.js";import{u as Yh,T as wt,t as Vc}from"./Tooltip-fcb4b0de.js";import{T as xe}from"./Typography-fa1f2f14.js";import{E as Kh}from"./EntityIcon-448be96f.js";import{I as $e,a as l1,L as u1,S as c1,t as d1,H as f1}from"./IconSvg-fd201834.js";import{c as ks}from"./_commonjs-dynamic-modules-302442b1.js";import{_ as p1,a as Sb,b as h1,c as _b,k as $s,d as m1,e as v1,f as g1,g as y1,h as Eb,i as b1,j as w1,l as S1,m as Cb,n as xb,o as Nb,u as Ib,p as _1}from"./uniq-12747539.js";import{d as In,e as Tb,f as ma,a as sr,g as Zr,r as E1,h as C1,j as Pb,k as Rb,l as Ep,n as Cp,o as x1,p as xp,q as Jr,s as N1,c as I1,t as Np,u as _i,v as T1,w as P1,x as R1,b as Ab,y as Ip,z as Tp,A as A1,B as kb,C as $b,D as k1,E as $1,F as q1,G as O1,H as qs,I as D1,J as F1,K as L1,L as qb,M as Ob,_ as V1}from"./mapValues-b2620c05.js";import{b as M1,c as Pp}from"./isPlainObject-ef616bd3.js";import{t as B1,r as U1}from"./now-ace1e546.js";import"./index-8ce4a492.js";import{d as z1,i as $a,u as H1,t as W1,a as j1}from"./unCamelCase-81443ec7.js";import{u as Q1,R as G1}from"./RequestDownloadCard-ce98d5ed.js";import{d as Yr,C as Y1}from"./ToastMessage-0510043e.js";import{_ as Ei}from"./objectWithoutPropertiesLoose-4f48578a.js";import{_ as We}from"./extends-98964cd2.js";import{e as Os,g as Ds,s as Vt,o as at,f as Fs,i as ea,j as Ls,k as $n}from"./styled-8ebe2b7d.js";import{k as Db,c as Fb}from"./emotion-react.browser.esm-cc724fea.js";import{c as Lb,P as Vb}from"./factory-837f2467.js";import{p as en,a as Mb,g as Rp}from"./SqlFunctions-c9db38cf.js";import{u as Ci}from"./useEntity-b5ea9169.js";import{T as Ao,N as K1,I as Xh}from"./SynapseTableConstants-942d2b0b.js";import{c as va}from"./createSvgIcon-075f7759.js";import{u as ko,a as X1,b as Bb}from"./use-deep-compare-effect.esm-08e85271.js";import{u as Z1,a as J1}from"./useDownloadList-6f327646.js";import{a as Ub,u as zb,b as ex}from"./useGetQueryResultBundle-8c4261ab.js";import{A as Lr}from"./Alert-a969d207.js";import{B as ht}from"./Button-7a4e3dd9.js";import{B as et}from"./Box-bbfe1a31.js";import{s as tx}from"./NoSearchResults-460db635.js";import{s as rx}from"./NoData-59ea70fa.js";import{P as Ie}from"./index-58d3fd43.js";import{_ as nx}from"./pick-b632691e.js";import{g as ax}from"./sortBy-b5eea065.js";import{i as Hb,r as Wb,h as jb,a as Qb}from"./queryUtils-d36ff886.js";import{c as Mr}from"./cloneDeep-4af97fae.js";import{a as ix,b as Ap,c as Gb,d as ox,e as sx,f as lx,g as ux,h as cx,u as Yb,i as Kb}from"./useAccessRequirements-f7245eda.js";import{u as Ma,S as dx}from"./UserSearchBoxV2-a27721e3.js";import{S as fx}from"./StandaloneLoginForm-1723588a.js";import{D as Ga,a as Ya,b as kp}from"./DialogTitle-2d245e94.js";import{S as xi}from"./Stack-c93972f5.js";import{I as Vs}from"./IconButton-03ffcd84.js";import{R as px}from"./ResearchProjectForm-16bc88fe.js";import{D as hx}from"./DataAccessRequestAccessorsFilesForm-dd918cc2.js";import{A as mx}from"./AuthenticatedRequirement-7377b3fa.js";import{C as vx}from"./CertificationRequirement-409ac1b9.js";import{V as gx}from"./ValidationRequirement-84534f2d.js";import{T as yx}from"./TwoFactorAuthEnabledRequirement-a920bf44.js";import{R as $p,a as tr}from"./RequirementItem-54c2f24a.js";import{L as Rt}from"./Link-e1e47239.js";import{M as Xb}from"./Dialog-36a7ec44.js";import{A as Zb}from"./ActionRequiredCard-d393440e.js";import{D as st,E as Sn,C as qp,a as bx,S as wx}from"./ElementWithTooltip-4b26eb5f.js";import{T as Sx,a as Rl}from"./Tabs-9e113da5.js";import{Q as _x}from"./QueryCount-a870d0d1.js";import{S as Ex}from"./SvgIcon-147e032d.js";import{P as Cx}from"./Paper-ca64eb44.js";import{I as Ms}from"./Icon-ed10218a.js";import{u as xx}from"./uniqueId-4d05949d.js";import{R as Nx}from"./RadioGroup-bf0fed90.js";import{R as Ix}from"./RangeSlider-1107d3e3.js";import{r as Tx}from"./react-sizeme-0d7fb727.js";import{g as Px}from"./ColorGradient-fc5a110b.js";import{I as Rx}from"./InfoOutlined-3ee3099a.js";import{S as Ax}from"./SelectionCriteriaPill-7577ae4c.js";import{_ as kx,e as Zh,f as Al,v as $x,b as Jh,g as qx,i as Ox,u as Dx,S as Fx,d as Lx}from"./Select-457c486b.esm-e6ffc3cc.js";import{I as Vx}from"./IconList-b326f0c5.js";import{B as Mx}from"./Button-5637ed55.js";import{U as Bx}from"./UserCardList-9bbb7e16.js";import{u as Jb}from"./useTheme-df5273c4.js";import{E as Mc}from"./EntityLink-06d50ce3.js";import{u as Ux}from"./useControlled-be22aa93.js";import{B as zx}from"./ButtonBase-92b85091.js";import{e as zi}from"./_MapCache-c99e0be1.js";import{u as Hx,U as Wx}from"./UserOrTeamBadge-6a9da474.js";import{S as jx}from"./SynapseVideo-14537cac.js";const Qx=e=>{const t=$.useRef({});return $.useEffect(()=>{t.current=e}),t.current},ew=Qx;function Gx(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:r=!1}=e,i=ew({badgeContent:t,max:a});let o=n;n===!1&&t===0&&!r&&(o=!0);const{badgeContent:s,max:l=a}=o?i:e,c=s&&Number(s)>l?`${l}+`:s;return{badgeContent:s,invisible:o,max:l,displayValue:c}}function Yx(e){return Ds("MuiBadge",e)}const Kx=Os("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Tr=Kx,Xx=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],kl=10,$l=4,Zx=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:r,variant:i,classes:o={}}=e,s={root:["root"],badge:["badge",i,a&&"invisible",`anchorOrigin${at(n.vertical)}${at(n.horizontal)}`,`anchorOrigin${at(n.vertical)}${at(n.horizontal)}${at(r)}`,`overlap${at(r)}`,t!=="default"&&`color${at(t)}`]};return Ls(s,Yx,o)},Jx=Vt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),eN=Vt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${at(n.anchorOrigin.vertical)}${at(n.anchorOrigin.horizontal)}${at(n.overlap)}`],n.color!=="default"&&t[`color${at(n.color)}`],n.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>We({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:kl*2,lineHeight:1,padding:"0 6px",height:kl*2,borderRadius:kl,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.variant==="dot"&&{borderRadius:$l,height:$l*2,minWidth:$l*2,padding:0},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Tr.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),tN=$.forwardRef(function(t,n){var a,r,i,o,s,l;const c=Fs({props:t,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:d,component:f,components:p={},componentsProps:h={},children:v,overlap:g="rectangular",color:b="default",invisible:E=!1,max:y=99,badgeContent:_,slots:w,slotProps:S,showZero:C=!1,variant:x="standard"}=c,I=Ei(c,Xx),{badgeContent:P,invisible:q,max:O,displayValue:T}=Gx({max:y,invisible:E,badgeContent:_,showZero:C}),N=ew({anchorOrigin:u,color:b,overlap:g,variant:x,badgeContent:_}),A=q||P==null&&x!=="dot",{color:k=b,overlap:R=g,anchorOrigin:V=u,variant:F=x}=A?N:c,z=F!=="dot"?T:void 0,W=We({},c,{badgeContent:P,invisible:A,max:O,displayValue:z,showZero:C,anchorOrigin:V,color:k,overlap:R,variant:F}),G=Zx(W),K=(a=(r=w==null?void 0:w.root)!=null?r:p.Root)!=null?a:Jx,Y=(i=(o=w==null?void 0:w.badge)!=null?o:p.Badge)!=null?i:eN,X=(s=S==null?void 0:S.root)!=null?s:h.root,J=(l=S==null?void 0:S.badge)!=null?l:h.badge,ee=Yh({elementType:K,externalSlotProps:X,externalForwardedProps:I,additionalProps:{ref:n,as:f},ownerState:W,className:ea(X==null?void 0:X.className,G.root,d)}),ce=Yh({elementType:Y,externalSlotProps:J,ownerState:W,className:ea(G.badge,J==null?void 0:J.className)});return L(K,We({},ee,{children:[v,m(Y,We({},ce,{children:z}))]}))}),rN=tN;function nN(e){return Ds("MuiCircularProgress",e)}Os("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const aN=["className","color","disableShrink","size","style","thickness","value","variant"];let Bs=e=>e,em,tm,rm,nm;const Pr=44,iN=Db(em||(em=Bs`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),oN=Db(tm||(tm=Bs`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),sN=e=>{const{classes:t,variant:n,color:a,disableShrink:r}=e,i={root:["root",n,`color${at(a)}`],svg:["svg"],circle:["circle",`circle${at(n)}`,r&&"circleDisableShrink"]};return Ls(i,nN,t)},lN=Vt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${at(n.color)}`]]}})(({ownerState:e,theme:t})=>We({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Fb(rm||(rm=Bs`
      animation: ${0} 1.4s linear infinite;
    `),iN)),uN=Vt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),cN=Vt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${at(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>We({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Fb(nm||(nm=Bs`
      animation: ${0} 1.4s ease-in-out infinite;
    `),oN)),dN=$.forwardRef(function(t,n){const a=Fs({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:s=40,style:l,thickness:c=3.6,value:u=0,variant:d="indeterminate"}=a,f=Ei(a,aN),p=We({},a,{color:i,disableShrink:o,size:s,thickness:c,value:u,variant:d}),h=sN(p),v={},g={},b={};if(d==="determinate"){const E=2*Math.PI*((Pr-c)/2);v.strokeDasharray=E.toFixed(3),b["aria-valuenow"]=Math.round(u),v.strokeDashoffset=`${((100-u)/100*E).toFixed(3)}px`,g.transform="rotate(-90deg)"}return m(lN,We({className:ea(h.root,r),style:We({width:s,height:s},g,l),ownerState:p,ref:n,role:"progressbar"},b,f,{children:m(uN,{className:h.svg,ownerState:p,viewBox:`${Pr/2} ${Pr/2} ${Pr} ${Pr}`,children:m(cN,{className:h.circle,style:v,ownerState:p,cx:Pr,cy:Pr,r:(Pr-c)/2,fill:"none",strokeWidth:c})})}))}),fN=dN;function pN(e){return Ds("MuiPagination",e)}Os("MuiPagination",["root","ul","outlined","text"]);const hN=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function mN(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:a=1,defaultPage:r=1,disabled:i=!1,hideNextButton:o=!1,hidePrevButton:s=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:d=!1,siblingCount:f=1}=e,p=Ei(e,hN),[h,v]=Ux({controlled:c,default:r,name:n,state:"page"}),g=(I,P)=>{c||v(P),l&&l(I,P)},b=(I,P)=>{const q=P-I+1;return Array.from({length:q},(O,T)=>I+T)},E=b(1,Math.min(t,a)),y=b(Math.max(a-t+1,t+1),a),_=Math.max(Math.min(h-f,a-t-f*2-1),t+2),w=Math.min(Math.max(h+f,t+f*2+2),y.length>0?y[0]-2:a-1),S=[...u?["first"]:[],...s?[]:["previous"],...E,..._>t+2?["start-ellipsis"]:t+1<a-t?[t+1]:[],...b(_,w),...w<a-t-1?["end-ellipsis"]:a-t>t?[a-t]:[],...y,...o?[]:["next"],...d?["last"]:[]],C=I=>{switch(I){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return a;default:return null}},x=S.map(I=>typeof I=="number"?{onClick:P=>{g(P,I)},type:"page",page:I,selected:I===h,disabled:i,"aria-current":I===h?"true":void 0}:{onClick:P=>{g(P,C(I))},type:I,page:C(I),selected:!1,disabled:i||I.indexOf("ellipsis")===-1&&(I==="next"||I==="last"?h>=a:h<=1)});return We({items:x},p)}function vN(e){return Ds("MuiPaginationItem",e)}const gN=Os("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Dt=gN,am=va(m("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),im=va(m("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),om=va(m("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),sm=va(m("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),yN=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],tw=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${at(n.size)}`],n.variant==="text"&&t[`text${at(n.color)}`],n.variant==="outlined"&&t[`outlined${at(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},bN=e=>{const{classes:t,color:n,disabled:a,selected:r,size:i,shape:o,type:s,variant:l}=e,c={root:["root",`size${at(i)}`,l,o,n!=="standard"&&`${l}${at(n)}`,a&&"disabled",r&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return Ls(c,vN,t)},wN=Vt("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:tw})(({theme:e,ownerState:t})=>We({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Dt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),SN=Vt(zx,{name:"MuiPaginationItem",slot:"Root",overridesResolver:tw})(({theme:e,ownerState:t})=>We({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Dt.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Dt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Dt.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:$n(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Dt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:$n(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Dt.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>We({},t.variant==="text"&&{[`&.${Dt.selected}`]:We({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Dt.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Dt.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Dt.selected}`]:We({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:$n(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:$n(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:$n(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Dt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:$n(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Dt.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),_N=Vt("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>We({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),EN=$.forwardRef(function(t,n){const a=Fs({props:t,name:"MuiPaginationItem"}),{className:r,color:i="standard",component:o,components:s={},disabled:l=!1,page:c,selected:u=!1,shape:d="circular",size:f="medium",slots:p={},type:h="page",variant:v="text"}=a,g=Ei(a,yN),b=We({},a,{color:i,disabled:l,selected:u,shape:d,size:f,type:h,variant:v}),E=Jb(),y=bN(b),w=(E.direction==="rtl"?{previous:p.next||s.next||sm,next:p.previous||s.previous||om,last:p.first||s.first||am,first:p.last||s.last||im}:{previous:p.previous||s.previous||om,next:p.next||s.next||sm,first:p.first||s.first||am,last:p.last||s.last||im})[h];return h==="start-ellipsis"||h==="end-ellipsis"?m(wN,{ref:n,ownerState:b,className:ea(y.root,r),children:"â€¦"}):L(SN,We({ref:n,ownerState:b,component:o,disabled:l,className:ea(y.root,r)},g,{children:[h==="page"&&c,w?m(_N,{as:w,ownerState:b,className:y.icon}):null]}))}),CN=EN,xN=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],NN=e=>{const{classes:t,variant:n}=e;return Ls({root:["root",n],ul:["ul"]},pN,t)},IN=Vt("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),TN=Vt("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function PN(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const RN=$.forwardRef(function(t,n){const a=Fs({props:t,name:"MuiPagination"}),{boundaryCount:r=1,className:i,color:o="standard",count:s=1,defaultPage:l=1,disabled:c=!1,getItemAriaLabel:u=PN,hideNextButton:d=!1,hidePrevButton:f=!1,renderItem:p=x=>m(CN,We({},x)),shape:h="circular",showFirstButton:v=!1,showLastButton:g=!1,siblingCount:b=1,size:E="medium",variant:y="text"}=a,_=Ei(a,xN),{items:w}=mN(We({},a,{componentName:"Pagination"})),S=We({},a,{boundaryCount:r,color:o,count:s,defaultPage:l,disabled:c,getItemAriaLabel:u,hideNextButton:d,hidePrevButton:f,renderItem:p,shape:h,showFirstButton:v,showLastButton:g,siblingCount:b,size:E,variant:y}),C=NN(S);return m(IN,We({"aria-label":"pagination navigation",className:ea(C.root,i),ownerState:S,ref:n},_,{children:m(TN,{className:C.ul,ownerState:S,children:w.map((x,I)=>m("li",{children:p(We({},x,{color:o,"aria-label":u(x.type,x.page,x.selected),shape:h,size:E,variant:y}))},I))})}))}),AN=RN,kN=va(m("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp"),$N=va([m("path",{d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8zm4.2 12.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z",opacity:".3"},"0"),m("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"},"1")],"WatchLaterTwoTone");var Op={},qN=wC;Object.defineProperty(Op,"__esModule",{value:!0});var rw=Op.default=void 0,ON=qN(bC()),DN=SC,FN=(0,ON.default)((0,DN.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");rw=Op.default=FN;var Bc={exports:{}},Ze={},Uc={exports:{}},Tn={};function nw(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function LN(e,t,n){}function VN(e,t,n){}var MN=/javascript\s*\:/img;function BN(e,t){return MN.test(t)?"":t}Tn.whiteList=nw();Tn.getDefaultWhiteList=nw;Tn.onAttr=LN;Tn.onIgnoreAttr=VN;Tn.safeAttrValue=BN;var UN={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,r;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,r=e.length;a<r;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},xa=UN;function zN(e,t){e=xa.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,a=!1,r=0,i=0,o="";function s(){if(!a){var u=xa.trim(e.slice(r,i)),d=u.indexOf(":");if(d!==-1){var f=xa.trim(u.slice(0,d)),p=xa.trim(u.slice(d+1));if(f){var h=t(r,o.length,f,p,u);h&&(o+=h+"; ")}}}r=i+1}for(;i<n;i++){var l=e[i];if(l==="/"&&e[i+1]==="*"){var c=e.indexOf("*/",i+2);if(c===-1)break;i=c+1,r=i+1,a=!1}else l==="("?a=!0:l===")"?a=!1:l===";"?a||s():l===`
`&&s()}return xa.trim(o)}var HN=zN,Hi=Tn,WN=HN;function lm(e){return e==null}function jN(e){var t={};for(var n in e)t[n]=e[n];return t}function aw(e){e=jN(e||{}),e.whiteList=e.whiteList||Hi.whiteList,e.onAttr=e.onAttr||Hi.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Hi.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Hi.safeAttrValue,this.options=e}aw.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,a=n.whiteList,r=n.onAttr,i=n.onIgnoreAttr,o=n.safeAttrValue,s=WN(e,function(l,c,u,d,f){var p=a[u],h=!1;if(p===!0?h=p:typeof p=="function"?h=p(d):p instanceof RegExp&&(h=p.test(d)),h!==!0&&(h=!1),d=o(u,d),!!d){var v={position:c,sourcePosition:l,source:f,isWhite:h};if(h){var g=r(u,d,v);return lm(g)?u+":"+d:g}else{var g=i(u,d,v);if(!lm(g))return g}}});return s};var QN=aw;(function(e,t){var n=Tn,a=QN;function r(o,s){var l=new a(s);return l.process(o)}t=e.exports=r,t.FilterCSS=a;for(var i in n)t[i]=n[i];typeof window<"u"&&(window.filterCSS=e.exports)})(Uc,Uc.exports);var Dp=Uc.exports,Fp={indexOf:function(e,t){var n,a;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var a,r;if(Array.prototype.forEach)return e.forEach(t,n);for(a=0,r=e.length;a<r;a++)t.call(n,e[a],a,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},GN=Dp.FilterCSS,YN=Dp.getDefaultWhiteList,$o=Fp;function iw(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ow=new GN;function KN(e,t,n){}function XN(e,t,n){}function ZN(e,t,n){}function JN(e,t,n){}function sw(e){return e.replace(tI,"&lt;").replace(rI,"&gt;")}function eI(e,t,n,a){if(n=pw(n),t==="href"||t==="src"){if(n=$o.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Wi.lastIndex=0,Wi.test(n))return""}else if(t==="style"){if(um.lastIndex=0,um.test(n)||(cm.lastIndex=0,cm.test(n)&&(Wi.lastIndex=0,Wi.test(n))))return"";a!==!1&&(a=a||ow,n=a.process(n))}return n=hw(n),n}var tI=/</g,rI=/>/g,nI=/"/g,aI=/&quot;/g,iI=/&#([a-zA-Z0-9]*);?/gim,oI=/&colon;?/gim,sI=/&newline;?/gim,Wi=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,um=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,cm=/u\s*r\s*l\s*\(.*/gi;function lw(e){return e.replace(nI,"&quot;")}function uw(e){return e.replace(aI,'"')}function cw(e){return e.replace(iI,function(n,a){return a[0]==="x"||a[0]==="X"?String.fromCharCode(parseInt(a.substr(1),16)):String.fromCharCode(parseInt(a,10))})}function dw(e){return e.replace(oI,":").replace(sI," ")}function fw(e){for(var t="",n=0,a=e.length;n<a;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return $o.trim(t)}function pw(e){return e=uw(e),e=cw(e),e=dw(e),e=fw(e),e}function hw(e){return e=lw(e),e=sw(e),e}function lI(){return""}function uI(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function a(o){return n?!0:$o.indexOf(e,o)!==-1}var r=[],i=!1;return{onIgnoreTag:function(o,s,l){if(a(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return r.push([i!==!1?i:l.position,u]),i=!1,c}else return i||(i=l.position),"[removed]";else return t(o,s,l)},remove:function(o){var s="",l=0;return $o.forEach(r,function(c){s+=o.slice(l,c[0]),l=c[1]}),s+=o.slice(l),s}}}function cI(e){for(var t="",n=0;n<e.length;){var a=e.indexOf("<!--",n);if(a===-1){t+=e.slice(n);break}t+=e.slice(n,a);var r=e.indexOf("-->",a);if(r===-1)break;n=r+3}return t}function dI(e){var t=e.split("");return t=t.filter(function(n){var a=n.charCodeAt(0);return a===127?!1:a<=31?a===10||a===13:!0}),t.join("")}Ze.whiteList=iw();Ze.getDefaultWhiteList=iw;Ze.onTag=KN;Ze.onIgnoreTag=XN;Ze.onTagAttr=ZN;Ze.onIgnoreTagAttr=JN;Ze.safeAttrValue=eI;Ze.escapeHtml=sw;Ze.escapeQuote=lw;Ze.unescapeQuote=uw;Ze.escapeHtmlEntities=cw;Ze.escapeDangerHtml5Entities=dw;Ze.clearNonPrintableCharacter=fw;Ze.friendlyAttrValue=pw;Ze.escapeAttrValue=hw;Ze.onIgnoreTagStripAll=lI;Ze.StripTagBody=uI;Ze.stripCommentTag=cI;Ze.stripBlankChar=dI;Ze.cssFilter=ow;Ze.getDefaultCSSWhiteList=YN;var Us={},qr=Fp;function fI(e){var t=qr.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=qr.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function pI(e){return e.slice(0,2)==="</"}function hI(e,t,n){var a="",r=0,i=!1,o=!1,s=0,l=e.length,c="",u="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(i===!1){if(d==="<"){i=s;continue}}else if(o===!1){if(d==="<"){a+=n(e.slice(r,s)),i=s,r=s;continue}if(d===">"||s===l-1){a+=n(e.slice(r,i)),u=e.slice(i,s+1),c=fI(u),a+=t(i,a.length,c,u,pI(u)),r=s+1,i=!1;continue}if(d==='"'||d==="'")for(var f=1,p=e.charAt(s-f);p.trim()===""||p==="=";){if(p==="="){o=d;continue e}p=e.charAt(s-++f)}}else if(d===o){o=!1;continue}}return r<l&&(a+=n(e.substr(r))),a}var mI=/[^a-zA-Z0-9\\_:.-]/gim;function vI(e,t){var n=0,a=0,r=[],i=!1,o=e.length;function s(f,p){if(f=qr.trim(f),f=f.replace(mI,"").toLowerCase(),!(f.length<1)){var h=t(f,p||"");h&&r.push(h)}}for(var l=0;l<o;l++){var c=e.charAt(l),u,d;if(i===!1&&c==="="){i=e.slice(n,l),n=l+1,a=e.charAt(n)==='"'||e.charAt(n)==="'"?n:yI(e,l+1);continue}if(i!==!1&&l===a){if(d=e.indexOf(c,l+1),d===-1)break;u=qr.trim(e.slice(a+1,d)),s(i,u),i=!1,l=d,n=l+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(d=gI(e,l),d===-1){u=qr.trim(e.slice(n,l)),s(u),i=!1,n=l+1;continue}else{l=d-1;continue}else if(d=bI(e,l-1),d===-1){u=qr.trim(e.slice(n,l)),u=dm(u),s(i,u),i=!1,n=l+1;continue}else continue}return n<e.length&&(i===!1?s(e.slice(n)):s(i,dm(qr.trim(e.slice(n))))),qr.trim(r.join(" "))}function gI(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function yI(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function bI(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function wI(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function dm(e){return wI(e)?e.substr(1,e.length-2):e}Us.parseTag=hI;Us.parseAttr=vI;var SI=Dp.FilterCSS,Bt=Ze,mw=Us,_I=mw.parseTag,EI=mw.parseAttr,bo=Fp;function ji(e){return e==null}function CI(e){var t=bo.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=bo.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=bo.trim(e.slice(0,-1))),{html:e,closing:n}}function xI(e){var t={};for(var n in e)t[n]=e[n];return t}function NI(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(a){return a.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function vw(e){e=xI(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Bt.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=NI(e.whiteList||e.allowList):e.whiteList=Bt.whiteList,e.onTag=e.onTag||Bt.onTag,e.onTagAttr=e.onTagAttr||Bt.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Bt.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Bt.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Bt.safeAttrValue,e.escapeHtml=e.escapeHtml||Bt.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new SI(e.css))}vw.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,a=n.whiteList,r=n.onTag,i=n.onIgnoreTag,o=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=t.cssFilter;n.stripBlankChar&&(e=Bt.stripBlankChar(e)),n.allowCommentTag||(e=Bt.stripCommentTag(e));var d=!1;n.stripIgnoreTagBody&&(d=Bt.StripTagBody(n.stripIgnoreTagBody,i),i=d.onIgnoreTag);var f=_I(e,function(p,h,v,g,b){var E={sourcePosition:p,position:h,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(a,v)},y=r(v,g,E);if(!ji(y))return y;if(E.isWhite){if(E.isClosing)return"</"+v+">";var _=CI(g),w=a[v],S=EI(_.html,function(C,x){var I=bo.indexOf(w,C)!==-1,P=o(v,C,x,I);return ji(P)?I?(x=l(v,C,x,u),x?C+'="'+x+'"':C):(P=s(v,C,x,I),ji(P)?void 0:P):P});return g="<"+v,S&&(g+=" "+S),_.closing&&(g+=" /"),g+=">",g}else return y=i(v,g,E),ji(y)?c(g):y},c);return d&&(f=d.remove(f)),f};var II=vw;(function(e,t){var n=Ze,a=Us,r=II;function i(s,l){var c=new r(l);return c.process(s)}t=e.exports=i,t.filterXSS=i,t.FilterXSS=r,function(){for(var s in n)t[s]=n[s];for(var l in a)t[l]=a[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Bc,Bc.exports);var TI=Bc.exports;const gw=Et(TI),yw={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function zc(e){let t="";const{align:n="",highlight:a=""}=e,r=a==="true",i=n.toLowerCase();i==="left"&&(t+="floatleft "),i==="right"&&(t+="floatright ");const o=i==="center",s=r?"secondary":"neutral",l=m(da,{href:e.url,className:t,variant:"contained",color:s,sx:{"&:hover":{backgroundColor:r?void 0:"secondary.main",color:"white"},...!o&&e.url&&{margin:"20px 20px 20px 0px"}},children:e.text});return o?m("div",{style:{textAlign:"center"},children:l}):m("span",{children:l})}try{zc.displayName="MarkdownButton",zc.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}}}catch{}async function PI(e,t,n){const a=new Set;try{let r=await Wa(n,e,t);for(;FC(r);){if(a.has(r.id))throw new Error("Link forms a cycle.");a.add(r.id),r=await Wa(n,r.linksTo.targetId,r.linksTo.targetVersionNumber)}return r}catch(r){throw new Error(`${e} could not be resolved.
${r.message}`)}}function RI(e,t,n){const{accessToken:a}=qe();return ca(["resolveLinkEntity",e,t],()=>PI(e,t,a),n)}function bw(e,t,n=ib,a){const{accessToken:r,keyFactory:i}=qe();return ca(i.getEntityBundleQueryKey(e,t,n),()=>je.getEntityBundleV2(e,n,t,r),a)}function AI(e,t,n){const{accessToken:a,keyFactory:r}=qe();return ca(r.getIsUserMemberOfTeamQueryKey(e,t),()=>je.getIsUserMemberOfTeam(e,t,a),n)}function kI(e){const{rawHtml:t,isLoading:n,isTrusted:a}=e;return $.useMemo(()=>{if(!n)return a?t:gw(t,yw)},[n,a,t])}function Hc(e){const{createdByUserId:t,rawHtml:n}=e,a=$.useRef(null),[r,i]=$.useState(100),{data:o,isLoading:s}=AI(HC,t),l=()=>{if(a!=null&&a.current&&(a!=null&&a.current.contentWindow)){let d=a.current.contentWindow.document.body.scrollHeight;d<450&&(d=450),(!r||Math.abs(d-r)>70)&&i(d+50)}};$.useEffect(()=>{setInterval(()=>{l()},500)},[n]);const u=kI({rawHtml:n,isLoading:s,isTrusted:!!o});return s?m(Ns,{}):L(Q,{children:[n!==u&&m(ob,{variant:"info",dismissible:!1,show:!0,transition:!1,children:"Limited rendering only."}),m("iframe",{ref:a,srcDoc:u,height:`${r}px`,style:{border:0,width:"100%"}})]})}try{Hc.displayName="HtmlPreview",Hc.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}}}catch{}var Xe=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(Xe||{});const $I=30*WC;function qo(e){const{fileHandle:t,fileHandleAssociation:n,previewType:a}=e,r={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:i,isLoading:o}=UC(t,r,$I,{useErrorBoundary:!0});return o?m(Ns,{}):a===Xe.HTML?m(Hc,{rawHtml:i,createdByUserId:t.createdBy}):(a!==Xe.NONE&&console.warn(`Rendering a preview of type ${a} is not supported in Portals`),m(Q,{}))}try{qo.displayName="FileHandleContentRenderer",qo.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}}}catch{}const ww=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],qI=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],OI=[".ogv",".ogg"],DI=[...qI,...OI,".webm"],FI=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],LI=[".md",".markdown",".rmd"];function VI(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function MI(e){if(!vp(e))return Xe.NONE;const t=VI(e.fileName);return t&&DI.includes(t)?Xe.VIDEO:t===".ipynb"?Xe.IPYNB:ww.includes(e.contentType)?Xe.IMAGE:e.contentType==="text/html"?Xe.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?Xe.PDF:t&&FI.includes(t)?Xe.CODE:t&&LI.includes(t)?Xe.MARKDOWN:e.contentType==="image/tiff"?Xe.TIFF:Xe.NONE}function BI(e,t){const n=e.contentType;return vp(e)?ww.includes(e.contentType)?Xe.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?Xe.ZIP:Xe.CSV:n.toLowerCase()==="text/tab-separated-values"?Xe.TAB:Xe.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?Xe.PDF:Xe.NONE:Xe.NONE}function Wc(e){const{bundle:t}=e,{accessToken:n}=qe(),a=!!n;if(!gp(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const r=t.entity.dataFileHandleId,i=t.fileHandles.find(s=>s.id===r);if(!i&&!a)return m(ob,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:m(_C,{})});if(i){const s=MI(i);if(s!==Xe.NONE)return m(qo,{fileHandle:i,fileHandleAssociation:{fileHandleId:r,associateObjectId:t.entity.id,associateObjectType:ar.FileEntity},previewType:s})}const o=t.fileHandles.find(s=>vp(s)&&s.isPreview);if(o&&i){const s=BI(o,i);if(s!==Xe.NONE)return m(qo,{fileHandle:o,fileHandleAssociation:{fileHandleId:o.id,associateObjectId:t.entity.id,associateObjectType:ar.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{Wc.displayName="FileEntityPreview",Wc.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle"}}}}}catch{}function jc(e){const{entityId:t,versionNumber:n}=e,{data:a,isLoading:r}=RI(t,n),i=a&&gp(a),{data:o,isLoading:s}=bw(a==null?void 0:a.id,a==null?void 0:a.versionNumber,ib,{enabled:!!i,useErrorBoundary:!0});if(r||s)return m(Ns,{});if(i)return m(Wc,{bundle:o});throw new Error(`${t} is not a File and cannot be previewed.`)}try{jc.displayName="EntityPreview",jc.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function Qc(e){const t=t1(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt(e.versionNumber??""),a=t.targetId,r=Number.isNaN(n)?t.targetVersionNumber:n;return m(jc,{entityId:a,versionNumber:r})}try{Qc.displayName="MarkdownEntityPreview",Qc.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}}}catch{}function UI(e,t){const{accessToken:n,keyFactory:a}=qe(),r={accessRequirementId:e};return vb(a.getApprovedSubmissionInfoQueryKey(r),async i=>await je.getApprovedSubmissionInfo({...r,nextPageToken:i.pageParam},n),{...t,getNextPageParam:i=>i.nextPageToken})}const Gc=({info:e})=>m(Q,{children:e&&L("p",{className:"SubmissionInfoCard",children:[m("strong",{children:" Project Lead: "})," ",m("span",{children:e.projectLead})," ",m("br",{}),m("strong",{children:" Institution: "})," ",m("span",{children:e.institution})," ",m("br",{}),m("strong",{children:" Data Access Request Submitted By: "})," ",m(Zn,{ownerId:e.submittedBy,size:Ro})," ",m("br",{}),L("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Qa(ir(e.modifiedOn),"M/D/YYYY"),"):"]}),m(_t,{markdown:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>L("div",{children:[m(Zn,{ownerId:t.userId,size:Ro})," ",t.type]},`${t.userId}-${t.type}`))]})}),Oo=()=>L("p",{className:"SubmissionInfoCard",children:[m(_p,{numCols:1,numRows:4}),m(fn,{variant:"rectangular",width:"100%",height:80})]});try{Gc.displayName="SubmissionInfoCard",Gc.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}}}catch{}try{Oo.displayName="LoadingSubmissionInfoCard",Oo.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}}}catch{}const Yc=e=>{const{accessRequirementId:t}=e,{ref:n,inView:a}=ha(),{data:r,status:i,isLoading:o,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:c}=UI(t,{useErrorBoundary:!0});$.useEffect(()=>{i==="success"&&!l&&s&&c&&a&&c()},[i,s,l,c,a]);const u=(r==null?void 0:r.pages.flatMap(d=>d.results))??[];return L(Q,{children:[u.length>0&&L("div",{className:"IDUReport",children:[u.map(d=>L(B.Fragment,{children:[m(Gc,{info:d}),m("hr",{})]},JSON.stringify(d))),m("div",{ref:n})]}),(o||l)&&L(Q,{children:[m(Oo,{}),m(Oo,{})]})]})};try{Yc.displayName="IDUReport",Yc.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}}}catch{}function Kc(e){const{accessRestrictionId:t}=e;return m(Yc,{accessRequirementId:t})}try{Kc.displayName="MarkdownIDUReport",Kc.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}}}catch{}function Ct(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,a;n<e.length;n++)(a=Ct(e[n]))!==""&&(t+=(t&&" ")+a);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const fm=e=>{let t;const n=new Set,a=(l,c)=>{const u=typeof l=="function"?l(t):l;if(!Object.is(u,t)){const d=t;t=c??typeof u!="object"?u:Object.assign({},t,u),n.forEach(f=>f(t,d))}},r=()=>t,s={setState:a,getState:r,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(a,r,s),s},zI=e=>e?fm(e):fm;var Sw={exports:{}},_w={},Ew={exports:{}},Cw={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=$;function HI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var WI=typeof Object.is=="function"?Object.is:HI,jI=ta.useState,QI=ta.useEffect,GI=ta.useLayoutEffect,YI=ta.useDebugValue;function KI(e,t){var n=t(),a=jI({inst:{value:n,getSnapshot:t}}),r=a[0].inst,i=a[1];return GI(function(){r.value=n,r.getSnapshot=t,ql(r)&&i({inst:r})},[e,n,t]),QI(function(){return ql(r)&&i({inst:r}),e(function(){ql(r)&&i({inst:r})})},[e]),YI(n),n}function ql(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!WI(e,n)}catch{return!0}}function XI(e,t){return t()}var ZI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XI:KI;Cw.useSyncExternalStore=ta.useSyncExternalStore!==void 0?ta.useSyncExternalStore:ZI;Ew.exports=Cw;var JI=Ew.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=$,eT=JI;function tT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rT=typeof Object.is=="function"?Object.is:tT,nT=eT.useSyncExternalStore,aT=zs.useRef,iT=zs.useEffect,oT=zs.useMemo,sT=zs.useDebugValue;_w.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var i=aT(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=oT(function(){function l(p){if(!c){if(c=!0,u=p,p=a(p),r!==void 0&&o.hasValue){var h=o.value;if(r(h,p))return d=h}return d=p}if(h=d,rT(u,p))return h;var v=a(p);return r!==void 0&&r(h,v)?h:(u=p,d=v)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,a,r]);var s=nT(e,i[0],i[1]);return iT(function(){o.hasValue=!0,o.value=s},[s]),sT(s),s};Sw.exports=_w;var lT=Sw.exports;const uT=Et(lT),{useSyncExternalStoreWithSelector:cT}=uT;function dT(e,t=e.getState,n){const a=cT(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return $.useDebugValue(a),a}function At(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,r]of e)if(!Object.is(r,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Object.is(e[n[a]],t[n[a]]))return!1;return!0}var fT={value:()=>{}};function Hs(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new wo(n)}function wo(e){this._=e}function pT(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",r=n.indexOf(".");if(r>=0&&(a=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}wo.prototype=Hs.prototype={constructor:wo,on:function(e,t){var n=this._,a=pT(e+"",n),r,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((r=(e=a[i]).type)&&(r=hT(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(r=(e=a[i]).type)n[r]=pm(n[r],e.name,t);else if(t==null)for(r in n)n[r]=pm(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wo(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),a=0,r,i;a<r;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,r=i.length;a<r;++a)i[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)}};function hT(e,t){for(var n=0,a=e.length,r;n<a;++n)if((r=e[n]).name===t)return r.value}function pm(e,t,n){for(var a=0,r=e.length;a<r;++a)if(e[a].name===t){e[a]=fT,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xc="http://www.w3.org/1999/xhtml";const hm={svg:"http://www.w3.org/2000/svg",xhtml:Xc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ws(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hm.hasOwnProperty(t)?{space:hm[t],local:e}:e}function mT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xc&&t.documentElement.namespaceURI===Xc?t.createElement(e):t.createElementNS(n,e)}}function vT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xw(e){var t=Ws(e);return(t.local?vT:mT)(t)}function gT(){}function Lp(e){return e==null?gT:function(){return this.querySelector(e)}}function yT(e){typeof e!="function"&&(e=Lp(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,s=a[r]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new kt(a,this._parents)}function bT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wT(){return[]}function Nw(e){return e==null?wT:function(){return this.querySelectorAll(e)}}function ST(e){return function(){return bT(e.apply(this,arguments))}}function _T(e){typeof e=="function"?e=ST(e):e=Nw(e);for(var t=this._groups,n=t.length,a=[],r=[],i=0;i<n;++i)for(var o=t[i],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(a.push(e.call(l,l.__data__,c,o)),r.push(l));return new kt(a,r)}function Iw(e){return function(){return this.matches(e)}}function Tw(e){return function(t){return t.matches(e)}}var ET=Array.prototype.find;function CT(e){return function(){return ET.call(this.children,e)}}function xT(){return this.firstElementChild}function NT(e){return this.select(e==null?xT:CT(typeof e=="function"?e:Tw(e)))}var IT=Array.prototype.filter;function TT(){return Array.from(this.children)}function PT(e){return function(){return IT.call(this.children,e)}}function RT(e){return this.selectAll(e==null?TT:PT(typeof e=="function"?e:Tw(e)))}function AT(e){typeof e!="function"&&(e=Iw(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,s=a[r]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new kt(a,this._parents)}function Pw(e){return new Array(e.length)}function kT(){return new kt(this._enter||this._groups.map(Pw),this._parents)}function Do(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Do.prototype={constructor:Do,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $T(e){return function(){return e}}function qT(e,t,n,a,r,i){for(var o=0,s,l=t.length,c=i.length;o<c;++o)(s=t[o])?(s.__data__=i[o],a[o]=s):n[o]=new Do(e,i[o]);for(;o<l;++o)(s=t[o])&&(r[o]=s)}function OT(e,t,n,a,r,i,o){var s,l,c=new Map,u=t.length,d=i.length,f=new Array(u),p;for(s=0;s<u;++s)(l=t[s])&&(f[s]=p=o.call(l,l.__data__,s,t)+"",c.has(p)?r[s]=l:c.set(p,l));for(s=0;s<d;++s)p=o.call(e,i[s],s,i)+"",(l=c.get(p))?(a[s]=l,l.__data__=i[s],c.delete(p)):n[s]=new Do(e,i[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function DT(e){return e.__data__}function FT(e,t){if(!arguments.length)return Array.from(this,DT);var n=t?OT:qT,a=this._parents,r=this._groups;typeof e!="function"&&(e=$T(e));for(var i=r.length,o=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=a[c],d=r[c],f=d.length,p=LT(e.call(u,u&&u.__data__,c,a)),h=p.length,v=s[c]=new Array(h),g=o[c]=new Array(h),b=l[c]=new Array(f);n(u,d,v,g,b,p,t);for(var E=0,y=0,_,w;E<h;++E)if(_=v[E]){for(E>=y&&(y=E+1);!(w=g[y])&&++y<h;);_._next=w||null}}return o=new kt(o,a),o._enter=s,o._exit=l,o}function LT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function VT(){return new kt(this._exit||this._groups.map(Pw),this._parents)}function MT(e,t,n){var a=this.enter(),r=this,i=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),a&&r?a.merge(r).order():r}function BT(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,r=n.length,i=a.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var c=n[l],u=a[l],d=c.length,f=s[l]=new Array(d),p,h=0;h<d;++h)(p=c[h]||u[h])&&(f[h]=p);for(;l<r;++l)s[l]=n[l];return new kt(s,this._parents)}function UT(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],r=a.length-1,i=a[r],o;--r>=0;)(o=a[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function zT(e){e||(e=HT);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,a=n.length,r=new Array(a),i=0;i<a;++i){for(var o=n[i],s=o.length,l=r[i]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new kt(r,this._parents).order()}function HT(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function WT(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jT(){return Array.from(this)}function QT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],r=0,i=a.length;r<i;++r){var o=a[r];if(o)return o}return null}function GT(){let e=0;for(const t of this)++e;return e}function YT(){return!this.node()}function KT(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var r=t[n],i=0,o=r.length,s;i<o;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function XT(e){return function(){this.removeAttribute(e)}}function ZT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function JT(e,t){return function(){this.setAttribute(e,t)}}function eP(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tP(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rP(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function nP(e,t){var n=Ws(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?ZT:XT:typeof t=="function"?n.local?rP:tP:n.local?eP:JT)(n,t))}function Rw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function aP(e){return function(){this.style.removeProperty(e)}}function iP(e,t,n){return function(){this.style.setProperty(e,t,n)}}function oP(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function sP(e,t,n){return arguments.length>1?this.each((t==null?aP:typeof t=="function"?oP:iP)(e,t,n??"")):ra(this.node(),e)}function ra(e,t){return e.style.getPropertyValue(t)||Rw(e).getComputedStyle(e,null).getPropertyValue(t)}function lP(e){return function(){delete this[e]}}function uP(e,t){return function(){this[e]=t}}function cP(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function dP(e,t){return arguments.length>1?this.each((t==null?lP:typeof t=="function"?cP:uP)(e,t)):this.node()[e]}function Aw(e){return e.trim().split(/^|\s+/)}function Vp(e){return e.classList||new kw(e)}function kw(e){this._node=e,this._names=Aw(e.getAttribute("class")||"")}kw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $w(e,t){for(var n=Vp(e),a=-1,r=t.length;++a<r;)n.add(t[a])}function qw(e,t){for(var n=Vp(e),a=-1,r=t.length;++a<r;)n.remove(t[a])}function fP(e){return function(){$w(this,e)}}function pP(e){return function(){qw(this,e)}}function hP(e,t){return function(){(t.apply(this,arguments)?$w:qw)(this,e)}}function mP(e,t){var n=Aw(e+"");if(arguments.length<2){for(var a=Vp(this.node()),r=-1,i=n.length;++r<i;)if(!a.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?hP:t?fP:pP)(n,t))}function vP(){this.textContent=""}function gP(e){return function(){this.textContent=e}}function yP(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bP(e){return arguments.length?this.each(e==null?vP:(typeof e=="function"?yP:gP)(e)):this.node().textContent}function wP(){this.innerHTML=""}function SP(e){return function(){this.innerHTML=e}}function _P(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function EP(e){return arguments.length?this.each(e==null?wP:(typeof e=="function"?_P:SP)(e)):this.node().innerHTML}function CP(){this.nextSibling&&this.parentNode.appendChild(this)}function xP(){return this.each(CP)}function NP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IP(){return this.each(NP)}function TP(e){var t=typeof e=="function"?e:xw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function PP(){return null}function RP(e,t){var n=typeof e=="function"?e:xw(e),a=t==null?PP:typeof t=="function"?t:Lp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function AP(){var e=this.parentNode;e&&e.removeChild(this)}function kP(){return this.each(AP)}function $P(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qP(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function OP(e){return this.select(e?qP:$P)}function DP(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FP(e){return function(t){e.call(this,t,this.__data__)}}function LP(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function VP(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++a]=i;++a?t.length=a:delete this.__on}}}function MP(e,t,n){return function(){var a=this.__on,r,i=FP(t);if(a){for(var o=0,s=a.length;o<s;++o)if((r=a[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},a?a.push(r):this.__on=[r]}}function BP(e,t,n){var a=LP(e+""),r,i=a.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<i;++r)if((o=a[r]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?MP:VP,r=0;r<i;++r)this.each(s(a[r],t,n));return this}function Ow(e,t,n){var a=Rw(e),r=a.CustomEvent;typeof r=="function"?r=new r(t,n):(r=a.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function UP(e,t){return function(){return Ow(this,e,t)}}function zP(e,t){return function(){return Ow(this,e,t.apply(this,arguments))}}function HP(e,t){return this.each((typeof t=="function"?zP:UP)(e,t))}function*WP(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],r=0,i=a.length,o;r<i;++r)(o=a[r])&&(yield o)}var Dw=[null];function kt(e,t){this._groups=e,this._parents=t}function Ni(){return new kt([[document.documentElement]],Dw)}function jP(){return this}kt.prototype=Ni.prototype={constructor:kt,select:yT,selectAll:_T,selectChild:NT,selectChildren:RT,filter:AT,data:FT,enter:kT,exit:VT,join:MT,merge:BT,selection:jP,order:UT,sort:zT,call:WT,nodes:jT,node:QT,size:GT,empty:YT,each:KT,attr:nP,style:sP,property:dP,classed:mP,text:bP,html:EP,raise:xP,lower:IP,append:TP,insert:RP,remove:kP,clone:OP,datum:DP,on:BP,dispatch:HP,[Symbol.iterator]:WP};function zt(e){return typeof e=="string"?new kt([[document.querySelector(e)]],[document.documentElement]):new kt([[e]],Dw)}function QP(e){let t;for(;t=e.sourceEvent;)e=t;return e}function er(e,t){if(e=QP(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const GP={passive:!1},Ka={capture:!0,passive:!1};function Ol(e){e.stopImmediatePropagation()}function Wn(e){e.preventDefault(),e.stopImmediatePropagation()}function Fw(e){var t=e.document.documentElement,n=zt(e).on("dragstart.drag",Wn,Ka);"onselectstart"in t?n.on("selectstart.drag",Wn,Ka):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Lw(e,t){var n=e.document.documentElement,a=zt(e).on("dragstart.drag",null);t&&(a.on("click.drag",Wn,Ka),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Qi=e=>()=>e;function Zc(e,{sourceEvent:t,subject:n,target:a,identifier:r,active:i,x:o,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Zc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function YP(e){return!e.ctrlKey&&!e.button}function KP(){return this.parentNode}function XP(e,t){return t??{x:e.x,y:e.y}}function ZP(){return navigator.maxTouchPoints||"ontouchstart"in this}function JP(){var e=YP,t=KP,n=XP,a=ZP,r={},i=Hs("start","drag","end"),o=0,s,l,c,u,d=0;function f(_){_.on("mousedown.drag",p).filter(a).on("touchstart.drag",g).on("touchmove.drag",b,GP).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(_,w){if(!(u||!e.call(this,_,w))){var S=y(this,t.call(this,_,w),_,w,"mouse");S&&(zt(_.view).on("mousemove.drag",h,Ka).on("mouseup.drag",v,Ka),Fw(_.view),Ol(_),c=!1,s=_.clientX,l=_.clientY,S("start",_))}}function h(_){if(Wn(_),!c){var w=_.clientX-s,S=_.clientY-l;c=w*w+S*S>d}r.mouse("drag",_)}function v(_){zt(_.view).on("mousemove.drag mouseup.drag",null),Lw(_.view,c),Wn(_),r.mouse("end",_)}function g(_,w){if(e.call(this,_,w)){var S=_.changedTouches,C=t.call(this,_,w),x=S.length,I,P;for(I=0;I<x;++I)(P=y(this,C,_,w,S[I].identifier,S[I]))&&(Ol(_),P("start",_,S[I]))}}function b(_){var w=_.changedTouches,S=w.length,C,x;for(C=0;C<S;++C)(x=r[w[C].identifier])&&(Wn(_),x("drag",_,w[C]))}function E(_){var w=_.changedTouches,S=w.length,C,x;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<S;++C)(x=r[w[C].identifier])&&(Ol(_),x("end",_,w[C]))}function y(_,w,S,C,x,I){var P=i.copy(),q=er(I||S,w),O,T,N;if((N=n.call(_,new Zc("beforestart",{sourceEvent:S,target:f,identifier:x,active:o,x:q[0],y:q[1],dx:0,dy:0,dispatch:P}),C))!=null)return O=N.x-q[0]||0,T=N.y-q[1]||0,function A(k,R,V){var F=q,z;switch(k){case"start":r[x]=A,z=o++;break;case"end":delete r[x],--o;case"drag":q=er(V||R,w),z=o;break}P.call(k,_,new Zc(k,{sourceEvent:R,subject:N,target:f,identifier:x,active:z,x:q[0]+O,y:q[1]+T,dx:q[0]-F[0],dy:q[1]-F[1],dispatch:P}),C)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Qi(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:Qi(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Qi(_),f):n},f.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:Qi(!!_),f):a},f.on=function(){var _=i.on.apply(i,arguments);return _===i?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function Mp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vw(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Ii(){}var Xa=.7,Fo=1/Xa,jn="\\s*([+-]?\\d+)\\s*",Za="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eR=/^#([0-9a-f]{3,8})$/,tR=new RegExp(`^rgb\\(${jn},${jn},${jn}\\)$`),rR=new RegExp(`^rgb\\(${nr},${nr},${nr}\\)$`),nR=new RegExp(`^rgba\\(${jn},${jn},${jn},${Za}\\)$`),aR=new RegExp(`^rgba\\(${nr},${nr},${nr},${Za}\\)$`),iR=new RegExp(`^hsl\\(${Za},${nr},${nr}\\)$`),oR=new RegExp(`^hsla\\(${Za},${nr},${nr},${Za}\\)$`),mm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mp(Ii,Ja,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vm,formatHex:vm,formatHex8:sR,formatHsl:lR,formatRgb:gm,toString:gm});function vm(){return this.rgb().formatHex()}function sR(){return this.rgb().formatHex8()}function lR(){return Mw(this).formatHsl()}function gm(){return this.rgb().formatRgb()}function Ja(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eR.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ym(t):n===3?new bt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tR.exec(e))?new bt(t[1],t[2],t[3],1):(t=rR.exec(e))?new bt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nR.exec(e))?Gi(t[1],t[2],t[3],t[4]):(t=aR.exec(e))?Gi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iR.exec(e))?Sm(t[1],t[2]/100,t[3]/100,1):(t=oR.exec(e))?Sm(t[1],t[2]/100,t[3]/100,t[4]):mm.hasOwnProperty(e)?ym(mm[e]):e==="transparent"?new bt(NaN,NaN,NaN,0):null}function ym(e){return new bt(e>>16&255,e>>8&255,e&255,1)}function Gi(e,t,n,a){return a<=0&&(e=t=n=NaN),new bt(e,t,n,a)}function uR(e){return e instanceof Ii||(e=Ja(e)),e?(e=e.rgb(),new bt(e.r,e.g,e.b,e.opacity)):new bt}function Jc(e,t,n,a){return arguments.length===1?uR(e):new bt(e,t,n,a??1)}function bt(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Mp(bt,Jc,Vw(Ii,{brighter(e){return e=e==null?Fo:Math.pow(Fo,e),new bt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xa:Math.pow(Xa,e),new bt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bt(pn(this.r),pn(this.g),pn(this.b),Lo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bm,formatHex:bm,formatHex8:cR,formatRgb:wm,toString:wm}));function bm(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}`}function cR(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}${cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function wm(){const e=Lo(this.opacity);return`${e===1?"rgb(":"rgba("}${pn(this.r)}, ${pn(this.g)}, ${pn(this.b)}${e===1?")":`, ${e})`}`}function Lo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cn(e){return e=pn(e),(e<16?"0":"")+e.toString(16)}function Sm(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,n,a)}function Mw(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof Ii||(e=Ja(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,r=Math.min(t,n,a),i=Math.max(t,n,a),o=NaN,s=i-r,l=(i+r)/2;return s?(t===i?o=(n-a)/s+(n<a)*6:n===i?o=(a-t)/s+2:o=(t-n)/s+4,s/=l<.5?i+r:2-i-r,o*=60):s=l>0&&l<1?0:o,new Ht(o,s,l,e.opacity)}function dR(e,t,n,a){return arguments.length===1?Mw(e):new Ht(e,t,n,a??1)}function Ht(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Mp(Ht,dR,Vw(Ii,{brighter(e){return e=e==null?Fo:Math.pow(Fo,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xa:Math.pow(Xa,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,r=2*n-a;return new bt(Dl(e>=240?e-240:e+120,r,a),Dl(e,r,a),Dl(e<120?e+240:e-120,r,a),this.opacity)},clamp(){return new Ht(_m(this.h),Yi(this.s),Yi(this.l),Lo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lo(this.opacity);return`${e===1?"hsl(":"hsla("}${_m(this.h)}, ${Yi(this.s)*100}%, ${Yi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _m(e){return e=(e||0)%360,e<0?e+360:e}function Yi(e){return Math.max(0,Math.min(1,e||0))}function Dl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bw=e=>()=>e;function fR(e,t){return function(n){return e+n*t}}function pR(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function hR(e){return(e=+e)==1?Uw:function(t,n){return n-t?pR(t,n,e):Bw(isNaN(t)?n:t)}}function Uw(e,t){var n=t-e;return n?fR(e,n):Bw(isNaN(e)?t:e)}const Em=function e(t){var n=hR(t);function a(r,i){var o=n((r=Jc(r)).r,(i=Jc(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),c=Uw(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return a.gamma=e,a}(1);function Or(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ed=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fl=new RegExp(ed.source,"g");function mR(e){return function(){return e}}function vR(e){return function(t){return e(t)+""}}function gR(e,t){var n=ed.lastIndex=Fl.lastIndex=0,a,r,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(a=ed.exec(e))&&(r=Fl.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(a=a[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Or(a,r)})),n=Fl.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?vR(l[0].x):mR(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}var Cm=180/Math.PI,td={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zw(e,t,n,a,r,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*a)&&(n-=e*l,a-=t*l),(s=Math.sqrt(n*n+a*a))&&(n/=s,a/=s,l/=s),e*a<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Cm,skewX:Math.atan(l)*Cm,scaleX:o,scaleY:s}}var Ki;function yR(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?td:zw(t.a,t.b,t.c,t.d,t.e,t.f)}function bR(e){return e==null||(Ki||(Ki=document.createElementNS("http://www.w3.org/2000/svg","g")),Ki.setAttribute("transform",e),!(e=Ki.transform.baseVal.consolidate()))?td:(e=e.matrix,zw(e.a,e.b,e.c,e.d,e.e,e.f))}function Hw(e,t,n,a){function r(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,p,h){if(c!==d||u!==f){var v=p.push("translate(",null,t,null,n);h.push({i:v-4,x:Or(c,d)},{i:v-2,x:Or(u,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,a)-2,x:Or(c,u)})):u&&d.push(r(d)+"rotate("+u+a)}function s(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,a)-2,x:Or(c,u)}):u&&d.push(r(d)+"skewX("+u+a)}function l(c,u,d,f,p,h){if(c!==d||u!==f){var v=p.push(r(p)+"scale(",null,",",null,")");h.push({i:v-4,x:Or(c,d)},{i:v-2,x:Or(u,f)})}else(d!==1||f!==1)&&p.push(r(p)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),s(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(p){for(var h=-1,v=f.length,g;++h<v;)d[(g=f[h]).i]=g.x(p);return d.join("")}}}var wR=Hw(yR,"px, ","px)","deg)"),SR=Hw(bR,", ",")",")"),_R=1e-12;function xm(e){return((e=Math.exp(e))+1/e)/2}function ER(e){return((e=Math.exp(e))-1/e)/2}function CR(e){return((e=Math.exp(2*e))-1)/(e+1)}const xR=function e(t,n,a){function r(i,o){var s=i[0],l=i[1],c=i[2],u=o[0],d=o[1],f=o[2],p=u-s,h=d-l,v=p*p+h*h,g,b;if(v<_R)b=Math.log(f/c)/t,g=function(C){return[s+C*p,l+C*h,c*Math.exp(t*C*b)]};else{var E=Math.sqrt(v),y=(f*f-c*c+a*v)/(2*c*n*E),_=(f*f-c*c-a*v)/(2*f*n*E),w=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(_*_+1)-_);b=(S-w)/t,g=function(C){var x=C*b,I=xm(w),P=c/(n*E)*(I*CR(t*x+w)-ER(w));return[s+P*p,l+P*h,c*I/xm(t*x+w)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return r.rho=function(i){var o=Math.max(.001,+i),s=o*o,l=s*s;return e(o,s,l)},r}(Math.SQRT2,2,4);var na=0,qa=0,Na=0,Ww=1e3,Vo,Oa,Mo=0,_n=0,js=0,ei=typeof performance=="object"&&performance.now?performance:Date,jw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bp(){return _n||(jw(NR),_n=ei.now()+js)}function NR(){_n=0}function Bo(){this._call=this._time=this._next=null}Bo.prototype=Qw.prototype={constructor:Bo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bp():+n)+(t==null?0:+t),!this._next&&Oa!==this&&(Oa?Oa._next=this:Vo=this,Oa=this),this._call=e,this._time=n,rd()},stop:function(){this._call&&(this._call=null,this._time=1/0,rd())}};function Qw(e,t,n){var a=new Bo;return a.restart(e,t,n),a}function IR(){Bp(),++na;for(var e=Vo,t;e;)(t=_n-e._time)>=0&&e._call.call(void 0,t),e=e._next;--na}function Nm(){_n=(Mo=ei.now())+js,na=qa=0;try{IR()}finally{na=0,PR(),_n=0}}function TR(){var e=ei.now(),t=e-Mo;t>Ww&&(js-=t,Mo=e)}function PR(){for(var e,t=Vo,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vo=n);Oa=e,rd(a)}function rd(e){if(!na){qa&&(qa=clearTimeout(qa));var t=e-_n;t>24?(e<1/0&&(qa=setTimeout(Nm,e-ei.now()-js)),Na&&(Na=clearInterval(Na))):(Na||(Mo=ei.now(),Na=setInterval(TR,Ww)),na=1,jw(Nm))}}function Im(e,t,n){var a=new Bo;return t=t==null?0:+t,a.restart(r=>{a.stop(),e(r+t)},t,n),a}var RR=Hs("start","end","cancel","interrupt"),AR=[],Gw=0,Tm=1,nd=2,So=3,Pm=4,ad=5,_o=6;function Qs(e,t,n,a,r,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;kR(e,n,{name:t,index:a,group:r,on:RR,tween:AR,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Gw})}function Up(e,t){var n=Qt(e,t);if(n.state>Gw)throw new Error("too late; already scheduled");return n}function lr(e,t){var n=Qt(e,t);if(n.state>So)throw new Error("too late; already running");return n}function Qt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kR(e,t,n){var a=e.__transition,r;a[t]=n,n.timer=Qw(i,0,n.time);function i(c){n.state=Tm,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,p;if(n.state!==Tm)return l();for(u in a)if(p=a[u],p.name===n.name){if(p.state===So)return Im(o);p.state===Pm?(p.state=_o,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete a[u]):+u<t&&(p.state=_o,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete a[u])}if(Im(function(){n.state===So&&(n.state=Pm,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=nd,n.on.call("start",e,e.__data__,n.index,n.group),n.state===nd){for(n.state=So,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=p);r.length=d+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=ad,1),d=-1,f=r.length;++d<f;)r[d].call(e,u);n.state===ad&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=_o,n.timer.stop(),delete a[t];for(var c in a)return;delete e.__transition}}function Eo(e,t){var n=e.__transition,a,r,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((a=n[o]).name!==t){i=!1;continue}r=a.state>nd&&a.state<ad,a.state=_o,a.timer.stop(),a.on.call(r?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[o]}i&&delete e.__transition}}function $R(e){return this.each(function(){Eo(this,e)})}function qR(e,t){var n,a;return function(){var r=lr(this,e),i=r.tween;if(i!==n){a=n=i;for(var o=0,s=a.length;o<s;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}r.tween=a}}function OR(e,t,n){var a,r;if(typeof n!="function")throw new Error;return function(){var i=lr(this,e),o=i.tween;if(o!==a){r=(a=o).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}i.tween=r}}function DR(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=Qt(this.node(),n).tween,r=0,i=a.length,o;r<i;++r)if((o=a[r]).name===e)return o.value;return null}return this.each((t==null?qR:OR)(n,e,t))}function zp(e,t,n){var a=e._id;return e.each(function(){var r=lr(this,a);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Qt(r,a).value[t]}}function Yw(e,t){var n;return(typeof t=="number"?Or:t instanceof Ja?Em:(n=Ja(t))?(t=n,Em):gR)(e,t)}function FR(e){return function(){this.removeAttribute(e)}}function LR(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VR(e,t,n){var a,r=n+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===a?i:i=t(a=o,n)}}function MR(e,t,n){var a,r=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===a?i:i=t(a=o,n)}}function BR(e,t,n){var a,r,i;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===a&&l===r?i:(r=l,i=t(a=o,s)))}}function UR(e,t,n){var a,r,i;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===a&&l===r?i:(r=l,i=t(a=o,s)))}}function zR(e,t){var n=Ws(e),a=n==="transform"?SR:Yw;return this.attrTween(e,typeof t=="function"?(n.local?UR:BR)(n,a,zp(this,"attr."+e,t)):t==null?(n.local?LR:FR)(n):(n.local?MR:VR)(n,a,t))}function HR(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function WR(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function jR(e,t){var n,a;function r(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&WR(e,i)),n}return r._value=t,r}function QR(e,t){var n,a;function r(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&HR(e,i)),n}return r._value=t,r}function GR(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=Ws(e);return this.tween(n,(a.local?jR:QR)(a,t))}function YR(e,t){return function(){Up(this,e).delay=+t.apply(this,arguments)}}function KR(e,t){return t=+t,function(){Up(this,e).delay=t}}function XR(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YR:KR)(t,e)):Qt(this.node(),t).delay}function ZR(e,t){return function(){lr(this,e).duration=+t.apply(this,arguments)}}function JR(e,t){return t=+t,function(){lr(this,e).duration=t}}function eA(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ZR:JR)(t,e)):Qt(this.node(),t).duration}function tA(e,t){if(typeof t!="function")throw new Error;return function(){lr(this,e).ease=t}}function rA(e){var t=this._id;return arguments.length?this.each(tA(t,e)):Qt(this.node(),t).ease}function nA(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;lr(this,e).ease=n}}function aA(e){if(typeof e!="function")throw new Error;return this.each(nA(this._id,e))}function iA(e){typeof e!="function"&&(e=Iw(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,s=a[r]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new _r(a,this._parents,this._name,this._id)}function oA(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,r=n.length,i=Math.min(a,r),o=new Array(a),s=0;s<i;++s)for(var l=t[s],c=n[s],u=l.length,d=o[s]=new Array(u),f,p=0;p<u;++p)(f=l[p]||c[p])&&(d[p]=f);for(;s<a;++s)o[s]=t[s];return new _r(o,this._parents,this._name,this._id)}function sA(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function lA(e,t,n){var a,r,i=sA(t)?Up:lr;return function(){var o=i(this,e),s=o.on;s!==a&&(r=(a=s).copy()).on(t,n),o.on=r}}function uA(e,t){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(e):this.each(lA(n,e,t))}function cA(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function dA(){return this.on("end.remove",cA(this._id))}function fA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lp(e));for(var a=this._groups,r=a.length,i=new Array(r),o=0;o<r;++o)for(var s=a[o],l=s.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,Qs(c[f],t,n,f,c,Qt(u,n)));return new _r(i,this._parents,t,n)}function pA(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nw(e));for(var a=this._groups,r=a.length,i=[],o=[],s=0;s<r;++s)for(var l=a[s],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=e.call(u,u.__data__,d,l),p,h=Qt(u,n),v=0,g=f.length;v<g;++v)(p=f[v])&&Qs(p,t,n,v,f,h);i.push(f),o.push(u)}return new _r(i,o,t,n)}var hA=Ni.prototype.constructor;function mA(){return new hA(this._groups,this._parents)}function vA(e,t){var n,a,r;return function(){var i=ra(this,e),o=(this.style.removeProperty(e),ra(this,e));return i===o?null:i===n&&o===a?r:r=t(n=i,a=o)}}function Kw(e){return function(){this.style.removeProperty(e)}}function gA(e,t,n){var a,r=n+"",i;return function(){var o=ra(this,e);return o===r?null:o===a?i:i=t(a=o,n)}}function yA(e,t,n){var a,r,i;return function(){var o=ra(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),ra(this,e))),o===l?null:o===a&&l===r?i:(r=l,i=t(a=o,s))}}function bA(e,t){var n,a,r,i="style."+t,o="end."+i,s;return function(){var l=lr(this,e),c=l.on,u=l.value[i]==null?s||(s=Kw(t)):void 0;(c!==n||r!==u)&&(a=(n=c).copy()).on(o,r=u),l.on=a}}function wA(e,t,n){var a=(e+="")=="transform"?wR:Yw;return t==null?this.styleTween(e,vA(e,a)).on("end.style."+e,Kw(e)):typeof t=="function"?this.styleTween(e,yA(e,a,zp(this,"style."+e,t))).each(bA(this._id,e)):this.styleTween(e,gA(e,a,t),n).on("end.style."+e,null)}function SA(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function _A(e,t,n){var a,r;function i(){var o=t.apply(this,arguments);return o!==r&&(a=(r=o)&&SA(e,o,n)),a}return i._value=t,i}function EA(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,_A(e,t,n??""))}function CA(e){return function(){this.textContent=e}}function xA(e){return function(){var t=e(this);this.textContent=t??""}}function NA(e){return this.tween("text",typeof e=="function"?xA(zp(this,"text",e)):CA(e==null?"":e+""))}function IA(e){return function(t){this.textContent=e.call(this,t)}}function TA(e){var t,n;function a(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&IA(r)),t}return a._value=e,a}function PA(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,TA(e))}function RA(){for(var e=this._name,t=this._id,n=Xw(),a=this._groups,r=a.length,i=0;i<r;++i)for(var o=a[i],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=Qt(l,t);Qs(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new _r(a,this._parents,e,n)}function AA(){var e,t,n=this,a=n._id,r=n.size();return new Promise(function(i,o){var s={value:o},l={value:function(){--r===0&&i()}};n.each(function(){var c=lr(this,a),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&i()})}var kA=0;function _r(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function Xw(){return++kA}var pr=Ni.prototype;_r.prototype={constructor:_r,select:fA,selectAll:pA,selectChild:pr.selectChild,selectChildren:pr.selectChildren,filter:iA,merge:oA,selection:mA,transition:RA,call:pr.call,nodes:pr.nodes,node:pr.node,size:pr.size,empty:pr.empty,each:pr.each,on:uA,attr:zR,attrTween:GR,style:wA,styleTween:EA,text:NA,textTween:PA,remove:dA,tween:DR,delay:XR,duration:eA,ease:rA,easeVarying:aA,end:AA,[Symbol.iterator]:pr[Symbol.iterator]};function $A(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qA={time:null,delay:0,duration:250,ease:$A};function OA(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function DA(e){var t,n;e instanceof _r?(t=e._id,e=e._name):(t=Xw(),(n=qA).time=Bp(),e=e==null?null:e+"");for(var a=this._groups,r=a.length,i=0;i<r;++i)for(var o=a[i],s=o.length,l,c=0;c<s;++c)(l=o[c])&&Qs(l,e,t,c,o,n||OA(l,t));return new _r(a,this._parents,e,t)}Ni.prototype.interrupt=$R;Ni.prototype.transition=DA;const Xi=e=>()=>e;function FA(e,{sourceEvent:t,target:n,transform:a,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:r}})}function gr(e,t,n){this.k=e,this.x=t,this.y=n}gr.prototype={constructor:gr,scale:function(e){return e===1?this:new gr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new gr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zr=new gr(1,0,0);gr.prototype;function Ll(e){e.stopImmediatePropagation()}function Ia(e){e.preventDefault(),e.stopImmediatePropagation()}function LA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function VA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Rm(){return this.__zoom||zr}function MA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function BA(){return navigator.maxTouchPoints||"ontouchstart"in this}function UA(e,t,n){var a=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function zA(){var e=LA,t=VA,n=UA,a=MA,r=BA,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=xR,c=Hs("start","zoom","end"),u,d,f,p=500,h=150,v=0,g=10;function b(N){N.property("__zoom",Rm).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",P).filter(r).on("touchstart.zoom",q).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(N,A,k,R){var V=N.selection?N.selection():N;V.property("__zoom",Rm),N!==V?w(N,A,k,R):V.interrupt().each(function(){S(this,arguments).event(R).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},b.scaleBy=function(N,A,k,R){b.scaleTo(N,function(){var V=this.__zoom.k,F=typeof A=="function"?A.apply(this,arguments):A;return V*F},k,R)},b.scaleTo=function(N,A,k,R){b.transform(N,function(){var V=t.apply(this,arguments),F=this.__zoom,z=k==null?_(V):typeof k=="function"?k.apply(this,arguments):k,W=F.invert(z),G=typeof A=="function"?A.apply(this,arguments):A;return n(y(E(F,G),z,W),V,o)},k,R)},b.translateBy=function(N,A,k,R){b.transform(N,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),o)},null,R)},b.translateTo=function(N,A,k,R,V){b.transform(N,function(){var F=t.apply(this,arguments),z=this.__zoom,W=R==null?_(F):typeof R=="function"?R.apply(this,arguments):R;return n(zr.translate(W[0],W[1]).scale(z.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof k=="function"?-k.apply(this,arguments):-k),F,o)},R,V)};function E(N,A){return A=Math.max(i[0],Math.min(i[1],A)),A===N.k?N:new gr(A,N.x,N.y)}function y(N,A,k){var R=A[0]-k[0]*N.k,V=A[1]-k[1]*N.k;return R===N.x&&V===N.y?N:new gr(N.k,R,V)}function _(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function w(N,A,k,R){N.on("start.zoom",function(){S(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(R).end()}).tween("zoom",function(){var V=this,F=arguments,z=S(V,F).event(R),W=t.apply(V,F),G=k==null?_(W):typeof k=="function"?k.apply(V,F):k,K=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),Y=V.__zoom,X=typeof A=="function"?A.apply(V,F):A,J=l(Y.invert(G).concat(K/Y.k),X.invert(G).concat(K/X.k));return function(ee){if(ee===1)ee=X;else{var ce=J(ee),ve=K/ce[2];ee=new gr(ve,G[0]-ce[0]*ve,G[1]-ce[1]*ve)}z.zoom(null,ee)}})}function S(N,A,k){return!k&&N.__zooming||new C(N,A)}function C(N,A){this.that=N,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,A),this.taps=0}C.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,A){return this.mouse&&N!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var A=zt(this.that).datum();c.call(N,this.that,new FA(N,{sourceEvent:this.sourceEvent,target:b,type:N,transform:this.that.__zoom,dispatch:c}),A)}};function x(N,...A){if(!e.apply(this,arguments))return;var k=S(this,A).event(N),R=this.__zoom,V=Math.max(i[0],Math.min(i[1],R.k*Math.pow(2,a.apply(this,arguments)))),F=er(N);if(k.wheel)(k.mouse[0][0]!==F[0]||k.mouse[0][1]!==F[1])&&(k.mouse[1]=R.invert(k.mouse[0]=F)),clearTimeout(k.wheel);else{if(R.k===V)return;k.mouse=[F,R.invert(F)],Eo(this),k.start()}Ia(N),k.wheel=setTimeout(z,h),k.zoom("mouse",n(y(E(R,V),k.mouse[0],k.mouse[1]),k.extent,o));function z(){k.wheel=null,k.end()}}function I(N,...A){if(f||!e.apply(this,arguments))return;var k=N.currentTarget,R=S(this,A,!0).event(N),V=zt(N.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",K,!0),F=er(N,k),z=N.clientX,W=N.clientY;Fw(N.view),Ll(N),R.mouse=[F,this.__zoom.invert(F)],Eo(this),R.start();function G(Y){if(Ia(Y),!R.moved){var X=Y.clientX-z,J=Y.clientY-W;R.moved=X*X+J*J>v}R.event(Y).zoom("mouse",n(y(R.that.__zoom,R.mouse[0]=er(Y,k),R.mouse[1]),R.extent,o))}function K(Y){V.on("mousemove.zoom mouseup.zoom",null),Lw(Y.view,R.moved),Ia(Y),R.event(Y).end()}}function P(N,...A){if(e.apply(this,arguments)){var k=this.__zoom,R=er(N.changedTouches?N.changedTouches[0]:N,this),V=k.invert(R),F=k.k*(N.shiftKey?.5:2),z=n(y(E(k,F),R,V),t.apply(this,A),o);Ia(N),s>0?zt(this).transition().duration(s).call(w,z,R,N):zt(this).call(b.transform,z,R,N)}}function q(N,...A){if(e.apply(this,arguments)){var k=N.touches,R=k.length,V=S(this,A,N.changedTouches.length===R).event(N),F,z,W,G;for(Ll(N),z=0;z<R;++z)W=k[z],G=er(W,this),G=[G,this.__zoom.invert(G),W.identifier],V.touch0?!V.touch1&&V.touch0[2]!==G[2]&&(V.touch1=G,V.taps=0):(V.touch0=G,F=!0,V.taps=1+!!u);u&&(u=clearTimeout(u)),F&&(V.taps<2&&(d=G[0],u=setTimeout(function(){u=null},p)),Eo(this),V.start())}}function O(N,...A){if(this.__zooming){var k=S(this,A).event(N),R=N.changedTouches,V=R.length,F,z,W,G;for(Ia(N),F=0;F<V;++F)z=R[F],W=er(z,this),k.touch0&&k.touch0[2]===z.identifier?k.touch0[0]=W:k.touch1&&k.touch1[2]===z.identifier&&(k.touch1[0]=W);if(z=k.that.__zoom,k.touch1){var K=k.touch0[0],Y=k.touch0[1],X=k.touch1[0],J=k.touch1[1],ee=(ee=X[0]-K[0])*ee+(ee=X[1]-K[1])*ee,ce=(ce=J[0]-Y[0])*ce+(ce=J[1]-Y[1])*ce;z=E(z,Math.sqrt(ee/ce)),W=[(K[0]+X[0])/2,(K[1]+X[1])/2],G=[(Y[0]+J[0])/2,(Y[1]+J[1])/2]}else if(k.touch0)W=k.touch0[0],G=k.touch0[1];else return;k.zoom("touch",n(y(z,W,G),k.extent,o))}}function T(N,...A){if(this.__zooming){var k=S(this,A).event(N),R=N.changedTouches,V=R.length,F,z;for(Ll(N),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),F=0;F<V;++F)z=R[F],k.touch0&&k.touch0[2]===z.identifier?delete k.touch0:k.touch1&&k.touch1[2]===z.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(z=er(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<g)){var W=zt(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return b.wheelDelta=function(N){return arguments.length?(a=typeof N=="function"?N:Xi(+N),b):a},b.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Xi(!!N),b):e},b.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:Xi(!!N),b):r},b.extent=function(N){return arguments.length?(t=typeof N=="function"?N:Xi([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),b):t},b.scaleExtent=function(N){return arguments.length?(i[0]=+N[0],i[1]=+N[1],b):[i[0],i[1]]},b.translateExtent=function(N){return arguments.length?(o[0][0]=+N[0][0],o[1][0]=+N[1][0],o[0][1]=+N[0][1],o[1][1]=+N[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(N){return arguments.length?(n=N,b):n},b.duration=function(N){return arguments.length?(s=+N,b):s},b.interpolate=function(N){return arguments.length?(l=N,b):l},b.on=function(){var N=c.on.apply(c,arguments);return N===c?b:N},b.clickDistance=function(N){return arguments.length?(v=(N=+N)*N,b):Math.sqrt(v)},b.tapDistance=function(N){return arguments.length?(g=+N,b):g},b}const Gs=$.createContext(null),HA=Gs.Provider,Kr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`},Zw=Kr.error001();function tt(e,t){const n=$.useContext(Gs);if(n===null)throw new Error(Zw);return dT(n,e,t)}const ct=()=>{const e=$.useContext(Gs);if(e===null)throw new Error(Zw);return $.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},WA=e=>e.userSelectionActive?"none":"all";function Jw({position:e,children:t,className:n,style:a,...r}){const i=tt(WA),o=`${e}`.split("-");return m("div",{className:Ct(["react-flow__panel",n,...o]),style:{...a,pointerEvents:i},...r,children:t})}function jA({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m(Jw,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const QA=({x:e,y:t,label:n,labelStyle:a={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...u})=>{const d=$.useRef(null),[f,p]=$.useState({x:0,y:0,width:0,height:0}),h=Ct(["react-flow__edge-textwrapper",c]);return $.useEffect(()=>{if(d.current){const v=d.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:L("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...u,children:[r&&m("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),m("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:a,children:n}),l]})};var GA=$.memo(QA);const Hp=e=>({width:e.offsetWidth,height:e.offsetHeight}),aa=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wp=(e={x:0,y:0},t)=>({x:aa(e.x,t[0][0],t[1][0]),y:aa(e.y,t[0][1],t[1][1])}),Am=(e,t,n)=>e<t?aa(Math.abs(e-t),1,50)/50:e>n?-aa(Math.abs(e-n),1,50)/50:0,e0=(e,t)=>{const n=Am(e.x,35,t.width-35)*20,a=Am(e.y,35,t.height-35)*20;return[n,a]},t0=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},YA=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),r0=({x:e,y:t,width:n,height:a})=>({x:e,y:t,x2:e+n,y2:t+a}),KA=({x:e,y:t,x2:n,y2:a})=>({x:e,y:t,width:n-e,height:a-t}),km=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),id=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),a=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*a)},XA=e=>Ft(e.width)&&Ft(e.height)&&Ft(e.x)&&Ft(e.y),Ft=e=>!isNaN(e)&&isFinite(e),it=Symbol.for("internals"),n0=["Enter"," ","Escape"],ZA=(e,t)=>{},JA=e=>"nativeEvent"in e;function od(e){var r,i;const t=JA(e)?e.nativeEvent:e,n=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const a0=e=>"clientX"in e,Hr=(e,t)=>{var i,o;const n=a0(e),a=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ti=({path:e,labelX:t,labelY:n,label:a,labelStyle:r,labelShowBg:i,labelBgStyle:o,labelBgPadding:s,labelBgBorderRadius:l,style:c,markerEnd:u,markerStart:d,interactionWidth:f=20})=>L(Q,{children:[m("path",{style:c,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:d}),f&&m("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),a&&Ft(t)&&Ft(n)?m(GA,{x:t,y:n,label:a,labelStyle:r,labelShowBg:i,labelBgStyle:o,labelBgPadding:s,labelBgBorderRadius:l}):null]});Ti.displayName="BaseEdge";function Ta(e,t,n){return n===void 0?n:a=>{const r=t().edges.find(i=>i.id===e);r&&n(a,{...r})}}function i0({sourceX:e,sourceY:t,targetX:n,targetY:a}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,o=Math.abs(a-t)/2,s=a<t?a+o:a-o;return[i,s,r,o]}function o0({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:r,sourceControlY:i,targetControlX:o,targetControlY:s}){const l=e*.125+r*.375+o*.375+n*.125,c=t*.125+i*.375+s*.375+a*.125,u=Math.abs(l-e),d=Math.abs(c-t);return[l,c,u,d]}var En;(function(e){e.Strict="strict",e.Loose="loose"})(En||(En={}));var Qn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Qn||(Qn={}));var ti;(function(e){e.Partial="partial",e.Full="full"})(ti||(ti={}));var vr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vr||(vr={}));var ri;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ri||(ri={}));var re;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(re||(re={}));function $m({pos:e,x1:t,y1:n,x2:a,y2:r}){return e===re.Left||e===re.Right?[.5*(t+a),n]:[t,.5*(n+r)]}function s0({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:a,targetY:r,targetPosition:i=re.Top}){const[o,s]=$m({pos:n,x1:e,y1:t,x2:a,y2:r}),[l,c]=$m({pos:i,x1:a,y1:r,x2:e,y2:t}),[u,d,f,p]=o0({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${o},${s} ${l},${c} ${a},${r}`,u,d,f,p]}const jp=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=re.Bottom,targetPosition:i=re.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,interactionWidth:v})=>{const[g,b,E]=s0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:i});return m(Ti,{path:g,labelX:b,labelY:E,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,interactionWidth:v})});jp.displayName="SimpleBezierEdge";const qm={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}},ek=({source:e,sourcePosition:t=re.Bottom,target:n})=>t===re.Left||t===re.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Om=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function tk({source:e,sourcePosition:t=re.Bottom,target:n,targetPosition:a=re.Top,center:r,offset:i}){const o=qm[t],s=qm[a],l={x:e.x+o.x*i,y:e.y+o.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},u=ek({source:l,sourcePosition:t,target:c}),d=u.x!==0?"x":"y",f=u[d];let p=[],h,v;const[g,b,E,y]=i0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*s[d]===-1){h=r.x||g,v=r.y||b;const w=[{x:h,y:l.y},{x:h,y:c.y}],S=[{x:l.x,y:v},{x:c.x,y:v}];o[d]===f?p=d==="x"?w:S:p=d==="x"?S:w}else{const w=[{x:l.x,y:c.y}],S=[{x:c.x,y:l.y}];if(d==="x"?p=o.x===f?S:w:p=o.y===f?w:S,t!==a){const C=d==="x"?"y":"x",x=o[d]===s[C],I=l[C]>c[C],P=l[C]<c[C];(o[d]===1&&(!x&&I||x&&P)||o[d]!==1&&(!x&&P||x&&I))&&(p=d==="x"?w:S)}h=p[0].x,v=p[0].y}return[[e,l,...p,c,n],h,v,E,y]}function rk(e,t,n,a){const r=Math.min(Om(e,t)/2,Om(t,n)/2,a),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+r*c},${o}Q ${i},${o} ${i},${o+r*u}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${o+r*l}Q ${i},${o} ${i+r*s},${o}`}function sd({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:a,targetY:r,targetPosition:i=re.Top,borderRadius:o=5,centerX:s,centerY:l,offset:c=20}){const[u,d,f,p,h]=tk({source:{x:e,y:t},sourcePosition:n,target:{x:a,y:r},targetPosition:i,center:{x:s,y:l},offset:c});return[u.reduce((g,b,E)=>{let y="";return E>0&&E<u.length-1?y=rk(u[E-1],b,u[E+1],o):y=`${E===0?"M":"L"}${b.x} ${b.y}`,g+=y,g},""),d,f,p,h]}const Ys=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:d=re.Bottom,targetPosition:f=re.Top,markerEnd:p,markerStart:h,pathOptions:v,interactionWidth:g})=>{const[b,E,y]=sd({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:a,targetPosition:f,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return m(Ti,{path:b,labelX:E,labelY:y,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:p,markerStart:h,interactionWidth:g})});Ys.displayName="SmoothStepEdge";const Qp=$.memo(e=>{var t;return m(Ys,{...e,pathOptions:$.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Qp.displayName="StepEdge";function nk({sourceX:e,sourceY:t,targetX:n,targetY:a}){const[r,i,o,s]=i0({sourceX:e,sourceY:t,targetX:n,targetY:a});return[`M ${e},${t}L ${n},${a}`,r,i,o,s]}const Gp=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:p})=>{const[h,v,g]=nk({sourceX:e,sourceY:t,targetX:n,targetY:a});return m(Ti,{path:h,labelX:v,labelY:g,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:f,interactionWidth:p})});Gp.displayName="StraightEdge";function Zi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Dm({pos:e,x1:t,y1:n,x2:a,y2:r,c:i}){switch(e){case re.Left:return[t-Zi(t-a,i),n];case re.Right:return[t+Zi(a-t,i),n];case re.Top:return[t,n-Zi(n-r,i)];case re.Bottom:return[t,n+Zi(r-n,i)]}}function l0({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:a,targetY:r,targetPosition:i=re.Top,curvature:o=.25}){const[s,l]=Dm({pos:n,x1:e,y1:t,x2:a,y2:r,c:o}),[c,u]=Dm({pos:i,x1:a,y1:r,x2:e,y2:t,c:o}),[d,f,p,h]=o0({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${a},${r}`,d,f,p,h]}const Uo=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=re.Bottom,targetPosition:i=re.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,pathOptions:v,interactionWidth:g})=>{const[b,E,y]=l0({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:i,curvature:v==null?void 0:v.curvature});return m(Ti,{path:b,labelX:E,labelY:y,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:h,interactionWidth:g})});Uo.displayName="BezierEdge";const Yp=$.createContext(null),ak=Yp.Provider;Yp.Consumer;const ik=()=>$.useContext(Yp),ok=e=>"id"in e&&"source"in e&&"target"in e,sk=({source:e,sourceHandle:t,target:n,targetHandle:a})=>`reactflow__edge-${e}${t||""}-${n}${a||""}`,ld=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`,lk=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),uk=(e,t)=>{if(!e.source||!e.target)return t;let n;return ok(e)?n={...e}:n={...e,id:sk(e)},lk(n,t)?t:t.concat(n)},u0=({x:e,y:t},[n,a,r],i,[o,s])=>{const l={x:(e-n)/r,y:(t-a)/r};return i?{x:o*Math.round(l.x/o),y:s*Math.round(l.y/s)}:l},ck=({x:e,y:t},[n,a,r])=>({x:e*r+n,y:t*r+a}),Gn=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],a=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-a};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-a}:r}},c0=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((a,r)=>{const{x:i,y:o}=Gn(r,t).positionAbsolute;return YA(a,r0({x:i,y:o,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return KA(n)},d0=(e,t,[n,a,r]=[0,0,1],i=!1,o=!1,s=[0,0])=>{const l={x:(t.x-n)/r,y:(t.y-a)/r,width:t.width/r,height:t.height/r},c=[];return e.forEach(u=>{const{width:d,height:f,selectable:p=!0,hidden:h=!1}=u;if(o&&!p||h)return!1;const{positionAbsolute:v}=Gn(u,s),g={x:v.x,y:v.y,width:d||0,height:f||0},b=id(l,g),E=typeof d>"u"||typeof f>"u"||d===null||f===null,y=i&&b>0,_=(d||0)*(f||0);(E||y||b>=_||u.dragging)&&c.push(u)}),c},Kp=(e,t)=>{const n=e.map(a=>a.id);return t.filter(a=>n.includes(a.source)||n.includes(a.target))},f0=(e,t,n,a,r,i=.1)=>{const o=t/(e.width*(1+i)),s=n/(e.height*(1+i)),l=Math.min(o,s),c=aa(l,a,r),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*c,p=n/2-d*c;return[f,p,c]},sn=(e,t=0)=>e.transition().duration(t);function Fm(e,t,n,a){return(t[n]||[]).reduce((r,i)=>{var o,s;return`${e.id}-${i.id}-${n}`!==a&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((s=e.positionAbsolute)==null?void 0:s.y)??0)+i.y+i.height/2}),r},[])}function dk(e,t,n){let a=null,r=1/0;return n.forEach(i=>{const o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));o<=t&&o<r&&(r=o,a=i)}),a}const fk={source:null,target:null,sourceHandle:null,targetHandle:null};function p0(e,t,n,a,r,i,o,s){const l=i==="target",c=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:u,y:d}=Hr(e),f=s.elementFromPoint(u,d),p=f!=null&&f.classList.contains("react-flow__handle")?f:c,h={handleDomNode:p,isValid:!1,connection:fk,endHandle:null};if(p){const v=h0(void 0,p),g=p.getAttribute("data-nodeid"),b=p.getAttribute("data-handleid"),E=p.classList.contains("connectable"),y=p.classList.contains("connectableend"),_={source:l?g:a,sourceHandle:l?b:r,target:l?a:g,targetHandle:l?r:b};h.connection=_,E&&y&&(n===En.Strict?l&&v==="source"||!l&&v==="target":g!==a||b!==r)&&(h.endHandle={nodeId:g,handleId:b,type:v},h.isValid=o(_))}return h}function pk({nodes:e,nodeId:t,handleId:n,handleType:a}){return e.reduce((r,i)=>{if(i[it]){const{handleBounds:o}=i[it];let s=[],l=[];o&&(s=Fm(i,o,"source",`${t}-${n}-${a}`),l=Fm(i,o,"target",`${t}-${n}-${a}`)),r.push(...s,...l)}return r},[])}function h0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Vl(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function hk(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function m0({event:e,handleId:t,nodeId:n,onConnect:a,isTarget:r,getState:i,setState:o,isValidConnection:s,edgeUpdaterType:l,onEdgeUpdateEnd:c}){const u=t0(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:p,connectionRadius:h,onConnectStart:v,panBy:g,getNodes:b,cancelConnection:E}=i();let y=0,_;const{x:w,y:S}=Hr(e),C=u==null?void 0:u.elementFromPoint(w,S),x=h0(l,C),I=f==null?void 0:f.getBoundingClientRect();if(!I||!x)return;let P,q=Hr(e,I),O=!1,T=null,N=!1,A=null;const k=pk({nodes:b(),nodeId:n,handleId:t,handleType:x}),R=()=>{if(!p)return;const[z,W]=e0(q,I);g({x:z,y:W}),y=requestAnimationFrame(R)};o({connectionPosition:q,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:x,connectionStartHandle:{nodeId:n,handleId:t,type:x},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:x});function V(z){const{transform:W}=i();q=Hr(z,I),_=dk(u0(q,W,!1,[1,1]),h,k),O||(R(),O=!0);const G=p0(z,_,d,n,t,r?"target":"source",s,u);if(A=G.handleDomNode,T=G.connection,N=G.isValid,o({connectionPosition:_&&N?ck({x:_.x,y:_.y},W):q,connectionStatus:hk(!!_,N),connectionEndHandle:G.endHandle}),!_&&!N&&!A)return Vl(P);T.source!==T.target&&A&&(Vl(P),P=A,A.classList.add("connecting","react-flow__handle-connecting"),A.classList.toggle("valid",N),A.classList.toggle("react-flow__handle-valid",N))}function F(z){var W,G;(_||A)&&T&&N&&(a==null||a(T)),(G=(W=i()).onConnectEnd)==null||G.call(W,z),l&&(c==null||c(z)),Vl(P),E(),cancelAnimationFrame(y),O=!1,N=!1,T=null,A=null,u.removeEventListener("mousemove",V),u.removeEventListener("mouseup",F),u.removeEventListener("touchmove",V),u.removeEventListener("touchend",F)}u.addEventListener("mousemove",V),u.addEventListener("mouseup",F),u.addEventListener("touchmove",V),u.addEventListener("touchend",F)}const Lm=()=>!0,mk=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),vk=(e,t,n)=>a=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:o}=a;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},v0=$.forwardRef(({type:e="source",position:t=re.Top,isValidConnection:n,isConnectable:a=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:o,onConnect:s,children:l,className:c,onMouseDown:u,onTouchStart:d,...f},p)=>{var I,P;const h=o||null,v=e==="target",g=ct(),b=ik(),{connectOnClick:E,noPanClassName:y}=tt(mk,At),{connecting:_,clickConnecting:w}=tt(vk(b,h,e));b||(P=(I=g.getState()).onError)==null||P.call(I,"010",Kr.error010());const S=q=>{const{defaultEdgeOptions:O,onConnect:T,hasDefaultEdges:N}=g.getState(),A={...O,...q};if(N){const{edges:k,setEdges:R}=g.getState();R(uk(A,k))}T==null||T(A),s==null||s(A)},C=q=>{if(!b)return;const O=a0(q);r&&(O&&q.button===0||!O)&&m0({event:q,handleId:h,nodeId:b,onConnect:S,isTarget:v,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||Lm}),O?u==null||u(q):d==null||d(q)},x=q=>{const{onClickConnectStart:O,onClickConnectEnd:T,connectionClickStartHandle:N,connectionMode:A,isValidConnection:k}=g.getState();if(!b||!N&&!r)return;if(!N){O==null||O(q,{nodeId:b,handleId:h,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:b,type:e,handleId:h}});return}const R=t0(q.target),V=n||k||Lm,{connection:F,isValid:z}=p0(q,{nodeId:b,id:h,type:e},A,N.nodeId,N.handleId||null,N.type,V,R);z&&S(F),T==null||T(q),g.setState({connectionClickStartHandle:null})};return m("div",{"data-handleid":h,"data-nodeid":b,"data-handlepos":t,"data-id":`${b}-${h}-${e}`,className:Ct(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,c,{source:!v,target:v,connectable:a,connectablestart:r,connectableend:i,connecting:w,connectionindicator:a&&(r&&!_||i&&_)}]),onMouseDown:C,onTouchStart:C,onClick:E?x:void 0,ref:p,...f,children:l})});v0.displayName="Handle";var zo=$.memo(v0);const g0=({data:e,isConnectable:t,targetPosition:n=re.Top,sourcePosition:a=re.Bottom})=>L(Q,{children:[m(zo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m(zo,{type:"source",position:a,isConnectable:t})]});g0.displayName="DefaultNode";var ud=$.memo(g0);const y0=({data:e,isConnectable:t,sourcePosition:n=re.Bottom})=>L(Q,{children:[e==null?void 0:e.label,m(zo,{type:"source",position:n,isConnectable:t})]});y0.displayName="InputNode";var b0=$.memo(y0);const w0=({data:e,isConnectable:t,targetPosition:n=re.Top})=>L(Q,{children:[m(zo,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});w0.displayName="OutputNode";var S0=$.memo(w0);const Xp=()=>null;Xp.displayName="GroupNode";const gk=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Ji=e=>e.id;function yk(e,t){return At(e.selectedNodes.map(Ji),t.selectedNodes.map(Ji))&&At(e.selectedEdges.map(Ji),t.selectedEdges.map(Ji))}const _0=$.memo(({onSelectionChange:e})=>{const t=ct(),{selectedNodes:n,selectedEdges:a}=tt(gk,yk);return $.useEffect(()=>{var i,o;const r={nodes:n,edges:a};e==null||e(r),(o=(i=t.getState()).onSelectionChange)==null||o.call(i,r)},[n,a,e]),null});_0.displayName="SelectionListener";const bk=e=>!!e.onSelectionChange;function wk({onSelectionChange:e}){const t=tt(bk);return e||t?m(_0,{onSelectionChange:e}):null}const Sk=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function qn(e,t){$.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ee(e,t,n){$.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const _k=({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:r,onConnectStart:i,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:h,minZoom:v,maxZoom:g,nodeExtent:b,onNodesChange:E,onEdgesChange:y,elementsSelectable:_,connectionMode:w,snapGrid:S,snapToGrid:C,translateExtent:x,connectOnClick:I,defaultEdgeOptions:P,fitView:q,fitViewOptions:O,onNodesDelete:T,onEdgesDelete:N,onNodeDrag:A,onNodeDragStart:k,onNodeDragStop:R,onSelectionDrag:V,onSelectionDragStart:F,onSelectionDragStop:z,noPanClassName:W,nodeOrigin:G,rfId:K,autoPanOnConnect:Y,autoPanOnNodeDrag:X,onError:J,connectionRadius:ee,isValidConnection:ce})=>{const{setNodes:ve,setEdges:ne,setDefaultNodesAndEdges:de,setMinZoom:Te,setMaxZoom:be,setTranslateExtent:ae,setNodeExtent:fe,reset:we}=tt(Sk,At),ie=ct();return $.useEffect(()=>{const Ge=a==null?void 0:a.map(Pe=>({...Pe,...P}));return de(n,Ge),()=>{we()}},[]),Ee("defaultEdgeOptions",P,ie.setState),Ee("connectionMode",w,ie.setState),Ee("onConnect",r,ie.setState),Ee("onConnectStart",i,ie.setState),Ee("onConnectEnd",o,ie.setState),Ee("onClickConnectStart",s,ie.setState),Ee("onClickConnectEnd",l,ie.setState),Ee("nodesDraggable",c,ie.setState),Ee("nodesConnectable",u,ie.setState),Ee("nodesFocusable",d,ie.setState),Ee("edgesFocusable",f,ie.setState),Ee("edgesUpdatable",p,ie.setState),Ee("elementsSelectable",_,ie.setState),Ee("elevateNodesOnSelect",h,ie.setState),Ee("snapToGrid",C,ie.setState),Ee("snapGrid",S,ie.setState),Ee("onNodesChange",E,ie.setState),Ee("onEdgesChange",y,ie.setState),Ee("connectOnClick",I,ie.setState),Ee("fitViewOnInit",q,ie.setState),Ee("fitViewOnInitOptions",O,ie.setState),Ee("onNodesDelete",T,ie.setState),Ee("onEdgesDelete",N,ie.setState),Ee("onNodeDrag",A,ie.setState),Ee("onNodeDragStart",k,ie.setState),Ee("onNodeDragStop",R,ie.setState),Ee("onSelectionDrag",V,ie.setState),Ee("onSelectionDragStart",F,ie.setState),Ee("onSelectionDragStop",z,ie.setState),Ee("noPanClassName",W,ie.setState),Ee("nodeOrigin",G,ie.setState),Ee("rfId",K,ie.setState),Ee("autoPanOnConnect",Y,ie.setState),Ee("autoPanOnNodeDrag",X,ie.setState),Ee("onError",J,ie.setState),Ee("connectionRadius",ee,ie.setState),Ee("isValidConnection",ce,ie.setState),qn(e,ve),qn(t,ne),qn(v,Te),qn(g,be),qn(x,ae),qn(b,fe),null},Vm={display:"none"},Ek={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},E0="react-flow__node-desc",C0="react-flow__edge-desc",Ck="react-flow__aria-live",xk=e=>e.ariaLiveMessage;function Nk({rfId:e}){const t=tt(xk);return m("div",{id:`${Ck}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ek,children:t})}function Ik({rfId:e,disableKeyboardA11y:t}){return L(Q,{children:[L("div",{id:`${E0}-${e}`,style:Vm,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),m("div",{id:`${C0}-${e}`,style:Vm,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&m(Nk,{rfId:e})]})}const Tk=(e,t,n)=>n===re.Left?e-t:n===re.Right?e+t:e,Pk=(e,t,n)=>n===re.Top?e-t:n===re.Bottom?e+t:e,Mm="react-flow__edgeupdater",Bm=({position:e,centerX:t,centerY:n,radius:a=10,onMouseDown:r,onMouseEnter:i,onMouseOut:o,type:s})=>m("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:o,className:Ct([Mm,`${Mm}-${s}`]),cx:Tk(t,a,e),cy:Pk(n,a,e),r:a,stroke:"transparent",fill:"transparent"}),Rk=()=>!0;var On=e=>{const t=({id:n,className:a,type:r,data:i,onClick:o,onEdgeDoubleClick:s,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:v,style:g,source:b,target:E,sourceX:y,sourceY:_,targetX:w,targetY:S,sourcePosition:C,targetPosition:x,elementsSelectable:I,hidden:P,sourceHandleId:q,targetHandleId:O,onContextMenu:T,onMouseEnter:N,onMouseMove:A,onMouseLeave:k,edgeUpdaterRadius:R,onEdgeUpdate:V,onEdgeUpdateStart:F,onEdgeUpdateEnd:z,markerEnd:W,markerStart:G,rfId:K,ariaLabel:Y,isFocusable:X,isUpdatable:J,pathOptions:ee,interactionWidth:ce})=>{const ve=$.useRef(null),[ne,de]=$.useState(!1),[Te,be]=$.useState(!1),ae=ct(),fe=$.useMemo(()=>`url(#${ld(G,K)})`,[G,K]),we=$.useMemo(()=>`url(#${ld(W,K)})`,[W,K]);if(P)return null;const ie=Be=>{const{edges:He,addSelectedEdges:xt}=ae.getState();if(I&&(ae.setState({nodesSelectionActive:!1}),xt([n])),o){const ft=He.find(Kt=>Kt.id===n);o(Be,ft)}},Ge=Ta(n,ae.getState,s),Pe=Ta(n,ae.getState,T),Me=Ta(n,ae.getState,N),ot=Ta(n,ae.getState,A),Re=Ta(n,ae.getState,k),Z=(Be,He)=>{if(Be.button!==0)return;const{edges:xt,isValidConnection:ft}=ae.getState(),Kt=He?E:b,kn=(He?O:q)||null,Xt=He?"target":"source",vt=ft||Rk,wa=He,an=xt.find(cr=>cr.id===n);be(!0),F==null||F(Be,an,Xt);const Sa=cr=>{be(!1),z==null||z(cr,an,Xt)};m0({event:Be,handleId:kn,nodeId:Kt,onConnect:cr=>V==null?void 0:V(an,cr),isTarget:wa,getState:ae.getState,setState:ae.setState,isValidConnection:vt,edgeUpdaterType:Xt,onEdgeUpdateEnd:Sa})},le=Be=>Z(Be,!0),pe=Be=>Z(Be,!1),Ne=()=>de(!0),he=()=>de(!1),qt=!I&&!o,ye=Be=>{var He;if(n0.includes(Be.key)&&I){const{unselectNodesAndEdges:xt,addSelectedEdges:ft,edges:Kt}=ae.getState();Be.key==="Escape"?((He=ve.current)==null||He.blur(),xt({edges:[Kt.find(Xt=>Xt.id===n)]})):ft([n])}};return L("g",{className:Ct(["react-flow__edge",`react-flow__edge-${r}`,a,{selected:l,animated:c,inactive:qt,updating:ne}]),onClick:ie,onDoubleClick:Ge,onContextMenu:Pe,onMouseEnter:Me,onMouseMove:ot,onMouseLeave:Re,onKeyDown:X?ye:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${b} to ${E}`,"aria-describedby":X?`${C0}-${K}`:void 0,ref:ve,children:[!Te&&m(e,{id:n,source:b,target:E,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:v,data:i,style:g,sourceX:y,sourceY:_,targetX:w,targetY:S,sourcePosition:C,targetPosition:x,sourceHandleId:q,targetHandleId:O,markerStart:fe,markerEnd:we,pathOptions:ee,interactionWidth:ce}),J&&L(Q,{children:[(J==="source"||J===!0)&&m(Bm,{position:C,centerX:y,centerY:_,radius:R,onMouseDown:le,onMouseEnter:Ne,onMouseOut:he,type:"source"}),(J==="target"||J===!0)&&m(Bm,{position:x,centerX:w,centerY:S,radius:R,onMouseDown:pe,onMouseEnter:Ne,onMouseOut:he,type:"target"})]})]})};return t.displayName="EdgeWrapper",$.memo(t)};function Ak(e){const t={default:On(e.default||Uo),straight:On(e.bezier||Gp),step:On(e.step||Qp),smoothstep:On(e.step||Ys),simplebezier:On(e.simplebezier||jp)},n={},a=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=On(e[i]||Uo),r),n);return{...t,...a}}function Um(e,t,n=null){const a=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case re.Top:return{x:a+i/2,y:r};case re.Right:return{x:a+i,y:r+o/2};case re.Bottom:return{x:a+i/2,y:r+o};case re.Left:return{x:a,y:r+o/2}}}function zm(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const kk=(e,t,n,a,r,i)=>{const o=Um(n,e,t),s=Um(i,a,r);return{sourceX:o.x,sourceY:o.y,targetX:s.x,targetY:s.y}};function $k({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:a,targetWidth:r,targetHeight:i,width:o,height:s,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+a,t.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=r0({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:s/l[2]}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),f=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*f)>0}function Hm(e){var a,r,i,o,s;const t=((a=e==null?void 0:e[it])==null?void 0:a.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}function x0(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:x0(n,t):!1}function Wm(e,t,n){let a=e;do{if(a!=null&&a.matches(t))return!0;if(a===n.current)return!1;a=a.parentElement}while(a);return!1}function qk(e,t,n,a){return Array.from(e.values()).filter(r=>(r.selected||r.id===a)&&(!r.parentNode||!x0(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function N0(e,t,n,a,r=[0,0],i){let o=e.extent||a;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:u,y:d}=Gn(c,r).positionAbsolute;o=c&&Ft(u)&&Ft(d)&&Ft(c.width)&&Ft(c.height)?[[u+e.width*r[0],d+e.height*r[1]],[u+c.width-e.width+e.width*r[0],d+c.height-e.height+e.height*r[1]]]:o}else i==null||i("005",Kr.error005()),o=a;else if(e.extent&&e.parentNode){const c=n.get(e.parentNode),{x:u,y:d}=Gn(c,r).positionAbsolute;o=[[e.extent[0][0]+u,e.extent[0][1]+d],[e.extent[1][0]+u,e.extent[1][1]+d]]}let s={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);s=Gn(c,r).positionAbsolute}const l=o?Wp(t,o):t;return{position:{x:l.x-s.x,y:l.y-s.y},positionAbsolute:l}}function Ml({nodeId:e,dragItems:t,nodeInternals:n}){const a=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?a.find(r=>r.id===e):a[0],a]}const jm=(e,t,n,a)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),o=t.getBoundingClientRect(),s={x:o.width*a[0],y:o.height*a[1]};return i.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-o.left-s.x)/n,y:(c.top-o.top-s.y)/n,...Hp(l)}})};function Pa(e,t,n){return n===void 0?n:a=>{const r=t().nodeInternals.get(e);n(a,{...r})}}function cd({id:e,store:t,unselect:n=!1,nodeRef:a}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:s}=t.getState(),l=s.get(e);t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(i({nodes:[l]}),requestAnimationFrame(()=>{var c;return(c=a==null?void 0:a.current)==null?void 0:c.blur()})):r([e])}function Ok(){const e=ct();return $.useCallback(({sourceEvent:n})=>{const{transform:a,snapGrid:r,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-a[0])/a[2],y:(s-a[1])/a[2]};return{xSnapped:i?r[0]*Math.round(l.x/r[0]):l.x,ySnapped:i?r[1]*Math.round(l.y/r[1]):l.y,...l}},[])}function Bl(e){return(t,n,a)=>e==null?void 0:e(t,a)}function I0({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:a,nodeId:r,isSelectable:i,selectNodesOnDrag:o}){const s=ct(),[l,c]=$.useState(!1),u=$.useRef([]),d=$.useRef({x:null,y:null}),f=$.useRef(0),p=$.useRef(null),h=$.useRef({x:0,y:0}),v=$.useRef(null),g=$.useRef(!1),b=Ok();return $.useEffect(()=>{if(e!=null&&e.current){const E=zt(e.current),y=({x:w,y:S})=>{const{nodeInternals:C,onNodeDrag:x,onSelectionDrag:I,updateNodePositions:P,nodeExtent:q,snapGrid:O,snapToGrid:T,nodeOrigin:N,onError:A}=s.getState();d.current={x:w,y:S};let k=!1;if(u.current=u.current.map(V=>{const F={x:w-V.distance.x,y:S-V.distance.y};T&&(F.x=O[0]*Math.round(F.x/O[0]),F.y=O[1]*Math.round(F.y/O[1]));const z=N0(V,F,C,q,N,A);return k=k||V.position.x!==z.position.x||V.position.y!==z.position.y,V.position=z.position,V.positionAbsolute=z.positionAbsolute,V}),!k)return;P(u.current,!0,!0),c(!0);const R=r?x:Bl(I);if(R&&v.current){const[V,F]=Ml({nodeId:r,dragItems:u.current,nodeInternals:C});R(v.current,V,F)}},_=()=>{if(!p.current)return;const[w,S]=e0(h.current,p.current);if(w!==0||S!==0){const{transform:C,panBy:x}=s.getState();d.current.x=(d.current.x??0)-w/C[2],d.current.y=(d.current.y??0)-S/C[2],y(d.current),x({x:w,y:S})}f.current=requestAnimationFrame(_)};if(t)E.on(".drag",null);else{const w=JP().on("start",S=>{var k;const{nodeInternals:C,multiSelectionActive:x,domNode:I,nodesDraggable:P,unselectNodesAndEdges:q,onNodeDragStart:O,onSelectionDragStart:T}=s.getState(),N=r?O:Bl(T);!o&&!x&&r&&((k=C.get(r))!=null&&k.selected||q()),r&&i&&o&&cd({id:r,store:s,nodeRef:e});const A=b(S);if(d.current=A,u.current=qk(C,P,A,r),N&&u.current){const[R,V]=Ml({nodeId:r,dragItems:u.current,nodeInternals:C});N(S.sourceEvent,R,V)}p.current=(I==null?void 0:I.getBoundingClientRect())||null,h.current=Hr(S.sourceEvent,p.current)}).on("drag",S=>{const C=b(S),{autoPanOnNodeDrag:x}=s.getState();!g.current&&x&&(g.current=!0,_()),(d.current.x!==C.xSnapped||d.current.y!==C.ySnapped)&&u.current&&(v.current=S.sourceEvent,h.current=Hr(S.sourceEvent,p.current),y(C))}).on("end",S=>{if(c(!1),g.current=!1,cancelAnimationFrame(f.current),u.current){const{updateNodePositions:C,nodeInternals:x,onNodeDragStop:I,onSelectionDragStop:P}=s.getState(),q=r?I:Bl(P);if(C(u.current,!1,!1),q){const[O,T]=Ml({nodeId:r,dragItems:u.current,nodeInternals:x});q(S.sourceEvent,O,T)}}}).filter(S=>{const C=S.target;return!S.button&&(!n||!Wm(C,`.${n}`,e))&&(!a||Wm(C,a,e))});return E.call(w),()=>{E.on(".drag",null)}}}},[e,t,n,a,i,s,r,o,b]),l}function T0(){const e=ct();return $.useCallback(n=>{const{nodeInternals:a,nodeExtent:r,updateNodePositions:i,getNodes:o,snapToGrid:s,snapGrid:l,onError:c,nodesDraggable:u}=e.getState(),d=o().filter(E=>E.selected&&(E.draggable||u&&typeof E.draggable>"u")),f=s?l[0]:5,p=s?l[1]:5,h=n.isShiftPressed?4:1,v=n.x*f*h,g=n.y*p*h,b=d.map(E=>{if(E.positionAbsolute){const y={x:E.positionAbsolute.x+v,y:E.positionAbsolute.y+g};s&&(y.x=l[0]*Math.round(y.x/l[0]),y.y=l[1]*Math.round(y.y/l[1]));const{positionAbsolute:_,position:w}=N0(E,y,a,r,void 0,c);E.position=w,E.positionAbsolute=_}return E});i(b,!0,!1)},[])}const Yn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ra=e=>{const t=({id:n,type:a,data:r,xPos:i,yPos:o,xPosOrigin:s,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onContextMenu:h,onDoubleClick:v,style:g,className:b,isDraggable:E,isSelectable:y,isConnectable:_,isFocusable:w,selectNodesOnDrag:S,sourcePosition:C,targetPosition:x,hidden:I,resizeObserver:P,dragHandle:q,zIndex:O,isParent:T,noDragClassName:N,noPanClassName:A,initialized:k,disableKeyboardA11y:R,ariaLabel:V,rfId:F})=>{const z=ct(),W=$.useRef(null),G=$.useRef(C),K=$.useRef(x),Y=$.useRef(a),X=y||E||u||d||f||p,J=T0(),ee=Pa(n,z.getState,d),ce=Pa(n,z.getState,f),ve=Pa(n,z.getState,p),ne=Pa(n,z.getState,h),de=Pa(n,z.getState,v),Te=fe=>{if(y&&(!S||!E)&&cd({id:n,store:z,nodeRef:W}),u){const we=z.getState().nodeInternals.get(n);u(fe,{...we})}},be=fe=>{if(!od(fe))if(n0.includes(fe.key)&&y){const we=fe.key==="Escape";cd({id:n,store:z,unselect:we,nodeRef:W})}else!R&&E&&c&&Object.prototype.hasOwnProperty.call(Yn,fe.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${fe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),J({x:Yn[fe.key].x,y:Yn[fe.key].y,isShiftPressed:fe.shiftKey}))};$.useEffect(()=>{if(W.current&&!I){const fe=W.current;return P==null||P.observe(fe),()=>P==null?void 0:P.unobserve(fe)}},[I]),$.useEffect(()=>{const fe=Y.current!==a,we=G.current!==C,ie=K.current!==x;W.current&&(fe||we||ie)&&(fe&&(Y.current=a),we&&(G.current=C),ie&&(K.current=x),z.getState().updateNodeDimensions([{id:n,nodeElement:W.current,forceUpdate:!0}]))},[n,a,C,x]);const ae=I0({nodeRef:W,disabled:I||!E,noDragClassName:N,handleSelector:q,nodeId:n,isSelectable:y,selectNodesOnDrag:S});return I?null:m("div",{className:Ct(["react-flow__node",`react-flow__node-${a}`,{[A]:E},b,{selected:c,selectable:y,parent:T,dragging:ae}]),ref:W,style:{zIndex:O,transform:`translate(${s}px,${l}px)`,pointerEvents:X?"all":"none",visibility:k?"visible":"hidden",...g},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:ce,onMouseLeave:ve,onContextMenu:ne,onClick:Te,onDoubleClick:de,onKeyDown:w?be:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":R?void 0:`${E0}-${F}`,"aria-label":V,children:m(ak,{value:n,children:m(e,{id:n,data:r,type:a,xPos:i,yPos:o,selected:c,isConnectable:_,sourcePosition:C,targetPosition:x,dragging:ae,dragHandle:q,zIndex:O})})})};return t.displayName="NodeWrapper",$.memo(t)};function Dk(e){const t={input:Ra(e.input||b0),default:Ra(e.default||ud),output:Ra(e.output||S0),group:Ra(e.group||Xp)},n={},a=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Ra(e[i]||ud),r),n);return{...t,...a}}const Fk=({x:e,y:t,width:n,height:a,origin:r})=>!n||!a?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-a*r[1]},Lk=typeof document<"u"?document:null;var ni=(e=null,t={target:Lk})=>{const[n,a]=$.useState(!1),r=$.useRef(!1),i=$.useRef(new Set([])),[o,s]=$.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=c.reduce((d,f)=>d.concat(...f),[]);return[c,u]}return[[],[]]},[e]);return $.useEffect(()=>{var l,c;if(e!==null){const u=p=>{if(r.current=p.ctrlKey||p.metaKey||p.shiftKey,!r.current&&od(p))return!1;const h=Gm(p.code,s);i.current.add(p[h]),Qm(o,i.current,!1)&&(p.preventDefault(),a(!0))},d=p=>{if(!r.current&&od(p))return!1;const h=Gm(p.code,s);Qm(o,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(p[h]),r.current=!1},f=()=>{i.current.clear(),a(!1)};return(l=t==null?void 0:t.target)==null||l.addEventListener("keydown",u),(c=t==null?void 0:t.target)==null||c.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{var p,h;(p=t==null?void 0:t.target)==null||p.removeEventListener("keydown",u),(h=t==null?void 0:t.target)==null||h.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,a]),n};function Qm(e,t,n){return e.filter(a=>n||a.length===t.size).some(a=>a.every(r=>t.has(r)))}function Gm(e,t){return t.includes(e)?"code":"key"}function P0(e,t,n,a){var o,s;if(!e.parentNode)return n;const r=t.get(e.parentNode),i=Gn(r,a);return P0(r,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((o=r[it])==null?void 0:o.z)??0)>(n.z??0)?((s=r[it])==null?void 0:s.z)??0:n.z??0},a)}function R0(e,t,n){e.forEach(a=>{var r;if(a.parentNode&&!e.has(a.parentNode))throw new Error(`Parent node ${a.parentNode} not found`);if(a.parentNode||n!=null&&n[a.id]){const{x:i,y:o,z:s}=P0(a,e,{...a.position,z:((r=a[it])==null?void 0:r.z)??0},t);a.positionAbsolute={x:i,y:o},a[it].z=s,n!=null&&n[a.id]&&(a[it].isParent=!0)}})}function Ul(e,t,n,a){const r=new Map,i={},o=a?1e3:0;return e.forEach(s=>{var d;const l=(Ft(s.zIndex)?s.zIndex:0)+(s.selected?o:0),c=t.get(s.id),u={width:c==null?void 0:c.width,height:c==null?void 0:c.height,...s,positionAbsolute:{x:s.position.x,y:s.position.y}};s.parentNode&&(u.parentNode=s.parentNode,i[s.parentNode]=!0),Object.defineProperty(u,it,{enumerable:!1,value:{handleBounds:(d=c==null?void 0:c[it])==null?void 0:d.handleBounds,z:l}}),r.set(s.id,u)}),R0(r,n,i),r}function A0(e,t={}){const{getNodes:n,width:a,height:r,minZoom:i,maxZoom:o,d3Zoom:s,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!c&&u;if(s&&l&&(f||!t.initial)){const h=n().filter(g=>{var E;const b=t.includeHiddenNodes?g.width&&g.height:!g.hidden;return(E=t.nodes)!=null&&E.length?b&&t.nodes.some(y=>y.id===g.id):b}),v=h.every(g=>g.width&&g.height);if(h.length>0&&v){const g=c0(h,d),[b,E,y]=f0(g,a,r,t.minZoom??i,t.maxZoom??o,t.padding??.1),_=zr.translate(b,E).scale(y);return typeof t.duration=="number"&&t.duration>0?s.transform(sn(l,t.duration),_):s.transform(l,_),!0}}return!1}function Vk(e,t){return e.forEach(n=>{const a=t.get(n.id);a&&t.set(a.id,{...a,[it]:a[it],selected:n.selected})}),new Map(t)}function Mk(e,t){return t.map(n=>{const a=e.find(r=>r.id===n.id);return a&&(n.selected=a.selected),n})}function eo({changedNodes:e,changedEdges:t,get:n,set:a}){const{nodeInternals:r,edges:i,onNodesChange:o,onEdgesChange:s,hasDefaultNodes:l,hasDefaultEdges:c}=n();e!=null&&e.length&&(l&&a({nodeInternals:Vk(e,r)}),o==null||o(e)),t!=null&&t.length&&(c&&a({edges:Mk(t,i)}),s==null||s(t))}const Dn=()=>{},Bk={zoomIn:Dn,zoomOut:Dn,zoomTo:Dn,getZoom:()=>1,setViewport:Dn,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Dn,fitBounds:Dn,project:e=>e,viewportInitialized:!1},Uk=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),zk=()=>{const e=ct(),{d3Zoom:t,d3Selection:n}=tt(Uk,At);return $.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(sn(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(sn(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(sn(n,i==null?void 0:i.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[o,s,l]=e.getState().transform,c=zr.translate(r.x??o,r.y??s).scale(r.zoom??l);t.transform(sn(n,i==null?void 0:i.duration),c)},getViewport:()=>{const[r,i,o]=e.getState().transform;return{x:r,y:i,zoom:o}},fitView:r=>A0(e.getState,r),setCenter:(r,i,o)=>{const{width:s,height:l,maxZoom:c}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,d=s/2-r*u,f=l/2-i*u,p=zr.translate(d,f).scale(u);t.transform(sn(n,o==null?void 0:o.duration),p)},fitBounds:(r,i)=>{const{width:o,height:s,minZoom:l,maxZoom:c}=e.getState(),[u,d,f]=f0(r,o,s,l,c,(i==null?void 0:i.padding)??.1),p=zr.translate(u,d).scale(f);t.transform(sn(n,i==null?void 0:i.duration),p)},project:r=>{const{transform:i,snapToGrid:o,snapGrid:s}=e.getState();return u0(r,i,o,s)},viewportInitialized:!0}:Bk,[t,n])};function Ks(){const e=zk(),t=ct(),n=$.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),a=$.useCallback(v=>t.getState().nodeInternals.get(v),[]),r=$.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(g=>({...g}))},[]),i=$.useCallback(v=>{const{edges:g=[]}=t.getState();return g.find(b=>b.id===v)},[]),o=$.useCallback(v=>{const{getNodes:g,setNodes:b,hasDefaultNodes:E,onNodesChange:y}=t.getState(),_=g(),w=typeof v=="function"?v(_):v;if(E)b(w);else if(y){const S=w.length===0?_.map(C=>({type:"remove",id:C.id})):w.map(C=>({item:C,type:"reset"}));y(S)}},[]),s=$.useCallback(v=>{const{edges:g=[],setEdges:b,hasDefaultEdges:E,onEdgesChange:y}=t.getState(),_=typeof v=="function"?v(g):v;if(E)b(_);else if(y){const w=_.length===0?g.map(S=>({type:"remove",id:S.id})):_.map(S=>({item:S,type:"reset"}));y(w)}},[]),l=$.useCallback(v=>{const g=Array.isArray(v)?v:[v],{getNodes:b,setNodes:E,hasDefaultNodes:y,onNodesChange:_}=t.getState();if(y){const S=[...b(),...g];E(S)}else if(_){const w=g.map(S=>({item:S,type:"add"}));_(w)}},[]),c=$.useCallback(v=>{const g=Array.isArray(v)?v:[v],{edges:b=[],setEdges:E,hasDefaultEdges:y,onEdgesChange:_}=t.getState();if(y)E([...b,...g]);else if(_){const w=g.map(S=>({item:S,type:"add"}));_(w)}},[]),u=$.useCallback(()=>{const{getNodes:v,edges:g=[],transform:b}=t.getState(),[E,y,_]=b;return{nodes:v().map(w=>({...w})),edges:g.map(w=>({...w})),viewport:{x:E,y,zoom:_}}},[]),d=$.useCallback(({nodes:v,edges:g})=>{const{nodeInternals:b,getNodes:E,edges:y,hasDefaultNodes:_,hasDefaultEdges:w,onNodesDelete:S,onEdgesDelete:C,onNodesChange:x,onEdgesChange:I}=t.getState(),P=(v||[]).map(A=>A.id),q=(g||[]).map(A=>A.id),O=E().reduce((A,k)=>{const R=!P.includes(k.id)&&k.parentNode&&A.find(F=>F.id===k.parentNode);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(P.includes(k.id)||R)&&A.push(k),A},[]),T=y.filter(A=>typeof A.deletable=="boolean"?A.deletable:!0),N=T.filter(A=>q.includes(A.id));if(O||N){const A=Kp(O,T),k=[...N,...A],R=k.reduce((V,F)=>(V.includes(F.id)||V.push(F.id),V),[]);if((w||_)&&(w&&t.setState({edges:y.filter(V=>!R.includes(V.id))}),_&&(O.forEach(V=>{b.delete(V.id)}),t.setState({nodeInternals:new Map(b)}))),R.length>0&&(C==null||C(k),I&&I(R.map(V=>({id:V,type:"remove"})))),O.length>0&&(S==null||S(O),x)){const V=O.map(F=>({id:F.id,type:"remove"}));x(V)}}},[]),f=$.useCallback(v=>{const g=XA(v),b=g?null:t.getState().nodeInternals.get(v.id);return[g?v:km(b),b,g]},[]),p=$.useCallback((v,g=!0,b)=>{const[E,y,_]=f(v);return E?(b||t.getState().getNodes()).filter(w=>{if(!_&&(w.id===y.id||!w.positionAbsolute))return!1;const S=km(w),C=id(S,E);return g&&C>0||C>=v.width*v.height}):[]},[]),h=$.useCallback((v,g,b=!0)=>{const[E]=f(v);if(!E)return!1;const y=id(E,g);return b&&y>0||y>=v.width*v.height},[]);return $.useMemo(()=>({...e,getNodes:n,getNode:a,getEdges:r,getEdge:i,setNodes:o,setEdges:s,addNodes:l,addEdges:c,toObject:u,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:h}),[e,n,a,r,i,o,s,l,c,u,d,p,h])}var Hk=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ct(),{deleteElements:a}=Ks(),r=ni(e),i=ni(t);$.useEffect(()=>{if(r){const{edges:o,getNodes:s}=n.getState(),l=s().filter(u=>u.selected),c=o.filter(u=>u.selected);a({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[r]),$.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Wk(e){const t=ct();$.useEffect(()=>{let n;const a=()=>{var i,o;if(!e.current)return;const r=Hp(e.current);(r.height===0||r.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",Kr.error004())),t.setState({width:r.width||500,height:r.height||500})};return a(),window.addEventListener("resize",a),e.current&&(n=new ResizeObserver(()=>a()),n.observe(e.current)),()=>{window.removeEventListener("resize",a),n&&e.current&&n.unobserve(e.current)}},[])}const Zp={position:"absolute",width:"100%",height:"100%",top:0,left:0},jk=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,zl=e=>({x:e.x,y:e.y,zoom:e.k}),Fn=(e,t)=>e.target.closest(`.${t}`),Ym=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Qk=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Gk=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:a,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:l=Qn.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:p,minZoom:h,maxZoom:v,zoomActivationKeyCode:g,preventScrolling:b=!0,children:E,noWheelClassName:y,noPanClassName:_})=>{const w=$.useRef(),S=ct(),C=$.useRef(!1),x=$.useRef(!1),I=$.useRef(null),P=$.useRef({x:0,y:0,zoom:0}),{d3Zoom:q,d3Selection:O,d3ZoomHandler:T,userSelectionActive:N}=tt(Qk,At),A=ni(g),k=$.useRef(0);return Wk(I),$.useEffect(()=>{if(I.current){const R=I.current.getBoundingClientRect(),V=zA().scaleExtent([h,v]).translateExtent(p),F=zt(I.current).call(V),z=zr.translate(f.x,f.y).scale(aa(f.zoom,h,v)),W=[[0,0],[R.width,R.height]],G=V.constrain()(z,W,p);V.transform(F,G),S.setState({d3Zoom:V,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:I.current.closest(".react-flow")})}},[]),$.useEffect(()=>{O&&q&&(o&&!A&&!N?O.on("wheel.zoom",R=>{if(Fn(R,y))return!1;R.preventDefault(),R.stopImmediatePropagation();const V=O.property("__zoom").k||1;if(R.ctrlKey&&i){const G=er(R),K=-R.deltaY*(R.deltaMode===1?.05:R.deltaMode?1:.002)*10,Y=V*Math.pow(2,K);q.scaleTo(O,Y,G);return}const F=R.deltaMode===1?20:1,z=l===Qn.Vertical?0:R.deltaX*F,W=l===Qn.Horizontal?0:R.deltaY*F;q.translateBy(O,-(z/V)*s,-(W/V)*s)},{passive:!1}):typeof T<"u"&&O.on("wheel.zoom",function(R,V){if(!b||Fn(R,y))return null;R.preventDefault(),T.call(this,R,V)},{passive:!1}))},[N,o,l,O,q,T,A,i,b,y]),$.useEffect(()=>{q&&q.on("start",R=>{var F;if(!R.sourceEvent)return null;k.current=R.sourceEvent.button;const{onViewportChangeStart:V}=S.getState();if(C.current=!0,((F=R.sourceEvent)==null?void 0:F.type)==="mousedown"&&S.setState({paneDragging:!0}),t||V){const z=zl(R.transform);P.current=z,V==null||V(z),t==null||t(R.sourceEvent,z)}})},[q,t]),$.useEffect(()=>{q&&(N&&!C.current?q.on("zoom",null):N||q.on("zoom",R=>{const{onViewportChange:V}=S.getState();if(S.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),x.current=!!(a&&Ym(d,k.current??0)),e||V){const F=zl(R.transform);V==null||V(F),e==null||e(R.sourceEvent,F)}}))},[N,q,e,d,a]),$.useEffect(()=>{q&&q.on("end",R=>{if(!R.sourceEvent)return null;const{onViewportChangeEnd:V}=S.getState();if(C.current=!1,S.setState({paneDragging:!1}),a&&Ym(d,k.current??0)&&!x.current&&a(R.sourceEvent),x.current=!1,(n||V)&&jk(P.current,R.transform)){const F=zl(R.transform);P.current=F,clearTimeout(w.current),w.current=setTimeout(()=>{V==null||V(F),n==null||n(R.sourceEvent,F)},o?150:0)}})},[q,o,d,n,a]),$.useEffect(()=>{q&&q.filter(R=>{const V=A||r,F=i&&R.ctrlKey;if(R.button===1&&R.type==="mousedown"&&(Fn(R,"react-flow__node")||Fn(R,"react-flow__edge")))return!0;if(!d&&!V&&!o&&!c&&!i||N||!c&&R.type==="dblclick"||Fn(R,y)&&R.type==="wheel"||Fn(R,_)&&R.type!=="wheel"||!i&&R.ctrlKey&&R.type==="wheel"||!V&&!o&&!F&&R.type==="wheel"||!d&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(d)&&!d.includes(R.button)&&(R.type==="mousedown"||R.type==="touchstart"))return!1;const z=Array.isArray(d)&&d.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&z})},[N,q,r,i,o,c,d,u,A]),m("div",{className:"react-flow__renderer",ref:I,style:Zp,children:E})},Yk=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Kk(){const{userSelectionActive:e,userSelectionRect:t}=tt(Yk,At);return e&&t?m("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Km(e,t){const n=e.find(a=>a.id===t.parentNode);if(n){const a=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(a>0||r>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),r>0&&(n.style.height+=r),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function k0(e,t){if(e.some(a=>a.type==="reset"))return e.filter(a=>a.type==="reset").map(a=>a.item);const n=e.filter(a=>a.type==="add").map(a=>a.item);return t.reduce((a,r)=>{const i=e.filter(s=>s.id===r.id);if(i.length===0)return a.push(r),a;const o={...r};for(const s of i)if(s)switch(s.type){case"select":{o.selected=s.selected;break}case"position":{typeof s.position<"u"&&(o.position=s.position),typeof s.positionAbsolute<"u"&&(o.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(o.dragging=s.dragging),o.expandParent&&Km(a,o);break}case"dimensions":{typeof s.dimensions<"u"&&(o.width=s.dimensions.width,o.height=s.dimensions.height),typeof s.updateStyle<"u"&&(o.style={...o.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(o.resizing=s.resizing),o.expandParent&&Km(a,o);break}case"remove":return a}return a.push(o),a},n)}function $0(e,t){return k0(e,t)}function Xk(e,t){return k0(e,t)}const Dr=(e,t)=>({id:e,type:"select",selected:t});function Un(e,t){return e.reduce((n,a)=>{const r=t.includes(a.id);return!a.selected&&r?(a.selected=!0,n.push(Dr(a.id,!0))):a.selected&&!r&&(a.selected=!1,n.push(Dr(a.id,!1))),n},[])}const Hl=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Zk=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),q0=$.memo(({isSelecting:e,selectionMode:t=ti.Full,panOnDrag:n,onSelectionStart:a,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:s,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:u,children:d})=>{const f=$.useRef(null),p=ct(),h=$.useRef(0),v=$.useRef(0),g=$.useRef(),{userSelectionActive:b,elementsSelectable:E,dragging:y}=tt(Zk,At),_=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),h.current=0,v.current=0},w=T=>{i==null||i(T),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},S=T=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){T.preventDefault();return}o==null||o(T)},C=s?T=>s(T):void 0,x=T=>{const{resetSelectedElements:N,domNode:A}=p.getState();if(g.current=A==null?void 0:A.getBoundingClientRect(),!E||!e||T.button!==0||T.target!==f.current||!g.current)return;const{x:k,y:R}=Hr(T,g.current);N(),p.setState({userSelectionRect:{width:0,height:0,startX:k,startY:R,x:k,y:R}}),a==null||a(T)},I=T=>{const{userSelectionRect:N,nodeInternals:A,edges:k,transform:R,onNodesChange:V,onEdgesChange:F,nodeOrigin:z,getNodes:W}=p.getState();if(!e||!g.current||!N)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const G=Hr(T,g.current),K=N.startX??0,Y=N.startY??0,X={...N,x:G.x<K?G.x:K,y:G.y<Y?G.y:Y,width:Math.abs(G.x-K),height:Math.abs(G.y-Y)},J=W(),ee=d0(A,X,R,t===ti.Partial,!0,z),ce=Kp(ee,k).map(ne=>ne.id),ve=ee.map(ne=>ne.id);if(h.current!==ve.length){h.current=ve.length;const ne=Un(J,ve);ne.length&&(V==null||V(ne))}if(v.current!==ce.length){v.current=ce.length;const ne=Un(k,ce);ne.length&&(F==null||F(ne))}p.setState({userSelectionRect:X})},P=T=>{if(T.button!==0)return;const{userSelectionRect:N}=p.getState();!b&&N&&T.target===f.current&&(w==null||w(T)),p.setState({nodesSelectionActive:h.current>0}),_(),r==null||r(T)},q=T=>{b&&(p.setState({nodesSelectionActive:h.current>0}),r==null||r(T)),_()},O=E&&(e||b);return L("div",{className:Ct(["react-flow__pane",{dragging:y,selection:e}]),onClick:O?void 0:Hl(w,f),onContextMenu:Hl(S,f),onWheel:Hl(C,f),onMouseEnter:O?void 0:l,onMouseDown:O?x:void 0,onMouseMove:O?I:c,onMouseUp:O?P:void 0,onMouseLeave:O?q:u,ref:f,style:Zp,children:[d,m(Kk,{})]})});q0.displayName="Pane";const Jk=e=>{const t=e.getNodes().filter(n=>n.selected);return{...c0(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function e$({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const a=ct(),{width:r,height:i,x:o,y:s,transformString:l,userSelectionActive:c}=tt(Jk,At),u=T0(),d=$.useRef(null);if($.useEffect(()=>{var h;n||(h=d.current)==null||h.focus({preventScroll:!0})},[n]),I0({nodeRef:d}),c||!r||!i)return null;const f=e?h=>{const v=a.getState().getNodes().filter(g=>g.selected);e(h,v)}:void 0,p=h=>{Object.prototype.hasOwnProperty.call(Yn,h.key)&&u({x:Yn[h.key].x,y:Yn[h.key].y,isShiftPressed:h.shiftKey})};return m("div",{className:Ct(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:m("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:r,height:i,top:s,left:o}})})}var t$=$.memo(e$);const r$=e=>e.nodesSelectionActive,O0=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:s,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:h,onSelectionEnd:v,multiSelectionKeyCode:g,panActivationKeyCode:b,zoomActivationKeyCode:E,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:x,zoomOnDoubleClick:I,panOnDrag:P,defaultViewport:q,translateExtent:O,minZoom:T,maxZoom:N,preventScrolling:A,onSelectionContextMenu:k,noWheelClassName:R,noPanClassName:V,disableKeyboardA11y:F})=>{const z=tt(r$),W=ni(d),K=ni(b)||P,Y=W||f&&K!==!0;return Hk({deleteKeyCode:s,multiSelectionKeyCode:g}),m(Gk,{onMove:l,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:i,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:x,zoomOnDoubleClick:I,panOnDrag:!W&&K,defaultViewport:q,translateExtent:O,minZoom:T,maxZoom:N,zoomActivationKeyCode:E,preventScrolling:A,noWheelClassName:R,noPanClassName:V,children:L(q0,{onSelectionStart:h,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:K,isSelecting:!!Y,selectionMode:p,children:[e,z&&m(t$,{onSelectionContextMenu:k,noPanClassName:V,disableKeyboardA11y:F})]})})};O0.displayName="FlowRenderer";var n$=$.memo(O0);function a$(e){return tt($.useCallback(n=>e?d0(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}const i$=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),D0=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:a,elementsSelectable:r,updateNodeDimensions:i,onError:o}=tt(i$,At),s=a$(e.onlyRenderVisibleElements),l=$.useRef(),c=$.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const f=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));i(f)});return l.current=u,u},[]);return $.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),m("div",{className:"react-flow__nodes",style:Zp,children:s.map(u=>{var w,S;let d=u.type||"default";e.nodeTypes[d]||(o==null||o("003",Kr.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,p=!!(u.draggable||t&&typeof u.draggable>"u"),h=!!(u.selectable||r&&typeof u.selectable>"u"),v=!!(u.connectable||n&&typeof u.connectable>"u"),g=!!(u.focusable||a&&typeof u.focusable>"u"),b=e.nodeExtent?Wp(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,E=(b==null?void 0:b.x)??0,y=(b==null?void 0:b.y)??0,_=Fk({x:E,y,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return m(f,{id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||re.Bottom,targetPosition:u.targetPosition||re.Top,hidden:u.hidden,xPos:E,yPos:y,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:p,isSelectable:h,isConnectable:v,isFocusable:g,resizeObserver:c,dragHandle:u.dragHandle,zIndex:((w=u[it])==null?void 0:w.z)??0,isParent:!!((S=u[it])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel},u.id)})})};D0.displayName="NodeRenderer";var o$=$.memo(D0);const s$=[{level:0,isMaxLevel:!0,edges:[]}];function l$(e,t,n=!1){let a=-1;const r=e.reduce((o,s)=>{var u,d,f,p;const l=Ft(s.zIndex);let c=l?s.zIndex:0;return n&&(c=l?s.zIndex:Math.max(((d=(u=t.get(s.source))==null?void 0:u[it])==null?void 0:d.z)||0,((p=(f=t.get(s.target))==null?void 0:f[it])==null?void 0:p.z)||0)),o[c]?o[c].push(s):o[c]=[s],a=c>a?c:a,o},{}),i=Object.entries(r).map(([o,s])=>{const l=+o;return{edges:s,level:l,isMaxLevel:l===a}});return i.length===0?s$:i}function u$(e,t,n){const a=tt($.useCallback(r=>e?r.edges.filter(i=>{const o=t.get(i.source),s=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&$k({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:s.width,targetHeight:s.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return l$(a,t,n)}const c$=({color:e="none",strokeWidth:t=1})=>m("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),d$=({color:e="none",strokeWidth:t=1})=>m("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Xm={[ri.Arrow]:c$,[ri.ArrowClosed]:d$};function f$(e){const t=ct();return $.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(Xm,e)?Xm[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",Kr.error009(e)),null)},[e])}const p$=({id:e,type:t,color:n,width:a=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:s="auto-start-reverse"})=>{const l=f$(t);return l?m("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:m(l,{color:n,strokeWidth:o})}):null},h$=({defaultColor:e,rfId:t})=>n=>{const a=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const s=ld(o,t);a.includes(s)||(r.push({id:s,color:o.color||e,...o}),a.push(s))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},F0=({defaultColor:e,rfId:t})=>{const n=tt($.useCallback(h$({defaultColor:e,rfId:t}),[e,t]),(a,r)=>!(a.length!==r.length||a.some((i,o)=>i.id!==r[o].id)));return m("defs",{children:n.map(a=>m(p$,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})};F0.displayName="MarkerDefinitions";var m$=$.memo(F0);const v$=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),L0=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:a,edgeTypes:r,noPanClassName:i,onEdgeUpdate:o,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:p,onEdgeUpdateStart:h,onEdgeUpdateEnd:v,children:g})=>{const{edgesFocusable:b,edgesUpdatable:E,elementsSelectable:y,width:_,height:w,connectionMode:S,nodeInternals:C,onError:x}=tt(v$,At),I=u$(t,C,n);return _?L(Q,{children:[I.map(({level:P,edges:q,isMaxLevel:O})=>L("svg",{style:{zIndex:P},width:_,height:w,className:"react-flow__edges react-flow__container",children:[O&&m(m$,{defaultColor:e,rfId:a}),m("g",{children:q.map(T=>{const[N,A,k]=Hm(C.get(T.source)),[R,V,F]=Hm(C.get(T.target));if(!k||!F)return null;let z=T.type||"default";r[z]||(x==null||x("011",Kr.error011(z)),z="default");const W=r[z]||r.default,G=S===En.Strict?V.target:(V.target??[]).concat(V.source??[]),K=zm(A.source,T.sourceHandle),Y=zm(G,T.targetHandle),X=(K==null?void 0:K.position)||re.Bottom,J=(Y==null?void 0:Y.position)||re.Top,ee=!!(T.focusable||b&&typeof T.focusable>"u"),ce=typeof o<"u"&&(T.updatable||E&&typeof T.updatable>"u");if(!K||!Y)return x==null||x("008",Kr.error008(K,T)),null;const{sourceX:ve,sourceY:ne,targetX:de,targetY:Te}=kk(N,K,X,R,Y,J);return m(W,{id:T.id,className:Ct([T.className,i]),type:z,data:T.data,selected:!!T.selected,animated:!!T.animated,hidden:!!T.hidden,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,style:T.style,source:T.source,target:T.target,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerEnd:T.markerEnd,markerStart:T.markerStart,sourceX:ve,sourceY:ne,targetX:de,targetY:Te,sourcePosition:X,targetPosition:J,elementsSelectable:y,onEdgeUpdate:o,onContextMenu:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:p,onEdgeUpdateStart:h,onEdgeUpdateEnd:v,rfId:a,ariaLabel:T.ariaLabel,isFocusable:ee,isUpdatable:ce,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth},T.id)})})]},P)),g]}):null};L0.displayName="EdgeRenderer";var g$=$.memo(L0);const y$=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function b$({children:e}){const t=tt(y$);return m("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function w$(e){const t=Ks(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const S$={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top},V0=({nodeId:e,handleType:t,style:n,type:a=vr.Bezier,CustomComponent:r,connectionStatus:i})=>{var S,C,x;const{fromNode:o,handleId:s,toX:l,toY:c,connectionMode:u}=tt($.useCallback(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2],connectionMode:I.connectionMode}),[e]),At),d=(S=o==null?void 0:o[it])==null?void 0:S.handleBounds;let f=d==null?void 0:d[t];if(u===En.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!o||!f)return null;const p=s?f.find(I=>I.id===s):f[0],h=p?p.x+p.width/2:(o.width??0)/2,v=p?p.y+p.height/2:o.height??0,g=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+h,b=(((x=o.positionAbsolute)==null?void 0:x.y)??0)+v,E=p==null?void 0:p.position,y=E?S$[E]:null;if(!E||!y)return null;if(r)return m(r,{connectionLineType:a,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:g,fromY:b,toX:l,toY:c,fromPosition:E,toPosition:y,connectionStatus:i});let _="";const w={sourceX:g,sourceY:b,sourcePosition:E,targetX:l,targetY:c,targetPosition:y};return a===vr.Bezier?[_]=l0(w):a===vr.Step?[_]=sd({...w,borderRadius:0}):a===vr.SmoothStep?[_]=sd(w):a===vr.SimpleBezier?[_]=s0(w):_=`M${g},${b} ${l},${c}`,m("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};V0.displayName="ConnectionLine";const _$=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function E$({containerStyle:e,style:t,type:n,component:a}){const{nodeId:r,handleType:i,nodesConnectable:o,width:s,height:l,connectionStatus:c}=tt(_$,At);return!(r&&i&&s&&o)?null:m("svg",{style:e,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:m("g",{className:Ct(["react-flow__connection",c]),children:m(V0,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:a,connectionStatus:c})})})}const M0=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:a,onMoveEnd:r,onInit:i,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:v,onSelectionEnd:g,connectionLineType:b,connectionLineStyle:E,connectionLineComponent:y,connectionLineContainerStyle:_,selectionKeyCode:w,selectionOnDrag:S,selectionMode:C,multiSelectionKeyCode:x,panActivationKeyCode:I,zoomActivationKeyCode:P,deleteKeyCode:q,onlyRenderVisibleElements:O,elementsSelectable:T,selectNodesOnDrag:N,defaultViewport:A,translateExtent:k,minZoom:R,maxZoom:V,preventScrolling:F,defaultMarkerColor:z,zoomOnScroll:W,zoomOnPinch:G,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:X,zoomOnDoubleClick:J,panOnDrag:ee,onPaneClick:ce,onPaneMouseEnter:ve,onPaneMouseMove:ne,onPaneMouseLeave:de,onPaneScroll:Te,onPaneContextMenu:be,onEdgeUpdate:ae,onEdgeContextMenu:fe,onEdgeMouseEnter:we,onEdgeMouseMove:ie,onEdgeMouseLeave:Ge,edgeUpdaterRadius:Pe,onEdgeUpdateStart:Me,onEdgeUpdateEnd:ot,noDragClassName:Re,noWheelClassName:Z,noPanClassName:le,elevateEdgesOnSelect:pe,disableKeyboardA11y:Ne,nodeOrigin:he,nodeExtent:qt,rfId:ye})=>(w$(i),m(n$,{onPaneClick:ce,onPaneMouseEnter:ve,onPaneMouseMove:ne,onPaneMouseLeave:de,onPaneContextMenu:be,onPaneScroll:Te,deleteKeyCode:q,selectionKeyCode:w,selectionOnDrag:S,selectionMode:C,onSelectionStart:v,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:I,zoomActivationKeyCode:P,elementsSelectable:T,onMove:n,onMoveStart:a,onMoveEnd:r,zoomOnScroll:W,zoomOnPinch:G,zoomOnDoubleClick:J,panOnScroll:K,panOnScrollSpeed:Y,panOnScrollMode:X,panOnDrag:ee,defaultViewport:A,translateExtent:k,minZoom:R,maxZoom:V,onSelectionContextMenu:h,preventScrolling:F,noDragClassName:Re,noWheelClassName:Z,noPanClassName:le,disableKeyboardA11y:Ne,children:L(b$,{children:[m(g$,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:c,onEdgeUpdate:ae,onlyRenderVisibleElements:O,onEdgeContextMenu:fe,onEdgeMouseEnter:we,onEdgeMouseMove:ie,onEdgeMouseLeave:Ge,onEdgeUpdateStart:Me,onEdgeUpdateEnd:ot,edgeUpdaterRadius:Pe,defaultMarkerColor:z,noPanClassName:le,elevateEdgesOnSelect:!!pe,disableKeyboardA11y:Ne,rfId:ye,children:m(E$,{style:E,type:b,component:y,containerStyle:_})}),m("div",{className:"react-flow__edgelabel-renderer"}),m(o$,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:N,onlyRenderVisibleElements:O,noPanClassName:le,noDragClassName:Re,disableKeyboardA11y:Ne,nodeOrigin:he,nodeExtent:qt,rfId:ye})]})}));M0.displayName="GraphView";var C$=$.memo(M0);const dd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Rr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:dd,nodeExtent:dd,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:En.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ZA,isValidConnection:void 0},x$=()=>zI((e,t)=>({...Rr,setNodes:n=>{const{nodeInternals:a,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:Ul(n,a,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:a={}}=t();e({edges:n.map(r=>({...a,...r}))})},setDefaultNodesAndEdges:(n,a)=>{const r=typeof n<"u",i=typeof a<"u",o=r?Ul(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?a:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:a,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:s,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((v,g)=>{const b=r.get(g.id);if(b){const E=Hp(g.nodeElement);!!(E.width&&E.height&&(b.width!==E.width||b.height!==E.height||g.forceUpdate))&&(r.set(b.id,{...b,[it]:{...b[it],handleBounds:{source:jm(".source",g.nodeElement,f,c),target:jm(".target",g.nodeElement,f,c)}},...E}),v.push({id:b.id,type:"dimensions",dimensions:E}))}return v},[]);R0(r,c);const h=o||i&&!o&&A0(t,{initial:!0,...s});e({nodeInternals:new Map(r),fitViewOnInitDone:h}),(p==null?void 0:p.length)>0&&(a==null||a(p))},updateNodePositions:(n,a=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(s=>{const l={id:s.id,type:"position",dragging:r};return a&&(l.positionAbsolute=s.positionAbsolute,l.position=s.position),l});i(o)},triggerNodeChanges:n=>{const{onNodesChange:a,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:o,getNodes:s,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(i){const c=$0(n,s()),u=Ul(c,r,o,l);e({nodeInternals:u})}a==null||a(n)}},addSelectedNodes:n=>{const{multiSelectionActive:a,edges:r,getNodes:i}=t();let o,s=null;a?o=n.map(l=>Dr(l,!0)):(o=Un(i(),n),s=Un(r,[])),eo({changedNodes:o,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:a,edges:r,getNodes:i}=t();let o,s=null;a?o=n.map(l=>Dr(l,!0)):(o=Un(r,n),s=Un(i(),[])),eo({changedNodes:s,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:a}={})=>{const{edges:r,getNodes:i}=t(),o=n||i(),s=a||r,l=o.map(u=>(u.selected=!1,Dr(u.id,!1))),c=s.map(u=>Dr(u.id,!1));eo({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:a,maxZoom:r}=t();a==null||a.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:a,minZoom:r}=t();a==null||a.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var a;(a=t().d3Zoom)==null||a.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:a}=t(),i=a().filter(s=>s.selected).map(s=>Dr(s.id,!1)),o=n.filter(s=>s.selected).map(s=>Dr(s.id,!1));eo({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:a}=t();a.forEach(r=>{r.positionAbsolute=Wp(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(a)})},panBy:n=>{const{transform:a,width:r,height:i,d3Zoom:o,d3Selection:s,translateExtent:l}=t();if(!o||!s||!n.x&&!n.y)return;const c=zr.translate(a[0]+n.x,a[1]+n.y).scale(a[2]),u=[[0,0],[r,i]],d=o==null?void 0:o.constrain()(c,u,l);o.transform(s,d)},cancelConnection:()=>e({connectionNodeId:Rr.connectionNodeId,connectionHandleId:Rr.connectionHandleId,connectionHandleType:Rr.connectionHandleType,connectionStatus:Rr.connectionStatus,connectionStartHandle:Rr.connectionStartHandle,connectionEndHandle:Rr.connectionEndHandle}),reset:()=>e({...Rr})})),Jp=({children:e})=>{const t=$.useRef(null);return t.current||(t.current=x$()),m(HA,{value:t.current,children:e})};Jp.displayName="ReactFlowProvider";const B0=({children:e})=>$.useContext(Gs)?m(Q,{children:e}):m(Jp,{children:e});B0.displayName="ReactFlowWrapper";function Zm(e,t){return $.useRef(null),$.useMemo(()=>t(e),[e])}const N$={input:b0,default:ud,output:S0,group:Xp},I$={default:Uo,straight:Gp,step:Qp,smoothstep:Ys,simplebezier:jp},T$=[0,0],P$=[15,15],R$={x:0,y:0,zoom:1},A$={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},U0=$.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:r,nodeTypes:i=N$,edgeTypes:o=I$,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:h,onConnectEnd:v,onClickConnectStart:g,onClickConnectEnd:b,onNodeMouseEnter:E,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:w,onNodeDoubleClick:S,onNodeDragStart:C,onNodeDrag:x,onNodeDragStop:I,onNodesDelete:P,onEdgesDelete:q,onSelectionChange:O,onSelectionDragStart:T,onSelectionDrag:N,onSelectionDragStop:A,onSelectionContextMenu:k,onSelectionStart:R,onSelectionEnd:V,connectionMode:F=En.Strict,connectionLineType:z=vr.Bezier,connectionLineStyle:W,connectionLineComponent:G,connectionLineContainerStyle:K,deleteKeyCode:Y="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:J=!1,selectionMode:ee=ti.Full,panActivationKeyCode:ce="Space",multiSelectionKeyCode:ve="Meta",zoomActivationKeyCode:ne="Meta",snapToGrid:de=!1,snapGrid:Te=P$,onlyRenderVisibleElements:be=!1,selectNodesOnDrag:ae=!0,nodesDraggable:fe,nodesConnectable:we,nodesFocusable:ie,nodeOrigin:Ge=T$,edgesFocusable:Pe,edgesUpdatable:Me,elementsSelectable:ot,defaultViewport:Re=R$,minZoom:Z=.5,maxZoom:le=2,translateExtent:pe=dd,preventScrolling:Ne=!0,nodeExtent:he,defaultMarkerColor:qt="#b1b1b7",zoomOnScroll:ye=!0,zoomOnPinch:Be=!0,panOnScroll:He=!1,panOnScrollSpeed:xt=.5,panOnScrollMode:ft=Qn.Free,zoomOnDoubleClick:Kt=!0,panOnDrag:kn=!0,onPaneClick:Xt,onPaneMouseEnter:vt,onPaneMouseMove:wa,onPaneMouseLeave:an,onPaneScroll:Sa,onPaneContextMenu:Oi,children:cr,onEdgeUpdate:Cl,onEdgeContextMenu:Nr,onEdgeDoubleClick:xl,onEdgeMouseEnter:Di,onEdgeMouseMove:Nl,onEdgeMouseLeave:_a,onEdgeUpdateStart:Fi,onEdgeUpdateEnd:Il,edgeUpdaterRadius:Li=10,onNodesChange:Tl,onEdgesChange:Vi,noDragClassName:M="nodrag",noWheelClassName:D="nowheel",noPanClassName:U="nopan",fitView:j=!1,fitViewOptions:H,connectOnClick:te=!0,attributionPosition:se,proOptions:Ce,defaultEdgeOptions:Ve,elevateNodesOnSelect:Ye=!0,elevateEdgesOnSelect:_e=!1,disableKeyboardA11y:De=!1,autoPanOnConnect:Ke=!0,autoPanOnNodeDrag:me=!0,connectionRadius:Ue=20,isValidConnection:Je,onError:ze,style:Zt,id:Nt,...Ot},Ir)=>{const dr=Zm(i,Dk),gt=Zm(o,Ak),yt=Nt||"1";return m("div",{...Ot,style:{...Zt,...A$},ref:Ir,className:Ct(["react-flow",r]),"data-testid":"rf__wrapper",id:Nt,children:L(B0,{children:[m(C$,{onInit:c,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:E,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:w,onNodeDoubleClick:S,nodeTypes:dr,edgeTypes:gt,connectionLineType:z,connectionLineStyle:W,connectionLineComponent:G,connectionLineContainerStyle:K,selectionKeyCode:X,selectionOnDrag:J,selectionMode:ee,deleteKeyCode:Y,multiSelectionKeyCode:ve,panActivationKeyCode:ce,zoomActivationKeyCode:ne,onlyRenderVisibleElements:be,selectNodesOnDrag:ae,defaultViewport:Re,translateExtent:pe,minZoom:Z,maxZoom:le,preventScrolling:Ne,zoomOnScroll:ye,zoomOnPinch:Be,zoomOnDoubleClick:Kt,panOnScroll:He,panOnScrollSpeed:xt,panOnScrollMode:ft,panOnDrag:kn,onPaneClick:Xt,onPaneMouseEnter:vt,onPaneMouseMove:wa,onPaneMouseLeave:an,onPaneScroll:Sa,onPaneContextMenu:Oi,onSelectionContextMenu:k,onSelectionStart:R,onSelectionEnd:V,onEdgeUpdate:Cl,onEdgeContextMenu:Nr,onEdgeDoubleClick:xl,onEdgeMouseEnter:Di,onEdgeMouseMove:Nl,onEdgeMouseLeave:_a,onEdgeUpdateStart:Fi,onEdgeUpdateEnd:Il,edgeUpdaterRadius:Li,defaultMarkerColor:qt,noDragClassName:M,noWheelClassName:D,noPanClassName:U,elevateEdgesOnSelect:_e,rfId:yt,disableKeyboardA11y:De,nodeOrigin:Ge,nodeExtent:he}),m(_k,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:p,onConnectStart:h,onConnectEnd:v,onClickConnectStart:g,onClickConnectEnd:b,nodesDraggable:fe,nodesConnectable:we,nodesFocusable:ie,edgesFocusable:Pe,edgesUpdatable:Me,elementsSelectable:ot,elevateNodesOnSelect:Ye,minZoom:Z,maxZoom:le,nodeExtent:he,onNodesChange:Tl,onEdgesChange:Vi,snapToGrid:de,snapGrid:Te,connectionMode:F,translateExtent:pe,connectOnClick:te,defaultEdgeOptions:Ve,fitView:j,fitViewOptions:H,onNodesDelete:P,onEdgesDelete:q,onNodeDragStart:C,onNodeDrag:x,onNodeDragStop:I,onSelectionDrag:N,onSelectionDragStart:T,onSelectionDragStop:A,noPanClassName:U,nodeOrigin:Ge,rfId:yt,autoPanOnConnect:Ke,autoPanOnNodeDrag:me,onError:ze,connectionRadius:Ue,isValidConnection:Je}),m(wk,{onSelectionChange:O}),cr,m(jA,{proOptions:Ce,position:se}),m(Ik,{rfId:yt,disableKeyboardA11y:De})]})})});U0.displayName="ReactFlow";function z0(e){return t=>{const[n,a]=$.useState(t),r=$.useCallback(i=>a(o=>e(i,o)),[]);return[n,a,r]}}const k$=z0($0),$$=z0(Xk);function q$(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function O$(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m("path",{d:"M0 0h32v4.2H0z"})})}function D$(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function F$(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function L$(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const Da=({children:e,className:t,...n})=>m("button",{type:"button",className:Ct(["react-flow__controls-button",t]),...n,children:e});Da.displayName="ControlButton";const V$=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,H0=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:a=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:o,onFitView:s,onInteractiveChange:l,className:c,children:u,position:d="bottom-left"})=>{const f=ct(),[p,h]=$.useState(!1),v=tt(V$),{zoomIn:g,zoomOut:b,fitView:E}=Ks();if($.useEffect(()=>{h(!0)},[]),!p)return null;const y=()=>{g(),i==null||i()},_=()=>{b(),o==null||o()},w=()=>{E(r),s==null||s()},S=()=>{f.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l==null||l(!v)};return L(Jw,{className:Ct(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls",children:[t&&L(Q,{children:[m(Da,{onClick:y,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:m(q$,{})}),m(Da,{onClick:_,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:m(O$,{})})]}),n&&m(Da,{className:"react-flow__controls-fitview",onClick:w,title:"fit view","aria-label":"fit view",children:m(D$,{})}),a&&m(Da,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity",children:v?m(L$,{}):m(F$,{})}),u]})};H0.displayName="Controls";var M$=$.memo(H0);function B$(e,t){const{accessToken:n,keyFactory:a}=qe();return ca(a.getEntityActionsRequiredQueryKey(e),()=>je.getEntityDownloadActionsRequired(e,n),t)}function U$(e,t){const{accessToken:n,keyFactory:a}=qe();return ca(a.getEntityChildrenQueryKey(e,!1),()=>je.getEntityChildren(e,n),t)}function $W(e,t){const{accessToken:n,keyFactory:a}=qe();return vb(a.getEntityChildrenQueryKey(e,!0),async r=>await je.getEntityChildren({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}const fd=e=>{const{data:t}=EC(e.modifiedBy),n=Qa(ir(e.modifiedOn)),{name:a,description:r}=e;return $.useMemo(()=>L(Q,{children:[a&&m(wt,{title:a,placement:"top",enterNextDelay:200,children:m("span",{children:m(xe,{variant:"smallText1",className:"name",children:a})})}),r&&m(wt,{title:r,placement:"top",enterNextDelay:200,children:m("span",{children:m(xe,{variant:"smallText1",className:"description",children:r})})}),t&&m(fb,{userProfile:t}),m("div",{children:n})]}),[a,r,t,n])};try{fd.displayName="ActivityNodeLabel",fd.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const z$=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),pd=e=>{const{entityHeader:t}=e;if(t){const n=gb(t==null?void 0:t.type);if(n==Oc.FILE){const a=t.name.lastIndexOf(".");if(a>-1){const r=t.name.slice(a);if(z$.has(r.toLowerCase()))return m($e,{icon:"code"})}}else return m(Kh,{type:n,includeTooltip:!1})}return m(Kh,{type:Oc.FILE,includeTooltip:!1})};try{pd.displayName="ProvenanceEntityIcon",pd.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const hd=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return $.useMemo(()=>L(Q,{children:[m("div",{children:m(pd,{entityHeader:e})}),L(Q,{children:[m("div",{children:m(wt,{title:e.name,placement:"top",enterNextDelay:300,children:m("a",{href:`${or.PORTAL}#!Synapse:${n}`,children:e.name})})}),n1(gb(e.type))&&L("div",{children:[L("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&m("div",{children:"(old version)"})]})]})]}),[e,n])};try{hd.displayName="EntityNodeLabel",hd.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}var W0={exports:{}};(function(e,t){(function(n,a){typeof ks=="function"?e.exports=a():n.pluralize=a()})(Gr,function(){var n=[],a=[],r={},i={},o={};function s(v){return typeof v=="string"?new RegExp("^"+v+"$","i"):v}function l(v,g){return v===g?g:v===v.toLowerCase()?g.toLowerCase():v===v.toUpperCase()?g.toUpperCase():v[0]===v[0].toUpperCase()?g.charAt(0).toUpperCase()+g.substr(1).toLowerCase():g.toLowerCase()}function c(v,g){return v.replace(/\$(\d{1,2})/g,function(b,E){return g[E]||""})}function u(v,g){return v.replace(g[0],function(b,E){var y=c(g[1],arguments);return l(b===""?v[E-1]:b,y)})}function d(v,g,b){if(!v.length||r.hasOwnProperty(v))return g;for(var E=b.length;E--;){var y=b[E];if(y[0].test(g))return u(g,y)}return g}function f(v,g,b){return function(E){var y=E.toLowerCase();return g.hasOwnProperty(y)?l(E,y):v.hasOwnProperty(y)?l(E,v[y]):d(y,E,b)}}function p(v,g,b,E){return function(y){var _=y.toLowerCase();return g.hasOwnProperty(_)?!0:v.hasOwnProperty(_)?!1:d(_,_,b)===_}}function h(v,g,b){var E=g===1?h.singular(v):h.plural(v);return(b?g+" ":"")+E}return h.plural=f(o,i,n),h.isPlural=p(o,i,n),h.singular=f(i,o,a),h.isSingular=p(i,o,a),h.addPluralRule=function(v,g){n.push([s(v),g])},h.addSingularRule=function(v,g){a.push([s(v),g])},h.addUncountableRule=function(v){if(typeof v=="string"){r[v.toLowerCase()]=!0;return}h.addPluralRule(v,"$0"),h.addSingularRule(v,"$0")},h.addIrregularRule=function(v,g){g=g.toLowerCase(),v=v.toLowerCase(),o[v]=g,i[g]=v},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(v){return h.addIrregularRule(v[0],v[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(v){return h.addPluralRule(v[0],v[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(v){return h.addSingularRule(v[0],v[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eÃ©]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(W0);var H$=W0.exports;const W$=Et(H$),md=e=>{const{itemCount:t}=e;return $.useMemo(()=>m(Q,{children:L("a",{children:["Show ",t," ",W$("item",t),"â€¦"]})}),[t])};try{md.displayName="ExpandGraphNodeLabel",md.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const j$=/^(.+?\.)?github\.com$/,Q$=/^(.+?\.)?githubusercontent\.com$/,vd=e=>{const{url:t}=e;let n="link";const a=new URL(t),{hostname:r}=a;return(r.match(j$)||r.match(Q$))&&(n="github"),m($e,{icon:n})};try{vd.displayName="ProvenanceExternalIcon",vd.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const gd=e=>$.useMemo(()=>L(Q,{children:[m("div",{children:m(vd,{url:e.url})}),m(wt,{title:e.name,placement:"top",enterNextDelay:300,children:m("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{gd.displayName="ExternalGraphNodeLabel",gd.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var Wl,Jm;function G$(){if(Jm)return Wl;Jm=1;var e=p1,t=4;function n(a){return e(a,t)}return Wl=n,Wl}var jl,ev;function eh(){if(ev)return jl;ev=1;function e(t){return function(){return t}}return jl=e,jl}var Y$=In;function K$(e,t){return function(n,a){if(n==null)return n;if(!Y$(n))return e(n,a);for(var r=n.length,i=t?r:-1,o=Object(n);(t?i--:++i<r)&&a(o[i],i,o)!==!1;);return n}}var X$=K$,Z$=Tb,J$=X$,eq=J$(Z$),Xs=eq,tq=ma;function rq(e){return typeof e=="function"?e:tq}var j0=rq,nq=Sb,aq=Xs,iq=j0,oq=sr;function sq(e,t){var n=oq(e)?nq:aq;return n(e,iq(t))}var th=sq,Ql,tv;function Q0(){return tv||(tv=1,Ql=th),Ql}var Gl,rv;function lq(){if(rv)return Gl;rv=1;var e=Xs;function t(n,a){var r=[];return e(n,function(i,o,s){a(i,o,s)&&r.push(i)}),r}return Gl=t,Gl}var Yl,nv;function G0(){if(nv)return Yl;nv=1;var e=E1(),t=lq(),n=Zr,a=sr;function r(i,o){var s=a(i)?e:t;return s(i,n(o))}return Yl=r,Yl}var Kl,av;function uq(){if(av)return Kl;av=1;var e=Object.prototype,t=e.hasOwnProperty;function n(a,r){return a!=null&&t.call(a,r)}return Kl=n,Kl}var Xl,iv;function Y0(){if(iv)return Xl;iv=1;var e=uq(),t=C1;function n(a,r){return a!=null&&t(a,r,e)}return Xl=n,Xl}var cq=Pb,dq=Rb,fq=Ep,pq=sr,hq=In,mq=Cp,vq=x1,gq=xp,yq="[object Map]",bq="[object Set]",wq=Object.prototype,Sq=wq.hasOwnProperty;function _q(e){if(e==null)return!0;if(hq(e)&&(pq(e)||typeof e=="string"||typeof e.splice=="function"||mq(e)||gq(e)||fq(e)))return!e.length;var t=dq(e);if(t==yq||t==bq)return!e.size;if(vq(e))return!cq(e).length;for(var n in e)if(Sq.call(e,n))return!1;return!0}var K0=_q;const qW=Et(K0);var Zl,ov;function X0(){if(ov)return Zl;ov=1;function e(t){return t===void 0}return Zl=e,Zl}var Eq=Xs,Cq=In;function xq(e,t){var n=-1,a=Cq(e)?Array(e.length):[];return Eq(e,function(r,i,o){a[++n]=t(r,i,o)}),a}var Z0=xq,Jl,sv;function J0(){if(sv)return Jl;sv=1;var e=Jr,t=Zr,n=Z0,a=sr;function r(i,o){var s=a(i)?e:n;return s(i,t(o))}return Jl=r,Jl}var eu,lv;function Nq(){if(lv)return eu;lv=1;function e(t,n,a,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(a=t[++i]);++i<o;)a=n(a,t[i],i,t);return a}return eu=e,eu}var tu,uv;function Iq(){if(uv)return tu;uv=1;function e(t,n,a,r,i){return i(t,function(o,s,l){a=r?(r=!1,o):n(a,o,s,l)}),a}return tu=e,tu}var ru,cv;function eS(){if(cv)return ru;cv=1;var e=Nq(),t=Xs,n=Zr,a=Iq(),r=sr;function i(o,s,l){var c=r(o)?e:a,u=arguments.length<3;return c(o,n(s),l,u,t)}return ru=i,ru}var nu,dv;function Tq(){if(dv)return nu;dv=1;var e=N1,t=e("length");return nu=t,nu}var au,fv;function Pq(){if(fv)return au;fv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",r=t+n+a,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+e+r+i+"]");function l(c){return s.test(c)}return au=l,au}var iu,pv;function Rq(){if(pv)return iu;pv=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",r=t+n+a,i="\\ufe0e\\ufe0f",o="["+e+"]",s="["+r+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",h=c+"?",v="["+i+"]?",g="(?:"+p+"(?:"+[u,d,f].join("|")+")"+v+h+")*",b=v+h+g,E="(?:"+[u+s+"?",s,d,f,o].join("|")+")",y=RegExp(l+"(?="+l+")|"+E+b,"g");function _(w){for(var S=y.lastIndex=0;y.test(w);)++S;return S}return iu=_,iu}var ou,hv;function Aq(){if(hv)return ou;hv=1;var e=Tq(),t=Pq(),n=Rq();function a(r){return t(r)?n(r):e(r)}return ou=a,ou}var su,mv;function kq(){if(mv)return su;mv=1;var e=Pb,t=Rb,n=In,a=M1,r=Aq(),i="[object Map]",o="[object Set]";function s(l){if(l==null)return 0;if(n(l))return a(l)?r(l):l.length;var c=t(l);return c==i||c==o?l.size:e(l).length}return su=s,su}var lu,vv;function $q(){if(vv)return lu;vv=1;var e=Sb,t=h1,n=Tb,a=Zr,r=I1,i=sr,o=Cp,s=Np,l=_i,c=xp;function u(d,f,p){var h=i(d),v=h||o(d)||c(d);if(f=a(f),p==null){var g=d&&d.constructor;v?p=h?new g:[]:l(d)?p=s(g)?t(r(d)):{}:p={}}return(v?e:n)(d,function(b,E,y){return f(p,b,E,y)}),p}return lu=u,lu}var gv=T1,qq=Ep,Oq=sr,yv=gv?gv.isConcatSpreadable:void 0;function Dq(e){return Oq(e)||qq(e)||!!(yv&&e&&e[yv])}var Fq=Dq,Lq=P1,Vq=Fq;function tS(e,t,n,a,r){var i=-1,o=e.length;for(n||(n=Vq),r||(r=[]);++i<o;){var s=e[i];t>0&&n(s)?t>1?tS(s,t-1,n,a,r):Lq(r,s):a||(r[r.length]=s)}return r}var Zs=tS;function Mq(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var rS=Mq,Bq=rS,bv=Math.max;function Uq(e,t,n){return t=bv(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,i=bv(a.length-t,0),o=Array(i);++r<i;)o[r]=a[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=a[r];return s[t]=n(o),Bq(e,this,s)}}var nS=Uq,zq=eh(),wv=R1,Hq=ma,Wq=wv?function(e,t){return wv(e,"toString",{configurable:!0,enumerable:!1,value:zq(t),writable:!0})}:Hq,jq=Wq,Qq=800,Gq=16,Yq=Date.now;function Kq(e){var t=0,n=0;return function(){var a=Yq(),r=Gq-(a-n);if(n=a,r>0){if(++t>=Qq)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Xq=Kq,Zq=jq,Jq=Xq,eO=Jq(Zq),aS=eO,tO=ma,rO=nS,nO=aS;function aO(e,t){return nO(rO(e,t,tO),e+"")}var tn=aO,iO=In,oO=Ab;function sO(e){return oO(e)&&iO(e)}var Js=sO,lO=Zs,uO=tn,cO=_b,dO=Js,fO=uO(function(e){return cO(lO(e,1,dO,!0))}),iS=fO;const OW=Et(iS);var uu,Sv;function pO(){if(Sv)return uu;Sv=1;var e=Jr;function t(n,a){return e(a,function(r){return n[r]})}return uu=t,uu}var cu,_v;function oS(){if(_v)return cu;_v=1;var e=pO(),t=Ip;function n(a){return a==null?[]:e(a,t(a))}return cu=n,cu}var du,Ev;function Mt(){if(Ev)return du;Ev=1;var e;if(typeof ks=="function")try{e={clone:G$(),constant:eh(),each:Q0(),filter:G0(),has:Y0(),isArray:sr,isEmpty:K0,isFunction:Np,isUndefined:X0(),keys:Ip,map:J0(),reduce:eS(),size:kq(),transform:$q(),union:iS,values:oS()}}catch{}return e||(e=window._),du=e,du}var fu,Cv;function rh(){if(Cv)return fu;Cv=1;var e=Mt();fu=r;var t="\0",n="\0",a="";function r(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(u){return this._label=u,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return e.keys(this._nodes)},r.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._in[d])})},r.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(d){return e.isEmpty(u._out[d])})},r.prototype.setNodes=function(u,d){var f=arguments,p=this;return e.each(u,function(h){f.length>1?p.setNode(h,d):p.setNode(h)}),this},r.prototype.setNode=function(u,d){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},r.prototype.node=function(u){return this._nodes[u]},r.prototype.hasNode=function(u){return e.has(this._nodes,u)},r.prototype.removeNode=function(u){var d=this;if(e.has(this._nodes,u)){var f=function(p){d.removeEdge(d._edgeObjs[p])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(p){d.setParent(p)}),delete this._children[u]),e.each(e.keys(this._in[u]),f),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),f),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},r.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},r.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},r.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==n)return d}},r.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var d=this._children[u];if(d)return e.keys(d)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},r.prototype.predecessors=function(u){var d=this._preds[u];if(d)return e.keys(d)},r.prototype.successors=function(u){var d=this._sucs[u];if(d)return e.keys(d)},r.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return e.union(d,this.successors(u))},r.prototype.isLeaf=function(u){var d;return this.isDirected()?d=this.successors(u):d=this.neighbors(u),d.length===0},r.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(v,g){u(g)&&d.setNode(g,v)}),e.each(this._edgeObjs,function(v){d.hasNode(v.v)&&d.hasNode(v.w)&&d.setEdge(v,f.edge(v))});var p={};function h(v){var g=f.parent(v);return g===void 0||d.hasNode(g)?(p[v]=g,g):g in p?p[g]:h(g)}return this._isCompound&&e.each(d.nodes(),function(v){d.setParent(v,h(v))}),d},r.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return e.values(this._edgeObjs)},r.prototype.setPath=function(u,d){var f=this,p=arguments;return e.reduce(u,function(h,v){return p.length>1?f.setEdge(h,v,d):f.setEdge(h,v),v}),this},r.prototype.setEdge=function(){var u,d,f,p,h=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(u=v.v,d=v.w,f=v.name,arguments.length===2&&(p=arguments[1],h=!0)):(u=v,d=arguments[1],f=arguments[3],arguments.length>2&&(p=arguments[2],h=!0)),u=""+u,d=""+d,e.isUndefined(f)||(f=""+f);var g=s(this._isDirected,u,d,f);if(e.has(this._edgeLabels,g))return h&&(this._edgeLabels[g]=p),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[g]=h?p:this._defaultEdgeLabelFn(u,d,f);var b=l(this._isDirected,u,d,f);return u=b.v,d=b.w,Object.freeze(b),this._edgeObjs[g]=b,i(this._preds[d],u),i(this._sucs[u],d),this._in[d][g]=b,this._out[u][g]=b,this._edgeCount++,this},r.prototype.edge=function(u,d,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return this._edgeLabels[p]},r.prototype.hasEdge=function(u,d,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,d,f);return e.has(this._edgeLabels,p)},r.prototype.removeEdge=function(u,d,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,d,f),h=this._edgeObjs[p];return h&&(u=h.v,d=h.w,delete this._edgeLabels[p],delete this._edgeObjs[p],o(this._preds[d],u),o(this._sucs[u],d),delete this._in[d][p],delete this._out[u][p],this._edgeCount--),this},r.prototype.inEdges=function(u,d){var f=this._in[u];if(f){var p=e.values(f);return d?e.filter(p,function(h){return h.v===d}):p}},r.prototype.outEdges=function(u,d){var f=this._out[u];if(f){var p=e.values(f);return d?e.filter(p,function(h){return h.w===d}):p}},r.prototype.nodeEdges=function(u,d){var f=this.inEdges(u,d);if(f)return f.concat(this.outEdges(u,d))};function i(u,d){u[d]?u[d]++:u[d]=1}function o(u,d){--u[d]||delete u[d]}function s(u,d,f,p){var h=""+d,v=""+f;if(!u&&h>v){var g=h;h=v,v=g}return h+a+v+a+(e.isUndefined(p)?t:p)}function l(u,d,f,p){var h=""+d,v=""+f;if(!u&&h>v){var g=h;h=v,v=g}var b={v:h,w:v};return p&&(b.name=p),b}function c(u,d){return s(u,d.v,d.w,d.name)}return fu}var pu,xv;function hO(){return xv||(xv=1,pu="2.1.8"),pu}var hu,Nv;function mO(){return Nv||(Nv=1,hu={Graph:rh(),version:hO()}),hu}var mu,Iv;function vO(){if(Iv)return mu;Iv=1;var e=Mt(),t=rh();mu={write:n,read:i};function n(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:a(o),edges:r(o)};return e.isUndefined(o.graph())||(s.value=e.clone(o.graph())),s}function a(o){return e.map(o.nodes(),function(s){var l=o.node(s),c=o.parent(s),u={v:s};return e.isUndefined(l)||(u.value=l),e.isUndefined(c)||(u.parent=c),u})}function r(o){return e.map(o.edges(),function(s){var l=o.edge(s),c={v:s.v,w:s.w};return e.isUndefined(s.name)||(c.name=s.name),e.isUndefined(l)||(c.value=l),c})}function i(o){var s=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(o.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return mu}var vu,Tv;function gO(){if(Tv)return vu;Tv=1;var e=Mt();vu=t;function t(n){var a={},r=[],i;function o(s){e.has(a,s)||(a[s]=!0,i.push(s),e.each(n.successors(s),o),e.each(n.predecessors(s),o))}return e.each(n.nodes(),function(s){i=[],o(s),i.length&&r.push(i)}),r}return vu}var gu,Pv;function sS(){if(Pv)return gu;Pv=1;var e=Mt();gu=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var a=this._keyIndices[n];if(a!==void 0)return this._arr[a].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,a){var r=this._keyIndices;if(n=String(n),!e.has(r,n)){var i=this._arr,o=i.length;return r[n]=o,i.push({key:n,priority:a}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,a){var r=this._keyIndices[n];if(a>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[r].priority+" New: "+a);this._arr[r].priority=a,this._decrease(r)},t.prototype._heapify=function(n){var a=this._arr,r=2*n,i=r+1,o=n;r<a.length&&(o=a[r].priority<a[o].priority?r:o,i<a.length&&(o=a[i].priority<a[o].priority?i:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var a=this._arr,r=a[n].priority,i;n!==0&&(i=n>>1,!(a[i].priority<r));)this._swap(n,i),n=i},t.prototype._swap=function(n,a){var r=this._arr,i=this._keyIndices,o=r[n],s=r[a];r[n]=s,r[a]=o,i[s.key]=n,i[o.key]=a},gu}var yu,Rv;function lS(){if(Rv)return yu;Rv=1;var e=Mt(),t=sS();yu=a;var n=e.constant(1);function a(i,o,s,l){return r(i,String(o),s||n,l||function(c){return i.outEdges(c)})}function r(i,o,s,l){var c={},u=new t,d,f,p=function(h){var v=h.v!==d?h.v:h.w,g=c[v],b=s(h),E=f.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+b);E<g.distance&&(g.distance=E,g.predecessor=d,u.decrease(v,E))};for(i.nodes().forEach(function(h){var v=h===o?0:Number.POSITIVE_INFINITY;c[h]={distance:v},u.add(h,v)});u.size()>0&&(d=u.removeMin(),f=c[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(p);return c}return yu}var bu,Av;function yO(){if(Av)return bu;Av=1;var e=lS(),t=Mt();bu=n;function n(a,r,i){return t.transform(a.nodes(),function(o,s){o[s]=e(a,s,r,i)},{})}return bu}var wu,kv;function uS(){if(kv)return wu;kv=1;var e=Mt();wu=t;function t(n){var a=0,r=[],i={},o=[];function s(l){var c=i[l]={onStack:!0,lowlink:a,index:a++};if(r.push(l),n.successors(l).forEach(function(f){e.has(i,f)?i[f].onStack&&(c.lowlink=Math.min(c.lowlink,i[f].index)):(s(f),c.lowlink=Math.min(c.lowlink,i[f].lowlink))}),c.lowlink===c.index){var u=[],d;do d=r.pop(),i[d].onStack=!1,u.push(d);while(l!==d);o.push(u)}}return n.nodes().forEach(function(l){e.has(i,l)||s(l)}),o}return wu}var Su,$v;function bO(){if($v)return Su;$v=1;var e=Mt(),t=uS();Su=n;function n(a){return e.filter(t(a),function(r){return r.length>1||r.length===1&&a.hasEdge(r[0],r[0])})}return Su}var _u,qv;function wO(){if(qv)return _u;qv=1;var e=Mt();_u=n;var t=e.constant(1);function n(r,i,o){return a(r,i||t,o||function(s){return r.outEdges(s)})}function a(r,i,o){var s={},l=r.nodes();return l.forEach(function(c){s[c]={},s[c][c]={distance:0},l.forEach(function(u){c!==u&&(s[c][u]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(u){var d=u.v===c?u.w:u.v,f=i(u);s[c][d]={distance:f,predecessor:c}})}),l.forEach(function(c){var u=s[c];l.forEach(function(d){var f=s[d];l.forEach(function(p){var h=f[c],v=u[p],g=f[p],b=h.distance+v.distance;b<g.distance&&(g.distance=b,g.predecessor=v.predecessor)})})}),s}return _u}var Eu,Ov;function cS(){if(Ov)return Eu;Ov=1;var e=Mt();Eu=t,t.CycleException=n;function t(a){var r={},i={},o=[];function s(l){if(e.has(i,l))throw new n;e.has(r,l)||(i[l]=!0,r[l]=!0,e.each(a.predecessors(l),s),delete i[l],o.push(l))}if(e.each(a.sinks(),s),e.size(r)!==a.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Eu}var Cu,Dv;function SO(){if(Dv)return Cu;Dv=1;var e=cS();Cu=t;function t(n){try{e(n)}catch(a){if(a instanceof e.CycleException)return!1;throw a}return!0}return Cu}var xu,Fv;function dS(){if(Fv)return xu;Fv=1;var e=Mt();xu=t;function t(a,r,i){e.isArray(r)||(r=[r]);var o=(a.isDirected()?a.successors:a.neighbors).bind(a),s=[],l={};return e.each(r,function(c){if(!a.hasNode(c))throw new Error("Graph does not have node: "+c);n(a,c,i==="post",l,o,s)}),s}function n(a,r,i,o,s,l){e.has(o,r)||(o[r]=!0,i||l.push(r),e.each(s(r),function(c){n(a,c,i,o,s,l)}),i&&l.push(r))}return xu}var Nu,Lv;function _O(){if(Lv)return Nu;Lv=1;var e=dS();Nu=t;function t(n,a){return e(n,a,"post")}return Nu}var Iu,Vv;function EO(){if(Vv)return Iu;Vv=1;var e=dS();Iu=t;function t(n,a){return e(n,a,"pre")}return Iu}var Tu,Mv;function CO(){if(Mv)return Tu;Mv=1;var e=Mt(),t=rh(),n=sS();Tu=a;function a(r,i){var o=new t,s={},l=new n,c;function u(f){var p=f.v===c?f.w:f.v,h=l.priority(p);if(h!==void 0){var v=i(f);v<h&&(s[p]=c,l.decrease(p,v))}}if(r.nodeCount()===0)return o;e.each(r.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),o.setNode(f)}),l.decrease(r.nodes()[0],0);for(var d=!1;l.size()>0;){if(c=l.removeMin(),e.has(s,c))o.setEdge(c,s[c]);else{if(d)throw new Error("Input graph is not connected: "+r);d=!0}r.nodeEdges(c).forEach(u)}return o}return Tu}var Pu,Bv;function xO(){return Bv||(Bv=1,Pu={components:gO(),dijkstra:lS(),dijkstraAll:yO(),findCycles:bO(),floydWarshall:wO(),isAcyclic:SO(),postorder:_O(),preorder:EO(),prim:CO(),tarjan:uS(),topsort:cS()}),Pu}var Ru,Uv;function NO(){if(Uv)return Ru;Uv=1;var e=mO();return Ru={Graph:e.Graph,json:vO(),alg:xO(),version:e.version},Ru}var Ho;if(typeof ks=="function")try{Ho=NO()}catch{}Ho||(Ho=window.graphlib);var Gt=Ho,IO=Tp,TO=In,PO=A1,RO=_i;function AO(e,t,n){if(!RO(n))return!1;var a=typeof t;return(a=="number"?TO(n)&&PO(t,n.length):a=="string"&&t in n)?IO(n[t],e):!1}var el=AO,kO=tn,$O=Tp,qO=el,OO=$s,fS=Object.prototype,DO=fS.hasOwnProperty,FO=kO(function(e,t){e=Object(e);var n=-1,a=t.length,r=a>2?t[2]:void 0;for(r&&qO(t[0],t[1],r)&&(a=1);++n<a;)for(var i=t[n],o=OO(i),s=-1,l=o.length;++s<l;){var c=o[s],u=e[c];(u===void 0||$O(u,fS[c])&&!DO.call(e,c))&&(e[c]=i[c])}return e}),pS=FO,Au,zv;function LO(){if(zv)return Au;zv=1;var e=Zr,t=In,n=Ip;function a(r){return function(i,o,s){var l=Object(i);if(!t(i)){var c=e(o);i=n(i),o=function(d){return c(l[d],d,l)}}var u=r(i,o,s);return u>-1?l[c?i[u]:u]:void 0}}return Au=a,Au}var ku,Hv;function hS(){if(Hv)return ku;Hv=1;var e=B1,t=1/0,n=17976931348623157e292;function a(r){if(!r)return r===0?r:0;if(r=e(r),r===t||r===-t){var i=r<0?-1:1;return i*n}return r===r?r:0}return ku=a,ku}var $u,Wv;function VO(){if(Wv)return $u;Wv=1;var e=hS();function t(n){var a=e(n),r=a%1;return a===a?r?a-r:a:0}return $u=t,$u}var qu,jv;function MO(){if(jv)return qu;jv=1;var e=m1,t=Zr,n=VO(),a=Math.max;function r(i,o,s){var l=i==null?0:i.length;if(!l)return-1;var c=s==null?0:n(s);return c<0&&(c=a(l+c,0)),e(i,t(o),c)}return qu=r,qu}var Ou,Qv;function BO(){if(Qv)return Ou;Qv=1;var e=LO(),t=MO(),n=e(t);return Ou=n,Ou}var UO=Zs;function zO(e){var t=e==null?0:e.length;return t?UO(e,1):[]}var nh=zO,Du,Gv;function HO(){if(Gv)return Du;Gv=1;var e=kb,t=j0,n=$s;function a(r,i){return r==null?r:e(r,t(i),n)}return Du=a,Du}function WO(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var mS=WO,Fu,Yv;function ah(){if(Yv)return Fu;Yv=1;var e=$b;function t(n,a,r){for(var i=-1,o=n.length;++i<o;){var s=n[i],l=a(s);if(l!=null&&(c===void 0?l===l&&!e(l):r(l,c)))var c=l,u=s}return u}return Fu=t,Fu}var Lu,Kv;function jO(){if(Kv)return Lu;Kv=1;function e(t,n){return t>n}return Lu=e,Lu}var Vu,Xv;function QO(){if(Xv)return Vu;Xv=1;var e=ah(),t=jO(),n=ma;function a(r){return r&&r.length?e(r,n,t):void 0}return Vu=a,Vu}var GO=k1,YO=Tp;function KO(e,t,n){(n!==void 0&&!YO(e[t],n)||n===void 0&&!(t in e))&&GO(e,t,n)}var vS=KO;function XO(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var gS=XO,ZO=v1,JO=$s;function eD(e){return ZO(e,JO(e))}var tD=eD,Zv=vS,rD=g1,nD=y1,aD=Eb,iD=b1,Jv=Ep,eg=sr,oD=Js,sD=Cp,lD=Np,uD=_i,cD=Pp,dD=xp,tg=gS,fD=tD;function pD(e,t,n,a,r,i,o){var s=tg(e,n),l=tg(t,n),c=o.get(l);if(c){Zv(e,n,c);return}var u=i?i(s,l,n+"",e,t,o):void 0,d=u===void 0;if(d){var f=eg(l),p=!f&&sD(l),h=!f&&!p&&dD(l);u=l,f||p||h?eg(s)?u=s:oD(s)?u=aD(s):p?(d=!1,u=rD(l,!0)):h?(d=!1,u=nD(l,!0)):u=[]:cD(l)||Jv(l)?(u=s,Jv(s)?u=fD(s):(!uD(s)||lD(s))&&(u=iD(l))):d=!1}d&&(o.set(l,u),r(u,l,a,i,o),o.delete(l)),Zv(e,n,u)}var hD=pD,mD=$1,vD=vS,gD=kb,yD=hD,bD=_i,wD=$s,SD=gS;function yS(e,t,n,a,r){e!==t&&gD(t,function(i,o){if(r||(r=new mD),bD(i))yD(e,t,o,n,yS,a,r);else{var s=a?a(SD(e,o),i,o+"",e,t,r):void 0;s===void 0&&(s=i),vD(e,o,s)}},wD)}var ih=yS,_D=tn,ED=el;function CD(e){return _D(function(t,n){var a=-1,r=n.length,i=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(r--,i):void 0,o&&ED(n[0],n[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++a<r;){var s=n[a];s&&e(t,s,a,i)}return t})}var bS=CD,Mu,rg;function xD(){if(rg)return Mu;rg=1;var e=ih,t=bS,n=t(function(a,r,i){e(a,r,i)});return Mu=n,Mu}var Bu,ng;function wS(){if(ng)return Bu;ng=1;function e(t,n){return t<n}return Bu=e,Bu}var Uu,ag;function ND(){if(ag)return Uu;ag=1;var e=ah(),t=wS(),n=ma;function a(r){return r&&r.length?e(r,n,t):void 0}return Uu=a,Uu}var zu,ig;function ID(){if(ig)return zu;ig=1;var e=ah(),t=Zr,n=wS();function a(r,i){return r&&r.length?e(r,t(i),n):void 0}return zu=a,zu}var TD=w1,PD=q1;function RD(e,t){return TD(e,t,function(n,a){return PD(e,a)})}var AD=RD,kD=nh,$D=nS,qD=aS;function OD(e){return qD($D(e,void 0,kD),e+"")}var DD=OD,FD=AD,LD=DD,VD=LD(function(e,t){return e==null?{}:FD(e,t)}),SS=VD;const DW=Et(SS);var Hu,og;function MD(){if(og)return Hu;og=1;var e=Math.ceil,t=Math.max;function n(a,r,i,o){for(var s=-1,l=t(e((r-a)/(i||1)),0),c=Array(l);l--;)c[o?l:++s]=a,a+=i;return c}return Hu=n,Hu}var Wu,sg;function BD(){if(sg)return Wu;sg=1;var e=MD(),t=el,n=hS();function a(r){return function(i,o,s){return s&&typeof s!="number"&&t(i,o,s)&&(o=s=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),s=s===void 0?i<o?1:-1:n(s),e(i,o,s,r)}}return Wu=a,Wu}var ju,lg;function UD(){if(lg)return ju;lg=1;var e=BD(),t=e();return ju=t,ju}function zD(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var HD=zD,ug=$b;function WD(e,t){if(e!==t){var n=e!==void 0,a=e===null,r=e===e,i=ug(e),o=t!==void 0,s=t===null,l=t===t,c=ug(t);if(!s&&!c&&!i&&e>t||i&&o&&l&&!s&&!c||a&&o&&l||!n&&l||!r)return 1;if(!a&&!i&&!c&&e<t||c&&n&&r&&!a&&!i||s&&n&&r||!o&&r||!l)return-1}return 0}var jD=WD,QD=jD;function GD(e,t,n){for(var a=-1,r=e.criteria,i=t.criteria,o=r.length,s=n.length;++a<o;){var l=QD(r[a],i[a]);if(l){if(a>=s)return l;var c=n[a];return l*(c=="desc"?-1:1)}}return e.index-t.index}var YD=GD,Qu=Jr,KD=O1,XD=Zr,ZD=Z0,JD=HD,eF=qs,tF=YD,rF=ma,nF=sr;function aF(e,t,n){t.length?t=Qu(t,function(i){return nF(i)?function(o){return KD(o,i.length===1?i[0]:i)}:i}):t=[rF];var a=-1;t=Qu(t,eF(XD));var r=ZD(e,function(i,o,s){var l=Qu(t,function(c){return c(i)});return{criteria:l,index:++a,value:i}});return JD(r,function(i,o){return tF(i,o,n)})}var iF=aF,oF=Zs,sF=iF,lF=tn,cg=el,uF=lF(function(e,t){if(e==null)return[];var n=t.length;return n>1&&cg(e,t[0],t[1])?t=[]:n>2&&cg(t[0],t[1],t[2])&&(t=[t[0]]),sF(e,oF(t,1),[])}),oh=uF,Gu,dg;function cF(){if(dg)return Gu;dg=1;var e=D1,t=0;function n(a){var r=++t;return e(a)+r}return Gu=n,Gu}var Yu,fg;function dF(){if(fg)return Yu;fg=1;function e(t,n,a){for(var r=-1,i=t.length,o=n.length,s={};++r<i;){var l=r<o?n[r]:void 0;a(s,t[r],l)}return s}return Yu=e,Yu}var Ku,pg;function fF(){if(pg)return Ku;pg=1;var e=S1,t=dF();function n(a,r){return t(a||[],r||[],e)}return Ku=n,Ku}var Wo;if(typeof ks=="function")try{Wo={cloneDeep:Cb,constant:eh(),defaults:pS,each:Q0(),filter:G0(),find:BO(),flatten:nh,forEach:th,forIn:HO(),has:Y0(),isUndefined:X0(),last:mS,map:J0(),mapValues:F1,max:QO(),merge:xD(),min:ND(),minBy:ID(),now:U1(),pick:SS,range:UD(),reduce:eS(),sortBy:oh,uniqueId:cF(),values:oS(),zipObject:fF()}}catch{}Wo||(Wo=window._);var Qe=Wo,pF=tl;function tl(){var e={};e._next=e._prev=e,this._sentinel=e}tl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return _S(t),t};tl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&_S(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};tl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,hF)),n=n._prev;return"["+e.join(", ")+"]"};function _S(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function hF(e,t){if(e!=="_next"&&e!=="_prev")return t}var yr=Qe,mF=Gt.Graph,vF=pF,gF=bF,yF=yr.constant(1);function bF(e,t){if(e.nodeCount()<=1)return[];var n=SF(e,t||yF),a=wF(n.graph,n.buckets,n.zeroIdx);return yr.flatten(yr.map(a,function(r){return e.outEdges(r.v,r.w)}),!0)}function wF(e,t,n){for(var a=[],r=t[t.length-1],i=t[0],o;e.nodeCount();){for(;o=i.dequeue();)Xu(e,t,n,o);for(;o=r.dequeue();)Xu(e,t,n,o);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(o=t[s].dequeue(),o){a=a.concat(Xu(e,t,n,o,!0));break}}}return a}function Xu(e,t,n,a,r){var i=r?[]:void 0;return yr.forEach(e.inEdges(a.v),function(o){var s=e.edge(o),l=e.node(o.v);r&&i.push({v:o.v,w:o.w}),l.out-=s,yd(t,n,l)}),yr.forEach(e.outEdges(a.v),function(o){var s=e.edge(o),l=o.w,c=e.node(l);c.in-=s,yd(t,n,c)}),e.removeNode(a.v),i}function SF(e,t){var n=new mF,a=0,r=0;yr.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),yr.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,c=t(s),u=l+c;n.setEdge(s.v,s.w,u),r=Math.max(r,n.node(s.v).out+=c),a=Math.max(a,n.node(s.w).in+=c)});var i=yr.range(r+a+3).map(function(){return new vF}),o=a+1;return yr.forEach(n.nodes(),function(s){yd(i,o,n.node(s))}),{graph:n,buckets:i,zeroIdx:o}}function yd(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var dn=Qe,_F=gF,EF={run:CF,undo:NF};function CF(e){var t=e.graph().acyclicer==="greedy"?_F(e,n(e)):xF(e);dn.forEach(t,function(a){var r=e.edge(a);e.removeEdge(a),r.forwardName=a.name,r.reversed=!0,e.setEdge(a.w,a.v,r,dn.uniqueId("rev"))});function n(a){return function(r){return a.edge(r).weight}}}function xF(e){var t=[],n={},a={};function r(i){dn.has(a,i)||(a[i]=!0,n[i]=!0,dn.forEach(e.outEdges(i),function(o){dn.has(n,o.w)?t.push(o):r(o.w)}),delete n[i])}return dn.forEach(e.nodes(),r),t}function NF(e){dn.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var a=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,a)}})}var Ae=Qe,ES=Gt.Graph,St={addDummyNode:CS,simplify:IF,asNonCompoundGraph:TF,successorWeights:PF,predecessorWeights:RF,intersectRect:AF,buildLayerMatrix:kF,normalizeRanks:$F,removeEmptyRanks:qF,addBorderNode:OF,maxRank:xS,partition:DF,time:FF,notime:LF};function CS(e,t,n,a){var r;do r=Ae.uniqueId(a);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function IF(e){var t=new ES().setGraph(e.graph());return Ae.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),Ae.forEach(e.edges(),function(n){var a=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:a.weight+r.weight,minlen:Math.max(a.minlen,r.minlen)})}),t}function TF(e){var t=new ES({multigraph:e.isMultigraph()}).setGraph(e.graph());return Ae.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),Ae.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function PF(e){var t=Ae.map(e.nodes(),function(n){var a={};return Ae.forEach(e.outEdges(n),function(r){a[r.w]=(a[r.w]||0)+e.edge(r).weight}),a});return Ae.zipObject(e.nodes(),t)}function RF(e){var t=Ae.map(e.nodes(),function(n){var a={};return Ae.forEach(e.inEdges(n),function(r){a[r.v]=(a[r.v]||0)+e.edge(r).weight}),a});return Ae.zipObject(e.nodes(),t)}function AF(e,t){var n=e.x,a=e.y,r=t.x-n,i=t.y-a,o=e.width/2,s=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(i)*o>Math.abs(r)*s?(i<0&&(s=-s),l=s*r/i,c=s):(r<0&&(o=-o),l=o,c=o*i/r),{x:n+l,y:a+c}}function kF(e){var t=Ae.map(Ae.range(xS(e)+1),function(){return[]});return Ae.forEach(e.nodes(),function(n){var a=e.node(n),r=a.rank;Ae.isUndefined(r)||(t[r][a.order]=n)}),t}function $F(e){var t=Ae.min(Ae.map(e.nodes(),function(n){return e.node(n).rank}));Ae.forEach(e.nodes(),function(n){var a=e.node(n);Ae.has(a,"rank")&&(a.rank-=t)})}function qF(e){var t=Ae.min(Ae.map(e.nodes(),function(i){return e.node(i).rank})),n=[];Ae.forEach(e.nodes(),function(i){var o=e.node(i).rank-t;n[o]||(n[o]=[]),n[o].push(i)});var a=0,r=e.graph().nodeRankFactor;Ae.forEach(n,function(i,o){Ae.isUndefined(i)&&o%r!==0?--a:a&&Ae.forEach(i,function(s){e.node(s).rank+=a})})}function OF(e,t,n,a){var r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=a),CS(e,"border",r,t)}function xS(e){return Ae.max(Ae.map(e.nodes(),function(t){var n=e.node(t).rank;if(!Ae.isUndefined(n))return n}))}function DF(e,t){var n={lhs:[],rhs:[]};return Ae.forEach(e,function(a){t(a)?n.lhs.push(a):n.rhs.push(a)}),n}function FF(e,t){var n=Ae.now();try{return t()}finally{console.log(e+" time: "+(Ae.now()-n)+"ms")}}function LF(e,t){return t()}var NS=Qe,VF=St,MF={run:BF,undo:zF};function BF(e){e.graph().dummyChains=[],NS.forEach(e.edges(),function(t){UF(e,t)})}function UF(e,t){var n=t.v,a=e.node(n).rank,r=t.w,i=e.node(r).rank,o=t.name,s=e.edge(t),l=s.labelRank;if(i!==a+1){e.removeEdge(t);var c,u,d;for(d=0,++a;a<i;++d,++a)s.points=[],u={width:0,height:0,edgeLabel:s,edgeObj:t,rank:a},c=VF.addDummyNode(e,"edge",u,"_d"),a===l&&(u.width=s.width,u.height=s.height,u.dummy="edge-label",u.labelpos=s.labelpos),e.setEdge(n,c,{weight:s.weight},o),d===0&&e.graph().dummyChains.push(c),n=c;e.setEdge(n,r,{weight:s.weight},o)}}function zF(e){NS.forEach(e.graph().dummyChains,function(t){var n=e.node(t),a=n.edgeLabel,r;for(e.setEdge(n.edgeObj,a);n.dummy;)r=e.successors(t)[0],e.removeNode(t),a.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height),t=r,n=e.node(t)})}var to=Qe,rl={longestPath:HF,slack:WF};function HF(e){var t={};function n(a){var r=e.node(a);if(to.has(t,a))return r.rank;t[a]=!0;var i=to.min(to.map(e.outEdges(a),function(o){return n(o.w)-e.edge(o).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),r.rank=i}to.forEach(e.sources(),n)}function WF(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var jo=Qe,jF=Gt.Graph,Qo=rl.slack,IS=QF;function QF(e){var t=new jF({directed:!1}),n=e.nodes()[0],a=e.nodeCount();t.setNode(n,{});for(var r,i;GF(t,e)<a;)r=YF(t,e),i=t.hasNode(r.v)?Qo(e,r):-Qo(e,r),KF(t,e,i);return t}function GF(e,t){function n(a){jo.forEach(t.nodeEdges(a),function(r){var i=r.v,o=a===i?r.w:i;!e.hasNode(o)&&!Qo(t,r)&&(e.setNode(o,{}),e.setEdge(a,o,{}),n(o))})}return jo.forEach(e.nodes(),n),e.nodeCount()}function YF(e,t){return jo.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Qo(t,n)})}function KF(e,t,n){jo.forEach(e.nodes(),function(a){t.node(a).rank+=n})}var Er=Qe,XF=IS,ZF=rl.slack,JF=rl.longestPath,e2=Gt.alg.preorder,t2=Gt.alg.postorder,r2=St.simplify,n2=Pn;Pn.initLowLimValues=lh;Pn.initCutValues=sh;Pn.calcCutValue=TS;Pn.leaveEdge=RS;Pn.enterEdge=AS;Pn.exchangeEdges=kS;function Pn(e){e=r2(e),JF(e);var t=XF(e);lh(t),sh(t,e);for(var n,a;n=RS(t);)a=AS(t,e,n),kS(t,e,n,a)}function sh(e,t){var n=t2(e,e.nodes());n=n.slice(0,n.length-1),Er.forEach(n,function(a){a2(e,t,a)})}function a2(e,t,n){var a=e.node(n),r=a.parent;e.edge(n,r).cutvalue=TS(e,t,n)}function TS(e,t,n){var a=e.node(n),r=a.parent,i=!0,o=t.edge(n,r),s=0;return o||(i=!1,o=t.edge(r,n)),s=o.weight,Er.forEach(t.nodeEdges(n),function(l){var c=l.v===n,u=c?l.w:l.v;if(u!==r){var d=c===i,f=t.edge(l).weight;if(s+=d?f:-f,o2(e,n,u)){var p=e.edge(n,u).cutvalue;s+=d?-p:p}}}),s}function lh(e,t){arguments.length<2&&(t=e.nodes()[0]),PS(e,{},1,t)}function PS(e,t,n,a,r){var i=n,o=e.node(a);return t[a]=!0,Er.forEach(e.neighbors(a),function(s){Er.has(t,s)||(n=PS(e,t,n,s,a))}),o.low=i,o.lim=n++,r?o.parent=r:delete o.parent,n}function RS(e){return Er.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function AS(e,t,n){var a=n.v,r=n.w;t.hasEdge(a,r)||(a=n.w,r=n.v);var i=e.node(a),o=e.node(r),s=i,l=!1;i.lim>o.lim&&(s=o,l=!0);var c=Er.filter(t.edges(),function(u){return l===hg(e,e.node(u.v),s)&&l!==hg(e,e.node(u.w),s)});return Er.minBy(c,function(u){return ZF(t,u)})}function kS(e,t,n,a){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(a.v,a.w,{}),lh(e),sh(e,t),i2(e,t)}function i2(e,t){var n=Er.find(e.nodes(),function(r){return!t.node(r).parent}),a=e2(e,n);a=a.slice(1),Er.forEach(a,function(r){var i=e.node(r).parent,o=t.edge(r,i),s=!1;o||(o=t.edge(i,r),s=!0),t.node(r).rank=t.node(i).rank+(s?o.minlen:-o.minlen)})}function o2(e,t,n){return e.hasEdge(t,n)}function hg(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var s2=rl,$S=s2.longestPath,l2=IS,u2=n2,c2=d2;function d2(e){switch(e.graph().ranker){case"network-simplex":mg(e);break;case"tight-tree":p2(e);break;case"longest-path":f2(e);break;default:mg(e)}}var f2=$S;function p2(e){$S(e),l2(e)}function mg(e){u2(e)}var bd=Qe,h2=m2;function m2(e){var t=g2(e);bd.forEach(e.graph().dummyChains,function(n){for(var a=e.node(n),r=a.edgeObj,i=v2(e,t,r.v,r.w),o=i.path,s=i.lca,l=0,c=o[l],u=!0;n!==r.w;){if(a=e.node(n),u){for(;(c=o[l])!==s&&e.node(c).maxRank<a.rank;)l++;c===s&&(u=!1)}if(!u){for(;l<o.length-1&&e.node(c=o[l+1]).minRank<=a.rank;)l++;c=o[l]}e.setParent(n,c),n=e.successors(n)[0]}})}function v2(e,t,n,a){var r=[],i=[],o=Math.min(t[n].low,t[a].low),s=Math.max(t[n].lim,t[a].lim),l,c;l=n;do l=e.parent(l),r.push(l);while(l&&(t[l].low>o||s>t[l].lim));for(c=l,l=a;(l=e.parent(l))!==c;)i.push(l);return{path:r.concat(i.reverse()),lca:c}}function g2(e){var t={},n=0;function a(r){var i=n;bd.forEach(e.children(r),a),t[r]={low:i,lim:n++}}return bd.forEach(e.children(),a),t}var br=Qe,wd=St,y2={run:b2,cleanup:_2};function b2(e){var t=wd.addDummyNode(e,"root",{},"_root"),n=w2(e),a=br.max(br.values(n))-1,r=2*a+1;e.graph().nestingRoot=t,br.forEach(e.edges(),function(o){e.edge(o).minlen*=r});var i=S2(e)+1;br.forEach(e.children(),function(o){qS(e,t,r,i,a,n,o)}),e.graph().nodeRankFactor=r}function qS(e,t,n,a,r,i,o){var s=e.children(o);if(!s.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}var l=wd.addBorderNode(e,"_bt"),c=wd.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(l,o),u.borderTop=l,e.setParent(c,o),u.borderBottom=c,br.forEach(s,function(d){qS(e,t,n,a,r,i,d);var f=e.node(d),p=f.borderTop?f.borderTop:d,h=f.borderBottom?f.borderBottom:d,v=f.borderTop?a:2*a,g=p!==h?1:r-i[o]+1;e.setEdge(l,p,{weight:v,minlen:g,nestingEdge:!0}),e.setEdge(h,c,{weight:v,minlen:g,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,l,{weight:0,minlen:r+i[o]})}function w2(e){var t={};function n(a,r){var i=e.children(a);i&&i.length&&br.forEach(i,function(o){n(o,r+1)}),t[a]=r}return br.forEach(e.children(),function(a){n(a,1)}),t}function S2(e){return br.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function _2(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,br.forEach(e.edges(),function(n){var a=e.edge(n);a.nestingEdge&&e.removeEdge(n)})}var Zu=Qe,E2=St,C2=x2;function x2(e){function t(n){var a=e.children(n),r=e.node(n);if(a.length&&Zu.forEach(a,t),Zu.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var i=r.minRank,o=r.maxRank+1;i<o;++i)vg(e,"borderLeft","_bl",n,r,i),vg(e,"borderRight","_br",n,r,i)}}Zu.forEach(e.children(),t)}function vg(e,t,n,a,r,i){var o={width:0,height:0,rank:i,borderType:t},s=r[t][i-1],l=E2.addDummyNode(e,"border",o,n);r[t][i]=l,e.setParent(l,a),s&&e.setEdge(s,l,{weight:1})}var rr=Qe,N2={adjust:I2,undo:T2};function I2(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&OS(e)}function T2(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&P2(e),(t==="lr"||t==="rl")&&(R2(e),OS(e))}function OS(e){rr.forEach(e.nodes(),function(t){gg(e.node(t))}),rr.forEach(e.edges(),function(t){gg(e.edge(t))})}function gg(e){var t=e.width;e.width=e.height,e.height=t}function P2(e){rr.forEach(e.nodes(),function(t){Ju(e.node(t))}),rr.forEach(e.edges(),function(t){var n=e.edge(t);rr.forEach(n.points,Ju),rr.has(n,"y")&&Ju(n)})}function Ju(e){e.y=-e.y}function R2(e){rr.forEach(e.nodes(),function(t){ec(e.node(t))}),rr.forEach(e.edges(),function(t){var n=e.edge(t);rr.forEach(n.points,ec),rr.has(n,"x")&&ec(n)})}function ec(e){var t=e.x;e.x=e.y,e.y=t}var hr=Qe,A2=k2;function k2(e){var t={},n=hr.filter(e.nodes(),function(s){return!e.children(s).length}),a=hr.max(hr.map(n,function(s){return e.node(s).rank})),r=hr.map(hr.range(a+1),function(){return[]});function i(s){if(!hr.has(t,s)){t[s]=!0;var l=e.node(s);r[l.rank].push(s),hr.forEach(e.successors(s),i)}}var o=hr.sortBy(n,function(s){return e.node(s).rank});return hr.forEach(o,i),r}var Ar=Qe,$2=q2;function q2(e,t){for(var n=0,a=1;a<t.length;++a)n+=O2(e,t[a-1],t[a]);return n}function O2(e,t,n){for(var a=Ar.zipObject(n,Ar.map(n,function(c,u){return u})),r=Ar.flatten(Ar.map(t,function(c){return Ar.sortBy(Ar.map(e.outEdges(c),function(u){return{pos:a[u.w],weight:e.edge(u).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var o=2*i-1;i-=1;var s=Ar.map(new Array(o),function(){return 0}),l=0;return Ar.forEach(r.forEach(function(c){var u=c.pos+i;s[u]+=c.weight;for(var d=0;u>0;)u%2&&(d+=s[u+1]),u=u-1>>1,s[u]+=c.weight;l+=c.weight*d})),l}var yg=Qe,D2=F2;function F2(e,t){return yg.map(t,function(n){var a=e.inEdges(n);if(a.length){var r=yg.reduce(a,function(i,o){var s=e.edge(o),l=e.node(o.v);return{sum:i.sum+s.weight*l.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}var Tt=Qe,L2=V2;function V2(e,t){var n={};Tt.forEach(e,function(r,i){var o=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};Tt.isUndefined(r.barycenter)||(o.barycenter=r.barycenter,o.weight=r.weight)}),Tt.forEach(t.edges(),function(r){var i=n[r.v],o=n[r.w];!Tt.isUndefined(i)&&!Tt.isUndefined(o)&&(o.indegree++,i.out.push(n[r.w]))});var a=Tt.filter(n,function(r){return!r.indegree});return M2(a)}function M2(e){var t=[];function n(i){return function(o){o.merged||(Tt.isUndefined(o.barycenter)||Tt.isUndefined(i.barycenter)||o.barycenter>=i.barycenter)&&B2(i,o)}}function a(i){return function(o){o.in.push(i),--o.indegree===0&&e.push(o)}}for(;e.length;){var r=e.pop();t.push(r),Tt.forEach(r.in.reverse(),n(r)),Tt.forEach(r.out,a(r))}return Tt.map(Tt.filter(t,function(i){return!i.merged}),function(i){return Tt.pick(i,["vs","i","barycenter","weight"])})}function B2(e,t){var n=0,a=0;e.weight&&(n+=e.barycenter*e.weight,a+=e.weight),t.weight&&(n+=t.barycenter*t.weight,a+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/a,e.weight=a,e.i=Math.min(t.i,e.i),t.merged=!0}var Fa=Qe,U2=St,z2=H2;function H2(e,t){var n=U2.partition(e,function(u){return Fa.has(u,"barycenter")}),a=n.lhs,r=Fa.sortBy(n.rhs,function(u){return-u.i}),i=[],o=0,s=0,l=0;a.sort(W2(!!t)),l=bg(i,r,l),Fa.forEach(a,function(u){l+=u.vs.length,i.push(u.vs),o+=u.barycenter*u.weight,s+=u.weight,l=bg(i,r,l)});var c={vs:Fa.flatten(i,!0)};return s&&(c.barycenter=o/s,c.weight=s),c}function bg(e,t,n){for(var a;t.length&&(a=Fa.last(t)).i<=n;)t.pop(),e.push(a.vs),n++;return n}function W2(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Vr=Qe,j2=D2,Q2=L2,G2=z2,Y2=DS;function DS(e,t,n,a){var r=e.children(t),i=e.node(t),o=i?i.borderLeft:void 0,s=i?i.borderRight:void 0,l={};o&&(r=Vr.filter(r,function(h){return h!==o&&h!==s}));var c=j2(e,r);Vr.forEach(c,function(h){if(e.children(h.v).length){var v=DS(e,h.v,n,a);l[h.v]=v,Vr.has(v,"barycenter")&&X2(h,v)}});var u=Q2(c,n);K2(u,l);var d=G2(u,a);if(o&&(d.vs=Vr.flatten([o,d.vs,s],!0),e.predecessors(o).length)){var f=e.node(e.predecessors(o)[0]),p=e.node(e.predecessors(s)[0]);Vr.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d}function K2(e,t){Vr.forEach(e,function(n){n.vs=Vr.flatten(n.vs.map(function(a){return t[a]?t[a].vs:a}),!0)})}function X2(e,t){Vr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var La=Qe,Z2=Gt.Graph,J2=eL;function eL(e,t,n){var a=tL(e),r=new Z2({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(i){return e.node(i)});return La.forEach(e.nodes(),function(i){var o=e.node(i),s=e.parent(i);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(r.setNode(i),r.setParent(i,s||a),La.forEach(e[n](i),function(l){var c=l.v===i?l.w:l.v,u=r.edge(c,i),d=La.isUndefined(u)?0:u.weight;r.setEdge(c,i,{weight:e.edge(l).weight+d})}),La.has(o,"minRank")&&r.setNode(i,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),r}function tL(e){for(var t;e.hasNode(t=La.uniqueId("_root")););return t}var rL=Qe,nL=aL;function aL(e,t,n){var a={},r;rL.forEach(n,function(i){for(var o=e.parent(i),s,l;o;){if(s=e.parent(o),s?(l=a[s],a[s]=o):(l=r,r=o),l&&l!==o){t.setEdge(l,o);return}o=s}})}var Wr=Qe,iL=A2,oL=$2,sL=Y2,lL=J2,uL=nL,cL=Gt.Graph,wg=St,dL=fL;function fL(e){var t=wg.maxRank(e),n=Sg(e,Wr.range(1,t+1),"inEdges"),a=Sg(e,Wr.range(t-1,-1,-1),"outEdges"),r=iL(e);_g(e,r);for(var i=Number.POSITIVE_INFINITY,o,s=0,l=0;l<4;++s,++l){pL(s%2?n:a,s%4>=2),r=wg.buildLayerMatrix(e);var c=oL(e,r);c<i&&(l=0,o=Wr.cloneDeep(r),i=c)}_g(e,o)}function Sg(e,t,n){return Wr.map(t,function(a){return lL(e,a,n)})}function pL(e,t){var n=new cL;Wr.forEach(e,function(a){var r=a.graph().root,i=sL(a,r,n,t);Wr.forEach(i.vs,function(o,s){a.node(o).order=s}),uL(a,n,i.vs)})}function _g(e,t){Wr.forEach(t,function(n){Wr.forEach(n,function(a,r){e.node(a).order=r})})}var ge=Qe,hL=Gt.Graph,mL=St,vL={positionX:bL,findType1Conflicts:FS,findType2Conflicts:LS,addConflict:uh,hasConflict:VS,verticalAlignment:MS,horizontalCompaction:BS,alignCoordinates:zS,findSmallestWidthAlignment:US,balance:HS};function FS(e,t){var n={};function a(r,i){var o=0,s=0,l=r.length,c=ge.last(i);return ge.forEach(i,function(u,d){var f=gL(e,u),p=f?e.node(f).order:l;(f||u===c)&&(ge.forEach(i.slice(s,d+1),function(h){ge.forEach(e.predecessors(h),function(v){var g=e.node(v),b=g.order;(b<o||p<b)&&!(g.dummy&&e.node(h).dummy)&&uh(n,v,h)})}),s=d+1,o=p)}),i}return ge.reduce(t,a),n}function LS(e,t){var n={};function a(i,o,s,l,c){var u;ge.forEach(ge.range(o,s),function(d){u=i[d],e.node(u).dummy&&ge.forEach(e.predecessors(u),function(f){var p=e.node(f);p.dummy&&(p.order<l||p.order>c)&&uh(n,f,u)})})}function r(i,o){var s=-1,l,c=0;return ge.forEach(o,function(u,d){if(e.node(u).dummy==="border"){var f=e.predecessors(u);f.length&&(l=e.node(f[0]).order,a(o,c,d,s,l),c=d,s=l)}a(o,c,o.length,l,i.length)}),o}return ge.reduce(t,r),n}function gL(e,t){if(e.node(t).dummy)return ge.find(e.predecessors(t),function(n){return e.node(n).dummy})}function uh(e,t,n){if(t>n){var a=t;t=n,n=a}var r=e[t];r||(e[t]=r={}),r[n]=!0}function VS(e,t,n){if(t>n){var a=t;t=n,n=a}return ge.has(e[t],n)}function MS(e,t,n,a){var r={},i={},o={};return ge.forEach(t,function(s){ge.forEach(s,function(l,c){r[l]=l,i[l]=l,o[l]=c})}),ge.forEach(t,function(s){var l=-1;ge.forEach(s,function(c){var u=a(c);if(u.length){u=ge.sortBy(u,function(v){return o[v]});for(var d=(u.length-1)/2,f=Math.floor(d),p=Math.ceil(d);f<=p;++f){var h=u[f];i[c]===c&&l<o[h]&&!VS(n,c,h)&&(i[h]=c,i[c]=r[c]=r[h],l=o[h])}}})}),{root:r,align:i}}function BS(e,t,n,a,r){var i={},o=yL(e,t,n,r),s=r?"borderLeft":"borderRight";function l(d,f){for(var p=o.nodes(),h=p.pop(),v={};h;)v[h]?d(h):(v[h]=!0,p.push(h),p=p.concat(f(h))),h=p.pop()}function c(d){i[d]=o.inEdges(d).reduce(function(f,p){return Math.max(f,i[p.v]+o.edge(p))},0)}function u(d){var f=o.outEdges(d).reduce(function(h,v){return Math.min(h,i[v.w]-o.edge(v))},Number.POSITIVE_INFINITY),p=e.node(d);f!==Number.POSITIVE_INFINITY&&p.borderType!==s&&(i[d]=Math.max(i[d],f))}return l(c,o.predecessors.bind(o)),l(u,o.successors.bind(o)),ge.forEach(a,function(d){i[d]=i[n[d]]}),i}function yL(e,t,n,a){var r=new hL,i=e.graph(),o=wL(i.nodesep,i.edgesep,a);return ge.forEach(t,function(s){var l;ge.forEach(s,function(c){var u=n[c];if(r.setNode(u),l){var d=n[l],f=r.edge(d,u);r.setEdge(d,u,Math.max(o(e,c,l),f||0))}l=c})}),r}function US(e,t){return ge.minBy(ge.values(t),function(n){var a=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return ge.forIn(n,function(i,o){var s=SL(e,o)/2;a=Math.max(i+s,a),r=Math.min(i-s,r)}),a-r})}function zS(e,t){var n=ge.values(t),a=ge.min(n),r=ge.max(n);ge.forEach(["u","d"],function(i){ge.forEach(["l","r"],function(o){var s=i+o,l=e[s],c;if(l!==t){var u=ge.values(l);c=o==="l"?a-ge.min(u):r-ge.max(u),c&&(e[s]=ge.mapValues(l,function(d){return d+c}))}})})}function HS(e,t){return ge.mapValues(e.ul,function(n,a){if(t)return e[t.toLowerCase()][a];var r=ge.sortBy(ge.map(e,a));return(r[1]+r[2])/2})}function bL(e){var t=mL.buildLayerMatrix(e),n=ge.merge(FS(e,t),LS(e,t)),a={},r;ge.forEach(["u","d"],function(o){r=o==="u"?t:ge.values(t).reverse(),ge.forEach(["l","r"],function(s){s==="r"&&(r=ge.map(r,function(d){return ge.values(d).reverse()}));var l=(o==="u"?e.predecessors:e.successors).bind(e),c=MS(e,r,n,l),u=BS(e,r,c.root,c.align,s==="r");s==="r"&&(u=ge.mapValues(u,function(d){return-d})),a[o+s]=u})});var i=US(e,a);return zS(a,i),HS(a,e.graph().align)}function wL(e,t,n){return function(a,r,i){var o=a.node(r),s=a.node(i),l=0,c;if(l+=o.width/2,ge.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=-o.width/2;break;case"r":c=o.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(o.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,ge.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":c=s.width/2;break;case"r":c=-s.width/2;break}return c&&(l+=n?c:-c),c=0,l}}function SL(e,t){return e.node(t).width}var Va=Qe,WS=St,_L=vL.positionX,EL=CL;function CL(e){e=WS.asNonCompoundGraph(e),xL(e),Va.forEach(_L(e),function(t,n){e.node(n).x=t})}function xL(e){var t=WS.buildLayerMatrix(e),n=e.graph().ranksep,a=0;Va.forEach(t,function(r){var i=Va.max(Va.map(r,function(o){return e.node(o).height}));Va.forEach(r,function(o){e.node(o).y=a+i/2}),a+=i+n})}var Se=Qe,Eg=EF,Cg=MF,NL=c2,IL=St.normalizeRanks,TL=h2,PL=St.removeEmptyRanks,xg=y2,RL=C2,Ng=N2,AL=dL,kL=EL,Xr=St,$L=Gt.Graph,qL=OL;function OL(e,t){var n=t&&t.debugTiming?Xr.time:Xr.notime;n("layout",function(){var a=n("  buildLayoutGraph",function(){return jL(e)});n("  runLayout",function(){DL(a,n)}),n("  updateInputGraph",function(){FL(e,a)})})}function DL(e,t){t("    makeSpaceForEdgeLabels",function(){QL(e)}),t("    removeSelfEdges",function(){rV(e)}),t("    acyclic",function(){Eg.run(e)}),t("    nestingGraph.run",function(){xg.run(e)}),t("    rank",function(){NL(Xr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){GL(e)}),t("    removeEmptyRanks",function(){PL(e)}),t("    nestingGraph.cleanup",function(){xg.cleanup(e)}),t("    normalizeRanks",function(){IL(e)}),t("    assignRankMinMax",function(){YL(e)}),t("    removeEdgeLabelProxies",function(){KL(e)}),t("    normalize.run",function(){Cg.run(e)}),t("    parentDummyChains",function(){TL(e)}),t("    addBorderSegments",function(){RL(e)}),t("    order",function(){AL(e)}),t("    insertSelfEdges",function(){nV(e)}),t("    adjustCoordinateSystem",function(){Ng.adjust(e)}),t("    position",function(){kL(e)}),t("    positionSelfEdges",function(){aV(e)}),t("    removeBorderNodes",function(){tV(e)}),t("    normalize.undo",function(){Cg.undo(e)}),t("    fixupEdgeLabelCoords",function(){JL(e)}),t("    undoCoordinateSystem",function(){Ng.undo(e)}),t("    translateGraph",function(){XL(e)}),t("    assignNodeIntersects",function(){ZL(e)}),t("    reversePoints",function(){eV(e)}),t("    acyclic.undo",function(){Eg.undo(e)})}function FL(e,t){Se.forEach(e.nodes(),function(n){var a=e.node(n),r=t.node(n);a&&(a.x=r.x,a.y=r.y,t.children(n).length&&(a.width=r.width,a.height=r.height))}),Se.forEach(e.edges(),function(n){var a=e.edge(n),r=t.edge(n);a.points=r.points,Se.has(r,"x")&&(a.x=r.x,a.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var LL=["nodesep","edgesep","ranksep","marginx","marginy"],VL={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ML=["acyclicer","ranker","rankdir","align"],BL=["width","height"],UL={width:0,height:0},zL=["minlen","weight","width","height","labeloffset"],HL={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},WL=["labelpos"];function jL(e){var t=new $L({multigraph:!0,compound:!0}),n=rc(e.graph());return t.setGraph(Se.merge({},VL,tc(n,LL),Se.pick(n,ML))),Se.forEach(e.nodes(),function(a){var r=rc(e.node(a));t.setNode(a,Se.defaults(tc(r,BL),UL)),t.setParent(a,e.parent(a))}),Se.forEach(e.edges(),function(a){var r=rc(e.edge(a));t.setEdge(a,Se.merge({},HL,tc(r,zL),Se.pick(r,WL)))}),t}function QL(e){var t=e.graph();t.ranksep/=2,Se.forEach(e.edges(),function(n){var a=e.edge(n);a.minlen*=2,a.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})}function GL(e){Se.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var a=e.node(t.v),r=e.node(t.w),i={rank:(r.rank-a.rank)/2+a.rank,e:t};Xr.addDummyNode(e,"edge-proxy",i,"_ep")}})}function YL(e){var t=0;Se.forEach(e.nodes(),function(n){var a=e.node(n);a.borderTop&&(a.minRank=e.node(a.borderTop).rank,a.maxRank=e.node(a.borderBottom).rank,t=Se.max(t,a.maxRank))}),e.graph().maxRank=t}function KL(e){Se.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function XL(e){var t=Number.POSITIVE_INFINITY,n=0,a=Number.POSITIVE_INFINITY,r=0,i=e.graph(),o=i.marginx||0,s=i.marginy||0;function l(c){var u=c.x,d=c.y,f=c.width,p=c.height;t=Math.min(t,u-f/2),n=Math.max(n,u+f/2),a=Math.min(a,d-p/2),r=Math.max(r,d+p/2)}Se.forEach(e.nodes(),function(c){l(e.node(c))}),Se.forEach(e.edges(),function(c){var u=e.edge(c);Se.has(u,"x")&&l(u)}),t-=o,a-=s,Se.forEach(e.nodes(),function(c){var u=e.node(c);u.x-=t,u.y-=a}),Se.forEach(e.edges(),function(c){var u=e.edge(c);Se.forEach(u.points,function(d){d.x-=t,d.y-=a}),Se.has(u,"x")&&(u.x-=t),Se.has(u,"y")&&(u.y-=a)}),i.width=n-t+o,i.height=r-a+s}function ZL(e){Se.forEach(e.edges(),function(t){var n=e.edge(t),a=e.node(t.v),r=e.node(t.w),i,o;n.points?(i=n.points[0],o=n.points[n.points.length-1]):(n.points=[],i=r,o=a),n.points.unshift(Xr.intersectRect(a,i)),n.points.push(Xr.intersectRect(r,o))})}function JL(e){Se.forEach(e.edges(),function(t){var n=e.edge(t);if(Se.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function eV(e){Se.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function tV(e){Se.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),a=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(Se.last(n.borderLeft)),o=e.node(Se.last(n.borderRight));n.width=Math.abs(o.x-i.x),n.height=Math.abs(r.y-a.y),n.x=i.x+n.width/2,n.y=a.y+n.height/2}}),Se.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function rV(e){Se.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function nV(e){var t=Xr.buildLayerMatrix(e);Se.forEach(t,function(n){var a=0;Se.forEach(n,function(r,i){var o=e.node(r);o.order=i+a,Se.forEach(o.selfEdges,function(s){Xr.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:o.rank,order:i+ ++a,e:s.e,label:s.label},"_se")}),delete o.selfEdges})})}function aV(e){Se.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var a=e.node(n.e.v),r=a.x+a.width/2,i=a.y,o=n.x-r,s=a.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*o/3,y:i-s},{x:r+5*o/6,y:i-s},{x:r+o,y:i},{x:r+5*o/6,y:i+s},{x:r+2*o/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})}function tc(e,t){return Se.mapValues(Se.pick(e,t),Number)}function rc(e){var t={};return Se.forEach(e,function(n,a){t[a.toLowerCase()]=n}),t}var ro=Qe,iV=St,oV=Gt.Graph,sV={debugOrdering:lV};function lV(e){var t=iV.buildLayerMatrix(e),n=new oV({compound:!0,multigraph:!0}).setGraph({});return ro.forEach(e.nodes(),function(a){n.setNode(a,{label:a}),n.setParent(a,"layer"+e.node(a).rank)}),ro.forEach(e.edges(),function(a){n.setEdge(a.v,a.w,{},a.name)}),ro.forEach(t,function(a,r){var i="layer"+r;n.setNode(i,{rank:"same"}),ro.reduce(a,function(o,s){return n.setEdge(o,s,{style:"invis"}),s})}),n}var uV="0.8.5",cV={graphlib:Gt,layout:qL,debug:sV,util:{time:St.time,notime:St.notime},version:uV};const jS=Et(cV),dV=()=>L(Q,{children:[m(xe,{variant:"smallText1",className:"description",children:"Undefined"}),m(Nn,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),Sd=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return $.useMemo(()=>L(Q,{children:[m("div",{children:m($e,{icon:"fileOutlined"})}),m("span",{children:n})]}),[n])};try{Sd.displayName="EntityPlaceholderNodeLabel",Sd.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var mt=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(mt||{});const Go=e=>{const{type:t,data:n}=e;let a;switch(t){case"EntityNode":a=m(hd,{...n});break;case"EntityPlaceholderNode":a=m(Sd,{...n});break;case"ExternalNode":a=m(gd,{...n});break;case"ActivityNode":a=m(fd,{...n});break;case"ExpandNode":a=m(md,{...n});break;case"UndefinedNode":a=m(dV,{});break;default:a=L("p",{children:["Unrecognized node type: ",t]});break}const r={label:a,props:n,type:t};return{id:Cr(e),position:{x:100,y:100},data:r,connectable:!1,draggable:!1,className:`${t}`}},QS=(e,t)=>{const n=Cr(e),a=Cr(t);return{id:`${n}-${a}`,source:n,target:a,animated:!0,type:vr.SimpleBezier,markerEnd:{type:ri.ArrowClosed}}},Cr=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},Mn=new jS.graphlib.Graph;Mn.setDefaultEdgeLabel(()=>({}));const Ig=e=>e.data.type=="ExpandNode"?30:100,Tg=e=>e.data.type=="ExpandNode"?30:172,fV=(e,t,n)=>{const a=n==="LR";return Mn.setGraph({rankdir:n}),e.forEach(r=>{Mn.setNode(r.id,{width:Tg(r),height:Ig(r)})}),t.forEach(r=>{Mn.setEdge(r.source,r.target)}),jS.layout(Mn),e.forEach(r=>{const i=Mn.node(r.id);return r.targetPosition=a?re.Left:re.Top,r.sourcePosition=a?re.Right:re.Bottom,r.position={x:i.x-Tg(r)/2,y:i.y-Ig(r)/2},r}),{nodes:e,edges:t}},Pg=(e,t)=>z1(e,t,$a).length==0;try{Go.displayName="getProvenanceNode",Go.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{Cr.displayName="getNodeId",Cr.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const Rg=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(r=>t.id==r.id&&t.versionNumber==r.versionNumber))!==void 0},GS=(e,t)=>t.find(a=>a.id===Cr(e))===void 0,pV=(e,t)=>{const n={type:mt.ENTITY,data:e};return t.find(a=>a.id===Cr(n))},hV=(e,t,n)=>n.find(r=>r.source===Cr(e)&&r.target===Cr(t))===void 0,Pi=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:a,edgesCopy:r}=e;GS(t,a)&&a.push(Go(t)),hV(t,n,r)&&r.push(QS(t,n))},mV=e=>{const{activity:t,entityHeader:n,nodesCopy:a,edgesCopy:r}=e,i={type:mt.ACTIVITY,data:t},o={type:mt.ENTITY,data:n};Pi({newNodeProps:i,existingNodeProps:o,nodesCopy:a,edgesCopy:r})},vV=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:a,edgesCopy:r}=e,i={type:mt.EXPAND,data:{itemCount:n,entityHeader:t}},o={type:mt.ENTITY,data:t};Pi({newNodeProps:i,existingNodeProps:o,nodesCopy:a,edgesCopy:r})},gV=e=>{const{ref:t,activity:n,nodesCopy:a,edgesCopy:r}=e,i={type:mt.ENTITY_PLACEHOLDER,data:t},o={type:mt.ACTIVITY,data:n};Pi({newNodeProps:i,existingNodeProps:o,nodesCopy:a,edgesCopy:r})},yV=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:a}=e,r={type:mt.UNDEFINED,data:t},i={type:mt.ENTITY,data:t};Pi({newNodeProps:r,existingNodeProps:i,nodesCopy:n,edgesCopy:a})},bV=e=>{const{usedURL:t,activity:n,nodesCopy:a,edgesCopy:r}=e,i={type:mt.ACTIVITY,data:n},o={type:mt.EXTERNAL,data:t};Pi({newNodeProps:o,existingNodeProps:i,nodesCopy:a,edgesCopy:r})},wV=e=>{const{entityHeader:t,activity:n,nodesCopy:a,edgesCopy:r}=e,i={type:mt.ENTITY,data:t};if(GS(i,a)&&(a.push(Go(i)),n)){const o={type:mt.ACTIVITY,data:n};r.push(QS(i,o))}};const nc=400,ac=.85,SV=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:a=[],initialEdges:r=[],onNodesChangedListener:i,onEdgesChangedListener:o}=e,{accessToken:s}=qe(),[l,c]=B.useState(a),[u,d]=B.useState(r),[f,p,h]=k$([]),[v,g,b]=$$([]),[E,y]=$.useState(),_=CC(),{data:w,isSuccess:S}=Q1(t,{useErrorBoundary:!0});if(S&&w&&w.totalNumberOfResults==0){const A=t.map(k=>k.targetId).join(",");_(`Unable to load provenance for the given Synapse IDs: ${A}`)}const C=w==null?void 0:w.results,[x,I]=B.useState(!1),P=Ks(),q=$.useCallback((A,k)=>{y(k)},[]),O=$.useCallback(async A=>{var z;const{entityHeader:k,nodesCopy:R,edgesCopy:V,usedInActivity:F}=A;wV({entityHeader:k,activity:F,nodesCopy:R,edgesCopy:V});try{const W=await je.getActivityForEntity(k.id,k.versionNumber,s);(!Rg({entityHeader:k,rootEntityHeaders:C})||W.used&&W.used.length>=nc)&&vV({entityHeader:k,itemCount:(z=W.used)==null?void 0:z.length,nodesCopy:R,edgesCopy:V})}catch(W){console.error(W),Rg({entityHeader:k,rootEntityHeaders:C})&&yV({entityHeader:k,nodesCopy:R,edgesCopy:V})}},[s,C]);$.useEffect(()=>{!x&&f.length>0&&setTimeout(()=>{if(C){const A=pV(C[0],f);if(A){const k=P.getZoom(),R=k>ac?ac:k;P==null||P.setCenter(A.position.x+150,A.position.y-30,{zoom:R,duration:0})}I(!0)}})},[x,f,P,C]);const T=$.useCallback(async A=>{const{entityHeader:k,nodesCopy:R,edgesCopy:V}=A;try{const F=await je.getActivityForEntity(k.id,k.versionNumber,s);if(mV({activity:F,entityHeader:k,nodesCopy:R,edgesCopy:V}),F.used&&F.used.length<nc){const z=[];F.used.forEach(X=>{X.concreteType==xC?z.push(X.reference):bV({usedURL:X,activity:F,nodesCopy:R,edgesCopy:V})});const W=await je.getEntityHeaders(z,s),{results:G}=W;z.filter(X=>G.find(J=>J.id==X.targetId)==null).forEach(X=>{gV({ref:X,activity:F,nodesCopy:R,edgesCopy:V})});const Y=[];G.forEach(X=>{Y.push(O({entityHeader:X,nodesCopy:R,edgesCopy:V,usedInActivity:F}))}),await Promise.allSettled(Y)}}catch(F){console.error(F)}},[s,O]);$.useEffect(()=>{if(C&&l.length==0){const A=[...l],k=[...u],R=[];C.forEach(V=>{const F=O({entityHeader:V,nodesCopy:A,edgesCopy:k});R.push(F);const z=T({entityHeader:V,nodesCopy:A,edgesCopy:k});R.push(z)}),Promise.allSettled(R).finally(()=>{c(A),d(k)})}},[O,_,T,C,t,u,l]),$.useEffect(()=>{const A=E==null?void 0:E.data;if(E&&(A==null?void 0:A.type)==mt.EXPAND){const k=A.props;if(k.itemCount>nc){Yr("Web visualization does not support expanding this many items at this time.","danger");return}else{A.label=m(fN,{size:30});const R=l.filter(z=>z.id!=E.id),V=Kp([E],u)[0],F=u.filter(z=>z!=V);T({entityHeader:k.entityHeader,nodesCopy:R,edgesCopy:F}).finally(()=>{c(R),d(F)})}y(void 0)}},[E,l,u,T]),$.useEffect(()=>{const{nodes:A,edges:k}=fV(l,u,"TB");Pg(A,f)||(p(A),i&&i(A)),Pg(k,v)||(g(k),o&&o(k))},[l,u,f,v,p,g,x,P,t,i,o]);const N=$.useCallback(A=>{A&&typeof A.deltaX<"u"&&typeof A.deltaY<"u"&&window.scrollTo(window.scrollX+A.deltaX,window.scrollY+A.deltaY)},[]);return m("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:m(U0,{defaultViewport:{x:0,y:0,zoom:ac},nodes:f,edges:v,onNodeClick:q,onNodesChange:h,onEdgesChange:b,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:N,children:m(M$,{})})})},_d=e=>m(sb,{children:m(Jp,{children:m(SV,{...e})})});try{_d.displayName="ProvenanceGraph",_d.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge[]) => void)"}}}}}catch{}function Ed(e){const{entityList:t,displayHeightPx:n}=e,a=t.split(",").map(i=>{const o=i.split("/version/");return{targetId:o[0],targetVersionNumber:o.length>1?parseInt(o[1]):void 0}}),r=n?`${n}px`:void 0;return m(_d,{entityRefs:a,containerHeight:r})}try{Ed.displayName="MarkdownProvenanceGraph",Ed.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}}}catch{}class ai extends B.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&Wa(this.context.accessToken,t).then(n=>{const a=[{associateObjectId:t,associateObjectType:ar.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(a,n.dataFileHandleId)})}getSynapseFiles(t,n){hp({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(r=>{const{preSignedURL:i}=r.requestedFiles.filter(o=>o.fileHandleId===n)[0];this.setState({preSignedURL:i})}).catch(r=>{console.error("Error on getting image ",r)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:a}=n.filter(i=>i.fileName===t)[0],r=[{associateObjectId:this.props.wikiId,associateObjectType:ar.WikiAttachment,fileHandleId:a}];this.getSynapseFiles(r,a)}}render(){const{params:t}=this.props,{align:n="",altText:a="synapse image"}=t;let r="auto";t.scale&&t.scale!=="100"&&(r=`${Number(t.scale)}%`);const i=n.toLowerCase();let o="";i==="left"&&(o="floatLeft"),i==="right"&&(o="floatright"),i==="center"&&(o="align-center");const s={width:r,height:r};return this.state.preSignedURL?m(B.Fragment,{children:m("img",{alt:a,className:"img-fluid  "+o,src:this.state.preSignedURL,style:s})}):null}}Le(ai,"contextType",wi);try{ai.displayName="SynapseImage",ai.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}}}catch{}const ii=B.createContext(void 0),Cd=({children:e,wikiContext:t})=>m(ii.Provider,{value:t,children:e}),Ag=ii.Consumer;function YS(){return $.useContext(ii)??{}}try{ii.displayName="SynapseWikiContext",ii.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}}}catch{}try{Cd.displayName="SynapseWikiContextProvider",Cd.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}}}catch{}try{Ag.displayName="SynapseWikiContextConsumer",Ag.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}}}catch{}function xd(e){const{wikiId:t,wikiPage:n,fileHandles:a}=YS();return e.fileName?a?m(ai,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:a.list}):m(Q,{}):e.synapseId?m(ai,{params:e,synapseId:e.synapseId}):m(Q,{})}try{xd.displayName="MarkdownSynapseImage",xd.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}}}catch{}const _V=Lb(Vb);class Yo extends B.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:fa,entityId:en(t),query:{sql:t}};lb(n,this.context.accessToken).then(a=>{this.setState({isLoaded:!0,queryData:a})}).catch(a=>{console.log("Error on full table query ",a)})}showPlot(){var p,h;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:a,type:r,xaxistype:i,showlegend:o}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),c={showlegend:o,title:t};n&&(c.xaxis={title:n}),i&&(c.xaxis={...c.xaxis,xaxistype:i.toLowerCase()}),a&&(c.yaxis={title:a});const u=[],d=l?"v":"h",f=((p=s.queryData.queryResult)==null?void 0:p.queryResults.headers)??[];for(let v=0;v<f.length-1;v+=1)u[v]={orientation:d,name:f[v+1].name,type:r.toLowerCase(),x:[],y:[]};for(const v of((h=s.queryData.queryResult)==null?void 0:h.queryResults.rows)??[])for(let g=1;g<v.values.length;g+=1){const b=v.values;u[g-1].x.push(b[0]),u[g-1].y.push(b[g])}return m(_V,{layout:c,data:u})}render(){return this.state.isLoaded?this.showPlot():null}}Le(Yo,"contextType",wi);try{Yo.displayName="SynapsePlot",Yo.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}}}catch{}function Nd(e){const{ownerId:t,wikiId:n,wikiPage:a}=YS();return m(Yo,{ownerId:t,wikiId:n||(a==null?void 0:a.id),widgetparamsMapped:e})}try{Nd.displayName="MarkdownSynapsePlot",Nd.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}}}catch{}const EV=200,kg="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",$g="ESTIMATED_DOWNLOAD_SPEED",CV="syn12600511",xV=e=>new Promise((t,n)=>{const a=localStorage.getItem(kg),r=localStorage.getItem($g);if(a&&r&&new Date().getTime()<Number(a)){t(Number(r));return}Wa(e,CV).then(i=>{const o=i,l={includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:o.id,associateObjectType:ar.FileEntity,fileHandleId:o.dataFileHandleId}]};hp(l,e).then(c=>{const u=c.requestedFiles[0].preSignedURL,d=c.requestedFiles[0].fileHandle,f=new Date().getTime();return NC(d,u).then(()=>{const p=d.contentSize/((new Date().getTime()-f-EV)/1e3),h=new Date().getTime();localStorage.setItem(kg,(h+1e3*60*5).toString()),localStorage.setItem($g,p.toString()),t(p)})})}).catch(i=>n(i))}),hn=e=>m(fn,{style:{...e.style,display:"inline-block"},...e});try{hn.displayName="SkeletonInlineBlock",hn.__docgenInfo={description:"Skeleton with a display value of `inline-block`. MUI applies `display: block` with high specificity, so it's easiest to just apply the style to the component.",displayName:"SkeletonInlineBlock",props:{animation:{defaultValue:{value:"'pulse'"},description:"The animation.\nIf `false` the animation effect is disabled.",name:"animation",required:!1,type:{name:'false | "pulse" | "wave"'}},children:{defaultValue:null,description:"Optional children to infer width and height from.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SkeletonClasses> & Partial<ClassNameMap<never>>)"}},height:{defaultValue:null,description:`Height of the skeleton.
Useful when you don't want to adapt the skeleton to a text element but for instance a card.`,name:"height",required:!1,type:{name:"string | number"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},variant:{defaultValue:{value:"'text'"},description:"The type of content that will be rendered.",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"rounded"'},{value:'"rectangular"'},{value:'"circular"'}]}},width:{defaultValue:null,description:`Width of the skeleton.
Useful when the skeleton is inside an inline element with no width of its own.`,name:"width",required:!1,type:{name:"string | number"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLSpanElement | null) => void) | RefObject<HTMLSpanElement> | null"}}}}}catch{}var KS={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Gr,function(){var n,a,r=1e3,i=6e4,o=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2592e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f={years:c,months:u,days:s,hours:o,minutes:i,seconds:r,milliseconds:1,weeks:6048e5},p=function(w){return w instanceof _},h=function(w,S,C){return new _(w,C,S.$l)},v=function(w){return a.p(w)+"s"},g=function(w){return w<0},b=function(w){return g(w)?Math.ceil(w):Math.floor(w)},E=function(w){return Math.abs(w)},y=function(w,S){return w?g(w)?{negative:!0,format:""+E(w)+S}:{negative:!1,format:""+w+S}:{negative:!1,format:""}},_=function(){function w(C,x,I){var P=this;if(this.$d={},this.$l=I,C===void 0&&(this.$ms=0,this.parseFromMilliseconds()),x)return h(C*f[v(x)],this);if(typeof C=="number")return this.$ms=C,this.parseFromMilliseconds(),this;if(typeof C=="object")return Object.keys(C).forEach(function(T){P.$d[v(T)]=C[T]}),this.calMilliseconds(),this;if(typeof C=="string"){var q=C.match(d);if(q){var O=q.slice(2).map(function(T){return T!=null?Number(T):0});return this.$d.years=O[0],this.$d.months=O[1],this.$d.weeks=O[2],this.$d.days=O[3],this.$d.hours=O[4],this.$d.minutes=O[5],this.$d.seconds=O[6],this.calMilliseconds(),this}}return this}var S=w.prototype;return S.calMilliseconds=function(){var C=this;this.$ms=Object.keys(this.$d).reduce(function(x,I){return x+(C.$d[I]||0)*f[I]},0)},S.parseFromMilliseconds=function(){var C=this.$ms;this.$d.years=b(C/c),C%=c,this.$d.months=b(C/u),C%=u,this.$d.days=b(C/s),C%=s,this.$d.hours=b(C/o),C%=o,this.$d.minutes=b(C/i),C%=i,this.$d.seconds=b(C/r),C%=r,this.$d.milliseconds=C},S.toISOString=function(){var C=y(this.$d.years,"Y"),x=y(this.$d.months,"M"),I=+this.$d.days||0;this.$d.weeks&&(I+=7*this.$d.weeks);var P=y(I,"D"),q=y(this.$d.hours,"H"),O=y(this.$d.minutes,"M"),T=this.$d.seconds||0;this.$d.milliseconds&&(T+=this.$d.milliseconds/1e3);var N=y(T,"S"),A=C.negative||x.negative||P.negative||q.negative||O.negative||N.negative,k=q.format||O.format||N.format?"T":"",R=(A?"-":"")+"P"+C.format+x.format+P.format+k+q.format+O.format+N.format;return R==="P"||R==="-P"?"P0D":R},S.toJSON=function(){return this.toISOString()},S.format=function(C){var x=C||"YYYY-MM-DDTHH:mm:ss",I={Y:this.$d.years,YY:a.s(this.$d.years,2,"0"),YYYY:a.s(this.$d.years,4,"0"),M:this.$d.months,MM:a.s(this.$d.months,2,"0"),D:this.$d.days,DD:a.s(this.$d.days,2,"0"),H:this.$d.hours,HH:a.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:a.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:a.s(this.$d.seconds,2,"0"),SSS:a.s(this.$d.milliseconds,3,"0")};return x.replace(l,function(P,q){return q||String(I[P])})},S.as=function(C){return this.$ms/f[v(C)]},S.get=function(C){var x=this.$ms,I=v(C);return I==="milliseconds"?x%=1e3:x=I==="weeks"?b(x/f[I]):this.$d[I],x===0?0:x},S.add=function(C,x,I){var P;return P=x?C*f[v(x)]:p(C)?C.$ms:h(C,this).$ms,h(this.$ms+P*(I?-1:1),this)},S.subtract=function(C,x){return this.add(C,x,!0)},S.locale=function(C){var x=this.clone();return x.$l=C,x},S.clone=function(){return h(this.$ms,this)},S.humanize=function(C){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!C)},S.milliseconds=function(){return this.get("milliseconds")},S.asMilliseconds=function(){return this.as("milliseconds")},S.seconds=function(){return this.get("seconds")},S.asSeconds=function(){return this.as("seconds")},S.minutes=function(){return this.get("minutes")},S.asMinutes=function(){return this.as("minutes")},S.hours=function(){return this.get("hours")},S.asHours=function(){return this.as("hours")},S.days=function(){return this.get("days")},S.asDays=function(){return this.as("days")},S.weeks=function(){return this.get("weeks")},S.asWeeks=function(){return this.as("weeks")},S.months=function(){return this.get("months")},S.asMonths=function(){return this.as("months")},S.years=function(){return this.get("years")},S.asYears=function(){return this.as("years")},w}();return function(w,S,C){n=C,a=C().$utils(),C.duration=function(P,q){var O=C.locale();return h(P,{$l:O},q)},C.isDuration=p;var x=S.prototype.add,I=S.prototype.subtract;S.prototype.add=function(P,q){return p(P)&&(P=P.asMilliseconds()),x.bind(this)(P,q)},S.prototype.subtract=function(P,q){return p(P)&&(P=P.asMilliseconds()),I.bind(this)(P,q)}}})})(KS);var NV=KS.exports;const IV=Et(NV);var XS={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Gr,function(){return function(n,a,r){n=n||{};var i=a.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(c,u,d,f){return i.fromToBase(c,u,d,f)}r.en.relativeTime=o,i.fromToBase=function(c,u,d,f,p){for(var h,v,g,b=d.$locale().relativeTime||o,E=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=E.length,_=0;_<y;_+=1){var w=E[_];w.d&&(h=f?r(c).diff(d,w.d,!0):d.diff(c,w.d,!0));var S=(n.rounding||Math.round)(Math.abs(h));if(g=h>0,S<=w.r||!w.r){S<=1&&_>0&&(w=E[_-1]);var C=b[w.l];p&&(S=p(""+S)),v=typeof C=="string"?C.replace("%d",S):C(S,u,w.l,g);break}}if(u)return v;var x=g?b.future:b.past;return typeof x=="function"?x(v):x.replace("%s",v)},i.to=function(c,u){return s(c,u,this,!0)},i.from=function(c,u){return s(c,u,this)};var l=function(c){return c.$u?r.utc():r()};i.toNow=function(c){return this.to(l(this),c)},i.fromNow=function(c){return this.from(l(this),c)}}})})(XS);var TV=XS.exports;const PV=Et(TV);ir.extend(IV);ir.extend(PV);function Id(e){const{numFiles:t,numBytes:n}=e,{accessToken:a}=qe(),r=!!n,[i,o]=$.useState({isLoading:r,downloadSpeed:0}),{isLoading:s,downloadSpeed:l}=i;$.useEffect(()=>{a&&xV(a).then(v=>{o({isLoading:!1,downloadSpeed:v})})},[a]);const c=s||l===0||!n?0:n/l,u=c===0,d=u?"":ir.duration({seconds:c}).humanize(),f=t===0,p=f?"SRC-inactive":"SRC-primary-text-color",h=u?"SRC-inactive":"SRC-primary-text-color";return L("span",{className:"download-details-container",children:[L("span",{children:[m(l1,{className:p}),f?m(hn,{width:50}):L(Q,{children:[t,"Â files"]})]}),r&&m(wt,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Ao,placement:"top",children:L("span",{"data-testid":"numBytesUI",children:[m(u1,{className:h}),u?m(hn,{width:50}):ub(n)]})}),r&&m(wt,{title:"This is an estimate of how long package download will take.",enterNextDelay:Ao,placement:"top",children:L("span",{"data-testid":"downloadTimeEstimateUI",children:[m($N,{className:h}),s&&t>0?m(hn,{width:50}):d]})})]})}try{Id.displayName="DownloadDetails",Id.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}}}catch{}const ur="isShowingFacetFilters",Yt="isHidingFacetFilters",Cn=$.createContext(void 0),Ko=({children:e,queryContext:t})=>m(Cn.Provider,{value:t,children:e});function dt(){const e=$.useContext(Cn);if(e===void 0)throw new Error("useQueryContext must be used within a QueryWrapper");return e}function RV(){const e=$.useContext(Cn);if(e===void 0)throw new Error("usePaginatedQueryContext must be used within a QueryWrapper");return e}function AV(){const e=$.useContext(Cn);if(e===void 0)throw new Error("useInfiniteQueryContext must be used within a QueryWrapper");return e}const oi=Cn.Consumer;try{Cn.displayName="QueryContext",Cn.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryContext",props:{}}}catch{}try{Ko.displayName="QueryContextProvider",Ko.__docgenInfo={description:"Provides data related to a Synapse table query, and functions for iterating through pages of the data.",displayName:"QueryContextProvider",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}}}}}catch{}try{oi.displayName="QueryContextConsumer",oi.__docgenInfo={description:"",displayName:"QueryContextConsumer",props:{}}}catch{}async function kV(e,t,n,a,r){try{const i={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:a};return await je.addFilesToDownloadListV2(i,e),Yr("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:r}}),t(),[0,""]}catch(i){return Yr(i.reason,"danger"),t(),[0,""]}}const Kn={[2]:{severity:"info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{severity:"info",infoText:L(Q,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",m("br",{}),"If you don't want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{severity:"info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{severity:"info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{severity:"error",closeText:"Close",infoText:L(Q,{children:["PleaseÂ  ",m(IC,{}),"Â to add files to your download cart."]})}},$V=e=>{switch(e.status){case 0:case 1:return L("div",{children:[m("span",{className:"spinner white"}),m("span",{className:"spinner__text",children:Kn[e.status].infoText})]});case 4:return m(Q,{children:Kn[e.status].infoText});case 2:case 3:return L(Q,{children:[m(Id,{numFiles:e.fileCount,numBytes:e.fileSize}),m("span",{className:"download-confirmation-infoText",style:{paddingLeft:"8px"},children:Kn[e.status].infoText})]});default:return m(Q,{})}},Td=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:a,topLevelControlsState:r})=>{const{accessToken:i,downloadCartPageUrl:o}=qe(),{showDownloadConfirmation:s=!0}=r??{},[l,c]=$.useState(i?0:4),[u,d]=$.useState(0),[f,p]=$.useState(),{data:h,refetch:v}=Z1(),g=e(),[b,E]=$.useState(!1),y=$.useCallback((O,T,N)=>{if(i&&N){const A=N.totalNumberOfFiles>0,k=O??0;c(A?3:2),d(k),p(T)}},[i]),{data:_,isSuccess:w}=U$({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Oc.FILE]});ko(()=>{w&&_&&h&&y(_.totalChildCount,_.sumFileSizesBytes,h)},[y,t,w,_,h]);const S=pa|bp,C={...g,partMask:S},{data:x}=Ub(C);ko(()=>{var O,T;if(x&&h){const N=(O=x.sumFileSizes)==null?void 0:O.greaterThan;y(x.queryCount,N||(T=x.sumFileSizes)==null?void 0:T.sumFileSizesBytes,h)}},[y,g,x,h]);const I=n?()=>n():()=>{a&&a(O=>({...O,showDownloadConfirmation:!1}))},P=async()=>{if(!i)c(4);else{c(1);const N=(await kV(i,I,g,t,()=>E(!0)))[0];c(N),v()}};b&&(window.location.href=o);const q=r==null?void 0:r.showFacetFilter;return m(Q,{children:m(Lr,{sx:{pr:4,py:1},icon:Kn[l].severity==="error"?void 0:!1,severity:Kn[l].severity,className:`download-confirmation ${s?"":"hidden"}
          ${q?ur:Yt}
        `,action:L(Q,{children:[l!==1&&m(ht,{variant:"text",color:"primary",onClick:I,children:Kn[l].closeText}),(l===2||l===3)&&m(ht,{variant:"contained",color:"primary",onClick:()=>{P()},sx:{ml:"5px"},children:"Add"})]}),children:m(et,{display:"flex",children:m($V,{status:l,fileCount:u,fileSize:f})})})})};try{Td.displayName="DownloadConfirmation",Td.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}}}catch{}function qV(){return L(Q,{children:[m("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),m("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}var jr=(e=>(e.INTERACTIVE="INTERACTIVE",e.STATIC="STATIC",e))(jr||{});function OV(){return L("div",{className:"text-center",children:[tx,m("h4",{children:"No Matching Results"}),m("p",{children:"Try checking the spelling or removing filters."})]})}function DV(){return L("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[rx,m("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]})}const FV=()=>{try{return JSON.parse(sessionStorage.getItem(jC)||"")}catch{return[]}},LV=()=>{try{return JSON.parse(sessionStorage.getItem(QC)||"")}catch{return[]}},VV=()=>{try{return JSON.parse(sessionStorage.getItem(GC)||"")}catch{return[]}},MV=e=>{const t=FV().find(n=>n.id===e);return(t==null?void 0:t.name)??e},BV=e=>{const t=VV().find(n=>n.id===e);return(t==null?void 0:t.name)||e},UV=e=>{const t=LV().find(n=>n.ownerId===e);return(t==null?void 0:t.userName)||e},zV=(e,t)=>{if(e===ja)return Is;switch(t){case ue.ENTITYID:case ue.ENTITYID_LIST:return MV(e);case ue.USERID:case ue.USERID_LIST:return UV(e);case ue.EVALUATIONID:return BV(e);default:return e}},si=$.createContext(void 0),Pd=({children:e,queryVisualizationContext:t})=>m(si.Provider,{value:t,children:e});function ut(){const e=$.useContext(si);if(e===void 0)throw new Error("useQueryVisualizationContext must be used within a QueryWrapper");return e}const Xo=si.Consumer;function li(e){const{noContentPlaceholderType:t=jr.INTERACTIVE}=e,{data:n,getLastQueryRequest:a,isFacetsAvailable:r,hasResettableFilters:i}=dt(),{columnAliases:o={}}=e,[s,l]=$.useState({showColumnFilter:!0,showFacetFilter:!0,showFacetVisualization:e.defaultShowFacetVisualization??!0,showSearchBar:e.defaultShowSearchBar??!1,showDownloadConfirmation:!1,showColumnSelectDropdown:!1,showSqlEditor:!1});$.useEffect(()=>{r||l(y=>({...y,showFacetFilter:!1,showFacetVisualization:!1}))},[r]);const[c,u]=$.useState([]),[d,f]=$.useState([]),p=a(),h=X1(n==null?void 0:n.selectColumns);$.useEffect(()=>{u((h==null?void 0:h.slice(0,e.visibleColumnCount??1/0).map(y=>y.name))??[])},[h,p.query.sql,e.visibleColumnCount]);const v=$.useCallback(y=>{const _=localStorage.getItem("force-display-original-column-names")==="true";return!y||_?y:o[y]?o[y]:H1(y)},[o]),g=$.useCallback(()=>{switch(t){case jr.INTERACTIVE:return i?m(OV,{}):m(DV,{});case jr.STATIC:default:return m(qV,{})}},[t,i]),b={topLevelControlsState:s,setTopLevelControlsState:l,columnsToShowInTable:c,setColumnsToShowInTable:u,selectedRows:d,setSelectedRows:f,rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,showLastUpdatedOn:e.showLastUpdatedOn,getColumnDisplayName:v,getDisplayValue:zV,NoContentPlaceholder:g},{children:E}=e;return m(Pd,{queryVisualizationContext:b,children:E})}try{li.displayName="QueryVisualizationWrapper",li.__docgenInfo={description:`QueryVisualizationWrapper manages UI state for components that query tables in Synapse. That state can be accessed
or updated using QueryVisualizationContext. A QueryVisualizationWrapper must be used within a QueryWrapper.`,displayName:"QueryVisualizationWrapper",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},hiddenColumns:{defaultValue:null,description:"",name:"hiddenColumns",required:!1,type:{name:"string[]"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},defaultShowSearchBar:{defaultValue:null,description:"",name:"defaultShowSearchBar",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}try{si.displayName="QueryVisualizationContext",si.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryVisualizationContext",props:{}}}catch{}try{Pd.displayName="QueryVisualizationContextProvider",Pd.__docgenInfo={description:"Provides fields and functions related to visualizing a Synapse table query. For actual query data, see QueryContextProvider.",displayName:"QueryVisualizationContextProvider",props:{queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{Xo.displayName="QueryVisualizationContextConsumer",Xo.__docgenInfo={description:"",displayName:"QueryVisualizationContextConsumer",props:{}}}catch{}const ic=3,Zo=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:a}=dt(),{topLevelControlsState:{showSearchBar:r,showFacetFilter:i}}=ut(),[o,s]=$.useState(""),l=$.useRef(null),c=d=>{var f;if(d.preventDefault(),o.trim().length<ic)(f=l.current)==null||f.setCustomValidity(`Search term must have a minimum of ${ic} characters`);else{const p=a(),{additionalFilters:h=[]}=p.query,v={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:o};if(h.find(b=>b.concreteType==v.concreteType&&b.searchExpression==v.searchExpression))return;h.push(v),p.query.additionalFilters=h,n(p),s("")}},u=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return m("div",{className:`QueryWrapperSearchInput ${i?ur:Yt}`,children:m(Si,{in:r,timeout:{enter:300,exit:300},children:L("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[L("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:c,children:[m("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:m($e,{icon:"search"})}),m("input",{ref:l,minLength:ic,onChange:u,placeholder:"Enter Search Terms",value:o,type:"text"}),o.length>0&&m("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:m($e,{icon:"close"})})]}),m("div",{className:"QueryWrapperSearchInput__helppopover",children:m(Nn,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{Zo.displayName="FullTextSearch",Zo.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}var no=function(e){return e&&e.Math==Math&&e},Rn=no(typeof globalThis=="object"&&globalThis)||no(typeof window=="object"&&window)||no(typeof self=="object"&&self)||no(typeof Gr=="object"&&Gr)||function(){return this}()||Function("return this")(),rn=function(e){try{return!!e()}catch{return!0}},HV=rn,nl=!HV(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),WV=nl,ZS=Function.prototype,qg=ZS.apply,Og=ZS.call,jV=typeof Reflect=="object"&&Reflect.apply||(WV?Og.bind(qg):function(){return Og.apply(qg,arguments)}),JS=nl,e_=Function.prototype,Rd=e_.call,QV=JS&&e_.bind.bind(Rd,Rd),ga=JS?QV:function(e){return function(){return Rd.apply(e,arguments)}},t_=ga,GV=t_({}.toString),YV=t_("".slice),r_=function(e){return YV(GV(e),8,-1)},KV=r_,XV=ga,n_=function(e){if(KV(e)==="Function")return XV(e)},Ad=typeof document=="object"&&document.all,ZV=typeof Ad>"u"&&Ad!==void 0,a_={all:Ad,IS_HTMLDDA:ZV},i_=a_,JV=i_.all,An=i_.IS_HTMLDDA?function(e){return typeof e=="function"||e===JV}:function(e){return typeof e=="function"},o_={},eM=rn,Ri=!eM(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),tM=nl,ao=Function.prototype.call,ch=tM?ao.bind(ao):function(){return ao.apply(ao,arguments)},s_={},l_={}.propertyIsEnumerable,u_=Object.getOwnPropertyDescriptor,rM=u_&&!l_.call({1:2},1);s_.f=rM?function(t){var n=u_(this,t);return!!n&&n.enumerable}:l_;var c_=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},nM=ga,aM=rn,iM=r_,oc=Object,oM=nM("".split),sM=aM(function(){return!oc("z").propertyIsEnumerable(0)})?function(e){return iM(e)=="String"?oM(e,""):oc(e)}:oc,d_=function(e){return e==null},lM=d_,uM=TypeError,f_=function(e){if(lM(e))throw uM("Can't call method on "+e);return e},cM=sM,dM=f_,p_=function(e){return cM(dM(e))},Dg=An,h_=a_,fM=h_.all,al=h_.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:Dg(e)||e===fM}:function(e){return typeof e=="object"?e!==null:Dg(e)},m_={},sc=m_,lc=Rn,pM=An,Fg=function(e){return pM(e)?e:void 0},v_=function(e,t){return arguments.length<2?Fg(sc[e])||Fg(lc[e]):sc[e]&&sc[e][t]||lc[e]&&lc[e][t]},hM=ga,mM=hM({}.isPrototypeOf),vM=typeof navigator<"u"&&String(navigator.userAgent)||"",g_=Rn,uc=vM,Lg=g_.process,Vg=g_.Deno,Mg=Lg&&Lg.versions||Vg&&Vg.version,Bg=Mg&&Mg.v8,Ut,Jo;Bg&&(Ut=Bg.split("."),Jo=Ut[0]>0&&Ut[0]<4?1:+(Ut[0]+Ut[1]));!Jo&&uc&&(Ut=uc.match(/Edge\/(\d+)/),(!Ut||Ut[1]>=74)&&(Ut=uc.match(/Chrome\/(\d+)/),Ut&&(Jo=+Ut[1])));var gM=Jo,Ug=gM,yM=rn,y_=!!Object.getOwnPropertySymbols&&!yM(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ug&&Ug<41}),bM=y_,b_=bM&&!Symbol.sham&&typeof Symbol.iterator=="symbol",wM=v_,SM=An,_M=mM,EM=b_,CM=Object,w_=EM?function(e){return typeof e=="symbol"}:function(e){var t=wM("Symbol");return SM(t)&&_M(t.prototype,CM(e))},xM=String,NM=function(e){try{return xM(e)}catch{return"Object"}},IM=An,TM=NM,PM=TypeError,S_=function(e){if(IM(e))return e;throw PM(TM(e)+" is not a function")},RM=S_,AM=d_,kM=function(e,t){var n=e[t];return AM(n)?void 0:RM(n)},cc=ch,dc=An,fc=al,$M=TypeError,qM=function(e,t){var n,a;if(t==="string"&&dc(n=e.toString)&&!fc(a=cc(n,e))||dc(n=e.valueOf)&&!fc(a=cc(n,e))||t!=="string"&&dc(n=e.toString)&&!fc(a=cc(n,e)))return a;throw $M("Can't convert object to primitive value")},__={exports:{}},zg=Rn,OM=Object.defineProperty,DM=function(e,t){try{OM(zg,e,{value:t,configurable:!0,writable:!0})}catch{zg[e]=t}return t},FM=Rn,LM=DM,Hg="__core-js_shared__",VM=FM[Hg]||LM(Hg,{}),MM=VM,Wg=MM;(__.exports=function(e,t){return Wg[e]||(Wg[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.27.2",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"});var BM=__.exports,UM=f_,zM=Object,E_=function(e){return zM(UM(e))},HM=ga,WM=E_,jM=HM({}.hasOwnProperty),dh=Object.hasOwn||function(t,n){return jM(WM(t),n)},QM=ga,GM=0,YM=Math.random(),KM=QM(1 .toString),XM=function(e){return"Symbol("+(e===void 0?"":e)+")_"+KM(++GM+YM,36)},ZM=Rn,JM=BM,jg=dh,e3=XM,t3=y_,r3=b_,zn=ZM.Symbol,pc=JM("wks"),n3=r3?zn.for||zn:zn&&zn.withoutSetter||e3,a3=function(e){return jg(pc,e)||(pc[e]=t3&&jg(zn,e)?zn[e]:n3("Symbol."+e)),pc[e]},i3=ch,Qg=al,Gg=w_,o3=kM,s3=qM,l3=a3,u3=TypeError,c3=l3("toPrimitive"),d3=function(e,t){if(!Qg(e)||Gg(e))return e;var n=o3(e,c3),a;if(n){if(t===void 0&&(t="default"),a=i3(n,e,t),!Qg(a)||Gg(a))return a;throw u3("Can't convert object to primitive value")}return t===void 0&&(t="number"),s3(e,t)},f3=d3,p3=w_,C_=function(e){var t=f3(e,"string");return p3(t)?t:t+""},h3=Rn,Yg=al,kd=h3.document,m3=Yg(kd)&&Yg(kd.createElement),v3=function(e){return m3?kd.createElement(e):{}},g3=Ri,y3=rn,b3=v3,x_=!g3&&!y3(function(){return Object.defineProperty(b3("div"),"a",{get:function(){return 7}}).a!=7}),w3=Ri,S3=ch,_3=s_,E3=c_,C3=p_,x3=C_,N3=dh,I3=x_,Kg=Object.getOwnPropertyDescriptor;o_.f=w3?Kg:function(t,n){if(t=C3(t),n=x3(n),I3)try{return Kg(t,n)}catch{}if(N3(t,n))return E3(!S3(_3.f,t,n),t[n])};var T3=rn,P3=An,R3=/#|\.prototype\./,Ai=function(e,t){var n=k3[A3(e)];return n==q3?!0:n==$3?!1:P3(t)?T3(t):!!t},A3=Ai.normalize=function(e){return String(e).replace(R3,".").toLowerCase()},k3=Ai.data={},$3=Ai.NATIVE="N",q3=Ai.POLYFILL="P",O3=Ai,Xg=n_,D3=S_,F3=nl,L3=Xg(Xg.bind),V3=function(e,t){return D3(e),t===void 0?e:F3?L3(e,t):function(){return e.apply(t,arguments)}},N_={},M3=Ri,B3=rn,U3=M3&&B3(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),z3=al,H3=String,W3=TypeError,j3=function(e){if(z3(e))return e;throw W3(H3(e)+" is not an object")},Q3=Ri,G3=x_,Y3=U3,io=j3,Zg=C_,K3=TypeError,hc=Object.defineProperty,X3=Object.getOwnPropertyDescriptor,mc="enumerable",vc="configurable",gc="writable";N_.f=Q3?Y3?function(t,n,a){if(io(t),n=Zg(n),io(a),typeof t=="function"&&n==="prototype"&&"value"in a&&gc in a&&!a[gc]){var r=X3(t,n);r&&r[gc]&&(t[n]=a.value,a={configurable:vc in a?a[vc]:r[vc],enumerable:mc in a?a[mc]:r[mc],writable:!1})}return hc(t,n,a)}:hc:function(t,n,a){if(io(t),n=Zg(n),io(a),G3)try{return hc(t,n,a)}catch{}if("get"in a||"set"in a)throw K3("Accessors not supported");return"value"in a&&(t[n]=a.value),t};var Z3=Ri,J3=N_,e4=c_,t4=Z3?function(e,t,n){return J3.f(e,t,e4(1,n))}:function(e,t,n){return e[t]=n,e},oo=Rn,r4=jV,n4=n_,a4=An,i4=o_.f,o4=O3,Ln=m_,s4=V3,Vn=t4,Jg=dh,l4=function(e){var t=function(n,a,r){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,a)}return new e(n,a,r)}return r4(e,this,arguments)};return t.prototype=e.prototype,t},I_=function(e,t){var n=e.target,a=e.global,r=e.stat,i=e.proto,o=a?oo:r?oo[n]:(oo[n]||{}).prototype,s=a?Ln:Ln[n]||Vn(Ln,n,{})[n],l=s.prototype,c,u,d,f,p,h,v,g,b;for(f in t)c=o4(a?f:n+(r?".":"#")+f,e.forced),u=!c&&o&&Jg(o,f),h=s[f],u&&(e.dontCallGetSet?(b=i4(o,f),v=b&&b.value):v=o[f]),p=u&&v?v:t[f],!(u&&typeof h==typeof p)&&(e.bind&&u?g=s4(p,oo):e.wrap&&u?g=l4(p):i&&a4(p)?g=n4(p):g=p,(e.sham||p&&p.sham||h&&h.sham)&&Vn(g,"sham",!0),Vn(s,f,g),i&&(d=n+"Prototype",Jg(Ln,d)||Vn(Ln,d,{}),Vn(Ln[d],f,p),e.real&&l&&(c||!l[f])&&Vn(l,f,p)))},u4=Math.ceil,c4=Math.floor,d4=Math.trunc||function(t){var n=+t;return(n>0?c4:u4)(n)},f4=d4,T_=function(e){var t=+e;return t!==t||t===0?0:f4(t)},p4=T_,h4=Math.max,m4=Math.min,P_=function(e,t){var n=p4(e);return n<0?h4(n+t,0):m4(n,t)},v4=T_,g4=Math.min,y4=function(e){return e>0?g4(v4(e),9007199254740991):0},b4=y4,R_=function(e){return b4(e.length)},w4=p_,S4=P_,_4=R_,ey=function(e){return function(t,n,a){var r=w4(t),i=_4(r),o=S4(a,i),s;if(e&&n!=n){for(;i>o;)if(s=r[o++],s!=s)return!0}else for(;i>o;o++)if((e||o in r)&&r[o]===n)return e||o||0;return!e&&-1}},E4={includes:ey(!0),indexOf:ey(!1)},C4=I_,x4=E4.includes,N4=rn,I4=N4(function(){return!Array(1).includes()});C4({target:"Array",proto:!0,forced:I4},{includes:function(t){return x4(this,t,arguments.length>1?arguments[1]:void 0)}});var T4=v_,A_=T4,P4=A_,R4=P4("Array","includes");const A4=Et(R4);var k_={exports:{}},Oe={};/** @license React v16.9.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(Oe,"__esModule",{value:!0});var pt=typeof Symbol=="function"&&Symbol.for,fh=pt?Symbol.for("react.element"):60103,ph=pt?Symbol.for("react.portal"):60106,il=pt?Symbol.for("react.fragment"):60107,ol=pt?Symbol.for("react.strict_mode"):60108,sl=pt?Symbol.for("react.profiler"):60114,ll=pt?Symbol.for("react.provider"):60109,ul=pt?Symbol.for("react.context"):60110,hh=pt?Symbol.for("react.async_mode"):60111,cl=pt?Symbol.for("react.concurrent_mode"):60111,dl=pt?Symbol.for("react.forward_ref"):60112,fl=pt?Symbol.for("react.suspense"):60113,k4=pt?Symbol.for("react.suspense_list"):60120,pl=pt?Symbol.for("react.memo"):60115,hl=pt?Symbol.for("react.lazy"):60116,$4=pt?Symbol.for("react.fundamental"):60117,q4=pt?Symbol.for("react.responder"):60118;function $t(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fh:switch(e=e.type,e){case hh:case cl:case il:case sl:case ol:case fl:return e;default:switch(e=e&&e.$$typeof,e){case ul:case dl:case ll:return e;default:return t}}case hl:case pl:case ph:return t}}}function $_(e){return $t(e)===cl}Oe.typeOf=$t;Oe.AsyncMode=hh;Oe.ConcurrentMode=cl;Oe.ContextConsumer=ul;Oe.ContextProvider=ll;Oe.Element=fh;Oe.ForwardRef=dl;Oe.Fragment=il;Oe.Lazy=hl;Oe.Memo=pl;Oe.Portal=ph;Oe.Profiler=sl;Oe.StrictMode=ol;Oe.Suspense=fl;Oe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===il||e===cl||e===sl||e===ol||e===fl||e===k4||typeof e=="object"&&e!==null&&(e.$$typeof===hl||e.$$typeof===pl||e.$$typeof===ll||e.$$typeof===ul||e.$$typeof===dl||e.$$typeof===$4||e.$$typeof===q4)};Oe.isAsyncMode=function(e){return $_(e)||$t(e)===hh};Oe.isConcurrentMode=$_;Oe.isContextConsumer=function(e){return $t(e)===ul};Oe.isContextProvider=function(e){return $t(e)===ll};Oe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fh};Oe.isForwardRef=function(e){return $t(e)===dl};Oe.isFragment=function(e){return $t(e)===il};Oe.isLazy=function(e){return $t(e)===hl};Oe.isMemo=function(e){return $t(e)===pl};Oe.isPortal=function(e){return $t(e)===ph};Oe.isProfiler=function(e){return $t(e)===sl};Oe.isStrictMode=function(e){return $t(e)===ol};Oe.isSuspense=function(e){return $t(e)===fl};k_.exports=Oe;var ty=k_.exports,O4=L1;function D4(e,t){return O4(e,t)}var q_=D4,F4=_b;function L4(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?F4(e,void 0,t):[]}var O_=L4,V4=qb,M4=xb,B4=Nb,U4=Jr,z4=qs,ry=Ob,H4=Math.min;function W4(e,t,n){for(var a=n?B4:M4,r=e[0].length,i=e.length,o=i,s=Array(i),l=1/0,c=[];o--;){var u=e[o];o&&t&&(u=U4(u,z4(t))),l=H4(u.length,l),s[o]=!n&&(t||r>=120&&u.length>=120)?new V4(o&&u):void 0}u=e[0];var d=-1,f=s[0];e:for(;++d<r&&c.length<l;){var p=u[d],h=t?t(p):p;if(p=n||p!==0?p:0,!(f?ry(f,h):a(c,h,n))){for(o=i;--o;){var v=s[o];if(!(v?ry(v,h):a(e[o],h,n)))continue e}f&&f.push(h),c.push(p)}}return c}var D_=W4,j4=Js;function Q4(e){return j4(e)?e:[]}var F_=Q4,G4=Jr,Y4=D_,K4=tn,X4=F_,Z4=mS,J4=K4(function(e){var t=Z4(e),n=G4(e,X4);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?Y4(n,void 0,t):[]}),L_=J4,e5=V1,t5=Ab,r5="[object Boolean]";function n5(e){return e===!0||e===!1||t5(e)&&e5(e)==r5}var a5=n5,jt=q_,i5=oh,mh=Ib,ny=O_,o5=pS,s5=L_,es=Pp,yc=a5,ay=e=>Array.isArray(e)?e:[e],Lt=e=>e===void 0,so=e=>es(e)||Array.isArray(e)?Object.keys(e):[],Hn=(e,t)=>e.hasOwnProperty(t),ia=e=>i5(mh(e)),iy=e=>Lt(e)||Array.isArray(e)&&e.length===0,l5=(e,t,n,a)=>t&&Hn(t,n)&&e&&Hn(e,n)&&a(e[n],t[n]),bc=(e,t)=>Lt(e)&&t===0||Lt(t)&&e===0||jt(e,t),u5=(e,t)=>Lt(e)&&t===!1||Lt(t)&&e===!1||jt(e,t),oy=e=>Lt(e)||jt(e,{})||e===!0,lo=e=>Lt(e)||jt(e,{}),sy=e=>Lt(e)||es(e)||e===!0||e===!1;function ly(e,t){return iy(e)&&iy(t)?!0:jt(ia(e),ia(t))}function c5(e,t){return e=ay(e),t=ay(t),jt(ia(e),ia(t))}function Co(e,t,n,a){var r=mh(so(e).concat(so(t)));return lo(e)&&lo(t)?!0:lo(e)&&so(t).length||lo(t)&&so(e).length?!1:r.every(function(i){var o=e[i],s=t[i];return Array.isArray(o)&&Array.isArray(s)?jt(ia(e),ia(t)):Array.isArray(o)&&!Array.isArray(s)||Array.isArray(s)&&!Array.isArray(o)?!1:l5(e,t,i,a)})}function d5(e,t,n,a){return es(e)&&es(t)?a(e,t):Array.isArray(e)&&Array.isArray(t)?Co(e,t,n,a):jt(e,t)}function wc(e,t,n,a){var r=ny(e,a),i=ny(t,a),o=s5(r,i,a);return o.length===Math.max(r.length,i.length)}var f5={title:jt,uniqueItems:u5,minLength:bc,minItems:bc,minProperties:bc,required:ly,enum:ly,type:c5,items:d5,anyOf:wc,allOf:wc,oneOf:wc,properties:Co,patternProperties:Co,dependencies:Co},p5=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],h5=["additionalProperties","additionalItems","contains","propertyNames","not"];function $d(e,t,n){if(n=o5(n,{ignore:[]}),oy(e)&&oy(t))return!0;if(!sy(e)||!sy(t))throw new Error("Either of the values are not a JSON schema.");if(e===t)return!0;if(yc(e)&&yc(t))return e===t;if(e===void 0&&t===!1||t===void 0&&e===!1||Lt(e)&&!Lt(t)||!Lt(e)&&Lt(t))return!1;var a=mh(Object.keys(e).concat(Object.keys(t)));if(n.ignore.length&&(a=a.filter(i=>n.ignore.indexOf(i)===-1)),!a.length)return!0;function r(i,o){return $d(i,o,n)}return a.every(function(i){var o=e[i],s=t[i];if(h5.indexOf(i)!==-1)return $d(o,s,n);var l=f5[i];if(l||(l=jt),jt(o,s))return!0;if(p5.indexOf(i)===-1&&(!Hn(e,i)&&Hn(t,i)||Hn(e,i)&&!Hn(t,i)))return o===s;var c=l(o,s,i,r);if(!yc(c))throw new Error("Comparer must return true or false");return c})}var m5=$d;function v5(e){return Object.prototype.toString.call(e)==="[object Array]"}var vh=Array.isArray||v5;function g5(e){return(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")&&e.valueOf()===e.valueOf()}var y5=g5,b5=y5;function w5(e){return b5(e)&&e%1===0}var S5=w5,_5=vh,E5=S5;function C5(e){var t;if(!_5(e)||(t=e.length,!t))return!1;for(var n=0;n<t;n++)if(!E5(e[n]))return!1;return!0}var V_=C5;function x5(e){return typeof e=="function"}var M_=x5,N5=vh,uy=V_,I5=M_,uo=Math.pow(2,31)-1;function cy(e,t){var n=1,a;if(e===0)return t;if(t===0)return e;for(;e%2===0&&t%2===0;)e=e/2,t=t/2,n=n*2;for(;e%2===0;)e=e/2;for(;t;){for(;t%2===0;)t=t/2;e>t&&(a=t,t=e,e=a),t=t-e}return n*e}function dy(e,t){var n=0,a;if(e===0)return t;if(t===0)return e;for(;!(e&1)&&!(t&1);)e>>>=1,t>>>=1,n++;for(;!(e&1);)e>>>=1;for(;t;){for(;!(t&1);)t>>>=1;e>t&&(a=t,t=e,e=a),t=t-e}return e<<n}function T5(){var e=arguments.length,t,n,a,r,i,o,s;for(t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(uy(t)){if(e===2)return i=t[0],o=t[1],i<0&&(i=-i),o<0&&(o=-o),i<=uo&&o<=uo?dy(i,o):cy(i,o);a=t}else if(N5(t[0]))if(e>1){if(a=t[0],n=t[1],!I5(n))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+n+"`.")}else a=t[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+t[0]+"`.");if(r=a.length,r<2)return null;if(n){for(i=new Array(r),s=0;s<r;s++)i[s]=n(a[s],s);a=i}if(e<3&&!uy(a))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+a+"`.");for(s=0;s<r;s++)i=a[s],i<0&&(a[s]=-i);for(i=a[0],s=1;s<r;s++)o=a[s],o<=uo&&i<=uo?i=dy(i,o):i=cy(i,o);return i}var P5=T5,fy=P5,R5=vh,py=V_,A5=M_;function k5(){var e=arguments.length,t,n,a,r,i,o,s;for(t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(py(t)){if(e===2)return i=t[0],o=t[1],i<0&&(i=-i),o<0&&(o=-o),i===0||o===0?0:i/fy(i,o)*o;a=t}else if(R5(t[0]))if(e>1){if(a=t[0],n=t[1],!A5(n))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+n+"`.")}else a=t[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+t[0]+"`.");if(r=a.length,r<2)return null;if(n){for(i=new Array(r),s=0;s<r;s++)i[s]=n(a[s],s);a=i}if(e<3&&!py(a))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+a+"`.");for(s=0;s<r;s++)i=a[s],i<0&&(a[s]=-i);for(i=a[0],s=1;s<r;s++){if(o=a[s],i===0||o===0)return 0;i=i/fy(i,o)*o}return i}var $5=k5,q5=ih,hy=_i;function B_(e,t,n,a,r,i){return hy(e)&&hy(t)&&(i.set(t,e),q5(e,t,void 0,B_,i),i.delete(t)),e}var O5=B_,D5=ih,F5=bS,L5=F5(function(e,t,n,a){D5(e,t,n,a)}),V5=L5,M5=rS,B5=tn,U5=O5,z5=V5,H5=B5(function(e){return e.push(void 0,U5),M5(z5,void 0,e)}),W5=H5,j5=Zs,Q5=1/0;function G5(e){var t=e==null?0:e.length;return t?j5(e,Q5):[]}var Y5=G5,K5=Jr,X5=D_,Z5=tn,J5=F_,e6=Z5(function(e){var t=K5(e,J5);return t.length&&t[0]===e[0]?X5(t):[]}),t6=e6;function r6(e,t,n,a){for(var r=n-1,i=e.length;++r<i;)if(a(e[r],t))return r;return-1}var n6=r6,a6=Jr,i6=_1,o6=n6,s6=qs,l6=Eb,u6=Array.prototype,my=u6.splice;function c6(e,t,n,a){var r=a?o6:i6,i=-1,o=t.length,s=e;for(e===t&&(t=l6(t)),n&&(s=a6(e,s6(n)));++i<o;)for(var l=0,c=t[i],u=n?n(c):c;(l=r(s,u,l,a))>-1;)s!==e&&my.call(s,l,1),my.call(e,l,1);return e}var d6=c6,f6=d6;function p6(e,t){return e&&e.length&&t&&t.length?f6(e,t):e}var h6=p6,m6=qb,v6=xb,g6=Nb,y6=Jr,b6=qs,w6=Ob,S6=200;function _6(e,t,n,a){var r=-1,i=v6,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=y6(t,b6(n))),a?(i=g6,o=!1):t.length>=S6&&(i=w6,o=!1,t=new m6(t));e:for(;++r<s;){var u=e[r],d=n==null?u:n(u);if(u=a||u!==0?u:0,o&&d===d){for(var f=c;f--;)if(t[f]===d)continue e;l.push(u)}else i(t,d,a)||l.push(u)}return l}var E6=_6,C6=E6,x6=tn,N6=Js,I6=x6(function(e,t){return N6(e)?C6(e,t):[]}),T6=I6,U_=Cb,ui=m5,P6=$5,R6=W5,gh=nh,yh=Y5,A6=t6,k6=L_,qd=q_,ci=Pp,vy=h6,z_=oh,H_=th,bh=Ib,mn=O_,$6=T6,gy=(e,...t)=>$6.apply(null,[e].concat(gh(t))),q6=e=>mr(Y_,e),O6=e=>mr(K_,e),mr=(e,t)=>e.indexOf(t)!==-1,D6=e=>!ln(e).length&&e!==!1&&e!==!0,Od=e=>ci(e)||e===!0||e===!1,F6=e=>e===!1,W_=e=>e===!0,ml=(e,t,n)=>n(e),j_=e=>z_(bh(yh(e))),xn=e=>e!==void 0,wh=e=>bh(yh(e.map(ln))),ya=e=>e[0],L6=e=>j_(e),ki=e=>Math.max.apply(Math,e),$i=e=>Math.min.apply(Math,e),V6=e=>e.some(W_),M6=e=>mn(gh(e),qd);function B6(e){return function(t,n){return ui({[e]:t},{[e]:n})}}function Q_(e){if(Array.isArray(e.allOf)){var t=e.allOf;return delete e.allOf,[e].concat(t.map(function(n){return Q_(n)}))}else return[e]}function Sh(e,t){return e.map(function(n){return n&&n[t]})}function U6(e,t){return e.map(function(n){if(n)if(Array.isArray(n.items)){var a=n.items[t];if(Od(a))return a;if(n.hasOwnProperty("additionalItems"))return n.additionalItems}else return n.items})}function z6(e,t){return e.map(function(n,a){try{return t(n,a)}catch{return}}).filter(xn)}function H6(e){return e.map(function(t){if(t)return Array.isArray(t.items)?t.additionalItems:t.items})}function ln(e){return ci(e)||Array.isArray(e)?Object.keys(e):[]}function Dd(e,t){if(t=t||[],!e.length)return t;var n=e.slice(0).shift(),a=e.slice(1);return t.length?Dd(a,gh(t.map(r=>n.map(i=>[i].concat(r))))):Dd(a,n.map(r=>r))}function W6(e,t){return Array.isArray(e)?(e.splice.apply(e,[0,0].concat(t)),e):t}function G_(e,t){var n;try{n=e.map(function(a){return JSON.stringify(a,null,2)}).join(`
`)}catch{n=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+`". They are probably incompatible. Values: 
`+n)}function j6(e){for(var t in e)e.hasOwnProperty(t)&&D6(e[t])&&delete e[t];return e}function Fd(e,t,n){return function(a,r){if(r===void 0)throw new Error("You need to call merger with a key for the property name or index if array.");return r=String(r),e(a,null,n.concat(t,r))}}function yy(e,t,n,a,r,i){if(e.length){var o=r.resolvers[t];if(!o)throw new Error("No resolver found for "+t);var s=mn(n.map(function(d){return e.reduce(function(f,p){return d[p]!==void 0&&(f[p]=d[p]),f},{})}).filter(xn),ui),l=t==="properties"?Y_:K_,c=l.reduce(function(d,f){return mr(Ld,f)?d[f]=Fd(a,f,i):d[f]=function(p){return a(p,null,i.concat(f))},d},{});t==="items"&&(c.itemsArray=Fd(a,"items",i),c.items=function(d){return a(d,null,i.concat("items"))});var u=o(s,i.concat(t),c,r);return ci(u)||G_(s,i.concat(t)),j6(u)}}function Sc(e,t,n){var a=wh(n||e),r=n?U6:Sh;return a.reduce(function(i,o){var s=r(e,o),l=mn(s.filter(xn),ui);return i[o]=t(l,o),i},n?[]:{})}function Q6(e){H_(e,function(t,n){t===!1&&delete e[n]})}function G6(e){H_(e,function(t,n){t===!1&&e.splice(n,1)})}function Y6(e){return{required:e}}var Y_=["properties","patternProperties","additionalProperties"],K_=["items","additionalItems"],Ld=["properties","patternProperties","definitions","dependencies"],by=["anyOf","oneOf"],K6=["additionalProperties","additionalItems","contains","propertyNames","not","items"],Fe={type(e){if(e.some(Array.isArray)){var t=e.map(function(a){return Array.isArray(a)?a:[a]}),n=A6.apply(null,t);if(n.length===1)return n[0];if(n.length>1)return bh(n)}},properties(e,t,n,a){a.ignoreAdditionalProperties||(e.forEach(function(i){var o=e.filter(u=>u!==i),s=ln(i.properties),l=ln(i.patternProperties),c=l.map(u=>new RegExp(u));o.forEach(function(u){var d=ln(u.properties),f=d.filter(h=>c.some(v=>v.test(h))),p=gy(d,s,f);p.forEach(function(h){u.properties[h]=n.properties([u.properties[h],i.additionalProperties],h)})})}),e.forEach(function(i){var o=e.filter(l=>l!==i),s=ln(i.patternProperties);i.additionalProperties===!1&&o.forEach(function(l){var c=ln(l.patternProperties),u=gy(c,s);u.forEach(d=>delete l.patternProperties[d])})}));var r={additionalProperties:n.additionalProperties(e.map(i=>i.additionalProperties)),patternProperties:Sc(e.map(i=>i.patternProperties),n.patternProperties),properties:Sc(e.map(i=>i.properties),n.properties)};return r.additionalProperties===!1&&Q6(r.properties),r},dependencies(e,t,n){var a=wh(e);return a.reduce(function(r,i){var o=Sh(e,i),s=mn(o.filter(xn),qd),l=s.filter(Array.isArray);if(l.length){if(l.length===s.length)r[i]=j_(s);else{var c=s.filter(Od),u=l.map(Y6);r[i]=n(c.concat(u),i)}return r}return s=mn(s,ui),r[i]=n(s,i),r},{})},items(e,t,n){var a=e.map(s=>s.items),r=a.filter(xn),i={};r.every(Od)?i.items=n.items(a):i.items=Sc(e,n.itemsArray,a);var o;return r.every(Array.isArray)?o=e.map(s=>s.additionalItems):r.some(Array.isArray)&&(o=H6(e)),o&&(i.additionalItems=n.additionalItems(o)),i.additionalItems===!1&&Array.isArray(i.items)&&G6(i.items),i},oneOf(e,t,n){var a=Dd(U_(e)),r=z6(a,n),i=mn(r,ui);if(i.length)return i},not(e){return{anyOf:e}},pattern(e,t,n,a,r){var i=t.pop();r(e.map(function(o){return{[i]:o}}))},multipleOf(e){for(var t=e.slice(0),n=1;t.some(a=>!Number.isInteger(a));)t=t.map(a=>a*10),n=n*10;return P6(t)/n},enum(e){var t=k6.apply(null,e.concat(qd));if(t.length)return z_(t)}};Fe.$id=ya;Fe.$ref=ya;Fe.$schema=ya;Fe.additionalItems=ml;Fe.additionalProperties=ml;Fe.anyOf=Fe.oneOf;Fe.contains=ml;Fe.default=ya;Fe.definitions=Fe.dependencies;Fe.description=ya;Fe.examples=M6;Fe.exclusiveMaximum=$i;Fe.exclusiveMinimum=ki;Fe.maximum=$i;Fe.maxItems=$i;Fe.maxLength=$i;Fe.maxProperties=$i;Fe.minimum=ki;Fe.minItems=ki;Fe.minLength=ki;Fe.minProperties=ki;Fe.propertyNames=ml;Fe.required=L6;Fe.title=ya;Fe.uniqueItems=V6;function _h(e,t,n){t=R6(t,{ignoreAdditionalProperties:!1,resolvers:Fe});function a(o,s,l){o=U_(o.filter(xn)),l=l||[];var c=ci(s)?s:{};if(!o.length)return;if(o.some(F6))return!1;if(o.every(W_))return!0;o=o.filter(ci);var u=wh(o);if(mr(u,"allOf"))return _h({allOf:o},t);var d=u.filter(q6);vy(u,d);var f=u.filter(O6);vy(u,f),u.forEach(function(h){var v=Sh(o,h),g=mn(v.filter(xn),B6(h));if(g.length===1&&mr(by,h))c[h]=g[0].map(function(_){return a([_],_)});else if(g.length===1&&!mr(Ld,h)&&!mr(K6,h))c[h]=g[0];else{var b=t.resolvers[h]||t.resolvers.defaultResolver;if(!b)throw new Error("No resolver found for key "+h+". You can provide a resolver for this keyword in the options, or provide a default resolver.");var E;mr(Ld,h)||mr(by,h)?E=Fd(a,h,l):E=function(_){return a(_,null,l.concat(h))};var y=!1;c[h]=b(g,l.concat(h),E,t,function(_){return y=Array.isArray(_),p(_)}),c[h]===void 0&&!y?G_(g,l.concat(h)):c[h]===void 0&&delete c[h]}}),Object.assign(c,yy(d,"properties",o,a,t,l)),Object.assign(c,yy(f,"items",o,a,t,l));function p(h){c.allOf=W6(c.allOf,h)}return c}var r=yh(Q_(e)),i=a(r,e);return i}_h.options={resolvers:Fe};var X6=_h;const Z6=Et(X6);var J6=E_,wy=P_,eB=R_,tB=function(t){for(var n=J6(this),a=eB(n),r=arguments.length,i=wy(r>1?arguments[1]:void 0,a),o=r>2?arguments[2]:void 0,s=o===void 0?a:wy(o,a);s>i;)n[i++]=t;return n},rB=I_,nB=tB;rB({target:"Array",proto:!0},{fill:nB});var aB=A_,iB=aB("Array","fill"),oB=iB,sB=oB,lB=sB,uB=lB,cB=uB,dB=cB,fB=dB;const pB=Et(fB);var vl={},hB=/~/,mB=/~[01]/g;function vB(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function X_(e){return hB.test(e)?e.replace(mB,vB):e}function gB(e,t,n){for(var a,r,i=1,o=t.length;i<o;){if(t[i]==="constructor"||t[i]==="prototype"||t[i]==="__proto__")return e;if(a=X_(t[i++]),r=o>i,typeof e[a]>"u"&&(Array.isArray(e)&&a==="-"&&(a=e.length),r&&(t[i]!==""&&t[i]<1/0||t[i]==="-"?e[a]=[]:e[a]={})),!r)break;e=e[a]}var s=e[a];return n===void 0?delete e[a]:e[a]=n,s}function Eh(e){if(typeof e=="string"){if(e=e.split("/"),e[0]==="")return e;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(e)){for(const t of e)if(typeof t!="string"&&typeof t!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function Z_(e,t){if(typeof e!="object")throw new Error("Invalid input object.");t=Eh(t);var n=t.length;if(n===1)return e;for(var a=1;a<n;){if(e=e[X_(t[a++])],n===a)return e;if(typeof e!="object"||e===null)return}}function J_(e,t,n){if(typeof e!="object")throw new Error("Invalid input object.");if(t=Eh(t),t.length===0)throw new Error("Invalid JSON pointer for set.");return gB(e,t,n)}function yB(e){var t=Eh(e);return{get:function(n){return Z_(n,t)},set:function(n,a){return J_(n,t,a)}}}vl.get=Z_;vl.set=J_;vl.compile=yB;var Vd={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,a){a(t)})(Gr,function(n){function a(){for(var M=arguments.length,D=Array(M),U=0;U<M;U++)D[U]=arguments[U];if(D.length>1){D[0]=D[0].slice(0,-1);for(var j=D.length-1,H=1;H<j;++H)D[H]=D[H].slice(1,-1);return D[j]=D[j].slice(1),D.join("")}else return D[0]}function r(M){return"(?:"+M+")"}function i(M){return M===void 0?"undefined":M===null?"null":Object.prototype.toString.call(M).split(" ").pop().split("]").shift().toLowerCase()}function o(M){return M.toUpperCase()}function s(M){return M!=null?M instanceof Array?M:typeof M.length!="number"||M.split||M.setInterval||M.call?[M]:Array.prototype.slice.call(M):[]}function l(M,D){var U=M;if(D)for(var j in D)U[j]=D[j];return U}function c(M){var D="[A-Za-z]",U="[0-9]",j=a(U,"[A-Fa-f]"),H=r(r("%[EFef]"+j+"%"+j+j+"%"+j+j)+"|"+r("%[89A-Fa-f]"+j+"%"+j+j)+"|"+r("%"+j+j)),te="[\\:\\/\\?\\#\\[\\]\\@]",se="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ce=a(te,se),Ve=M?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ye=M?"[\\uE000-\\uF8FF]":"[]",_e=a(D,U,"[\\-\\.\\_\\~]",Ve);r(D+a(D,U,"[\\+\\-\\.]")+"*"),r(r(H+"|"+a(_e,se,"[\\:]"))+"*");var De=r(r("25[0-5]")+"|"+r("2[0-4]"+U)+"|"+r("1"+U+U)+"|"+r("0?[1-9]"+U)+"|0?0?"+U),Ke=r(De+"\\."+De+"\\."+De+"\\."+De),me=r(j+"{1,4}"),Ue=r(r(me+"\\:"+me)+"|"+Ke),Je=r(r(me+"\\:")+"{6}"+Ue),ze=r("\\:\\:"+r(me+"\\:")+"{5}"+Ue),Zt=r(r(me)+"?\\:\\:"+r(me+"\\:")+"{4}"+Ue),Nt=r(r(r(me+"\\:")+"{0,1}"+me)+"?\\:\\:"+r(me+"\\:")+"{3}"+Ue),Ot=r(r(r(me+"\\:")+"{0,2}"+me)+"?\\:\\:"+r(me+"\\:")+"{2}"+Ue),Ir=r(r(r(me+"\\:")+"{0,3}"+me)+"?\\:\\:"+me+"\\:"+Ue),dr=r(r(r(me+"\\:")+"{0,4}"+me)+"?\\:\\:"+Ue),gt=r(r(r(me+"\\:")+"{0,5}"+me)+"?\\:\\:"+me),yt=r(r(r(me+"\\:")+"{0,6}"+me)+"?\\:\\:"),on=r([Je,ze,Zt,Nt,Ot,Ir,dr,gt,yt].join("|")),fr=r(r(_e+"|"+H)+"+");r("[vV]"+j+"+\\."+a(_e,se,"[\\:]")+"+"),r(r(H+"|"+a(_e,se))+"*");var Ea=r(H+"|"+a(_e,se,"[\\:\\@]"));return r(r(H+"|"+a(_e,se,"[\\@]"))+"+"),r(r(Ea+"|"+a("[\\/\\?]",Ye))+"*"),{NOT_SCHEME:new RegExp(a("[^]",D,U,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(a("[^\\%\\:]",_e,se),"g"),NOT_HOST:new RegExp(a("[^\\%\\[\\]\\:]",_e,se),"g"),NOT_PATH:new RegExp(a("[^\\%\\/\\:\\@]",_e,se),"g"),NOT_PATH_NOSCHEME:new RegExp(a("[^\\%\\/\\@]",_e,se),"g"),NOT_QUERY:new RegExp(a("[^\\%]",_e,se,"[\\:\\@\\/\\?]",Ye),"g"),NOT_FRAGMENT:new RegExp(a("[^\\%]",_e,se,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(a("[^]",_e,se),"g"),UNRESERVED:new RegExp(_e,"g"),OTHER_CHARS:new RegExp(a("[^\\%]",_e,Ce),"g"),PCT_ENCODED:new RegExp(H,"g"),IPV4ADDRESS:new RegExp("^("+Ke+")$"),IPV6ADDRESS:new RegExp("^\\[?("+on+")"+r(r("\\%25|\\%(?!"+j+"{2})")+"("+fr+")")+"?\\]?$")}}var u=c(!1),d=c(!0),f=function(){function M(D,U){var j=[],H=!0,te=!1,se=void 0;try{for(var Ce=D[Symbol.iterator](),Ve;!(H=(Ve=Ce.next()).done)&&(j.push(Ve.value),!(U&&j.length===U));H=!0);}catch(Ye){te=!0,se=Ye}finally{try{!H&&Ce.return&&Ce.return()}finally{if(te)throw se}}return j}return function(D,U){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return M(D,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(M){if(Array.isArray(M)){for(var D=0,U=Array(M.length);D<M.length;D++)U[D]=M[D];return U}else return Array.from(M)},h=2147483647,v=36,g=1,b=26,E=38,y=700,_=72,w=128,S="-",C=/^xn--/,x=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=v-g,O=Math.floor,T=String.fromCharCode;function N(M){throw new RangeError(P[M])}function A(M,D){for(var U=[],j=M.length;j--;)U[j]=D(M[j]);return U}function k(M,D){var U=M.split("@"),j="";U.length>1&&(j=U[0]+"@",M=U[1]),M=M.replace(I,".");var H=M.split("."),te=A(H,D).join(".");return j+te}function R(M){for(var D=[],U=0,j=M.length;U<j;){var H=M.charCodeAt(U++);if(H>=55296&&H<=56319&&U<j){var te=M.charCodeAt(U++);(te&64512)==56320?D.push(((H&1023)<<10)+(te&1023)+65536):(D.push(H),U--)}else D.push(H)}return D}var V=function(D){return String.fromCodePoint.apply(String,p(D))},F=function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:v},z=function(D,U){return D+22+75*(D<26)-((U!=0)<<5)},W=function(D,U,j){var H=0;for(D=j?O(D/y):D>>1,D+=O(D/U);D>q*b>>1;H+=v)D=O(D/q);return O(H+(q+1)*D/(D+E))},G=function(D){var U=[],j=D.length,H=0,te=w,se=_,Ce=D.lastIndexOf(S);Ce<0&&(Ce=0);for(var Ve=0;Ve<Ce;++Ve)D.charCodeAt(Ve)>=128&&N("not-basic"),U.push(D.charCodeAt(Ve));for(var Ye=Ce>0?Ce+1:0;Ye<j;){for(var _e=H,De=1,Ke=v;;Ke+=v){Ye>=j&&N("invalid-input");var me=F(D.charCodeAt(Ye++));(me>=v||me>O((h-H)/De))&&N("overflow"),H+=me*De;var Ue=Ke<=se?g:Ke>=se+b?b:Ke-se;if(me<Ue)break;var Je=v-Ue;De>O(h/Je)&&N("overflow"),De*=Je}var ze=U.length+1;se=W(H-_e,ze,_e==0),O(H/ze)>h-te&&N("overflow"),te+=O(H/ze),H%=ze,U.splice(H++,0,te)}return String.fromCodePoint.apply(String,U)},K=function(D){var U=[];D=R(D);var j=D.length,H=w,te=0,se=_,Ce=!0,Ve=!1,Ye=void 0;try{for(var _e=D[Symbol.iterator](),De;!(Ce=(De=_e.next()).done);Ce=!0){var Ke=De.value;Ke<128&&U.push(T(Ke))}}catch(Ca){Ve=!0,Ye=Ca}finally{try{!Ce&&_e.return&&_e.return()}finally{if(Ve)throw Ye}}var me=U.length,Ue=me;for(me&&U.push(S);Ue<j;){var Je=h,ze=!0,Zt=!1,Nt=void 0;try{for(var Ot=D[Symbol.iterator](),Ir;!(ze=(Ir=Ot.next()).done);ze=!0){var dr=Ir.value;dr>=H&&dr<Je&&(Je=dr)}}catch(Ca){Zt=!0,Nt=Ca}finally{try{!ze&&Ot.return&&Ot.return()}finally{if(Zt)throw Nt}}var gt=Ue+1;Je-H>O((h-te)/gt)&&N("overflow"),te+=(Je-H)*gt,H=Je;var yt=!0,on=!1,fr=void 0;try{for(var Ea=D[Symbol.iterator](),Uh;!(yt=(Uh=Ea.next()).done);yt=!0){var zh=Uh.value;if(zh<H&&++te>h&&N("overflow"),zh==H){for(var Mi=te,Bi=v;;Bi+=v){var Ui=Bi<=se?g:Bi>=se+b?b:Bi-se;if(Mi<Ui)break;var Hh=Mi-Ui,Wh=v-Ui;U.push(T(z(Ui+Hh%Wh,0))),Mi=O(Hh/Wh)}U.push(T(z(Mi,0))),se=W(te,gt,Ue==me),te=0,++Ue}}}catch(Ca){on=!0,fr=Ca}finally{try{!yt&&Ea.return&&Ea.return()}finally{if(on)throw fr}}++te,++H}return U.join("")},Y=function(D){return k(D,function(U){return C.test(U)?G(U.slice(4).toLowerCase()):U})},X=function(D){return k(D,function(U){return x.test(U)?"xn--"+K(U):U})},J={version:"2.1.0",ucs2:{decode:R,encode:V},decode:G,encode:K,toASCII:X,toUnicode:Y},ee={};function ce(M){var D=M.charCodeAt(0),U=void 0;return D<16?U="%0"+D.toString(16).toUpperCase():D<128?U="%"+D.toString(16).toUpperCase():D<2048?U="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():U="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),U}function ve(M){for(var D="",U=0,j=M.length;U<j;){var H=parseInt(M.substr(U+1,2),16);if(H<128)D+=String.fromCharCode(H),U+=3;else if(H>=194&&H<224){if(j-U>=6){var te=parseInt(M.substr(U+4,2),16);D+=String.fromCharCode((H&31)<<6|te&63)}else D+=M.substr(U,6);U+=6}else if(H>=224){if(j-U>=9){var se=parseInt(M.substr(U+4,2),16),Ce=parseInt(M.substr(U+7,2),16);D+=String.fromCharCode((H&15)<<12|(se&63)<<6|Ce&63)}else D+=M.substr(U,9);U+=9}else D+=M.substr(U,3),U+=3}return D}function ne(M,D){function U(j){var H=ve(j);return H.match(D.UNRESERVED)?H:j}return M.scheme&&(M.scheme=String(M.scheme).replace(D.PCT_ENCODED,U).toLowerCase().replace(D.NOT_SCHEME,"")),M.userinfo!==void 0&&(M.userinfo=String(M.userinfo).replace(D.PCT_ENCODED,U).replace(D.NOT_USERINFO,ce).replace(D.PCT_ENCODED,o)),M.host!==void 0&&(M.host=String(M.host).replace(D.PCT_ENCODED,U).toLowerCase().replace(D.NOT_HOST,ce).replace(D.PCT_ENCODED,o)),M.path!==void 0&&(M.path=String(M.path).replace(D.PCT_ENCODED,U).replace(M.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,ce).replace(D.PCT_ENCODED,o)),M.query!==void 0&&(M.query=String(M.query).replace(D.PCT_ENCODED,U).replace(D.NOT_QUERY,ce).replace(D.PCT_ENCODED,o)),M.fragment!==void 0&&(M.fragment=String(M.fragment).replace(D.PCT_ENCODED,U).replace(D.NOT_FRAGMENT,ce).replace(D.PCT_ENCODED,o)),M}function de(M){return M.replace(/^0*(.*)/,"$1")||"0"}function Te(M,D){var U=M.match(D.IPV4ADDRESS)||[],j=f(U,2),H=j[1];return H?H.split(".").map(de).join("."):M}function be(M,D){var U=M.match(D.IPV6ADDRESS)||[],j=f(U,3),H=j[1],te=j[2];if(H){for(var se=H.toLowerCase().split("::").reverse(),Ce=f(se,2),Ve=Ce[0],Ye=Ce[1],_e=Ye?Ye.split(":").map(de):[],De=Ve.split(":").map(de),Ke=D.IPV4ADDRESS.test(De[De.length-1]),me=Ke?7:8,Ue=De.length-me,Je=Array(me),ze=0;ze<me;++ze)Je[ze]=_e[ze]||De[Ue+ze]||"";Ke&&(Je[me-1]=Te(Je[me-1],D));var Zt=Je.reduce(function(gt,yt,on){if(!yt||yt==="0"){var fr=gt[gt.length-1];fr&&fr.index+fr.length===on?fr.length++:gt.push({index:on,length:1})}return gt},[]),Nt=Zt.sort(function(gt,yt){return yt.length-gt.length})[0],Ot=void 0;if(Nt&&Nt.length>1){var Ir=Je.slice(0,Nt.index),dr=Je.slice(Nt.index+Nt.length);Ot=Ir.join(":")+"::"+dr.join(":")}else Ot=Je.join(":");return te&&(Ot+="%"+te),Ot}else return M}var ae=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,fe="".match(/(){0}/)[1]===void 0;function we(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U={},j=D.iri!==!1?d:u;D.reference==="suffix"&&(M=(D.scheme?D.scheme+":":"")+"//"+M);var H=M.match(ae);if(H){fe?(U.scheme=H[1],U.userinfo=H[3],U.host=H[4],U.port=parseInt(H[5],10),U.path=H[6]||"",U.query=H[7],U.fragment=H[8],isNaN(U.port)&&(U.port=H[5])):(U.scheme=H[1]||void 0,U.userinfo=M.indexOf("@")!==-1?H[3]:void 0,U.host=M.indexOf("//")!==-1?H[4]:void 0,U.port=parseInt(H[5],10),U.path=H[6]||"",U.query=M.indexOf("?")!==-1?H[7]:void 0,U.fragment=M.indexOf("#")!==-1?H[8]:void 0,isNaN(U.port)&&(U.port=M.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?H[4]:void 0)),U.host&&(U.host=be(Te(U.host,j),j)),U.scheme===void 0&&U.userinfo===void 0&&U.host===void 0&&U.port===void 0&&!U.path&&U.query===void 0?U.reference="same-document":U.scheme===void 0?U.reference="relative":U.fragment===void 0?U.reference="absolute":U.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==U.reference&&(U.error=U.error||"URI is not a "+D.reference+" reference.");var te=ee[(D.scheme||U.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!te||!te.unicodeSupport)){if(U.host&&(D.domainHost||te&&te.domainHost))try{U.host=J.toASCII(U.host.replace(j.PCT_ENCODED,ve).toLowerCase())}catch(se){U.error=U.error||"Host's domain name can not be converted to ASCII via punycode: "+se}ne(U,u)}else ne(U,j);te&&te.parse&&te.parse(U,D)}else U.error=U.error||"URI can not be parsed.";return U}function ie(M,D){var U=D.iri!==!1?d:u,j=[];return M.userinfo!==void 0&&(j.push(M.userinfo),j.push("@")),M.host!==void 0&&j.push(be(Te(String(M.host),U),U).replace(U.IPV6ADDRESS,function(H,te,se){return"["+te+(se?"%25"+se:"")+"]"})),(typeof M.port=="number"||typeof M.port=="string")&&(j.push(":"),j.push(String(M.port))),j.length?j.join(""):void 0}var Ge=/^\.\.?\//,Pe=/^\/\.(\/|$)/,Me=/^\/\.\.(\/|$)/,ot=/^\/?(?:.|\n)*?(?=\/|$)/;function Re(M){for(var D=[];M.length;)if(M.match(Ge))M=M.replace(Ge,"");else if(M.match(Pe))M=M.replace(Pe,"/");else if(M.match(Me))M=M.replace(Me,"/"),D.pop();else if(M==="."||M==="..")M="";else{var U=M.match(ot);if(U){var j=U[0];M=M.slice(j.length),D.push(j)}else throw new Error("Unexpected dot segment condition")}return D.join("")}function Z(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=D.iri?d:u,j=[],H=ee[(D.scheme||M.scheme||"").toLowerCase()];if(H&&H.serialize&&H.serialize(M,D),M.host&&!U.IPV6ADDRESS.test(M.host)){if(D.domainHost||H&&H.domainHost)try{M.host=D.iri?J.toUnicode(M.host):J.toASCII(M.host.replace(U.PCT_ENCODED,ve).toLowerCase())}catch(Ce){M.error=M.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+Ce}}ne(M,U),D.reference!=="suffix"&&M.scheme&&(j.push(M.scheme),j.push(":"));var te=ie(M,D);if(te!==void 0&&(D.reference!=="suffix"&&j.push("//"),j.push(te),M.path&&M.path.charAt(0)!=="/"&&j.push("/")),M.path!==void 0){var se=M.path;!D.absolutePath&&(!H||!H.absolutePath)&&(se=Re(se)),te===void 0&&(se=se.replace(/^\/\//,"/%2F")),j.push(se)}return M.query!==void 0&&(j.push("?"),j.push(M.query)),M.fragment!==void 0&&(j.push("#"),j.push(M.fragment)),j.join("")}function le(M,D){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},j=arguments[3],H={};return j||(M=we(Z(M,U),U),D=we(Z(D,U),U)),U=U||{},!U.tolerant&&D.scheme?(H.scheme=D.scheme,H.userinfo=D.userinfo,H.host=D.host,H.port=D.port,H.path=Re(D.path||""),H.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(H.userinfo=D.userinfo,H.host=D.host,H.port=D.port,H.path=Re(D.path||""),H.query=D.query):(D.path?(D.path.charAt(0)==="/"?H.path=Re(D.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?H.path="/"+D.path:M.path?H.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+D.path:H.path=D.path,H.path=Re(H.path)),H.query=D.query):(H.path=M.path,D.query!==void 0?H.query=D.query:H.query=M.query),H.userinfo=M.userinfo,H.host=M.host,H.port=M.port),H.scheme=M.scheme),H.fragment=D.fragment,H}function pe(M,D,U){var j=l({scheme:"null"},U);return Z(le(we(M,j),we(D,j),j,!0),j)}function Ne(M,D){return typeof M=="string"?M=Z(we(M,D),D):i(M)==="object"&&(M=we(Z(M,D),D)),M}function he(M,D,U){return typeof M=="string"?M=Z(we(M,U),U):i(M)==="object"&&(M=Z(M,U)),typeof D=="string"?D=Z(we(D,U),U):i(D)==="object"&&(D=Z(D,U)),M===D}function qt(M,D){return M&&M.toString().replace(!D||!D.iri?u.ESCAPE:d.ESCAPE,ce)}function ye(M,D){return M&&M.toString().replace(!D||!D.iri?u.PCT_ENCODED:d.PCT_ENCODED,ve)}var Be={scheme:"http",domainHost:!0,parse:function(D,U){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},serialize:function(D,U){var j=String(D.scheme).toLowerCase()==="https";return(D.port===(j?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D}},He={scheme:"https",domainHost:Be.domainHost,parse:Be.parse,serialize:Be.serialize};function xt(M){return typeof M.secure=="boolean"?M.secure:String(M.scheme).toLowerCase()==="wss"}var ft={scheme:"ws",domainHost:!0,parse:function(D,U){var j=D;return j.secure=xt(j),j.resourceName=(j.path||"/")+(j.query?"?"+j.query:""),j.path=void 0,j.query=void 0,j},serialize:function(D,U){if((D.port===(xt(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var j=D.resourceName.split("?"),H=f(j,2),te=H[0],se=H[1];D.path=te&&te!=="/"?te:void 0,D.query=se,D.resourceName=void 0}return D.fragment=void 0,D}},Kt={scheme:"wss",domainHost:ft.domainHost,parse:ft.parse,serialize:ft.serialize},kn={},Xt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",vt="[0-9A-Fa-f]",wa=r(r("%[EFef]"+vt+"%"+vt+vt+"%"+vt+vt)+"|"+r("%[89A-Fa-f]"+vt+"%"+vt+vt)+"|"+r("%"+vt+vt)),an="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Sa="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Oi=a(Sa,'[\\"\\\\]'),cr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Cl=new RegExp(Xt,"g"),Nr=new RegExp(wa,"g"),xl=new RegExp(a("[^]",an,"[\\.]",'[\\"]',Oi),"g"),Di=new RegExp(a("[^]",Xt,cr),"g"),Nl=Di;function _a(M){var D=ve(M);return D.match(Cl)?D:M}var Fi={scheme:"mailto",parse:function(D,U){var j=D,H=j.to=j.path?j.path.split(","):[];if(j.path=void 0,j.query){for(var te=!1,se={},Ce=j.query.split("&"),Ve=0,Ye=Ce.length;Ve<Ye;++Ve){var _e=Ce[Ve].split("=");switch(_e[0]){case"to":for(var De=_e[1].split(","),Ke=0,me=De.length;Ke<me;++Ke)H.push(De[Ke]);break;case"subject":j.subject=ye(_e[1],U);break;case"body":j.body=ye(_e[1],U);break;default:te=!0,se[ye(_e[0],U)]=ye(_e[1],U);break}}te&&(j.headers=se)}j.query=void 0;for(var Ue=0,Je=H.length;Ue<Je;++Ue){var ze=H[Ue].split("@");if(ze[0]=ye(ze[0]),U.unicodeSupport)ze[1]=ye(ze[1],U).toLowerCase();else try{ze[1]=J.toASCII(ye(ze[1],U).toLowerCase())}catch(Zt){j.error=j.error||"Email address's domain name can not be converted to ASCII via punycode: "+Zt}H[Ue]=ze.join("@")}return j},serialize:function(D,U){var j=D,H=s(D.to);if(H){for(var te=0,se=H.length;te<se;++te){var Ce=String(H[te]),Ve=Ce.lastIndexOf("@"),Ye=Ce.slice(0,Ve).replace(Nr,_a).replace(Nr,o).replace(xl,ce),_e=Ce.slice(Ve+1);try{_e=U.iri?J.toUnicode(_e):J.toASCII(ye(_e,U).toLowerCase())}catch(Ue){j.error=j.error||"Email address's domain name can not be converted to "+(U.iri?"Unicode":"ASCII")+" via punycode: "+Ue}H[te]=Ye+"@"+_e}j.path=H.join(",")}var De=D.headers=D.headers||{};D.subject&&(De.subject=D.subject),D.body&&(De.body=D.body);var Ke=[];for(var me in De)De[me]!==kn[me]&&Ke.push(me.replace(Nr,_a).replace(Nr,o).replace(Di,ce)+"="+De[me].replace(Nr,_a).replace(Nr,o).replace(Nl,ce));return Ke.length&&(j.query=Ke.join("&")),j}},Il=/^([^\:]+)\:(.*)/,Li={scheme:"urn",parse:function(D,U){var j=D.path&&D.path.match(Il),H=D;if(j){var te=U.scheme||H.scheme||"urn",se=j[1].toLowerCase(),Ce=j[2],Ve=te+":"+(U.nid||se),Ye=ee[Ve];H.nid=se,H.nss=Ce,H.path=void 0,Ye&&(H=Ye.parse(H,U))}else H.error=H.error||"URN can not be parsed.";return H},serialize:function(D,U){var j=U.scheme||D.scheme||"urn",H=D.nid,te=j+":"+(U.nid||H),se=ee[te];se&&(D=se.serialize(D,U));var Ce=D,Ve=D.nss;return Ce.path=(H||U.nid)+":"+Ve,Ce}},Tl=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Vi={scheme:"urn:uuid",parse:function(D,U){var j=D;return j.uuid=j.nss,j.nss=void 0,!U.tolerant&&(!j.uuid||!j.uuid.match(Tl))&&(j.error=j.error||"UUID is not valid."),j},serialize:function(D,U){var j=D;return j.nss=(D.uuid||"").toLowerCase(),j}};ee[Be.scheme]=Be,ee[He.scheme]=He,ee[ft.scheme]=ft,ee[Kt.scheme]=Kt,ee[Fi.scheme]=Fi,ee[Li.scheme]=Li,ee[Vi.scheme]=Vi,n.SCHEMES=ee,n.pctEncChar=ce,n.pctDecChars=ve,n.parse=we,n.removeDotSegments=Re,n.serialize=Z,n.resolveComponents=le,n.resolve=pe,n.normalize=Ne,n.equal=he,n.escapeComponent=qt,n.unescapeComponent=ye,Object.defineProperty(n,"__esModule",{value:!0})})})(Vd,Vd.exports);var bB=Vd.exports,Ch=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var a,r,i;if(Array.isArray(t)){if(a=t.length,a!=n.length)return!1;for(r=a;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),a=i.length,a!==Object.keys(n).length)return!1;for(r=a;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=a;r--!==0;){var o=i[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},wB=function(t){for(var n=0,a=t.length,r=0,i;r<a;)n++,i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<a&&(i=t.charCodeAt(r),(i&64512)==56320&&r++);return n},ba={copy:SB,checkDataType:Md,checkDataTypes:_B,coerceToTypes:EB,toHash:xh,getProperty:Nh,escapeQuotes:Ih,equal:Ch,ucs2length:wB,varOccurences:NB,varReplace:IB,schemaHasRules:TB,schemaHasRulesExcept:PB,schemaUnknownRules:RB,toQuotedString:Bd,getPathExpr:AB,getPath:kB,getData:OB,unescapeFragment:DB,unescapeJsonPointer:Ph,escapeFragment:FB,escapeJsonPointer:Th};function SB(e,t){t=t||{};for(var n in e)t[n]=e[n];return t}function Md(e,t,n,a){var r=a?" !== ":" === ",i=a?" || ":" && ",o=a?"!":"",s=a?"":"!";switch(e){case"null":return t+r+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+r+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+r+'"number"'+i+s+"("+t+" % 1)"+i+t+r+t+(n?i+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+r+'"'+e+'"'+(n?i+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+r+'"'+e+'"'}}function _B(e,t,n){switch(e.length){case 1:return Md(e[0],t,n,!0);default:var a="",r=xh(e);r.array&&r.object&&(a=r.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var i in r)a+=(a?" && ":"")+Md(i,t,n,!0);return a}}var Sy=xh(["string","number","integer","boolean","null"]);function EB(e,t){if(Array.isArray(t)){for(var n=[],a=0;a<t.length;a++){var r=t[a];(Sy[r]||e==="array"&&r==="array")&&(n[n.length]=r)}if(n.length)return n}else{if(Sy[t])return[t];if(e==="array"&&t==="array")return["array"]}}function xh(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var CB=/^[a-z$_][a-z$_0-9]*$/i,xB=/'|\\/g;function Nh(e){return typeof e=="number"?"["+e+"]":CB.test(e)?"."+e:"['"+Ih(e)+"']"}function Ih(e){return e.replace(xB,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function NB(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0}function IB(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")}function TB(e,t){if(typeof e=="boolean")return!e;for(var n in e)if(t[n])return!0}function PB(e,t,n){if(typeof e=="boolean")return!e&&n!="not";for(var a in e)if(a!=n&&t[a])return!0}function RB(e,t){if(typeof e!="boolean"){for(var n in e)if(!t[n])return n}}function Bd(e){return"'"+Ih(e)+"'"}function AB(e,t,n,a){var r=n?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return eE(e,r)}function kB(e,t,n){var a=Bd(n?"/"+Th(t):Nh(t));return eE(e,a)}var $B=/^\/(?:[^~]|~0|~1)*$/,qB=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function OB(e,t,n){var a,r,i,o;if(e==="")return"rootData";if(e[0]=="/"){if(!$B.test(e))throw new Error("Invalid JSON-pointer: "+e);r=e,i="rootData"}else{if(o=e.match(qB),!o)throw new Error("Invalid JSON-pointer: "+e);if(a=+o[1],r=o[2],r=="#"){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return n[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(i="data"+(t-a||""),!r)return i}for(var s=i,l=r.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(i+=Nh(Ph(u)),s+=" && "+i)}return s}function eE(e,t){return e=='""'?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function DB(e){return Ph(decodeURIComponent(e))}function FB(e){return encodeURIComponent(Th(e))}function Th(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Ph(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var LB=ba,tE=VB;function VB(e){LB.copy(e,this)}var rE={exports:{}},Br=rE.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var a=typeof n=="function"?n:n.pre||function(){},r=n.post||function(){};xo(t,a,r,e,"",e)};Br.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Br.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Br.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Br.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function xo(e,t,n,a,r,i,o,s,l,c){if(a&&typeof a=="object"&&!Array.isArray(a)){t(a,r,i,o,s,l,c);for(var u in a){var d=a[u];if(Array.isArray(d)){if(u in Br.arrayKeywords)for(var f=0;f<d.length;f++)xo(e,t,n,d[f],r+"/"+u+"/"+f,i,r,u,a,f)}else if(u in Br.propsKeywords){if(d&&typeof d=="object")for(var p in d)xo(e,t,n,d[p],r+"/"+u+"/"+MB(p),i,r,u,a,p)}else(u in Br.keywords||e.allKeys&&!(u in Br.skipKeywords))&&xo(e,t,n,d,r+"/"+u,i,r,u,a)}n(a,r,i,o,s,l,c)}}function MB(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var BB=rE.exports,qi=bB,_y=Ch,gl=ba,ts=tE,UB=BB,Rh=nn;nn.normalizeId=Qr;nn.fullPath=rs;nn.url=ns;nn.ids=QB;nn.inlineRef=Ud;nn.schema=yl;function nn(e,t,n){var a=this._refs[n];if(typeof a=="string")if(this._refs[a])a=this._refs[a];else return nn.call(this,e,t,a);if(a=a||this._schemas[n],a instanceof ts)return Ud(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var r=yl.call(this,t,n),i,o,s;return r&&(i=r.schema,t=r.root,s=r.baseId),i instanceof ts?o=i.validate||e.call(this,i.schema,t,void 0,s):i!==void 0&&(o=Ud(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),o}function yl(e,t){var n=qi.parse(t),a=aE(n),r=rs(this._getId(e.schema));if(Object.keys(e.schema).length===0||a!==r){var i=Qr(a),o=this._refs[i];if(typeof o=="string")return zB.call(this,e,o,n);if(o instanceof ts)o.validate||this._compile(o),e=o;else if(o=this._schemas[i],o instanceof ts){if(o.validate||this._compile(o),i==Qr(t))return{schema:o,root:e,baseId:r};e=o}else return;if(!e.schema)return;r=rs(this._getId(e.schema))}return nE.call(this,n,r,e.schema,e)}function zB(e,t,n){var a=yl.call(this,e,t);if(a){var r=a.schema,i=a.baseId;e=a.root;var o=this._getId(r);return o&&(i=ns(i,o)),nE.call(this,n,i,r,e)}}var HB=gl.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function nE(e,t,n,a){if(e.fragment=e.fragment||"",e.fragment.slice(0,1)=="/"){for(var r=e.fragment.split("/"),i=1;i<r.length;i++){var o=r[i];if(o){if(o=gl.unescapeFragment(o),n=n[o],n===void 0)break;var s;if(!HB[o]&&(s=this._getId(n),s&&(t=ns(t,s)),n.$ref)){var l=ns(t,n.$ref),c=yl.call(this,a,l);c&&(n=c.schema,a=c.root,t=c.baseId)}}}if(n!==void 0&&n!==a.schema)return{schema:n,root:a,baseId:t}}}var WB=gl.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ud(e,t){if(t===!1)return!1;if(t===void 0||t===!0)return zd(e);if(t)return Hd(e)<=t}function zd(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t=e[n],typeof t=="object"&&!zd(t))return!1}else for(var a in e)if(a=="$ref"||(t=e[a],typeof t=="object"&&!zd(t)))return!1;return!0}function Hd(e){var t=0,n;if(Array.isArray(e)){for(var a=0;a<e.length;a++)if(n=e[a],typeof n=="object"&&(t+=Hd(n)),t==1/0)return 1/0}else for(var r in e){if(r=="$ref")return 1/0;if(WB[r])t++;else if(n=e[r],typeof n=="object"&&(t+=Hd(n)+1),t==1/0)return 1/0}return t}function rs(e,t){t!==!1&&(e=Qr(e));var n=qi.parse(e);return aE(n)}function aE(e){return qi.serialize(e).split("#")[0]+"#"}var jB=/#\/?$/;function Qr(e){return e?e.replace(jB,""):""}function ns(e,t){return t=Qr(t),qi.resolve(e,t)}function QB(e){var t=Qr(this._getId(e)),n={"":t},a={"":rs(t,!1)},r={},i=this;return UB(e,{allKeys:!0},function(o,s,l,c,u,d,f){if(s!==""){var p=i._getId(o),h=n[c],v=a[c]+"/"+u;if(f!==void 0&&(v+="/"+(typeof f=="number"?f:gl.escapeFragment(f))),typeof p=="string"){p=h=Qr(h?qi.resolve(h,p):p);var g=i._refs[p];if(typeof g=="string"&&(g=i._refs[g]),g&&g.schema){if(!_y(o,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=Qr(v))if(p[0]=="#"){if(r[p]&&!_y(o,r[p]))throw new Error('id "'+p+'" resolves to more than one schema');r[p]=o}else i._refs[p]=v}n[s]=h,a[s]=v}}),r}var _c=Rh,Ah={Validation:Ey(GB),MissingRef:Ey(kh)};function GB(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}kh.message=function(e,t){return"can't resolve reference "+t+" from id "+e};function kh(e,t,n){this.message=n||kh.message(e,t),this.missingRef=_c.url(e,t),this.missingSchema=_c.normalizeId(_c.fullPath(this.missingRef))}function Ey(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var iE=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,a=t.cmp&&function(i){return function(o){return function(s,l){var c={key:s,value:o[s]},u={key:l,value:o[l]};return i(c,u)}}}(t.cmp),r=[];return function i(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var s,l;if(Array.isArray(o)){for(l="[",s=0;s<o.length;s++)s&&(l+=","),l+=i(o[s])||"null";return l+"]"}if(o===null)return"null";if(r.indexOf(o)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=r.push(o)-1,u=Object.keys(o).sort(a&&a(o));for(l="",s=0;s<u.length;s++){var d=u[s],f=i(o[d]);f&&(l&&(l+=","),l+=JSON.stringify(d)+":"+f)}return r.splice(c,1),"{"+l+"}"}}(e)},oE=function(t,n,a){var r="",i=t.schema.$async===!0,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),s=t.self._getId(t.schema);if(t.opts.strictKeywords){var l=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(l){var c="unknown keyword: "+l;if(t.opts.strictKeywords==="log")t.logger.warn(c);else throw new Error(c)}}if(t.isTop&&(r+=" var validate = ",i&&(t.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(t.opts.sourceCode||t.opts.processCode)&&(r+=" "+("/*# sourceURL="+s+" */")+" ")),typeof t.schema=="boolean"||!(o||t.schema.$ref)){var n="false schema",u=t.level,d=t.dataLevel,f=t.schema[n],p=t.schemaPath+t.util.getProperty(n),h=t.errSchemaPath+"/"+n,w=!t.opts.allErrors,x,v="data"+(d||""),_="valid"+u;if(t.schema===!1){t.isTop?w=!0:r+=" var "+_+" = false; ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(x||"false schema")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&w?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?i?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+_+" = true; ";return t.isTop&&(r+=" }; return validate; "),r}if(t.isTop){var E=t.isTop,u=t.level=0,d=t.dataLevel=0,v="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],t.schema.default!==void 0&&t.opts.useDefaults&&t.opts.strictDefaults){var y="default is ignored in the schema root";if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var u=t.level,d=t.dataLevel,v="data"+(d||"");if(s&&(t.baseId=t.resolve.url(t.baseId,s)),i&&!t.async)throw new Error("async schema in sync schema");r+=" var errs_"+u+" = errors;"}var _="valid"+u,w=!t.opts.allErrors,S="",C="",x,I=t.schema.type,P=Array.isArray(I);if(I&&t.opts.nullable&&t.schema.nullable===!0&&(P?I.indexOf("null")==-1&&(I=I.concat("null")):I!="null"&&(I=[I,"null"],P=!0)),P&&I.length==1&&(I=I[0],P=!1),t.schema.$ref&&o){if(t.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');t.opts.extendRefs!==!0&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(r+=" "+t.RULES.all.$comment.code(t,"$comment")),I){if(t.opts.coerceTypes)var q=t.util.coerceToTypes(t.opts.coerceTypes,I);var O=t.RULES.types[I];if(q||P||O===!0||O&&!Pe(O)){var p=t.schemaPath+".type",h=t.errSchemaPath+"/type",p=t.schemaPath+".type",h=t.errSchemaPath+"/type",T=P?"checkDataTypes":"checkDataType";if(r+=" if ("+t.util[T](I,v,t.opts.strictNumbers,!0)+") { ",q){var N="dataType"+u,A="coerced"+u;r+=" var "+N+" = typeof "+v+"; var "+A+" = undefined; ",t.opts.coerceTypes=="array"&&(r+=" if ("+N+" == 'object' && Array.isArray("+v+") && "+v+".length == 1) { "+v+" = "+v+"[0]; "+N+" = typeof "+v+"; if ("+t.util.checkDataType(t.schema.type,v,t.opts.strictNumbers)+") "+A+" = "+v+"; } "),r+=" if ("+A+" !== undefined) ; ";var k=q;if(k)for(var R,V=-1,F=k.length-1;V<F;)R=k[V+=1],R=="string"?r+=" else if ("+N+" == 'number' || "+N+" == 'boolean') "+A+" = '' + "+v+"; else if ("+v+" === null) "+A+" = ''; ":R=="number"||R=="integer"?(r+=" else if ("+N+" == 'boolean' || "+v+" === null || ("+N+" == 'string' && "+v+" && "+v+" == +"+v+" ",R=="integer"&&(r+=" && !("+v+" % 1)"),r+=")) "+A+" = +"+v+"; "):R=="boolean"?r+=" else if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+A+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+A+" = true; ":R=="null"?r+=" else if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+A+" = null; ":t.opts.coerceTypes=="array"&&R=="array"&&(r+=" else if ("+N+" == 'string' || "+N+" == 'number' || "+N+" == 'boolean' || "+v+" == null) "+A+" = ["+v+"]; ");r+=" else {   ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(x||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",P?r+=""+I.join(","):r+=""+I,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",P?r+=""+I.join(","):r+=""+I,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&w?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+A+" !== undefined) {  ";var z=d?"data"+(d-1||""):"parentData",W=d?t.dataPathArr[d]:"parentDataProperty";r+=" "+v+" = "+A+"; ",d||(r+="if ("+z+" !== undefined)"),r+=" "+z+"["+W+"] = "+A+"; } "}else{var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(x||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",P?r+=""+I.join(","):r+=""+I,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",P?r+=""+I.join(","):r+=""+I,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&w?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(t.schema.$ref&&!o)r+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",w&&(r+=" } if (errors === ",E?r+="0":r+="errs_"+u,r+=") { ",C+="}");else{var G=t.RULES;if(G){for(var O,K=-1,Y=G.length-1;K<Y;)if(O=G[K+=1],Pe(O)){if(O.type&&(r+=" if ("+t.util.checkDataType(O.type,v,t.opts.strictNumbers)+") { "),t.opts.useDefaults){if(O.type=="object"&&t.schema.properties){var f=t.schema.properties,X=Object.keys(f),J=X;if(J)for(var ee,ce=-1,ve=J.length-1;ce<ve;){ee=J[ce+=1];var ne=f[ee];if(ne.default!==void 0){var de=v+t.util.getProperty(ee);if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+de;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else r+=" if ("+de+" === undefined ",t.opts.useDefaults=="empty"&&(r+=" || "+de+" === null || "+de+" === '' "),r+=" ) "+de+" = ",t.opts.useDefaults=="shared"?r+=" "+t.useDefault(ne.default)+" ":r+=" "+JSON.stringify(ne.default)+" ",r+="; "}}}else if(O.type=="array"&&Array.isArray(t.schema.items)){var Te=t.schema.items;if(Te){for(var ne,V=-1,be=Te.length-1;V<be;)if(ne=Te[V+=1],ne.default!==void 0){var de=v+"["+V+"]";if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+de;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else r+=" if ("+de+" === undefined ",t.opts.useDefaults=="empty"&&(r+=" || "+de+" === null || "+de+" === '' "),r+=" ) "+de+" = ",t.opts.useDefaults=="shared"?r+=" "+t.useDefault(ne.default)+" ":r+=" "+JSON.stringify(ne.default)+" ",r+="; "}}}}var ae=O.rules;if(ae){for(var fe,we=-1,ie=ae.length-1;we<ie;)if(fe=ae[we+=1],Me(fe)){var Ge=fe.code(t,fe.keyword,O.type);Ge&&(r+=" "+Ge+" ",w&&(S+="}"))}}if(w&&(r+=" "+S+" ",S=""),O.type&&(r+=" } ",I&&I===O.type&&!q)){r+=" else { ";var p=t.schemaPath+".type",h=t.errSchemaPath+"/type",g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(x||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",P?r+=""+I.join(","):r+=""+I,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",P?r+=""+I.join(","):r+=""+I,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&w?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}w&&(r+=" if (errors === ",E?r+="0":r+="errs_"+u,r+=") { ",C+="}")}}}w&&(r+=" "+C+" "),E?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+_+" = errors === errs_"+u+";";function Pe(Re){for(var Z=Re.rules,le=0;le<Z.length;le++)if(Me(Z[le]))return!0}function Me(Re){return t.schema[Re.keyword]!==void 0||Re.implements&&ot(Re)}function ot(Re){for(var Z=Re.implements,le=0;le<Z.length;le++)if(t.schema[Z[le]]!==void 0)return!0}return r},co=Rh,as=ba,sE=Ah,YB=iE,Cy=oE,KB=as.ucs2length,XB=Ch,ZB=sE.Validation,JB=Wd;function Wd(e,t,n,a){var r=this,i=this._opts,o=[void 0],s={},l=[],c={},u=[],d={},f=[];t=t||{schema:e,refVal:o,refs:s};var p=e9.call(this,e,t,a),h=this._compilations[p.index];if(p.compiling)return h.callValidate=y;var v=this._formats,g=this.RULES;try{var b=_(e,t,n,a);h.validate=b;var E=h.callValidate;return E&&(E.schema=b.schema,E.errors=null,E.refs=b.refs,E.refVal=b.refVal,E.root=b.root,E.$async=b.$async,i.sourceCode&&(E.source=b.source)),b}finally{t9.call(this,e,t,a)}function y(){var T=h.validate,N=T.apply(this,arguments);return y.errors=T.errors,N}function _(T,N,A,k){var R=!N||N&&N.schema==T;if(N.schema!=t.schema)return Wd.call(r,T,N,A,k);var V=T.$async===!0,F=Cy({isTop:!0,schema:T,isRoot:R,baseId:k,root:N,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:sE.MissingRef,RULES:g,validate:Cy,util:as,resolve:co,resolveRef:w,usePattern:P,useDefault:q,useCustomRule:O,opts:i,formats:v,logger:r.logger,self:r});F=fo(o,a9)+fo(l,r9)+fo(u,n9)+fo(f,i9)+F,i.processCode&&(F=i.processCode(F,T));var z;try{var W=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",F);z=W(r,g,v,t,o,u,f,XB,KB,ZB),o[0]=z}catch(G){throw r.logger.error("Error compiling schema, function code:",F),G}return z.schema=T,z.errors=null,z.refs=s,z.refVal=o,z.root=R?z:N,V&&(z.$async=!0),i.sourceCode===!0&&(z.source={code:F,patterns:l,defaults:u}),z}function w(T,N,A){N=co.url(T,N);var k=s[N],R,V;if(k!==void 0)return R=o[k],V="refVal["+k+"]",I(R,V);if(!A&&t.refs){var F=t.refs[N];if(F!==void 0)return R=t.refVal[F],V=S(N,R),I(R,V)}V=S(N);var z=co.call(r,_,t,N);if(z===void 0){var W=n&&n[N];W&&(z=co.inlineRef(W,i.inlineRefs)?W:Wd.call(r,W,t,n,T))}if(z===void 0)C(N);else return x(N,z),I(z,V)}function S(T,N){var A=o.length;return o[A]=N,s[T]=A,"refVal"+A}function C(T){delete s[T]}function x(T,N){var A=s[T];o[A]=N}function I(T,N){return typeof T=="object"||typeof T=="boolean"?{code:N,schema:T,inline:!0}:{code:N,$async:T&&!!T.$async}}function P(T){var N=c[T];return N===void 0&&(N=c[T]=l.length,l[N]=T),"pattern"+N}function q(T){switch(typeof T){case"boolean":case"number":return""+T;case"string":return as.toQuotedString(T);case"object":if(T===null)return"null";var N=YB(T),A=d[N];return A===void 0&&(A=d[N]=u.length,u[A]=T),"default"+A}}function O(T,N,A,k){if(r._opts.validateSchema!==!1){var R=T.definition.dependencies;if(R&&!R.every(function(J){return Object.prototype.hasOwnProperty.call(A,J)}))throw new Error("parent schema must have all required keywords: "+R.join(","));var V=T.definition.validateSchema;if(V){var F=V(N);if(!F){var z="keyword schema is invalid: "+r.errorsText(V.errors);if(r._opts.validateSchema=="log")r.logger.error(z);else throw new Error(z)}}}var W=T.definition.compile,G=T.definition.inline,K=T.definition.macro,Y;if(W)Y=W.call(r,N,A,k);else if(K)Y=K.call(r,N,A,k),i.validateSchema!==!1&&r.validateSchema(Y,!0);else if(G)Y=G.call(r,k,T.keyword,N,A);else if(Y=T.definition.validate,!Y)return;if(Y===void 0)throw new Error('custom keyword "'+T.keyword+'"failed to compile');var X=f.length;return f[X]=Y,{code:"customRule"+X,validate:Y}}}function e9(e,t,n){var a=lE.call(this,e,t,n);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:n},{index:a,compiling:!1})}function t9(e,t,n){var a=lE.call(this,e,t,n);a>=0&&this._compilations.splice(a,1)}function lE(e,t,n){for(var a=0;a<this._compilations.length;a++){var r=this._compilations[a];if(r.schema==e&&r.root==t&&r.baseId==n)return a}return-1}function r9(e,t){return"var pattern"+e+" = new RegExp("+as.toQuotedString(t[e])+");"}function n9(e){return"var default"+e+" = defaults["+e+"];"}function a9(e,t){return t[e]===void 0?"":"var refVal"+e+" = refVal["+e+"];"}function i9(e){return"var customRule"+e+" = customRules["+e+"];"}function fo(e,t){if(!e.length)return"";for(var n="",a=0;a<e.length;a++)n+=t(a,e);return n}var uE={exports:{}},bl=uE.exports=function(){this._cache={}};bl.prototype.put=function(t,n){this._cache[t]=n};bl.prototype.get=function(t){return this._cache[t]};bl.prototype.del=function(t){delete this._cache[t]};bl.prototype.clear=function(){this._cache={}};var o9=uE.exports,s9=ba,l9=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,u9=[0,31,28,31,30,31,30,31,31,30,31,30,31],c9=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,cE=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,d9=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,f9=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,dE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,fE=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,pE=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,hE=/^(?:\/(?:[^~/]|~0|~1)*)*$/,mE=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,vE=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,p9=wl;function wl(e){return e=e=="full"?"full":"fast",s9.copy(wl[e])}wl.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":dE,url:fE,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:cE,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:bE,uuid:pE,"json-pointer":hE,"json-pointer-uri-fragment":mE,"relative-json-pointer":vE};wl.full={date:gE,time:yE,"date-time":v9,uri:y9,"uri-reference":f9,"uri-template":dE,url:fE,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:cE,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:bE,uuid:pE,"json-pointer":hE,"json-pointer-uri-fragment":mE,"relative-json-pointer":vE};function h9(e){return e%4===0&&(e%100!==0||e%400===0)}function gE(e){var t=e.match(l9);if(!t)return!1;var n=+t[1],a=+t[2],r=+t[3];return a>=1&&a<=12&&r>=1&&r<=(a==2&&h9(n)?29:u9[a])}function yE(e,t){var n=e.match(c9);if(!n)return!1;var a=n[1],r=n[2],i=n[3],o=n[5];return(a<=23&&r<=59&&i<=59||a==23&&r==59&&i==60)&&(!t||o)}var m9=/t|\s/i;function v9(e){var t=e.split(m9);return t.length==2&&gE(t[0])&&yE(t[1],!0)}var g9=/\/|:/;function y9(e){return g9.test(e)&&d9.test(e)}var b9=/[^\\]\\Z/;function bE(e){if(b9.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var w9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.errSchemaPath+"/"+n,c=!t.opts.allErrors,u="data"+(o||""),d="valid"+i,f,p;if(s=="#"||s=="#/")t.isRoot?(f=t.async,p="validate"):(f=t.root.schema.$async===!0,p="root.refVal[0]");else{var h=t.resolveRef(t.baseId,s,t.isRoot);if(h===void 0){var v=t.MissingRefError.message(t.baseId,s);if(t.opts.missingRefs=="fail"){t.logger.error(v);var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { ref: '"+t.util.escapeQuotes(s)+"' } ",t.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(s)+"' "),t.opts.verbose&&(r+=" , schema: "+t.util.toQuotedString(s)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!t.compositeRule&&c?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ")}else if(t.opts.missingRefs=="ignore")t.logger.warn(v),c&&(r+=" if (true) { ");else throw new t.MissingRefError(t.baseId,s,v)}else if(h.inline){var E=t.util.copy(t);E.level++;var y="valid"+E.level;E.schema=h.schema,E.schemaPath="",E.errSchemaPath=s;var _=t.validate(E).replace(/validate\.schema/g,h.code);r+=" "+_+" ",c&&(r+=" if ("+y+") { ")}else f=h.$async===!0||t.async&&h.$async!==!1,p=h.code}if(p){var g=g||[];g.push(r),r="",t.opts.passContext?r+=" "+p+".call(this, ":r+=" "+p+"( ",r+=" "+u+", (dataPath || '')",t.errorPath!='""'&&(r+=" + "+t.errorPath);var w=o?"data"+(o-1||""):"parentData",S=o?t.dataPathArr[o]:"parentDataProperty";r+=" , "+w+" , "+S+", rootData)  ";var C=r;if(r=g.pop(),f){if(!t.async)throw new Error("async schema referenced by sync schema");c&&(r+=" var "+d+"; "),r+=" try { await "+C+"; ",c&&(r+=" "+d+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(r+=" "+d+" = false; "),r+=" } ",c&&(r+=" if ("+d+") { ")}else r+=" if (!"+C+") { if (vErrors === null) vErrors = "+p+".errors; else vErrors = vErrors.concat("+p+".errors); errors = vErrors.length; } ",c&&(r+=" else { ")}return r},S9=function(t,n,a){var r=" ",i=t.schema[n],o=t.schemaPath+t.util.getProperty(n),s=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,c=t.util.copy(t),u="";c.level++;var d="valid"+c.level,f=c.baseId,p=!0,h=i;if(h)for(var v,g=-1,b=h.length-1;g<b;)v=h[g+=1],(t.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:t.util.schemaHasRules(v,t.RULES.all))&&(p=!1,c.schema=v,c.schemaPath=o+"["+g+"]",c.errSchemaPath=s+"/"+g,r+="  "+t.validate(c)+" ",c.baseId=f,l&&(r+=" if ("+d+") { ",u+="}"));return l&&(p?r+=" if (true) { ":r+=" "+u.slice(0,-1)+" "),r},_9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),v="";h.level++;var g="valid"+h.level,b=s.every(function(x){return t.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:t.util.schemaHasRules(x,t.RULES.all)});if(b){var E=h.baseId;r+=" var "+p+" = errors; var "+f+" = false;  ";var y=t.compositeRule;t.compositeRule=h.compositeRule=!0;var _=s;if(_)for(var w,S=-1,C=_.length-1;S<C;)w=_[S+=1],h.schema=w,h.schemaPath=l+"["+S+"]",h.errSchemaPath=c+"/"+S,r+="  "+t.validate(h)+" ",h.baseId=E,r+=" "+f+" = "+f+" || "+g+"; if (!"+f+") { ",v+="}";t.compositeRule=h.compositeRule=y,r+=" "+v+" if (!"+f+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else u&&(r+=" if (true) { ");return r},E9=function(t,n,a){var r=" ",i=t.schema[n],o=t.errSchemaPath+"/"+n;t.opts.allErrors;var s=t.util.toQuotedString(i);return t.opts.$comment===!0?r+=" console.log("+s+");":typeof t.opts.$comment=="function"&&(r+=" self._opts.$comment("+s+", "+t.util.toQuotedString(o)+", validate.root.schema);"),r},C9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data;p&&(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; "),p||(r+=" var schema"+i+" = validate.schema"+l+";"),r+="var "+f+" = equal("+d+", schema"+i+"); if (!"+f+") {   ";var h=h||[];h.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=h.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r},x9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),v="";h.level++;var g="valid"+h.level,b="i"+i,E=h.dataLevel=t.dataLevel+1,y="data"+E,_=t.baseId,w=t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all);if(r+="var "+p+" = errors;var "+f+";",w){var S=t.compositeRule;t.compositeRule=h.compositeRule=!0,h.schema=s,h.schemaPath=l,h.errSchemaPath=c,r+=" var "+g+" = false; for (var "+b+" = 0; "+b+" < "+d+".length; "+b+"++) { ",h.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var C=d+"["+b+"]";h.dataPathArr[E]=b;var x=t.validate(h);h.baseId=_,t.util.varOccurences(x,y)<2?r+=" "+t.util.varReplace(x,y,C)+" ":r+=" var "+y+" = "+C+"; "+x+" ",r+=" if ("+g+") break; }  ",t.compositeRule=h.compositeRule=S,r+=" "+v+" if (!"+g+") {"}else r+=" if ("+d+".length == 0) {";var I=I||[];I.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var P=r;return r=I.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",w&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),t.opts.allErrors&&(r+=" } "),r},N9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t),h="";p.level++;var v="valid"+p.level,g={},b={},E=t.opts.ownProperties;for(S in s)if(S!="__proto__"){var y=s[S],_=Array.isArray(y)?b:g;_[S]=y}r+="var "+f+" = errors;";var w=t.errorPath;r+="var missing"+i+";";for(var S in b)if(_=b[S],_.length){if(r+=" if ( "+d+t.util.getProperty(S)+" !== undefined ",E&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(S)+"') "),u){r+=" && ( ";var C=_;if(C)for(var x,I=-1,P=C.length-1;I<P;){x=C[I+=1],I&&(r+=" || ");var q=t.util.getProperty(x),O=d+q;r+=" ( ( "+O+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(x)+"') "),r+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?x:q)+") ) "}r+=")) {  ";var T="missing"+i,N="' + "+T+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(w,T,!0):w+" + "+T);var A=A||[];A.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+N+"', depsCount: "+_.length+", deps: '"+t.util.escapeQuotes(_.length==1?_[0]:_.join(", "))+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should have ",_.length==1?r+="property "+t.util.escapeQuotes(_[0]):r+="properties "+t.util.escapeQuotes(_.join(", ")),r+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var k=r;r=A.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var R=_;if(R)for(var x,V=-1,F=R.length-1;V<F;){x=R[V+=1];var q=t.util.getProperty(x),N=t.util.escapeQuotes(x),O=d+q;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(w,x,t.opts.jsonPointers)),r+=" if ( "+O+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(x)+"') "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+N+"', depsCount: "+_.length+", deps: '"+t.util.escapeQuotes(_.length==1?_[0]:_.join(", "))+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should have ",_.length==1?r+="property "+t.util.escapeQuotes(_[0]):r+="properties "+t.util.escapeQuotes(_.join(", ")),r+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",u&&(h+="}",r+=" else { ")}t.errorPath=w;var z=p.baseId;for(var S in g){var y=g[S];(t.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:t.util.schemaHasRules(y,t.RULES.all))&&(r+=" "+v+" = true; if ( "+d+t.util.getProperty(S)+" !== undefined ",E&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(S)+"') "),r+=") { ",p.schema=y,p.schemaPath=l+t.util.getProperty(S),p.errSchemaPath=c+"/"+t.util.escapeFragment(S),r+="  "+t.validate(p)+" ",p.baseId=z,r+=" }  ",u&&(r+=" if ("+v+") { ",h+="}"))}return u&&(r+="   "+h+" if ("+f+" == errors) {"),r},I9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data;p&&(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var h="i"+i,v="schema"+i;p||(r+=" var "+v+" = validate.schema"+l+";"),r+="var "+f+";",p&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=""+f+" = false;for (var "+h+"=0; "+h+"<"+v+".length; "+h+"++) if (equal("+d+", "+v+"["+h+"])) { "+f+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+f+") {   ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r},T9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||"");if(t.opts.format===!1)return u&&(r+=" if (true) { "),r;var f=t.opts.$data&&s&&s.$data,p;f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s;var h=t.opts.unknownFormats,v=Array.isArray(h);if(f){var g="format"+i,b="isObject"+i,E="formatType"+i;r+=" var "+g+" = formats["+p+"]; var "+b+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+E+" = "+b+" && "+g+".type || 'string'; if ("+b+") { ",t.async&&(r+=" var async"+i+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" (",h!="ignore"&&(r+=" ("+p+" && !"+g+" ",v&&(r+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),r+=") || "),r+=" ("+g+" && "+E+" == '"+a+"' && !(typeof "+g+" == 'function' ? ",t.async?r+=" (async"+i+" ? await "+g+"("+d+") : "+g+"("+d+")) ":r+=" "+g+"("+d+") ",r+=" : "+g+".test("+d+"))))) {"}else{var g=t.formats[s];if(!g){if(h=="ignore")return t.logger.warn('unknown format "'+s+'" ignored in schema at path "'+t.errSchemaPath+'"'),u&&(r+=" if (true) { "),r;if(v&&h.indexOf(s)>=0)return u&&(r+=" if (true) { "),r;throw new Error('unknown format "'+s+'" is used in schema at path "'+t.errSchemaPath+'"')}var b=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,E=b&&g.type||"string";if(b){var y=g.async===!0;g=g.validate}if(E!=a)return u&&(r+=" if (true) { "),r;if(y){if(!t.async)throw new Error("async format in sync schema");var _="formats"+t.util.getProperty(s)+".validate";r+=" if (!(await "+_+"("+d+"))) { "}else{r+=" if (! ";var _="formats"+t.util.getProperty(s);b&&(_+=".validate"),typeof g=="function"?r+=" "+_+"("+d+") ":r+=" "+_+".test("+d+") ",r+=") { "}}var w=w||[];w.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { format:  ",f?r+=""+p:r+=""+t.util.toQuotedString(s),r+="  } ",t.opts.messages!==!1&&(r+=` , message: 'should match format "`,f?r+="' + "+p+" + '":r+=""+t.util.escapeQuotes(s),r+=`"' `),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var S=r;return r=w.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r},P9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t);h.level++;var v="valid"+h.level,g=t.schema.then,b=t.schema.else,E=g!==void 0&&(t.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:t.util.schemaHasRules(g,t.RULES.all)),y=b!==void 0&&(t.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:t.util.schemaHasRules(b,t.RULES.all)),_=h.baseId;if(E||y){var w;h.createErrors=!1,h.schema=s,h.schemaPath=l,h.errSchemaPath=c,r+=" var "+p+" = errors; var "+f+" = true;  ";var S=t.compositeRule;t.compositeRule=h.compositeRule=!0,r+="  "+t.validate(h)+" ",h.baseId=_,h.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",t.compositeRule=h.compositeRule=S,E?(r+=" if ("+v+") {  ",h.schema=t.schema.then,h.schemaPath=t.schemaPath+".then",h.errSchemaPath=t.errSchemaPath+"/then",r+="  "+t.validate(h)+" ",h.baseId=_,r+=" "+f+" = "+v+"; ",E&&y?(w="ifClause"+i,r+=" var "+w+" = 'then'; "):w="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+v+") { ",y&&(h.schema=t.schema.else,h.schemaPath=t.schemaPath+".else",h.errSchemaPath=t.errSchemaPath+"/else",r+="  "+t.validate(h)+" ",h.baseId=_,r+=" "+f+" = "+v+"; ",E&&y?(w="ifClause"+i,r+=" var "+w+" = 'else'; "):w="'else'",r+=" } "),r+=" if (!"+f+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { failingKeyword: "+w+" } ",t.opts.messages!==!1&&(r+=` , message: 'should match "' + `+w+` + '" schema' `),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r},R9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),v="";h.level++;var g="valid"+h.level,b="i"+i,E=h.dataLevel=t.dataLevel+1,y="data"+E,_=t.baseId;if(r+="var "+p+" = errors;var "+f+";",Array.isArray(s)){var w=t.schema.additionalItems;if(w===!1){r+=" "+f+" = "+d+".length <= "+s.length+"; ";var S=c;c=t.errSchemaPath+"/additionalItems",r+="  if (!"+f+") {   ";var C=C||[];C.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var x=r;r=C.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+x+"]); ":r+=" validate.errors = ["+x+"]; return false; ":r+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c=S,u&&(v+="}",r+=" else { ")}var I=s;if(I){for(var P,q=-1,O=I.length-1;q<O;)if(P=I[q+=1],t.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:t.util.schemaHasRules(P,t.RULES.all)){r+=" "+g+" = true; if ("+d+".length > "+q+") { ";var T=d+"["+q+"]";h.schema=P,h.schemaPath=l+"["+q+"]",h.errSchemaPath=c+"/"+q,h.errorPath=t.util.getPathExpr(t.errorPath,q,t.opts.jsonPointers,!0),h.dataPathArr[E]=q;var N=t.validate(h);h.baseId=_,t.util.varOccurences(N,y)<2?r+=" "+t.util.varReplace(N,y,T)+" ":r+=" var "+y+" = "+T+"; "+N+" ",r+=" }  ",u&&(r+=" if ("+g+") { ",v+="}")}}if(typeof w=="object"&&(t.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:t.util.schemaHasRules(w,t.RULES.all))){h.schema=w,h.schemaPath=t.schemaPath+".additionalItems",h.errSchemaPath=t.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+d+".length > "+s.length+") {  for (var "+b+" = "+s.length+"; "+b+" < "+d+".length; "+b+"++) { ",h.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var T=d+"["+b+"]";h.dataPathArr[E]=b;var N=t.validate(h);h.baseId=_,t.util.varOccurences(N,y)<2?r+=" "+t.util.varReplace(N,y,T)+" ":r+=" var "+y+" = "+T+"; "+N+" ",u&&(r+=" if (!"+g+") break; "),r+=" } }  ",u&&(r+=" if ("+g+") { ",v+="}")}}else if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){h.schema=s,h.schemaPath=l,h.errSchemaPath=c,r+="  for (var "+b+" = 0; "+b+" < "+d+".length; "+b+"++) { ",h.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var T=d+"["+b+"]";h.dataPathArr[E]=b;var N=t.validate(h);h.baseId=_,t.util.varOccurences(N,y)<2?r+=" "+t.util.varReplace(N,y,T)+" ":r+=" var "+y+" = "+T+"; "+N+" ",u&&(r+=" if (!"+g+") break; "),r+=" }"}return u&&(r+=" "+v+" if ("+p+" == errors) {"),r},xy=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,_,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s;var h=n=="maximum",v=h?"exclusiveMaximum":"exclusiveMinimum",g=t.schema[v],b=t.opts.$data&&g&&g.$data,E=h?"<":">",y=h?">":"<",_=void 0;if(!(f||typeof s=="number"||s===void 0))throw new Error(n+" must be number");if(!(b||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(v+" must be number or boolean");if(b){var w=t.util.getData(g.$data,o,t.dataPathArr),S="exclusive"+i,C="exclType"+i,x="exclIsNumber"+i,I="op"+i,P="' + "+I+" + '";r+=" var schemaExcl"+i+" = "+w+"; ",w="schemaExcl"+i,r+=" var "+S+"; var "+C+" = typeof "+w+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ";var _=v,q=q||[];q.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: '"+v+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var O=r;r=q.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+C+" == 'number' ? ( ("+S+" = "+p+" === undefined || "+w+" "+E+"= "+p+") ? "+d+" "+y+"= "+w+" : "+d+" "+y+" "+p+" ) : ( ("+S+" = "+w+" === true) ? "+d+" "+y+"= "+p+" : "+d+" "+y+" "+p+" ) || "+d+" !== "+d+") { var op"+i+" = "+S+" ? '"+E+"' : '"+E+"='; ",s===void 0&&(_=v,c=t.errSchemaPath+"/"+v,p=w,f=b)}else{var x=typeof g=="number",P=E;if(x&&f){var I="'"+P+"'";r+=" if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" ( "+p+" === undefined || "+g+" "+E+"= "+p+" ? "+d+" "+y+"= "+g+" : "+d+" "+y+" "+p+" ) || "+d+" !== "+d+") { "}else{x&&s===void 0?(S=!0,_=v,c=t.errSchemaPath+"/"+v,p=g,y+="="):(x&&(p=Math[h?"min":"max"](g,s)),g===(x?p:!0)?(S=!0,_=v,c=t.errSchemaPath+"/"+v,y+="="):(S=!1,P+="="));var I="'"+P+"'";r+=" if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+d+" "+y+" "+p+" || "+d+" !== "+d+") { "}}_=_||n;var q=q||[];q.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { comparison: "+I+", limit: "+p+", exclusive: "+S+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be "+P+" ",f?r+="' + "+p:r+=""+p+"'"),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var O=r;return r=q.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r},Ny=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,v,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");var h=n=="maxItems"?">":"<";r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+d+".length "+h+" "+p+") { ";var v=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(v||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have ",n=="maxItems"?r+="more":r+="fewer",r+=" than ",f?r+="' + "+p+" + '":r+=""+s,r+=" items' "),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},Iy=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,v,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");var h=n=="maxLength"?">":"<";r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),t.opts.unicode===!1?r+=" "+d+".length ":r+=" ucs2length("+d+") ",r+=" "+h+" "+p+") { ";var v=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(v||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be ",n=="maxLength"?r+="longer":r+="shorter",r+=" than ",f?r+="' + "+p+" + '":r+=""+s,r+=" characters' "),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},Ty=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,v,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");var h=n=="maxProperties"?">":"<";r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" Object.keys("+d+").length "+h+" "+p+") { ";var v=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(v||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have ",n=="maxProperties"?r+="more":r+="fewer",r+=" than ",f?r+="' + "+p+" + '":r+=""+s,r+=" properties' "),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var b=r;return r=g.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},A9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;if(f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s,!(f||typeof s=="number"))throw new Error(n+" must be number");r+="var division"+i+";if (",f&&(r+=" "+p+" !== undefined && ( typeof "+p+" != 'number' || "),r+=" (division"+i+" = "+d+" / "+p+", ",t.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+t.opts.multipleOfPrecision+" ":r+=" division"+i+" !== parseInt(division"+i+") ",r+=" ) ",f&&(r+="  )  "),r+=" ) {   ";var h=h||[];h.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { multipleOf: "+p+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",f?r+="' + "+p:r+=""+p+"'"),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=h.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},k9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t);p.level++;var h="valid"+p.level;if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){p.schema=s,p.schemaPath=l,p.errSchemaPath=c,r+=" var "+f+" = errors;  ";var v=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.createErrors=!1;var g;p.opts.allErrors&&(g=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+t.validate(p)+" ",p.createErrors=!0,g&&(p.opts.allErrors=g),t.compositeRule=p.compositeRule=v,r+=" if ("+h+") {   ";var b=b||[];b.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var E=r;r=b.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ");return r},$9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p="errs__"+i,h=t.util.copy(t),v="";h.level++;var g="valid"+h.level,b=h.baseId,E="prevValid"+i,y="passingSchemas"+i;r+="var "+p+" = errors , "+E+" = false , "+f+" = false , "+y+" = null; ";var _=t.compositeRule;t.compositeRule=h.compositeRule=!0;var w=s;if(w)for(var S,C=-1,x=w.length-1;C<x;)S=w[C+=1],(t.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:t.util.schemaHasRules(S,t.RULES.all))?(h.schema=S,h.schemaPath=l+"["+C+"]",h.errSchemaPath=c+"/"+C,r+="  "+t.validate(h)+" ",h.baseId=b):r+=" var "+g+" = true; ",C&&(r+=" if ("+g+" && "+E+") { "+f+" = false; "+y+" = ["+y+", "+C+"]; } else { ",v+="}"),r+=" if ("+g+") { "+f+" = "+E+" = true; "+y+" = "+C+"; }";return t.compositeRule=h.compositeRule=_,r+=""+v+"if (!"+f+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",t.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",t.opts.allErrors&&(r+=" } "),r},q9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f=t.opts.$data&&s&&s.$data,p;f?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+i):p=s;var h=f?"(new RegExp("+p+"))":t.usePattern(s);r+="if ( ",f&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" !"+h+".test("+d+") ) {   ";var v=v||[];v.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { pattern:  ",f?r+=""+p:r+=""+t.util.toQuotedString(s),r+="  } ",t.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,f?r+="' + "+p+" + '":r+=""+t.util.escapeQuotes(s),r+=`"' `),t.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+l:r+=""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;return r=v.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",u&&(r+=" else { "),r},O9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t),h="";p.level++;var v="valid"+p.level,g="key"+i,b="idx"+i,E=p.dataLevel=t.dataLevel+1,y="data"+E,_="dataProperties"+i,w=Object.keys(s||{}).filter(V),S=t.schema.patternProperties||{},C=Object.keys(S).filter(V),x=t.schema.additionalProperties,I=w.length||C.length,P=x===!1,q=typeof x=="object"&&Object.keys(x).length,O=t.opts.removeAdditional,T=P||q||O,N=t.opts.ownProperties,A=t.baseId,k=t.schema.required;if(k&&!(t.opts.$data&&k.$data)&&k.length<t.opts.loopRequired)var R=t.util.toHash(k);function V(he){return he!=="__proto__"}if(r+="var "+f+" = errors;var "+v+" = true;",N&&(r+=" var "+_+" = undefined;"),T){if(N?r+=" "+_+" = "+_+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+_+".length; "+b+"++) { var "+g+" = "+_+"["+b+"]; ":r+=" for (var "+g+" in "+d+") { ",I){if(r+=" var isAdditional"+i+" = !(false ",w.length)if(w.length>8)r+=" || validate.schema"+l+".hasOwnProperty("+g+") ";else{var F=w;if(F)for(var z,W=-1,G=F.length-1;W<G;)z=F[W+=1],r+=" || "+g+" == "+t.util.toQuotedString(z)+" "}if(C.length){var K=C;if(K)for(var Y,X=-1,J=K.length-1;X<J;)Y=K[X+=1],r+=" || "+t.usePattern(Y)+".test("+g+") "}r+=" ); if (isAdditional"+i+") { "}if(O=="all")r+=" delete "+d+"["+g+"]; ";else{var ee=t.errorPath,ce="' + "+g+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers)),P)if(O)r+=" delete "+d+"["+g+"]; ";else{r+=" "+v+" = false; ";var ve=c;c=t.errSchemaPath+"/additionalProperties";var ne=ne||[];ne.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { additionalProperty: '"+ce+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var de=r;r=ne.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+de+"]); ":r+=" validate.errors = ["+de+"]; return false; ":r+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=ve,u&&(r+=" break; ")}else if(q)if(O=="failing"){r+=" var "+f+" = errors;  ";var Te=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.schema=x,p.schemaPath=t.schemaPath+".additionalProperties",p.errSchemaPath=t.errSchemaPath+"/additionalProperties",p.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var be=d+"["+g+"]";p.dataPathArr[E]=g;var ae=t.validate(p);p.baseId=A,t.util.varOccurences(ae,y)<2?r+=" "+t.util.varReplace(ae,y,be)+" ":r+=" var "+y+" = "+be+"; "+ae+" ",r+=" if (!"+v+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+g+"]; }  ",t.compositeRule=p.compositeRule=Te}else{p.schema=x,p.schemaPath=t.schemaPath+".additionalProperties",p.errSchemaPath=t.errSchemaPath+"/additionalProperties",p.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var be=d+"["+g+"]";p.dataPathArr[E]=g;var ae=t.validate(p);p.baseId=A,t.util.varOccurences(ae,y)<2?r+=" "+t.util.varReplace(ae,y,be)+" ":r+=" var "+y+" = "+be+"; "+ae+" ",u&&(r+=" if (!"+v+") break; ")}t.errorPath=ee}I&&(r+=" } "),r+=" }  ",u&&(r+=" if ("+v+") { ",h+="}")}var fe=t.opts.useDefaults&&!t.compositeRule;if(w.length){var we=w;if(we)for(var z,ie=-1,Ge=we.length-1;ie<Ge;){z=we[ie+=1];var Pe=s[z];if(t.opts.strictKeywords?typeof Pe=="object"&&Object.keys(Pe).length>0||Pe===!1:t.util.schemaHasRules(Pe,t.RULES.all)){var Me=t.util.getProperty(z),be=d+Me,ot=fe&&Pe.default!==void 0;p.schema=Pe,p.schemaPath=l+Me,p.errSchemaPath=c+"/"+t.util.escapeFragment(z),p.errorPath=t.util.getPath(t.errorPath,z,t.opts.jsonPointers),p.dataPathArr[E]=t.util.toQuotedString(z);var ae=t.validate(p);if(p.baseId=A,t.util.varOccurences(ae,y)<2){ae=t.util.varReplace(ae,y,be);var Re=be}else{var Re=y;r+=" var "+y+" = "+be+"; "}if(ot)r+=" "+ae+" ";else{if(R&&R[z]){r+=" if ( "+Re+" === undefined ",N&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(z)+"') "),r+=") { "+v+" = false; ";var ee=t.errorPath,ve=c,Z=t.util.escapeQuotes(z);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(ee,z,t.opts.jsonPointers)),c=t.errSchemaPath+"/required";var ne=ne||[];ne.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+Z+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Z+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var de=r;r=ne.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+de+"]); ":r+=" validate.errors = ["+de+"]; return false; ":r+=" var err = "+de+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=ve,t.errorPath=ee,r+=" } else { "}else u?(r+=" if ( "+Re+" === undefined ",N&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(z)+"') "),r+=") { "+v+" = true; } else { "):(r+=" if ("+Re+" !== undefined ",N&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(z)+"') "),r+=" ) { ");r+=" "+ae+" } "}}u&&(r+=" if ("+v+") { ",h+="}")}}if(C.length){var le=C;if(le)for(var Y,pe=-1,Ne=le.length-1;pe<Ne;){Y=le[pe+=1];var Pe=S[Y];if(t.opts.strictKeywords?typeof Pe=="object"&&Object.keys(Pe).length>0||Pe===!1:t.util.schemaHasRules(Pe,t.RULES.all)){p.schema=Pe,p.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(Y),p.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(Y),N?r+=" "+_+" = "+_+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+_+".length; "+b+"++) { var "+g+" = "+_+"["+b+"]; ":r+=" for (var "+g+" in "+d+") { ",r+=" if ("+t.usePattern(Y)+".test("+g+")) { ",p.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var be=d+"["+g+"]";p.dataPathArr[E]=g;var ae=t.validate(p);p.baseId=A,t.util.varOccurences(ae,y)<2?r+=" "+t.util.varReplace(ae,y,be)+" ":r+=" var "+y+" = "+be+"; "+ae+" ",u&&(r+=" if (!"+v+") break; "),r+=" } ",u&&(r+=" else "+v+" = true; "),r+=" }  ",u&&(r+=" if ("+v+") { ",h+="}")}}}return u&&(r+=" "+h+" if ("+f+" == errors) {"),r},D9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="errs__"+i,p=t.util.copy(t),h="";p.level++;var v="valid"+p.level;if(r+="var "+f+" = errors;",t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){p.schema=s,p.schemaPath=l,p.errSchemaPath=c;var g="key"+i,b="idx"+i,E="i"+i,y="' + "+g+" + '",_=p.dataLevel=t.dataLevel+1,w="data"+_,S="dataProperties"+i,C=t.opts.ownProperties,x=t.baseId;C&&(r+=" var "+S+" = undefined; "),C?r+=" "+S+" = "+S+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+S+".length; "+b+"++) { var "+g+" = "+S+"["+b+"]; ":r+=" for (var "+g+" in "+d+") { ",r+=" var startErrs"+i+" = errors; ";var I=g,P=t.compositeRule;t.compositeRule=p.compositeRule=!0;var q=t.validate(p);p.baseId=x,t.util.varOccurences(q,w)<2?r+=" "+t.util.varReplace(q,w,I)+" ":r+=" var "+w+" = "+I+"; "+q+" ",t.compositeRule=p.compositeRule=P,r+=" if (!"+v+") { for (var "+E+"=startErrs"+i+"; "+E+"<errors; "+E+"++) { vErrors["+E+"].propertyName = "+g+"; }   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",t.opts.messages!==!1&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),u&&(r+=" break; "),r+=" } }"}return u&&(r+=" "+h+" if ("+f+" == errors) {"),r},F9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data;p&&(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var h="schema"+i;if(!p)if(s.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var v=[],g=s;if(g)for(var b,E=-1,y=g.length-1;E<y;){b=g[E+=1];var _=t.schema.properties[b];_&&(t.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:t.util.schemaHasRules(_,t.RULES.all))||(v[v.length]=b)}}else var v=s;if(p||v.length){var w=t.errorPath,S=p||v.length>=t.opts.loopRequired,C=t.opts.ownProperties;if(u)if(r+=" var missing"+i+"; ",S){p||(r+=" var "+h+" = validate.schema"+l+"; ");var x="i"+i,I="schema"+i+"["+x+"]",P="' + "+I+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(w,I,t.opts.jsonPointers)),r+=" var "+f+" = true; ",p&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=" for (var "+x+" = 0; "+x+" < "+h+".length; "+x+"++) { "+f+" = "+d+"["+h+"["+x+"]] !== undefined ",C&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+h+"["+x+"]) "),r+="; if (!"+f+") break; } ",p&&(r+="  }  "),r+="  if (!"+f+") {   ";var q=q||[];q.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var O=r;r=q.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var T=v;if(T)for(var N,x=-1,A=T.length-1;x<A;){N=T[x+=1],x&&(r+=" || ");var k=t.util.getProperty(N),R=d+k;r+=" ( ( "+R+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(N)+"') "),r+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?N:k)+") ) "}r+=") {  ";var I="missing"+i,P="' + "+I+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(w,I,!0):w+" + "+I);var q=q||[];q.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var O=r;r=q.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(S){p||(r+=" var "+h+" = validate.schema"+l+"; ");var x="i"+i,I="schema"+i+"["+x+"]",P="' + "+I+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(w,I,t.opts.jsonPointers)),p&&(r+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),r+=" for (var "+x+" = 0; "+x+" < "+h+".length; "+x+"++) { if ("+d+"["+h+"["+x+"]] === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+h+"["+x+"]) "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var V=v;if(V)for(var N,F=-1,z=V.length-1;F<z;){N=V[F+=1];var k=t.util.getProperty(N),P=t.util.escapeQuotes(N),R=d+k;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(w,N,t.opts.jsonPointers)),r+=" if ( "+R+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(N)+"') "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+P+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=w}else u&&(r+=" if (true) {");return r},L9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d="data"+(o||""),f="valid"+i,p=t.opts.$data&&s&&s.$data,h;if(p?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",h="schema"+i):h=s,(s||p)&&t.opts.uniqueItems!==!1){p&&(r+=" var "+f+"; if ("+h+" === false || "+h+" === undefined) "+f+" = true; else if (typeof "+h+" != 'boolean') "+f+" = false; else { "),r+=" var i = "+d+".length , "+f+" = true , j; if (i > 1) { ";var v=t.schema.items&&t.schema.items.type,g=Array.isArray(v);if(!v||v=="object"||v=="array"||g&&(v.indexOf("object")>=0||v.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+f+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var b="checkDataType"+(g?"s":"");r+=" if ("+t.util[b](v,"item",t.opts.strictNumbers,!0)+") continue; ",g&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",p&&(r+="  }  "),r+=" if (!"+f+") {   ";var E=E||[];E.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { i: i, j: j } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(r+=" , schema:  ",p?r+="validate.schema"+l:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var y=r;r=E.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r},V9={$ref:w9,allOf:S9,anyOf:_9,$comment:E9,const:C9,contains:x9,dependencies:N9,enum:I9,format:T9,if:P9,items:R9,maximum:xy,minimum:xy,maxItems:Ny,minItems:Ny,maxLength:Iy,minLength:Iy,maxProperties:Ty,minProperties:Ty,multipleOf:A9,not:k9,oneOf:$9,pattern:q9,properties:O9,propertyNames:D9,required:F9,uniqueItems:L9,validate:oE},Py=V9,Ec=ba.toHash,M9=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],n=["type","$comment"],a=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return t.all=Ec(n),t.types=Ec(r),t.forEach(function(i){i.rules=i.rules.map(function(o){var s;if(typeof o=="object"){var l=Object.keys(o)[0];s=o[l],o=l,s.forEach(function(u){n.push(u),t.all[u]=!0})}n.push(o);var c=t.all[o]={keyword:o,code:Py[o],implements:s};return c}),t.all.$comment={keyword:"$comment",code:Py.$comment},i.type&&(t.types[i.type]=i)}),t.keywords=Ec(n.concat(a)),t.custom={},t},Ry=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],B9=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var a=t[n].split("/"),r=e,i;for(i=1;i<a.length;i++)r=r[a[i]];for(i=0;i<Ry.length;i++){var o=Ry[i],s=r[o];s&&(r[o]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},U9=Ah.MissingRef,z9=wE;function wE(e,t,n){var a=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof t=="function"&&(n=t,t=void 0);var r=i(e).then(function(){var s=a._addSchema(e,void 0,t);return s.validate||o(s)});return n&&r.then(function(s){n(null,s)},n),r;function i(s){var l=s.$schema;return l&&!a.getSchema(l)?wE.call(a,{$ref:l},!0):Promise.resolve()}function o(s){try{return a._compile(s)}catch(c){if(c instanceof U9)return l(c);throw c}function l(c){var u=c.missingSchema;if(p(u))throw new Error("Schema "+u+" is loaded but "+c.missingRef+" cannot be resolved");var d=a._loadingSchemas[u];return d||(d=a._loadingSchemas[u]=a._opts.loadSchema(u),d.then(f,f)),d.then(function(h){if(!p(u))return i(h).then(function(){p(u)||a.addSchema(h,u,void 0,t)})}).then(function(){return o(s)});function f(){delete a._loadingSchemas[u]}function p(h){return a._refs[h]||a._schemas[h]}}}}var H9=function(t,n,a){var r=" ",i=t.level,o=t.dataLevel,s=t.schema[n],l=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,d,f="data"+(o||""),p="valid"+i,h="errs__"+i,v=t.opts.$data&&s&&s.$data,g;v?(r+=" var schema"+i+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",g="schema"+i):g=s;var b=this,E="definition"+i,y=b.definition,_="",w,S,C,x,I;if(v&&y.$data){I="keywordValidate"+i;var P=y.validateSchema;r+=" var "+E+" = RULES.custom['"+n+"'].definition; var "+I+" = "+E+".validate;"}else{if(x=t.useCustomRule(b,s,t.schema,t),!x)return;g="validate.schema"+l,I=x.code,w=y.compile,S=y.inline,C=y.macro}var q=I+".errors",O="i"+i,T="ruleErr"+i,N=y.async;if(N&&!t.async)throw new Error("async keyword in sync schema");if(S||C||(r+=""+q+" = null;"),r+="var "+h+" = errors;var "+p+";",v&&y.$data&&(_+="}",r+=" if ("+g+" === undefined) { "+p+" = true; } else { ",P&&(_+="}",r+=" "+p+" = "+E+".validateSchema("+g+"); if ("+p+") { ")),S)y.statements?r+=" "+x.validate+" ":r+=" "+p+" = "+x.validate+"; ";else if(C){var A=t.util.copy(t),_="";A.level++;var k="valid"+A.level;A.schema=x.validate,A.schemaPath="";var R=t.compositeRule;t.compositeRule=A.compositeRule=!0;var V=t.validate(A).replace(/validate\.schema/g,I);t.compositeRule=A.compositeRule=R,r+=" "+V}else{var F=F||[];F.push(r),r="",r+="  "+I+".call( ",t.opts.passContext?r+="this":r+="self",w||y.schema===!1?r+=" , "+f+" ":r+=" , "+g+" , "+f+" , validate.schema"+t.schemaPath+" ",r+=" , (dataPath || '')",t.errorPath!='""'&&(r+=" + "+t.errorPath);var z=o?"data"+(o-1||""):"parentData",W=o?t.dataPathArr[o]:"parentDataProperty";r+=" , "+z+" , "+W+" , rootData )  ";var G=r;r=F.pop(),y.errors===!1?(r+=" "+p+" = ",N&&(r+="await "),r+=""+G+"; "):N?(q="customErrors"+i,r+=" var "+q+" = null; try { "+p+" = await "+G+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+q+" = e.errors; else throw e; } "):r+=" "+q+" = null; "+p+" = "+G+"; "}if(y.modifying&&(r+=" if ("+z+") "+f+" = "+z+"["+W+"];"),r+=""+_,y.valid)u&&(r+=" if (true) { ");else{r+=" if ( ",y.valid===void 0?(r+=" !",C?r+=""+k:r+=""+p):r+=" "+!y.valid+" ",r+=") { ",d=b.keyword;var F=F||[];F.push(r),r="";var F=F||[];F.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+b.keyword+"' } ",t.opts.messages!==!1&&(r+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var K=r;r=F.pop(),!t.compositeRule&&u?t.async?r+=" throw new ValidationError(["+K+"]); ":r+=" validate.errors = ["+K+"]; return false; ":r+=" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Y=r;r=F.pop(),S?y.errors?y.errors!="full"&&(r+="  for (var "+O+"="+h+"; "+O+"<errors; "+O+"++) { var "+T+" = vErrors["+O+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(r+=" "+T+".schema = "+g+"; "+T+".data = "+f+"; "),r+=" } "):y.errors===!1?r+=" "+Y+" ":(r+=" if ("+h+" == errors) { "+Y+" } else {  for (var "+O+"="+h+"; "+O+"<errors; "+O+"++) { var "+T+" = vErrors["+O+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(r+=" "+T+".schema = "+g+"; "+T+".data = "+f+"; "),r+=" } } "):C?(r+="   var err =   ",t.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+b.keyword+"' } ",t.opts.messages!==!1&&(r+=` , message: 'should pass "`+b.keyword+`" keyword validation' `),t.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&u&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):y.errors===!1?r+=" "+Y+" ":(r+=" if (Array.isArray("+q+")) { if (vErrors === null) vErrors = "+q+"; else vErrors = vErrors.concat("+q+"); errors = vErrors.length;  for (var "+O+"="+h+"; "+O+"<errors; "+O+"++) { var "+T+" = vErrors["+O+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+t.errorPath+";  "+T+'.schemaPath = "'+c+'";  ',t.opts.verbose&&(r+=" "+T+".schema = "+g+"; "+T+".data = "+f+"; "),r+=" } } else { "+Y+" } "),r+=" } ",u&&(r+=" else { ")}return r};const W9="http://json-schema.org/draft-07/schema#",j9="http://json-schema.org/draft-07/schema#",Q9="Core schema meta-schema",G9={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Y9=["object","boolean"],K9={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},SE={$schema:W9,$id:j9,title:Q9,definitions:G9,type:Y9,properties:K9,default:!0};var Ay=SE,X9={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Ay.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Ay.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Z9=/^[a-z_$][a-z0-9_$-]*$/i,J9=H9,eU=X9,tU={add:rU,get:nU,remove:aU,validate:jd};function rU(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Z9.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var a=t.type;if(Array.isArray(a))for(var r=0;r<a.length;r++)o(e,a[r],t);else o(e,a,t);var i=t.metaSchema;i&&(t.$data&&this._opts.$data&&(i={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(i,!0))}n.keywords[e]=n.all[e]=!0;function o(s,l,c){for(var u,d=0;d<n.length;d++){var f=n[d];if(f.type==l){u=f;break}}u||(u={type:l,rules:[]},n.push(u));var p={keyword:s,definition:c,custom:!0,code:J9,implements:c.implements};u.rules.push(p),n.custom[s]=p}return this}function nU(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1}function aU(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var a=t[n].rules,r=0;r<a.length;r++)if(a[r].keyword==e){a.splice(r,1);break}return this}function jd(e,t){jd.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(eU,!0);if(n(e))return!0;if(jd.errors=n.errors,t)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}const iU="http://json-schema.org/draft-07/schema#",oU="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",sU="Meta-schema for $data reference (JSON Schema extension proposal)",lU="object",uU=["$data"],cU={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},dU=!1,fU={$schema:iU,$id:oU,description:sU,type:lU,required:uU,properties:cU,additionalProperties:dU};var _E=JB,vn=Rh,pU=o9,EE=tE,hU=iE,mU=p9,vU=M9,CE=B9,xE=ba,gU=rt;rt.prototype.validate=bU;rt.prototype.compile=wU;rt.prototype.addSchema=SU;rt.prototype.addMetaSchema=_U;rt.prototype.validateSchema=EU;rt.prototype.getSchema=xU;rt.prototype.removeSchema=IU;rt.prototype.addFormat=OU;rt.prototype.errorsText=qU;rt.prototype._addSchema=TU;rt.prototype._compile=PU;rt.prototype.compileAsync=z9;var Sl=tU;rt.prototype.addKeyword=Sl.add;rt.prototype.getKeyword=Sl.get;rt.prototype.removeKeyword=Sl.remove;rt.prototype.validateKeyword=Sl.validate;var NE=Ah;rt.ValidationError=NE.Validation;rt.MissingRefError=NE.MissingRef;rt.$dataMetaSchema=CE;var is="http://json-schema.org/draft-07/schema",ky=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],yU=["/properties"];function rt(e){if(!(this instanceof rt))return new rt(e);e=this._opts=xE.copy(e)||{},BU(this),this._schemas={},this._refs={},this._fragments={},this._formats=mU(e.format),this._cache=e.cache||new pU,this._loadingSchemas={},this._compilations=[],this.RULES=vU(),this._getId=RU(e),e.loopRequired=e.loopRequired||1/0,e.errorDataPath=="property"&&(e._errorDataPathProperty=!0),e.serialize===void 0&&(e.serialize=hU),this._metaOpts=MU(this),e.formats&&LU(this),e.keywords&&VU(this),DU(this),typeof e.meta=="object"&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),FU(this)}function bU(e,t){var n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);n=a.validate||this._compile(a)}var r=n(t);return n.$async!==!0&&(this.errors=n.errors),r}function wU(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)}function SU(e,t,n,a){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.addSchema(e[r],void 0,n,a);return this}var i=this._getId(e);if(i!==void 0&&typeof i!="string")throw new Error("schema id must be string");return t=vn.normalizeId(t||i),TE(this,t),this._schemas[t]=this._addSchema(e,n,a,!0),this}function _U(e,t,n){return this.addSchema(e,t,n,!0),this}function EU(e,t){var n=e.$schema;if(n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this._opts.defaultMeta||CU(this),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(n,e);if(!a&&t){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return a}function CU(e){var t=e._opts.meta;return e._opts.defaultMeta=typeof t=="object"?e._getId(t)||t:e.getSchema(is)?is:void 0,e._opts.defaultMeta}function xU(e){var t=IE(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return NU(this,e)}}function NU(e,t){var n=vn.schema.call(e,{schema:{}},t);if(n){var a=n.schema,r=n.root,i=n.baseId,o=_E.call(e,a,r,void 0,i);return e._fragments[t]=new EE({ref:t,fragment:!0,schema:a,root:r,baseId:i,validate:o}),o}}function IE(e,t){return t=vn.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function IU(e){if(e instanceof RegExp)return po(this,this._schemas,e),po(this,this._refs,e),this;switch(typeof e){case"undefined":return po(this,this._schemas),po(this,this._refs),this._cache.clear(),this;case"string":var t=IE(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,a=n?n(e):e;this._cache.del(a);var r=this._getId(e);r&&(r=vn.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function po(e,t,n){for(var a in t){var r=t[a];!r.meta&&(!n||n.test(a))&&(e._cache.del(r.cacheKey),delete t[a])}}function TU(e,t,n,a){if(typeof e!="object"&&typeof e!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,i=r?r(e):e,o=this._cache.get(i);if(o)return o;a=a||this._opts.addUsedSchema!==!1;var s=vn.normalizeId(this._getId(e));s&&a&&TE(this,s);var l=this._opts.validateSchema!==!1&&!t,c;l&&!(c=s&&s==vn.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=vn.ids.call(this,e),d=new EE({id:s,schema:e,localRefs:u,cacheKey:i,meta:n});return s[0]!="#"&&a&&(this._refs[s]=d),this._cache.put(i,d),l&&c&&this.validateSchema(e,!0),d}function PU(e,t){if(e.compiling)return e.validate=r,r.schema=e.schema,r.errors=null,r.root=t||r,e.schema.$async===!0&&(r.$async=!0),r;e.compiling=!0;var n;e.meta&&(n=this._opts,this._opts=this._metaOpts);var a;try{a=_E.call(this,e.schema,t,e.localRefs)}catch(i){throw delete e.validate,i}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function r(){var i=e.validate,o=i.apply(this,arguments);return r.errors=i.errors,o}}function RU(e){switch(e.schemaId){case"auto":return $U;case"id":return AU;default:return kU}}function AU(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function kU(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function $U(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function qU(e,t){if(e=e||this.errors,!e)return"No errors";t=t||{};for(var n=t.separator===void 0?", ":t.separator,a=t.dataVar===void 0?"data":t.dataVar,r="",i=0;i<e.length;i++){var o=e[i];o&&(r+=a+o.dataPath+" "+o.message+n)}return r.slice(0,-n.length)}function OU(e,t){return typeof t=="string"&&(t=new RegExp(t)),this._formats[e]=t,this}function DU(e){var t;if(e._opts.$data&&(t=fU,e.addMetaSchema(t,t.$id,!0)),e._opts.meta!==!1){var n=SE;e._opts.$data&&(n=CE(n,yU)),e.addMetaSchema(n,is,!0),e._refs["http://json-schema.org/schema"]=is}}function FU(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}function LU(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}function VU(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}function TE(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function MU(e){for(var t=xE.copy(e._opts),n=0;n<ky.length;n++)delete t[ky[n]];return t}function BU(e){var t=e._opts.logger;if(t===!1)e.logger={log:Cc,warn:Cc,error:Cc};else{if(t===void 0&&(t=console),!(typeof t=="object"&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function Cc(){}const UU=Et(gU);let zU=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function $y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function PE(e,t,n){return t&&$y(e.prototype,t),n&&$y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(){return oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oe.apply(this,arguments)}function xr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Qd(e,t)}function Qd(e,t){return Qd=Object.setPrototypeOf||function(a,r){return a.__proto__=r,a},Qd(e,t)}function lt(e,t){if(e==null)return{};var n={},a=Object.keys(e),r,i;for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function HU(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RE(e){var t=HU(e,"string");return typeof t=="symbol"?t:String(t)}function Ba(e){var t=e.type,n=t===void 0?"default":t,a=e.icon,r=e.className,i=lt(e,["type","icon","className"]);return B.createElement("button",oe({type:"button",className:"btn btn-"+n+" "+r},i),B.createElement("i",{className:"glyphicon glyphicon-"+a}))}function $h(e){var t=e.className,n=e.onClick,a=e.disabled;return B.createElement("div",{className:"row"},B.createElement("p",{className:"col-xs-3 col-xs-offset-9 text-right "+t},B.createElement(Ba,{type:"info",icon:"plus",className:"btn-add col-xs-12","aria-label":"Add",tabIndex:"0",onClick:n,disabled:a})))}var WU=Ie.shape({ArrayFieldTemplate:Ie.elementType,FieldTemplate:Ie.elementType,ObjectFieldTemplate:Ie.elementType,definitions:Ie.object.isRequired,rootSchema:Ie.object,fields:Ie.objectOf(Ie.elementType).isRequired,formContext:Ie.object.isRequired,widgets:Ie.objectOf(Ie.oneOfType([Ie.func,Ie.object])).isRequired});Ie.bool,Ie.bool,Ie.object,Ie.any,Ie.object,Ie.func,Ie.func.isRequired,Ie.func,Ie.string,Ie.bool,WU.isRequired,Ie.bool,Ie.object.isRequired,Ie.bool,Ie.bool,Ie.bool;var Fr=AE(),qy=null,Oy=null,Gd="__rjsf_rootSchema";function AE(){var e=new UU({errorDataPath:"property",allErrors:!0,multipleOfPrecision:8,schemaId:"auto",unknownFormats:"ignore"});return e.addFormat("data-url",/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/),e.addFormat("color",/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/),e}function jU(e){return e.length?e.reduce(function(t,n){var a=n.property,r=n.message,i=W1(a),o=t;i.length>0&&i[0]===""&&i.splice(0,1);for(var c=i.slice(0),s=Array.isArray(c),l=0,c=s?c:c[Symbol.iterator]();;){var u;if(s){if(l>=c.length)break;u=c[l++]}else{if(l=c.next(),l.done)break;u=l.value}var d=u;d in o||(o[d]={}),o=o[d]}return Array.isArray(o.__errors)?o.__errors=o.__errors.concat(r):r&&(o.__errors=[r]),t},{}):{}}function un(e,t){t===void 0&&(t="root");var n=[];return"__errors"in e&&(n=n.concat(e.__errors.map(function(a){return{stack:t+": "+a}}))),Object.keys(e).reduce(function(a,r){return r!=="__errors"&&(a=a.concat(un(e[r],r))),a},n)}function Yd(e){var t={__errors:[],addError:function(a){this.__errors.push(a)}};return nt(e)?Object.keys(e).reduce(function(n,a){var r;return oe({},n,(r={},r[a]=Yd(e[a]),r))},t):Array.isArray(e)?e.reduce(function(n,a,r){var i;return oe({},n,(i={},i[r]=Yd(a),i))},t):t}function kE(e){return Object.keys(e).reduce(function(t,n){var a;if(n==="addError")return t;if(n==="__errors"){var r;return oe({},t,(r={},r[n]=e[n],r))}return oe({},t,(a={},a[n]=kE(e[n]),a))},{})}function QU(e){return e===void 0&&(e=[]),e===null?[]:e.map(function(t){var n=t.dataPath,a=t.keyword,r=t.message,i=t.params,o=t.schemaPath,s=""+n;return{name:a,property:s,message:r,params:i,stack:(s+" "+r).trim(),schemaPath:o}})}function $E(e,t,n,a,r,i){r===void 0&&(r=[]),i===void 0&&(i={});var o=t;e=_l(t,e,o,!0);var s=!Wt(Oy,r),l=!Wt(qy,i);(s||l)&&(Fr=AE()),r&&s&&Array.isArray(r)&&(Fr.addMetaSchema(r),Oy=r),i&&l&&nt(i)&&(Object.keys(i).forEach(function(b){Fr.addFormat(b,i[b])}),qy=i);var c=null;try{Fr.validate(t,e)}catch(b){c=b}var u=QU(Fr.errors);Fr.errors=null;var d=c&&c.message&&typeof c.message=="string"&&c.message.includes("no schema with key or ref ");d&&(u=[].concat(u,[{stack:c.message}])),typeof a=="function"&&(u=a(u));var f=jU(u);if(d&&(f=oe({},f,{$schema:{__errors:[c.message]}})),typeof n!="function")return{errors:u,errorSchema:f};var p=n(e,Yd(e)),h=kE(p),v=Ur(f,h,!0),g=un(v);return{errors:g,errorSchema:v}}function Kd(e){var t=e;if(e.constructor===Object){t=oe({},e);for(var n in t){var a=t[n];n==="$ref"&&typeof a=="string"&&a.startsWith("#")?t[n]=Gd+a:t[n]=Kd(a)}}else if(Array.isArray(e)){t=[].concat(e);for(var r=0;r<t.length;r++)t[r]=Kd(t[r])}return t}function Xd(e,t,n){try{return Fr.addSchema(n,Gd).validate(Kd(e),t)}catch{return!1}finally{Fr.removeSchema(Gd)}}var qh="__additional_property",xc={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function GU(e,t,n){if(!e.additionalProperties)return!1;var a=Pt(t),r=a.expandable;return r===!1?r:e.maxProperties!==void 0?Object.keys(n).length<e.maxProperties:!0}function oa(e){var t=e.type;return!t&&e.const?di(e.const):!t&&e.enum?"string":!t&&(e.properties||e.additionalProperties)?"object":t instanceof Array&&t.length===2&&t.includes("null")?t.find(function(n){return n!=="null"}):t}function Sr(e,t,n){n===void 0&&(n={});var a=oa(e);function r(s){if(!s.MergedWidget){var l=s.defaultProps&&s.defaultProps.options||{};s.MergedWidget=function(c){var u=c.options,d=u===void 0?{}:u,f=lt(c,["options"]);return B.createElement(s,oe({options:oe({},l,d)},f))}}return s.MergedWidget}if(typeof t=="function"||ty.isForwardRef(B.createElement(t))||ty.isMemo(t))return r(t);if(typeof t!="string")throw new Error("Unsupported widget definition: "+typeof t);if(n.hasOwnProperty(t)){var i=n[t];return Sr(e,i,n)}if(!xc.hasOwnProperty(a))throw new Error('No widget for type "'+a+'"');if(xc[a].hasOwnProperty(t)){var o=n[xc[a][t]];return Sr(e,o,n)}throw new Error('No widget "'+t+'" for type "'+a+'"')}function YU(e,t,n){n===void 0&&(n={});try{return Sr(e,t,n),!0}catch(a){if(a.message&&(a.message.startsWith("No widget")||a.message.startsWith("Unsupported widget")))return!1;throw a}}function kr(e,t,n,a,r){a===void 0&&(a={}),r===void 0&&(r=!1);var i=nt(e)?e:{},o=nt(a)?a:{},s=t;if(nt(s)&&nt(i.default))s=Ur(s,i.default);else if("default"in i)s=i.default;else if("$ref"in i){var l=Dh(i.$ref,n);return kr(l,s,n,o,r)}else if("dependencies"in i){var c=FE(i,n,o);return kr(c,s,n,o,r)}else Jd(i)?s=i.items.map(function(h,v){return kr(h,Array.isArray(t)?t[v]:void 0,n,o,r)}):"oneOf"in i?i=i.oneOf[fi(void 0,i.oneOf,n)]:"anyOf"in i&&(i=i.anyOf[fi(void 0,i.anyOf,n)]);switch(typeof s>"u"&&(s=i.default),oa(i)){case"object":return Object.keys(i.properties||{}).reduce(function(h,v){var g=kr(i.properties[v],(s||{})[v],n,(o||{})[v],r);return(r||g!==void 0)&&(h[v]=g),h},{});case"array":if(Array.isArray(s)&&(s=s.map(function(h,v){return kr(i.items[v]||i.additionalItems||{},h,n)})),Array.isArray(a)&&(s=a.map(function(h,v){return kr(i.items,(s||{})[v],n,h)})),i.minItems){if(Oh(i,n))return s||[];var u=s?s.length:0;if(i.minItems>u){var d=s||[],f=Array.isArray(i.items)?i.additionalItems:i.items,p=pB(new Array(i.minItems-u),kr(f,f.defaults,n));return d.concat(p)}}}return s}function _l(e,t,n,a){if(n===void 0&&(n={}),a===void 0&&(a=!1),!nt(e))throw new Error("Invalid schema: "+e);var r=ke(e,n,t),i=kr(r,e.default,n,t,a);return typeof t>"u"?i:nt(t)||Array.isArray(t)?Zd(i,t):t===0||t===!1||t===""?t:t||i}function Zd(e,t){if(Array.isArray(t))return Array.isArray(e)||(e=[]),t.map(function(a,r){return e[r]?Zd(e[r],a):a});if(nt(t)){var n=Object.assign({},e);return Object.keys(t).reduce(function(a,r){return a[r]=Zd(e?e[r]:{},t[r]),a},n)}else return t}function Pt(e){return Object.keys(e).filter(function(t){return t.indexOf("ui:")===0}).reduce(function(t,n){var a,r=e[n];return n==="ui:widget"&&nt(r)?(console.warn("Setting options via ui:widget object is deprecated, use ui:options instead"),oe({},t,r.options||{},{widget:r.component})):n==="ui:options"&&nt(r)?oe({},t,r):oe({},t,(a={},a[n.substring(3)]=r,a))},{})}function KU(e){var t=Pt(e),n={props:{disabled:!1},submitText:"Submit",norender:!1};return t&&t.submitButtonOptions?Object.assign({},n,t.submitButtonOptions):n}function XU(e,t,n){var a=Pt(t),r=a.label,i=r===void 0?!0:r,o=oa(e);return o==="array"&&(i=Oh(e,n)||qE(e,t,n)||OE(t)),o==="object"&&(i=!1),o==="boolean"&&!t["ui:widget"]&&(i=!1),t["ui:field"]&&(i=!1),i}function nt(e){return typeof File<"u"&&e instanceof File?!1:typeof e=="object"&&e!==null&&!Array.isArray(e)}function Ur(e,t,n){n===void 0&&(n=!1);var a=Object.assign({},e);return Object.keys(t).reduce(function(r,i){var o=e?e[i]:{},s=t[i];return e&&e.hasOwnProperty(i)&&nt(s)?r[i]=Ur(o,s,n):n&&Array.isArray(o)&&Array.isArray(s)?r[i]=o.concat(s):r[i]=s,r},a)}function Ua(e){if(e!==""){if(e===null)return null;if(/\.$/.test(e)||/\.0$/.test(e))return e;var t=Number(e),n=typeof t=="number"&&!Number.isNaN(t);return/\.\d*0$/.test(e)?e:n?t:e}}function ZU(e,t){if(!Array.isArray(t))return e;var n=function(d){return d.reduce(function(f,p){return f[p]=!0,f},{})},a=function(d){return d.length>1?"properties '"+d.join("', '")+"'":"property '"+d[0]+"'"},r=n(e),i=t.filter(function(u){return u==="*"||r[u]}),o=n(i),s=e.filter(function(u){return!o[u]}),l=i.indexOf("*");if(l===-1){if(s.length)throw new Error("uiSchema order list does not contain "+a(s));return i}if(l!==i.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");var c=[].concat(i);return c.splice.apply(c,[l,1].concat(s)),c}function JU(e){return Array.isArray(e.enum)&&e.enum.length===1||e.hasOwnProperty("const")}function ez(e){if(Array.isArray(e.enum)&&e.enum.length===1)return e.enum[0];if(e.hasOwnProperty("const"))return e.const;throw new Error("schema cannot be inferred as a constant")}function os(e,t){t===void 0&&(t={});var n=ke(e,t),a=n.oneOf||n.anyOf;return Array.isArray(n.enum)?!0:Array.isArray(a)?a.every(function(r){return JU(r)}):!1}function Oh(e,t){return t===void 0&&(t={}),!e.uniqueItems||!e.items?!1:os(e.items,t)}function qE(e,t,n){if(n===void 0&&(n={}),t["ui:widget"]==="files")return!0;if(e.items){var a=ke(e.items,n);return a.type==="string"&&a.format==="data-url"}return!1}function Jd(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every(function(t){return nt(t)})}function OE(e){return"widget"in Pt(e)&&Pt(e).widget!=="hidden"}function Dy(e){return e.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),nt(e.additionalItems)}function ss(e){if(e.enum)return e.enum.map(function(n,a){var r=e.enumNames&&e.enumNames[a]||String(n);return{label:r,value:n}});var t=e.oneOf||e.anyOf;return t.map(function(n){var a=ez(n),r=n.title||String(a);return{schema:n,label:r,value:a}})}function Dh(e,t){t===void 0&&(t={});var n=e;if(e.startsWith("#"))e=decodeURIComponent(e.substring(1));else throw new Error("Could not find a definition for "+n+".");var a=vl.get(t,e);if(a===void 0)throw new Error("Could not find a definition for "+n+".");return a.hasOwnProperty("$ref")?Dh(a.$ref,t):a}var di=function(t){if(Array.isArray(t))return"array";if(typeof t=="string")return"string";if(t==null)return"null";if(typeof t=="boolean")return"boolean";if(isNaN(t)){if(typeof t=="object")return"object"}else return"number";return"string"};function tz(e,t,n){return t===void 0&&(t={}),n===void 0&&(n={}),e=oe({},e,{properties:oe({},e.properties)}),n=nt(n)?n:{},Object.keys(n).forEach(function(a){if(!e.properties.hasOwnProperty(a)){var r;e.additionalProperties.hasOwnProperty("$ref")?r=ke({$ref:e.additionalProperties.$ref},t,n):e.additionalProperties.hasOwnProperty("type")?r=oe({},e.additionalProperties):r={type:di(n[a])},e.properties[a]=r,e.properties[a][qh]=!0}}),e}var rz=function(t,n,a){var r=t.if,i=t.then,o=t.else,s=lt(t,["if","then","else"]),l=Xd(r,a,n)?i:o;return ke(l?El(s,ke(l,n,a)):s,n,a)};function nz(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),e.hasOwnProperty("$ref"))return DE(e,t,n);if(e.hasOwnProperty("dependencies")){var a=FE(e,t,n);return ke(a,t,n)}else return e.hasOwnProperty("allOf")?oe({},e,{allOf:e.allOf.map(function(r){return ke(r,t,n)})}):e}function DE(e,t,n){var a=Dh(e.$ref,t),r=lt(e,["$ref"]);return ke(oe({},a,r),t,n)}function ke(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),!nt(e))return{};var a=nz(e,t,n);if(e.hasOwnProperty("if"))return rz(e,t,n);if(a.properties){var r={};Object.entries(a.properties).forEach(function(l){var c=l[0],u=l[1],d=n&&n[c],f=nt(d)?d:{},p=ke(u,t,f);r[c]=p,u!==p&&a.properties!==r&&(a=oe({},a,{properties:r}))})}if("allOf"in e)try{a=Z6(oe({},a,{allOf:a.allOf}))}catch(l){console.warn(`could not merge subschemas in allOf:
`+l);var i=a,o=lt(i,["allOf"]);return o}var s=a.hasOwnProperty("additionalProperties")&&a.additionalProperties!==!1;return s?tz(a,t,n):a}function FE(e,t,n){var a=e.dependencies,r=a===void 0?{}:a,i=lt(e,["dependencies"]);return"oneOf"in i?i=i.oneOf[fi(n,i.oneOf,t)]:"anyOf"in i&&(i=i.anyOf[fi(n,i.anyOf,t)]),LE(r,i,t,n)}function LE(e,t,n,a){for(var r in e)if(a[r]!==void 0&&!(t.properties&&!(r in t.properties))){var i=e[r],o=lt(e,[r].map(RE));return Array.isArray(i)?t=az(t,i):nt(i)&&(t=iz(t,n,a,r,i)),LE(o,t,n,a)}return t}function az(e,t){if(!t)return e;var n=Array.isArray(e.required)?Array.from(new Set([].concat(e.required,t))):t;return oe({},e,{required:n})}function iz(e,t,n,a,r){var i=ke(r,t,n),o=i.oneOf,s=lt(i,["oneOf"]);if(e=El(e,s),o===void 0)return e;if(!Array.isArray(o))throw new Error("invalid: it is some "+typeof o+" instead of an array");var l=o.map(function(c){return c.hasOwnProperty("$ref")?DE(c,t,n):c});return oz(e,t,n,a,l)}function oz(e,t,n,a,r){var i=r.filter(function(u){if(!u.properties)return!1;var d=u.properties[a];if(d){var f,p={type:"object",properties:(f={},f[a]=d,f)},h=$E(n,p),v=h.errors;return v.length===0}});if(i.length!==1)return console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),e;var o=i[0],s=o.properties,l=lt(s,[a].map(RE)),c=oe({},o,{properties:l});return El(e,ke(c,t,n))}function El(e,t){var n=Object.assign({},e);return Object.keys(t).reduce(function(a,r){var i=e?e[r]:{},o=t[r];return e&&e.hasOwnProperty(r)&&nt(o)?a[r]=El(i,o):e&&t&&(oa(e)==="object"||oa(t)==="object")&&r==="required"&&Array.isArray(i)&&Array.isArray(o)?a[r]=j1(i,o):a[r]=o,a},n)}function ho(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function Wt(e,t,n,a){if(n===void 0&&(n=[]),a===void 0&&(a=[]),e===t)return!0;if(typeof e=="function"||typeof t=="function")return!0;if(typeof e!="object"||typeof t!="object")return!1;if(e===null||t===null)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(ho(e)||ho(t)){if(!(ho(e)&&ho(t)))return!1;var r=Array.prototype.slice;return Wt(r.call(e),r.call(t),n,a)}else{if(e.constructor!==t.constructor)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length===0&&o.length===0)return!0;if(i.length!==o.length)return!1;for(var s=n.length;s--;)if(n[s]===e)return a[s]===t;n.push(e),a.push(t),i.sort(),o.sort();for(var l=i.length-1;l>=0;l--)if(i[l]!==o[l])return!1;for(var c,u=i.length-1;u>=0;u--)if(c=i[u],!Wt(e[c],t[c],n,a))return!1;return n.pop(),a.pop(),!0}}function Fh(e,t,n){var a=e.props,r=e.state;return!Wt(a,t)||!Wt(r,n)}function gn(e,t,n,a,r,i){a===void 0&&(a={}),r===void 0&&(r="root"),i===void 0&&(i="_");var o={$id:t||r};if("$ref"in e||"dependencies"in e||"allOf"in e){var s=ke(e,n,a);return gn(s,t,n,a,r,i)}if("items"in e&&!e.items.$ref)return gn(e.items,t,n,a,r,i);if(e.type!=="object")return o;for(var l in e.properties||{}){var c=e.properties[l],u=o.$id+i+l;o[l]=gn(nt(c)?c:{},u,n,(a||{})[l],r,i)}return o}function za(e,t,n,a){t===void 0&&(t=""),a===void 0&&(a={});var r={$name:t.replace(/^\./,"")};if("$ref"in e||"dependencies"in e||"allOf"in e){var i=ke(e,n,a);return za(i,t,n,a)}if(e.hasOwnProperty("additionalProperties")&&(r.__rjsf_additionalProperties=!0),e.hasOwnProperty("items")&&Array.isArray(a))a.forEach(function(s,l){r[l]=za(e.items,t+"."+l,n,s)});else if(e.hasOwnProperty("properties"))for(var o in e.properties)r[o]=za(e.properties[o],t+"."+o,n,(a||{})[o]);return r}function Aa(e,t){if(t===void 0&&(t=!0),!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};var n=new Date(e);if(Number.isNaN(n.getTime()))throw new Error("Unable to parse date "+e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:t?n.getUTCHours():0,minute:t?n.getUTCMinutes():0,second:t?n.getUTCSeconds():0}}function Fy(e,t){var n=e.year,a=e.month,r=e.day,i=e.hour,o=i===void 0?0:i,s=e.minute,l=s===void 0?0:s,c=e.second,u=c===void 0?0:c;t===void 0&&(t=!0);var d=Date.UTC(n,a-1,r,o,l,u),f=new Date(d).toJSON();return t?f:f.slice(0,10)}function sz(e){if(!e)return"";var t=new Date(e),n=$r(t.getFullYear(),4),a=$r(t.getMonth()+1,2),r=$r(t.getDate(),2),i=$r(t.getHours(),2),o=$r(t.getMinutes(),2),s=$r(t.getSeconds(),2),l=$r(t.getMilliseconds(),3);return n+"-"+a+"-"+r+"T"+i+":"+o+":"+s+"."+l}function lz(e){if(e)return new Date(e).toJSON()}function $r(e,t){for(var n=String(e);n.length<t;)n="0"+n;return n}function uz(e){var t=e.split(","),n=t[0].split(";"),a=n[0].replace("data:",""),r=n.filter(function(u){return u.split("=")[0]==="name"}),i;r.length!==1?i="unknown":i=r[0].split("=")[1];for(var o=atob(t[1]),s=[],l=0;l<o.length;l++)s.push(o.charCodeAt(l));var c=new window.Blob([new Uint8Array(s)],{type:a});return{blob:c,name:i}}function VE(e){var t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||e.minimum===0)&&(t.min=e.minimum),(e.maximum||e.maximum===0)&&(t.max=e.maximum),t}function fi(e,t,n){if(e===void 0)return 0;for(var a=0;a<t.length;a++){var r=t[a];if(r.properties){var i={anyOf:Object.keys(r.properties).map(function(l){return{required:[l]}})},o=void 0;if(r.anyOf){var s=oe({},r);s.allOf?s.allOf=s.allOf.slice():s.allOf=[],s.allOf.push(i),o=s}else o=Object.assign({},r,i);if(delete o.required,Xd(o,e,n))return a}else if(Xd(r,e,n))return a}return 0}function No(e){return e.const||e.enum&&e.enum.length===1&&e.enum[0]===!0?!0:e.anyOf&&e.anyOf.length===1?No(e.anyOf[0]):e.oneOf&&e.oneOf.length===1?No(e.oneOf[0]):e.allOf?e.allOf.some(No):!1}function ME(e){var t=e.TitleField,n=e.idSchema,a=e.title,r=e.required;if(!a)return null;var i=n.$id+"__title";return B.createElement(t,{id:i,title:a,required:r})}function cz(e){var t=e.DescriptionField,n=e.idSchema,a=e.description;if(!a)return null;var r=n.$id+"__description";return B.createElement(t,{id:r,description:a})}function BE(e){var t={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return B.createElement("div",{key:e.key,className:e.className},B.createElement("div",{className:e.hasToolbar?"col-xs-9":"col-xs-12"},e.children),e.hasToolbar&&B.createElement("div",{className:"col-xs-3 array-item-toolbox"},B.createElement("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"}},(e.hasMoveUp||e.hasMoveDown)&&B.createElement(Ba,{icon:"arrow-up","aria-label":"Move up",className:"array-item-move-up",tabIndex:"-1",style:t,disabled:e.disabled||e.readonly||!e.hasMoveUp,onClick:e.onReorderClick(e.index,e.index-1)}),(e.hasMoveUp||e.hasMoveDown)&&B.createElement(Ba,{icon:"arrow-down",className:"array-item-move-down","aria-label":"Move down",tabIndex:"-1",style:t,disabled:e.disabled||e.readonly||!e.hasMoveDown,onClick:e.onReorderClick(e.index,e.index+1)}),e.hasRemove&&B.createElement(Ba,{type:"danger",icon:"remove","aria-label":"Remove",className:"array-item-remove",tabIndex:"-1",style:t,disabled:e.disabled||e.readonly,onClick:e.onDropIndexClick(e.index)}))))}function dz(e){return B.createElement("fieldset",{className:e.className,id:e.idSchema.$id},B.createElement(ME,{key:"array-field-title-"+e.idSchema.$id,TitleField:e.TitleField,idSchema:e.idSchema,title:e.uiSchema["ui:title"]||e.title,required:e.required}),(e.uiSchema["ui:description"]||e.schema.description)&&B.createElement("div",{className:"field-description",key:"field-description-"+e.idSchema.$id},e.uiSchema["ui:description"]||e.schema.description),B.createElement("div",{className:"row array-item-list",key:"array-item-list-"+e.idSchema.$id},e.items&&e.items.map(BE)),e.canAdd&&B.createElement($h,{className:"array-item-add",onClick:e.onAddClick,disabled:e.disabled||e.readonly}))}function fz(e){return B.createElement("fieldset",{className:e.className,id:e.idSchema.$id},B.createElement(ME,{key:"array-field-title-"+e.idSchema.$id,TitleField:e.TitleField,idSchema:e.idSchema,title:e.uiSchema["ui:title"]||e.title,required:e.required}),(e.uiSchema["ui:description"]||e.schema.description)&&B.createElement(cz,{key:"array-field-description-"+e.idSchema.$id,DescriptionField:e.DescriptionField,idSchema:e.idSchema,description:e.uiSchema["ui:description"]||e.schema.description}),B.createElement("div",{className:"row array-item-list",key:"array-item-list-"+e.idSchema.$id},e.items&&e.items.map(function(t){return BE(t)})),e.canAdd&&B.createElement($h,{className:"array-item-add",onClick:e.onAddClick,disabled:e.disabled||e.readonly}))}function ef(){return zU()}function Ly(e){return Array.isArray(e)?e.map(function(t){return{key:ef(),item:t}}):[]}function ka(e){return e.map(function(t){return t.item})}var UE=function(e){xr(t,e);function t(a){var r;r=e.call(this,a)||this,r._getNewFormDataRow=function(){var s=r.props,l=s.schema,c=s.registry,u=c.rootSchema,d=l.items;return Jd(l)&&Dy(l)&&(d=l.additionalItems),_l(d,void 0,u)},r.onAddClick=function(s){s&&s.preventDefault();var l=r.props.onChange,c={key:ef(),item:r._getNewFormDataRow()},u=[].concat(r.state.keyedFormData,[c]);r.setState({keyedFormData:u,updatedKeyedFormData:!0},function(){return l(ka(u))})},r.onAddIndexClick=function(s){return function(l){l&&l.preventDefault();var c=r.props.onChange,u={key:ef(),item:r._getNewFormDataRow()},d=[].concat(r.state.keyedFormData);d.splice(s,0,u),r.setState({keyedFormData:d,updatedKeyedFormData:!0},function(){return c(ka(d))})}},r.onDropIndexClick=function(s){return function(l){l&&l.preventDefault();var c=r.props.onChange,u=r.state.keyedFormData,d;if(r.props.errorSchema){d={};var f=r.props.errorSchema;for(var p in f)p=parseInt(p),p<s?d[p]=f[p]:p>s&&(d[p-1]=f[p])}var h=u.filter(function(v,g){return g!==s});r.setState({keyedFormData:h,updatedKeyedFormData:!0},function(){return c(ka(h),d)})}},r.onReorderClick=function(s,l){return function(c){c&&(c.preventDefault(),c.target.blur());var u=r.props.onChange,d;if(r.props.errorSchema){d={};var f=r.props.errorSchema;for(var p in f)p==s?d[l]=f[s]:p==l?d[s]=f[l]:d[p]=f[p]}var h=r.state.keyedFormData;function v(){var b=h.slice();return b.splice(s,1),b.splice(l,0,h[s]),b}var g=v();r.setState({keyedFormData:g},function(){return u(ka(g),d)})}},r.onChangeForIndex=function(s){return function(l,c){var u,d=r.props,f=d.formData,p=d.onChange,h=f.map(function(v,g){var b=typeof l>"u"?null:l;return s===g?b:v});p(h,c&&r.props.errorSchema&&oe({},r.props.errorSchema,(u={},u[s]=c,u)))}},r.onSelectChange=function(s){r.props.onChange(s)};var i=a.formData,o=Ly(i);return r.state={keyedFormData:o,updatedKeyedFormData:!1},r}t.getDerivedStateFromProps=function(r,i){if(i.updatedKeyedFormData)return{updatedKeyedFormData:!1};var o=r.formData||[],s=i.keyedFormData||[],l=o.length===s.length?s.map(function(c,u){return{key:c.key,item:o[u]}}):Ly(o);return{keyedFormData:l}};var n=t.prototype;return n.isItemRequired=function(r){return Array.isArray(r.type)?!A4(r.type,"null"):r.type!=="null"},n.canAddItem=function(r){var i=this.props,o=i.schema,s=i.uiSchema,l=Pt(s),c=l.addable;return c!==!1&&(o.maxItems!==void 0?c=r.length<o.maxItems:c=!0),c},n.render=function(){var r=this.props,i=r.schema,o=r.uiSchema,s=r.idSchema,l=r.registry,c=l.rootSchema;if(!i.hasOwnProperty("items")){var u=l.fields,d=u.UnsupportedField;return B.createElement(d,{schema:i,idSchema:s,reason:"Missing items definition"})}return Oh(i,c)?this.renderMultiSelect():OE(o)?this.renderCustomWidget():Jd(i)?this.renderFixedArray():qE(i,o,c)?this.renderFiles():this.renderNormalArray()},n.renderNormalArray=function(){var r=this,i=this.props,o=i.schema,s=i.uiSchema,l=i.errorSchema,c=i.idSchema,u=i.name,d=i.required,f=i.disabled,p=i.readonly,h=i.hideError,v=i.autofocus,g=i.registry,b=i.onBlur,E=i.onFocus,y=i.idPrefix,_=i.idSeparator,w=_===void 0?"_":_,S=i.rawErrors,C=o.title===void 0?u:o.title,x=g.ArrayFieldTemplate,I=g.rootSchema,P=g.fields,q=g.formContext,O=P.TitleField,T=P.DescriptionField,N=ke(o.items,I),A=ka(this.state.keyedFormData),k={canAdd:this.canAddItem(A),items:this.state.keyedFormData.map(function(V,F){var z=V.key,W=V.item,G=ke(o.items,I,W),K=l?l[F]:void 0,Y=c.$id+w+F,X=gn(G,Y,I,W,y,w);return r.renderArrayFieldItem({key:z,index:F,canMoveUp:F>0,canMoveDown:F<A.length-1,itemSchema:G,itemIdSchema:X,itemErrorSchema:K,itemData:W,itemUiSchema:s.items,autofocus:v&&F===0,onBlur:b,onFocus:E})}),className:"field field-array field-array-of-"+N.type,DescriptionField:T,disabled:f,idSchema:c,uiSchema:s,onAddClick:this.onAddClick,readonly:p,hideError:h,required:d,schema:o,title:C,TitleField:O,formContext:q,formData:A,rawErrors:S,registry:g},R=s["ui:ArrayFieldTemplate"]||x||fz;return B.createElement(R,k)},n.renderCustomWidget=function(){var r=this.props,i=r.schema,o=r.idSchema,s=r.uiSchema,l=r.disabled,c=r.readonly,u=r.hideError,d=r.required,f=r.placeholder,p=r.autofocus,h=r.onBlur,v=r.onFocus,g=r.formData,b=r.registry,E=r.rawErrors,y=r.name,_=b.widgets,w=b.formContext,S=i.title||y,C=oe({},Pt(s)),x=C.widget,I=lt(C,["widget"]),P=Sr(i,x,_);return B.createElement(P,{id:o&&o.$id,multiple:!0,onChange:this.onSelectChange,onBlur:h,onFocus:v,options:I,schema:i,uiSchema:s,registry:b,value:g,disabled:l,readonly:c,hideError:u,required:d,label:S,placeholder:f,formContext:w,autofocus:p,rawErrors:E})},n.renderMultiSelect=function(){var r=this.props,i=r.schema,o=r.idSchema,s=r.uiSchema,l=r.formData,c=r.disabled,u=r.readonly,d=r.required,f=r.placeholder,p=r.autofocus,h=r.onBlur,v=r.onFocus,g=r.registry,b=r.rawErrors,E=r.name,y=this.props.formData,_=g.widgets,w=g.rootSchema,S=g.formContext,C=ke(i.items,w,l),x=i.title||E,I=ss(C),P=oe({},Pt(s),{enumOptions:I}),q=P.widget,O=q===void 0?"select":q,T=lt(P,["widget"]),N=Sr(i,O,_);return B.createElement(N,{id:o&&o.$id,multiple:!0,onChange:this.onSelectChange,onBlur:h,onFocus:v,options:T,schema:i,uiSchema:s,registry:g,value:y,disabled:c,readonly:u,required:d,label:x,placeholder:f,formContext:S,autofocus:p,rawErrors:b})},n.renderFiles=function(){var r=this.props,i=r.schema,o=r.uiSchema,s=r.idSchema,l=r.name,c=r.disabled,u=r.readonly,d=r.autofocus,f=r.onBlur,p=r.onFocus,h=r.registry,v=r.rawErrors,g=i.title||l,b=this.props.formData,E=h.widgets,y=h.formContext,_=Pt(o),w=_.widget,S=w===void 0?"files":w,C=lt(_,["widget"]),x=Sr(i,S,E);return B.createElement(x,{options:C,id:s&&s.$id,multiple:!0,onChange:this.onSelectChange,onBlur:f,onFocus:p,schema:i,uiSchema:o,title:g,value:b,disabled:c,readonly:u,registry:h,formContext:y,autofocus:d,rawErrors:v})},n.renderFixedArray=function(){var r=this,i=this.props,o=i.schema,s=i.uiSchema,l=i.formData,c=i.errorSchema,u=i.idPrefix,d=i.idSeparator,f=d===void 0?"_":d,p=i.idSchema,h=i.name,v=i.required,g=i.disabled,b=i.readonly,E=i.autofocus,y=i.registry,_=i.onBlur,w=i.onFocus,S=i.rawErrors,C=o.title||h,x=this.props.formData,I=y.ArrayFieldTemplate,P=y.rootSchema,q=y.fields,O=y.formContext,T=q.TitleField,N=o.items.map(function(V,F){return ke(V,P,l[F])}),A=Dy(o)?ke(o.additionalItems,P,l):null;(!x||x.length<N.length)&&(x=x||[],x=x.concat(new Array(N.length-x.length)));var k={canAdd:this.canAddItem(x)&&A,className:"field field-array field-array-fixed-items",disabled:g,idSchema:p,formData:l,items:this.state.keyedFormData.map(function(V,F){var z=V.key,W=V.item,G=F>=N.length,K=G?ke(o.additionalItems,P,W):N[F],Y=p.$id+f+F,X=gn(K,Y,P,W,u,f),J=G?s.additionalItems||{}:Array.isArray(s.items)?s.items[F]:s.items||{},ee=c?c[F]:void 0;return r.renderArrayFieldItem({key:z,index:F,canRemove:G,canMoveUp:F>=N.length+1,canMoveDown:G&&F<x.length-1,itemSchema:K,itemData:W,itemUiSchema:J,itemIdSchema:X,itemErrorSchema:ee,autofocus:E&&F===0,onBlur:_,onFocus:w})}),onAddClick:this.onAddClick,readonly:b,required:v,registry:y,schema:o,uiSchema:s,title:C,TitleField:T,formContext:O,rawErrors:S},R=s["ui:ArrayFieldTemplate"]||I||dz;return B.createElement(R,k)},n.renderArrayFieldItem=function(r){var i=r.key,o=r.index,s=r.canRemove,l=s===void 0?!0:s,c=r.canMoveUp,u=c===void 0?!0:c,d=r.canMoveDown,f=d===void 0?!0:d,p=r.itemSchema,h=r.itemData,v=r.itemUiSchema,g=r.itemIdSchema,b=r.itemErrorSchema,E=r.autofocus,y=r.onBlur,_=r.onFocus,w=r.rawErrors,S=this.props,C=S.disabled,x=S.readonly,I=S.uiSchema,P=S.registry,q=P.fields.SchemaField,O=Pt(I),T=O.orderable,N=T===void 0?!0:T,A=O.removable,k=A===void 0?!0:A,R={moveUp:N&&u,moveDown:N&&f,remove:k&&l};return R.toolbar=Object.keys(R).some(function(V){return R[V]}),{children:B.createElement(q,{index:o,schema:p,uiSchema:v,formData:h,errorSchema:b,idPrefix:this.props.idPrefix,idSeparator:this.props.idSeparator,idSchema:g,required:this.isItemRequired(p),onChange:this.onChangeForIndex(o),onBlur:y,onFocus:_,registry:this.props.registry,disabled:this.props.disabled,readonly:this.props.readonly,hideError:this.props.hideError,autofocus:E,rawErrors:w}),className:"array-item",disabled:C,hasToolbar:R.toolbar,hasMoveUp:R.moveUp,hasMoveDown:R.moveDown,hasRemove:R.remove,index:o,key:i,onAddIndexClick:this.onAddIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:x}},PE(t,[{key:"itemTitle",get:function(){var r=this.props.schema;return r.items.title||r.items.description||"Item"}}]),t}($.Component);UE.defaultProps={uiSchema:{},formData:[],idSchema:{},required:!1,disabled:!1,readonly:!1,autofocus:!1};function zE(e){var t=e.schema,n=e.name,a=e.uiSchema,r=e.idSchema,i=e.formData,o=e.registry,s=e.required,l=e.disabled,c=e.readonly,u=e.autofocus,d=e.onChange,f=e.onFocus,p=e.onBlur,h=e.rawErrors,v=t.title,g=o.widgets,b=o.formContext,E=o.fields,y=Pt(a),_=y.widget,w=_===void 0?"checkbox":_,S=lt(y,["widget"]),C=Sr(t,w,g),x;return Array.isArray(t.oneOf)?x=ss({oneOf:t.oneOf.map(function(I){return oe({},I,{title:I.title||(I.const===!0?"Yes":"No")})})}):x=ss({enum:t.enum||[!0,!1],enumNames:t.enumNames||(t.enum&&t.enum[0]===!1?["No","Yes"]:["Yes","No"])}),B.createElement(C,{options:oe({},S,{enumOptions:x}),schema:t,uiSchema:a,id:r&&r.$id,onChange:d,onFocus:f,onBlur:p,label:v===void 0?n:v,value:i,required:s,disabled:l,readonly:c,registry:o,formContext:b,autofocus:u,rawErrors:h,DescriptionField:E.DescriptionField})}zE.defaultProps={uiSchema:{},disabled:!1,readonly:!1,autofocus:!1};function pz(e){var t=e.id,n=e.description;return n?typeof n=="string"?B.createElement("p",{id:t,className:"field-description"},n):B.createElement("div",{id:t,className:"field-description"},n):null}var tf=function(e){xr(t,e);function t(a){var r;r=e.call(this,a)||this,r.onOptionChange=function(l){var c=parseInt(l,10),u=r.props,d=u.formData,f=u.onChange,p=u.options,h=u.registry,v=h.rootSchema,g=ke(p[c],v,d),b=void 0;if(di(d)==="object"&&(g.type==="object"||g.properties)){b=Object.assign({},d);var E=p.slice();E.splice(c,1);for(var w=E,y=Array.isArray(w),_=0,w=y?w:w[Symbol.iterator]();;){var S;if(y){if(_>=w.length)break;S=w[_++]}else{if(_=w.next(),_.done)break;S=_.value}var C=S;if(C.properties)for(var x in C.properties)b.hasOwnProperty(x)&&delete b[x]}}f(_l(p[c],b,v)),r.setState({selectedOption:parseInt(l,10)})};var i=r.props,o=i.formData,s=i.options;return r.state={selectedOption:r.getMatchingOption(o,s)},r}var n=t.prototype;return n.componentDidUpdate=function(r,i){if(!Wt(this.props.formData,r.formData)&&this.props.idSchema.$id===r.idSchema.$id){var o=this.getMatchingOption(this.props.formData,this.props.options);if(!i||o===this.state.selectedOption)return;this.setState({selectedOption:o})}},n.getMatchingOption=function(r,i){var o=this.props.registry.rootSchema,s=fi(r,i,o);return s!==0?s:this&&this.state?this.state.selectedOption:0},n.render=function(){var r=this.props,i=r.baseType,o=r.disabled,s=r.readonly,l=r.hideError,c=r.errorSchema,u=r.formData,d=r.idPrefix,f=r.idSeparator,p=r.idSchema,h=r.onBlur,v=r.onChange,g=r.onFocus,b=r.options,E=r.registry,y=r.uiSchema,_=r.schema,w=E.fields.SchemaField,S=E.widgets,C=this.state.selectedOption,x=Pt(y),I=x.widget,P=I===void 0?"select":I,q=lt(x,["widget"]),O=Sr({type:"number"},P,S),T=b[C]||null,N;T&&(N=T.type?T:Object.assign({},T,{type:i}));var A=b.map(function(k,R){return{label:k.title||"Option "+(R+1),value:R}});return B.createElement("div",{className:"panel panel-default panel-body"},B.createElement("div",{className:"form-group"},B.createElement(O,oe({id:""+p.$id+(_.oneOf?"__oneof_select":"__anyof_select"),schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:h,onFocus:g,value:C,options:{enumOptions:A},registry:E},q))),T!==null&&B.createElement(w,{schema:N,uiSchema:y,errorSchema:c,idSchema:p,idPrefix:d,idSeparator:f,formData:u,onChange:v,onBlur:h,onFocus:g,registry:E,disabled:o,readonly:s,hideError:l}))},t}($.Component);tf.defaultProps={disabled:!1,readonly:!1,hideError:!1,errorSchema:{},idSchema:{},uiSchema:{}};var hz=/\.([0-9]*0)*$/,mz=/[0.]0*$/,HE=function(e){xr(t,e);function t(a){var r;return r=e.call(this,a)||this,r.handleChange=function(i){r.setState({lastValue:i}),(""+i).charAt(0)==="."&&(i="0"+i);var o=typeof i=="string"&&i.match(hz)?Ua(i.replace(mz,"")):Ua(i);r.props.onChange(o)},r.state={lastValue:a.value},r}var n=t.prototype;return n.render=function(){var r=this.props.registry.fields.StringField,i=this.props,o=i.formData,s=lt(i,["formData"]),l=this.state.lastValue,c=o;if(typeof l=="string"&&typeof c=="number"){var u=new RegExp((""+c).replace(".","\\.")+"\\.?0*$");l.match(u)&&(c=l)}return B.createElement(r,oe({},s,{formData:c,onChange:this.handleChange}))},t}(B.Component);HE.defaultProps={uiSchema:{}};function vz(e){var t=e.TitleField,n=e.DescriptionField;return B.createElement("fieldset",{id:e.idSchema.$id},(e.uiSchema["ui:title"]||e.title)&&B.createElement(t,{id:e.idSchema.$id+"__title",title:e.title||e.uiSchema["ui:title"],required:e.required,formContext:e.formContext}),e.description&&B.createElement(n,{id:e.idSchema.$id+"__description",description:e.description,formContext:e.formContext}),e.properties.map(function(a){return a.content}),GU(e.schema,e.uiSchema,e.formData)&&B.createElement($h,{className:"object-property-expand",onClick:e.onAddClick(e.schema),disabled:e.disabled||e.readonly}))}var WE=function(e){xr(t,e);function t(){for(var a,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,a.state={wasPropertyKeyModified:!1,additionalProperties:{}},a.onPropertyChange=function(s,l){return l===void 0&&(l=!1),function(c,u){var d,f;c===void 0&&l&&(c="");var p=oe({},a.props.formData,(d={},d[s]=c,d));a.props.onChange(p,u&&a.props.errorSchema&&oe({},a.props.errorSchema,(f={},f[s]=u,f)))}},a.onDropPropertyClick=function(s){return function(l){l.preventDefault();var c=a.props,u=c.onChange,d=c.formData,f=oe({},d);delete f[s],u(f)}},a.getAvailableKey=function(s,l){for(var c=0,u=s;l.hasOwnProperty(u);)u=s+"-"+ ++c;return u},a.onKeyChange=function(s){return function(l,c){var u,d;if(s!==l){l=a.getAvailableKey(l,a.props.formData);var f=oe({},a.props.formData),p=(u={},u[s]=l,u),h=Object.keys(f).map(function(g){var b,E=p[g]||g;return b={},b[E]=f[g],b}),v=Object.assign.apply(Object,[{}].concat(h));a.setState({wasPropertyKeyModified:!0}),a.props.onChange(v,c&&a.props.errorSchema&&oe({},a.props.errorSchema,(d={},d[l]=c,d)))}}},a.handleAddClick=function(s){return function(){var l=s.additionalProperties.type,c=oe({},a.props.formData);if(s.additionalProperties.hasOwnProperty("$ref")){var u=a.props.registry,d=ke({$ref:s.additionalProperties.$ref},u.rootSchema,a.props.formData);l=d.type}c[a.getAvailableKey("newKey",c)]=a.getDefaultValue(l),a.props.onChange(c)}},a}var n=t.prototype;return n.isRequired=function(r){var i=this.props.schema;return Array.isArray(i.required)&&i.required.indexOf(r)!==-1},n.getDefaultValue=function(r){switch(r){case"string":return"New Value";case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return"New Value"}},n.render=function(){var r=this,i=this.props,o=i.uiSchema,s=i.formData,l=i.errorSchema,c=i.idSchema,u=i.name,d=i.required,f=i.disabled,p=i.readonly,h=i.hideError,v=i.idPrefix,g=i.idSeparator,b=i.onBlur,E=i.onFocus,y=i.registry,_=y.rootSchema,w=y.fields,S=y.formContext,C=w.SchemaField,x=w.TitleField,I=w.DescriptionField,P=ke(this.props.schema,_,s),q=P.title===void 0?u:P.title,O=o["ui:description"]||P.description,T;try{var N=Object.keys(P.properties||{});T=ZU(N,o["ui:order"])}catch(R){return B.createElement("div",null,B.createElement("p",{className:"config-error",style:{color:"red"}},"Invalid ",u||"root"," object field configuration:",B.createElement("em",null,R.message),"."),B.createElement("pre",null,JSON.stringify(P)))}var A=o["ui:ObjectFieldTemplate"]||y.ObjectFieldTemplate||vz,k={title:o["ui:title"]||q,description:O,TitleField:x,DescriptionField:I,properties:T.map(function(R){var V=P.properties[R].hasOwnProperty(qh),F=V?o.additionalProperties:o[R],z=F&&F["ui:widget"]==="hidden";return{content:B.createElement(C,{key:R,name:R,required:r.isRequired(R),schema:P.properties[R],uiSchema:F,errorSchema:l[R],idSchema:c[R],idPrefix:v,idSeparator:g,formData:(s||{})[R],wasPropertyKeyModified:r.state.wasPropertyKeyModified,onKeyChange:r.onKeyChange(R),onChange:r.onPropertyChange(R,V),onBlur:b,onFocus:E,registry:y,disabled:f,readonly:p,hideError:h,onDropPropertyClick:r.onDropPropertyClick}),name:R,readonly:p,disabled:f,required:d,hidden:z}}),readonly:p,disabled:f,required:d,idSchema:c,uiSchema:o,schema:P,formData:s,formContext:S,registry:y};return B.createElement(A,oe({},k,{onAddClick:this.handleAddClick}))},t}($.Component);WE.defaultProps={uiSchema:{},formData:{},errorSchema:{},idSchema:{},required:!1,disabled:!1,readonly:!1};var gz="*",yz={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function bz(e,t,n,a){var r=t["ui:field"];if(typeof r=="function")return r;if(typeof r=="string"&&r in a)return a[r];var i=yz[oa(e)];return!i&&(e.anyOf||e.oneOf)?function(){return null}:i in a?a[i]:function(){var o=a.UnsupportedField;return B.createElement(o,{schema:e,idSchema:n,reason:"Unknown field type "+e.type})}}function jE(e){var t=e.label,n=e.required,a=e.id;return t?B.createElement("label",{className:"control-label",htmlFor:a},t,n&&B.createElement("span",{className:"required"},gz)):null}function wz(e){var t=e.id,n=e.label,a=e.onChange;return B.createElement("input",{className:"form-control",type:"text",id:t,onBlur:function(i){return a(i.target.value)},defaultValue:n})}function Sz(e){var t=e.id,n=e.help;return n?typeof n=="string"?B.createElement("p",{id:t,className:"help-block"},n):B.createElement("div",{id:t,className:"help-block"},n):null}function _z(e){var t=e.errors,n=t===void 0?[]:t;return n.length===0?null:B.createElement("div",null,B.createElement("ul",{className:"error-detail bs-callout bs-callout-info"},n.filter(function(a){return!!a}).map(function(a,r){return B.createElement("li",{className:"text-danger",key:r},a)})))}function QE(e){var t=e.id,n=e.label,a=e.children,r=e.errors,i=e.help,o=e.description,s=e.hidden,l=e.required,c=e.displayLabel;return s?B.createElement("div",{className:"hidden"},a):B.createElement(Ez,e,c&&B.createElement(jE,{label:n,required:l,id:t}),c&&o?o:null,a,r,i)}QE.defaultProps={hidden:!1,readonly:!1,required:!1,displayLabel:!0};function Ez(e){var t=e.id,n=e.classNames,a=e.disabled,r=e.label,i=e.onKeyChange,o=e.onDropPropertyClick,s=e.readonly,l=e.required,c=e.schema,u=r+" Key",d=c.hasOwnProperty(qh);return d?B.createElement("div",{className:n},B.createElement("div",{className:"row"},B.createElement("div",{className:"col-xs-5 form-additional"},B.createElement("div",{className:"form-group"},B.createElement(jE,{label:u,required:l,id:t+"-key"}),B.createElement(wz,{label:r,required:l,id:t+"-key",onChange:i}))),B.createElement("div",{className:"form-additional form-group col-xs-5"},e.children),B.createElement("div",{className:"col-xs-2"},B.createElement(Ba,{type:"danger",icon:"remove",className:"array-item-remove btn-block",tabIndex:"-1",style:{border:"0"},disabled:a||s,onClick:o(r)})))):B.createElement("div",{className:n},e.children)}function Cz(e){var t=e.uiSchema,n=e.formData,a=e.errorSchema,r=e.idPrefix,i=e.idSeparator,o=e.name,s=e.onChange,l=e.onKeyChange,c=e.onDropPropertyClick,u=e.required,d=e.registry,f=e.wasPropertyKeyModified,p=f===void 0?!1:f,h=d.rootSchema,v=d.fields,g=d.formContext,b=t["ui:FieldTemplate"]||d.FieldTemplate||QE,E=e.idSchema,y=ke(e.schema,h,n);E=Ur(gn(y,null,h,n,r,i),E);var _=bz(y,t,E,v),w=v.DescriptionField,S=!!(e.disabled||t["ui:disabled"]),C=!!(e.readonly||t["ui:readonly"]||e.schema.readOnly||y.readOnly),x=t["ui:hideError"],I=x===void 0?e.hideError:!!x,P=!!(e.autofocus||t["ui:autofocus"]);if(Object.keys(y).length===0)return null;var q=XU(y,t,h),O=a.__errors,T=lt(a,["__errors"]),N=B.createElement(_,oe({},e,{idSchema:E,schema:y,uiSchema:oe({},t,{classNames:void 0}),disabled:S,readonly:C,hideError:I,autofocus:P,errorSchema:T,formContext:g,rawErrors:O})),A=E.$id,k;p?k=o:k=t["ui:title"]||e.schema.title||y.title||o;var R=t["ui:description"]||e.schema.description||y.description,V=O,F=t["ui:help"],z=t["ui:widget"]==="hidden",W=["form-group","field","field-"+y.type];!I&&V&&V.length>0&&W.push("field-error has-error has-danger"),W.push(t.classNames),W=W.join(" ").trim();var G={description:B.createElement(w,{id:A+"__description",description:R,formContext:g}),rawDescription:R,help:B.createElement(Sz,{id:A+"__help",help:F}),rawHelp:typeof F=="string"?F:void 0,errors:I?void 0:B.createElement(_z,{errors:V}),rawErrors:I?void 0:V,id:A,label:k,hidden:z,onChange:s,onKeyChange:l,onDropPropertyClick:c,required:u,disabled:S,readonly:C,hideError:I,displayLabel:q,classNames:W,formContext:g,formData:n,fields:v,schema:y,uiSchema:t,registry:d},K=d.fields.AnyOfField,Y=d.fields.OneOfField;return B.createElement(b,G,B.createElement(B.Fragment,null,N,y.anyOf&&!os(y)&&B.createElement(K,{disabled:S,readonly:C,hideError:I,errorSchema:a,formData:n,idPrefix:r,idSchema:E,idSeparator:i,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:y.anyOf.map(function(X){return ke(X,h,n)}),baseType:y.type,registry:d,schema:y,uiSchema:t}),y.oneOf&&!os(y)&&B.createElement(Y,{disabled:S,readonly:C,hideError:I,errorSchema:a,formData:n,idPrefix:r,idSchema:E,idSeparator:i,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:y.oneOf.map(function(X){return ke(X,h,n)}),baseType:y.type,registry:d,schema:y,uiSchema:t})))}var GE=function(e){xr(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.shouldComponentUpdate=function(r,i){return!Wt(this.props,r)},n.render=function(){return Cz(this.props)},t}(B.Component);GE.defaultProps={uiSchema:{},errorSchema:{},idSchema:{},disabled:!1,readonly:!1,autofocus:!1,hideError:!1};function YE(e){var t=e.schema,n=e.name,a=e.uiSchema,r=e.idSchema,i=e.formData,o=e.required,s=e.disabled,l=e.readonly,c=e.autofocus,u=e.onChange,d=e.onBlur,f=e.onFocus,p=e.registry,h=e.rawErrors,v=t.title,g=t.format,b=p.widgets,E=p.formContext,y=os(t)&&ss(t),_=y?"select":"text";g&&YU(t,g,b)&&(_=g);var w=Pt(a),S=w.widget,C=S===void 0?_:S,x=w.placeholder,I=x===void 0?"":x,P=lt(w,["widget","placeholder"]),q=Sr(t,C,b);return B.createElement(q,{options:oe({},P,{enumOptions:y}),schema:t,uiSchema:a,id:r&&r.$id,label:v===void 0?n:v,value:i,onChange:u,onBlur:d,onFocus:f,required:o,disabled:s,readonly:l,formContext:E,autofocus:c,registry:p,placeholder:I,rawErrors:h})}YE.defaultProps={uiSchema:{},disabled:!1,readonly:!1,autofocus:!1};var xz="*";function Nz(e){var t=e.id,n=e.title,a=e.required;return B.createElement("legend",{id:t},n,a&&B.createElement("span",{className:"required"},xz))}var Iz=function(e){xr(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.componentDidMount=function(){this.props.formData===void 0&&this.props.onChange(null)},n.render=function(){return null},t}($.Component);function Tz(e){var t=e.schema,n=e.idSchema,a=e.reason;return B.createElement("div",{className:"unsupported-field"},B.createElement("p",null,"Unsupported field schema",n&&n.$id&&B.createElement("span",null," for"," field ",B.createElement("code",null,n.$id)),a&&B.createElement("em",null,": ",a),"."),t&&B.createElement("pre",null,JSON.stringify(t,null,2)))}var Pz={AnyOfField:tf,ArrayField:UE,BooleanField:zE,DescriptionField:pz,NumberField:HE,ObjectField:WE,OneOfField:tf,SchemaField:GE,StringField:YE,TitleField:Nz,NullField:Iz,UnsupportedField:Tz};function Rz(e,t){for(var n=[],a=e;a<=t;a++)n.push({value:a,label:$r(a,2)});return n}function Az(e){return Object.keys(e).every(function(t){return e[t]!==-1})}function kz(e){var t=e.type,n=e.range,a=e.value,r=e.select,i=e.rootId,o=e.disabled,s=e.readonly,l=e.autofocus,c=e.registry,u=e.onBlur,d=i+"_"+t,f=c.widgets.SelectWidget;return B.createElement(f,{schema:{type:"integer"},id:d,className:"form-control",options:{enumOptions:Rz(n[0],n[1])},placeholder:t,value:a,disabled:o,readonly:s,autofocus:l,onChange:function(h){return r(t,h)},onBlur:u})}var Lh=function(e){xr(t,e);function t(a){var r;return r=e.call(this,a)||this,r.onChange=function(i,o){var s;r.setState((s={},s[i]=typeof o>"u"?-1:o,s),function(){Az(r.state)&&r.props.onChange(Fy(r.state,r.props.time))})},r.setNow=function(i){i.preventDefault();var o=r.props,s=o.time,l=o.disabled,c=o.readonly,u=o.onChange;if(!(l||c)){var d=Aa(new Date().toJSON(),s);r.setState(d,function(){return u(Fy(r.state,s))})}},r.clear=function(i){i.preventDefault();var o=r.props,s=o.time,l=o.disabled,c=o.readonly,u=o.onChange;l||c||r.setState(Aa("",s),function(){return u(void 0)})},r.state=Aa(a.value,a.time),r}var n=t.prototype;return n.componentDidUpdate=function(r,i){r.value&&r.value!==Aa(this.props.value,this.props.time)&&this.setState(Aa(this.props.value,this.props.time))},n.shouldComponentUpdate=function(r,i){return Fh(this,r,i)},n.render=function(){var r=this,i=this.props,o=i.id,s=i.disabled,l=i.readonly,c=i.autofocus,u=i.registry,d=i.onBlur,f=i.options;return B.createElement("ul",{className:"list-inline"},this.dateElementProps.map(function(p,h){return B.createElement("li",{key:h},B.createElement(kz,oe({rootId:o,select:r.onChange},p,{disabled:s,readonly:l,registry:u,onBlur:d,autofocus:c&&h===0})))}),(f.hideNowButton!=="undefined"?!f.hideNowButton:!0)&&B.createElement("li",null,B.createElement("a",{href:"#",className:"btn btn-info btn-now",onClick:this.setNow},"Now")),(f.hideClearButton!=="undefined"?!f.hideClearButton:!0)&&B.createElement("li",null,B.createElement("a",{href:"#",className:"btn btn-warning btn-clear",onClick:this.clear},"Clear")))},PE(t,[{key:"dateElementProps",get:function(){var r=this.props,i=r.time,o=r.options,s=this.state,l=s.year,c=s.month,u=s.day,d=s.hour,f=s.minute,p=s.second,h=[{type:"year",range:o.yearsRange,value:l},{type:"month",range:[1,12],value:c},{type:"day",range:[1,31],value:u}];return i&&h.push({type:"hour",range:[0,23],value:d},{type:"minute",range:[0,59],value:f},{type:"second",range:[0,59],value:p}),h}}]),t}($.Component);Lh.defaultProps={time:!1,disabled:!1,readonly:!1,autofocus:!1,options:{yearsRange:[1900,new Date().getFullYear()+2]}};function KE(e){var t=e.registry.widgets.AltDateWidget;return B.createElement(t,oe({time:!0},e))}KE.defaultProps=oe({},Lh.defaultProps,{time:!0});function XE(e){if(!e.id)throw console.log("No id for",e),new Error("no id for props "+JSON.stringify(e));var t=e.value,n=e.readonly,a=e.disabled,r=e.autofocus,i=e.onBlur,o=e.onFocus,s=e.options,l=e.schema,c=lt(e,["value","readonly","disabled","autofocus","onBlur","onFocus","options","schema","uiSchema","formContext","registry","rawErrors"]);s.inputType?c.type=s.inputType:c.type||(l.type==="number"?(c.type="number",c.step="any"):l.type==="integer"?(c.type="number",c.step="1"):c.type="text"),s.autocomplete&&(c.autoComplete=s.autocomplete),l.multipleOf&&(c.step=l.multipleOf),typeof l.minimum<"u"&&(c.min=l.minimum),typeof l.maximum<"u"&&(c.max=l.maximum);var u=function(f){var p=f.target.value;return e.onChange(p===""?s.emptyValue:p)};return[B.createElement("input",oe({key:c.id,className:"form-control",readOnly:n,disabled:a,autoFocus:r,value:t??""},c,{list:l.examples?"examples_"+c.id:null,onChange:u,onBlur:i&&function(d){return i(c.id,d.target.value)},onFocus:o&&function(d){return o(c.id,d.target.value)}})),l.examples?B.createElement("datalist",{key:"datalist_"+c.id,id:"examples_"+c.id},[].concat(new Set(l.examples.concat(l.default?[l.default]:[]))).map(function(d){return B.createElement("option",{key:d,value:d})})):null]}XE.defaultProps={required:!1,disabled:!1,readonly:!1,autofocus:!1};function ZE(e){var t=e.schema,n=e.id,a=e.value,r=e.disabled,i=e.readonly,o=e.label,s=e.autofocus,l=e.onBlur,c=e.onFocus,u=e.onChange,d=e.DescriptionField,f=No(t);return B.createElement("div",{className:"checkbox "+(r||i?"disabled":"")},t.description&&B.createElement(d,{description:t.description}),B.createElement("label",null,B.createElement("input",{type:"checkbox",id:n,checked:typeof a>"u"?!1:a,required:f,disabled:r||i,autoFocus:s,onChange:function(h){return u(h.target.checked)},onBlur:l&&function(p){return l(n,p.target.checked)},onFocus:c&&function(p){return c(n,p.target.checked)}}),B.createElement("span",null,o)))}ZE.defaultProps={autofocus:!1};function $z(e,t,n){var a=n.indexOf(e),r=t.slice(0,a).concat(e,t.slice(a));return r.sort(function(i,o){return n.indexOf(i)>n.indexOf(o)})}function qz(e,t){return t.filter(function(n){return n!==e})}function JE(e){var t=e.id,n=e.disabled,a=e.options,r=e.value,i=e.autofocus,o=e.readonly,s=e.onChange,l=a.enumOptions,c=a.enumDisabled,u=a.inline;return B.createElement("div",{className:"checkboxes",id:t},l.map(function(d,f){var p=r.indexOf(d.value)!==-1,h=c&&c.indexOf(d.value)!=-1,v=n||h||o?"disabled":"",g=B.createElement("span",null,B.createElement("input",{type:"checkbox",id:t+"_"+f,checked:p,disabled:n||h||o,autoFocus:i&&f===0,onChange:function(E){var y=l.map(function(_){var w=_.value;return w});E.target.checked?s($z(d.value,r,y)):s(qz(d.value,r))}}),B.createElement("span",null,d.label));return u?B.createElement("label",{key:f,className:"checkbox-inline "+v},g):B.createElement("div",{key:f,className:"checkbox "+v},B.createElement("label",null,g))}))}JE.defaultProps={autofocus:!1,options:{inline:!1}};function Oz(e){var t=e.disabled,n=e.readonly,a=e.registry.widgets.BaseInput;return B.createElement(a,oe({type:"color"},e,{disabled:t||n}))}function Dz(e){var t=e.onChange,n=e.registry.widgets.BaseInput;return B.createElement(n,oe({type:"date"},e,{onChange:function(r){return t(r||void 0)}}))}function Fz(e){var t=e.value,n=e.onChange,a=e.registry.widgets.BaseInput;return B.createElement(a,oe({type:"datetime-local"},e,{value:sz(t),onChange:function(i){return n(lz(i))}}))}function Lz(e){var t=e.registry.widgets.BaseInput;return B.createElement(t,oe({type:"email"},e))}function Vz(e,t){return e.replace(";base64",";name="+encodeURIComponent(t)+";base64")}function Mz(e){var t=e.name,n=e.size,a=e.type;return new Promise(function(r,i){var o=new window.FileReader;o.onerror=i,o.onload=function(s){r({dataURL:Vz(s.target.result,t),name:t,size:n,type:a})},o.readAsDataURL(e)})}function Bz(e){return Promise.all([].map.call(e,Mz))}function Uz(e){var t=e.filesInfo;return t.length===0?null:B.createElement("ul",{className:"file-info"},t.map(function(n,a){var r=n.name,i=n.size,o=n.type;return B.createElement("li",{key:a},B.createElement("strong",null,r)," (",o,", ",i," bytes)")}))}function zz(e){return e.filter(function(t){return typeof t<"u"}).map(function(t){var n=uz(t),a=n.blob,r=n.name;return{name:r,size:a.size,type:a.type}})}var eC=function(e){xr(t,e);function t(a){var r;r=e.call(this,a)||this,r.onChange=function(s){var l=r.props,c=l.multiple,u=l.onChange;Bz(s.target.files).then(function(d){var f={values:d.map(function(p){return p.dataURL}),filesInfo:d};r.setState(f,function(){u(c?f.values:f.values[0])})})};var i=a.value,o=Array.isArray(i)?i:[i];return r.state={values:o,filesInfo:zz(o)},r}var n=t.prototype;return n.shouldComponentUpdate=function(r,i){return Fh(this,r,i)},n.render=function(){var r=this,i=this.props,o=i.multiple,s=i.id,l=i.readonly,c=i.disabled,u=i.autofocus,d=i.options,f=this.state.filesInfo;return B.createElement("div",null,B.createElement("p",null,B.createElement("input",{ref:function(h){return r.inputRef=h},id:s,type:"file",disabled:l||c,onChange:this.onChange,defaultValue:"",autoFocus:u,multiple:o,accept:d.accept})),B.createElement(Uz,{filesInfo:f}))},t}($.Component);eC.defaultProps={autofocus:!1};function Hz(e){var t=e.id,n=e.value;return B.createElement("input",{type:"hidden",id:t,value:typeof n>"u"?"":n})}function Wz(e){var t=e.registry.widgets.BaseInput;return B.createElement(t,oe({type:"password"},e))}function tC(e){var t=e.options,n=e.value,a=e.required,r=e.disabled,i=e.readonly,o=e.autofocus,s=e.onBlur,l=e.onFocus,c=e.onChange,u=e.id,d=Math.random().toString(),f=t.enumOptions,p=t.enumDisabled,h=t.inline;return B.createElement("div",{className:"field-radio-group",id:u},f.map(function(v,g){var b=v.value===n,E=p&&p.indexOf(v.value)!=-1,y=r||E||i?"disabled":"",_=B.createElement("span",null,B.createElement("input",{type:"radio",checked:b,name:d,required:a,value:v.value,disabled:r||E||i,autoFocus:o&&g===0,onChange:function(S){return c(v.value)},onBlur:s&&function(w){return s(u,w.target.value)},onFocus:l&&function(w){return l(u,w.target.value)}}),B.createElement("span",null,v.label));return h?B.createElement("label",{key:g,className:"radio-inline "+y},_):B.createElement("div",{key:g,className:"radio "+y},B.createElement("label",null,_))}))}tC.defaultProps={autofocus:!1};function jz(e){var t=e.schema,n=e.value,a=e.registry.widgets.BaseInput;return B.createElement("div",{className:"field-range-wrapper"},B.createElement(a,oe({type:"range"},e,VE(t))),B.createElement("span",{className:"range-view"},n))}var Qz=new Set(["number","integer"]);function Nc(e,t){var n=e.type,a=e.items;if(t!==""){{if(n==="array"&&a&&Qz.has(a.type))return t.map(Ua);if(n==="boolean")return t==="true";if(n==="number")return Ua(t)}if(e.enum){if(e.enum.every(function(r){return di(r)==="number"}))return Ua(t);if(e.enum.every(function(r){return di(r)==="boolean"}))return t==="true"}return t}}function Ic(e,t){return t?[].slice.call(e.target.options).filter(function(n){return n.selected}).map(function(n){return n.value}):e.target.value}function rC(e){var t=e.schema,n=e.id,a=e.options,r=e.value,i=e.required,o=e.disabled,s=e.readonly,l=e.multiple,c=e.autofocus,u=e.onChange,d=e.onBlur,f=e.onFocus,p=e.placeholder,h=a.enumOptions,v=a.enumDisabled,g=l?[]:"";return B.createElement("select",{id:n,multiple:l,className:"form-control",value:typeof r>"u"?g:r,required:i,disabled:o||s,autoFocus:c,onBlur:d&&function(b){var E=Ic(b,l);d(n,Nc(t,E))},onFocus:f&&function(b){var E=Ic(b,l);f(n,Nc(t,E))},onChange:function(E){var y=Ic(E,l);u(Nc(t,y))}},!l&&t.default===void 0&&B.createElement("option",{value:""},p),h.map(function(b,E){var y=b.value,_=b.label,w=v&&v.indexOf(y)!=-1;return B.createElement("option",{key:E,value:y,disabled:w},_)}))}rC.defaultProps={autofocus:!1};function nC(e){var t=e.id,n=e.options,a=e.placeholder,r=e.value,i=e.required,o=e.disabled,s=e.readonly,l=e.autofocus,c=e.onChange,u=e.onBlur,d=e.onFocus,f=function(h){var v=h.target.value;return c(v===""?n.emptyValue:v)};return B.createElement("textarea",{id:t,className:"form-control",value:r||"",placeholder:a,required:i,disabled:o,readOnly:s,autoFocus:l,rows:n.rows,onBlur:u&&function(p){return u(t,p.target.value)},onFocus:d&&function(p){return d(t,p.target.value)},onChange:f})}nC.defaultProps={autofocus:!1,options:{}};function Gz(e){var t=e.registry.widgets.BaseInput;return B.createElement(t,e)}function Yz(e){var t=e.registry.widgets.BaseInput;return B.createElement(t,oe({type:"url"},e))}function Kz(e){var t=e.registry.widgets.BaseInput;return B.createElement(t,oe({type:"number"},e,VE(e.schema)))}function Xz(e){var t=e.uiSchema,n=KU(t),a=n.submitText,r=n.norender,i=n.props;return B.createElement("div",null,!r&&B.createElement("button",oe({type:"submit"},i,{className:"btn btn-info"}),a))}var Zz={BaseInput:XE,PasswordWidget:Wz,RadioWidget:tC,UpDownWidget:Kz,RangeWidget:jz,SelectWidget:rC,TextWidget:Gz,DateWidget:Dz,DateTimeWidget:Fz,AltDateWidget:Lh,AltDateTimeWidget:KE,EmailWidget:Lz,URLWidget:Yz,TextareaWidget:nC,HiddenWidget:Hz,ColorWidget:Oz,FileWidget:eC,CheckboxWidget:ZE,CheckboxesWidget:JE,SubmitButton:Xz};function Jz(){return{fields:Pz,widgets:Zz,definitions:{},rootSchema:{},formContext:{}}}function eH(e){var t=e.errors;return B.createElement("div",{className:"panel panel-danger errors"},B.createElement("div",{className:"panel-heading"},B.createElement("h3",{className:"panel-title"},"Errors")),B.createElement("ul",{className:"list-group"},t.map(function(n,a){return B.createElement("li",{key:a,className:"list-group-item text-danger"},n.stack)})))}var aC=function(e){xr(t,e);function t(a){var r;return r=e.call(this,a)||this,r.getUsedFormData=function(i,o){if(o.length===0&&typeof i!="object")return i;var s=nx(i,o);return Array.isArray(i)?Object.keys(s).map(function(l){return s[l]}):s},r.getFieldNames=function(i,o){var s=function l(c,u,d){return u===void 0&&(u=[]),d===void 0&&(d=[""]),Object.keys(c).forEach(function(f){if(typeof c[f]=="object"){var p=d.map(function(h){return h+"."+f});c[f].__rjsf_additionalProperties&&c[f].$name!==""?u.push(c[f].$name):l(c[f],u,p)}else f==="$name"&&c[f]!==""&&d.forEach(function(h){h=h.replace(/^\./,"");var v=ax(o,h);(typeof v!="object"||cb(v))&&u.push(h)})}),u};return s(i)},r.onChange=function(i,o){if(nt(i)||Array.isArray(i)){var s=r.getStateFromProps(r.props,i);i=s.formData}var l=!r.props.noValidate&&r.props.liveValidate,c={formData:i},u=i;if(r.props.omitExtraData===!0&&r.props.liveOmit===!0){var d=ke(r.state.schema,r.state.schema,i),f=za(d,"",r.state.schema,i),p=r.getFieldNames(f,i);u=r.getUsedFormData(i,p),c={formData:u}}if(l){var h=r.validate(u),v=h.errors,g=h.errorSchema,b=v,E=g;r.props.extraErrors&&(g=Ur(g,r.props.extraErrors,!0),v=un(g)),c={formData:u,errors:v,errorSchema:g,schemaValidationErrors:b,schemaValidationErrorSchema:E}}else if(!r.props.noValidate&&o){var y=r.props.extraErrors?Ur(o,r.props.extraErrors,!0):o;c={formData:u,errorSchema:y,errors:un(y)}}r.setState(c,function(){return r.props.onChange&&r.props.onChange(r.state)})},r.onBlur=function(){if(r.props.onBlur){var i;(i=r.props).onBlur.apply(i,arguments)}},r.onFocus=function(){if(r.props.onFocus){var i;(i=r.props).onFocus.apply(i,arguments)}},r.onSubmit=function(i){if(i.preventDefault(),i.target===i.currentTarget){i.persist();var o=r.state.formData;if(r.props.omitExtraData===!0){var s=ke(r.state.schema,r.state.schema,o),l=za(s,"",r.state.schema,o),c=r.getFieldNames(l,o);o=r.getUsedFormData(o,c)}if(!r.props.noValidate){var u=r.validate(o),d=u.errors,f=u.errorSchema,p=d,h=f;if(Object.keys(d).length>0){r.props.extraErrors&&(f=Ur(f,r.props.extraErrors,!0),d=un(f)),r.setState({errors:d,errorSchema:f,schemaValidationErrors:p,schemaValidationErrorSchema:h},function(){r.props.onError?r.props.onError(d):console.error("Form validation failed",d)});return}}var v,g;r.props.extraErrors?(v=r.props.extraErrors,g=un(v)):(v={},g=[]),r.setState({formData:o,errors:g,errorSchema:v,schemaValidationErrors:[],schemaValidationErrorSchema:{}},function(){r.props.onSubmit&&r.props.onSubmit(oe({},r.state,{formData:o,status:"submitted"}),i)})}},r.state=r.getStateFromProps(a,a.formData),r.props.onChange&&!Wt(r.state.formData,r.props.formData)&&r.props.onChange(r.state),r.formElement=null,r}var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(r){var i=this.getStateFromProps(r,r.formData);!Wt(i.formData,r.formData)&&!Wt(i.formData,this.state.formData)&&this.props.onChange&&this.props.onChange(i),this.setState(i)},n.getStateFromProps=function(r,i){var o=this.state||{},s="schema"in r?r.schema:this.props.schema,l="uiSchema"in r?r.uiSchema:this.props.uiSchema,c=typeof i<"u",u="liveValidate"in r?r.liveValidate:this.props.liveValidate,d=c&&!r.noValidate&&u,f=s,p=_l(s,i,f),h=ke(s,f,p),v=r.customFormats,g=r.additionalMetaSchemas,b=function(){return r.noValidate?{errors:[],errorSchema:{}}:r.liveValidate?{errors:o.errors||[],errorSchema:o.errorSchema||{}}:{errors:o.schemaValidationErrors||[],errorSchema:o.schemaValidationErrorSchema||{}}},E,y,_,w;if(d){var S=this.validate(p,s,g,v);E=S.errors,y=S.errorSchema,_=E,w=y}else{var C=b();E=C.errors,y=C.errorSchema,_=o.schemaValidationErrors,w=o.schemaValidationErrorSchema}r.extraErrors&&(y=Ur(y,r.extraErrors,!0),E=un(y));var x=gn(h,l["ui:rootFieldId"],f,p,r.idPrefix,r.idSeparator),I={schema:s,uiSchema:l,idSchema:x,formData:p,edit:c,errors:E,errorSchema:y,additionalMetaSchemas:g};return _&&(I.schemaValidationErrors=_,I.schemaValidationErrorSchema=w),I},n.shouldComponentUpdate=function(r,i){return Fh(this,r,i)},n.validate=function(r,i,o,s){i===void 0&&(i=this.props.schema),o===void 0&&(o=this.props.additionalMetaSchemas),s===void 0&&(s=this.props.customFormats);var l=this.props,c=l.validate,u=l.transformErrors,d=this.getRegistry(),f=d.rootSchema,p=ke(i,f,r);return $E(r,p,c,u,o,s)},n.renderErrors=function(){var r=this.state,i=r.errors,o=r.errorSchema,s=r.schema,l=r.uiSchema,c=this.props,u=c.ErrorList,d=c.showErrorList,f=c.formContext;return i.length&&d!=!1?B.createElement(u,{errors:i,errorSchema:o,schema:s,uiSchema:l,formContext:f}):null},n.getRegistry=function(){var r=Jz(),i=r.fields,o=r.widgets;return{fields:oe({},i,this.props.fields),widgets:oe({},o,this.props.widgets),ArrayFieldTemplate:this.props.ArrayFieldTemplate,ObjectFieldTemplate:this.props.ObjectFieldTemplate,FieldTemplate:this.props.FieldTemplate,definitions:this.props.schema.definitions||{},rootSchema:this.props.schema,formContext:this.props.formContext||{}}},n.submit=function(){this.formElement&&this.formElement.dispatchEvent(new CustomEvent("submit",{cancelable:!0}))},n.render=function(){var r=this,i=this.props,o=i.children,s=i.id,l=i.idPrefix,c=i.idSeparator,u=i.className,d=i.tagName,f=i.name,p=i.method,h=i.target,v=i.action,g=i.autocomplete,b=i.autoComplete,E=i.enctype,y=i.acceptcharset,_=i.noHtml5Validate,w=i.disabled,S=i.readonly,C=i.formContext,x=i._internalFormWrapper,I=this.state,P=I.schema,q=I.uiSchema,O=I.formData,T=I.errorSchema,N=I.idSchema,A=this.getRegistry(),k=A.fields.SchemaField,R=x?d:void 0,V=x||d||"form",F=A.widgets.SubmitButton;g&&console.warn("Using autocomplete property of Form is deprecated, use autoComplete instead.");var z=b||g;return B.createElement(V,{className:u||"rjsf",id:s,name:f,method:p,target:h,action:v,autoComplete:z,encType:E,acceptCharset:y,noValidate:_,onSubmit:this.onSubmit,as:R,ref:function(G){r.formElement=G}},this.renderErrors(),B.createElement(k,{schema:P,uiSchema:q,errorSchema:T,idSchema:N,idPrefix:l,idSeparator:c,formContext:C,formData:O,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:A,disabled:w,readonly:S}),o||B.createElement(F,{uiSchema:q}))},t}($.Component);aC.defaultProps={uiSchema:{},noValidate:!1,liveValidate:!1,disabled:!1,readonly:!1,noHtml5Validate:!1,ErrorList:eH,omitExtraData:!1};Ie.object,Ie.object;const rf="First line is the columns names.",nf="Include row metadata (Row Id and Row Version).",ls="Comma Separated Values (CSV)",Vy="Tab Separated Values (TSV)",tH={type:"object",properties:{"File Type":{type:"string",oneOf:[{const:ls,title:ls},{const:Vy,title:Vy}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[rf,nf]},uniqueItems:!0}}},rH={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},nH={description:"File is ready for download. Select the download button to download the file.",type:"object"},aH={},iH=[tH,nH],oH=[rH,aH];class sa extends B.Component{constructor(n){super(n);Le(this,"handleSubmit",n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()});Le(this,"handleDownloadSetup",n=>{this.setState({isLoading:!0});const{formData:a}=n,r=a["File Type"],i=a.Contents,{queryBundleRequest:o,getLastQueryRequest:s}=this.props,l=r===ls?",":"	",c=i.includes(rf),u=i.includes(nf),d=o??s(),f=d.query.sql,p={sql:f,entityId:en(f),selectedFacets:d.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:c,includeRowIdAndRowVersion:u,csvTableDescriptor:{separator:l},additionalFilters:d.query.additionalFilters};je.getDownloadFromTableRequest(p,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})});Le(this,"onDownload",()=>{const{data:n}=this.state;je.getFileHandleByIdURL(n.resultsFileHandleId,this.context.accessToken).then(a=>{window.location.href=a,this.props.onClose()})});Le(this,"handleChange",n=>{const{formData:a}=n;this.setState({formData:a})});this.state={isLoading:!1,step:0,formData:{"File Type":ls,Contents:[rf,nf]}}}render(){const n={height:50,width:50,backgroundSize:50};return m(bi,{open:!0,onCancel:this.props.onClose,title:"Download query results",content:m(Q,{children:L(aC,{id:"modal-download-form",schema:iH[this.state.step],uiSchema:oH[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&m("div",{className:"SRC-centerAndJustifyContent",children:L("div",{className:"SRC-center-text",children:[m("p",{children:" Creating the File "}),m("div",{style:n,className:"spinner"}),m("p",{children:" Loading... "})]})}),m(B.Fragment,{})]})}),actions:L(Q,{children:[m(ht,{variant:"outlined",color:"primary",onClick:this.props.onClose,children:"Cancel"}),m(ht,{form:"modal-download-form",type:"submit",variant:"contained",color:"primary",children:this.state.step===0?"Next":"Download"})]})})}}Le(sa,"contextType",wi);try{sa.displayName="ModalDownload",sa.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}}}catch{}function iC(e,t){return`${e}${t}`}function sH(e,t){const n=window.location.search,a=`${e}=${t}`;return n?n.includes(`${e}=`)?window.location.search.slice(n.indexOf("?")+1).split("&").map(o=>o.split("=")[0]===e?`${a}`:o).join("&"):`${n.substr(1)}&${a}`:a}function lH(e,t){if(!window.location.search)return;const n=iC(e,t),r=window.location.search.slice(window.location.search.indexOf("?")+1).split("&").filter(i=>i.split("=")[0]===n).map(i=>i.split("=")[1])[0];return r?decodeURIComponent(r):void 0}function uH(e,t,n){const a=t!==void 0?iC(e,t):e,r=sH(a,n),i=window.location,o=`${i.protocol}//${i.hostname}${i.port?":"+i.port:""}${i.pathname}?${r}`;window.history.replaceState("object or string","Title",o)}function cH(e,t){const n=lH(e,t);let a;if(n){const r=JSON.parse(n);r.sql&&(a={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Ts|Ps|Rs|fa|pa,entityId:en(r.sql),query:r})}return a}function oC(e){const{initQueryRequest:t,componentIndex:n=0,shouldDeepLink:a=!1,onQueryChange:r}=e,[i,o]=$.useState(t);$.useEffect(()=>{const w=cH("QueryWrapper",n);w&&o(w)},[n]);const s=$.useCallback(()=>Mr(i),[i]),l=$.useCallback(()=>Mr(t),[t]),c=$.useCallback(w=>{let S;typeof w=="function"?S=w(s()):S=w;const C=Mr(S);if(o(C),C.query){const x=JSON.stringify(C.query);if(a){const I=encodeURIComponent(x);uH("QueryWrapper",n,I)}r&&r(x)}},[n,s,r,a]),{entityId:u,versionNumber:d}=$.useMemo(()=>Mb(i.query.sql),[i.query.sql]),f=i.query.limit??As,p=Math.ceil(((i.query.offset??0)+Number(f))/f),h=$.useCallback(w=>{c(S=>(S.query.limit=w,S))},[c]),v=$.useCallback(w=>{c(S=>(S.query.offset=(w-1)*f,S))},[f,c]),g=$.useCallback(()=>{c(t)},[t,c]);ko(()=>{i!=t&&g()},[t]);const b=$.useCallback(w=>{c(S=>(S.query.selectedFacets=(S.query.selectedFacets??[]).filter(C=>!$a(C,w)),S))},[c]),E=$.useCallback((w,S)=>{c(C=>(C.query.selectedFacets=(C.query.selectedFacets??[]).map(x=>(Dc(x)&&$a(x,w)&&(x.facetValues=x.facetValues.filter(I=>I!==S)),x)).filter(x=>Dc(x)?Array.isArray(x.facetValues)&&x.facetValues.length>0:!0),C))},[c]),y=$.useCallback(w=>{c(S=>(S.query.additionalFilters=(S.query.additionalFilters??[]).filter(C=>!$a(C,w)),S))},[c]),_=$.useCallback((w,S)=>{c(C=>(C.query.additionalFilters=(C.query.additionalFilters??[]).map(x=>((To(x)||Po(x))&&$a(x,w)&&(x.values=x.values.filter(I=>I!==S)),x)).filter(x=>To(x)||Po(x)?Array.isArray(x.values)&&x.values.length>0:!0),C))},[c]);return{entityId:u,versionNumber:d,getInitQueryRequest:l,getLastQueryRequest:s,setQuery:c,pageSize:f,currentPage:p,setPageSize:h,goToPage:v,resetQuery:g,removeSelectedFacet:b,removeValueFromSelectedFacet:E,removeQueryFilter:y,removeValueFromQueryFilter:_}}function us(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:a,lockedColumn:r,componentIndex:i,shouldDeepLink:o,onViewSharingSettingsClicked:s}=e,[l,c]=$.useState(void 0),{entityId:u,versionNumber:d,getInitQueryRequest:f,getLastQueryRequest:p,setQuery:h,currentPage:v,pageSize:g,goToPage:b,setPageSize:E,resetQuery:y,removeSelectedFacet:_,removeValueFromSelectedFacet:w,removeQueryFilter:S,removeValueFromQueryFilter:C}=oC({initQueryRequest:t,shouldDeepLink:o,componentIndex:i,onQueryChange:n}),x=$.useMemo(()=>p(),[p]),{data:I,isLoading:P,error:q,isPreviousData:O}=zb(x,{keepPreviousData:!0},c),T=I==null?void 0:I.responseBody,N=P||O,{data:A}=Ci(u,d);Bb(()=>{T&&a&&a(JSON.stringify(T))},[T,a]);const k=T?Hb(T.facets,T.selectColumns):!0,R=$.useMemo(()=>Wb(T,r),[T,r]),V=$.useMemo(()=>{const K=p();return jb(K.query,r)},[p,r]),F=$.useCallback(K=>{var Y;return((Y=T==null?void 0:T.columnModels)==null?void 0:Y.find(X=>X.name===K))??null},[T==null?void 0:T.columnModels]),z={data:R,currentPage:v,pageSize:g,setPageSize:E,isLoadingNewBundle:N,getLastQueryRequest:p,getInitQueryRequest:f,error:q,entity:A,executeQueryRequest:h,isFacetsAvailable:k,asyncJobStatus:l,goToPage:b,hasResettableFilters:V,removeSelectedFacet:_,removeValueFromSelectedFacet:w,resetQuery:y,removeQueryFilter:S,removeValueFromQueryFilter:C,lockedColumn:r,getColumnModel:F,onViewSharingSettingsClicked:s},{children:W}=e;return m(Ko,{queryContext:z,children:m("div",{className:`SRC-wrapper ${N?"SRC-logo-cursor":""} ${k?"has-facets":""}`,children:W})})}try{us.displayName="QueryWrapper",us.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"QueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"((benefactorId: string) => void)"}}}}}catch{}function cs(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:a,lockedColumn:r,componentIndex:i,shouldDeepLink:o,onViewSharingSettingsClicked:s}=e,[l,c]=$.useState(void 0),{entityId:u,versionNumber:d,getInitQueryRequest:f,getLastQueryRequest:p,setQuery:h,resetQuery:v,removeQueryFilter:g,removeValueFromQueryFilter:b,removeSelectedFacet:E,removeValueFromSelectedFacet:y}=oC({initQueryRequest:t,componentIndex:i,shouldDeepLink:o,onQueryChange:n}),_=$.useMemo(()=>p(),[p]),{data:w,hasNextPage:S,fetchPreviousPage:C,fetchNextPage:x,isFetchingNextPage:I,isLoading:P,error:q,isPreviousData:O}=ex(_,{keepPreviousData:!0},c),T=P||O,{data:N}=Ci(u,d),[A,k]=$.useState(0);async function R(){if(!S)throw new Error("Called appendNextPageToResults when there is no next page");await x(),k("ALL")}async function V(){if(!S)throw new Error("Called goToNextPage when there is no next page");if(A==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await x(),k(A+1)}const F=A!=="ALL"&&A>0;async function z(){if(A==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!F)throw new Error("Called goToNextPage when there is no next page");await C(),k(A-1)}const W=$.useMemo(()=>{var ve,ne,de;if(!(w==null||w.pages.length===0||w.pages[0].responseBody==null))return A==="ALL"?{...w==null?void 0:w.pages[0].responseBody,queryResult:{...(ve=w==null?void 0:w.pages[0].responseBody)==null?void 0:ve.queryResult,queryResults:{...(de=(ne=w==null?void 0:w.pages[0].responseBody)==null?void 0:ne.queryResult)==null?void 0:de.queryResults,rows:w.pages.flatMap(Te=>{var be;return(be=Te.responseBody.queryResult)==null?void 0:be.queryResults.rows})??[]}}}:w==null?void 0:w.pages[A].responseBody},[A,w]);$.useEffect(()=>{W&&a&&a(JSON.stringify(W))},[W,a]);const G=W?Hb(W.facets,W.selectColumns):!0,K=$.useMemo(()=>Wb(W,r),[W,r]),Y=$.useMemo(()=>{const ve=p();return jb(ve.query,r)},[p,r]),X=$.useCallback(ve=>{var ne;return((ne=W==null?void 0:W.columnModels)==null?void 0:ne.find(de=>de.name===ve))??null},[W==null?void 0:W.columnModels]),J={data:K,isLoadingNewPage:I,hasNextPage:!!S,hasPreviousPage:F,isLoadingNewBundle:T,getLastQueryRequest:p,getInitQueryRequest:f,error:q,entity:N,executeQueryRequest:h,isFacetsAvailable:G,asyncJobStatus:l,appendNextPageToResults:R,goToNextPage:V,goToPreviousPage:z,hasResettableFilters:Y,resetQuery:v,removeQueryFilter:g,removeValueFromQueryFilter:b,removeSelectedFacet:E,removeValueFromSelectedFacet:y,lockedColumn:r,getColumnModel:X,onViewSharingSettingsClicked:s},{children:ee}=e;return m(Ko,{queryContext:J,children:m("div",{className:`SRC-wrapper ${T||I?"SRC-logo-cursor":""} ${G?"has-facets":""}`,children:ee})})}try{cs.displayName="InfiniteQueryWrapper",cs.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"((benefactorId: string) => void)"}}}}}catch{}function af(e){const{modifiedDataAccessRequest:t,onHide:n}=e,[a,r]=$.useState(),[i,o]=$.useState(!1),{mutate:s}=ix({onSuccess:()=>{n()},onError:c=>{r({key:"error",message:`Sorry, there is an error in submitting your request. ${c.reason?c.reason+".":" "}Please close this dialog and try again later.`}),o(!0)}});function l(){t&&s(t)}return L(Q,{children:[m(Ga,{children:L(xi,{direction:"row",alignItems:"center",gap:"5px",children:["Save Changes",m(et,{sx:{flexGrow:1}}),m(Vs,{onClick:n,children:m($e,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),L(Ya,{children:[m(xe,{variant:"body1",children:"Would you like to save your recent changes?"}),a&&m(Lr,{severity:a.key,children:a.message})]}),L(kp,{children:[!i&&L(Q,{children:[m(ht,{variant:"outlined",onClick:n,children:"Cancel"}),m(ht,{variant:"contained",onClick:()=>{l()},children:"Save changes"})]}),i&&m(ht,{variant:"contained",onClick:n,children:"Close"})]})]})}try{af.displayName="CancelRequestDataAccess",af.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{modifiedDataAccessRequest:{defaultValue:null,description:"",name:"modifiedDataAccessRequest",required:!0,type:{name:"Request | Renewal | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function of(e){const{onHide:t}=e;return L(Q,{children:[m(Ga,{children:L(xi,{direction:"row",alignItems:"center",gap:"5px",children:["Your Data Access Request Has Been Submitted",m(et,{sx:{flexGrow:1}}),m(Vs,{onClick:t,children:m($e,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),m(Ya,{children:m(xe,{variant:"body1",children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),m(kp,{children:m(ht,{variant:"contained",onClick:t,children:"Finish"})})]})}try{of.displayName="RequestDataAccessSuccess",of.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function sf(e){const{accessRequirement:t,entityId:n,onHide:a}=e,{accessToken:r}=qe(),{data:i,isLoading:o}=Ap(String(t.id)),s=i==null?void 0:i.isApproved,[l,c]=$.useState(!1);let u="";window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?u="Request access":u="Request access via Synapse.org";const d=()=>{window.open(`${or.PORTAL}#!AccessRequirement:AR_ID=${t.id}&TYPE=ENTITY&ID=${n}`)},f=()=>{d(),a&&a()},p=t.actContactInfo;let h;return r&&!s&&(h=[{variant:"outlined",onClick:f,children:u},{variant:"text",onClick:a,children:"I do not accept"}]),m($p,{"data-testid":"UnmanagedACTAccessRequirementItem",status:o?tr.LOADING:s?tr.COMPLETE:tr.LOCKED,actions:h,children:s?L(Q,{children:[L(xe,{variant:"body1",children:["Your data access request has been approved."," ",m(Rt,{role:"button",onClick:()=>c(!l),children:l?"Hide Instructions":"View Instructions"})]}),l&&m(et,{sx:{my:1},children:m(_t,{markdown:p})})]}):m(_t,{markdown:p})})}try{sf.displayName="UnmanagedACTAccessRequirementItem",sf.__docgenInfo={description:`Renders a {@link RequirementItem} for the deprecated {@link ACTAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link ManagedACTAccessRequirementItem }

For {@link SelfSignAccessRequirement } and {@link TermsOfUseAccessRequirement }, see {@link SelfSignAccessRequirementItem }`,displayName:"UnmanagedACTAccessRequirementItem",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function lf(e){var g,b,E,y,_,w;const{accessRequirement:t,onHide:n,onRequestAccess:a}=e,{data:r}=Gb(t.id.toString()),{data:i,isLoading:o}=Ap(String(t.id)),{mutate:s}=ox({onError:S=>{console.error("Error cancelling data access request",S),d({key:"error",message:L(Q,{children:[m("strong",{children:"Error canceling your data access request."}),m("br",{}),"Please try again later."]})})}}),[l,c]=$.useState(!0),[u,d]=$.useState(),f=((g=i==null?void 0:i.currentSubmissionStatus)==null?void 0:g.state)===It.APPROVED;let p=m(Q,{});r&&(p=L("div",{children:[m(_t,{wikiId:r.wikiPageId,ownerId:r.ownerObjectId,objectType:r.ownerObjectType}),u&&m(Lr,{className:"access-requirement-list-alert",severity:u.key,children:u.message}),((b=i==null?void 0:i.currentSubmissionStatus)==null?void 0:b.state)===It.SUBMITTED&&m(Lr,{className:"access-requirement-list-alert",severity:"info",children:m("strong",{children:"You have submitted a data access request."})}),((E=i==null?void 0:i.currentSubmissionStatus)==null?void 0:E.state)===It.APPROVED&&m(Lr,{className:"access-requirement-list-alert",severity:"success",children:m("strong",{children:"Your data access request has been approved."})}),((y=i==null?void 0:i.currentSubmissionStatus)==null?void 0:y.state)===It.REJECTED&&m(Lr,{className:"access-requirement-list-alert",severity:"error",children:L(Q,{children:[m("strong",{children:"Your data access request has been rejected."}),m("br",{}),(i==null?void 0:i.currentSubmissionStatus.rejectedReason)||""]})}),((_=i==null?void 0:i.currentSubmissionStatus)==null?void 0:_.state)===It.CANCELLED&&m(Lr,{className:"access-requirement-list-alert",severity:"success",children:m("strong",{children:"Your data access request has been canceled."})})]}));const h=[];i&&(i.currentSubmissionStatus==null?(h.push({variant:"outlined",onClick:a,children:"Request access"}),h.push({variant:"text",onClick:n,children:"I do not accept"})):[It.APPROVED,It.REJECTED,It.CANCELLED].includes(i.currentSubmissionStatus.state)?h.push({variant:"outlined",onClick:a,children:"Update Request"}):i.currentSubmissionStatus.state===It.SUBMITTED&&h.push({variant:"outlined",onClick:()=>{s({submissionId:i.currentSubmissionStatus.submissionId,accessRequirementId:String(t.id)})},children:"Cancel Request"}));let v=tr.LOADING;if(!o)switch((w=i==null?void 0:i.currentSubmissionStatus)==null?void 0:w.state){case It.APPROVED:v=tr.COMPLETE;break;case It.SUBMITTED:v=tr.PENDING;break;case It.REJECTED:case It.CANCELLED:default:v=tr.LOCKED}return L($p,{"data-testid":"ManagedACTAccessRequirementItem",status:v,actions:h,children:[!f&&m(Q,{children:p}),f&&L(Q,{children:[L(xe,{variant:"body1",children:["Your data access request has been approved."," ",m(Rt,{role:"button",onClick:()=>{c(!l)},children:l?"View Terms":"Hide Terms"})]}),!l&&m(et,{sx:{my:1},children:p})]})]})}try{lf.displayName="ManagedACTAccessRequirementItem",lf.__docgenInfo={description:`Renders a {@link RequirementItem} for a ManagedACTAccessRequirement, which allows a user to see if they have met the
requirement, and if not, complete a data access request to apply for access.`,displayName:"ManagedACTAccessRequirementItem",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},onRequestAccess:{defaultValue:null,description:"",name:"onRequestAccess",required:!0,type:{name:"() => void"}}}}}catch{}function uf(e){const{accessRequirement:t,onHide:n}=e,{accessToken:a}=qe(),r=!!a,i=LC(t),{data:o}=TC(),{data:s}=PC(),l=r&&s&&!i&&t.isCertifiedUserRequired&&!s.isCertified,c=r&&s&&!i&&t.isValidatedProfileRequired&&!s.isVerified,{data:u,isLoading:d}=Ap(String(t.id)),f=u==null?void 0:u.isApproved,{data:p}=Gb(t.id.toString(),{enabled:!i}),[h,v]=$.useState(!1),{mutate:g,isLoading:b,error:E}=sx({onError:S=>{console.error("Error creating access approval: ",S)}}),y=()=>{const S={requirementId:t==null?void 0:t.id,submitterId:o==null?void 0:o.ownerId,accessorId:o==null?void 0:o.ownerId,state:RC.APPROVED};g(S)};let _=m(Q,{});i?_=m(_t,{markdown:t.termsOfUse}):p&&(_=m(_t,{wikiId:p==null?void 0:p.wikiPageId,ownerId:p==null?void 0:p.ownerObjectId,objectType:p==null?void 0:p.ownerObjectType}));let w;if(a&&!f){let S="I Accept Terms of Use",C=!1;(l||c)&&(C=!0,S=`You must ${l?"be certified":""}${l&&c?" and ":""}${c?"have a validated user profile":""} to accept`),w=[{variant:"outlined",onClick:y,children:S,disabled:b||C},{variant:"text",onClick:n,children:"I do not accept"}]}return L($p,{"data-testid":"SelfSignAccessRequirementItem",status:d?tr.LOADING:f?tr.COMPLETE:tr.LOCKED,actions:w,children:[f?L(Q,{children:[L(xe,{variant:"body1",children:["You have accepted the terms of use."," ",m(Rt,{role:"button",onClick:()=>v(!h),children:h?"Hide Terms":"View Terms"})]}),h&&m(et,{sx:{my:1},children:_})]}):_,E&&m(Lr,{severity:"error",children:E.reason})]})}try{uf.displayName="SelfSignAccessRequirementItem",uf.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}function cf(e){const{accessRequirement:t,entityId:n,onHide:a,onRequestAccess:r}=e;switch(t.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return m(uf,{accessRequirement:t,onHide:a});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return m(sf,{accessRequirement:t,onHide:a,entityId:n});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return m(lf,{accessRequirement:t,onHide:a,entityId:n,onRequestAccess:()=>{r(t)}});default:return console.warn("Unsupported access requirement type:",t.concreteType),m(Q,{})}}try{cf.displayName="AccessRequirementListItem",cf.__docgenInfo={description:"Renders an individual AR item for the AccessRequirementList",displayName:"AccessRequirementListItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},onRequestAccess:{defaultValue:null,description:"",name:"onRequestAccess",required:!0,type:{name:"(accessRequirement: ManagedACTAccessRequirement) => void"}}}}}catch{}const dH=new Set(["org.sagebionetworks.repo.model.SelfSignAccessRequirement","org.sagebionetworks.repo.model.TermsOfUseAccessRequirement","org.sagebionetworks.repo.model.ManagedACTAccessRequirement","org.sagebionetworks.repo.model.ACTAccessRequirement"]),ds=Vt(xe,{label:"DialogSubsectionHeader"})(({theme:e})=>({marginTop:e.spacing(4),marginBottom:e.spacing(2),paddingBottom:e.spacing(1),fontSize:"18px",fontWeight:"bold",borderBottom:"1px solid",borderColor:e.palette.grey[200]}));ds.defaultProps={...ds.defaultProps,variant:"h4"};const df=e=>e.filter(fH).length>0,fH=e=>!dH.has(e.concreteType);function pi(e){var k;const{entityId:t,teamId:n,onHide:a,accessRequirementFromProps:r,renderAsModal:i,numberOfFilesAffected:o,requestObjectName:s}=e,{accessToken:l}=qe(),c=!!l,[u,d]=$.useState(0),[f,p]=$.useState(),[h,v]=$.useState(""),[g,b]=$.useState(),y=Ma({ids:[t],type:"ENTITY_HEADER"}),{data:_}=lx(n,{enabled:!!(!r&&n)}),{data:w}=ux(t,{enabled:!!(!r&&t&&!n)}),C=r??(n?_:w),{data:x}=cx((C??[]).map(R=>String(R.id)),{enabled:!!C,staleTime:1/0}),I=R=>{const{managedACTAccessRequirement:V,step:F,researchProjectId:z,dataAccessRequest:W}=R;V&&p(V),z&&v(z),W&&b(W),d(F)},P=C==null?void 0:C.some(R=>R.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement"&&R.isTwoFaRequired),q=C==null?void 0:C.some(R=>(R.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement"||R.concreteType==="org.sagebionetworks.repo.model.SelfSignAccessRequirement")&&R.isCertifiedUserRequired),O=C==null?void 0:C.some(R=>(R.concreteType==="org.sagebionetworks.repo.model.ManagedACTAccessRequirement"||R.concreteType==="org.sagebionetworks.repo.model.SelfSignAccessRequirement")&&R.isValidatedProfileRequired),T=$.useMemo(()=>{var R;return s||(o?L(Q,{children:[m($e,{icon:"file",sx:{width:"30px"}})," ",o," ","File(s)"]}):L(Q,{children:[m($e,{icon:"file",sx:{width:"30px"}})," ",m(Rt,{href:`${or.PORTAL}#!Synapse:${t}`,children:(R=y[0])==null?void 0:R.name})]}))},[t,y,o,s]),N=L(Q,{children:[m(Ga,{children:L(xi,{direction:"row",alignItems:"center",gap:"5px",children:["Data Access Request",m(et,{sx:{flexGrow:1}}),m(Vs,{onClick:a,children:m($e,{icon:"close",wrap:!1,sx:{color:"grey.700"}})})]})}),L(Ya,{children:[m(ds,{sx:{mt:0},children:"What is this request for?"}),m(xe,{variant:"body1",component:"span",children:T}),m(ds,{children:"What do I need to do?"}),m(mx,{}),q&&m(vx,{}),O&&m(gx,{}),P&&m(yx,{}),(k=x==null?void 0:x.map(R=>C.find(V=>R===String(V.id))))==null?void 0:k.map(R=>m(cf,{accessRequirement:R,entityId:t,onHide:a,onRequestAccess:V=>{I({managedACTAccessRequirement:V,step:c?1:4})}},R.id))]})]});let A=N;if(i){switch(u){case 1:A=m(px,{managedACTAccessRequirement:f,onSave:R=>{I({managedACTAccessRequirement:f,step:2,researchProjectId:R.id})},onHide:a});break;case 2:A=m(hx,{researchProjectId:h,managedACTAccessRequirement:f,entityId:t,onHide:a,onCancel:R=>{I({step:3,dataAccessRequest:R})},onSubmissionCreated:()=>{I({step:5})}});break;case 3:A=m(af,{modifiedDataAccessRequest:g,onHide:a});break;case 4:A=L(Q,{children:[m(Ga,{children:"Please Log In"}),m(Ya,{className:"AccessRequirementList login-modal ",children:m(fx,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:A=m(of,{onHide:a});break;case 0:A=N;break;default:A=N}return m(Xb,{maxWidth:"md",fullWidth:!0,open:!0,onClose:a,children:A})}return m(et,{children:A})}try{pi.displayName="AccessRequirementList",pi.__docgenInfo={description:`The AccessRequirementListV2 component renders a set of {@link AccessRequirement}s (either pre-defined, or those applied
to an entity, based on provided props).

The component shows the user the approval status of each AR and provides a workflow for accepting the terms of or
creating a submission for any of the Access Requirements.`,displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},teamId:{defaultValue:null,description:"",name:"teamId",required:!1,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}},requestObjectName:{defaultValue:null,description:"",name:"requestObjectName",required:!1,type:{name:"string"}}}}}catch{}try{df.displayName="checkHasUnsupportedRequirement",df.__docgenInfo={description:"",displayName:"checkHasUnsupportedRequirement",props:{}}}catch{}const pH="Requires Acceptance of Data-Specific Terms of Use",hH="Requires Acceptance of Data-Specific Terms of Use",mH="Requires Approval of Data-Specific Access Requirements",vH="Access Restricted",ff=({accessRequirementId:e,count:t})=>{const{data:n,isLoading:a}=Yb(e,{useErrorBoundary:!0}),[r,i]=$.useState(!1);let o,s="",l="";if(!a&&n)switch(n.concreteType){case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":o=pH,s=Fc,l=n.name??"";break;case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":{o=hH;const c=n;c.isValidatedProfileRequired?s=Pl:c.isCertifiedUserRequired?s=YC:s=Fc,l=n.name??"";break}case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.ACTAccessRequirement":o=mH,s=Pl,l=n.name??"";break;case"org.sagebionetworks.repo.model.LockAccessRequirement":o=vH,s=Pl,l="Access restricted pending review by Synapse Access and Compliance Team.";break}return L(Q,{children:[m(Zb,{isLoading:a,title:o,description:l,iconType:s,count:t,actionNode:m(da,{variant:"contained",onClick:()=>i(!0),children:"Start"})}),r&&n&&m(pi,{entityId:n.subjectIds[0].id,accessRequirementFromProps:[n],renderAsModal:!0,numberOfFilesAffected:t,onHide:()=>i(!1)})]})};try{ff.displayName="MeetAccessRequirementCard",ff.__docgenInfo={description:"",displayName:"MeetAccessRequirementCard",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"number"}},count:{defaultValue:null,description:"",name:"count",required:!1,type:{name:"number"}}}}}catch{}const gH="Requires Two-Factor Authentication";function pf(e){const{accessRequirementId:t,count:n}=e,{data:a,isLoading:r}=Yb(t,{useErrorBoundary:!0}),[i,o]=$.useState(!1);return L(Q,{children:[m(Zb,{isLoading:r,title:gH,iconType:Fc,description:(a==null?void 0:a.name)??"",count:n,actionNode:m(da,{variant:"contained",onClick:()=>o(!0),children:"Start"})}),i&&a&&m(pi,{entityId:a.subjectIds[0].id,accessRequirementFromProps:[a],renderAsModal:!0,numberOfFilesAffected:n,onHide:()=>o(!1)})]})}try{pf.displayName="EnableTwoFaRequirementCard",pf.__docgenInfo={description:"",displayName:"EnableTwoFaRequirementCard",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"number"}},count:{defaultValue:null,description:"",name:"count",required:!1,type:{name:"number"}}}}}catch{}function hf(e){const{action:t,count:n,onViewSharingSettingsClicked:a}=e;switch(t.concreteType){case"org.sagebionetworks.repo.model.download.MeetAccessRequirement":return m(ff,{accessRequirementId:t.accessRequirementId,count:n},t.accessRequirementId);case"org.sagebionetworks.repo.model.download.RequestDownload":return m(G1,{entityId:`syn${t.benefactorId}`,count:n,onViewSharingSettingsClicked:a},t.benefactorId);case"org.sagebionetworks.repo.model.download.EnableTwoFa":return m(pf,{accessRequirementId:t.accessRequirementId,count:n},t.accessRequirementId);default:return m(Q,{})}}try{hf.displayName="ActionRequiredListItem",hf.__docgenInfo={description:"",displayName:"ActionRequiredListItem",props:{action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"Action"}},count:{defaultValue:null,description:"",name:"count",required:!1,type:{name:"number"}},onViewSharingSettingsClicked:{defaultValue:null,description:'Invoked when a user clicks "View Sharing Settings" for a set of files that require the Download permission',name:"onViewSharingSettingsClicked",required:!1,type:{name:"((benefactorId: string) => void)"}}}}}catch{}const mf=e=>{const{entityId:t,onViewSharingSettingsClicked:n}=e,{data:a}=B$(t),r=a==null?void 0:a.actions;return m(Q,{children:r&&r.length>0&&m("div",{className:"EntityActionsRequired",children:r.map((i,o)=>i?m(hf,{action:i,onViewSharingSettingsClicked:n},o):!1)})})};try{mf.displayName="EntityActionsRequired",mf.__docgenInfo={description:"",displayName:"EntityActionsRequired",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"((benefactorId: string) => void)"}}}}}catch{}const vf=()=>{const{error:e,getLastQueryRequest:t,onViewSharingSettingsClicked:n}=dt(),{entityId:a}=t(),{accessToken:r}=qe();return(e==null?void 0:e.status)==403&&r?m(mf,{entityId:a,onViewSharingSettingsClicked:n}):m(mp,{error:e})};try{vf.displayName="QueryWrapperErrorBanner",vf.__docgenInfo={description:"Error banner that automatically pulls the error from QueryContext.  If 403, shows entity actions required",displayName:"QueryWrapperErrorBanner",props:{}}}catch{}class fs extends B.Component{constructor(n){super(n);Le(this,"searchFormRef");Le(this,"radioFormRef");Le(this,"handleClickOutsideForm",n=>{var a,r;!((a=this.searchFormRef.current)!=null&&a.contains(n==null?void 0:n.target))&&!((r=this.radioFormRef.current)!=null&&r.contains(n==null?void 0:n.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))});Le(this,"search",n=>{var f,p,h,v,g,b;n.preventDefault();const{searchText:a}=this.state;let{columnName:r}=this.state;const{searchable:i,lockedColumn:o}=this.props;if(r==="")if(i)r=i.filter(E=>E!==(o==null?void 0:o.columnName))[0];else{const E=(h=(p=(f=this.props.queryContext)==null?void 0:f.data)==null?void 0:p.columnModels)==null?void 0:h.filter(y=>y.name!==(o==null?void 0:o.columnName)).filter(y=>this.isSupportedColumn(y));r=(E==null?void 0:E[0].name)??""}this.setState({show:!1});const{executeQueryRequest:s,getLastQueryRequest:l}=this.props.queryContext,c=l(),{additionalFilters:u=[]}=c.query,d=u.findIndex(E=>!!(To(E)||Po(E)&&E.columnName===r));if(d===-1){const E=(b=(g=(v=this.props.queryContext)==null?void 0:v.data)==null?void 0:g.columnModels)==null?void 0:b.filter(y=>y.name===r)[0];if(E!=null&&E.columnType.endsWith("_LIST")){const y={columnName:r,function:AC.HAS_LIKE,values:[`%${a}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};u.push(y)}else{const y={columnName:r,operator:kC.LIKE,values:[`%${a}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};u.push(y)}}else u[d].values.push(`%${a}%`);c.query.additionalFilters=u,s(c)});Le(this,"handleChange",n=>{this.setState({searchText:n.currentTarget.value})});Le(this,"isSupportedColumn",n=>{switch(n==null?void 0:n.columnType){case ue.FILEHANDLEID:case ue.ENTITYID:case ue.DATE:case ue.DATE_LIST:case ue.USERID:return!1;default:return!0}});Le(this,"isSupportedColumnAndInProps",n=>{if(this.isSupportedColumn(n)){const{searchable:a}=this.props;return a==null?void 0:a.some(r=>r===(n==null?void 0:n.name))}return!1});this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:this.props.defaultColumn??""},this.searchFormRef=B.createRef(),this.radioFormRef=B.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(n){var a,r,i,o,s;!((a=n.queryVisualizationContext)!=null&&a.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)!=null&&r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(s=(o=(i=this.searchFormRef)==null?void 0:i.current)==null?void 0:o.querySelector("input"))==null||s.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:n,lockedColumn:a,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:i,getColumnDisplayName:o}}=this.props,{searchText:s,show:l,columnName:c}=this.state;let u=[];n?u=n.map(p=>{var h;return(h=r==null?void 0:r.columnModels)==null?void 0:h.find(v=>v.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(u=(f=r.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(p=>p.name)),u.length&&(a!=null&&a.columnName)&&(u=u.filter(p=>p!==(a==null?void 0:a.columnName)));const d=i==null?void 0:i.showFacetFilter;return L("div",{className:`QueryWrapperSearchInput ${d?ur:Yt}`,children:[m(Si,{in:i==null?void 0:i.showSearchBar,children:L("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[m("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:m($e,{icon:"search"})}),m("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:s,type:"text"}),this.state.searchText.length>0&&m("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:m($e,{icon:"close"})})]})}),m("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:m(Y1,{in:l,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:L("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[m("p",{className:"deemphasized",children:m("i",{children:" Search In Field: "})}),u.map((p,h)=>{const v=o(p);return m("div",{className:"radio",children:m("label",{children:L("span",{children:[m("input",{id:p,type:"radio",value:p,checked:c===""&&h===0||c===p,onClick:()=>{var b,E,y;(y=(E=(b=this.searchFormRef)==null?void 0:b.current)==null?void 0:E.querySelector("input"))==null||y.focus(),this.setState({columnName:p})}}),m("span",{children:v})]})})},`search-field-${p}-${h}`)})]})})})]})}}try{fs.displayName="Search",fs.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}}}catch{}const yH="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",bH="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",ps=({helpMessage:e=yH,helpUrl:t=bH})=>{const{executeQueryRequest:n,getLastQueryRequest:a}=dt(),{topLevelControlsState:{showSqlEditor:r,showFacetFilter:i}}=ut(),[o,s]=$.useState(""),l=$.useRef(null);$.useEffect(()=>{var d;if(r){const f=a().query.sql;s(f),(d=l.current)==null||d.focus()}},[r,a]);const c=d=>{d.preventDefault();const f=a();f.query.sql=o,f.query.offset=0,f.query.additionalFilters=[],f.query.selectedFacets=[],n(f)},u=d=>{var f;(f=l.current)==null||f.setCustomValidity(""),s(d.currentTarget.value)};return m("div",{className:`QueryWrapperSqlEditorInput ${i?ur:Yt}`,children:m(Si,{in:r,timeout:{enter:300,exit:300},children:L("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[L("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:c,children:[m(c1,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),m("input",{ref:l,onChange:u,placeholder:"Enter Query",value:o,type:"text"})]}),m("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:m(Nn,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{ps.displayName="SqlEditor",ps.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}const wH="Sign in",SH=L(Q,{children:[m(xe,{variant:"smallText1",marginBottom:"10px",children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),L(xe,{variant:"smallText1",children:["To find out more seeÂ ",m(Rt,{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),m("span",{children:" and "}),m(Rt,{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),gf=e=>m(ua,{open:!0,title:"Sign In Required",content:SH,onCancel:()=>e.onHide(),onConfirm:()=>e.onHide(),confirmButtonText:wH,confirmButtonClassName:wp});try{gf.displayName="DownloadLoginModal",gf.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const yf=({show:e,title:t,onClose:n,pythonNotes:a,pythonCode:r,rNotes:i,rCode:o,cliNotes:s,cliCode:l,helpMarkdown:c,helpUrl:u})=>{let d;l?d="Command Line":r?d="Python":d="R";const[f,p]=$.useState(d),h=L(xe,{variant:"body1",children:["Installation instructions are available at our"," ",m(Rt,{href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return m(ua,{open:e,title:t,onCancel:n,onConfirm:n,maxWidth:"md",titleHelpPopoverProps:c?{markdownText:c,helpUrl:u}:void 0,content:L(Q,{children:[m(et,{sx:{borderBottom:1,borderColor:"divider",marginBottom:4},children:L(Sx,{value:f,onChange:(b,E)=>{b.stopPropagation(),p(E)},textColor:"secondary",indicatorColor:"secondary",children:[l&&m(Rl,{value:"Command Line",label:"Command Line"}),o&&m(Rl,{value:"R",label:"R"}),r&&m(Rl,{value:"Python",label:"Python"})]})}),L(et,{sx:{"& > p":{marginBottom:3}},children:[f==="Command Line"&&L(Q,{children:[m(xe,{variant:"body1",children:s}),h,L("pre",{children:[" ",l," "]})]}),f==="R"&&L(Q,{children:[m(xe,{variant:"body1",children:i}),h,m("pre",{children:o})]}),f==="Python"&&L(Q,{children:[m(xe,{variant:"body1",children:a}),h,m("pre",{children:r})]})]})]})})};try{yf.displayName="ProgrammaticInstructionsModal",yf.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}}}catch{}function bf({queryBundleRequest:e,onHide:t}){var d;const[n,a]=$.useState("..."),{data:r,isLoading:i,isPreviousData:o}=zb({...e,partMask:KC},{keepPreviousData:!0,useErrorBoundary:!0}),s=(d=r==null?void 0:r.responseBody)==null?void 0:d.combinedSql,l=i||o;$.useEffect(()=>{if(s&&!l){const f=s.toUpperCase().indexOf("FROM SYN"),p=`SELECT * ${s.substring(f)}`;a(p)}},[s,l]);const c=$.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),u=$.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return m(yf,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:m(Q,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${c}"`,rNotes:L(Q,{children:["This R code will download file annotations only. Use"," ",L(Rt,{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${u}")
read.table(query$filepath, sep = ",")`,pythonNotes:L(Q,{children:["This Python code will download file annotations only. Use"," ",m(Rt,{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${u}")
query.asDataFrame()`})}try{bf.displayName="ProgrammaticTableDownload",bf.__docgenInfo={description:"",displayName:"ProgrammaticTableDownload",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}const _H="Add To Download Cart",wf=e=>{const{accessToken:t}=qe(),{entity:n,data:a,getLastQueryRequest:r}=dt(),i=r(),[o,s]=B.useState(!1),[l,c]=B.useState(!1),[u,d]=B.useState(!1),{onDownloadFiles:f,darkTheme:p=!0}=e,h=n&&(Bn(n)&&a1(n)||Jn(n)),v=n&&Jn(n)&&n.isLatestVersion;return L(B.Fragment,{children:[L(st,{as:"span",children:[m(Sn,{tooltipText:"Download Options",size:"lg",darkTheme:p,icon:"download"}),L(st.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[m(st.Item,{onClick:()=>{c(!0)},children:"Export Table"}),h&&m(wt,{title:v?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:m(st.Item,{role:"button",className:v?"ignoreLink":void 0,disabled:v,style:v?{pointerEvents:"auto"}:{},onClick:()=>t?f():s(!0),children:_H})}),m(wt,{title:v?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:m(st.Item,{className:v?"ignoreLink":void 0,disabled:v,style:v?{pointerEvents:"auto"}:{},onClick:()=>d(!0),children:"Programmatic Options"})})]})]}),o&&m(gf,{showModal:o,onHide:()=>s(!1)}),l&&m(sa,{onClose:()=>c(!1),queryBundleRequest:i}),u&&a&&m(bf,{onHide:()=>d(!1),queryBundleRequest:i})]})};try{wf.displayName="DownloadOptions",wf.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const EH="addAndRemoveColumns",Sf=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:a,darkTheme:r}=e,{getColumnDisplayName:i}=ut(),[o,s]=$.useState(!1),l=(c,u,d)=>{d.source==="rootClose"?s(!1):s(!0)};return L(st,{as:"span",onToggle:(c,u,d)=>l(c,u,d),show:o,drop:"down",children:[m(Sn,{tooltipText:"Show/Hide Columns",icon:r?"columnsdark":"columns",darkTheme:r}),m(st.Menu,{id:`${EH}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(c=>{const{name:u}=c,d=n.includes(u),f={width:"11px",marginRight:"10px",visibility:d?void 0:"hidden"},p=d?"SRC-primary-text-color":"";return L(st.Item,{onClick:()=>a(u),children:[m("span",{className:p,style:f,children:m($e,{icon:"check",sx:{width:"14px"}})}),i(u)]},u)})})]})};try{Sf.displayName="ColumnSelection",Sf.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}}}catch{}const CH="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",xH="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",_f=({entity:e})=>{var r;const t=e&&Jn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:pa},{data:a}=Ub(n,{enabled:t});if(t&&a&&e){const i=a.queryCount,o=((r=e.items)==null?void 0:r.length)??0;if(i===o)return m(Q,{});const s=o-i;let l="";return e.isLatestVersion?l=CH:l=xH,L(xe,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[m(kN,{className:"SRC-color-warning",style:{fontSize:"16px"}}),s.toLocaleString()+" Unavailable",m(Nn,{className:"SRC-margin-left-5",markdownText:l,placement:"right"})]})}else return m(Q,{})};try{_f.displayName="MissingQueryResultsWarning",_f.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}}}catch{}function NH(e,t){const{accessToken:n}=qe(),a=",",r=!0,i=!1,o=e.query.sql;return async()=>{try{const l=`SELECT CONCAT('drs://repo-prod.prod.sagebase.org/syn', id, '.', currentVersion) AS drs_uri, name as file_name, ${t==null?void 0:t.map(p=>p.name).join(",")} FROM ${o.slice(o.toLowerCase().indexOf("from")+4+1)}`,c={sql:l,entityId:en(l),selectedFacets:e.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:r,includeRowIdAndRowVersion:i,csvTableDescriptor:{separator:a},additionalFilters:e.query.additionalFilters},u=await je.getDownloadFromTableRequest(c,n),d=await je.getFileHandleByIdURL(u.resultsFileHandleId,n),f=`https://cavatica.sbgenomics.com/import-redirect/drs/csv/?URL=${encodeURIComponent(d)}`;window.open(f,"_blank")}catch(s){Yr(s.reason,"danger")}}}const Ef=e=>L(Ex,{...e,height:20,viewBox:"0 0 828 828",children:[m("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.861 124.107C429.221 125.451 426.3 126.325 423.211 126.618L415.557 269.363C425.193 272.363 432.244 281.226 432.538 291.777L546.545 306.978C547.637 304.478 549.14 302.198 550.968 300.223L431.861 124.107ZM440.166 117.167L559.852 294.141C562.599 293.058 565.591 292.463 568.722 292.463C570.453 292.463 572.141 292.645 573.769 292.99L610.725 206.16C604.806 201.75 600.973 194.698 600.973 186.75C600.973 185.26 601.107 183.801 601.365 182.386L441.299 115.545C440.943 116.102 440.565 116.643 440.166 117.167ZM592.91 316.651C592.91 308.875 589.241 301.955 583.538 297.53L620.577 210.504C622.062 210.789 623.594 210.938 625.161 210.938C626.63 210.938 628.069 210.807 629.466 210.556L731.473 433.838C730.391 434.8 729.396 435.857 728.5 436.997L590.583 327.017C592.076 323.875 592.91 320.361 592.91 316.651ZM583.917 335.473C581.689 337.273 579.135 338.687 576.358 339.61L583.089 517.099C590.244 517.108 596.671 520.225 601.094 525.171L724.074 457.849C723.597 455.954 723.344 453.97 723.344 451.927C723.344 450.256 723.513 448.625 723.836 447.049L583.917 335.473ZM728.974 467.442L606.306 534.593C606.917 536.719 607.244 538.965 607.244 541.287C607.244 548.415 604.161 554.822 599.256 559.249L641.245 621.527C643.538 620.712 645.991 620.232 648.544 620.149L730.593 469.194C730.025 468.637 729.485 468.052 728.974 467.442ZM583.056 565.476C585.404 565.476 587.675 565.141 589.822 564.517L632.158 627.31C631.966 627.503 631.778 627.699 631.594 627.899L410.195 538.521L559.218 545.414C561.176 556.807 571.104 565.476 583.056 565.476ZM398.804 545.534C396.287 548.348 393.122 550.569 389.543 551.963L409.137 701.286C417.873 701.562 425.441 706.471 429.464 713.637L625.468 648.181C625.267 646.925 625.162 645.637 625.162 644.324C625.162 641.892 625.521 639.543 626.189 637.329L398.804 545.534ZM562.043 339.906C563.203 340.239 564.398 340.487 565.622 340.643L572.407 519.563C566.319 522.552 561.672 528.026 559.786 534.662L404.882 527.497C404.474 522.293 402.419 517.552 399.238 513.794L562.043 339.906ZM410.775 316.532C419.563 315.66 426.967 310.086 430.436 302.36L544.551 317.575C544.802 324.26 547.766 330.252 552.374 334.479L390.572 507.295C390.475 507.252 390.377 507.209 390.279 507.167C390.238 507.15 390.198 507.133 390.158 507.116L390.076 507.082C390.033 507.064 389.99 507.046 389.947 507.028L389.865 506.995L389.777 506.959L410.775 316.532ZM379.129 505.281L400.089 315.201C392.761 312.535 387.086 306.428 385.018 298.835L257.588 294.164C256.151 297.414 254.02 300.287 251.382 302.596L371.2 507.193C373.659 506.132 376.329 505.468 379.129 505.281ZM259.627 283.465L384.573 288.044C386.438 277.936 394.588 270.031 404.819 268.531L412.502 125.228C410.883 124.629 409.345 123.86 407.91 122.945L256.526 272.5C258.369 275.76 259.478 279.489 259.627 283.465ZM362.471 513.594L241.899 307.711C240.201 308.179 238.428 308.466 236.602 308.551L212.287 436.373C220.668 440.173 226.498 448.613 226.498 458.415C226.498 459.246 226.456 460.068 226.374 460.879L359.809 517.332C360.578 516.001 361.471 514.75 362.471 513.594ZM398.548 703.346L378.889 553.531C372.829 553.065 367.395 550.367 363.407 546.257L210.476 626.279C210.993 628.246 211.268 630.31 211.268 632.439C211.268 633.973 211.125 635.474 210.852 636.929L387.408 713.365C389.959 708.957 393.861 705.428 398.548 703.346ZM205.482 616.74L357.805 537.036C357.01 534.64 356.58 532.077 356.58 529.415C356.58 528.832 356.601 528.255 356.641 527.683L222.907 471.103C219.186 477.13 212.894 481.402 205.56 482.387L197.048 610.394C200.309 611.871 203.185 614.051 205.482 616.74ZM178.121 458.415C178.121 469.164 185.133 478.276 194.832 481.425L186.398 608.26C184.797 608.304 183.234 608.504 181.725 608.845L94.2764 412.358C95.9686 411.18 97.5031 409.79 98.8419 408.229L179.06 451.717C178.449 453.844 178.121 456.091 178.121 458.415ZM184.274 442.296C188.584 437.476 194.798 434.395 201.734 434.233L226.002 306.661C217.341 302.979 211.268 294.394 211.268 284.389C211.268 275.81 215.734 268.274 222.469 263.98L194.346 201.663C193.431 201.768 192.501 201.822 191.558 201.822C189.935 201.822 188.349 201.662 186.816 201.357L94.3034 372.649C100.563 377.021 104.658 384.279 104.658 392.494C104.658 394.639 104.379 396.719 103.855 398.699L184.274 442.296ZM235.456 260.201C234.505 260.201 233.567 260.256 232.644 260.363L204.526 198.055C211.271 193.763 215.746 186.221 215.746 177.633C215.746 177.057 215.726 176.486 215.687 175.92L399.494 113.808C399.759 114.312 400.042 114.805 400.341 115.286L249.271 264.532C245.355 261.802 240.592 260.201 235.456 260.201ZM172.016 613.512C166.455 617.944 162.891 624.775 162.891 632.439C162.891 645.798 173.72 656.628 187.079 656.628C195.062 656.628 202.141 652.761 206.547 646.798L384.232 723.723C384.191 724.297 384.17 724.877 384.17 725.462C384.17 738.821 395 749.651 408.359 749.651C421.718 749.651 432.547 738.821 432.547 725.462C432.547 724.963 432.532 724.466 432.502 723.974L629.521 658.179C633.894 664.427 641.145 668.513 649.351 668.513C662.71 668.513 673.539 657.683 673.539 644.324C673.539 634.62 667.825 626.25 659.577 622.397L739.776 474.845C742.211 475.669 744.82 476.115 747.533 476.115C760.891 476.115 771.721 465.286 771.721 451.927C771.721 438.568 760.891 427.738 747.533 427.738C745.247 427.738 743.036 428.055 740.94 428.648L639.371 206.326C645.418 201.929 649.35 194.799 649.35 186.75C649.35 173.391 638.52 162.561 625.161 162.561C617.133 162.561 610.018 166.472 605.618 172.493L444.924 105.391C445.034 104.455 445.09 103.503 445.09 102.538C445.09 89.179 434.26 78.3494 420.901 78.3494C407.543 78.3494 396.713 89.179 396.713 102.538C396.713 102.819 396.718 103.099 396.727 103.378L212.553 165.614C208.382 158.343 200.542 153.445 191.558 153.445C178.199 153.445 167.369 164.274 167.369 177.633C167.369 185.513 171.137 192.513 176.97 196.93L84.2531 368.6C83.0204 368.406 81.7569 368.306 80.4698 368.306C67.1108 368.306 56.2812 379.135 56.2812 392.494C56.2812 405.853 67.1108 416.683 80.4698 416.683C81.7672 416.683 83.0407 416.581 84.2827 416.384L172.016 613.512Z",fill:"url(#paint0_linear_271_30503)"}),m("defs",{children:L("linearGradient",{id:"paint0_linear_271_30503",x1:"163.941",y1:"159.14",x2:"682.43",y2:"676.053",gradientUnits:"userSpaceOnUse",children:[m("stop",{stopColor:"#9E5AA4"}),m("stop",{offset:"0.526649",stopColor:"#7387C2"}),m("stop",{offset:"1",stopColor:"#11AADE"})]})})]});try{Ef.displayName="Cavatica",Ef.__docgenInfo={description:"",displayName:"Cavatica",props:{children:{defaultValue:null,description:"Node passed into the SVG element.",name:"children",required:!1,type:{name:"ReactNode"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"(Partial<SvgIconClasses> & Partial<ClassNameMap<never>>)"}},color:{defaultValue:{value:"'inherit'"},description:`The color of the component.
It supports both default and custom theme colors, which can be added as shown in the
[palette customization guide](https://mui.com/material-ui/customization/palette/#adding-new-colors).
You can use the \`htmlColor\` prop to apply a color attribute to the SVG element.`,name:"color",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"action"'},{value:'"disabled"'},{value:'"error"'},{value:'"success"'},{value:'"inherit"'},{value:'"primary"'},{value:'"secondary"'}]}},fontSize:{defaultValue:{value:"'medium'"},description:"The fontSize applied to the icon. Defaults to 24px, but can be configure to inherit font size.",name:"fontSize",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"inherit"'},{value:'"medium"'},{value:'"large"'}]}},htmlColor:{defaultValue:null,description:"Applies a color attribute to the SVG element.",name:"htmlColor",required:!1,type:{name:"string"}},inheritViewBox:{defaultValue:{value:"false"},description:"If `true`, the root node will inherit the custom `component`'s viewBox and the `viewBox`\nprop will be ignored.\nUseful when you want to reference a custom `component` and have `SvgIcon` pass that\n`component`'s viewBox to the root node.",name:"inheritViewBox",required:!1,type:{name:"boolean"}},shapeRendering:{defaultValue:null,description:`The shape-rendering attribute. The behavior of the different options is described on the
[MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering).
If you are having issues with blurry icons you should investigate this prop.`,name:"shapeRendering",required:!1,type:{name:"string"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},titleAccess:{defaultValue:null,description:`Provides a human-readable title for the element that contains it.
https://www.w3.org/TR/SVG-access/#Equivalent`,name:"titleAccess",required:!1,type:{name:"string"}},viewBox:{defaultValue:{value:"'0 0 24 24'"},description:`Allows you to redefine what the coordinates without units mean inside an SVG element.
For example, if the SVG element is 500 (width) by 200 (height),
and you pass viewBox="0 0 50 20",
this means that the coordinates inside the SVG will go from the top left corner (0,0)
to bottom right (50,20) and each unit will be worth 10px.`,name:"viewBox",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: SVGSVGElement | null) => void) | RefObject<SVGSVGElement> | null"}}}}}catch{}const Cf=({customControls:e,data:t,selectedRows:n,setSelectedRows:a,refresh:r})=>n.length==0?m(Q,{}):L(Cx,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",position:"fixed",bottom:0,left:0,width:"100%",height:"70px",zIndex:1},children:[m(ht,{variant:"text",color:"error",sx:{marginLeft:"10px"},onClick:()=>{a([])},children:"Clear Selection"}),L(et,{sx:{display:"grid",gridTemplateColumns:"30px 140px"},children:[m(rN,{badgeContent:n.length,color:"primary",sx:{right:"18px",top:"12px"}})," ",m(xe,{variant:"body1",children:"Rows Selected"})]}),m("div",{children:e.map(i=>m(ht,{variant:"contained",style:{marginRight:"10px"},onClick:()=>i.onClick({data:t,selectedRows:n,refresh:r}),startIcon:i.icon,children:i.buttonText},i.buttonText))})]});try{Cf.displayName="RowSelectionControls",Cf.__docgenInfo={description:"",displayName:"RowSelectionControls",props:{customControls:{defaultValue:null,description:"",name:"customControls",required:!0,type:{name:"CustomControl[]"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"QueryResultBundle"}},selectedRows:{defaultValue:null,description:"",name:"selectedRows",required:!0,type:{name:"Row[]"}},setSelectedRows:{defaultValue:null,description:"",name:"setSelectedRows",required:!0,type:{name:"(newState: Row[]) => void"}},refresh:{defaultValue:null,description:"",name:"refresh",required:!0,type:{name:"() => void"}}}}}catch{}const IH=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:XC,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],hs=e=>{var N;const{name:t,showColumnSelection:n=!1,hideDownload:a=!1,hideVisualizationsControl:r=!1,hideFacetFilterControl:i=!1,hideQueryCount:o=!1,hideSqlEditorControl:s=!0,customControls:l,showExportToCavatica:c=!1}=e,{data:u,entity:d,executeQueryRequest:f,getLastQueryRequest:p,getInitQueryRequest:h,lockedColumn:v}=dt(),g=NH(p(),(N=u==null?void 0:u.queryResult)==null?void 0:N.queryResults.headers),{topLevelControlsState:b,setTopLevelControlsState:E,columnsToShowInTable:y,selectedRows:_,setSelectedRows:w,setColumnsToShowInTable:S}=ut(),C=A=>{const k={[A]:!b[A]};A==="showSearchBar"&&(k.showDownloadConfirmation=!1),A==="showDownloadConfirmation"&&(k.showSearchBar=!1),E(R=>({...R,...k}))},[x,I]=$.useState(!1),P=()=>{w([]),f(p())},q=$.useMemo(()=>{const A=h();return{sql:A.query.sql,selectedFacets:(A.query.selectedFacets??[]).filter(k=>k.columnName===(v==null?void 0:v.columnName)),additionalFilters:(A.query.additionalFilters??[]).filter(k=>"columnName"in k?k.columnName===(v==null?void 0:v.columnName):!0)}},[h,v==null?void 0:v.columnName]),O=A=>{let k=Mr(y);k.includes(A)?k=k.filter(R=>R!==A):k.push(A),S(k)},T=b==null?void 0:b.showFacetFilter;return m("div",{className:`TopLevelControls ${T?ur:Yt}`,"data-testid":"TopLevelControls",children:L("div",{children:[L("div",{className:"TopLevelControls__querycount",children:[t&&L(Q,{children:[L(xe,{variant:"sectionTitle",role:"heading",children:[t," ",!o&&m(_x,{query:q,parens:!0})]}),!o&&d&&m(_f,{entity:d})]}),!i&&L("a",{onClick:()=>C("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[m(Ms,{type:b.showFacetFilter?"close":"filter"}),L("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[b.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),L("div",{className:"TopLevelControls__actions",children:[c&&L(ht,{variant:"text",onClick:()=>{I(!0)},children:[m(Ef,{sx:{mr:1}})," Send to Cavatica"]}),IH.map(A=>{const{key:k,icon:R,tooltipText:V}=A;return k==="showDownloadConfirmation"&&a||k==="showFacetVisualization"&&r||k==="showSqlEditor"&&s?m(B.Fragment,{},k):k==="showDownloadConfirmation"?m(wf,{darkTheme:!0,onDownloadFiles:()=>C(k)},k):m(Sn,{tooltipText:V,callbackFn:()=>C(k),darkTheme:!0,icon:R},k)}),l&&m(Cf,{customControls:l,data:u,refresh:P,selectedRows:_,setSelectedRows:w}),n&&m(Sf,{headers:u==null?void 0:u.selectColumns,isColumnSelected:y,toggleColumnSelection:O,darkTheme:!0}),m(ua,{open:x,title:"Send to Cavatica",content:L(Q,{children:[m(xe,{variant:"body1",sx:{fontWeight:700,marginBottom:"10px"},children:"You must meet these requirements from Cavatica to send data:"}),L(xe,{variant:"body1",sx:{marginLeft:"10px",marginBottom:"10px"},children:["1. You must be logged in to a Cavatica account.",m("br",{}),"2. You must connect your Cavatica account to Sage."]}),m(xe,{variant:"body1",children:m(Rt,{href:"https://help.eliteportal.org/help/limited-data-commons#LimitedDataCommons-GainingAccess",target:"_blank",children:"Click here for instructions"})}),L(et,{sx:{backgroundColor:"grey.100",marginTop:"15px",padding:"10px 20px 10px 20px"},children:["Note that we cannot provide support for Cavatica. Please contact Cavaticaâ€™s"," ",m(Rt,{href:"mailto:support@sevenbridges.com ",children:" support"})," ","for issues related to the above."]}),m(xe,{variant:"body1",sx:{fontWeight:700,marginTop:"15px"},children:"When completed, click â€œSend to Cavaticaâ€ to finish the process outside this application. You will be redirected to Cavatica."})]}),confirmButtonText:"Send to Cavatica",onConfirm:()=>{g()},onCancel:()=>I(!1),maxWidth:"sm"})]})]})})};try{hs.displayName="TopLevelControls",hs.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}}}}}catch{}const hi=e=>{const{checked:t=!1,hideLabel:n=!1,isSelectAll:a=!1,disabled:r=!1}=e,[i,o]=$.useState(t),[s]=$.useState(xx("src-checkbox-"));$.useEffect(()=>{o(t)},[t]);const l=u=>{e.onChange(u.target.checked),a&&u.target.checked===!1?o(!0):o(u.target.checked)};let c="checkbox";return e.className&&(c+=` ${e.className}`),L("div",{className:c,onClick:e.onClick,children:[m("input",{"aria-label":e.label,type:"checkbox",checked:i,id:s,onChange:l,disabled:r,"data-testid":e["data-testid"]}),m("label",{htmlFor:s,children:n?m(Q,{}):e.label}),e.children??m(Q,{})]})};try{hi.displayName="Checkbox",hi.__docgenInfo={description:"",displayName:"Checkbox",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},hideLabel:{defaultValue:null,description:"",name:"hideLabel",required:!1,type:{name:"boolean"}},checked:{defaultValue:null,description:"",name:"checked",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: boolean) => void"}},isSelectAll:{defaultValue:null,description:"",name:"isSelectAll",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((event: SyntheticEvent<HTMLDivElement, Event>) => void)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}}}}}catch{}const xf=e=>L("svg",{...e,className:`Icon-Plus ${e.className??""}`,width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.title&&m("title",{children:e.title}),m("path",{d:"M14.3887 8H8.38867V14H6.38867V8H0.388672V6H6.38867V0H8.38867V6H14.3887V8Z"})]});try{xf.displayName="IconPlus",xf.__docgenInfo={description:"",displayName:"IconPlus",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}const Nf=e=>L("svg",{...e,className:`Icon-Minus ${e.className??""}`,width:"15",height:"2",viewBox:"0 0 15 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.title&&m("title",{children:e.title}),m("path",{d:"M14.3887 2H8.38867H6.38867H0.388672V0H6.38867H8.38867H14.3887V2Z"})]});try{Nf.displayName="IconMinus",Nf.__docgenInfo={description:"",displayName:"IconMinus",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}}}catch{}const ms=({label:e,isCollapsed:t,onClick:n})=>{const{getColumnDisplayName:a}=ut();return L("div",{className:"FacetFilterHeader",children:[m("label",{className:"FacetFilterHeader__label",children:a(e)}),m("button",{className:"FacetFilterHeader__collapseToggleBtn",onClick:()=>n(!t),children:t?m(xf,{className:"icon-plus",title:"Expand Menu"}):m(Nf,{className:"icon-minus",title:"Collapse Menu"})})]})};try{ms.displayName="FacetFilterHeader",ms.__docgenInfo={description:"",displayName:"FacetFilterHeader",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(newValue: boolean) => void"}}}}}catch{}function TH(e){return e.replace(/\s/g,"").toLowerCase()}function My(e,t=[],n=[],a=[]){const{value:r}=e;let i=r;r===ja&&(i=Is);const o=t.find(c=>c.ownerId===r);o&&(i=o?o.userName:`unknown (${r})`);const s=n.find(c=>c.id===r);s&&(i=s?s.name:`unknown (${r})`);const l=a.find(c=>c.id===r);return l!=null&&l.name&&(i=l.name),`${i}`}function PH(e,t,n){const a=[...e.sort((r,i)=>i.count-r.count)];return t||a.length<=n||a.slice(n).find(r=>r.isSelected)?a:a.splice(0,n)}const la=({facetValues:e,columnModel:t,onClear:n,onChange:a,containerAs:r="Collapsible",dropdownType:i="Icon",collapsed:o=!1})=>{const[s,l]=$.useState(!1),[c,u]=$.useState(o),[d,f]=$.useState(!1),[p,h]=$.useState(!1),[v,g]=$.useState(""),[b,E]=$.useState(e);ko(()=>{E(e)},[e]);const y=5,_=1500,w=B.createRef(),S={};let C;const x=e.filter(F=>F.isSelected).length===0,I=(t==null?void 0:t.columnType)===ue.USERID||(t==null?void 0:t.columnType)===ue.USERID_LIST?e.map(F=>F.value):[],P=Ma({ids:I,type:"USER_PROFILE"}),q=(t==null?void 0:t.columnType)===ue.ENTITYID||(t==null?void 0:t.columnType)===ue.ENTITYID_LIST?e.map(F=>F.value):[],O=Ma({ids:q,type:"ENTITY_HEADER"}),T=(t==null?void 0:t.columnType)===ue.EVALUATIONID?e.map(F=>F.value):[],N=Ma({ids:T,type:"EVALUATION_QUEUE"}),A=F=>{const z=F.target.value;if(g(z),l(!0),!z)e.forEach(W=>{W.isSelected=!1}),E(e);else{const W=e.filter(G=>My(G,P,O,N).toLowerCase().indexOf(z.trim().toLowerCase())>-1?G:null);E(W)}};if(!t)return m(Q,{});const k=r==="Dropdown",R=L("div",{className:k?"EnumFacetFilter__dropdown_menu":"",children:[L("div",{className:"EnumFacetFilter__checkboxContainer--forAll",children:[L("div",{className:p?"EnumFacetFilter__search active":"EnumFacetFilter__search",children:[m("button",{className:"EnumFacetFilter__closeSearch",onClick:()=>{E(e),h(!1),l(!1)},children:m("span",{className:"EnumFacetFilter__previous",children:m($e,{icon:"arrowBack"})})}),v.length>0&&m("button",{className:"EnumFacetFilter__resetSearch",onClick:()=>{var F;g(""),(F=w.current)==null||F.focus()},children:m("span",{className:"EnumFacetFilter__reset",children:m($e,{icon:"close"})})}),m("input",{type:"text",placeholder:"Find values",value:v,ref:w,onChange:F=>{A(F)}})]}),!p&&L("div",{className:"EnumFacetFilter__checkAll",children:[m(hi,{className:"EnumFacetFilter__checkbox",onChange:()=>{n()},checked:x,label:"All",isSelectAll:!0},"select_all"),m("button",{className:"EnumFacetFilter__searchbtn",onClick:()=>{var F;g(""),h(!0),(F=w.current)==null||F.focus()},children:m("span",{className:"EnumFacetFilter__searchicon",children:m($e,{icon:"search"})})})]})]}),L("div",{children:[b.length>0&&PH(b,s||k,y).map((F,z)=>m(RH,{id:TH(F.value),index:z,label:My(F,P,O,N),count:F.count,isDropdown:k,initialIsSelected:F.isSelected,onChange:W=>{S[F.value]=W,clearTimeout(C),C=setTimeout(()=>{a(S),f(!1)},_)}},`checkLabel${z}`)),!k&&L(Q,{children:[!s&&b.length>y&&m("button",{className:"EnumFacetFilter__showMoreFacetsBtn",onClick:()=>l(!0),children:m("div",{className:"EnumFacetFilter__checkboxContainer",children:L("div",{className:"EnumFacetFilter__showMoreFacetsLabel",children:["Show all (",b.length,")"]})})}),s&&b.length>y&&m("button",{className:"EnumFacetFilter__showMoreFacetsBtn",onClick:()=>l(!1),children:m("div",{className:"EnumFacetFilter__checkboxContainer",children:m("div",{className:"EnumFacetFilter__showMoreFacetsLabel",children:"Show less"})})})]}),b.length<=0&&m("div",{className:"EnumFacetFilter__noMatch",children:"No match found"})]})]}),V=()=>f(!d);return k?i==="SelectBox"?L(st,{className:"EnumFacetFilter EnumFacetFilterSelect",show:d,onToggle:V,children:[L(st.Toggle,{className:"secondary-caret",variant:"gray-select",children:[x&&"All",!x&&e.filter(F=>F.isSelected).length===1&&e.filter(F=>F.isSelected)[0].value,!x&&e.filter(F=>F.isSelected).length>1&&"Multiple Values Selected"]}),m(st.Menu,{children:R})]}):L(st,{className:"EnumFacetFilter",show:d,onToggle:V,children:[m(Sn,{tooltipText:"Filter by specific facet",darkTheme:!1,icon:"filter"},"facetFilterTooltip"),m(st.Menu,{children:R})]}):L(Q,{children:[m(ms,{isCollapsed:c,label:t.name,onClick:F=>u(F)}),m(Si,{className:"EnumFacetFilter",in:!c,children:R})]})};function RH({id:e,index:t,label:n,count:a,isDropdown:r,initialIsSelected:i,onChange:o}){const[s,l]=$.useState(i);return B.useEffect(()=>{l(i)},[i]),L("div",{className:"EnumFacetFilter__checkboxContainer",onClick:()=>{r&&(l(!s),o(!s))},children:[m(hi,{className:"EnumFacetFilter__checkbox",onClick:c=>c.stopPropagation(),onChange:c=>{l(c),o(c)},checked:s,label:n},`${e}-${t}`),r&&L("span",{className:"EnumFacetFilter__count",children:["(",a,")"]}),!r&&m("div",{className:"EnumFacetFilter__count",children:a})]})}try{la.displayName="EnumFacetFilter",la.__docgenInfo={description:"*********** QUERY ENUM CONMPONENT  ************",displayName:"EnumFacetFilter",props:{facetValues:{defaultValue:null,description:"",name:"facetValues",required:!0,type:{name:"FacetColumnResultValueCount[]"}},columnModel:{defaultValue:null,description:"",name:"columnModel",required:!0,type:{name:"SelectColumn"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(facetNamesMap: Record<string, boolean>) => void"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!0,type:{name:"() => void"}},containerAs:{defaultValue:{value:"Collapsible"},description:"",name:"containerAs",required:!1,type:{name:"enum",value:[{value:'"Collapsible"'},{value:'"Dropdown"'}]}},dropdownType:{defaultValue:{value:"Icon"},description:"",name:"dropdownType",required:!1,type:{name:"enum",value:[{value:'"Icon"'},{value:'"SelectBox"'}]}},collapsed:{defaultValue:{value:"false"},description:"",name:"collapsed",required:!1,type:{name:"boolean"}}}}}catch{}const If=({facet:e,isChecked:t,onClick:n})=>{const{getColumnDisplayName:a}=ut();return L("button",{className:`Chip ${t?"Checked":""}`,onClick:n,children:[a(e.columnName),m($e,{icon:t?"check":"add",sx:{width:"14px",paddingLeft:"0.2rem"}})]})};try{If.displayName="FacetChip",If.__docgenInfo={description:"",displayName:"FacetChip",props:{facet:{defaultValue:null,description:"",name:"facet",required:!0,type:{name:"FacetColumnResult"}},isChecked:{defaultValue:null,description:"",name:"isChecked",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}}}}}catch{}const Tf=e=>{const t="Min value should be less then max value",[n,a]=$.useState(!1),[r,i]=$.useState(()=>e.type==="number"&&e.initialValues?e.initialValues:e.initialValues&&{min:ir(e.initialValues.min).format("YYYY-MM-DD"),max:ir(e.initialValues.max).format("YYYY-MM-DD")}||{min:void 0,max:void 0}),o=e.className?`range ${e.className}`:"range",s=({min:c,max:u},d="number")=>{if(c==null||u===null||u===void 0)return a(!1),!0;if(d==="number"){if(Number(c)>Number(u))return a(!0),!1}else if(Date.parse(c)>Date.parse(u))return a(!0),!1;return a(!1),!0},l=(c,u,d="number")=>{s(c,d)&&u(c)};return L("div",{className:o,style:{display:"flex",flexWrap:"wrap"},children:[L("div",{style:{marginRight:"10px"},children:[m("input",{"aria-label":"min",type:e.type,value:r.min,onChange:({target:c})=>i({min:c.value,max:r.max})},"range_min"),m("div",{children:"to"}),m("input",{"aria-label":"max",type:e.type,value:r.max,onChange:({target:c})=>i({min:r.min,max:c.value})},"range_max")]}),m("button",{className:"btn btn-link SRC-noPadding",onClick:()=>l(r,e.onChange,e.type),children:"Apply"}),n&&m("div",{className:"SRC-danger-color",children:e.errorText||t})]})};try{Tf.displayName="Range",Tf.__docgenInfo={description:"",displayName:"Range",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"number"'},{value:'"date"'}]}},initialValues:{defaultValue:null,description:"",name:"initialValues",required:!1,type:{name:"RangeValues<string | number>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},errorText:{defaultValue:null,description:"",name:"errorText",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValues: RangeValues<string | number>) => void"}}}}}catch{}const Pf=({facetResult:e,columnModel:t,onChange:n,collapsed:a=!1})=>{const[r,i]=$.useState(a),o=[{label:Is,value:"org.sagebionetworks.UNDEFINED_NULL_NOTSET"},{label:"Any",value:""},{label:"Range",value:"RANGE"}];let{columnMin:s,columnMax:l,selectedMin:c,selectedMax:u}=e;const d=!c&&!u;c=c||s,u=u||l;const f=t.columnType==="DOUBLE"?"number":"date",p=(E,y)=>y?"":E===ja?"org.sagebionetworks.UNDEFINED_NULL_NOTSET":"RANGE",h=(E,y)=>{g(E),E!=="RANGE"&&y([E,E])},[v,g]=$.useState(p(c,d));return L("div",{children:[m(ms,{isCollapsed:r,label:t.name,onClick:E=>i(E)}),L(Si,{in:!r,children:[m(Nx,{value:v,id:"rangeSelector",options:o,onChange:E=>h(E,n)}),v==="RANGE"&&(s===l?m("label",{children:l}):L(Q,{children:[t.columnType==="INTEGER"&&L(Ix,{domain:[s,l],initialValues:{min:c,max:u},step:1,doUpdateOnApply:!0,onChange:E=>n([E.min,E.max]),children:[") ",">"]},"RangeSlider"),(t.columnType==="DATE"||t.columnType==="DOUBLE")&&m(Tf,{initialValues:{min:c,max:u},type:f,onChange:E=>n([E.min,E.max])},"Range")]}))]})]})};try{Pf.displayName="RangeFacetFilter",Pf.__docgenInfo={description:"",displayName:"RangeFacetFilter",props:{facetResult:{defaultValue:null,description:"",name:"facetResult",required:!0,type:{name:"FacetColumnResultRange"}},columnModel:{defaultValue:null,description:"",name:"columnModel",required:!0,type:{name:"SelectColumn"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(range: (string | number | undefined)[]) => void"}},collapsed:{defaultValue:{value:"false"},description:"",name:"collapsed",required:!1,type:{name:"boolean"}}}}}catch{}const sC=e=>({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:e.columnName,facetValues:e.facetValues.filter(t=>t.isSelected).map(t=>t.value)}),AH=e=>{let t={concreteType:"org.sagebionetworks.repo.model.table.FacetColumnRangeRequest",columnName:e.columnName};return e.columnMin&&(t={...t,min:e.columnMin,max:e.columnMax}),t},Vh=(e,t)=>{var i;const n=((i=t==null?void 0:t.query)==null?void 0:i.selectedFacets)??[],a=n.findIndex(o=>o.columnName===e.columnName),r=e.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnValuesRequest"&&(!e.facetValues||!e.facetValues.length);return a>-1?r?n.splice(a,1):n[a]=e:n.push(e),n};function mi(e,t,n,a,r=!1){a?t.facetValues.forEach(s=>{s.value===a&&(s.isSelected=r)}):t.facetValues.forEach(s=>{s.isSelected=!1});const i=sC(t),o=Vh(i,e);n(o)}const vs=(e,t,n,a)=>{const r=a&&Object.keys(a)||[];r.length&&t.facetValues.forEach(s=>{r.includes(s.value)&&(s.isSelected=a?!!a[s.value]:!1)});const i=sC(t),o=Vh(i,e);n(o)},kH=(e,t,n,a)=>{t.columnMin=a[0],t.columnMax=a[1];const r=AH(t),i=Vh(r,e);n(i)};function gs(e,t){const n=(t??[]).map(a=>a.columnName);return new Set([...e.slice(0,3).map(a=>a.columnName),...n])}function mo(){const e=L(xi,{direction:"row",gap:"10px",sx:{my:1},children:[m(fn,{width:"15px"}),m(fn,{width:"40%"})]});return L(et,{className:"FacetFilterControls__facet",children:[m(et,{className:"FacetFilterHeader",children:m(fn,{width:"100%"})}),L(et,{children:[e,e,e]})]})}function $H(){const{topLevelControlsState:e}=ut(),{showFacetFilter:t}=e;return L("div",{className:`FacetFilterControls ${t?ur:Yt}`,children:[m(mo,{}),m(mo,{}),m(mo,{}),m(mo,{})]})}function Rf(e){const{availableFacets:t}=e,{data:n,getLastQueryRequest:a,executeQueryRequest:r}=dt(),i=a(),o=n.facets.filter(h=>t==null||t.includes(h.columnName)).filter(h=>!Qb(h)),[s,l]=B.useState(gs(o,i.query.selectedFacets)),{topLevelControlsState:c}=ut(),{showFacetFilter:u}=c;Bb(()=>{l(gs(o,i.query.selectedFacets))},[o]);const d=n.selectColumns,f=h=>{const v=a();v.query.selectedFacets=h,v.query.offset=0,r(v)},p=h=>{const v=new Set(s);v.has(h.columnName)?v.delete(h.columnName):v.add(h.columnName),l(v)};return L("div",{className:`FacetFilterControls ${u?ur:Yt}`,children:[(o??[]).filter(h=>s.has(h.columnName)).map(h=>{const v=d.find(g=>g.name===h.columnName);return L("div",{className:"FacetFilterControls__facet",children:[h.facetType==="enumeration"&&v&&m(la,{containerAs:"Collapsible",collapsed:!1,facetValues:h.facetValues,columnModel:v,onChange:g=>vs(i,h,f,g),onClear:()=>mi(i,h,f)}),h.facetType==="range"&&v&&m(Pf,{facetResult:h,columnModel:v,collapsed:!1,onChange:g=>kH(i,h,f,g)})]},h.columnName)}),L("div",{children:[m("div",{className:"AvailableFacet",children:m("label",{className:"AvailableFacet__label",children:"Available Facets"})}),o.map(h=>m(If,{facet:h,onClick:()=>p(h),isChecked:s.has(h.columnName)},h.columnName))]})]})}function qH(e){const{data:t,isLoadingNewBundle:n}=dt();return n?m($H,{}):t==null||t.facets==null?m(Q,{}):m(Rf,{...e})}try{gs.displayName="getDefaultShownFacetFilters",gs.__docgenInfo={description:`Determines which facet filters should be shown after loading a new bundle. The shown facets will be the first
three available facets, plus any other facets that have a filter applied.`,displayName:"getDefaultShownFacetFilters",props:{}}}catch{}try{Rf.displayName="FacetFilterControls",Rf.__docgenInfo={description:"",displayName:"FacetFilterControls",props:{availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}}}}}catch{}const OH=Lb(Vb),DH=19,FH=30,LH={showlegend:!1,annotations:[],margin:{l:0,r:0,b:0,t:0,pad:0},yaxis:{visible:!1,showgrid:!1},xaxis:{visible:!1,showgrid:!1}};function lC(e,t){if(!e)return e;const n=e.trim();return n.length>t?n.substr(0,t-1)+"â€¦":e}async function VH(e,t,n,a,r){var h,v;const{colorPalette:i}=Px(n,e.facetValues.length),o=async(g,b,E)=>{const y=new Map;y.set(ja,Is);const _=g.map(w=>w.value).filter(w=>w!==ja);if(b===ue.ENTITYID||b===ue.ENTITYID_LIST){const w=await je.getEntityHeadersByIds(_,E);for(const S of w.results)y.set(S.id,S.name)}else if(b===ue.USERID||b===ue.USERID_LIST){const w=await je.getGroupHeadersBatch(_,E);for(const S of w.children)y.set(S.ownerId,S.userName)}return g.map(w=>({facet:w,label:s(w,!1,y),truncatedLabel:s(w,!0,y),count:w.count}))},s=(g,b,E)=>{let y=E.get(g.value)??g.value;return b&&(y=lC(y,DH)),y},l=await o(e.facetValues,t,r),c=l.map(g=>g.truncatedLabel),d=e.facetValues.some(g=>g.isSelected)?e.facetValues.map((g,b)=>g.isSelected?i[b]:i[b].replace("rgb(","rgba(").replace(")",", 0.25)")):i,f={values:a==="PIE"?e.facetValues.map(g=>g.count):void 0,labels:l.map(g=>g.label),text:c,x:a==="BAR"?e.facetValues.map(g=>{var b;return((b=l.find(E=>E.facet===g))==null?void 0:b.label)??g.value}):void 0,y:a==="BAR"?e.facetValues.map(g=>g.count):void 0,facetEnumerationValues:e.facetValues.map(g=>g.value),name:e.columnName,hovertemplate:a==="PIE"?"<b>%{text}</b><br>%{value} (%{percent})<br><extra></extra>":"<b>%{text}: </b><br>%{value} <br><extra></extra>",textinfo:"none",type:a==="PIE"?"pie":"bar",pull:a==="PIE"?e.facetValues.map(g=>g.isSelected?.1:0):void 0,marker:{colors:a==="PIE"?d:void 0,color:a==="BAR"?d:void 0}};return{data:[f],labels:l,colors:a==="PIE"?(h=f.marker)==null?void 0:h.colors:(v=f.marker)==null?void 0:v.color}}const MH=(e,t,n)=>{if(e.points&&e.points[0]){const a=e.points[0],r=a.data.facetEnumerationValues[a.pointNumber],i=t.facetValues.find(o=>o.value===r);n(t,i,!i.isSelected)}};function BH(e,t,n){const r=e?e*(t==="BAR"?.8:.6):200;let i=t==="PIE"?r:r/3;return i>n&&(i=n),{width:`${r}px`,height:`${i}px`}}function Af(e){const{labels:t,colors:n=[],isExpanded:a}=e;if(!t)return m(Q,{});const r=a?Math.min(t.length,9):Math.min(t.length,4);return r===0?m(Q,{}):m("div",{className:`FacetNavPanel__body__legend${a?"--expanded":""}`,children:t.slice(0,r).map((i,o)=>{const s=lC(i.label,FH);return m(Sn,{tooltipText:i.label,children:L(et,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[m(et,{sx:{width:"14px",height:"14px",cursor:"default",backgroundColor:n[o]},style:{cursor:"default"}},`legendLabel_${o}`),m(xe,{variant:"body2",children:s}),m(xe,{variant:"body2",sx:{color:"grey.600"},children:i.count})]})},i.label)})})}const UH=(e,t)=>e?`FacetNavPanel__body__plot--expanded${t==="BAR"?"Bar":"Pie"}`:"FacetNavPanel__body__plot",ys=e=>{const{onHide:t,isModalView:n,applyChangesToFacetFilter:a,applyChangesToGraphSlice:r,index:i,facetToPlot:o,plotType:s,onSetPlotType:l}=e,{accessToken:c}=qe(),{data:u,isLoadingNewBundle:d,getLastQueryRequest:f}=dt(),{getColumnDisplayName:p}=ut(),[h,v]=$.useState(!1),g=p(o.columnName),b=$.useCallback(()=>{var _,w;return(w=(_=u==null?void 0:u.columnModels)==null?void 0:_.find(S=>S.name===o.columnName))==null?void 0:w.columnType},[u,o.columnName]),{data:E}=ca(["extractPlotDataArray",o,b(),i,s,c],()=>VH(o,b(),i,s,c),{enabled:!!o}),y=()=>L("div",{onClick:_=>{_.stopPropagation()},className:"bootstrap-4-backport SRC-labeled-dropdown",children:[m("span",{className:"SRC-labeled-dropdown__label",children:"Chart Type"}),L(st,{children:[m(st.Toggle,{className:"secondary-caret",variant:"gray-select",children:s==="PIE"?"Pie Chart":"Bar Chart"}),L(st.Menu,{className:"chart-tools",children:[m(st.Item,{as:"button",onClick:()=>l("BAR"),children:"Bar Chart"}),m(st.Item,{as:"button",onClick:()=>l("PIE"),children:"Pie Chart"})]})]})]});return!u&&d||!o?m("div",{className:"SRC-loadingContainer SRC-centerContentColumn",children:yp}):L(Q,{children:[m(ua,{open:h,onCancel:()=>v(!1),title:g??"",content:m(ys,{...e,isModalView:!0}),hasCancelButton:!1,confirmButtonText:"Apply Filters",onConfirm:()=>v(!1)}),L("div",{role:"graphics-document",className:`FacetNavPanel${n?"--expanded":""}`,children:[!n&&L("div",{className:"FacetNavPanel__title",children:[!u&&d?m(hn,{width:100}):m("span",{className:"FacetNavPanel__title__name",children:g}),L("div",{className:"FacetNavPanel__title__tools",children:[m(la,{facetValues:o.facetValues,columnModel:u==null?void 0:u.columnModels.find(_=>_.name===o.columnName),onChange:_=>{vs(f(),o,a,_)},onClear:()=>{mi(f(),o,a)},containerAs:"Dropdown"}),m(Sn,{tooltipText:"Expand to large graph",callbackFn:()=>v(!0),className:"SRC-primary-color",darkTheme:!1,icon:"expand"},"expandGraph"),m(Sn,{tooltipText:"Hide graph under Show More",callbackFn:()=>t(),className:"SRC-primary-color",darkTheme:!1,icon:"close"},"hideGraph")]})]}),n&&L(Q,{children:[L("div",{className:"bootstrap-4-backport SRC-labeled-dropdown",children:[m("span",{className:"SRC-labeled-dropdown__label",children:"Filter All Data By"}),m(la,{facetValues:o.facetValues,columnModel:u==null?void 0:u.columnModels.find(_=>_.name===o.columnName),onChange:_=>{vs(f(),o,a,_)},onClear:()=>{mi(f(),o,a)},containerAs:"Dropdown",dropdownType:"SelectBox"}),m(wt,{title:"Selecting items in this dropdown will affect all facets on the Explore page.",children:m(Rx,{className:"SRC-hand-cursor SRC-secondary-text-color"})})]}),m(y,{})]}),L("div",{className:`FacetNavPanel__body${n?"--expanded":""}`,role:"graphics-object",children:[m(Tx.SizeMe,{monitorHeight:!0,noPlaceholder:!0,children:({size:_})=>m("div",{className:UH(n,s),children:m(OH,{layout:LH,data:(E==null?void 0:E.data)??[],style:BH(_.width,s,n?300:150),config:{displayModeBar:!1},onClick:w=>MH(w,o,r)},`${o.columnName}-${s}-${_.width}`)})}),m(Af,{labels:E==null?void 0:E.labels,colors:E==null?void 0:E.colors,isExpanded:n})]})]})]})};try{Af.displayName="FacetPlotLegend",Af.__docgenInfo={description:"",displayName:"FacetPlotLegend",props:{labels:{defaultValue:null,description:"",name:"labels",required:!1,type:{name:"FacetWithLabel[]"}},colors:{defaultValue:null,description:"",name:"colors",required:!1,type:{name:"string[]"}},isExpanded:{defaultValue:null,description:"",name:"isExpanded",required:!0,type:{name:"boolean"}}}}}catch{}try{ys.displayName="FacetNavPanel",ys.__docgenInfo={description:"",displayName:"FacetNavPanel",props:{applyChangesToGraphSlice:{defaultValue:null,description:"",name:"applyChangesToGraphSlice",required:!0,type:{name:"(facet: FacetColumnResultValues, value: FacetColumnResultValueCount | undefined, isSelected: boolean) => void"}},applyChangesToFacetFilter:{defaultValue:null,description:"",name:"applyChangesToFacetFilter",required:!0,type:{name:"(facets: FacetColumnRequest[]) => void"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},facetToPlot:{defaultValue:null,description:"",name:"facetToPlot",required:!0,type:{name:"FacetColumnResultValues"}},plotType:{defaultValue:null,description:"",name:"plotType",required:!0,type:{name:"enum",value:[{value:'"PIE"'},{value:'"BAR"'}]}},onSetPlotType:{defaultValue:null,description:"",name:"onSetPlotType",required:!0,type:{name:"(plotType: PlotType) => void"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}},isModalView:{defaultValue:null,description:"",name:"isModalView",required:!0,type:{name:"boolean"}},onCloseModal:{defaultValue:null,description:"",name:"onCloseModal",required:!1,type:{name:"(() => void)"}}}}}catch{}function zH(e,t,n){const a=t.getColumnModel(e.columnName);return e.values.map(r=>{let i=r;r!=null&&r.startsWith("%")&&(r!=null&&r.endsWith("%"))&&(i=i.substring(1,i.length-1)),i=n.getDisplayValue(i,a.columnType);const o=`${e.columnName}: ${i}`;return{key:`queryFilter-${e.concreteType}-${e.columnName}-${r}`,innerText:o,tooltipText:o,onRemoveFilter:()=>{t.removeValueFromQueryFilter(e,r)}}})}function HH(e,t){return{key:`queryFilter-${e.concreteType}-${e.searchExpression}`,innerText:e.searchExpression,tooltipText:`Text matches: "${e.searchExpression}"`,onRemoveFilter:()=>{t.removeQueryFilter(e)}}}function WH(e,t,n){var a;return To(e)||Po(e)?e.columnName===((a=t.lockedColumn)==null?void 0:a.columnName)?[]:zH(e,t,n):VC(e)?[HH(e,t)]:(console.log("Unknown query filter type",e.concreteType),[])}function jH(e,t,n){var o;if(e.columnName===((o=t.lockedColumn)==null?void 0:o.columnName))return[];const a=t.getColumnModel(e.columnName),{getColumnDisplayName:r,getDisplayValue:i}=n;if(Dc(e))return e.facetValues.map(s=>{const l=i(s,a.columnType);return{key:`facet-${e.concreteType}-${e.columnName}-${s}`,innerText:l,tooltipText:`${r(e.columnName)}: ${l}`,onRemoveFilter:()=>{t.removeValueFromSelectedFacet(e,s)}}});if(MC(e)){const s=`${e.min} - ${e.max}`;return[{key:`facet-${e.concreteType}-${e.columnName}-${e.min}-${e.max}`,innerText:s,tooltipText:`${r(e.columnName)}: ${s}`,onRemoveFilter:()=>{t.removeSelectedFacet(e)}}]}else return console.log("Unknown facet type",e.concreteType),[]}function QH(){var s;const e=dt(),t=ut(),{getLastQueryRequest:n}=e,a=n(),r=(((s=a.query)==null?void 0:s.additionalFilters)??[]).flatMap(l=>WH(l,e,t)),i=(a.query.selectedFacets??[]).flatMap(l=>jH(l,e,t)),o=[...r,...i];return m(Q,{children:o.map(l=>{const c=encodeURIComponent(l.key);return $.createElement(Ax,{...l,key:c})})})}function vi(e){const{style:t,frontText:n,endText:a="",hideIfUnfiltered:r=!1}=e,{data:i,isLoadingNewBundle:o,resetQuery:s,error:l,hasResettableFilters:c}=dt(),{topLevelControlsState:u,unitDescription:d}=ut(),f=i==null?void 0:i.queryCount,p=u==null?void 0:u.showFacetFilter,h=c;return l?m(Q,{}):m("div",{className:`TotalQueryResults ${p?ur:Yt} ${c?"hasFilters":""}`,style:t,children:o?m(hn,{width:100}):L(Q,{children:[(c||!r)&&L("div",{className:"TotalQueryResults__topbar",children:[L("span",{className:"SRC-boldText",children:[n," ",f==null?void 0:f.toLocaleString()," ",d," ",a]}),h&&L("a",{onClick:s,className:"TotalQueryResults__topbar__clearall",children:[m($e,{icon:"deleteSweep"}),"Clear all filters"]})]}),m("div",{className:"TotalQueryResults__selections",children:m(QH,{})})]})})}try{vi.displayName="TotalQueryResults",vi.__docgenInfo={description:"",displayName:"TotalQueryResults",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},frontText:{defaultValue:null,description:"",name:"frontText",required:!0,type:{name:"string"}},endText:{defaultValue:null,description:"",name:"endText",required:!1,type:{name:"string"}},applyChanges:{defaultValue:null,description:"",name:"applyChanges",required:!1,type:{name:"((newFacets: FacetColumnRequest[]) => void)"}},hideIfUnfiltered:{defaultValue:null,description:"",name:"hideIfUnfiltered",required:!1,type:{name:"boolean"}}}}}catch{}const Tc=2;function Pc(e,t){var a;return((a=e==null?void 0:e.facets)==null?void 0:a.filter(r=>r.facetType==="enumeration"&&(!(t!=null&&t.length)||t.indexOf(r.columnName)>-1)&&r.facetValues.length>0&&!Qb(r)))??[]}const kf=({facetsToPlot:e})=>{const{data:t,getLastQueryRequest:n,isLoadingNewBundle:a,executeQueryRequest:r,error:i,asyncJobStatus:o}=dt(),{topLevelControlsState:s}=ut(),[l,c]=$.useState([]),[u,d]=$.useState(!0),{showFacetVisualization:f,showFacetFilter:p}=s,h=n();$.useEffect(()=>{const P=Pc(t,e);P.length!==0&&u&&(c(P.map((q,O)=>({name:q.columnName,isHidden:O>=Tc,plotType:"PIE"}))),d(!1))},[t,u,e]);const v=P=>{c(q=>q.map((O,T)=>P?{...O,isHidden:!1}:{...O,isHidden:T>=Tc}))},g=P=>{h.query.selectedFacets=P,h.query.offset=0,r(h)},b=P=>l.find(T=>T.name===P&&T.isHidden===!0)!==void 0,E=$.useMemo(()=>l.find(P=>P.isHidden===!0)?"MORE":l.length<=Tc?"NONE":"LESS",[l]),y=P=>{S(P,"isHidden",!0)},_=(P,q)=>{S(P,"plotType",q)},w=P=>{var O;return((O=l.find(T=>T.name===P))==null?void 0:O.plotType)??"PIE"},S=(P,q,O)=>{c(T=>T.map(N=>N.name===P?{...N,[q]:O}:N))},C=Pc(t,e),x=Pc(t,e).map((P,q)=>({columnName:P.columnName,colorIndex:q})),I=(h==null?void 0:h.query.selectedFacets)!==void 0&&h.query.selectedFacets.length>0||(h==null?void 0:h.query.additionalFilters)!==void 0&&(h==null?void 0:h.query.additionalFilters.length)>0;return i?m(Q,{}):!t&&a?m("div",{className:"SRC-loadingContainer SRC-centerContentColumn",children:(o==null?void 0:o.progressMessage)&&L("div",{children:[m("span",{className:"spinner"}),o.progressMessage]})}):L(Q,{children:[m(vi,{frontText:"",endText:I?"filtered by":"",hideIfUnfiltered:!0}),C.length>0&&L("div",{className:`FacetNav ${f?"":"hidden"} ${p?ur:Yt} ${E==="LESS"?"less":""}`,children:[m("div",{className:"FacetNav__row",role:"list",children:C.map(P=>{var q;return m("div",{className:"col-sm-12 col-md-4",style:{display:b(P.columnName)?"none":"block"},children:m(ys,{index:(q=x.find(O=>O.columnName===P.columnName))==null?void 0:q.colorIndex,onHide:()=>y(P.columnName),plotType:w(P.columnName),onSetPlotType:O=>_(P.columnName,O),facetToPlot:P,applyChangesToFacetFilter:g,applyChangesToGraphSlice:(O,T,N)=>mi(h,O,g,T==null?void 0:T.value,N),isModalView:!1})},P.columnName)})}),E!=="NONE"&&m("div",{className:"FacetNav__showMoreContainer",children:m(da,{variant:"contained",color:"secondary",onClick:()=>v(E==="MORE"),sx:{width:"250px"},children:E==="LESS"?"Hide Charts":"View All Charts"})})]})]})};try{kf.displayName="FacetNav",kf.__docgenInfo={description:"",displayName:"FacetNav",props:{facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}}}}}catch{}var GH=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],By=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=String(t).toLowerCase(),i=String(a.getOptionValue(n)).toLowerCase(),o=String(a.getOptionLabel(n)).toLowerCase();return i===r||o===r},Rc={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,n,a,r){return!(!t||n.some(function(i){return By(t,i,r)})||a.some(function(i){return By(t,i,r)}))},getNewOptionData:function(t,n){return{label:n,value:t,__isNew__:!0}}};function YH(e){var t=e.allowCreateWhileLoading,n=t===void 0?!1:t,a=e.createOptionPosition,r=a===void 0?"last":a,i=e.formatCreateLabel,o=i===void 0?Rc.formatCreateLabel:i,s=e.isValidNewOption,l=s===void 0?Rc.isValidNewOption:s,c=e.getNewOptionData,u=c===void 0?Rc.getNewOptionData:c,d=e.onCreateOption,f=e.options,p=f===void 0?[]:f,h=e.onChange,v=kx(e,GH),g=v.getOptionValue,b=g===void 0?qx:g,E=v.getOptionLabel,y=E===void 0?Ox:E,_=v.inputValue,w=v.isLoading,S=v.isMulti,C=v.value,x=v.name,I=$.useMemo(function(){return l(_,Zh(C),p,{getOptionValue:b,getOptionLabel:y})?u(_,o(_)):void 0},[o,u,y,b,_,l,p,C]),P=$.useMemo(function(){return(n||!w)&&I?r==="first"?[I].concat(Al(p)):[].concat(Al(p),[I]):p},[n,r,w,I,p]),q=$.useCallback(function(O,T){if(T.action!=="select-option")return h(O,T);var N=Array.isArray(O)?O:[O];if(N[N.length-1]===I){if(d)d(_);else{var A=u(_,_),k={action:"create-option",name:x,option:A};h($x(S,[].concat(Al(Zh(C)),[A]),A),k)}return}h(O,T)},[u,_,S,x,I,d,h,C]);return Jh(Jh({},v),{},{options:P,onChange:q})}var KH=$.forwardRef(function(e,t){var n=Dx(e),a=YH(n);return $.createElement(Fx,We({ref:t},a))});const XH=KH,bs=({children:e,...t})=>m(Lx.Control,{...t,className:"form-control",children:e});function ws(e,t){if(e==null)return;const n=t.filter(a=>a.value===e);return n.length>0?n[0]:{value:e,label:e}}const Uy=e=>{const{id:t,options:n,value:a,required:r,disabled:i,readonly:o,multiple:s,autofocus:l,onChange:c,onBlur:u,onFocus:d,placeholder:f}=e,{enumOptions:p}=n;return m(XH,{className:"react-select-container",inputId:t,isMulti:s,placeholder:f,value:ws(a,p),"aria-required":r,isDisabled:i||o,autoFocus:l,onBlur:u&&(()=>u(t,a==null?void 0:a.value)),options:p,onFocus:d&&(()=>d(t,a==null?void 0:a.value)),onChange:h=>c(h==null?void 0:h.value),isClearable:!0,components:{Control:bs},formatCreateLabel:h=>`Set to custom value "${h}"`,styles:{control:h=>({...h,border:"unset",borderColor:"unset",boxShadow:"unset","&:hover":{}}),valueContainer:h=>({...h,padding:"0px"})}})};try{ws.displayName="findValueOption",ws.__docgenInfo={description:`react-select's value prop should be an EnumOption (see custom type defined above)

This function finds the enum option that has the corresponding value and returns it.

If value is nullish, this fn returns undefined. If there is no corresponding option, then a new object is returned
where the label and value are set to the provided value.`,displayName:"findValueOption",props:{}}}catch{}try{bs.displayName="Control",bs.__docgenInfo={description:"We want to apply the 'form-control' bootstrap class to react-select's Control component, and the easiest way to do that is to make a custom version",displayName:"Control",props:{}}}catch{}try{Uy.displayName="CustomSelectWidget",Uy.__docgenInfo={description:"Select widget compatible with react-jsonschema-form enumerations",displayName:"CustomSelectWidget",props:{}}}catch{}const $f=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:a}=e,r=dt(),{getLastQueryRequest:i,executeQueryRequest:o}=r,{getColumnDisplayName:s}=ut(),[l,c]=$.useState(t),[u,d]=$.useState(n),f=a.map(h=>({value:h,label:s(h)})),p=h=>{const v=i();let g="ASC";h===l&&(g=u==="ASC"?"DESC":"ASC");const b=h?[{column:h,direction:g}]:void 0;v.query.sort=b,o(v),c(h),d(g)};return L("div",{className:"QuerySortSelector bootstrap-4-backport",children:[m(xe,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),m(dx,{className:"react-select-container SRC-inlineBlock",value:ws(l,f),options:f,onChange:h=>p(h==null?void 0:h.value),components:{Control:bs},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{$f.displayName="QuerySortSelector",$f.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}var wr=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(wr||{});const zy=e=>{const t=en(e.sql),n=Rp(e.searchParams,e.sqlOperator),{sortConfig:a,columnAliases:r}=e,i=a?[{column:a.defaultColumn,direction:a.defaultDirection}]:void 0,o={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit??As,sort:i,additionalFilters:n},partMask:fa|pa|Rs|pb|Ts|Ps|bp|Sp};return m(cs,{...e,initQueryRequest:o,children:L(li,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:r,noContentPlaceholderType:e.noContentPlaceholderType??jr.STATIC,children:[a&&m($f,{sortConfig:a}),m(Es,{...e}),m(oi,{children:s=>m(mp,{error:s==null?void 0:s.error})})]})})};try{zy.displayName="CardContainerLogic",zy.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}}}}}catch{}const qf=({type:e,title:t,subTitle:n="",description:a,values:r,secondaryLabelLimit:i,isAlignToLeftNav:o,descriptionConfig:s,href:l,target:c,rgbIndex:u,icon:d})=>{const f=document.querySelector('meta[name="description"]'),[p]=$.useState(document.title),[h]=$.useState(f?f.getAttribute("content"):"");return $.useEffect(()=>(t&&document.title!==t&&(document.title=t),(a||n)&&(f==null||f.setAttribute("content",a||n)),function(){document.title=p,f==null||f.setAttribute("content",h)})),m("div",{className:`SRC-portalCard SRC-portalCardHeader ${o?"isAlignToLeftNav":""}`,children:m("div",{className:"container-fluid container-full-width",children:m("div",{className:"row",children:m("div",{className:"col-md-offset-1 col-md-10",children:L("div",{className:"SRC-portalCardMain",children:[d,L("div",{style:{width:"100%"},children:[L("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[m("div",{className:"SRC-type",children:e}),m("div",{children:m("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?m("a",{target:c,href:l,className:"highlight-link",children:t}):L("span",{children:[" ",t," "]})})}),n&&L("div",{className:"SRC-author",children:[" ",n," "]}),a&&m("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?m(_t,{markdown:a}):a})]}),m("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),m("div",{className:"SRC-cardContent",children:r&&m(qp,{isHeader:!0,secondaryLabelLimit:i,values:r})})]})]})})})})})};try{qf.displayName="HeaderCard",qf.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}}}catch{}const Of=e=>{var c;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:a=!1,displayValue:r}=e,{accessToken:i}=qe(),[o,s]=$.useState();$.useEffect(()=>{r===void 0&&(async()=>{const d={requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};s(await je.getFiles(d,i))})()},[i,r,t]);let l;return o&&(l=(c=o.requestedFiles[0].fileHandle)==null?void 0:c.fileName),L("button",{onClick:()=>{i&&t&&je.getActualFileHandleByIdURL(t.fileHandleId,i,t.associateObjectType,t.associateObjectId,a).then(u=>{window.open(u,"_blank")}).catch(u=>{console.error("Error on retrieving file handle url ",u)})},className:`SRC-primary-text-color ${wp}`,type:"button",style:{padding:0},children:[r??l??t.fileHandleId,n&&m($e,{icon:"download"})]})};try{Of.displayName="FileHandleLink",Of.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}}}catch{}const Df=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:a}}=e,{accessToken:r}=qe(),[i,o]=$.useState(),{ref:s,inView:l}=ha({triggerOnce:!0,rootMargin:"500px 0px"});return $.useEffect(()=>{(()=>{t&&n&&a&&l&&je.getActualFileHandleByIdURL(t,r,a,n,!1).then(u=>{o(u)}).catch(u=>{console.error("Error on retrieving file handle url ",u)})})()},[l,t,n,r,a]),m("span",{ref:s,children:i&&m("img",{src:i,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{Df.displayName="ImageFileHandle",Df.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}}}catch{}const Mh=400,ZH="SRC-short-description",JH="SRC-long-description",Ff=e=>{let t="";const n=e.split(" ");let a=0;for(;t.length<Mh&&a<n.length;)t+=`${n[a]} `,a+=1;return t=t.trim(),{previewText:t}},e8=(e,t,n)=>{let a;return e&&t&&(yb(e)?a={fileHandleId:t,associateObjectId:(e==null?void 0:e.id)??"",associateObjectType:ar.TableEntity}:n&&(a={fileHandleId:t,associateObjectId:n,associateObjectType:ar.FileEntity})),a},yn=({columnName:e,value:t,selectColumns:n,columnModels:a})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const r=(n==null?void 0:n.find(o=>o.name===e))||(a==null?void 0:a.find(o=>o.name===e));if(r==null?void 0:r.columnType.endsWith("_LIST")){let o=t,s;try{return s=JSON.parse(o),o=s.join(", "),{strList:s,str:o,columnModelType:r==null?void 0:r.columnType}}catch(l){console.error("Could not parse multivalue string ",o," caught err ",l)}}return{str:t,columnModelType:r==null?void 0:r.columnType}},t8=(e,t,n)=>(t==null?void 0:t.findIndex(a=>a.name===e))||(n==null?void 0:n.findIndex(a=>a.name===e)),Lf=e=>{const{synapseId:t,version:n}=e;return L("span",{children:[n,"Â Â ",m("a",{target:wr.NEW_WINDOW,rel:"noopener noreferrer",href:`${or.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},Ss=e=>{const{value:t,columnName:n,labelLink:a,selectColumns:r,columnModels:i,isHeader:o,className:s,rowData:l,rowId:c}=e;if(!t)return m("p",{children:t});const{strList:u,str:d,columnModelType:f}=yn({columnName:n,value:t,selectColumns:r,columnModels:i});if(!d)return m("p",{children:d});let p=s;const h={};if(o&&(p=s==null?void 0:s.concat(" ","SRC-lightLink")),f===ue.USERID_LIST&&u)return m("p",{children:u.map((g,b)=>L(B.Fragment,{children:[m(Zn,{ownerId:g,size:Ro,className:p}),b<u.length-1&&",Â Â "]},g))});if(f===ue.USERID&&d)return m(Zn,{ownerId:d,size:Ro,className:p});if(!a)return d.match(mb)?m("a",{target:wr.NEW_WINDOW,rel:"noopener noreferrer",href:`${or.PORTAL}#!Synapse:${d}`,className:p,children:d}):m("p",{children:d});let v;if(a.isMarkdown)u?v=m("p",{children:u.map((g,b)=>L(B.Fragment,{children:[m(_t,{renderInline:!0,markdown:g},g),b<u.length-1&&",Â Â "]},g))}):v=m(_t,{renderInline:!0,markdown:t});else{const g=u||d.split(",");let b;if("target"in a&&(b=a.target),"linkColumnName"in a){const E=t8(a.linkColumnName,r,i);if(E==null)console.warn(`Could not determine column index of ${a.linkColumnName}`),v=m(Q,{children:t});else{const y=l[E];cb(y)?v=m(Q,{children:t}):v=m("p",{children:g.map((_,w)=>L(B.Fragment,{children:[m("a",{href:y??void 0,target:b??wr.NEW_WINDOW,rel:"noopener noreferrer",className:p,style:h,children:_},_),w<g.length-1&&m("span",{style:{marginRight:4},children:", "})]},_))})}}else v=m("p",{children:g.map((E,y)=>{const{baseURL:_,URLColumnName:w,wrapValueWithParens:S}=a,C=a.overrideValueWithRowID?`syn${c}`:E,x=S?`(${C})`:C,I=`/${_}?${w}=${x}`;return L(B.Fragment,{children:[m("a",{href:I,className:p,style:h,target:b??wr.CURRENT_WINDOW,children:E},E),y<g.length-1&&m("span",{style:{marginRight:4},children:", "})]},E)})})}return a.tooltipText?m(wt,{title:a.tooltipText,enterNextDelay:300,children:m("span",{children:v})}):v};function r8(e,t,n,a){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:i,overrideLinkURLColumnName:o,overrideValueWithRowID:s}=e;if(o&&n[o]){const c=n[o],u=t[c];if(u)return u}const l=n[r];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${r}`);else{const c=s?`syn${a}`:t[l];if(c)return`/${e.baseURL}?${i}=${c}`}}}function Hy(e,t,n,a,r){e=e.trim();let i=e,o=wr.CURRENT_WINDOW;e.match(mb)?i=`${or.PORTAL}#!Synapse:${e}`:e.match(r1)?(o=wr.NEW_WINDOW,i=`https://dx.doi.org/${e}`):t?t&&(i=r8(t,n,a,r)??"",i.includes("/DetailsPage")&&(o=wr.NEW_WINDOW)):o=wr.NEW_WINDOW;const s=(t==null?void 0:t.target)??o;return{href:i,target:s}}function Vf(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:a,descriptionConfig:r}=e;let i=t;r!=null&&r.isMarkdown&&(i=m(_t,{markdown:i}));const o=n||(r==null?void 0:r.showFullDescriptionByDefault);return m("div",{className:o?"":"SRC-hidden",children:m("span",{"data-search-handle":a,className:`SRC-font-size-base ${JH}`,children:i})})}function Mf(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:a,descriptionConfig:r,toggleShowMore:i}=e;return r!=null&&r.showFullDescriptionByDefault?m(Q,{}):L("div",{className:n?"SRC-hidden":"",children:[m("span",{"data-search-handle":a,className:`SRC-font-size-base ${ZH} SRC-short-description`,children:Ff(t).previewText}),t.length>=Mh&&m("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:i,children:"...Show More"})]})}class _s extends B.Component{constructor(n){super(n);Le(this,"getCutoff",n=>{let a="";const r=n.split(" ");let i=0;for(;a.length<Mh&&i<r.length;)a+=`${r[i]} `,i+=1;return a=a.trim(),{previewText:a}});Le(this,"toggleShowMore",()=>{this.setState({hasClickedShowMore:!0})});Le(this,"renderTitle",({href:n,target:a,titleSearchHandle:r,title:i})=>n?m("a",{"data-search-handle":r,target:a,href:n,className:"highlight-link",children:i}):L("span",{"data-search-handle":r,children:[" ",i," "]}));this.state={hasClickedShowMore:!1}}render(){var Te;const{schema:n,data:a,rowId:r,genericCardSchema:i,secondaryLabelLimit:o,selectColumns:s,columnModels:l,iconOptions:c,useTypeColumnForIcon:u=!1,isHeader:d=!1,titleLinkConfig:f,ctaLinkConfig:p,labelLinkConfig:h,descriptionConfig:v,rgbIndex:g,columnIconOptions:b,queryContext:{entity:E},queryVisualizationContext:{getColumnDisplayName:y}}=this.props,_=i,{hasClickedShowMore:w}=this.state,{link:S="",type:C}=_,x=a[n[_.title]];let I=_.subTitle&&a[n[_.subTitle]];I=(_==null?void 0:_.subTitle)&&yn({value:I,columnName:_==null?void 0:_.subTitle,selectColumns:s,columnModels:l}).str;const P=a[n[_.description||""]],q=a[n[_.icon||""]],O=a[n[_.dataTypeIconNames||""]],T=a[n[_.imageFileHandleColumnName||""]],N=l==null?void 0:l.find(be=>_.link===be.name),A=N==null?void 0:N.columnType,k=a[n[S]]||"",{href:R,target:V}=Hy(k,f,a,n,r),F=[],{secondaryLabels:z=[]}=_,W=E&&!yb(E);for(let be=0;be<z.length;be+=1){const ae=z[be];let fe=a[n[ae]],we;if(fe){if(W&&ae==="currentVersion"){const Ge=a[n.id];fe=Lf({synapseId:Ge,version:fe}),we="Version"}else{const Ge=h==null?void 0:h.find(Pe=>Pe.matchColumnName===ae);fe=m(Ss,{value:fe,columnName:ae,labelLink:Ge,isHeader:d,selectColumns:s,columnModels:l,rowData:a}),we=y(ae)}const ie=[we,fe,ae];F.push(ie)}}const K=e8(E,T||k,a[n.id]),Y=F.length>0,X={marginTop:d?"0px":void 0,marginBottom:d?"0px":void 0,paddingBottom:Y||T?void 0:"15px"},J=L(Q,{children:[!u&&T&&m("div",{className:"SRC-imageThumbnail",style:{padding:_.thumbnailRequiresPadding?"21px":void 0},children:K&&m(Df,{fileHandleAssociation:K})}),!u&&!T&&m("div",{className:"SRC-cardThumbnail",children:m(Ms,{iconOptions:c,value:q,type:C})}),u&&m("div",{className:"SRC-cardThumbnail",children:m($e,{icon:d1[a[n.type]]})})]});if(d)return m(qf,{descriptionConfig:v,title:x,subTitle:I,description:P,type:C,icon:J,values:F,href:R,target:V,isAlignToLeftNav:!0,secondaryLabelLimit:o,rgbIndex:g});const ee=y(_.title),ce=y(_.subTitle),ve=y(_.description);let ne,de;if(p){const be=a[n[p.link]]||"",{href:ae,target:fe}=Hy(be,void 0,a,n,r);ne=ae,de=fe}return L("div",{style:X,className:"SRC-portalCard",children:[L("div",{className:"SRC-portalCardMain",children:[J,L("div",{className:"SRC-cardContent",children:[m("div",{className:"SRC-type",children:C}),((Te=b==null?void 0:b.columns)==null?void 0:Te.dataType)&&(O==null?void 0:O.length)&&m("div",{style:{marginTop:"20px"},children:m(Vx,{iconConfigs:b.columns.dataType,iconNames:JSON.parse(O),useBackground:!0,useTheme:!0})}),m("div",{children:m("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&A===ue.FILEHANDLEID&&K?m(Of,{fileHandleAssociation:K,showDownloadIcon:C!==ZC,displayValue:x}):this.renderTitle({href:R,target:V,titleSearchHandle:ee,title:x})})}),I&&m("div",{"data-search-handle":ce,className:"SRC-author",children:I}),P&&m(Mf,{description:P,hasClickedShowMore:w,descriptionSubTitle:ve,descriptionConfig:v,toggleShowMore:this.toggleShowMore}),P&&m(Vf,{description:P,hasClickedShowMore:w,descriptionSubTitle:ve,descriptionConfig:v}),p&&ne&&de&&m("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:m("a",{target:de,rel:"noopener noreferrer",href:ne,children:p.text})})]})]}),Y&&m(qp,{isHeader:!1,secondaryLabelLimit:o,values:F,columnIconOptions:b,className:`${T?"hasImage":"hasIcon"}`})]})}}Le(_s,"contextType",wi);try{Vf.displayName="LongDescription",Vf.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}}}catch{}try{Mf.displayName="ShortDescription",Mf.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}}}catch{}try{Ff.displayName="getCutoff",Ff.__docgenInfo={description:"",displayName:"getCutoff",props:{}}}catch{}try{yn.displayName="getValueOrMultiValue",yn.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}}}catch{}try{Lf.displayName="VersionLabel",Lf.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}}}catch{}try{Ss.displayName="SynapseCardLabel",Ss.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}}}catch{}try{_s.displayName="GenericCard",_s.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}}}catch{}class gi extends B.Component{constructor(n){super(n);Le(this,"handleLinkClick",n=>a=>{a.preventDefault(),window.open(`${or.PORTAL}#!Synapse:${n}`,"_blank")});this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:a,selectColumns:r,columnModels:i,genericCardSchema:o,queryVisualizationContext:{getColumnDisplayName:s}}=this.props,l=n[a.datasetName],c=n[a.summary],u=yn({columnName:"tumorType",value:n[a.tumorType],selectColumns:r,columnModels:i}).str,d=yn({columnName:"diseaseFocus",value:n[a.diseaseFocus],selectColumns:r,columnModels:i}).str,f=n[a.id],p=n[a.fundingAgency],h=n[a.fileCount],v=ub(n[a.fileSize]),g=[["FUNDER",yn({columnName:"fundingAgency",value:p,selectColumns:r,columnModels:i}).str],["SIZE",v],["FILES",h]];if(o&&o.secondaryLabels){const{secondaryLabels:b}=o;for(let E=0;E<b.length;E++){const y=b[E],_=n[a[y]];let w;if(_){w=s(y);const S=[w,_,y];g.push(S)}}}return L("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[L("div",{className:"SRC-cardThumbnail",children:[m(Ms,{type:hb}),m("div",{children:v})]}),L("div",{className:"SRC-cardContent SRC-dataset",children:[m("div",{className:"SRC-type",children:"Dataset "}),m("div",{children:m("h3",{children:m("a",{target:"_self",href:`${or.PORTAL}#!Synapse:${f}`,children:l})})}),L("div",{className:"SRC-description-dataset",children:[m("p",{className:"SRC-description-text",children:c}),m("div",{className:"SRC-cardAction bootstrap-4-backport",children:m(Mx,{className:"SRC-datasetButton",onClick:this.handleLinkClick(f),variant:"secondary",children:"Download Dataset"})})]}),m("div",{className:"SRC-cardAnnotations",children:m(bx,{chips:[u,d]})})]}),m(qp,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:g})]})}}try{gi.displayName="Dataset",gi.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}class Bf extends B.Component{constructor(n){super(n);Le(this,"handleLinkClick",n=>a=>{a.preventDefault(),window.open(n,"_blank")});this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:a}=this.props,r=n[a.organizationName],i=n[a.organizationPath],o=n[a.summary],s=n[a.website],l=n[a.logo];let c=s.replace("https://","");c=c.replace("http://",""),c.charAt(c.length-1)==="/"&&(c=c.substring(0,c.length-1));const u=window.location.hash.substring(1)===i,d={};let f;return u?d.paddingBottom="42px":f=m("div",{className:"SRC-marginAuto SRC-cardAction",children:m(da,{href:i,variant:"contained",color:"secondary",sx:{"&:hover":{color:"common.white"}},children:"View Funded Research"})}),L("div",{className:"SRC-portalCard SRC-typeFunder ",style:d,children:[L("div",{className:"SRC-cardContent",children:[m("div",{className:"SRC-type",children:"Organization"}),l&&m("div",{className:"SRC-cardThumbnail",children:m("img",{alt:"funder logo",className:"SRC-logo",src:l})}),m("div",{children:L("h3",{children:[u&&r,!u&&m("a",{href:i,children:r})]})}),m("div",{className:"SRC-website",children:m("a",{rel:"noopener noreferrer",target:"_blank",href:s,children:c})}),m("div",{className:"SRC-description",children:o})]}),f]})}}try{Bf.displayName="Funder",Bf.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}try{gi.displayName="Dataset",gi.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}}}catch{}const Uf=({data:e,schema:t})=>{const n=e[t.submitterName],a=e[t.submitterUserId],r=e[t.time],i=e[t.timeUnits],o=e[t.text],s=e[t.tag];return L("div",{className:"SRC-portalCard ObservationCard",children:[L("div",{className:"ObservationCard__submitter",children:[!a&&m("div",{children:n}),a&&m(Zn,{size:"SMALL USER CARD",ownerId:a})]}),r&&L("div",{className:"ObservationCard__time",children:[m($e,{icon:"time"}),L("span",{children:[`${r} ${i}`,Number(r)>1?"s":""]})]}),m("div",{className:"ObservationCard__text",children:m(wx,{summary:o})}),m("div",{className:"ObservationCard__tags",children:s&&m("span",{className:"SRC-tag",children:s})})]})},zf=()=>L("div",{className:"SRC-portalCard ObservationCard",children:[m("div",{className:"ObservationCard__submitter",children:m("span",{children:m(fn,{width:"100px"})})}),m("div",{className:"ObservationCard__time",children:m($e,{icon:"time"})}),m("div",{className:"ObservationCard__text",children:m(_p,{numCols:1,numRows:4})}),m("div",{className:"ObservationCard__tags",children:m(fn,{width:"80px"})})]});try{Uf.displayName="ObservationCard",Uf.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}}}catch{}try{zf.displayName="LoadingObservationCard",zf.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}}}catch{}function n8(e){const{propsToPass:t,type:n}=e;switch(n){case hb:return m(gi,{...t});case e1:return m(Bf,{...t});case JC:return m(_s,{...t});case Lc:return m(Uf,{...t});default:return m("div",{})}}const Es=e=>{const{isHeader:t=!1,unitDescription:n,type:a,isLoading:r,secondaryLabelLimit:i=3,title:o,...s}=e,l=AV(),{NoContentPlaceholder:c}=ut(),{data:u,appendNextPageToResults:d,hasNextPage:f}=l,p=ut(),h=u!=null&&u.queryResult.queryResults.tableId?[u==null?void 0:u.queryResult.queryResults.tableId]:[],v=Ma({ids:h,type:"ENTITY_HEADER"});if(u){if(u&&u.queryResult.queryResults.rows.length===0)return m(c,{})}else return L("div",{children:[r&&a===Lc&&m(zf,{}),r&&a!==Lc&&yp]});const g={};u.queryResult.queryResults.headers.forEach((y,_)=>{g[y.name]=_});const b=f&&m(et,{display:"flex",justifyContent:"flex-end",children:m(da,{variant:"contained",color:"secondary",size:"large",onClick:()=>{d()},children:"View More"})});let E;if(a===Qh){const y=u.queryResult.queryResults.headers.findIndex(w=>w.columnType===ue.USERID);if(y===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const _=u.queryResult.queryResults.rows.map(w=>w.values[y]);E=m(Bx,{data:u,list:_,size:Qh})}else{const y=u.queryResult.queryResults.rows;E=y.length?y.map((_,w)=>{const C={key:JSON.stringify(_.values),type:a,schema:g,isHeader:t,secondaryLabelLimit:i,rowId:_.rowId,data:_.values,selectColumns:u.selectColumns,columnModels:u.columnModels,tableEntityConcreteType:v[0]&&v[0].type,tableId:u==null?void 0:u.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:p,...s};return m(n8,{propsToPass:C,type:a},_.rowId??w)}):m(Q,{})}return L("div",{role:"list",children:[o&&m("h2",{className:"SRC-card-overview-title",children:o}),!o&&n&&m(vi,{frontText:"Displaying"}),E,b]})};try{Es.displayName="CardContainer",Es.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}}}catch{}var uC={exports:{}};(function(e,t){(function(a,r){e.exports=r()})(Gr,()=>(()=>{var n={887:o=>{o.exports=function(l){for(var c=5381,u=l.length;u;)c=33*c^l.charCodeAt(--u);return c>>>0}}},a={};function r(o){var s=a[o];if(s!==void 0)return s.exports;var l=a[o]={exports:{}};return n[o](l,l.exports,r),l.exports}r.n=o=>{var s=o&&o.__esModule?()=>o.default:()=>o;return r.d(s,{a:s}),s},r.d=(o,s)=>{for(var l in s)r.o(s,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:s[l]})},r.o=(o,s)=>Object.prototype.hasOwnProperty.call(o,s),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{default:()=>g});var o=r(887),s=r.n(o);function l(b){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},l(b)}function c(b,E){for(var y=0;y<E.length;y++){var _=E[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,p(_.key),_)}}function u(b,E,y){return E&&c(b.prototype,E),y&&c(b,y),Object.defineProperty(b,"prototype",{writable:!1}),b}function d(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function f(b,E,y){return(E=p(E))in b?Object.defineProperty(b,E,{value:y,enumerable:!0,configurable:!0,writable:!0}):b[E]=y,b}function p(b){var E=function(_,w){if(l(_)!=="object"||_===null)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var C=S.call(_,w||"default");if(l(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(_)}(b,"string");return l(E)==="symbol"?E:String(E)}var h,v=(h=0,function(){return h++}),g=u(function b(E){var y=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d(this,b),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(w){return y.init(w)}),f(this,"onResize",function(){var w=y.tb;if(w.classList.remove(y.RESIZABLE),w.opt.fixed){w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf();for(var S=0,C=0;C<w.columnCnt;C++)S+=w.columns[C].w;for(var x=0;x<w.columnCnt;x++)w.columns[x].style.width=Math.round(1e3*w.columns[x].w/S)/10+"%",w.columns[x].locked=!0,w.opt.currentWidths[x]=Number(window.getComputedStyle(w.columns[x]).width.replace(/px/,"")).valueOf()}else y.applyBounds(),w.opt.resizeMode==="flex"&&w.opt.serialize&&y.serializeStore();w.classList.add(y.RESIZABLE),y.syncGrips()}),f(this,"onGripMouseDown",function(w){var S=w.target.parentNode.data,C=y.tb,x=C.grips[S.i],I=w.touches;if(x.ox=I?I[0].pageX:w.pageX,x.l=x.offsetLeft,x.x=x.l,y.createStyle(document.querySelector("head"),"*{cursor:"+C.opt.dragCursor+"!important}"),document.addEventListener("touchmove",y.onGripDrag),document.addEventListener("mousemove",y.onGripDrag),document.addEventListener("touchend",y.onGripDragOver),document.addEventListener("mouseup",y.onGripDragOver),x.classList.add(C.opt.draggingClass),y.grip=x,C.columns[S.i].locked)for(var P,q=0;q<C.columnCnt;q++)(P=C.columns[q]).locked=!1,P.w=Number(window.getComputedStyle(P).width.replace(/px/,"")).valueOf();w.preventDefault()}),f(this,"onGripDrag",function(w){var S=y.grip;if(S){var C=S.t,x=w.touches,I=(x?x[0].pageX:w.pageX)-S.ox+S.l,P=C.opt.minWidth,q=S.i,O=1.5*C.cellSpace+P+C.borderSpace,T=q===C.columnCnt-1,N=q?C.grips[q-1].offsetLeft+C.cellSpace+P:O,A=C.opt.fixed?q===C.columnCnt-1?C.tableWidth-O:C.grips[q+1].offsetLeft-C.cellSpace-P:1/0;if(I=Math.max(N,Math.min(A,I)),S.x=I,S.style.left=I+y.PX,T&&(S.w=C.columns[q].w+I-S.l),C.opt.liveDrag){T?(C.columns[q].style.width=S.w+y.PX,!C.opt.fixed&&C.opt.overflow?C.style.minWidth=C.tableWidth+I-S.l+y.PX:C.tableWidth=Number(window.getComputedStyle(C).width.replace(/px/,"")).valueOf()):y.syncCols(C,q,!1,C.opt),y.syncGrips();var k=C.opt.onDrag;k&&k(w)}w.preventDefault()}}),f(this,"onGripDragOver",function(w){var S=y.grip;document.removeEventListener("touchend",y.onGripDragOver),document.removeEventListener("mouseup",y.onGripDragOver),document.removeEventListener("touchmove",y.onGripDrag),document.removeEventListener("mousemove",y.onGripDrag);var C=document.querySelector("head").lastChild;if(C.parentNode.removeChild(C),S){if(S.classList.remove(S.t.opt.draggingClass),S.x-S.l!=0){var x=S.t,I=x.opt.onResize,P=S.i;if(P===x.columnCnt-1){var q=x.columns[P];q.style.width=S.w+y.PX,q.w=S.w}else y.syncCols(x,P,!0,x.opt);x.opt.fixed||y.applyBounds(),y.syncGrips(),I&&I(w),x.opt.serialize&&y.serializeStore()}y.grip=null}}),f(this,"init",function(w){if(w.disable)return y.destroy();var S=y.tb,C=S.getAttribute(y.ID)||y.RESIZABLE+v();if(!S.matches("table")||S.extended&&!w.partialRefresh)return null;var x=document.querySelector("head");if(y.createStyle(x," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),w.hoverCursor&&w.hoverCursor!=="col-resize"){var I=".grip-handle .grip-resizable:hover{cursor:"+w.hoverCursor+"!important}";y.createStyle(x,I)}S.setAttribute(y.ID,C);var P=S.opt;S.opt=y.extendOptions(w);var q=y.getTableHeaders(S);if(y.extendTable(q),w.remoteTable&&w.remoteTable.matches("table")){var O=y.getTableHeaders(S.opt.remoteTable);q.length===O.length?y.extendRemoteTable(S.opt.remoteTable,O,S):console.warn("column count for remote table did not match")}return P}),f(this,"applyBounds",function(){var w=y.tb,S=w.columns.map(function(C){return window.getComputedStyle(C).width});w.style.width=window.getComputedStyle(w).width,w.tableWidth=Number(w.style.width.replace(/px/,"")).valueOf(),w.classList.remove(y.FLEX),w.columns.forEach(function(C,x){C.style.width=S[x];var I=Number(S[x].replace(/px/,"")).valueOf();C.w=I,w.opt.currentWidths[x]=I}),w.classList.add(y.FLEX)}),f(this,"serializeStore",function(){var w=y.store,S=y.tb;w[S.getAttribute(y.ID)]="";for(var C=0,x=0;x<S.columns.length;x++){var I=window.getComputedStyle(S.columns[x]).width.replace(/px/,"");w[S.getAttribute(y.ID)]+=I+";",C+=Number(I).valueOf()}w[S.getAttribute(y.ID)]+=C.toString(),S.opt.fixed||(w[S.getAttribute(y.ID)]+=";"+window.getComputedStyle(S).width.replace(/px/,""))}),f(this,"syncGrips",function(){var w=y.tb;w.gripContainer.style.width=w.tableWidth+y.PX;for(var S=0;S<w.columnCnt;S++){var C=w.columns[S],x=C.getBoundingClientRect(),I=w.getBoundingClientRect();w.grips[S].style.left=x.left-I.left+C.offsetWidth+w.cellSpace/2+y.PX,w.grips[S].style.height=(w.opt.headerOnly?w.columns[0].offsetHeight:w.offsetHeight)+y.PX}}),f(this,"destroy",function(){var w=y.tb,S=w.getAttribute(y.ID);return S?(y.store[S]="",w.classList.remove(y.RESIZABLE),w.classList.remove(y.FLEX),w.remote&&(w.remote.classList.remove(y.RESIZABLE),w.remote.classList.remove(y.FLEX)),w.gripContainer&&w.gripContainer.parentNode&&w.gripContainer.parentNode.removeChild(w.gripContainer),delete w.extended,w.opt):null}),f(this,"createStyle",function(w,S){var C=s()(S).toString(),x=w.querySelectorAll("style"),I=Array.from(x).filter(function(q){return q.gripid===C});if(!I.length){var P=document.createElement("style");P.type="text/css",P.gripid=C,P.styleSheet?P.styleSheet.cssText=S:P.appendChild(document.createTextNode(S)),w.appendChild(P)}}),f(this,"extendOptions",function(w){var S=Object.assign({},b.DEFAULTS,w);switch(S.fixed=!0,S.overflow=!1,S.resizeMode){case"flex":S.fixed=!1;break;case"overflow":S.fixed=!1,S.overflow=!0}return S}),f(this,"getTableHeaders",function(w){var S="#"+w.id,C=Array.from(w.querySelectorAll(S+">thead>tr:nth-of-type(1)>th"));return(C=C.concat(Array.from(w.querySelectorAll(S+">thead>tr:nth-of-type(1)>td")))).length||(C=(C=(C=(C=Array.from(w.querySelectorAll(S+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(w.querySelectorAll(S+">tr:nth-of-type(1)>th")))).concat(Array.from(w.querySelectorAll(S+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(w.querySelectorAll(S+">tr:nth-of-type(1)>td")))),y.filterInvisible(C,!1)}),f(this,"filterInvisible",function(w,S){return w.filter(function(C){var x=S?-1:C.offsetWidth,I=S?-1:C.offsetHeight;return!(x===0&&I===0||C.style&&C.style.display&&window.getComputedStyle(C).display==="none")})}),f(this,"extendTable",function(w){var S=y.tb;S.opt.removePadding&&S.classList.add("grip-padding"),S.classList.add(y.RESIZABLE),S.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),S.grips=[],S.columns=[],S.tableWidth=Number(window.getComputedStyle(S).width.replace(/px/,"")).valueOf(),S.gripContainer=S.previousElementSibling,S.opt.marginLeft&&(S.gripContainer.style.marginLeft=S.opt.marginLeft),S.opt.marginRight&&(S.gripContainer.style.marginRight=S.opt.marginRight),S.cellSpace=parseInt(y.legacyIE?S.cellSpacing||S.currentStyle.borderSpacing:window.getComputedStyle(S).borderSpacing.split(" ")[0].replace(/px/,""))||2,S.borderSpace=parseInt(y.legacyIE?S.border||S.currentStyle.borderLeftWidth:window.getComputedStyle(S).borderLeftWidth.replace(/px/,""))||1,S.extended=!0,y.createGrips(w)}),f(this,"extendRemoteTable",function(w,S,C){C.opt.removePadding&&w.classList.add("grip-padding"),w.classList.add(y.RESIZABLE),w.getAttribute(y.ID)||w.setAttribute(y.ID,C.getAttribute(y.ID)+"remote"),w.columns=[],S.forEach(function(I,P){var q=S[P];q.w=C.columns[P].w,q.style.width=q.w+y.PX,q.removeAttribute("width"),w.columns.push(q)}),w.tableWidth=C.tableWidth,w.cellSpace=C.cellSpace,w.borderSpace=C.borderSpace;var x=Array.from(w.querySelectorAll("col"));w.columnGrp=y.filterInvisible(x,!0),w.columnGrp.forEach(function(I,P){I.removeAttribute("width"),I.style.width=C.columnGrp[P].style.width}),C.remote=w}),f(this,"createGrips",function(w){var S=y.tb;S.columnGrp=y.filterInvisible(Array.from(S.querySelectorAll("col")),!0),S.columnGrp.forEach(function(I){I.removeAttribute("width")}),S.columnCnt=w.length;var C=!1;y.store[S.getAttribute(y.ID)]&&(y.deserializeStore(w),C=!0),w.forEach(function(I,P){var q=w[P],O=S.opt.disabledColumns.indexOf(P)!==-1;y.createDiv(S.gripContainer,"grip-handle");var T=S.gripContainer.lastChild;!O&&S.opt.gripInnerHtml&&(T.innerHTML=S.opt.gripInnerHtml),y.createDiv(T,y.RESIZABLE),P===S.columnCnt-1&&(T.classList.add("grip-lastgrip"),S.opt.fixed&&(T.innerHTML="")),T.addEventListener("touchstart",y.onGripMouseDown,{capture:!0,passive:!0}),T.addEventListener("mousedown",y.onGripMouseDown,!0),O?T.classList.add("grip-disabledgrip"):(T.classList.remove("grip-disabledgrip"),T.addEventListener("touchstart",y.onGripMouseDown,{capture:!0,passive:!0}),T.addEventListener("mousedown",y.onGripMouseDown,!0)),T.t=S,T.i=P,S.opt.widths[P]?q.w=S.opt.widths[P]:q.w=C?Number(q.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(q).width.replace(/px/,"")).valueOf(),S.opt.currentWidths[P]=q.w,q.style.width=q.w+y.PX,q.removeAttribute("width"),T.data={i:P,t:S.getAttribute(y.ID),last:P===S.columnCnt-1},S.grips.push(T),S.columns.push(q)});var x=Array.from(S.querySelectorAll("td"));x.concat(Array.from(S.querySelectorAll("th"))),(x=(x=x.filter(function(I){for(var P=0;P<w.length;P++)if(w[P]===I)return!1;return!0})).filter(function(I){return!(I.querySelectorAll("table th").length||I.querySelectorAll("table td").length)})).forEach(function(I){I.removeAttribute("width")}),S.opt.fixed||(S.removeAttribute("width"),S.classList.add(y.FLEX)),y.syncGrips()}),f(this,"deserializeStore",function(w){var S=y.tb;if(S.columnGrp.forEach(function(P){P.removeAttribute("width")}),S.opt.flush)y.store[S.getAttribute(y.ID)]="";else{var C=y.store[S.getAttribute(y.ID)].split(";"),x=C[S.columnCnt+1];!S.opt.fixed&&x&&(S.style.width=x+y.PX,S.opt.overflow&&(S.style.minWidth=x+y.PX,S.tableWidth=Number(x).valueOf()));for(var I=0;I<S.columnCnt;I++)w[I].style.width=C[I]+y.PX,S.columnGrp[I]&&(S.columnGrp[I].style.width=100*Number(C[I]).valueOf()/Number(C[S.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(w,S,C){var x=document.createElement("div");x.classList.add(S),C&&(x.innerHTML=C),w.appendChild(x)}),f(this,"syncCols",function(w,S,C,x){var I=w.remote,P=y.grip.x-y.grip.l,q=w.columns[S],O=w.columns[S+1];if(q&&O){var T=q.w+P,N=O.w-P,A=T+y.PX;if(q.style.width=A,w.columnGrp[S]&&w.columnGrp[S].style.width&&(w.columnGrp[S].style.width=A),I&&(I.columns[S].style.width=A,I.columnGrp[S]&&I.columnGrp[S].style.width&&(I.columnGrp[S].style.width=A)),x.fixed){var k=N+y.PX;O.style.width=k,w.columnGrp[S+1]&&w.columnGrp[S+1].style.width&&(w.columnGrp[S+1].style.width=k),I&&(I.columns[S+1].style.width=k,I.columnGrp[S+1]&&I.columnGrp[S+1].style.width&&(I.columnGrp[S+1].style.width=k))}else x.overflow&&(w.style.minWidth=w.tableWidth+P+y.PX);C&&(q.w=T,O.w=x.fixed?N:O.w,I&&(I.columns[S].w=T,I.columns[S+1].w=x.fixed?N:O.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=E,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(_)});g.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],currentWidths:[],serialize:!0,onDrag:null,onResize:null}})(),i})())})(uC);var a8=uC.exports;const i8=Et(a8),Hf=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:a}=qe(),r=!!a,{data:i}=Ci(t,n),{mutate:o}=J1({onSuccess:()=>{Yr(`${(i==null?void 0:i.name)??t} was successfully added to your Download Cart.`,"success")},onError:s=>{Yr(`Unable to add the file to your Download Cart. ${s.reason}`,"danger")}});return r?m(Q,{children:m(wt,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:m(Rt,{"data-testid":"AddToDownloadListV2",onClick:()=>{o({entityId:t,entityVersionNumber:n})},className:"ignoreLink",children:m($e,{icon:"addToCart"})})})}):m(Q,{})};try{Hf.displayName="AddToDownloadListV2",Hf.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var Wf={exports:{}};(function(e,t){(function(n,a){var r="1.0.33",i="",o="?",s="function",l="undefined",c="object",u="string",d="major",f="model",p="name",h="type",v="vendor",g="version",b="architecture",E="console",y="mobile",_="tablet",w="smarttv",S="wearable",C="embedded",x=350,I="Amazon",P="Apple",q="ASUS",O="BlackBerry",T="Browser",N="Chrome",A="Edge",k="Firefox",R="Google",V="Huawei",F="LG",z="Microsoft",W="Motorola",G="Opera",K="Samsung",Y="Sharp",X="Sony",J="Xiaomi",ee="Zebra",ce="Facebook",ve=function(Z,le){var pe={};for(var Ne in Z)le[Ne]&&le[Ne].length%2===0?pe[Ne]=le[Ne].concat(Z[Ne]):pe[Ne]=Z[Ne];return pe},ne=function(Z){for(var le={},pe=0;pe<Z.length;pe++)le[Z[pe].toUpperCase()]=Z[pe];return le},de=function(Z,le){return typeof Z===u?Te(le).indexOf(Te(Z))!==-1:!1},Te=function(Z){return Z.toLowerCase()},be=function(Z){return typeof Z===u?Z.replace(/[^\d\.]/g,i).split(".")[0]:a},ae=function(Z,le){if(typeof Z===u)return Z=Z.replace(/^\s\s*/,i),typeof le===l?Z:Z.substring(0,x)},fe=function(Z,le){for(var pe=0,Ne,he,qt,ye,Be,He;pe<le.length&&!Be;){var xt=le[pe],ft=le[pe+1];for(Ne=he=0;Ne<xt.length&&!Be;)if(Be=xt[Ne++].exec(Z),Be)for(qt=0;qt<ft.length;qt++)He=Be[++he],ye=ft[qt],typeof ye===c&&ye.length>0?ye.length===2?typeof ye[1]==s?this[ye[0]]=ye[1].call(this,He):this[ye[0]]=ye[1]:ye.length===3?typeof ye[1]===s&&!(ye[1].exec&&ye[1].test)?this[ye[0]]=He?ye[1].call(this,He,ye[2]):a:this[ye[0]]=He?He.replace(ye[1],ye[2]):a:ye.length===4&&(this[ye[0]]=He?ye[3].call(this,He.replace(ye[1],ye[2])):a):this[ye]=He||a;pe+=2}},we=function(Z,le){for(var pe in le)if(typeof le[pe]===c&&le[pe].length>0){for(var Ne=0;Ne<le[pe].length;Ne++)if(de(le[pe][Ne],Z))return pe===o?a:pe}else if(de(le[pe],Z))return pe===o?a:pe;return Z},ie={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ge={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Pe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,g],[/opios[\/ ]+([\w\.]+)/i],[g,[p,G+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[p,G]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[p,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+T],g],[/\bfocus\/([\w\.]+)/i],[g,[p,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[p,G+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[p,G+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[p,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[g,[p,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+T]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+T],g],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,ce],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[p,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,N+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[p,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[g,we,ie]],[/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[p,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,g],[/(cobalt)\/([\w\.]+)/i],[p,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,Te]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,i,Te]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,Te]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[v,K],[h,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[v,K],[h,y]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[v,P],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[v,P],[h,_]],[/(macintosh);/i],[f,[v,P]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[v,V],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[v,V],[h,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[v,J],[h,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[v,J],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[v,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[v,"Vivo"],[h,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[v,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[v,W],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[v,W],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[v,F],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[v,F],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[v,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[v,"Nokia"],[h,y]],[/(pixel c)\b/i],[f,[v,R],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[v,R],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[v,X],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[v,X],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[v,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[v,I],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[v,I],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[f,v,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[v,O],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[v,q],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[v,q],[h,y]],[/(nexus 9)/i],[f,[v,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[f,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[v,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[v,"Meizu"],[h,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[v,Y],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,f,[h,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,f,[h,_]],[/(surface duo)/i],[f,[v,z],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[v,"Fairphone"],[h,y]],[/(u304aa)/i],[f,[v,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[f,[v,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[f,[v,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[f,[v,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[f,[v,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[v,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[f,[v,"NuVision"],[h,_]],[/\b(k88) b/i],[f,[v,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[f,[v,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[f,[v,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[f,[v,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[f,[v,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],f,[h,_]],[/\b(ns-?\w{0,9}) b/i],[f,[v,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[v,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],f,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],f,[h,y]],[/\b(ph-1) /i],[f,[v,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[v,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[f,[v,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[f,[v,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[f,[v,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[v,f,[h,y]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,z],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[v,ee],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[v,ee],[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,f,[h,E]],[/droid.+; (shield) bui/i],[f,[v,"Nvidia"],[h,E]],[/(playstation [345portablevi]+)/i],[f,[v,X],[h,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[v,z],[h,E]],[/smart-tv.+(samsung)/i],[v,[h,w]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,K],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,F],[h,w]],[/(apple) ?tv/i],[v,[f,P+" TV"],[h,w]],[/crkey/i],[[f,N+"cast"],[v,R],[h,w]],[/droid.+aft(\w)( bui|\))/i],[f,[v,I],[h,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[v,Y],[h,w]],[/(bravia[\w ]+)( bui|\))/i],[f,[v,X],[h,w]],[/(mitv-\w{5}) bui/i],[f,[v,J],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[v,ae],[f,ae],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[v,f,[h,S]],[/droid.+; (glass) \d/i],[f,[v,R],[h,S]],[/droid.+; (wt63?0{2,3})\)/i],[f,[v,ee],[h,S]],[/(quest( 2)?)/i],[f,[v,ce],[h,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[h,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[p,A+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[g,we,Ge]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[g,we,Ge]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,g],[/\(bb(10);/i],[g,[p,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[p,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[p,N+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,g],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,g]]},Me=function(Z,le){if(typeof Z===c&&(le=Z,Z=a),!(this instanceof Me))return new Me(Z,le).getResult();var pe=Z||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:i),Ne=le?ve(Pe,le):Pe;return this.getBrowser=function(){var he={};return he[p]=a,he[g]=a,fe.call(he,pe,Ne.browser),he.major=be(he.version),he},this.getCPU=function(){var he={};return he[b]=a,fe.call(he,pe,Ne.cpu),he},this.getDevice=function(){var he={};return he[v]=a,he[f]=a,he[h]=a,fe.call(he,pe,Ne.device),he},this.getEngine=function(){var he={};return he[p]=a,he[g]=a,fe.call(he,pe,Ne.engine),he},this.getOS=function(){var he={};return he[p]=a,he[g]=a,fe.call(he,pe,Ne.os),he},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return pe},this.setUA=function(he){return pe=typeof he===u&&he.length>x?ae(he,x):he,this},this.setUA(pe),this};Me.VERSION=r,Me.BROWSER=ne([p,g,d]),Me.CPU=ne([b]),Me.DEVICE=ne([f,v,h,E,y,w,_,S,C]),Me.ENGINE=Me.OS=ne([p,g]),e.exports&&(t=e.exports=Me),t.UAParser=Me;var ot=typeof n!==l&&(n.jQuery||n.Zepto);if(ot&&!ot.ua){var Re=new Me;ot.ua=Re.getResult(),ot.ua.get=function(){return Re.getUA()},ot.ua.set=function(Z){Re.setUA(Z);var le=Re.getResult();for(var pe in le)ot.ua[pe]=le[pe]}}})(typeof window=="object"?window:Gr)})(Wf,Wf.exports);var o8=Wf.exports;const Cs=e=>{const{accessToken:t}=qe(),{associatedObjectId:n,entityVersionNumber:a,associatedObjectType:r,fileHandleId:i,displayFileName:o,onClickCallback:s}=e,{ref:l,inView:c}=ha(),[u,d]=$.useState(!1),[f,p]=$.useState(!1),[h,v]=$.useState(),[g,b]=$.useState(),[E,y]=$.useState("");let _=!0;$.useEffect(()=>(_&&c&&x(),()=>{_=!1}),[t,c]);const w=async()=>{let P;const O=new o8.UAParser().getBrowser().name=="Safari";let T=null;O&&(T=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),T.document.body.innerHTML="Downloading file on Safari...");try{r===ar.TableEntity?P=(await C(!0)).requestedFiles[0].preSignedURL:P=(await jh(h,t,!1,!0)).preSignedURL}catch(N){console.log("Fail to get file download link: ",N)}P?(O&&T?(T.location=P,setTimeout(()=>{T&&T.close()},1e4)):window.open(P),s&&s(u)):(T==null||T.close(),console.log("Fail to get file download link"))},S=P=>P&&!P.isPreview?(p(!0),!0):(p(!1),!1),C=(P=!1)=>hp({includeFileHandles:!0,includePreSignedURLs:P,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:r,fileHandleId:i}]},t),x=()=>Wa(t,n,a).then(async P=>{if(Object.hasOwn(P,"dataFileHandleId"))return v(P),jh(P,t,!0).then(q=>{const O=q.fileHandle;O&&S(O)&&BC(O)&&(d(!0),b(O.externalURL))}).catch(q=>{console.log("Error on getFileEntityFileHandle = ",q)});if(r===ar.TableEntity){const O=(await C()).requestedFiles[0].fileHandle;o&&O&&S(O)&&y(O.fileName)}return Promise.resolve()}).catch(P=>{console.log("Error on getEntity = ",P)});return m(wt,{title:u?"Navigate to external link":"Download this file individually",enterNextDelay:Ao,placement:"left",children:m("span",{ref:l,children:(()=>u?m("button",{className:"btn-download-icon",onClick:()=>{s&&s(u)},children:m("a",{className:"ignoreLink",rel:"noreferrer",href:g,target:"_blank",children:m($e,{icon:"openInNewWindow"})})}):f?L("button",{className:"btn-download-icon",onClick:()=>{w()},children:[m($e,{icon:"download"}),o&&E?E:""]}):m(Q,{}))()})})};try{Cs.displayName="DirectDownload",Cs.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}}}catch{}const s8={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function Wy(e){const{downloadType:t}=e,n=Jb();if(t){const a=s8[t];return m($e,{icon:a.icon,label:a.tooltipText,sx:{color:a.color(n),height:"16px",verticalAlign:"text-top"}})}return m(Q,{})}function jf(e,t){const[n,a]=B.useState(),{accessToken:r}=qe(),i=parseInt(t??""),{data:o,error:s}=bw(e,Number.isNaN(i)?void 0:i,{includeEntity:!0,includePermissions:!0}),l=B.useMemo(()=>({restrictableObjectType:db.ENTITY,objectId:e}),[e]),{data:c}=Kb(l),u=o==null?void 0:o.entity,d=o==null?void 0:o.permissions;return B.useEffect(()=>{c&&c.hasUnmetAccessRequirement?a("AccessBlockedByRestriction"):u&&(d!=null&&d.canDownload)?gp(u)&&u.dataFileHandleId?a("Accessible"):a("NoFileHandle"):d&&!d.canDownload&&a(r?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[r,u,s,d,c]),n}function Qf(e){const[t,n]=B.useState(!1),[a,r]=B.useState([]),{entityId:i,entityVersionNumber:o}=e,s=jf(i,o),{accessToken:l}=qe(),c=B.useMemo(()=>({restrictableObjectType:db.ENTITY,objectId:i}),[i]),{data:u}=Kb(c),d=()=>{je.getAllAccessRequirements(l,i).then(h=>{df(h)?window.open(`${o1(s1.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${i}&TYPE=ENTITY`,"_blank"):(r(h),n(!0))})},f=$.useMemo(()=>{if(!u)return m(Q,{});const h=u==null?void 0:u.hasUnmetAccessRequirement,v=u==null?void 0:u.restrictionLevel;let g="";if(h)g="Request Access";else{if($C.OPEN===v)return m(Q,{});g="View Terms"}return L(Q,{children:[m("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"top"},className:e.className,onClick:d,children:g}),t&&m(pi,{entityId:i,accessRequirementFromProps:a,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[i,u,a,t]);return s===void 0?m(Q,{}):L("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?m("button",{type:"button",className:wp,onClick:h=>{if(h.isTrusted){const v=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(v)}},children:m(Wy,{downloadType:s})}):m(Wy,{downloadType:s}),f]})}try{jf.displayName="useGetFileHandleDownloadType",jf.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}}}catch{}try{Qf.displayName="HasAccessV2",Qf.__docgenInfo={description:`HasAccess shows if the user has access to the file or not. If the user doesn't have access due to a restriction,
then a link will be shown that opens a modal with steps to request access.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Gf=e=>{const{accessToken:t}=qe(),{entityIdList:n}=e,[a,r]=$.useState([m(Q,{})]),{ref:i,inView:o}=ha();let s=!0;$.useEffect(()=>(o&&l(),()=>{s=!1}),[n,o]);const l=()=>{n.length&&qC(n,t).then(c=>{if(s){const u=c.results.map(d=>m("p",{children:m(Mc,{entity:d,displayTextField:"name"})},d.id));r(u)}}).catch(c=>{console.log("EntityIdList: Error getting entity headers",c)})};return m("span",{ref:i,children:a})};try{Gf.displayName="EntityIdList",Gf.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}}}catch{}const Yf=e=>{const{accessToken:t}=qe(),{evaluationId:n}=e,[a,r]=$.useState(),{ref:i,inView:o}=ha();let s=!0;$.useEffect(()=>(s&&o&&l(),()=>{s=!1}),[n,o]);const l=()=>{n&&OC(n,t).then(c=>{r(c.name)}).catch(c=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",c)})};return m("span",{ref:i,children:a})};try{Yf.displayName="EvaluationIdRenderer",Yf.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}const Kf=e=>{const{accessToken:t}=qe(),{userIds:n}=e,[a,r]=$.useState(),{ref:i,inView:o}=ha();let s=!0;$.useEffect(()=>(s&&o&&l(),()=>{s=!1}),[n,o]);const l=()=>{n.length&&DC(n,t).then(c=>{const u=c.list.map(d=>m(fb,{userProfile:d,className:"SRC-marginFifteen"},d.ownerId));r(u)}).catch(c=>{console.log("UserIdList: Error getting user profiles",c)})};return m("span",{ref:i,children:a})};try{Kf.displayName="UserIdList",Kf.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}}}catch{}const Xf=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:a,mapUserIdToHeader:r,columnLinkConfig:i,columnName:o,selectColumns:s,columnModels:l,rowData:c,rowId:u,rowVersionNumber:d})=>{const{entity:f}=dt();if(!t)return L("p",{className:"SRC-inactive",children:[" ",K1]});if(i)return m(Ss,{value:t,columnName:o,selectColumns:s,columnModels:l,isHeader:!1,labelLink:i,rowData:c,rowId:u});if(f&&(Bn(f)||Jn(f)||bb(f))&&(o==="id"||o==="name")&&u&&d){const p=`syn${u.toString()}`,h=a[p]??p;return m("p",{children:m(Mc,{entity:h,versionNumber:d,className:`${n}`,showIcon:!1,displayTextField:o})})}switch(e){case ue.ENTITYID:return m("p",{children:m(Mc,{entity:a[t]??t,className:`${n}`,displayTextField:"name"})});case ue.DATE_LIST:{const p=JSON.parse(t);return L("p",{children:[p.map((h,v)=>L("span",{className:n,children:[Qa(ir(Number(h))),v!==p.length-1?", ":""]},v))," "]})}case ue.BOOLEAN_LIST:{const p=JSON.parse(t);return m("p",{children:p.map((h,v)=>L("span",{className:n,children:[h?"true":"false",v!==p.length-1?", ":""]},v))})}case ue.FILEHANDLEID:return m(Q,{children:f&&m(Cs,{associatedObjectId:f.id,associatedObjectType:ar.TableEntity,fileHandleId:t,displayFileName:!0})});case ue.ENTITYID_LIST:{const p=JSON.parse(t);return m("p",{children:m(Gf,{entityIdList:p})})}case ue.USERID_LIST:{const p=JSON.parse(t);return m(Kf,{userIds:p})}case ue.STRING_LIST:case ue.INTEGER_LIST:{const p=JSON.parse(t);return m("p",{className:n,children:p.map((h,v)=>L(B.Fragment,{children:[h,v!==p.length-1?", ":""]},h))})}case ue.EVALUATIONID:return m(Yf,{evaluationId:t});case ue.DATE:return m("p",{className:n,children:Qa(ir(Number(t)))});case ue.USERID:if(Object.prototype.hasOwnProperty.call(r,t)){const{ownerId:p,userName:h}=r[t];if(r[t].isIndividual===!1){const v=h===Gh?"public":"people";return h===Gh?L("span",{children:[m($e,{icon:v})," All registered Synapse users"]}):L("a",{target:"_blank",rel:"noopener noreferrer",href:`${or.PORTAL}#!Team:${p}`,children:[m($e,{icon:v})," ",h]})}else return m(Zn,{userProfile:r[t],preSignedURL:r[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case ue.LINK:return m("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case ue.STRING:case ue.DOUBLE:case ue.INTEGER:case ue.BOOLEAN:case ue.MEDIUMTEXT:case ue.LARGETEXT:return m("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),m("p",{className:n,children:t})}return m("p",{className:n,children:t})};try{Xf.displayName="SynapseTableCell",Xf.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string | null"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}}}catch{}const jy=(e,...t)=>{var a;const n=[];return(a=e==null?void 0:e.selectColumns)==null||a.forEach((r,i)=>{t.includes(r.columnType)&&n.push(i)}),n},Qy=(e,t,n)=>{var r;const a=new Set;return(r=e.queryResult)==null||r.queryResults.rows.forEach(i=>{i.values.forEach((o,s)=>{o!=null&&n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,o)&&o&&a.add(o)})}),a},l8=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:a,currentPage:r}=RV(),i=e==null?void 0:e.queryCount,o=(l,c)=>{t(c)},s=l=>{const c=l.target.value;a(c)};return r==1&&i&&i<10?m(Q,{}):L("div",{children:[m(AN,{page:r,count:Math.ceil(i/n),color:"secondary",onChange:o,style:{display:"inline-block",float:"left"}}),m(xe,{variant:"body1",style:{display:"inline-block"},children:`${i==null?void 0:i.toLocaleString()} total rows /`}),L("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[m("option",{value:10,children:"10 per page"}),m("option",{value:25,children:"25 per page"}),m("option",{value:100,children:"100 per page"}),m("option",{value:500,children:"500 per page"})]})]})},Zf=e=>{const{onCopy:t}=e;return m(wt,{title:"Copy IDs to the clipboard",enterNextDelay:Ao,placement:"right",children:m("span",{children:m("button",{"data-testid":"copySynIdsButton",onClick:t,children:m("span",{style:{height:15,marginTop:-1},children:m($e,{icon:"contentCopy"})})})})})};try{Zf.displayName="InteractiveCopyIdsIcon",Zf.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}}}catch{}const u8=()=>{const e=qe(),t=dt(),[n,a]=B.useState(!1),[r,i]=B.useState(),[o,s]=B.useState();B.useEffect(()=>(o||s(new AbortController),()=>{o&&o.abort()}),[o]);const l=()=>{a(!0);const{getLastQueryRequest:c}=t,u=c(),{sql:d}=u.query,{entityId:f,versionNumber:p}=Mb(d),h=p?`.${p}`:"";u.partMask=fa;const v=`${f}${h}`,g=d.indexOf(v);u.query.sql=`select id from ${v}${d.substring(g+v.length)}`,lb(u,e.accessToken,o==null?void 0:o.signal).then(b=>{i(b)}).catch(b=>{console.error(b),Yr("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{a(!1)})};return B.useEffect(()=>{if(r){const{rows:c}=r.queryResult.queryResults,u=c.map(d=>`${d.values[0]}`).join(`
`);navigator.clipboard.writeText(u).then(()=>{Yr("Successfully copied to clipboard"),i(void 0)})}},[r]),n?m(Ns,{size:25}):m(Zf,{onCopy:()=>{l()}})};var bn=[],c8=function(){return bn.some(function(e){return e.activeTargets.length>0})},d8=function(){return bn.some(function(e){return e.skippedTargets.length>0})},Gy="ResizeObserver loop completed with undelivered notifications.",f8=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Gy}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Gy),window.dispatchEvent(e)},yi;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(yi||(yi={}));var wn=function(e){return Object.freeze(e)},p8=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,wn(this)}return e}(),cC=function(){function e(t,n,a,r){return this.x=t,this.y=n,this.width=a,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,wn(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,a=t.y,r=t.top,i=t.right,o=t.bottom,s=t.left,l=t.width,c=t.height;return{x:n,y:a,top:r,right:i,bottom:o,left:s,width:l,height:c}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Bh=function(e){return e instanceof SVGElement&&"getBBox"in e},dC=function(e){if(Bh(e)){var t=e.getBBox(),n=t.width,a=t.height;return!n&&!a}var r=e,i=r.offsetWidth,o=r.offsetHeight;return!(i||o||e.getClientRects().length)},Yy=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},h8=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ha=typeof window<"u"?window:{},vo=new WeakMap,Ky=/auto|scroll/,m8=/^tb|vertical/,v8=/msie|trident/i.test(Ha.navigator&&Ha.navigator.userAgent),Jt=function(e){return parseFloat(e||"0")},Xn=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new p8((n?t:e)||0,(n?e:t)||0)},Xy=wn({devicePixelContentBoxSize:Xn(),borderBoxSize:Xn(),contentBoxSize:Xn(),contentRect:new cC(0,0,0,0)}),fC=function(e,t){if(t===void 0&&(t=!1),vo.has(e)&&!t)return vo.get(e);if(dC(e))return vo.set(e,Xy),Xy;var n=getComputedStyle(e),a=Bh(e)&&e.ownerSVGElement&&e.getBBox(),r=!v8&&n.boxSizing==="border-box",i=m8.test(n.writingMode||""),o=!a&&Ky.test(n.overflowY||""),s=!a&&Ky.test(n.overflowX||""),l=a?0:Jt(n.paddingTop),c=a?0:Jt(n.paddingRight),u=a?0:Jt(n.paddingBottom),d=a?0:Jt(n.paddingLeft),f=a?0:Jt(n.borderTopWidth),p=a?0:Jt(n.borderRightWidth),h=a?0:Jt(n.borderBottomWidth),v=a?0:Jt(n.borderLeftWidth),g=d+c,b=l+u,E=v+p,y=f+h,_=s?e.offsetHeight-y-e.clientHeight:0,w=o?e.offsetWidth-E-e.clientWidth:0,S=r?g+E:0,C=r?b+y:0,x=a?a.width:Jt(n.width)-S-w,I=a?a.height:Jt(n.height)-C-_,P=x+g+w+E,q=I+b+_+y,O=wn({devicePixelContentBoxSize:Xn(Math.round(x*devicePixelRatio),Math.round(I*devicePixelRatio),i),borderBoxSize:Xn(P,q,i),contentBoxSize:Xn(x,I,i),contentRect:new cC(d,l,x,I)});return vo.set(e,O),O},pC=function(e,t,n){var a=fC(e,n),r=a.borderBoxSize,i=a.contentBoxSize,o=a.devicePixelContentBoxSize;switch(t){case yi.DEVICE_PIXEL_CONTENT_BOX:return o;case yi.BORDER_BOX:return r;default:return i}},g8=function(){function e(t){var n=fC(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=wn([n.borderBoxSize]),this.contentBoxSize=wn([n.contentBoxSize]),this.devicePixelContentBoxSize=wn([n.devicePixelContentBoxSize])}return e}(),hC=function(e){if(dC(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},y8=function(){var e=1/0,t=[];bn.forEach(function(o){if(o.activeTargets.length!==0){var s=[];o.activeTargets.forEach(function(c){var u=new g8(c.target),d=hC(c.target);s.push(u),c.lastReportedSize=pC(c.target,c.observedBox),d<e&&(e=d)}),t.push(function(){o.callback.call(o.observer,s,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var n=0,a=t;n<a.length;n++){var r=a[n];r()}return e},Zy=function(e){bn.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(hC(r.target)>e?n.activeTargets.push(r):n.skippedTargets.push(r))})})},b8=function(){var e=0;for(Zy(e);c8();)e=y8(),Zy(e);return d8()&&f8(),e>0},Ac,mC=[],w8=function(){return mC.splice(0).forEach(function(e){return e()})},S8=function(e){if(!Ac){var t=0,n=document.createTextNode(""),a={characterData:!0};new MutationObserver(function(){return w8()}).observe(n,a),Ac=function(){n.textContent="".concat(t?t--:t++)}}mC.push(e),Ac()},_8=function(e){S8(function(){requestAnimationFrame(e)})},Io=0,E8=function(){return!!Io},C8=250,x8={attributes:!0,characterData:!0,childList:!0,subtree:!0},Jy=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],eb=function(e){return e===void 0&&(e=0),Date.now()+e},kc=!1,N8=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=C8),!kc){kc=!0;var a=eb(t);_8(function(){var r=!1;try{r=b8()}finally{if(kc=!1,t=a-eb(),!E8())return;r?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,x8)};document.body?n():Ha.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Jy.forEach(function(n){return Ha.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Jy.forEach(function(n){return Ha.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),Jf=new N8,tb=function(e){!Io&&e>0&&Jf.start(),Io+=e,!Io&&Jf.stop()},I8=function(e){return!Bh(e)&&!h8(e)&&getComputedStyle(e).display==="inline"},T8=function(){function e(t,n){this.target=t,this.observedBox=n||yi.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=pC(this.target,this.observedBox,!0);return I8(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),P8=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),go=new WeakMap,rb=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},yo=function(){function e(){}return e.connect=function(t,n){var a=new P8(t,n);go.set(t,a)},e.observe=function(t,n,a){var r=go.get(t),i=r.observationTargets.length===0;rb(r.observationTargets,n)<0&&(i&&bn.push(r),r.observationTargets.push(new T8(n,a&&a.box)),tb(1),Jf.schedule())},e.unobserve=function(t,n){var a=go.get(t),r=rb(a.observationTargets,n),i=a.observationTargets.length===1;r>=0&&(i&&bn.splice(bn.indexOf(a),1),a.observationTargets.splice(r,1),tb(-1))},e.disconnect=function(t){var n=this,a=go.get(t);a.observationTargets.slice().forEach(function(r){return n.unobserve(t,r.target)}),a.activeTargets.splice(0,a.activeTargets.length)},e}(),R8=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");yo.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Yy(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");yo.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Yy(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");yo.unobserve(this,t)},e.prototype.disconnect=function(){yo.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const A8=B[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],k8=A8,$8=e=>{const t=$.useRef(e);return $.useEffect(()=>{t.current=e}),t},q8=$8,O8=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:R8;function D8(){}function F8(e,t){const n=V8(),a=q8(t);return k8(()=>{let r=!1;const i=e&&"current"in e?e.current:e;if(!i)return D8;function o(s,l){r||a.current(s,l)}return n.subscribe(i,o),()=>{r=!0,n.unsubscribe(i,o)}},[e,n,a]),n.observer}function L8(){let e=!1,t=[];const n=new Map,a=new O8((r,i)=>{t=t.concat(r);function o(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const c=n.get(t[l].target);c==null||c.forEach(u=>u(t[l],i))}t=[],e=!1}e||window.requestAnimationFrame(o),e=!0});return{observer:a,subscribe(r,i){var o;a.observe(r);const s=(o=n.get(r))!==null&&o!==void 0?o:[];s.push(i),n.set(r,s)},unsubscribe(r,i){var o;const s=(o=n.get(r))!==null&&o!==void 0?o:[];if(s.length===1){a.unobserve(r),n.delete(r);return}const l=s.indexOf(i);l!==-1&&s.splice(l,1),n.set(r,s)}}}let $c;const V8=()=>$c||($c=L8());function ep(e){const[t,n]=$.useState(!1),[a,r]=$.useState(!1),i=$.useRef(null);return F8(i,({target:o})=>{if(!t&&o){const s=o.getElementsByTagName("p")[0];s&&r(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),L("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:i,children:[a&&m("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:m($e,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600",height:"16px",verticalAlign:"top"}})}),e.children]})}try{ep.displayName="ExpandableTableDataCell",ep.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}}}catch{}const M8=["","DESC","ASC"],nb={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class xs extends B.Component{constructor(n){super(n);Le(this,"resizer");Le(this,"tableElement");Le(this,"renderTable",(n,a,r,i)=>{var b,E;const o=(E=(b=this.props.queryContext).getLastQueryRequest)==null?void 0:E.call(b),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:c,isRowSelectionVisible:u}=this.props,d=s&&(Bn(s)&&i1(s)||Jn(s)),f=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),p=!!this.props.synapseContext.accessToken,h=s&&d&&p&&this.allRowsHaveId(),v=!!(h&&!this.props.hideDownload),g=h&&c;return L("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[L("table",{ref:y=>this.tableElement=y,className:"table table-striped table-condensed",children:[m("thead",{className:"SRC_bordered",children:m("tr",{children:this.createTableHeader(n,a,r,f,g,v,u,o)})}),m("tbody",{children:this.createTableRows(i,n,f,g,v,u)})]}),m("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:m(l8,{})})]})});Le(this,"handleColumnSortPress",n=>a=>{let r=Mr(this.state.columnIconSortState);r.length===0&&(r=Array(this.getLengthOfPropsData()).fill(0));const i=Mr(this.state.sortedColumnSelection),o=this.findSelectionIndex(i,n.name);o!==-1&&i.splice(o,1),r[n.index]=(r[n.index]+1)%Xh.length,r[n.index]>0&&i.unshift({column:n.name,direction:M8[r[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=i,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:r,sortedColumnSelection:i})});Le(this,"applyChangesFromQueryFilter",n=>{const a=this.props.queryContext.getLastQueryRequest();a.query.selectedFacets=n,a.query.offset=0,this.props.queryContext.executeQueryRequest(a)});this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(n,a){const{isFetchingEntityHeaders:r,...i}=this.state,{isFetchingEntityHeaders:o,...s}=a,l=!zi(this.props,n),c=!zi(i,s),u=l||c;return u&&this.disableResize(),u}componentDidUpdate(n,a){zi(n.queryContext.data,this.props.queryContext.data)?n.queryContext.entity&&this.props.queryContext.entity&&!zi(Bn(n.queryContext.entity),Bn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(nb)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new i8(this.tableElement,nb))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(n){var f,p;const{data:a,entity:r}=this.props.queryContext;if(!a||!r)return;if(this.state.isFetchingEntityHeaders&&!n)return;const i=Mr(this.state.mapEntityIdToHeader),o=Mr(this.state.mapUserIdToHeader),s=jy(a,ue.ENTITYID),l=jy(a,ue.USERID),c=Qy(a,i,s);(this.isEntityViewOrDataset()||r&&bb(r))&&this.allRowsHaveId()&&(((p=(f=a.queryResult)==null?void 0:f.queryResults)==null?void 0:p.rows)??[]).forEach(v=>{const g=`syn${v.rowId}`;c.add(g)});const u=Qy(a,o,l);if(c.size===0&&u.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),c.size>0){const h=Array.from(c).map(v=>({targetId:v}));try{const v=await je.getEntityHeaders(h,this.props.synapseContext.accessToken),{results:g}=v;g.forEach(b=>{i[b.id]=b})}catch(v){console.error("Error on retrieving entity header list , ",v)}}const d=[];if(u.size>0){const h=Array.from(u);try{(await je.getGroupHeadersBatch(h,this.props.synapseContext.accessToken)).children.forEach(g=>{g.isIndividual?d.push(g.ownerId):o[g.ownerId]=g})}catch(v){console.error("Error on getGroupHeaders batch: ",v)}}if(d.length>0)try{(await zC(d)).list.forEach(v=>{o[v.ownerId]=v})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:i,mapUserIdToHeader:o,isFetchingEntityHeaders:!1})}render(){var g;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return yp;if(!this.props.queryContext.data)return m(Q,{});const{queryContext:{data:n},queryVisualizationContext:{NoContentPlaceholder:a}}=this.props,{queryResult:r,columnModels:i=[]}=n,{facets:o=[]}=n,{isExpanded:s,isExportTableDownloadOpen:l}=this.state,c=this.props.queryContext.getLastQueryRequest(),u="";if(!((((g=n.queryResult)==null?void 0:g.queryResults.rows.length)??0)>0)&&c.query.offset===0)return m(a,{});const{rows:f,headers:p}=r.queryResults,h=m("div",{children:this.renderTable(p,i,o,f)}),v=m(Q,{children:L("div",{className:u,children:[l&&m(sa,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:c}),m("div",{children:h})]})});return L(B.Fragment,{children:[s&&m(bi,{open:!0,onCancel:()=>this.setState({isExpanded:!1}),content:v,title:void 0,maxWidth:"xl",fullWidth:!0,sx:{".MuiDialogTitle-root":{padding:0},".MuiDialogContent-root":{border:"transparent"}}}),!s&&v]})}allRowsHaveId(){var a;const{queryContext:{data:n}}=this.props;return((a=n==null?void 0:n.queryResult)==null?void 0:a.queryResults.rows.every(r=>!!r.rowId))??!1}isEntityViewOrDataset(){const{queryContext:{entity:n}}=this.props;return(n&&(Bn(n)||Jn(n)))??!1}createTableRows(n,a,r,i,o,s){const l=[],{queryContext:{data:c},queryVisualizationContext:{columnsToShowInTable:u,selectedRows:d,setSelectedRows:f},columnLinks:p=[]}=this.props,{selectColumns:h=[],columnModels:v=[]}=c,{mapEntityIdToHeader:g,mapUserIdToHeader:b}=this.state;return n.forEach((E,y)=>{var I,P;const _=(I=E.versionNumber)==null?void 0:I.toString(),w=`syn${E.rowId}`,S=E.values.map((q,O)=>{const T=a[O].name,N=u.includes(T),A=p.find(V=>V.matchColumnName===T),R=this.findSelectionIndex(this.state.sortedColumnSelection,T)===-1?"":"SRC-boldText";return N?m(ep,{className:"SRC_noBorderTop",children:m(Xf,{columnType:a[O].columnType,columnValue:q,isBold:R,mapEntityIdToHeader:g,mapUserIdToHeader:b,columnLinkConfig:A,columnName:T,rowData:E.values,selectColumns:h,columnModels:v,rowId:E.rowId,rowVersionNumber:E.versionNumber})},`(${y}${q}${O})`):m("td",{className:"SRC-hidden"},`(${y},${O})`)});r&&S.unshift(m("td",{className:"SRC_noBorderTop",children:m(Qf,{entityId:w,entityVersionNumber:_},w)},w));const C=((P=g[w])==null?void 0:P.type)=="org.sagebionetworks.repo.model.FileEntity";i&&S.unshift(m("td",{className:"SRC_noBorderTop direct-download",children:C&&m(Cs,{associatedObjectId:w,entityVersionNumber:_})},`direct-download-${w}`)),o&&S.unshift(m("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:C&&m(Hf,{entityId:w,entityVersionNumber:parseInt(_)})},`add-to-download-list-v2-${w}`)),s&&d&&S.unshift(m("td",{className:"SRC_noBorderTop",children:m(hi,{label:"",checked:!!d.find(q=>q.rowId===E.rowId),onChange:q=>{const O=[...d];if(q)O.push(E);else{const T=O.indexOf(E);T>-1&&O.splice(T,1)}f(O)}})},`(${y},rowSelectColumn)`));const x=m("tr",{children:S},E.rowId??y);l.push(x)}),l}isSortableColumn(n){switch(n){case ue.USERID:case ue.ENTITYID:case ue.FILEHANDLEID:case ue.STRING_LIST:case ue.INTEGER_LIST:case ue.BOOLEAN_LIST:case ue.DATE_LIST:case ue.USERID_LIST:case ue.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(n,a,r,i,o,s,l,c){const{sortedColumnSelection:u,columnIconSortState:d}=this.state,{queryVisualizationContext:{getColumnDisplayName:f,columnsToShowInTable:p},queryContext:{lockedColumn:h}}=this.props,v=n.map((g,b)=>{var y;if(p.includes(g.name)){const _=this.findSelectionIndex(u,g.name)!==-1,w=d[b]===void 0?0:d[b],S=r.findIndex(k=>k.columnName===g.name),C=S!==-1&&r[S].facetType==="enumeration",x=r[S],I=_?"SRC-primary-background-color SRC-anchor-light":"",P=_?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",q=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${I}`,O=f(g.name),T=a.find(k=>k.name===g.name),N=g.name.toLowerCase()===((y=h==null?void 0:h.columnName)==null?void 0:y.toLowerCase()),A=T&&T.name=="id"&&T.columnType==ue.ENTITYID;return m("th",{children:L("div",{className:"SRC-split",children:[m("span",{style:{whiteSpace:"nowrap"},children:O}),L("div",{className:"SRC-centerContent",children:[C&&!N&&this.configureFacetDropdown(x,T,c),this.isSortableColumn(g.columnType)&&m("span",{role:"button","aria-label":"sort",tabIndex:0,className:q,onKeyPress:this.handleColumnSortPress({index:b,name:g.name}),onClick:this.handleColumnSortPress({index:b,name:g.name}),children:m(Ms,{type:Xh[w],cssClass:P})}),A&&m(u8,{})]})]})},g.name)}else return m("th",{className:"SRC-hidden"},g.name)});return i&&v.unshift(m("th",{children:m("div",{className:"SRC-centerContent",children:m("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),o&&v.unshift(m("th",{children:m("div",{className:"SRC-centerContent",children:"Â "})},"downloadColumn")),s&&v.unshift(m("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:m("div",{className:"SRC-centerContent",children:"Â "})},"addToV2DownloadListColumn")),l&&v.unshift(m("th",{children:m("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),v}findSelectionIndex(n,a){return n.length!==0?n.findIndex(r=>r.column===a):-1}advancedSearch(n){n&&n.preventDefault();const a=this.props.queryContext.getLastQueryRequest(),{query:r}=a,i=btoa(JSON.stringify(r)),o=a.entityId;window.open(`${or.PORTAL}#!Synapse:${o}/tables/query/${i}`,"_blank")}getLengthOfPropsData(){var a;const{data:n}=this.props.queryContext;return((a=n==null?void 0:n.queryResult)==null?void 0:a.queryResults.headers.length)??0}configureFacetDropdown(n,a,r){return m(la,{containerAs:"Dropdown",facetValues:n.facetValues,columnModel:a,onChange:i=>{vs(r,n,this.applyChangesFromQueryFilter,i)},onClear:()=>{mi(r,n,this.applyChangesFromQueryFilter)}})}}try{xs.displayName="SynapseTable",xs.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}}}catch{}function vC(){const{data:e}=dt(),{showLastUpdatedOn:t}=ut();return t&&e&&e.lastUpdatedOn?m("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:L(xe,{variant:"body1Italic",children:["Last updated on ",Qa(ir(e.lastUpdatedOn))]})}):m(Q,{})}const tp=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:a}=e,r=qe(),i=dt(),o=ut();return L("div",{className:`FilterAndView ${o.topLevelControlsState.showFacetFilter?ur:Yt}`,children:[t?m(xs,{...t,synapseContext:r,queryContext:i,queryVisualizationContext:o,hideDownload:a}):m(Q,{}),n?m(Es,{...n}):m(Q,{}),m(vC,{})]})};try{tp.displayName="FilterAndView",tp.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}}}catch{}const rp=e=>{const[t,n]=B.useState(!1),{searchParams:a,sql:r,sqlOperator:i,tableConfiguration:o,name:s,cardConfiguration:l,facetsToPlot:c,availableFacets:u,hideDownload:d,hideQueryCount:f,hideSqlEditorControl:p,searchConfiguration:h,limit:v=As,initQueryJson:g,showLastUpdatedOn:b,showExportToCavatica:E=!1,customControls:y}=e,_=Rp(a,i),w=g?JSON.parse(g):{sql:r,additionalFilters:_,limit:v,offset:0},S=en(w.sql),{data:C}=Ci(S),x=C&&wb(C)&&C.isSearchEnabled,I={entityId:S,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:fa|pa|Rs|pb|Ts|Ps|bp|Sp,query:w};return m("div",{className:"QueryWrapperPlotNav",children:m(o?us:cs,{...e,initQueryRequest:I,children:m(li,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||x,showLastUpdatedOn:b,noContentPlaceholderType:jr.INTERACTIVE,children:m(oi,{children:q=>{if(q===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const O=q==null?void 0:q.isFacetsAvailable;return m(Xo,{children:T=>{if(T===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");return L(Q,{children:[m("div",{className:`ErrorBannerWrapper ${Yt}`,children:m(vf,{})}),x?m(Zo,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):m(fs,{...h,queryContext:q,queryVisualizationContext:T}),m(ps,{}),m(Td,{getLastQueryRequest:q.getLastQueryRequest,topLevelControlsState:T.topLevelControlsState,setTopLevelControlsState:T.setTopLevelControlsState}),m(hs,{showColumnSelection:o!==void 0,name:s,hideDownload:d,hideQueryCount:f,hideFacetFilterControl:!O,hideVisualizationsControl:!O,hideSqlEditorControl:p,showExportToCavatica:E,customControls:y}),O&&m(Q,{children:m(qH,{availableFacets:u})}),m(kf,{facetsToPlot:c}),m(tp,{tableConfiguration:o,hideDownload:d,cardConfiguration:l}),t&&m(sa,{getLastQueryRequest:q.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})};try{rp.displayName="QueryWrapperPlotNav",rp.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},availableFacets:{defaultValue:null,description:"",name:"availableFacets",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"((benefactorId: string) => void)"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}}}catch{}const B8=e=>({partMask:Ps|pa|Rs|Ts|fa|Sp,entityId:en(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:As,offset:0}}),np=e=>{const{title:t,searchParams:n,sqlOperator:a,showAccessColumn:r,sql:i,hideDownload:o,hideQueryCount:s,name:l,showTopLevelControls:c=!1,searchConfiguration:u,unitDescription:d="Results",rgbIndex:f,showLastUpdatedOn:p,noContentPlaceholderType:h=c?jr.INTERACTIVE:jr.STATIC,...v}=e,g=B8(i);n&&(g.query.additionalFilters=Rp(n,a));const b=qe(),E=en(i),{data:y}=Ci(E);return m(us,{...v,initQueryRequest:g,children:m(li,{rgbIndex:f,unitDescription:d,showLastUpdatedOn:p,noContentPlaceholderType:h,...v,children:m(oi,{children:_=>{if(_===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return m(Xo,{children:w=>{if(w===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return L(Q,{children:[c&&m(hs,{showColumnSelection:!0,name:l,hideDownload:o,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),y&&wb(y)&&y.isSearchEnabled?m(Zo,{helpUrl:u==null?void 0:u.fullTextSearchHelpURL}):m(fs,{...u,queryContext:_,queryVisualizationContext:w}),m(ps,{}),c&&m(vi,{frontText:""}),m(xs,{synapseContext:b,queryContext:_,queryVisualizationContext:w,showAccessColumn:r,title:t,"data-testid":"SynapseTable",...v}),m(vC,{})]})}})}})})})};try{np.displayName="StandaloneQueryWrapper",np.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"EQUAL"'},{value:'"IN"'},{value:'"HAS"'},{value:'"HAS_LIKE"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},showExportToCavatica:{defaultValue:null,description:"",name:"showExportToCavatica",required:!1,type:{name:"boolean"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}}}}}catch{}function ap(e){const{query:t,showquery:n,tableonly:a}=e,r=n==="true",i=a==="true",o="Items";return i?m(np,{sql:t,name:o}):m(rp,{sql:t,hideSqlEditorControl:!r,name:o,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{ap.displayName="MarkdownSynapseTable",ap.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}}}catch{}const U8={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function ip(e){const{originalMarkup:t}=e,n=[],a=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let r="";return t.replace(a,(i,o,s,l)=>(r+=l,n.push(m("div",{children:m("a",{role:"link",className:`link ${U8[Number(o)]}`,"data-anchor":s,children:l})},l)),"")),m("div",{children:n},r)}try{ip.displayName="MarkdownTableOfContents",ip.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}function op(e){const{alias:t}=e,{data:n}=Hx([t]);return n?m(Wx,{principalId:n[0].ownerId}):m(Q,{})}try{op.displayName="MarkdownUserOrTeamBadge",op.__docgenInfo={description:"",displayName:"MarkdownUserOrTeamBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}}}catch{}function sp(e){return m(jx,{params:e})}try{sp.displayName="MarkdownVideo",sp.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}}}catch{}function lp(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:a}=e;switch(t){case"buttonlink":return m(zc,{...n});case"image":return m(xd,{...n});case"plot":return m(Nd,{...n});case"toc":return m(ip,{originalMarkup:a});case"badge":return m(op,{...n});case"iduReport":return m(Kc,{...n});case"video":case"vimeo":case"youtube":return m(sp,{...n});case"synapsetable":return m(ap,{...n});case"provenance":return m(Ed,{...n});case"preview":return m(Qc,{...n});default:return console.warn(`Unsupported widget: ${t}.`),m(Q,{})}}function ab(e){return m(sb,{children:m(lp,{...e})})}try{lp.displayName="MarkdownWidget",lp.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}}}catch{}class up extends B.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let a;const r=[];for(;a=n.exec(t);)r.push(a[1]);return r.map((i,o)=>{const s=o<r.length-1;return L(B.Fragment,{children:[L("button",{className:"SRC-markdown-bookmark",id:`bookmark${o}`,children:["[",o+1,"]"]}),m("span",{dangerouslySetInnerHTML:{__html:i}}),s&&m("br",{})]},o)})}render(){return L(B.Fragment,{children:[m("hr",{}),this.renderBookmarks()]})}}try{up.displayName="Bookmarks",up.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}}}catch{}const qc=markdownit({html:!0});class _t extends B.Component{constructor(n){super(n);Le(this,"markupRef");markdownitSynapse.init_markdown_it(qc,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const a="";qc.use(markdownitSynapse,a,"https://synapse.org").use(markdownitMath,a);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:qc,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=B.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(n){const a=n.target;if(a.tagName==="A"||a.tagName==="BUTTON"){const r=n.target;if(r.id.substring(0,3)==="ref"){n.preventDefault();const i=Number(n.currentTarget.id.substring(3)),o=this.markupRef.current.querySelector(`#bookmark${i}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}else if(n.currentTarget.id!==null&&r.getAttribute("data-anchor")){n.preventDefault();const i=r.getAttribute("data-anchor"),o=this.markupRef.current.querySelector(`#${i}`);try{o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}}}createHTML(n){if(!n)return{__html:""};const a=this.props.renderInline?this.state.md.renderInline(n):this.state.md.render(n);return{__html:gw(a,yw)}}processMath(){if(!this.markupRef.current)return;const n=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),a=new RegExp(/\\[()[\]]/,"g");n.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const i=r.textContent.replace(a,"");return katex.render(i,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const n=this.createHTML(markdownitSynapse.footnotes()).__html;if(n.length>0)return m(up,{footnotes:n})}async getWikiPageMarkdown(){const{ownerId:n,wikiId:a,objectType:r}=this.props;if(!(!n&&!a))try{const i=await je.getEntityWiki(this.context.accessToken,n,a,r);try{const o=await this.getWikiAttachments(a||i.id);this.setState({data:i,fileHandles:o,error:void 0})}catch(o){console.error("fileHandlesErr = ",o)}}catch(i){console.error(`Error on wiki markdown load
`,i),this.setState({error:i})}}async getWikiAttachments(n){const{ownerId:a,objectType:r}=this.props;if(!a){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await je.getWikiAttachmentsFromEntity(this.context.accessToken,a,n,r).then(i=>i).catch(i=>{console.error("Error on wiki attachment load ",i)})}addIdsToReferenceWidgets(n){const a=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return n.replace(a,()=>{const i=r;return r+=1,`<a href="" id="ref${i}">[${i}]</a>`})}addIdsToTocWidgets(n){const a="SRC-header-";let r=1;const i=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return n.replace(i,o=>{const s=r;return r+=1,`${o.substring(0,3)} id="${a}${s}"${o.substring(3)}`})}renderMarkdown(){let n=this.createHTML(this.state.data.markdown).__html;if(n=this.addIdsToReferenceWidgets(n),n=this.addIdsToTocWidgets(n),n.length>0){const r=new DOMParser().parseFromString(n,"text/html");return m(Q,{children:this.recursiveRender(r.body,n)})}}recursiveRender(n,a){if(n.nodeType===Node.TEXT_NODE)return m(Q,{children:n.textContent});if(n.nodeType===Node.ELEMENT_NODE&&n instanceof HTMLElement){const r=n.tagName.toLowerCase()==="body"?"span":n.tagName.toLowerCase(),i=n.getAttribute("data-widgetparams");if(i)return this.processHTMLWidgetMapping(i,a);const o=n.attributes,s={};for(let c=0;c<o.length;c++){let u="",d="";const f=o.item(c);f&&(u=f.name,d=f.value),u&&d&&(s[u]=d)}if(n.childNodes.length===0)return m(r,{...s});const l=Array.from(n.childNodes).map((c,u)=>m(B.Fragment,{children:this.recursiveRender(c,a)},u));switch(r){case"p":return m(xe,{variant:"body1",...s,component:r,children:l});case"span":return m(xe,{variant:"body1",...s,component:r,children:l});case"h1":return m(xe,{variant:"headline1",...s,component:r,children:l});case"h2":return m(xe,{variant:"headline2",...s,component:r,children:l});case"h3":return m(xe,{variant:"headline3",...s,component:r,children:l});case"ol":return m(xe,{variant:"body1",...s,component:r,children:l});case"ul":return m(xe,{variant:"body1",...s,component:r,children:l});case"a":return m(Rt,{...s,component:r,children:l});default:return m(r,{...s,children:l})}}}decodeXml(n){const a={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return n.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,i)=>a[i])}processHTMLWidgetMapping(n,a){const r=this.decodeXml(n),i=r.indexOf("?");if(i===-1)return m(ab,{widgetType:r,widgetParamsMapped:{},originalMarkup:a},JSON.stringify(r));const o=r.substring(0,i),s={};return r.substring(i+1).split("&").forEach(l=>{let[c,u]=l.split("=");u=decodeURIComponent(u),s[c]=u}),m(ab,{widgetType:o,widgetParamsMapped:s,originalMarkup:a},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(n){let a=this.props.ownerId!==n.ownerId;a=a||this.props.wikiId!==n.wikiId,a&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:n,loadingSkeletonRowCount:a}=this.props,{isLoading:r,error:i}=this.state,o={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(i)return m(mp,{error:i});const s=this.addBookmarks(),l=L(Cd,{wikiContext:o,children:[r&&m(Q,{children:a?m(_p,{numCols:1,numRows:a}):m("span",{className:"spinner"})}),this.renderMarkdown(),s&&m("div",{children:this.addBookmarks()})]});return n?m("span",{className:"markdown markdown-inline",ref:this.markupRef,children:l}):m("div",{className:"markdown",ref:this.markupRef,children:l})}}Le(_t,"contextType",wi);try{_t.displayName="MarkdownSynapse",_t.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}}}catch{}const cp=Vt(({className:e,...t})=>m(wt,{...t,classes:{popper:e}}))(({theme:e})=>({[`& .${Vc.tooltip}`]:{backgroundColor:e.palette.common.white,color:e.palette.grey[1e3],boxShadow:e.shadows[1],border:`1px solid ${e.palette.grey[500]}`},[`& .${Vc.arrow}`]:{"&:before":{boxShadow:e.shadows[1],border:`1px solid ${e.palette.grey[500]}`},color:e.palette.common.white}}));try{cp.displayName="LightTooltip",cp.__docgenInfo={description:"",displayName:"LightTooltip",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<unknown>"}}}}}catch{}const z8={display:"flex",justifyContent:"space-between",flexDirection:"row-reverse","> button":{flexGrow:1,maxWidth:"45%"}},dp=({children:e,contentProps:t,placement:n="bottom-start",showCloseButton:a=!0,actionButton:r,sx:i,maxWidth:o="500px",minWidth:s="300px"})=>{const[l,c]=$.useState(!1),u=L(et,{sx:{padding:"20px"},children:[m(xe,{variant:"body1",marginBottom:2,children:m(_t,{...t})}),L(et,{sx:z8,children:[r&&m(ht,{color:r.color||"primary",variant:r.variant||"contained",onClick:()=>{r.onClick(),r.closePopoverOnClick&&c(!1)},children:r.content}),a&&m(ht,{variant:"outlined",onClick:()=>c(!1),children:"Close"})]})]});return m(cp,{title:u,placement:n,onClick:()=>c(!l),open:l,sx:{...i,[`& .${Vc.tooltip}`]:{maxWidth:{maxWidth:o},minWidth:{minWidth:s}}},children:m(et,{role:"button",className:"PopoverContainer",sx:{display:"inline-block",cursor:"pointer"},children:e})})};try{dp.displayName="MarkdownPopover",dp.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},placement:{defaultValue:{value:"bottom-start"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:'{ content: ReactElement<any, string | JSXElementConstructor<any>>; color?: OverridableStringUnion<"info" | "warning" | "error" | "success" | "inherit" | "primary" | "secondary", ButtonPropsColorOverrides>; variant?: OverridableStringUnion<...>; onClick: () => void; closePopoverOnClick?: boole...'}},maxWidth:{defaultValue:{value:"500px"},description:"",name:"maxWidth",required:!1,type:{name:"string"}},minWidth:{defaultValue:{value:"300px"},description:"",name:"minWidth",required:!1,type:{name:"string"}}}}}catch{}const Nn=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:a=!0,className:r=""})=>m(Q,{children:m(dp,{contentProps:{markdown:e},placement:n,actionButton:t?{content:m(Q,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),color:"primary"}:void 0,showCloseButton:a,maxWidth:"350px",children:m(f1,{className:`HelpButton ${r}`})})});try{Nn.displayName="HelpPopover",Nn.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const H8="close",fp=({sx:e={color:"grey.700"},onClick:t})=>m(Vs,{sx:e,onClick:t,"aria-label":H8,children:m(rw,{})}),bi=({open:e,title:t,content:n,actions:a,className:r,onCancel:i,hasCloseButton:o=!0,titleHelpPopoverProps:s,maxWidth:l="sm",fullWidth:c=!0,sx:u})=>L(Xb,{fullWidth:c,maxWidth:l,open:e,className:r,onClose:()=>i(),sx:u,children:[m(Ga,{children:L(xi,{direction:"row",alignItems:"center",gap:"5px",children:[t,s&&m(Nn,{...s}),m(et,{sx:{flexGrow:1}}),o&&m(fp,{onClick:()=>i()})]})}),m(Ya,{children:n}),a&&m(kp,{children:a})]});try{fp.displayName="CloseButton",fp.__docgenInfo={description:"",displayName:"CloseButton",props:{sx:{defaultValue:{value:"{ color: 'grey.700' }"},description:"",name:"sx",required:!1,type:{name:"SxProps"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}}}catch{}try{bi.displayName="DialogBase",bi.__docgenInfo={description:"A dialog built using MUI components.",displayName:"DialogBase",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},hasCloseButton:{defaultValue:{value:"true"},description:"",name:"hasCloseButton",required:!1,type:{name:"boolean"}},titleHelpPopoverProps:{defaultValue:null,description:"",name:"titleHelpPopoverProps",required:!1,type:{name:"HelpPopoverProps"}},maxWidth:{defaultValue:{value:"sm"},description:"",name:"maxWidth",required:!1,type:{name:"false | Breakpoint"}},fullWidth:{defaultValue:{value:"true"},description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},sx:{defaultValue:{value:"{ color: 'grey.700' }"},description:"",name:"sx",required:!1,type:{name:"SxProps<Theme>"}}}}}catch{}const W8="Cancel",pp=e=>{const{confirmButtonText:t="OK",confirmButtonClassName:n,confirmButtonColor:a="primary",confirmButtonVariant:r="contained",confirmButtonDisabled:i=!1,onConfirm:o,onCancel:s,hasCancelButton:l=!0}=e;return L(Q,{children:[l&&m(ht,{variant:"outlined",onClick:()=>s(),children:W8}),m(ht,{variant:r,className:n,color:a,onClick:()=>o(),disabled:i,children:t})]})},ua=e=>{const{confirmButtonText:t,confirmButtonClassName:n,confirmButtonColor:a,confirmButtonVariant:r,onConfirm:i,onCancel:o,hasCancelButton:s,...l}=e;return m(bi,{onCancel:o,actions:m(pp,{confirmButtonText:t,confirmButtonClassName:n,confirmButtonColor:a,confirmButtonVariant:r,onConfirm:i,onCancel:o,hasCancelButton:s}),...l})};try{pp.displayName="ConfirmationButtons",pp.__docgenInfo={description:"",displayName:"ConfirmationButtons",props:{onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},confirmButtonText:{defaultValue:null,description:"",name:"confirmButtonText",required:!1,type:{name:"string"}},confirmButtonClassName:{defaultValue:null,description:"",name:"confirmButtonClassName",required:!1,type:{name:"string"}},confirmButtonColor:{defaultValue:null,description:"",name:"confirmButtonColor",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"error"'},{value:'"success"'},{value:'"inherit"'},{value:'"primary"'},{value:'"secondary"'}]}},confirmButtonVariant:{defaultValue:null,description:"",name:"confirmButtonVariant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"outlined"'},{value:'"contained"'}]}},confirmButtonDisabled:{defaultValue:null,description:"",name:"confirmButtonDisabled",required:!1,type:{name:"boolean"}},hasCancelButton:{defaultValue:null,description:"",name:"hasCancelButton",required:!1,type:{name:"boolean"}}}}}catch{}try{ua.displayName="ConfirmationDialog",ua.__docgenInfo={description:"A confirmation dialog built using MUI components.",displayName:"ConfirmationDialog",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},hasCloseButton:{defaultValue:null,description:"",name:"hasCloseButton",required:!1,type:{name:"boolean"}},titleHelpPopoverProps:{defaultValue:null,description:"",name:"titleHelpPopoverProps",required:!1,type:{name:"HelpPopoverProps"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"false | Breakpoint"}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps<Theme>"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},confirmButtonText:{defaultValue:null,description:"",name:"confirmButtonText",required:!1,type:{name:"string"}},confirmButtonClassName:{defaultValue:null,description:"",name:"confirmButtonClassName",required:!1,type:{name:"string"}},confirmButtonColor:{defaultValue:null,description:"",name:"confirmButtonColor",required:!1,type:{name:"enum",value:[{value:'"info"'},{value:'"warning"'},{value:'"error"'},{value:'"success"'},{value:'"inherit"'},{value:'"primary"'},{value:'"secondary"'}]}},confirmButtonVariant:{defaultValue:null,description:"",name:"confirmButtonVariant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"outlined"'},{value:'"contained"'}]}},confirmButtonDisabled:{defaultValue:null,description:"",name:"confirmButtonDisabled",required:!1,type:{name:"boolean"}},hasCancelButton:{defaultValue:null,description:"",name:"hasCancelButton",required:!1,type:{name:"boolean"}}}}}catch{}export{pi as A,vf as B,ua as C,bi as D,pf as E,Af as F,rN as G,Nn as H,Zf as I,Nf as J,xf as K,ff as L,dp as M,sa as N,Df as O,yf as P,us as Q,Hy as R,uf as S,e8 as T,_d as U,rp as V,IV as W,Of as X,np as Y,aC as Z,DW as _,hi as a,zy as b,_t as c,$W as d,UU as e,pB as f,OW as g,qW as h,A4 as i,Uy as j,pp as k,Cs as l,hf as m,zU as n,gf as o,W$ as p,U$ as q,PV as r,Qf as s,dt as t,bw as u,ut as v,Pc as w,VH as x,BH as y,li as z};
//# sourceMappingURL=ConfirmationDialog-d59b989c.js.map
