import{j as W}from"./jsx-runtime-D_zvdyIk.js";import{l as fe,S as z}from"./useFiles-Ytdky5Hv.js";import"./VerificationSubmission-OWkqLMYZ.js";import"./StringUtils-C5rFena9.js";import{k as ce}from"./useAccessRequirements-JheSe-15.js";import{_ as Se}from"./createTheme-D72DCvX0.js";import{r as t}from"./index-tft_hvVL.js";import{_ as me,a as o,h as ge,b as C,u as ve,S as he}from"./Select-aab027f3.esm-C_MhEKNR.js";import{_ as Oe}from"./defineProperty-CegpTSss.js";import"./index-DccWBQxT.js";import{u as _e}from"./useTheme-DBbQI9Bm.js";import{S as ye}from"./Skeleton-CpyiCVdu.js";var Ie=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Ce(a){var r=a.defaultOptions,e=r===void 0?!1:r,l=a.cacheOptions,f=l===void 0?!1:l,S=a.loadOptions;a.options;var m=a.isLoading,p=m===void 0?!1:m,_=a.onInputChange,y=a.filterOption,s=y===void 0?null:y,g=me(a,Ie),i=g.inputValue,d=t.useRef(void 0),u=t.useRef(!1),H=t.useState(Array.isArray(e)?e:void 0),P=o(H,2),J=P[0],E=P[1],K=t.useState(typeof i<"u"?i:""),$=o(K,2),j=$[0],A=$[1],Q=t.useState(e===!0),w=o(Q,2),U=w[0],v=w[1],X=t.useState(void 0),B=o(X,2),L=B[0],x=B[1],Y=t.useState([]),D=o(Y,2),Z=D[0],V=D[1],ee=t.useState(!1),k=o(ee,2),te=k[0],I=k[1],ae=t.useState({}),N=o(ae,2),h=N[0],T=N[1],ne=t.useState(void 0),M=o(ne,2),se=M[0],re=M[1],ie=t.useState(void 0),G=o(ie,2),ue=G[0],oe=G[1];f!==ue&&(T({}),oe(f)),e!==se&&(E(Array.isArray(e)?e:void 0),re(e)),t.useEffect(function(){return u.current=!0,function(){u.current=!1}},[]);var R=t.useCallback(function(O,c){if(!S)return c();var n=S(O,c);n&&typeof n.then=="function"&&n.then(c,function(){return c()})},[S]);t.useEffect(function(){e===!0&&R(j,function(O){u.current&&(E(O||[]),v(!!d.current))})},[]);var pe=t.useCallback(function(O,c){var n=ge(O,c,_);if(!n){d.current=void 0,A(""),x(""),V([]),v(!1),I(!1);return}if(f&&h[n])A(n),x(n),V(h[n]),v(!1),I(!1);else{var le=d.current={};A(n),v(!0),I(!L),R(n,function(b){u&&le===d.current&&(d.current=void 0,v(!1),x(n),V(b||[]),I(!1),T(b?C(C({},h),{},Oe({},n,b)):h))})}},[f,R,L,h,_]),de=te?[]:j&&L?Z:J||[];return C(C({},g),{},{options:de,isLoading:U||p,onInputChange:pe,filterOption:s})}var Ae=t.forwardRef(function(a,r){var e=Ce(a),l=ve(e);return t.createElement(he,Se({ref:r},l))}),Le=Ae;function q(a,r){return a.toString()===r?r:`${r} (${a})`}function F(a){const{inputId:r,initialId:e,onChange:l,placeholder:f}=a,{palette:S}=_e(),{accessToken:m}=fe(),{data:p,isLoading:_}=ce(e,{enabled:!!e});async function y(s){var d;const g=parseInt(s);let i;return g&&(i=[await z.getAccessRequirementById(m,g)]),i||(i=(d=await z.searchAccessRequirements(m,{nameContains:s}))==null?void 0:d.results),(i==null?void 0:i.map(u=>({id:u.id.toString(),value:u.id.toString(),label:q(u.id,u.name)})))??[]}return e&&_?W.jsx(ye,{width:"100%"}):W.jsx(Le,{className:"AsyncSelect",defaultInputValue:e?q(e,(p==null?void 0:p.name)??e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:q(e,(p==null?void 0:p.name)??e.toString())}]:!0,inputId:r,cacheOptions:!0,isClearable:!0,styles:{control:s=>({...s,backgroundColor:S.grey[200]}),input:s=>({...s,input:{gridArea:"1 / 2 / 4 / 4 !important"}})},loadOptions:y,onChange:s=>{l(s==null?void 0:s.id.toString())},placeholder:f})}try{F.displayName="AccessRequirementSearchBox",F.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch{}export{F as A};
