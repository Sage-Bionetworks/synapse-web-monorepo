import{j as e}from"./jsx-runtime-DoxjgJx5.js";import{r as x}from"./index-Cu9bd8lq.js";import{F as T}from"./index-BNbykmw2.js";import{l as w,o as D,aP as d,q as V,n as F}from"./useFiles-CtkjCMBr.js";import{q as U,f as A}from"./SynapseConstants-3hrLcQnJ.js";import"./RegularExpressions-vjpKT7U4.js";import{u as H}from"./useShowDesktop-DERV4Q_E.js";import"./OrientationBanner-CHSjXMjA.js";import{E as O}from"./ExpandableContent-x69HLyDO.js";import{Q as S}from"./QueryCount-ao05706k.js";import{B as I}from"./Button-CnDFdqMc.js";function g({link:n,summary:a,countSql:o,title:r}){const c=e.jsxs("div",{className:"Goals__Mobile__Header",children:[o&&e.jsx("span",{className:"Goals__Mobile__Header__Count",children:e.jsx(S,{parens:!1,query:{sql:o}})}),e.jsxs("span",{className:"Goals__Mobile__Header__Title",children:[" ",r," "]})]}),m=e.jsxs("div",{className:"Goals__Mobile__Content",children:[e.jsx("p",{children:a}),e.jsx(I,{variant:"contained",color:"secondary",className:"Goals__Mobile__Content__Link",href:n,children:"Explore"})]});return e.jsx(O,{title:c,content:m})}try{g.displayName="GoalsMobile",g.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}function q({asset:n,link:a,summary:o,countSql:r,title:c}){return e.jsxs("div",{className:"Goals__Card",style:{cursor:"pointer"},onClick:()=>window.open(a),children:[e.jsx("div",{className:"Goals__Card__header",style:{background:`url('${n}')`},children:e.jsxs("p",{children:[e.jsxs("span",{className:"Goals__Card__header__title",children:[" ",c," "]}),r&&e.jsx("span",{className:"Goals__Card__header__count",children:e.jsx(S,{parens:!1,query:{sql:r}})})]})}),e.jsxs("div",{className:"Goals__Card__summary",children:[e.jsxs("p",{children:[" ",o," "]}),e.jsx(I,{className:"Goals__Card__summary__link",variant:"contained",color:"secondary",href:a,children:"Explore"})]})]})}try{q.displayName="GoalsDesktop",q.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}const P=1200,N=n=>{const{entityId:a}=n,{accessToken:o}=w(),[r,c]=x.useState(),[m,h]=x.useState(),j=H(P),b={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:a,partMask:U|A,query:{sql:`select * from ${a} order by ItemOrder`}},{data:s}=D(b);x.useEffect(()=>{(async()=>{try{const i=d("Asset",s),u=((s==null?void 0:s.queryResult.queryResults.rows.map(t=>t.values[i]))??[]).filter(t=>t!=null&&t!==void 0);if(u.length===0)return;const y={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:u.map(t=>({associateObjectId:a,associateObjectType:T.TableEntity,fileHandleId:t}))},f=await F(y,o);h(void 0),c(f.requestedFiles.filter(t=>t.preSignedURL!==void 0).map(t=>t.preSignedURL))}catch(i){console.error("Error on get data",i),h(i)}})()},[a,o,s]);const G=d("TableId",s),_=d("CountSql",s),k=d("Title",s),v=d("Summary",s),R=d("Link",s);return e.jsxs("div",{className:`Goals${j?"__Desktop":""}`,children:[m&&e.jsx(V,{error:m}),s==null?void 0:s.queryResult.queryResults.rows.map((C,i)=>{const l=C.values;l.some(M=>M===null)&&console.warn("Row has null value(s) when no nulls expected");const u=G>-1?l[G]:void 0;let p;_>-1&&l[_]?p=l[_]:u&&(p=`SELECT * FROM ${u}`);const y=l[k],f=l[v],t=l[R],L=(r==null?void 0:r[i])??"",E={countSql:p,title:y,summary:f,link:t,asset:L};return j?e.jsx(q,{...E}):e.jsx(g,{...E})})]})};try{N.displayName="Goals",N.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}export{N as G};
