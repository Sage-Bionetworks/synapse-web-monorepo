import{j as y}from"./jsx-runtime-MbANjM5d.js";import{g as W}from"./VerificationSubmission-dxY1kvC5.js";import{al as Ee,aW as J,bN as Se,bO as Ne,l as Pe,bP as De,bQ as _e,bR as ce,bS as de,bT as ve,bU as Ae,bV as ke}from"./useFiles-r0U6RSjO.js";import{t as Oe,F as Ue,C as ze,U as Me,H as Le,k as Qe}from"./SynapseConstants-Ddv_sASQ.js";import{r as u}from"./index-Stft8yAF.js";import{N as me,O as ye,z as fe}from"./StringUtils-lE31obNl.js";import"./OrientationBanner-Csl-2pZk.js";import{u as je}from"./unCamelCase-ZiU_emRy.js";import{u as z}from"./useQuery-BLYr3XUa.js";import{b as Re,a as Be,u as Ke}from"./use-deep-compare-effect.esm-w8Uj6Pc0.js";import{u as ue,a as We}from"./QueryContext-9hVDICbD.js";import{N as He}from"./NoSearchResults-C0At0JFx.js";import{s as Je}from"./NoData-lCqQ6iMD.js";import{p as Ye,b as Ge}from"./SqlFunctions-BxcEiHsR.js";import{c as h}from"./cloneDeep-UBC5IJiv.js";import{i as V}from"./isEqual-CpPaJiLx.js";import{u as $e}from"./index-CAWyqUR9.js";import{n as Ze}from"./noop-DX6rZLP_.js";import{C as Xe}from"./ConfirmationDialog-CHky1hm3.js";import{o as et}from"./omit-BANb5VpN.js";import{c as tt,a as nt,i as rt,r as st,s as at}from"./TableRowSelectionState-kd_XE69q.js";import{u as ot}from"./useEntity-CbDF_L-F.js";import{c as ut}from"./SynapseTableUtils-v7YBEWei.js";import{P as it,c as ee}from"./react-Ty8OjFhT.js";function pe(e,n){return t=>{typeof t=="function"?e(s=>{const o=t(s);return o&&n(!1),o}):t?(e(!0),n(!1)):e(!1)}}function lt(e,n){const[t,s]=u.useState(e),[o,r]=u.useState(n),i=u.useMemo(()=>pe(s,r),[]),l=u.useMemo(()=>pe(r,s),[]);return[t,i,o,l]}function he(e){const{queryMetadataQueryOptions:n}=ue(),t={...n,...e};return z(t)}function dn(e){const{queryMetadataQueryOptions:n}=ue(),t={...n,...e};return Ee(t)}const ct=()=>{try{return JSON.parse(sessionStorage.getItem(Le)||"")}catch{return[]}},dt=()=>{try{return JSON.parse(sessionStorage.getItem(Me)||"")}catch{return[]}},mt=()=>{try{return JSON.parse(sessionStorage.getItem(ze)||"")}catch{return[]}},yt=e=>{const n=ct().find(t=>t.id===e);return(n==null?void 0:n.name)??e},ft=e=>{const n=mt().find(t=>t.id===e);return(n==null?void 0:n.name)||e},pt=e=>{const n=dt().find(t=>t.ownerId===e);return(n==null?void 0:n.userName)||e},ht=(e,n)=>{if(e===Oe)return Ue;switch(n){case W.ENTITYID:case W.ENTITYID_LIST:return yt(e);case W.USERID:case W.USERID_LIST:return pt(e);case W.EVALUATIONID:return ft(e);default:return e}};var H=(e=>(e.INTERACTIVE="INTERACTIVE",e.STATIC="STATIC",e.HIDDEN="HIDDEN",e))(H||{});function Ct(){return y.jsxs("div",{className:"text-center",children:[y.jsx(He,{className:"no-search-results",display:"block",height:"181px",sx:{pt:"40px",pb:"10px"}}),y.jsx("h4",{children:"No Matching Results"}),y.jsx("p",{children:"Try checking the spelling or removing filters."})]})}function gt(){return y.jsxs("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[Je,y.jsx("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]})}function qt(){return y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),y.jsx("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}function ae(e){const{type:n,hasResettableFilters:t}=e;switch(n){case H.INTERACTIVE:return t?y.jsx(Ct,{}):y.jsx(gt,{});case H.HIDDEN:return y.jsx(y.Fragment,{});case H.STATIC:default:return y.jsx(qt,{})}}try{ae.displayName="NoContentPlaceholder",ae.__docgenInfo={description:"",displayName:"NoContentPlaceholder",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},hasResettableFilters:{defaultValue:null,description:"",name:"hasResettableFilters",required:!0,type:{name:"boolean"}}}}}catch{}const Y=u.createContext(void 0),oe=({children:e,queryVisualizationContext:n})=>y.jsx(Y.Provider,{value:n,children:e});function mn(){const e=u.useContext(Y);if(e===void 0)throw new Error("useQueryVisualizationContext must be used within a QueryVisualizationWrapper");return e}const Ce=Y.Consumer;try{Y.displayName="QueryVisualizationContext",Y.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryVisualizationContext",props:{}}}catch{}try{oe.displayName="QueryVisualizationContextProvider",oe.__docgenInfo={description:"Provides fields and functions related to visualizing a Synapse table query. For actual query data, see QueryContextProvider.",displayName:"QueryVisualizationContextProvider",props:{queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{Ce.displayName="QueryVisualizationContextConsumer",Ce.__docgenInfo={description:"",displayName:"QueryVisualizationContextConsumer",props:{}}}catch{}const bt=[];function ge(e){const{noContentPlaceholderType:n=H.INTERACTIVE,defaultShowSearchBar:t=!1,defaultShowPlots:s=!0,hideCopyToClipboard:o=!1,unitDescription:r="result",helpConfiguration:i,hasCustomPlots:l=!1,visibleColumnCount:p=1/0,enabledExternalAnalysisPlatforms:c=bt}=e,a=u.useMemo(()=>e.columnAliases??{},[e.columnAliases]),{getCurrentQueryRequest:d,hasFacetedSelectColumn:b,hasResettableFilters:Q,rowDataQueryOptions:E}=ue(),{data:R}=he(),{data:M}=z({...E,select:f=>{var g,q;return(q=(g=f.responseBody)==null?void 0:g.queryResult)==null?void 0:q.queryResults.headers},placeholderData:f=>f}),{data:L}=he({select:f=>{var g;return(g=f.responseBody)==null?void 0:g.selectColumns},placeholderData:f=>f}),F=Re(M??L??[]),[I,j]=u.useState(!1),[S,N]=u.useState(s),[P,B]=u.useState(!o),[D,K]=u.useState(!0),[_,v,A,k]=lt(t,!1),[m,C]=u.useState(!1),[w,O]=u.useState([]),te=u.useMemo(()=>d(),[d]);u.useEffect(()=>{O(F.slice(0,p).map(f=>f.name))},[F,te.query.sql,p]);const G=u.useCallback((f,g)=>{var x;const q=localStorage.getItem("force-display-original-column-names")==="true";if(!f||q&&!g)return f;if(a[f])return a[f];if(g){const U=(x=R==null?void 0:R.columnModels)==null?void 0:x.find(T=>T.name===f);if(U!=null&&U.jsonSubColumns){const T=U.jsonSubColumns.find(X=>X.jsonPath===g);if(T)return T.name}}return je(f)},[a,R==null?void 0:R.columnModels]),$=u.useCallback((f,g)=>{if(Array.isArray(i)){const q=i.find(x=>x.columnName===f&&x.jsonPath===g);return q==null?void 0:q.helpText}},[i]),Z=u.useCallback(()=>y.jsx(ae,{type:n,hasResettableFilters:Q}),[n,Q]),ne=u.useMemo(()=>({columnsToShowInTable:w,setColumnsToShowInTable:O,rgbIndex:e.rgbIndex,unitDescription:r,showLastUpdatedOn:e.showLastUpdatedOn,getColumnDisplayName:G,getDisplayValue:ht,getHelpText:$,NoContentPlaceholder:Z,isShowingExportToAnalysisPlatformModal:m,setIsShowingExportToAnalysisPlatformModal:C,showFacetFilter:b?D:!1,setShowFacetFilter:K,showSearchBar:_,setShowSearchBar:v,showDownloadConfirmation:A,setShowDownloadConfirmation:k,showSqlEditor:I,setShowSqlEditor:j,showPlots:l||b?S:!1,setShowPlots:N,showCopyToClipboard:P,setShowCopyToClipboard:B,enabledExternalAnalysisPlatforms:c}),[Z,G,$,b,m,e.rgbIndex,e.showLastUpdatedOn,k,v,P,A,D,S,_,I,r,w,l,c]),{children:re}=e;return y.jsx(oe,{queryVisualizationContext:ne,children:re})}try{ge.displayName="QueryVisualizationWrapper",ge.__docgenInfo={description:`QueryVisualizationWrapper manages UI state for components that query tables in Synapse. That state can be accessed
or updated using QueryVisualizationContext. A QueryVisualizationWrapper must be used within a QueryWrapper.`,displayName:"QueryVisualizationWrapper",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:'The singular word to use to describe a what a row represents (e.g. "file"). Defaults to "result"',name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},hiddenColumns:{defaultValue:null,description:"",name:"hiddenColumns",required:!1,type:{name:"string[]"}},defaultShowPlots:{defaultValue:null,description:"",name:"defaultShowPlots",required:!1,type:{name:"boolean"}},hideCopyToClipboard:{defaultValue:null,description:"",name:"hideCopyToClipboard",required:!1,type:{name:"boolean"}},defaultShowSearchBar:{defaultValue:null,description:"",name:"defaultShowSearchBar",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},rowSelectionPrimaryKey:{defaultValue:null,description:`The set of columns that defines a uniqueness constraint on the table for the purposes of filtering based on row selection.
Note that Synapse tables have no internal concept of a primary key.`,name:"rowSelectionPrimaryKey",required:!1,type:{name:"string[]"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:`Look for additional filters using the given key.  If not provided, the entity ID will be used.
@deprecated - configure the filter before passing a query`,name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}},helpConfiguration:{defaultValue:null,description:"Configuration to add a help popover to each corresponding column header",name:"helpConfiguration",required:!1,type:{name:"ColumnOrFacetHelpConfig[]"}},hasCustomPlots:{defaultValue:null,description:"",name:"hasCustomPlots",required:!1,type:{name:"boolean"}},enabledExternalAnalysisPlatforms:{defaultValue:{value:"[] (no platforms are enabled)"},description:"The set of external analysis platform to which the UI will support exporting data.",name:"enabledExternalAnalysisPlatforms",required:!1,type:{name:"ExternalAnalysisPlatform[]"}}}}}catch{}function we(e,n){return`${e}${n}`}function qe(e,n,t){const s=n!==void 0?we(e,n):e,o=new URLSearchParams(window.location.search);t?o.set(s,t):o.delete(s);const r=o.toString();window.history.replaceState(null,"",window.location.pathname+(Array.from(o).length>0?`?${r.toString()}`:""))}function St(e,n){const t=we(e,n),s=new URLSearchParams(window.location.search).get(t);let o;if(s){const r=JSON.parse(s);r.sql&&(o={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:Ye(r.sql),query:r})}return o}function Qt(e,n){const t=h(n),{queryOrUpdater:s}=e;return typeof s=="function"?s(t):s}function Rt(e,n){const t=h(n),{facet:s,value:o}=e,r=t.query.selectedFacets??[],i=r.find(l=>l.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnValuesRequest"&&J(s,l));return i?i.facetValues.includes(o)||i.facetValues.push(o):r.push({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:s.columnName,jsonPath:s.jsonPath,facetValues:[o]}),t.query.selectedFacets=r,V(t,n)||(t.query.offset=0),t}function wt(e,n){const t=h(n),{facetsToRemove:s}=e,o=Array.isArray(s);return t.query.selectedFacets=(t.query.selectedFacets??[]).filter(r=>o?!s.find(i=>J(i,r)):!J(s,r)),V(t,n)||(t.query.offset=0),t}function Vt(e,n){const t=h(n),{facet:s,min:o,max:r}=e,i=h(t.query.selectedFacets??[]),l=i.find(p=>p.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnRangeRequest"&&J(s,p));return l&&o==null&&r==null?i.splice(i.indexOf(l),1):l?(l.min=o,l.max=r):i.push({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnRangeRequest",columnName:s.columnName,jsonPath:s.jsonPath,min:o,max:r}),t.query.selectedFacets=i,V(t,n)||(t.query.offset=0),t}function Ft(e,n){const t=h(n),{facet:s,value:o}=e;return t.query.selectedFacets=(t.query.selectedFacets??[]).map(r=>(fe(r)&&J(s,r)&&(r.facetValues=r.facetValues.filter(i=>i!==o)),r)).filter(r=>fe(r)?Array.isArray(r.facetValues)&&r.facetValues.length>0:!0),V(t,n)||(t.query.offset=0),t}function It(e,n){const t=h(n),{queryFilter:s}=e;return t.query.additionalFilters=(t.query.additionalFilters??[]).filter(o=>!V(o,s)),V(t,n)||(t.query.offset=0),t}function xt(e,n){const t=h(n),{queryFilter:s,value:o}=e;return t.query.additionalFilters=(t.query.additionalFilters??[]).map(r=>((me(r)||ye(r))&&V(r,s)&&(r.values=r.values.filter(i=>i!==o)),r)).filter(r=>me(r)||ye(r)?Array.isArray(r.values)&&r.values.length>0:!0),V(t,n)||(t.query.offset=0),t}function Tt(e,n){const t=h(n),{pageSize:s}=e;return t.query.limit=s,t}function Et(e,n){const t=h(n),{pageNumber:s}=e,o=n.query.limit??Qe;return t.query.offset=(s-1)*o,t}function Nt(e,n,t){const[s,o]=u.useState(0),[r,i]=u.useState(!1),[l,p]=u.useReducer((c,a)=>{let d=c.nextQueryRequest;switch(a.type){case"resetDebounce":return o(Q=>Q+1),c;case"setQuery":{d=Qt(a,c.nextQueryRequest);break}case"addValueToSelectedFacet":{d=Rt(a,c.nextQueryRequest);break}case"removeSelectedFacet":{d=wt(a,c.nextQueryRequest);break}case"setRangeFacetValue":{d=Vt(a,c.nextQueryRequest);break}case"removeValueFromSelectedFacet":{d=Ft(a,c.nextQueryRequest);break}case"removeQueryFilter":{d=It(a,c.nextQueryRequest);break}case"removeValueFromQueryFilter":{d=xt(a,c.nextQueryRequest);break}case"setPageSize":{d=Tt(a,c.nextQueryRequest);break}case"goToPage":{d=Et(a,c.nextQueryRequest);break}case"resetQuery":{d=e;break}case"cancelChanges":case"resetUncommittedChanges":{d=c.currentQueryRequest;break}case"confirmChanges":case"commitChanges":{d=h(c.nextQueryRequest);break}}d.query=Se(d.query);const b=n&&!Ne(c.currentQueryRequest.query,d.query);if(a.commitOptions&&"noCommit"in a.commitOptions||b&&a.type!=="confirmChanges"&&a.type!=="cancelChanges")return{currentQueryRequest:c.currentQueryRequest,nextQueryRequest:d,isConfirmingChange:b};if(a.commitOptions&&"debounce"in a.commitOptions)return i(!0),{currentQueryRequest:c.currentQueryRequest,nextQueryRequest:d,isConfirmingChange:b};if(i(!1),t&&!V(c.currentQueryRequest,d)){const Q=JSON.stringify(d.query);t(Q)}return{currentQueryRequest:d,nextQueryRequest:d,isConfirmingChange:!1}},{currentQueryRequest:e,nextQueryRequest:e,isConfirmingChange:!1});return $e(()=>{r&&(p({type:"commitChanges"}),i(!1))},[l.nextQueryRequest,r,i,s],Pt),u.useMemo(()=>({currentQueryRequest:l.currentQueryRequest,nextQueryRequest:l.nextQueryRequest,isConfirmingChange:l.isConfirmingChange,dispatch:p}),[l.currentQueryRequest,l.isConfirmingChange,l.nextQueryRequest])}const Pt=750;function Dt(e,n,t,s,o){u.useEffect(()=>{if(e){const r=St("QueryWrapper",n);r&&r.query&&t(i=>({...i,...r,query:{...i.query,...r.query}}))}},[n]),u.useEffect(()=>{if(e)if(V(s,o))qe("QueryWrapper",n,null);else{const r=JSON.stringify(o.query);qe("QueryWrapper",n,r)}},[n,o,s,e])}function _t(e){const{initQueryRequest:n,componentIndex:t=0,shouldDeepLink:s=!1,onQueryChange:o,requireConfirmationOnChange:r=!1}=e,i=u.useMemo(()=>{const m=h(n);return m.query=Se(m.query),m},[n]),{currentQueryRequest:l,nextQueryRequest:p,isConfirmingChange:c,dispatch:a}=Nt(i,r,o),d=u.useCallback(()=>{a({type:"confirmChanges"})},[a]),b=u.useCallback(()=>h(l),[l]),Q=u.useCallback(()=>h(i),[i]),E=u.useCallback((m,C)=>{a({type:"setQuery",queryOrUpdater:m,commitOptions:C})},[a]);Dt(s,t,E,i,l);const R=u.useCallback(()=>{a({type:"cancelChanges"})},[a]),{entityId:M,versionNumber:L}=u.useMemo(()=>Ge(l.query.sql),[l.query.sql]),F=l.query.limit??Qe,I=Math.ceil(((l.query.offset??0)+Number(F))/F),j=u.useCallback(m=>{a({type:"setPageSize",pageSize:m})},[a]),S=u.useCallback(m=>{a({type:"goToPage",pageNumber:m})},[a]),N=u.useCallback(()=>{a({type:"resetQuery"})},[a]);Be(()=>{l!=i&&N()},[i]);const P=u.useCallback((m,C,w)=>{a({type:"addValueToSelectedFacet",facet:m,value:C,commitOptions:w})},[a]),B=u.useCallback((m,C,w,O)=>{a({type:"setRangeFacetValue",facet:m,min:C,max:w,commitOptions:O})},[a]),D=u.useCallback(m=>{a({type:"removeSelectedFacet",facetsToRemove:m})},[a]),K=u.useCallback((m,C,w)=>{a({type:"removeValueFromSelectedFacet",facet:m,value:C,commitOptions:w})},[a]),_=u.useCallback(m=>{a({type:"removeQueryFilter",queryFilter:m})},[a]),v=u.useCallback((m,C)=>{a({type:"removeValueFromQueryFilter",queryFilter:m,value:C})},[a]),A=u.useCallback(()=>{a({type:"commitChanges"})},[a]),k=u.useCallback(()=>{a({type:"resetDebounce"})},[a]);return{entityId:M,commitChanges:A,resetDebounceTimer:k,currentQueryRequest:l,nextQueryRequest:p,versionNumber:L,getInitQueryRequest:Q,getCurrentQueryRequest:b,setQuery:E,pageSize:F,currentPage:I,setPageSize:j,goToPage:S,resetQuery:N,removeSelectedFacet:D,removeValueFromSelectedFacet:K,removeQueryFilter:_,removeValueFromQueryFilter:v,isConfirmingChange:c,onConfirmChange:d,onCancelChange:R,addValueToSelectedFacet:P,setRangeFacetValue:B}}function vt(e,n,t,s){const{rowDataRequest:o,queryMetadataRequest:r}=De(e),i={...de,queryKey:t.getEntityTableQueryResultWithAsyncStatusQueryKey(o,!1),queryFn:()=>ce(o,s),select:c=>{var a,d;return(d=(a=c.responseBody)==null?void 0:a.queryResult)==null?void 0:d.queryResults}},l={..._e(o,t,s)},p={...de,queryKey:t.getEntityTableQueryResultWithAsyncStatusQueryKey(r,!1),queryFn:()=>ce(r,s),select:c=>et(ve(c.responseBody,n),"queryResults")};return{rowDataQueryOptions:i,rowDataInfiniteQueryOptions:l,queryMetadataQueryOptions:p}}function Ve(e,n){const{keyFactory:t,accessToken:s}=Pe();return u.useMemo(()=>vt(e,n,t,s),[t,s,e,n])}function At(e){const{rowSelectionPrimaryKeyFromProps:n,entityId:t,versionNumber:s,queryMetadataQueryOptions:o}=e,{data:r}=ot(t,s),{data:i}=z(o);return u.useMemo(()=>{if(n)return n;if(r&&(i!=null&&i.columnModels))return ut(r,i.columnModels)},[n,r,i==null?void 0:i.columnModels])}function kt(e){const{data:n,isLoading:t}=z(e);return n?Ae(n.facets,n.selectColumns):t}function Ot(e){const{queryBundleRequest:n,onChange:t}=e,{rowDataQueryOptions:s,queryMetadataQueryOptions:o}=Ve(n),{data:r,isLoading:i}=z({...s,select:d=>d.responseBody}),{data:l,isLoading:p}=z(o),[c,a]=u.useState();u.useEffect(()=>{r&&l&&!i&&!p&&a({...l,...r})},[l,p,r,i]),Ke(()=>{c&&t&&t(c)},[c,t])}function Ut(e){const{initQueryRequest:n,onQueryChange:t,onQueryResultBundleChange:s=Ze,lockedColumn:o,componentIndex:r,shouldDeepLink:i,onViewSharingSettingsClicked:l,isRowSelectionVisible:p=!1,isRowSelectionUIFloating:c=!0,rowSelectionPrimaryKey:a,isInfinite:d=!1,combineRangeFacetConfig:b,fileIdColumnName:Q,fileVersionColumnName:E,fileNameColumnName:R}=e,M=tt(),L=_t({initQueryRequest:n,shouldDeepLink:i,componentIndex:r,onQueryChange:t,requireConfirmationOnChange:M}),{entityId:F,versionNumber:I,getInitQueryRequest:j,getCurrentQueryRequest:S,setQuery:N,resetQuery:P,removeSelectedFacet:B,removeValueFromSelectedFacet:D,removeQueryFilter:K,removeValueFromQueryFilter:_,onConfirmChange:v,isConfirmingChange:A,onCancelChange:k,nextQueryRequest:m,currentQueryRequest:C,addValueToSelectedFacet:w,setRangeFacetValue:O,resetDebounceTimer:te,currentPage:G,goToPage:$,pageSize:Z,setPageSize:ne}=L,re=u.useMemo(()=>S(),[S]),{rowDataQueryOptions:f,rowDataInfiniteQueryOptions:g,queryMetadataQueryOptions:q}=Ve(re,o),x=kt(q),U=u.useMemo(()=>{const se=S();return ke(se.query,o)},[S,o]),T=ee(nt);u.useEffect(()=>{T(p)},[p,T]);const X=ee(rt);u.useEffect(()=>{X(c)},[c,X]);const ie=At({entityId:F,versionNumber:I,rowSelectionPrimaryKeyFromProps:a,queryMetadataQueryOptions:q}),le=ee(st);u.useEffect(()=>{le(ie)},[ie,le]);const Fe=ee(at),Ie=u.useCallback(se=>s(JSON.stringify(se)),[s]);Ot({queryBundleRequest:S(),onChange:Ie});const xe=Re({isInfinite:d,entityId:F,versionNumber:I,nextQueryRequest:m,currentQueryRequest:C,getCurrentQueryRequest:S,getInitQueryRequest:j,executeQueryRequest:N,hasFacetedSelectColumn:x,hasResettableFilters:U,removeSelectedFacet:B,removeValueFromSelectedFacet:D,resetQuery:P,removeQueryFilter:K,removeValueFromQueryFilter:_,onViewSharingSettingsClicked:l,addValueToSelectedFacet:w,combineRangeFacetConfig:b,setRangeFacetValue:O,resetDebounceTimer:te,rowDataQueryOptions:f,rowDataInfiniteQueryOptions:g,queryMetadataQueryOptions:q,currentPage:G,goToPage:$,pageSize:Z,setPageSize:ne,lockedColumn:o,fileIdColumnName:Q,fileVersionColumnName:E,fileNameColumnName:R}),{children:Te}=e;return y.jsxs(We,{queryContext:xe,children:[y.jsx(Xe,{open:A,title:"Change Query and Clear Selection?",content:"Changing the current query will cause your current selection to be lost. Are you sure you want to proceed?",confirmButtonProps:{children:"Clear Selection and Update Query"},onConfirm:()=>{Fe([]),v()},onCancel:()=>{k()}}),Te]})}function be(e){return y.jsx(it,{children:y.jsx(Ut,{...e})})}try{be.displayName="QueryWrapper",be.__docgenInfo={description:"",displayName:"QueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"(newQueryJson: string) => void"}},onQueryResultBundleChange:{defaultValue:null,description:"Called when the query result rows change",name:"onQueryResultBundleChange",required:!1,type:{name:"(newQueryResultBundleJson: string) => void"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"(benefactorId: string) => void"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},rowSelectionPrimaryKey:{defaultValue:null,description:`The set of columns that defines a uniqueness constraint on the table for the purposes of filtering based on row selection.
Note that Synapse tables have no internal concept of a primary key.`,name:"rowSelectionPrimaryKey",required:!1,type:{name:"string[]"}},isRowSelectionUIFloating:{defaultValue:null,description:"By default, the row selection UI will float at the bottom of the viewport.  Set to false to make it inline",name:"isRowSelectionUIFloating",required:!1,type:{name:"boolean"}},isInfinite:{defaultValue:null,description:"",name:"isInfinite",required:!1,type:{name:"boolean"}},combineRangeFacetConfig:{defaultValue:null,description:"",name:"combineRangeFacetConfig",required:!1,type:{name:"CombineRangeFacetConfig"}},fileIdColumnName:{defaultValue:null,description:"If provided, will use the value in this column instead of the rowID for the access column, download column, etc",name:"fileIdColumnName",required:!1,type:{name:"string"}},fileNameColumnName:{defaultValue:null,description:"",name:"fileNameColumnName",required:!1,type:{name:"string"}},fileVersionColumnName:{defaultValue:null,description:"If provided, will use the value in this column instead of the row version number for the access column, download column, etc",name:"fileVersionColumnName",required:!1,type:{name:"string"}}}}}catch{}export{H as N,be as Q,ge as a,Ce as b,he as c,dn as d,vt as e,qt as f,Et as g,mn as u};
