import{j as t}from"./jsx-runtime-DBMcmXCa.js";import{r as _}from"./index-DBlnVwD8.js";import{u as D}from"./useEntity-BQLWn4F1.js";import"./useFiles-BCC9o9bm.js";import{k as j,l as K,f as M,j as v,m as P,i as O,n as B}from"./SynapseConstants-D6yJoWPV.js";import{p as h,g as W}from"./SqlFunctions-DnxC6kpb.js";import{m as k}from"./StringUtils-CzgJJW-6.js";import"./VerificationSubmission-B0kBNeMy.js";import"./OrientationBanner-D1D6xyRZ.js";import{T as Y,F as z,S as G}from"./TopLevelControls-CTSeFwvA.js";import{Q as J}from"./QueryContext-Df1z4Vnt.js";import{N as S,Q as Z,a as H,b as X}from"./QueryWrapper-xjQsLTnK.js";import{T as $,R as ee}from"./RowSetView-DOtl3K8P.js";import{S as te}from"./QueryWrapperErrorBoundary-De1G7tPW.js";const i=e=>({partMask:K|M|v|P|O|B,entityId:h(e.sql),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{limit:j,offset:0,...e}});function l(e){if(e.query)return e.query;{const n=W(e.searchParams,e.sqlOperator,e.additionalFiltersSessionStorageKey);return{sql:e.sql,additionalFilters:n,offset:0}}}function C(e){var p;const{hideDownload:n}=e,{showAccessColumn:E,sql:q,hideAddToDownloadListColumn:u=n,hideQueryCount:g,name:Q,showTopLevelControls:o=!1,searchConfiguration:r,unitDescription:T="Results",rgbIndex:F,showLastUpdatedOn:x,noContentPlaceholderType:N=o?S.INTERACTIVE:S.STATIC,cardConfiguration:d,tableConfiguration:L,shouldDeepLink:w,...a}=e,[m,R]=_.useState(1),U=()=>{R(m+1)},I=((p=e.query)==null?void 0:p.sql)??q??"",V=l(e),c=i(V),b=h(I),{data:s}=D(b),A=JSON.stringify(c)+m;return _.createElement(Z,{...a,initQueryRequest:c,shouldDeepLink:w,key:A},t.jsx(H,{rgbIndex:F,unitDescription:T,showLastUpdatedOn:x,noContentPlaceholderType:N,...a,children:t.jsx(J,{children:y=>{if(y===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return t.jsx(X,{children:f=>{if(f===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return t.jsxs(t.Fragment,{children:[o&&t.jsx(Y,{showColumnSelection:!0,name:Q,hideDownload:u,hideQueryCount:g,hideFacetFilterControl:!0,hideVisualizationsControl:!0,remount:U}),s&&k(s)&&s.isSearchEnabled?t.jsx(z,{ftsConfig:r==null?void 0:r.ftsConfig}):t.jsx(G,{...r,queryContext:y,queryVisualizationContext:f}),t.jsx(te,{}),o&&t.jsx($,{frontText:""}),t.jsx(ee,{tableConfiguration:d?void 0:{...L,showAccessColumn:E,hideAddToDownloadListColumn:u,...a},cardConfiguration:d})]})}})}})}))}try{l.displayName="getQueryFromProps",l.__docgenInfo={description:"",displayName:"getQueryFromProps",props:{}}}catch{}try{i.displayName="generateInitQueryRequest",i.__docgenInfo={description:"",displayName:"generateInitQueryRequest",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}},additionalFilters:{defaultValue:null,description:"",name:"additionalFilters",required:!1,type:{name:"QueryFilter[]"}},selectFileColumn:{defaultValue:null,description:"",name:"selectFileColumn",required:!1,type:{name:"number"}},selectFileVersionColumn:{defaultValue:null,description:"",name:"selectFileVersionColumn",required:!1,type:{name:"number"}}}}}catch{}try{C.displayName="StandaloneQueryWrapper",C.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{}}}catch{}export{C as S};
