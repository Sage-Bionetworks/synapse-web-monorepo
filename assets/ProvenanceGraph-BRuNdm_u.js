import{j as B}from"./jsx-runtime-Du8NFWEI.js";import{P as vf,r as wf,l as xf,w as _f,S as er}from"./useFiles-Cul21QaF.js";import{E as Go}from"./VerificationSubmission-CX6Xq4We.js";import{c as mu,D as bf}from"./StringUtils-DrtZBNIY.js";import"./OrientationBanner-6c7QOLx_.js";import{r as N,g as gu,R}from"./index-Dl6G-zuu.js";import{a as Ef}from"./useGetEntityHeaders-vLELG_19.js";import{d as Nf}from"./ToastMessage-CmCdGkWE.js";import{f as Sf}from"./DateFormatter-CCRWcP8A.js";import{d as kf}from"./dayjs.min-d18Up55D.js";import{U as If}from"./UserBadge-DnYrROFE.js";import{T as kn}from"./Tooltip-CIKCv17A.js";import{T as qi}from"./Typography-D3xYwoES.js";import{E as Yo}from"./EntityIcon-zkd2eX3c.js";import{I as lo}from"./IconSvg-BSurUVGX.js";import{L as Cf}from"./Link-C37sfSRl.js";import{p as Rf}from"./pluralize-CVwSCrA2.js";import{c as fo}from"./_commonjs-dynamic-modules-TDtrdbi3.js";import{z as Tf,x as yu,A as vu,B as tt,C as Af,D as gt,E as $f,F as wu,G as xu,H as Mf,I as ho,J as _u,K as Pf,L as bu,c as Eu,M as Lf,j as qf,k as Df,N as Vf,O as zf,P as Ff,Q as Nu,R as Hf,S as Su,p as po,t as Of,h as Bf,a as Gf,i as Yf,T as mo,U as ku,V as Iu,W as Uf,X as Xf,Y as jf,Z as Wf,$ as Zf,a0 as Cu,q as Kf,o as Qf,a1 as Jf,a2 as Ru,a3 as Tu,a4 as ed,a5 as td,a6 as nd,a7 as rd,a8 as id,a9 as od,w as Au,aa as sd,ab as ad,y as ud,m as cd,l as ld,s as fd}from"./forEach-CJ4xqOzI.js";import{H as dd}from"./HelpPopover-Cxsfp5jp.js";import"./index-BIzb42Jq.js";import{d as hd}from"./differenceWith-CSiKJuUn.js";import{i as pd}from"./isEqual-X7sPOZRU.js";import{C as md}from"./CircularProgress-46mA0G0t.js";const gd="org.sagebionetworks.repo.model.provenance.UsedEntity";function he(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=he(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var $u={exports:{}},Mu={},Pu={exports:{}},Lu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=N;function yd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vd=typeof Object.is=="function"?Object.is:yd,wd=Mt.useState,xd=Mt.useEffect,_d=Mt.useLayoutEffect,bd=Mt.useDebugValue;function Ed(e,t){var n=t(),r=wd({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return _d(function(){i.value=n,i.getSnapshot=t,tr(i)&&s({inst:i})},[e,n,t]),xd(function(){return tr(i)&&s({inst:i}),e(function(){tr(i)&&s({inst:i})})},[e]),bd(n),n}function tr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vd(e,n)}catch{return!0}}function Nd(e,t){return t()}var Sd=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Nd:Ed;Lu.useSyncExternalStore=Mt.useSyncExternalStore!==void 0?Mt.useSyncExternalStore:Sd;Pu.exports=Lu;var kd=Pu.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hn=N,Id=kd;function Cd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rd=typeof Object.is=="function"?Object.is:Cd,Td=Id.useSyncExternalStore,Ad=Hn.useRef,$d=Hn.useEffect,Md=Hn.useMemo,Pd=Hn.useDebugValue;Mu.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Ad(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Md(function(){function c(h){if(!l){if(l=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var g=o.value;if(i(g,h))return f=g}return f=h}if(g=f,Rd(u,h))return g;var m=r(h);return i!==void 0&&i(g,m)?g:(u=h,f=m)}var l=!1,u,f,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,r,i]);var a=Td(e,s[0],s[1]);return $d(function(){o.hasValue=!0,o.value=a},[a]),Pd(a),a};$u.exports=Mu;var Ld=$u.exports;const qd=gu(Ld),Dd={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true"},Uo=e=>{let t;const n=new Set,r=(u,f)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(g=>g(t,h))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Dd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,i,c);return c},Vd=e=>e?Uo(e):Uo,{useDebugValue:zd}=R,{useSyncExternalStoreWithSelector:Fd}=qd,Hd=e=>e;function qu(e,t=Hd,n){const r=Fd(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return zd(r),r}const Xo=(e,t)=>{const n=Vd(e),r=(i,s=t)=>qu(n,i,s);return Object.assign(r,n),r},Od=(e,t)=>e?Xo(e,t):Xo;function ce(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Bd={value:()=>{}};function On(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bn(n)}function bn(e){this._=e}function Gd(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bn.prototype=On.prototype={constructor:bn,on:function(e,t){var n=this._,r=Gd(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Yd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=jo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Yd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jo(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Bd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Di="http://www.w3.org/1999/xhtml";const Wo={svg:"http://www.w3.org/2000/svg",xhtml:Di,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wo.hasOwnProperty(t)?{space:Wo[t],local:e}:e}function Ud(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Di&&t.documentElement.namespaceURI===Di?t.createElement(e):t.createElementNS(n,e)}}function Xd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Du(e){var t=Bn(e);return(t.local?Xd:Ud)(t)}function jd(){}function go(e){return e==null?jd:function(){return this.querySelector(e)}}function Wd(e){typeof e!="function"&&(e=go(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new ye(r,this._parents)}function Zd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kd(){return[]}function Vu(e){return e==null?Kd:function(){return this.querySelectorAll(e)}}function Qd(e){return function(){return Zd(e.apply(this,arguments))}}function Jd(e){typeof e=="function"?e=Qd(e):e=Vu(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new ye(r,i)}function zu(e){return function(){return this.matches(e)}}function Fu(e){return function(t){return t.matches(e)}}var eh=Array.prototype.find;function th(e){return function(){return eh.call(this.children,e)}}function nh(){return this.firstElementChild}function rh(e){return this.select(e==null?nh:th(typeof e=="function"?e:Fu(e)))}var ih=Array.prototype.filter;function oh(){return Array.from(this.children)}function sh(e){return function(){return ih.call(this.children,e)}}function ah(e){return this.selectAll(e==null?oh:sh(typeof e=="function"?e:Fu(e)))}function uh(e){typeof e!="function"&&(e=zu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new ye(r,this._parents)}function Hu(e){return new Array(e.length)}function ch(){return new ye(this._enter||this._groups.map(Hu),this._parents)}function In(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}In.prototype={constructor:In,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function lh(e){return function(){return e}}function fh(e,t,n,r,i,s){for(var o=0,a,c=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new In(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function dh(e,t,n,r,i,s,o){var a,c,l=new Map,u=t.length,f=s.length,d=new Array(u),h;for(a=0;a<u;++a)(c=t[a])&&(d[a]=h=o.call(c,c.__data__,a,t)+"",l.has(h)?i[a]=c:l.set(h,c));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(c=l.get(h))?(r[a]=c,c.__data__=s[a],l.delete(h)):n[a]=new In(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(d[a])===c&&(i[a]=c)}function hh(e){return e.__data__}function ph(e,t){if(!arguments.length)return Array.from(this,hh);var n=t?dh:fh,r=this._parents,i=this._groups;typeof e!="function"&&(e=lh(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],f=i[l],d=f.length,h=mh(e.call(u,u&&u.__data__,l,r)),g=h.length,m=a[l]=new Array(g),v=o[l]=new Array(g),y=c[l]=new Array(d);n(u,f,m,v,y,h,t);for(var E=0,k=0,_,C;E<g;++E)if(_=m[E]){for(E>=k&&(k=E+1);!(C=v[k])&&++k<g;);_._next=C||null}}return o=new ye(o,r),o._enter=a,o._exit=c,o}function mh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gh(){return new ye(this._exit||this._groups.map(Hu),this._parents)}function yh(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function vh(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],f=l.length,d=a[c]=new Array(f),h,g=0;g<f;++g)(h=l[g]||u[g])&&(d[g]=h);for(;c<i;++c)a[c]=n[c];return new ye(a,this._parents)}function wh(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function xh(e){e||(e=_h);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new ye(i,this._parents).order()}function _h(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Eh(){return Array.from(this)}function Nh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Sh(){let e=0;for(const t of this)++e;return e}function kh(){return!this.node()}function Ih(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Ch(e){return function(){this.removeAttribute(e)}}function Rh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Th(e,t){return function(){this.setAttribute(e,t)}}function Ah(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $h(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Mh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ph(e,t){var n=Bn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Rh:Ch:typeof t=="function"?n.local?Mh:$h:n.local?Ah:Th)(n,t))}function Ou(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lh(e){return function(){this.style.removeProperty(e)}}function qh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Dh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vh(e,t,n){return arguments.length>1?this.each((t==null?Lh:typeof t=="function"?Dh:qh)(e,t,n??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||Ou(e).getComputedStyle(e,null).getPropertyValue(t)}function zh(e){return function(){delete this[e]}}function Fh(e,t){return function(){this[e]=t}}function Hh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Oh(e,t){return arguments.length>1?this.each((t==null?zh:typeof t=="function"?Hh:Fh)(e,t)):this.node()[e]}function Bu(e){return e.trim().split(/^|\s+/)}function yo(e){return e.classList||new Gu(e)}function Gu(e){this._node=e,this._names=Bu(e.getAttribute("class")||"")}Gu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yu(e,t){for(var n=yo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Uu(e,t){for(var n=yo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Bh(e){return function(){Yu(this,e)}}function Gh(e){return function(){Uu(this,e)}}function Yh(e,t){return function(){(t.apply(this,arguments)?Yu:Uu)(this,e)}}function Uh(e,t){var n=Bu(e+"");if(arguments.length<2){for(var r=yo(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Yh:t?Bh:Gh)(n,t))}function Xh(){this.textContent=""}function jh(e){return function(){this.textContent=e}}function Wh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Zh(e){return arguments.length?this.each(e==null?Xh:(typeof e=="function"?Wh:jh)(e)):this.node().textContent}function Kh(){this.innerHTML=""}function Qh(e){return function(){this.innerHTML=e}}function Jh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ep(e){return arguments.length?this.each(e==null?Kh:(typeof e=="function"?Jh:Qh)(e)):this.node().innerHTML}function tp(){this.nextSibling&&this.parentNode.appendChild(this)}function np(){return this.each(tp)}function rp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ip(){return this.each(rp)}function op(e){var t=typeof e=="function"?e:Du(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sp(){return null}function ap(e,t){var n=typeof e=="function"?e:Du(e),r=t==null?sp:typeof t=="function"?t:go(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function up(){var e=this.parentNode;e&&e.removeChild(this)}function cp(){return this.each(up)}function lp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dp(e){return this.select(e?fp:lp)}function hp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pp(e){return function(t){e.call(this,t,this.__data__)}}function mp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function yp(e,t,n){return function(){var r=this.__on,i,s=pp(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function vp(e,t,n){var r=mp(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?yp:gp,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Xu(e,t,n){var r=Ou(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function wp(e,t){return function(){return Xu(this,e,t)}}function xp(e,t){return function(){return Xu(this,e,t.apply(this,arguments))}}function _p(e,t){return this.each((typeof t=="function"?xp:wp)(e,t))}function*bp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var ju=[null];function ye(e,t){this._groups=e,this._parents=t}function an(){return new ye([[document.documentElement]],ju)}function Ep(){return this}ye.prototype=an.prototype={constructor:ye,select:Wd,selectAll:Jd,selectChild:rh,selectChildren:ah,filter:uh,data:ph,enter:ch,exit:gh,join:yh,merge:vh,selection:Ep,order:wh,sort:xh,call:bh,nodes:Eh,node:Nh,size:Sh,empty:kh,each:Ih,attr:Ph,style:Vh,property:Oh,classed:Uh,text:Zh,html:ep,raise:np,lower:ip,append:op,insert:ap,remove:cp,clone:dp,datum:hp,on:vp,dispatch:_p,[Symbol.iterator]:bp};function Ee(e){return typeof e=="string"?new ye([[document.querySelector(e)]],[document.documentElement]):new ye([[e]],ju)}function Np(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Te(e,t){if(e=Np(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Sp={passive:!1},Qt={capture:!0,passive:!1};function nr(e){e.stopImmediatePropagation()}function Rt(e){e.preventDefault(),e.stopImmediatePropagation()}function Wu(e){var t=e.document.documentElement,n=Ee(e).on("dragstart.drag",Rt,Qt);"onselectstart"in t?n.on("selectstart.drag",Rt,Qt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zu(e,t){var n=e.document.documentElement,r=Ee(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rt,Qt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const fn=e=>()=>e;function Vi(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Vi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function kp(e){return!e.ctrlKey&&!e.button}function Ip(){return this.parentNode}function Cp(e,t){return t??{x:e.x,y:e.y}}function Rp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tp(){var e=kp,t=Ip,n=Cp,r=Rp,i={},s=On("start","drag","end"),o=0,a,c,l,u,f=0;function d(_){_.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",y,Sp).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(_,C){if(!(u||!e.call(this,_,C))){var L=k(this,t.call(this,_,C),_,C,"mouse");L&&(Ee(_.view).on("mousemove.drag",g,Qt).on("mouseup.drag",m,Qt),Wu(_.view),nr(_),l=!1,a=_.clientX,c=_.clientY,L("start",_))}}function g(_){if(Rt(_),!l){var C=_.clientX-a,L=_.clientY-c;l=C*C+L*L>f}i.mouse("drag",_)}function m(_){Ee(_.view).on("mousemove.drag mouseup.drag",null),Zu(_.view,l),Rt(_),i.mouse("end",_)}function v(_,C){if(e.call(this,_,C)){var L=_.changedTouches,q=t.call(this,_,C),M=L.length,P,z;for(P=0;P<M;++P)(z=k(this,q,_,C,L[P].identifier,L[P]))&&(nr(_),z("start",_,L[P]))}}function y(_){var C=_.changedTouches,L=C.length,q,M;for(q=0;q<L;++q)(M=i[C[q].identifier])&&(Rt(_),M("drag",_,C[q]))}function E(_){var C=_.changedTouches,L=C.length,q,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),q=0;q<L;++q)(M=i[C[q].identifier])&&(nr(_),M("end",_,C[q]))}function k(_,C,L,q,M,P){var z=s.copy(),D=Te(P||L,C),F,S,p;if((p=n.call(_,new Vi("beforestart",{sourceEvent:L,target:d,identifier:M,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:z}),q))!=null)return F=p.x-D[0]||0,S=p.y-D[1]||0,function b(w,I,A){var x=D,$;switch(w){case"start":i[M]=b,$=o++;break;case"end":delete i[M],--o;case"drag":D=Te(A||I,C),$=o;break}z.call(w,_,new Vi(w,{sourceEvent:I,subject:p,target:d,identifier:M,active:$,x:D[0]+F,y:D[1]+S,dx:D[0]-x[0],dy:D[1]-x[1],dispatch:z}),q)}}return d.filter=function(_){return arguments.length?(e=typeof _=="function"?_:fn(!!_),d):e},d.container=function(_){return arguments.length?(t=typeof _=="function"?_:fn(_),d):t},d.subject=function(_){return arguments.length?(n=typeof _=="function"?_:fn(_),d):n},d.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:fn(!!_),d):r},d.on=function(){var _=s.on.apply(s,arguments);return _===s?d:_},d.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,d):Math.sqrt(f)},d}function vo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ku(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function un(){}var Jt=.7,Cn=1/Jt,Tt="\\s*([+-]?\\d+)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ap=/^#([0-9a-f]{3,8})$/,$p=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Mp=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),Pp=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${en}\\)$`),Lp=new RegExp(`^rgba\\(${$e},${$e},${$e},${en}\\)$`),qp=new RegExp(`^hsl\\(${en},${$e},${$e}\\)$`),Dp=new RegExp(`^hsla\\(${en},${$e},${$e},${en}\\)$`),Zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vo(un,tn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ko,formatHex:Ko,formatHex8:Vp,formatHsl:zp,formatRgb:Qo,toString:Qo});function Ko(){return this.rgb().formatHex()}function Vp(){return this.rgb().formatHex8()}function zp(){return Qu(this).formatHsl()}function Qo(){return this.rgb().formatRgb()}function tn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ap.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jo(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$p.exec(e))?new fe(t[1],t[2],t[3],1):(t=Mp.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pp.exec(e))?dn(t[1],t[2],t[3],t[4]):(t=Lp.exec(e))?dn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qp.exec(e))?ns(t[1],t[2]/100,t[3]/100,1):(t=Dp.exec(e))?ns(t[1],t[2]/100,t[3]/100,t[4]):Zo.hasOwnProperty(e)?Jo(Zo[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function Jo(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function dn(e,t,n,r){return r<=0&&(e=t=n=NaN),new fe(e,t,n,r)}function Fp(e){return e instanceof un||(e=tn(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function zi(e,t,n,r){return arguments.length===1?Fp(e):new fe(e,t,n,r??1)}function fe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}vo(fe,zi,Ku(un,{brighter(e){return e=e==null?Cn:Math.pow(Cn,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(ht(this.r),ht(this.g),ht(this.b),Rn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:es,formatHex:es,formatHex8:Hp,formatRgb:ts,toString:ts}));function es(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}`}function Hp(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}${lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ts(){const e=Rn(this.opacity);return`${e===1?"rgb(":"rgba("}${ht(this.r)}, ${ht(this.g)}, ${ht(this.b)}${e===1?")":`, ${e})`}`}function Rn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lt(e){return e=ht(e),(e<16?"0":"")+e.toString(16)}function ns(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ne(e,t,n,r)}function Qu(e){if(e instanceof Ne)return new Ne(e.h,e.s,e.l,e.opacity);if(e instanceof un||(e=tn(e)),!e)return new Ne;if(e instanceof Ne)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Ne(o,a,c,e.opacity)}function Op(e,t,n,r){return arguments.length===1?Qu(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}vo(Ne,Op,Ku(un,{brighter(e){return e=e==null?Cn:Math.pow(Cn,e),new Ne(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jt:Math.pow(Jt,e),new Ne(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fe(rr(e>=240?e-240:e+120,i,r),rr(e,i,r),rr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ne(rs(this.h),hn(this.s),hn(this.l),Rn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rn(this.opacity);return`${e===1?"hsl(":"hsla("}${rs(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rs(e){return e=(e||0)%360,e<0?e+360:e}function hn(e){return Math.max(0,Math.min(1,e||0))}function rr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ju=e=>()=>e;function Bp(e,t){return function(n){return e+n*t}}function Gp(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Yp(e){return(e=+e)==1?ec:function(t,n){return n-t?Gp(t,n,e):Ju(isNaN(t)?n:t)}}function ec(e,t){var n=t-e;return n?Bp(e,n):Ju(isNaN(e)?t:e)}const is=function e(t){var n=Yp(t);function r(i,s){var o=n((i=zi(i)).r,(s=zi(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=ec(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function je(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ir=new RegExp(Fi.source,"g");function Up(e){return function(){return e}}function Xp(e){return function(t){return e(t)+""}}function jp(e,t){var n=Fi.lastIndex=ir.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Fi.exec(e))&&(i=ir.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:je(r,i)})),n=ir.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Xp(c[0].x):Up(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}var os=180/Math.PI,Hi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tc(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*os,skewX:Math.atan(c)*os,scaleX:o,scaleY:a}}var pn;function Wp(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Hi:tc(t.a,t.b,t.c,t.d,t.e,t.f)}function Zp(e){return e==null||(pn||(pn=document.createElementNS("http://www.w3.org/2000/svg","g")),pn.setAttribute("transform",e),!(e=pn.transform.baseVal.consolidate()))?Hi:(e=e.matrix,tc(e.a,e.b,e.c,e.d,e.e,e.f))}function nc(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,f,d,h,g){if(l!==f||u!==d){var m=h.push("translate(",null,t,null,n);g.push({i:m-4,x:je(l,f)},{i:m-2,x:je(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,u,f,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:je(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,d){l!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:je(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,d,h,g){if(l!==f||u!==d){var m=h.push(i(h)+"scale(",null,",",null,")");g.push({i:m-4,x:je(l,f)},{i:m-2,x:je(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,u){var f=[],d=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,d),o(l.rotate,u.rotate,f,d),a(l.skewX,u.skewX,f,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,d),l=u=null,function(h){for(var g=-1,m=d.length,v;++g<m;)f[(v=d[g]).i]=v.x(h);return f.join("")}}}var Kp=nc(Wp,"px, ","px)","deg)"),Qp=nc(Zp,", ",")",")"),Jp=1e-12;function ss(e){return((e=Math.exp(e))+1/e)/2}function em(e){return((e=Math.exp(e))-1/e)/2}function tm(e){return((e=Math.exp(2*e))-1)/(e+1)}const nm=function e(t,n,r){function i(s,o){var a=s[0],c=s[1],l=s[2],u=o[0],f=o[1],d=o[2],h=u-a,g=f-c,m=h*h+g*g,v,y;if(m<Jp)y=Math.log(d/l)/t,v=function(q){return[a+q*h,c+q*g,l*Math.exp(t*q*y)]};else{var E=Math.sqrt(m),k=(d*d-l*l+r*m)/(2*l*n*E),_=(d*d-l*l-r*m)/(2*d*n*E),C=Math.log(Math.sqrt(k*k+1)-k),L=Math.log(Math.sqrt(_*_+1)-_);y=(L-C)/t,v=function(q){var M=q*y,P=ss(C),z=l/(n*E)*(P*tm(t*M+C)-em(C));return[a+z*h,c+z*g,l*P/ss(t*M+C)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i}(Math.SQRT2,2,4);var Lt=0,Ut=0,Ht=0,rc=1e3,Tn,Xt,An=0,pt=0,Gn=0,nn=typeof performance=="object"&&performance.now?performance:Date,ic=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wo(){return pt||(ic(rm),pt=nn.now()+Gn)}function rm(){pt=0}function $n(){this._call=this._time=this._next=null}$n.prototype=oc.prototype={constructor:$n,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wo():+n)+(t==null?0:+t),!this._next&&Xt!==this&&(Xt?Xt._next=this:Tn=this,Xt=this),this._call=e,this._time=n,Oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oi())}};function oc(e,t,n){var r=new $n;return r.restart(e,t,n),r}function im(){wo(),++Lt;for(var e=Tn,t;e;)(t=pt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Lt}function as(){pt=(An=nn.now())+Gn,Lt=Ut=0;try{im()}finally{Lt=0,sm(),pt=0}}function om(){var e=nn.now(),t=e-An;t>rc&&(Gn-=t,An=e)}function sm(){for(var e,t=Tn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tn=n);Xt=e,Oi(r)}function Oi(e){if(!Lt){Ut&&(Ut=clearTimeout(Ut));var t=e-pt;t>24?(e<1/0&&(Ut=setTimeout(as,e-nn.now()-Gn)),Ht&&(Ht=clearInterval(Ht))):(Ht||(An=nn.now(),Ht=setInterval(om,rc)),Lt=1,ic(as))}}function us(e,t,n){var r=new $n;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var am=On("start","end","cancel","interrupt"),um=[],sc=0,cs=1,Bi=2,En=3,ls=4,Gi=5,Nn=6;function Yn(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;cm(e,n,{name:t,index:r,group:i,on:am,tween:um,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:sc})}function xo(e,t){var n=Se(e,t);if(n.state>sc)throw new Error("too late; already scheduled");return n}function Me(e,t){var n=Se(e,t);if(n.state>En)throw new Error("too late; already running");return n}function Se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cm(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=oc(s,0,n.time);function s(l){n.state=cs,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,f,d,h;if(n.state!==cs)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===En)return us(o);h.state===ls?(h.state=Nn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=Nn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(us(function(){n.state===En&&(n.state=ls,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Bi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bi){for(n.state=En,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Gi,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===Gi&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Nn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Sn(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Bi&&r.state<Gi,r.state=Nn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function lm(e){return this.each(function(){Sn(this,e)})}function fm(e,t){var n,r;return function(){var i=Me(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function dm(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Me(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function hm(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Se(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?fm:dm)(n,e,t))}function _o(e,t,n){var r=e._id;return e.each(function(){var i=Me(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Se(i,r).value[t]}}function ac(e,t){var n;return(typeof t=="number"?je:t instanceof tn?is:(n=tn(t))?(t=n,is):jp)(e,t)}function pm(e){return function(){this.removeAttribute(e)}}function mm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gm(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function ym(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function vm(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function wm(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function xm(e,t){var n=Bn(e),r=n==="transform"?Qp:ac;return this.attrTween(e,typeof t=="function"?(n.local?wm:vm)(n,r,_o(this,"attr."+e,t)):t==null?(n.local?mm:pm)(n):(n.local?ym:gm)(n,r,t))}function _m(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bm(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Em(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&bm(e,s)),n}return i._value=t,i}function Nm(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_m(e,s)),n}return i._value=t,i}function Sm(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Bn(e);return this.tween(n,(r.local?Em:Nm)(r,t))}function km(e,t){return function(){xo(this,e).delay=+t.apply(this,arguments)}}function Im(e,t){return t=+t,function(){xo(this,e).delay=t}}function Cm(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?km:Im)(t,e)):Se(this.node(),t).delay}function Rm(e,t){return function(){Me(this,e).duration=+t.apply(this,arguments)}}function Tm(e,t){return t=+t,function(){Me(this,e).duration=t}}function Am(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rm:Tm)(t,e)):Se(this.node(),t).duration}function $m(e,t){if(typeof t!="function")throw new Error;return function(){Me(this,e).ease=t}}function Mm(e){var t=this._id;return arguments.length?this.each($m(t,e)):Se(this.node(),t).ease}function Pm(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Me(this,e).ease=n}}function Lm(e){if(typeof e!="function")throw new Error;return this.each(Pm(this._id,e))}function qm(e){typeof e!="function"&&(e=zu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new Oe(r,this._parents,this._name,this._id)}function Dm(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],l=n[a],u=c.length,f=o[a]=new Array(u),d,h=0;h<u;++h)(d=c[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Oe(o,this._parents,this._name,this._id)}function Vm(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zm(e,t,n){var r,i,s=Vm(t)?xo:Me;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Fm(e,t){var n=this._id;return arguments.length<2?Se(this.node(),n).on.on(e):this.each(zm(n,e,t))}function Hm(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Om(){return this.on("end.remove",Hm(this._id))}function Bm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=go(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,f,d=0;d<c;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),l[d]=f,Yn(l[d],t,n,d,l,Se(u,n)));return new Oe(s,this._parents,t,n)}function Gm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Vu(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var d=e.call(u,u.__data__,f,c),h,g=Se(u,n),m=0,v=d.length;m<v;++m)(h=d[m])&&Yn(h,t,n,m,d,g);s.push(d),o.push(u)}return new Oe(s,o,t,n)}var Ym=an.prototype.constructor;function Um(){return new Ym(this._groups,this._parents)}function Xm(e,t){var n,r,i;return function(){var s=Pt(this,e),o=(this.style.removeProperty(e),Pt(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function uc(e){return function(){this.style.removeProperty(e)}}function jm(e,t,n){var r,i=n+"",s;return function(){var o=Pt(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Wm(e,t,n){var r,i,s;return function(){var o=Pt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Pt(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function Zm(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=Me(this,e),l=c.on,u=c.value[s]==null?a||(a=uc(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Km(e,t,n){var r=(e+="")=="transform"?Kp:ac;return t==null?this.styleTween(e,Xm(e,r)).on("end.style."+e,uc(e)):typeof t=="function"?this.styleTween(e,Wm(e,r,_o(this,"style."+e,t))).each(Zm(this._id,e)):this.styleTween(e,jm(e,r,t),n).on("end.style."+e,null)}function Qm(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Jm(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Qm(e,o,n)),r}return s._value=t,s}function eg(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Jm(e,t,n??""))}function tg(e){return function(){this.textContent=e}}function ng(e){return function(){var t=e(this);this.textContent=t??""}}function rg(e){return this.tween("text",typeof e=="function"?ng(_o(this,"text",e)):tg(e==null?"":e+""))}function ig(e){return function(t){this.textContent=e.call(this,t)}}function og(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ig(i)),t}return r._value=e,r}function sg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,og(e))}function ag(){for(var e=this._name,t=this._id,n=cc(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=Se(c,t);Yn(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Oe(r,this._parents,e,n)}function ug(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=Me(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&s()})}var cg=0;function Oe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function cc(){return++cg}var qe=an.prototype;Oe.prototype={constructor:Oe,select:Bm,selectAll:Gm,selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:qm,merge:Dm,selection:Um,transition:ag,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:Fm,attr:xm,attrTween:Sm,style:Km,styleTween:eg,text:rg,textTween:sg,remove:Om,tween:hm,delay:Cm,duration:Am,ease:Mm,easeVarying:Lm,end:ug,[Symbol.iterator]:qe[Symbol.iterator]};function lg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fg={time:null,delay:0,duration:250,ease:lg};function dg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hg(e){var t,n;e instanceof Oe?(t=e._id,e=e._name):(t=cc(),(n=fg).time=wo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&Yn(c,e,t,l,o,n||dg(c,t));return new Oe(r,this._parents,e,t)}an.prototype.interrupt=lm;an.prototype.transition=hg;const mn=e=>()=>e;function pg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ze(e,t,n){this.k=e,this.x=t,this.y=n}ze.prototype={constructor:ze,scale:function(e){return e===1?this:new ze(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ze(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ke=new ze(1,0,0);ze.prototype;function or(e){e.stopImmediatePropagation()}function Ot(e){e.preventDefault(),e.stopImmediatePropagation()}function mg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function fs(){return this.__zoom||Ke}function yg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vg(){return navigator.maxTouchPoints||"ontouchstart"in this}function wg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function xg(){var e=mg,t=gg,n=wg,r=yg,i=vg,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=nm,l=On("start","zoom","end"),u,f,d,h=500,g=150,m=0,v=10;function y(p){p.property("__zoom",fs).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(p,b,w,I){var A=p.selection?p.selection():p;A.property("__zoom",fs),p!==A?C(p,b,w,I):A.interrupt().each(function(){L(this,arguments).event(I).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},y.scaleBy=function(p,b,w,I){y.scaleTo(p,function(){var A=this.__zoom.k,x=typeof b=="function"?b.apply(this,arguments):b;return A*x},w,I)},y.scaleTo=function(p,b,w,I){y.transform(p,function(){var A=t.apply(this,arguments),x=this.__zoom,$=w==null?_(A):typeof w=="function"?w.apply(this,arguments):w,T=x.invert($),V=typeof b=="function"?b.apply(this,arguments):b;return n(k(E(x,V),$,T),A,o)},w,I)},y.translateBy=function(p,b,w,I){y.transform(p,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),o)},null,I)},y.translateTo=function(p,b,w,I,A){y.transform(p,function(){var x=t.apply(this,arguments),$=this.__zoom,T=I==null?_(x):typeof I=="function"?I.apply(this,arguments):I;return n(Ke.translate(T[0],T[1]).scale($.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof w=="function"?-w.apply(this,arguments):-w),x,o)},I,A)};function E(p,b){return b=Math.max(s[0],Math.min(s[1],b)),b===p.k?p:new ze(b,p.x,p.y)}function k(p,b,w){var I=b[0]-w[0]*p.k,A=b[1]-w[1]*p.k;return I===p.x&&A===p.y?p:new ze(p.k,I,A)}function _(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function C(p,b,w,I){p.on("start.zoom",function(){L(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(I).end()}).tween("zoom",function(){var A=this,x=arguments,$=L(A,x).event(I),T=t.apply(A,x),V=w==null?_(T):typeof w=="function"?w.apply(A,x):w,H=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),O=A.__zoom,X=typeof b=="function"?b.apply(A,x):b,Z=c(O.invert(V).concat(H/O.k),X.invert(V).concat(H/X.k));return function(K){if(K===1)K=X;else{var J=Z(K),oe=H/J[2];K=new ze(oe,V[0]-J[0]*oe,V[1]-J[1]*oe)}$.zoom(null,K)}})}function L(p,b,w){return!w&&p.__zooming||new q(p,b)}function q(p,b){this.that=p,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,b),this.taps=0}q.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,b){return this.mouse&&p!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var b=Ee(this.that).datum();l.call(p,this.that,new pg(p,{sourceEvent:this.sourceEvent,target:y,type:p,transform:this.that.__zoom,dispatch:l}),b)}};function M(p,...b){if(!e.apply(this,arguments))return;var w=L(this,b).event(p),I=this.__zoom,A=Math.max(s[0],Math.min(s[1],I.k*Math.pow(2,r.apply(this,arguments)))),x=Te(p);if(w.wheel)(w.mouse[0][0]!==x[0]||w.mouse[0][1]!==x[1])&&(w.mouse[1]=I.invert(w.mouse[0]=x)),clearTimeout(w.wheel);else{if(I.k===A)return;w.mouse=[x,I.invert(x)],Sn(this),w.start()}Ot(p),w.wheel=setTimeout($,g),w.zoom("mouse",n(k(E(I,A),w.mouse[0],w.mouse[1]),w.extent,o));function $(){w.wheel=null,w.end()}}function P(p,...b){if(d||!e.apply(this,arguments))return;var w=p.currentTarget,I=L(this,b,!0).event(p),A=Ee(p.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",H,!0),x=Te(p,w),$=p.clientX,T=p.clientY;Wu(p.view),or(p),I.mouse=[x,this.__zoom.invert(x)],Sn(this),I.start();function V(O){if(Ot(O),!I.moved){var X=O.clientX-$,Z=O.clientY-T;I.moved=X*X+Z*Z>m}I.event(O).zoom("mouse",n(k(I.that.__zoom,I.mouse[0]=Te(O,w),I.mouse[1]),I.extent,o))}function H(O){A.on("mousemove.zoom mouseup.zoom",null),Zu(O.view,I.moved),Ot(O),I.event(O).end()}}function z(p,...b){if(e.apply(this,arguments)){var w=this.__zoom,I=Te(p.changedTouches?p.changedTouches[0]:p,this),A=w.invert(I),x=w.k*(p.shiftKey?.5:2),$=n(k(E(w,x),I,A),t.apply(this,b),o);Ot(p),a>0?Ee(this).transition().duration(a).call(C,$,I,p):Ee(this).call(y.transform,$,I,p)}}function D(p,...b){if(e.apply(this,arguments)){var w=p.touches,I=w.length,A=L(this,b,p.changedTouches.length===I).event(p),x,$,T,V;for(or(p),$=0;$<I;++$)T=w[$],V=Te(T,this),V=[V,this.__zoom.invert(V),T.identifier],A.touch0?!A.touch1&&A.touch0[2]!==V[2]&&(A.touch1=V,A.taps=0):(A.touch0=V,x=!0,A.taps=1+!!u);u&&(u=clearTimeout(u)),x&&(A.taps<2&&(f=V[0],u=setTimeout(function(){u=null},h)),Sn(this),A.start())}}function F(p,...b){if(this.__zooming){var w=L(this,b).event(p),I=p.changedTouches,A=I.length,x,$,T,V;for(Ot(p),x=0;x<A;++x)$=I[x],T=Te($,this),w.touch0&&w.touch0[2]===$.identifier?w.touch0[0]=T:w.touch1&&w.touch1[2]===$.identifier&&(w.touch1[0]=T);if($=w.that.__zoom,w.touch1){var H=w.touch0[0],O=w.touch0[1],X=w.touch1[0],Z=w.touch1[1],K=(K=X[0]-H[0])*K+(K=X[1]-H[1])*K,J=(J=Z[0]-O[0])*J+(J=Z[1]-O[1])*J;$=E($,Math.sqrt(K/J)),T=[(H[0]+X[0])/2,(H[1]+X[1])/2],V=[(O[0]+Z[0])/2,(O[1]+Z[1])/2]}else if(w.touch0)T=w.touch0[0],V=w.touch0[1];else return;w.zoom("touch",n(k($,T,V),w.extent,o))}}function S(p,...b){if(this.__zooming){var w=L(this,b).event(p),I=p.changedTouches,A=I.length,x,$;for(or(p),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),x=0;x<A;++x)$=I[x],w.touch0&&w.touch0[2]===$.identifier?delete w.touch0:w.touch1&&w.touch1[2]===$.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&($=Te($,this),Math.hypot(f[0]-$[0],f[1]-$[1])<v)){var T=Ee(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return y.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:mn(+p),y):r},y.filter=function(p){return arguments.length?(e=typeof p=="function"?p:mn(!!p),y):e},y.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:mn(!!p),y):i},y.extent=function(p){return arguments.length?(t=typeof p=="function"?p:mn([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),y):t},y.scaleExtent=function(p){return arguments.length?(s[0]=+p[0],s[1]=+p[1],y):[s[0],s[1]]},y.translateExtent=function(p){return arguments.length?(o[0][0]=+p[0][0],o[1][0]=+p[1][0],o[0][1]=+p[0][1],o[1][1]=+p[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(p){return arguments.length?(n=p,y):n},y.duration=function(p){return arguments.length?(a=+p,y):a},y.interpolate=function(p){return arguments.length?(c=p,y):c},y.on=function(){var p=l.on.apply(l,arguments);return p===l?y:p},y.clickDistance=function(p){return arguments.length?(m=(p=+p)*p,y):Math.sqrt(m)},y.tapDistance=function(p){return arguments.length?(v=+p,y):v},y}const Un=N.createContext(null),_g=Un.Provider,Be={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},lc=Be.error001();function ie(e,t){const n=N.useContext(Un);if(n===null)throw new Error(lc);return qu(n,e,t)}const ae=()=>{const e=N.useContext(Un);if(e===null)throw new Error(lc);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},bg=e=>e.userSelectionActive?"none":"all";function fc({position:e,children:t,className:n,style:r,...i}){const s=ie(bg),o=`${e}`.split("-");return R.createElement("div",{className:he(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},t)}function Eg({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:R.createElement(fc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},R.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Ng=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:l,...u})=>{const f=N.useRef(null),[d,h]=N.useState({x:0,y:0,width:0,height:0}),g=he(["react-flow__edge-textwrapper",l]);return N.useEffect(()=>{if(f.current){const m=f.current.getBBox();h({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:R.createElement("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:g,visibility:d.width?"visible":"hidden",...u},i&&R.createElement("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),R.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:r},n),c)};var Sg=N.memo(Ng);const bo=e=>({width:e.offsetWidth,height:e.offsetHeight}),qt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Eo=(e={x:0,y:0},t)=>({x:qt(e.x,t[0][0],t[1][0]),y:qt(e.y,t[0][1],t[1][1])}),ds=(e,t,n)=>e<t?qt(Math.abs(e-t),1,50)/50:e>n?-qt(Math.abs(e-n),1,50)/50:0,dc=(e,t)=>{const n=ds(e.x,35,t.width-35)*20,r=ds(e.y,35,t.height-35)*20;return[n,r]},hc=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},kg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),No=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ig=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),hs=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Yi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Cg=e=>we(e.width)&&we(e.height)&&we(e.x)&&we(e.y),we=e=>!isNaN(e)&&isFinite(e),re=Symbol.for("internals"),pc=["Enter"," ","Escape"],Rg=(e,t)=>{},Tg=e=>"nativeEvent"in e;function Ui(e){var i,s;const t=Tg(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const mc=e=>"clientX"in e,Qe=(e,t)=>{var s,o;const n=mc(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Mn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},cn=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:d,interactionWidth:h=20})=>R.createElement(R.Fragment,null,R.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:d}),h&&R.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&we(n)&&we(r)?R.createElement(Sg,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l}):null);cn.displayName="BaseEdge";function Bt(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function gc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function yc({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+i*.375+o*.375+n*.125,l=t*.125+s*.375+a*.375+r*.125,u=Math.abs(c-e),f=Math.abs(l-t);return[c,l,u,f]}var mt;(function(e){e.Strict="strict",e.Loose="loose"})(mt||(mt={}));var ft;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ft||(ft={}));var rn;(function(e){e.Partial="partial",e.Full="full"})(rn||(rn={}));var Ve;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ve||(Ve={}));var on;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(on||(on={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));function ps({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function vc({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:i,targetPosition:s=G.Top}){const[o,a]=ps({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=ps({pos:s,x1:r,y1:i,x2:e,y2:t}),[u,f,d,h]=yc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${a} ${c},${l} ${r},${i}`,u,f,d,h]}const So=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=G.Bottom,targetPosition:s=G.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:m})=>{const[v,y,E]=vc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return R.createElement(cn,{path:v,labelX:y,labelY:E,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:m})});So.displayName="SimpleBezierEdge";const ms={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},Ag=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},gs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function $g({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:i,offset:s}){const o=ms[t],a=ms[r],c={x:e.x+o.x*s,y:e.y+o.y*s},l={x:n.x+a.x*s,y:n.y+a.y*s},u=Ag({source:c,sourcePosition:t,target:l}),f=u.x!==0?"x":"y",d=u[f];let h=[],g,m;const v={x:0,y:0},y={x:0,y:0},[E,k,_,C]=gc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*a[f]===-1){g=i.x??E,m=i.y??k;const q=[{x:g,y:c.y},{x:g,y:l.y}],M=[{x:c.x,y:m},{x:l.x,y:m}];o[f]===d?h=f==="x"?q:M:h=f==="x"?M:q}else{const q=[{x:c.x,y:l.y}],M=[{x:l.x,y:c.y}];if(f==="x"?h=o.x===d?M:q:h=o.y===d?q:M,t===r){const S=Math.abs(e[f]-n[f]);if(S<=s){const p=Math.min(s-1,s-S);o[f]===d?v[f]=(c[f]>e[f]?-1:1)*p:y[f]=(l[f]>n[f]?-1:1)*p}}if(t!==r){const S=f==="x"?"y":"x",p=o[f]===a[S],b=c[S]>l[S],w=c[S]<l[S];(o[f]===1&&(!p&&b||p&&w)||o[f]!==1&&(!p&&w||p&&b))&&(h=f==="x"?q:M)}const P={x:c.x+v.x,y:c.y+v.y},z={x:l.x+y.x,y:l.y+y.y},D=Math.max(Math.abs(P.x-h[0].x),Math.abs(z.x-h[0].x)),F=Math.max(Math.abs(P.y-h[0].y),Math.abs(z.y-h[0].y));D>=F?(g=(P.x+z.x)/2,m=h[0].y):(g=h[0].x,m=(P.y+z.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...h,{x:l.x+y.x,y:l.y+y.y},n],g,m,_,C]}function Mg(e,t,n,r){const i=Math.min(gs(e,t)/2,gs(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+i*l},${o}Q ${s},${o} ${s},${o+i*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*a},${o}`}function Xi({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:i,targetPosition:s=G.Top,borderRadius:o=5,centerX:a,centerY:c,offset:l=20}){const[u,f,d,h,g]=$g({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:c},offset:l});return[u.reduce((v,y,E)=>{let k="";return E>0&&E<u.length-1?k=Mg(u[E-1],y,u[E+1],o):k=`${E===0?"M":"L"}${y.x} ${y.y}`,v+=k,v},""),f,d,h,g]}const Xn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:f=G.Bottom,targetPosition:d=G.Top,markerEnd:h,markerStart:g,pathOptions:m,interactionWidth:v})=>{const[y,E,k]=Xi({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:d,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return R.createElement(cn,{path:y,labelX:E,labelY:k,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:g,interactionWidth:v})});Xn.displayName="SmoothStepEdge";const ko=N.memo(e=>{var t;return R.createElement(Xn,{...e,pathOptions:N.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});ko.displayName="StepEdge";function Pg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=gc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Io=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:d,interactionWidth:h})=>{const[g,m,v]=Pg({sourceX:e,sourceY:t,targetX:n,targetY:r});return R.createElement(cn,{path:g,labelX:m,labelY:v,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:d,interactionWidth:h})});Io.displayName="StraightEdge";function gn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ys({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case G.Left:return[t-gn(t-r,s),n];case G.Right:return[t+gn(r-t,s),n];case G.Top:return[t,n-gn(n-i,s)];case G.Bottom:return[t,n+gn(i-n,s)]}}function wc({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:i,targetPosition:s=G.Top,curvature:o=.25}){const[a,c]=ys({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=ys({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[f,d,h,g]=yc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${r},${i}`,f,d,h,g]}const Pn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=G.Bottom,targetPosition:s=G.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,pathOptions:m,interactionWidth:v})=>{const[y,E,k]=wc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:m==null?void 0:m.curvature});return R.createElement(cn,{path:y,labelX:E,labelY:k,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:v})});Pn.displayName="BezierEdge";const Co=N.createContext(null),Lg=Co.Provider;Co.Consumer;const qg=()=>N.useContext(Co),Dg=e=>"id"in e&&"source"in e&&"target"in e,Vg=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,ji=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,zg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Fg=(e,t)=>{if(!e.source||!e.target)return t;let n;return Dg(e)?n={...e}:n={...e,id:Vg(e)},zg(n,t)?t:t.concat(n)},Wi=({x:e,y:t},[n,r,i],s,[o,a])=>{const c={x:(e-n)/i,y:(t-r)/i};return s?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},xc=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),At=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ro=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:o}=At(i,t).positionAbsolute;return kg(r,No({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ig(n)},_c=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(u=>{const{width:f,height:d,selectable:h=!0,hidden:g=!1}=u;if(o&&!h||g)return!1;const{positionAbsolute:m}=At(u,a),v={x:m.x,y:m.y,width:f||0,height:d||0},y=Yi(c,v),E=typeof f>"u"||typeof d>"u"||f===null||d===null,k=s&&y>0,_=(f||0)*(d||0);(E||k||y>=_||u.dragging)&&l.push(u)}),l},To=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},bc=(e,t,n,r,i,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(o,a),l=qt(c,r,i),u=e.x+e.width/2,f=e.y+e.height/2,d=t/2-u*l,h=n/2-f*l;return{x:d,y:h,zoom:l}},ct=(e,t=0)=>e.transition().duration(t);function vs(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function Hg(e,t,n,r,i,s){const{x:o,y:a}=Qe(e),l=t.elementsFromPoint(o,a).find(g=>g.classList.contains("react-flow__handle"));if(l){const g=l.getAttribute("data-nodeid");if(g){const m=Ao(void 0,l),v=l.getAttribute("data-handleid"),y=s({nodeId:g,id:v,type:m});if(y){const E=i.find(k=>k.nodeId===g&&k.type===m&&k.id===v);return{handle:{id:v,type:m,nodeId:g,x:(E==null?void 0:E.x)||n.x,y:(E==null?void 0:E.y)||n.y},validHandleResult:y}}}}let u=[],f=1/0;if(i.forEach(g=>{const m=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(m<=r){const v=s(g);m<=f&&(m<f?u=[{handle:g,validHandleResult:v}]:m===f&&u.push({handle:g,validHandleResult:v}),f=m)}}),!u.length)return{handle:null,validHandleResult:Ec()};if(u.length===1)return u[0];const d=u.some(({validHandleResult:g})=>g.isValid),h=u.some(({handle:g})=>g.type==="target");return u.find(({handle:g,validHandleResult:m})=>h?g.type==="target":d?m.isValid:!0)||u[0]}const Og={source:null,target:null,sourceHandle:null,targetHandle:null},Ec=()=>({handleDomNode:null,isValid:!1,connection:Og,endHandle:null});function Nc(e,t,n,r,i,s,o){const a=i==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),l={...Ec(),handleDomNode:c};if(c){const u=Ao(void 0,c),f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),m={source:a?f:n,sourceHandle:a?d:r,target:a?n:f,targetHandle:a?r:d};l.connection=m,h&&g&&(t===mt.Strict?a&&u==="source"||!a&&u==="target":f!==n||d!==r)&&(l.endHandle={nodeId:f,handleId:d,type:u},l.isValid=s(m))}return l}function Bg({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[re]){const{handleBounds:o}=s[re];let a=[],c=[];o&&(a=vs(s,o,"source",`${t}-${n}-${r}`),c=vs(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function Ao(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function sr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Gg(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Sc({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:c,onEdgeUpdateEnd:l}){const u=hc(e.target),{connectionMode:f,domNode:d,autoPanOnConnect:h,connectionRadius:g,onConnectStart:m,panBy:v,getNodes:y,cancelConnection:E}=s();let k=0,_;const{x:C,y:L}=Qe(e),q=u==null?void 0:u.elementFromPoint(C,L),M=Ao(c,q),P=d==null?void 0:d.getBoundingClientRect();if(!P||!M)return;let z,D=Qe(e,P),F=!1,S=null,p=!1,b=null;const w=Bg({nodes:y(),nodeId:n,handleId:t,handleType:M}),I=()=>{if(!h)return;const[$,T]=dc(D,P);v({x:$,y:T}),k=requestAnimationFrame(I)};o({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),m==null||m(e,{nodeId:n,handleId:t,handleType:M});function A($){const{transform:T}=s();D=Qe($,P);const{handle:V,validHandleResult:H}=Hg($,u,Wi(D,T,!1,[1,1]),g,w,O=>Nc(O,f,n,t,i?"target":"source",a,u));if(_=V,F||(I(),F=!0),b=H.handleDomNode,S=H.connection,p=H.isValid,o({connectionPosition:_&&p?xc({x:_.x,y:_.y},T):D,connectionStatus:Gg(!!_,p),connectionEndHandle:H.endHandle}),!_&&!p&&!b)return sr(z);S.source!==S.target&&b&&(sr(z),z=b,b.classList.add("connecting","react-flow__handle-connecting"),b.classList.toggle("valid",p),b.classList.toggle("react-flow__handle-valid",p))}function x($){var T,V;(_||b)&&S&&p&&(r==null||r(S)),(V=(T=s()).onConnectEnd)==null||V.call(T,$),c&&(l==null||l($)),sr(z),E(),cancelAnimationFrame(k),F=!1,p=!1,S=null,b=null,u.removeEventListener("mousemove",A),u.removeEventListener("mouseup",x),u.removeEventListener("touchmove",A),u.removeEventListener("touchend",x)}u.addEventListener("mousemove",A),u.addEventListener("mouseup",x),u.addEventListener("touchmove",A),u.addEventListener("touchend",x)}const ws=()=>!0,Yg=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Ug=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},kc=N.forwardRef(({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:c,className:l,onMouseDown:u,onTouchStart:f,...d},h)=>{var P,z;const g=o||null,m=e==="target",v=ae(),y=qg(),{connectOnClick:E,noPanClassName:k}=ie(Yg,ce),{connecting:_,clickConnecting:C}=ie(Ug(y,g,e),ce);y||(z=(P=v.getState()).onError)==null||z.call(P,"010",Be.error010());const L=D=>{const{defaultEdgeOptions:F,onConnect:S,hasDefaultEdges:p}=v.getState(),b={...F,...D};if(p){const{edges:w,setEdges:I}=v.getState();I(Fg(b,w))}S==null||S(b),a==null||a(b)},q=D=>{if(!y)return;const F=mc(D);i&&(F&&D.button===0||!F)&&Sc({event:D,handleId:g,nodeId:y,onConnect:L,isTarget:m,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||ws}),F?u==null||u(D):f==null||f(D)},M=D=>{const{onClickConnectStart:F,onClickConnectEnd:S,connectionClickStartHandle:p,connectionMode:b,isValidConnection:w}=v.getState();if(!y||!p&&!i)return;if(!p){F==null||F(D,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const I=hc(D.target),A=n||w||ws,{connection:x,isValid:$}=Nc({nodeId:y,id:g,type:e},b,p.nodeId,p.handleId||null,p.type,A,I);$&&L(x),S==null||S(D),v.setState({connectionClickStartHandle:null})};return R.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:he(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,l,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:s,connecting:C,connectionindicator:r&&(i&&!_||s&&_)}]),onMouseDown:q,onTouchStart:q,onClick:E?M:void 0,ref:h,...d},c)});kc.displayName="Handle";var Ln=N.memo(kc);const Ic=({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom})=>R.createElement(R.Fragment,null,R.createElement(Ln,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,R.createElement(Ln,{type:"source",position:r,isConnectable:t}));Ic.displayName="DefaultNode";var Zi=N.memo(Ic);const Cc=({data:e,isConnectable:t,sourcePosition:n=G.Bottom})=>R.createElement(R.Fragment,null,e==null?void 0:e.label,R.createElement(Ln,{type:"source",position:n,isConnectable:t}));Cc.displayName="InputNode";var Rc=N.memo(Cc);const Tc=({data:e,isConnectable:t,targetPosition:n=G.Top})=>R.createElement(R.Fragment,null,R.createElement(Ln,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Tc.displayName="OutputNode";var Ac=N.memo(Tc);const $o=()=>null;$o.displayName="GroupNode";const Xg=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),yn=e=>e.id;function jg(e,t){return ce(e.selectedNodes.map(yn),t.selectedNodes.map(yn))&&ce(e.selectedEdges.map(yn),t.selectedEdges.map(yn))}const $c=N.memo(({onSelectionChange:e})=>{const t=ae(),{selectedNodes:n,selectedEdges:r}=ie(Xg,jg);return N.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});$c.displayName="SelectionListener";const Wg=e=>!!e.onSelectionChange;function Zg({onSelectionChange:e}){const t=ie(Wg);return e||t?R.createElement($c,{onSelectionChange:e}):null}const Kg=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Et(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function W(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Qg=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:f,edgesFocusable:d,edgesUpdatable:h,elevateNodesOnSelect:g,minZoom:m,maxZoom:v,nodeExtent:y,onNodesChange:E,onEdgesChange:k,elementsSelectable:_,connectionMode:C,snapGrid:L,snapToGrid:q,translateExtent:M,connectOnClick:P,defaultEdgeOptions:z,fitView:D,fitViewOptions:F,onNodesDelete:S,onEdgesDelete:p,onNodeDrag:b,onNodeDragStart:w,onNodeDragStop:I,onSelectionDrag:A,onSelectionDragStart:x,onSelectionDragStop:$,noPanClassName:T,nodeOrigin:V,rfId:H,autoPanOnConnect:O,autoPanOnNodeDrag:X,onError:Z,connectionRadius:K,isValidConnection:J,nodeDragThreshold:oe})=>{const{setNodes:ee,setEdges:pe,setDefaultNodesAndEdges:ve,setMinZoom:_e,setMaxZoom:Ie,setTranslateExtent:se,setNodeExtent:Ce,reset:te}=ie(Kg,ce),Y=ae();return N.useEffect(()=>{const me=r==null?void 0:r.map(nt=>({...nt,...z}));return ve(n,me),()=>{te()}},[]),W("defaultEdgeOptions",z,Y.setState),W("connectionMode",C,Y.setState),W("onConnect",i,Y.setState),W("onConnectStart",s,Y.setState),W("onConnectEnd",o,Y.setState),W("onClickConnectStart",a,Y.setState),W("onClickConnectEnd",c,Y.setState),W("nodesDraggable",l,Y.setState),W("nodesConnectable",u,Y.setState),W("nodesFocusable",f,Y.setState),W("edgesFocusable",d,Y.setState),W("edgesUpdatable",h,Y.setState),W("elementsSelectable",_,Y.setState),W("elevateNodesOnSelect",g,Y.setState),W("snapToGrid",q,Y.setState),W("snapGrid",L,Y.setState),W("onNodesChange",E,Y.setState),W("onEdgesChange",k,Y.setState),W("connectOnClick",P,Y.setState),W("fitViewOnInit",D,Y.setState),W("fitViewOnInitOptions",F,Y.setState),W("onNodesDelete",S,Y.setState),W("onEdgesDelete",p,Y.setState),W("onNodeDrag",b,Y.setState),W("onNodeDragStart",w,Y.setState),W("onNodeDragStop",I,Y.setState),W("onSelectionDrag",A,Y.setState),W("onSelectionDragStart",x,Y.setState),W("onSelectionDragStop",$,Y.setState),W("noPanClassName",T,Y.setState),W("nodeOrigin",V,Y.setState),W("rfId",H,Y.setState),W("autoPanOnConnect",O,Y.setState),W("autoPanOnNodeDrag",X,Y.setState),W("onError",Z,Y.setState),W("connectionRadius",K,Y.setState),W("isValidConnection",J,Y.setState),W("nodeDragThreshold",oe,Y.setState),Et(e,ee),Et(t,pe),Et(m,_e),Et(v,Ie),Et(M,se),Et(y,Ce),null},xs={display:"none"},Jg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Mc="react-flow__node-desc",Pc="react-flow__edge-desc",ey="react-flow__aria-live",ty=e=>e.ariaLiveMessage;function ny({rfId:e}){const t=ie(ty);return R.createElement("div",{id:`${ey}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Jg},t)}function ry({rfId:e,disableKeyboardA11y:t}){return R.createElement(R.Fragment,null,R.createElement("div",{id:`${Mc}-${e}`,style:xs},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),R.createElement("div",{id:`${Pc}-${e}`,style:xs},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&R.createElement(ny,{rfId:e}))}var sn=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=N.useState(!1),i=N.useRef(!1),s=N.useRef(new Set([])),[o,a]=N.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=l.reduce((f,d)=>f.concat(...d),[]);return[l,u]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,l=(t==null?void 0:t.target)||c;if(e!==null){const u=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Ui(h))return!1;const m=bs(h.code,a);s.current.add(h[m]),_s(o,s.current,!1)&&(h.preventDefault(),r(!0))},f=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Ui(h))return!1;const m=bs(h.code,a);_s(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[m]),h.key==="Meta"&&s.current.clear(),i.current=!1},d=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",f),window.addEventListener("blur",d),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",f),window.removeEventListener("blur",d)}}},[e,r]),n};function _s(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function bs(e,t){return t.includes(e)?"code":"key"}function Lc(e,t,n,r){var a,c;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),o=At(s,r);return Lc(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[re])==null?void 0:a.z)??0)>(n.z??0)?((c=s[re])==null?void 0:c.z)??0:n.z??0},r)}function qc(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:c}=Lc(r,e,{...r.position,z:((s=r[re])==null?void 0:s.z)??0},t);r.positionAbsolute={x:o,y:a},r[re].z=c,n!=null&&n[r.id]&&(r[re].isParent=!0)}})}function ar(e,t,n,r){const i=new Map,s={},o=r?1e3:0;return e.forEach(a=>{var h;const c=(we(a.zIndex)?a.zIndex:0)+(a.selected?o:0),l=t.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);const d=(l==null?void 0:l.type)&&(l==null?void 0:l.type)!==a.type;Object.defineProperty(u,re,{enumerable:!1,value:{handleBounds:d||(h=l==null?void 0:l[re])==null?void 0:h.handleBounds,z:c}}),i.set(a.id,u)}),qc(i,n,s),i}function Dc(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:f}=e(),d=t.initial&&!l&&u;if(a&&c&&(d||!t.initial)){const g=n().filter(v=>{var E;const y=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(E=t.nodes)!=null&&E.length?y&&t.nodes.some(k=>k.id===v.id):y}),m=g.every(v=>v.width&&v.height);if(g.length>0&&m){const v=Ro(g,f),{x:y,y:E,zoom:k}=bc(v,r,i,t.minZoom??s,t.maxZoom??o,t.padding??.1),_=Ke.translate(y,E).scale(k);return typeof t.duration=="number"&&t.duration>0?a.transform(ct(c,t.duration),_):a.transform(c,_),!0}}return!1}function iy(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[re]:r[re],selected:n.selected})}),new Map(t)}function oy(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function vn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:l}=n();e!=null&&e.length&&(c&&r({nodeInternals:iy(e,i)}),o==null||o(e)),t!=null&&t.length&&(l&&r({edges:oy(t,s)}),a==null||a(t))}const Nt=()=>{},sy={zoomIn:Nt,zoomOut:Nt,zoomTo:Nt,getZoom:()=>1,setViewport:Nt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Nt,fitBounds:Nt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ay=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),uy=()=>{const e=ae(),{d3Zoom:t,d3Selection:n}=ie(ay,ce);return N.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(ct(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(ct(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(ct(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[o,a,c]=e.getState().transform,l=Ke.translate(i.x??o,i.y??a).scale(i.zoom??c);t.transform(ct(n,s==null?void 0:s.duration),l)},getViewport:()=>{const[i,s,o]=e.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>Dc(e.getState,i),setCenter:(i,s,o)=>{const{width:a,height:c,maxZoom:l}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:l,f=a/2-i*u,d=c/2-s*u,h=Ke.translate(f,d).scale(u);t.transform(ct(n,o==null?void 0:o.duration),h)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:c,maxZoom:l}=e.getState(),{x:u,y:f,zoom:d}=bc(i,o,a,c,l,(s==null?void 0:s.padding)??.1),h=Ke.translate(u,f).scale(d);t.transform(ct(n,s==null?void 0:s.duration),h)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Wi(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return i;const{x:l,y:u}=c.getBoundingClientRect(),f={x:i.x-l,y:i.y-u};return Wi(f,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=e.getState();if(!o)return i;const{x:a,y:c}=o.getBoundingClientRect(),l=xc(i,s);return{x:l.x+a,y:l.y+c}},viewportInitialized:!0}:sy,[t,n])};function jn(){const e=uy(),t=ae(),n=N.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),r=N.useCallback(m=>t.getState().nodeInternals.get(m),[]),i=N.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(v=>({...v}))},[]),s=N.useCallback(m=>{const{edges:v=[]}=t.getState();return v.find(y=>y.id===m)},[]),o=N.useCallback(m=>{const{getNodes:v,setNodes:y,hasDefaultNodes:E,onNodesChange:k}=t.getState(),_=v(),C=typeof m=="function"?m(_):m;if(E)y(C);else if(k){const L=C.length===0?_.map(q=>({type:"remove",id:q.id})):C.map(q=>({item:q,type:"reset"}));k(L)}},[]),a=N.useCallback(m=>{const{edges:v=[],setEdges:y,hasDefaultEdges:E,onEdgesChange:k}=t.getState(),_=typeof m=="function"?m(v):m;if(E)y(_);else if(k){const C=_.length===0?v.map(L=>({type:"remove",id:L.id})):_.map(L=>({item:L,type:"reset"}));k(C)}},[]),c=N.useCallback(m=>{const v=Array.isArray(m)?m:[m],{getNodes:y,setNodes:E,hasDefaultNodes:k,onNodesChange:_}=t.getState();if(k){const L=[...y(),...v];E(L)}else if(_){const C=v.map(L=>({item:L,type:"add"}));_(C)}},[]),l=N.useCallback(m=>{const v=Array.isArray(m)?m:[m],{edges:y=[],setEdges:E,hasDefaultEdges:k,onEdgesChange:_}=t.getState();if(k)E([...y,...v]);else if(_){const C=v.map(L=>({item:L,type:"add"}));_(C)}},[]),u=N.useCallback(()=>{const{getNodes:m,edges:v=[],transform:y}=t.getState(),[E,k,_]=y;return{nodes:m().map(C=>({...C})),edges:v.map(C=>({...C})),viewport:{x:E,y:k,zoom:_}}},[]),f=N.useCallback(({nodes:m,edges:v})=>{const{nodeInternals:y,getNodes:E,edges:k,hasDefaultNodes:_,hasDefaultEdges:C,onNodesDelete:L,onEdgesDelete:q,onNodesChange:M,onEdgesChange:P}=t.getState(),z=(m||[]).map(b=>b.id),D=(v||[]).map(b=>b.id),F=E().reduce((b,w)=>{const I=w.parentNode||w.parentId,A=!z.includes(w.id)&&I&&b.find($=>$.id===I);return(typeof w.deletable=="boolean"?w.deletable:!0)&&(z.includes(w.id)||A)&&b.push(w),b},[]),S=k.filter(b=>typeof b.deletable=="boolean"?b.deletable:!0),p=S.filter(b=>D.includes(b.id));if(F||p){const b=To(F,S),w=[...p,...b],I=w.reduce((A,x)=>(A.includes(x.id)||A.push(x.id),A),[]);if((C||_)&&(C&&t.setState({edges:k.filter(A=>!I.includes(A.id))}),_&&(F.forEach(A=>{y.delete(A.id)}),t.setState({nodeInternals:new Map(y)}))),I.length>0&&(q==null||q(w),P&&P(I.map(A=>({id:A,type:"remove"})))),F.length>0&&(L==null||L(F),M)){const A=F.map(x=>({id:x.id,type:"remove"}));M(A)}}},[]),d=N.useCallback(m=>{const v=Cg(m),y=v?null:t.getState().nodeInternals.get(m.id);return!v&&!y?[null,null,v]:[v?m:hs(y),y,v]},[]),h=N.useCallback((m,v=!0,y)=>{const[E,k,_]=d(m);return E?(y||t.getState().getNodes()).filter(C=>{if(!_&&(C.id===k.id||!C.positionAbsolute))return!1;const L=hs(C),q=Yi(L,E);return v&&q>0||q>=E.width*E.height}):[]},[]),g=N.useCallback((m,v,y=!0)=>{const[E]=d(m);if(!E)return!1;const k=Yi(E,v);return y&&k>0||k>=E.width*E.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:c,addEdges:l,toObject:u,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:g}),[e,n,r,i,s,o,a,c,l,u,f,h,g])}const cy={actInsideInputWithModifier:!1};var ly=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ae(),{deleteElements:r}=jn(),i=sn(e,cy),s=sn(t);N.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),c=a().filter(u=>u.selected),l=o.filter(u=>u.selected);r({nodes:c,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),N.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function fy(e){const t=ae();N.useEffect(()=>{let n;const r=()=>{var s,o;if(!e.current)return;const i=bo(e.current);(i.height===0||i.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Be.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Mo={position:"absolute",width:"100%",height:"100%",top:0,left:0},dy=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,wn=e=>({x:e.x,y:e.y,zoom:e.k}),St=(e,t)=>e.target.closest(`.${t}`),Es=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ns=e=>{const t=e.ctrlKey&&Mn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},hy=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),py=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=ft.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:d,translateExtent:h,minZoom:g,maxZoom:m,zoomActivationKeyCode:v,preventScrolling:y=!0,children:E,noWheelClassName:k,noPanClassName:_})=>{const C=N.useRef(),L=ae(),q=N.useRef(!1),M=N.useRef(!1),P=N.useRef(null),z=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:F,d3ZoomHandler:S,userSelectionActive:p}=ie(hy,ce),b=sn(v),w=N.useRef(0),I=N.useRef(!1),A=N.useRef();return fy(P),N.useEffect(()=>{if(P.current){const x=P.current.getBoundingClientRect(),$=xg().scaleExtent([g,m]).translateExtent(h),T=Ee(P.current).call($),V=Ke.translate(d.x,d.y).scale(qt(d.zoom,g,m)),H=[[0,0],[x.width,x.height]],O=$.constrain()(V,H,h);$.transform(T,O),$.wheelDelta(Ns),L.setState({d3Zoom:$,d3Selection:T,d3ZoomHandler:T.on("wheel.zoom"),transform:[O.x,O.y,O.k],domNode:P.current.closest(".react-flow")})}},[]),N.useEffect(()=>{F&&D&&(o&&!b&&!p?F.on("wheel.zoom",x=>{if(St(x,k))return!1;x.preventDefault(),x.stopImmediatePropagation();const $=F.property("__zoom").k||1,T=Mn();if(x.ctrlKey&&s&&T){const oe=Te(x),ee=Ns(x),pe=$*Math.pow(2,ee);D.scaleTo(F,pe,oe,x);return}const V=x.deltaMode===1?20:1;let H=c===ft.Vertical?0:x.deltaX*V,O=c===ft.Horizontal?0:x.deltaY*V;!T&&x.shiftKey&&c!==ft.Vertical&&(H=x.deltaY*V,O=0),D.translateBy(F,-(H/$)*a,-(O/$)*a,{internal:!0});const X=wn(F.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:K,onViewportChangeEnd:J}=L.getState();clearTimeout(A.current),I.current||(I.current=!0,t==null||t(x,X),Z==null||Z(X)),I.current&&(e==null||e(x,X),K==null||K(X),A.current=setTimeout(()=>{n==null||n(x,X),J==null||J(X),I.current=!1},150))},{passive:!1}):typeof S<"u"&&F.on("wheel.zoom",function(x,$){if(!y&&x.type==="wheel"&&!x.ctrlKey||St(x,k))return null;x.preventDefault(),S.call(this,x,$)},{passive:!1}))},[p,o,c,F,D,S,b,s,y,k,t,e,n]),N.useEffect(()=>{D&&D.on("start",x=>{var V,H;if(!x.sourceEvent||x.sourceEvent.internal)return null;w.current=(V=x.sourceEvent)==null?void 0:V.button;const{onViewportChangeStart:$}=L.getState(),T=wn(x.transform);q.current=!0,z.current=T,((H=x.sourceEvent)==null?void 0:H.type)==="mousedown"&&L.setState({paneDragging:!0}),$==null||$(T),t==null||t(x.sourceEvent,T)})},[D,t]),N.useEffect(()=>{D&&(p&&!q.current?D.on("zoom",null):p||D.on("zoom",x=>{var T;const{onViewportChange:$}=L.getState();if(L.setState({transform:[x.transform.x,x.transform.y,x.transform.k]}),M.current=!!(r&&Es(f,w.current??0)),(e||$)&&!((T=x.sourceEvent)!=null&&T.internal)){const V=wn(x.transform);$==null||$(V),e==null||e(x.sourceEvent,V)}}))},[p,D,e,f,r]),N.useEffect(()=>{D&&D.on("end",x=>{if(!x.sourceEvent||x.sourceEvent.internal)return null;const{onViewportChangeEnd:$}=L.getState();if(q.current=!1,L.setState({paneDragging:!1}),r&&Es(f,w.current??0)&&!M.current&&r(x.sourceEvent),M.current=!1,(n||$)&&dy(z.current,x.transform)){const T=wn(x.transform);z.current=T,clearTimeout(C.current),C.current=setTimeout(()=>{$==null||$(T),n==null||n(x.sourceEvent,T)},o?150:0)}})},[D,o,f,n,r]),N.useEffect(()=>{D&&D.filter(x=>{const $=b||i,T=s&&x.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&x.button===1&&x.type==="mousedown"&&(St(x,"react-flow__node")||St(x,"react-flow__edge")))return!0;if(!f&&!$&&!o&&!l&&!s||p||!l&&x.type==="dblclick"||St(x,k)&&x.type==="wheel"||St(x,_)&&(x.type!=="wheel"||o&&x.type==="wheel"&&!b)||!s&&x.ctrlKey&&x.type==="wheel"||!$&&!o&&!T&&x.type==="wheel"||!f&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(f)&&!f.includes(x.button)&&(x.type==="mousedown"||x.type==="touchstart"))return!1;const V=Array.isArray(f)&&f.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||x.type==="wheel")&&V})},[p,D,i,s,o,l,f,u,b]),R.createElement("div",{className:"react-flow__renderer",ref:P,style:Mo},E)},my=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function gy(){const{userSelectionActive:e,userSelectionRect:t}=ie(my,ce);return e&&t?R.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Ss(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Vc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Ss(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Ss(r,o);break}case"remove":return r}return r.push(o),r},n)}function zc(e,t){return Vc(e,t)}function yy(e,t){return Vc(e,t)}const We=(e,t)=>({id:e,type:"select",selected:t});function Ct(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(We(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(We(r.id,!1))),n},[])}const ur=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},vy=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Fc=N.memo(({isSelecting:e,selectionMode:t=rn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:f})=>{const d=N.useRef(null),h=ae(),g=N.useRef(0),m=N.useRef(0),v=N.useRef(),{userSelectionActive:y,elementsSelectable:E,dragging:k}=ie(vy,ce),_=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,m.current=0},C=S=>{s==null||s(S),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},L=S=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){S.preventDefault();return}o==null||o(S)},q=a?S=>a(S):void 0,M=S=>{const{resetSelectedElements:p,domNode:b}=h.getState();if(v.current=b==null?void 0:b.getBoundingClientRect(),!E||!e||S.button!==0||S.target!==d.current||!v.current)return;const{x:w,y:I}=Qe(S,v.current);p(),h.setState({userSelectionRect:{width:0,height:0,startX:w,startY:I,x:w,y:I}}),r==null||r(S)},P=S=>{const{userSelectionRect:p,nodeInternals:b,edges:w,transform:I,onNodesChange:A,onEdgesChange:x,nodeOrigin:$,getNodes:T}=h.getState();if(!e||!v.current||!p)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=Qe(S,v.current),H=p.startX??0,O=p.startY??0,X={...p,x:V.x<H?V.x:H,y:V.y<O?V.y:O,width:Math.abs(V.x-H),height:Math.abs(V.y-O)},Z=T(),K=_c(b,X,I,t===rn.Partial,!0,$),J=To(K,w).map(ee=>ee.id),oe=K.map(ee=>ee.id);if(g.current!==oe.length){g.current=oe.length;const ee=Ct(Z,oe);ee.length&&(A==null||A(ee))}if(m.current!==J.length){m.current=J.length;const ee=Ct(w,J);ee.length&&(x==null||x(ee))}h.setState({userSelectionRect:X})},z=S=>{if(S.button!==0)return;const{userSelectionRect:p}=h.getState();!y&&p&&S.target===d.current&&(C==null||C(S)),h.setState({nodesSelectionActive:g.current>0}),_(),i==null||i(S)},D=S=>{y&&(h.setState({nodesSelectionActive:g.current>0}),i==null||i(S)),_()},F=E&&(e||y);return R.createElement("div",{className:he(["react-flow__pane",{dragging:k,selection:e}]),onClick:F?void 0:ur(C,d),onContextMenu:ur(L,d),onWheel:ur(q,d),onMouseEnter:F?void 0:c,onMouseDown:F?M:void 0,onMouseMove:F?P:l,onMouseUp:F?z:void 0,onMouseLeave:F?D:u,ref:d,style:Mo},f,R.createElement(gy,null))});Fc.displayName="Pane";function Hc(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Hc(r,t):!1}function ks(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function wy(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Hc(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function xy(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Oc(e,t,n,r,i=[0,0],s){const o=xy(e,e.extent||r);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:d,y:h}=At(f,i).positionAbsolute;a=f&&we(d)&&we(h)&&we(f.width)&&we(f.height)?[[d+e.width*i[0],h+e.height*i[1]],[d+f.width-e.width+e.width*i[0],h+f.height-e.height+e.height*i[1]]]:a}else s==null||s("005",Be.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:d,y:h}=At(f,i).positionAbsolute;a=[[e.extent[0][0]+d,e.extent[0][1]+h],[e.extent[1][0]+d,e.extent[1][1]+h]]}let l={x:0,y:0};if(c){const f=n.get(c);l=At(f,i).positionAbsolute}const u=a&&a!=="parent"?Eo(t,a):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function cr({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Is=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-o.left-a.x)/n,y:(l.top-o.top-a.y)/n,...bo(c)}})};function Gt(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Ki({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),l=a.get(e);if(!l){c==null||c("012",Be.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(s({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):i([e])}function _y(){const e=ae();return N.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:s?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function lr(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Bc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=ae(),[c,l]=N.useState(!1),u=N.useRef([]),f=N.useRef({x:null,y:null}),d=N.useRef(0),h=N.useRef(null),g=N.useRef({x:0,y:0}),m=N.useRef(null),v=N.useRef(!1),y=N.useRef(!1),E=_y();return N.useEffect(()=>{if(e!=null&&e.current){const k=Ee(e.current),_=({x:q,y:M})=>{const{nodeInternals:P,onNodeDrag:z,onSelectionDrag:D,updateNodePositions:F,nodeExtent:S,snapGrid:p,snapToGrid:b,nodeOrigin:w,onError:I}=a.getState();f.current={x:q,y:M};let A=!1,x={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&S){const T=Ro(u.current,w);x=No(T)}if(u.current=u.current.map(T=>{const V={x:q-T.distance.x,y:M-T.distance.y};b&&(V.x=p[0]*Math.round(V.x/p[0]),V.y=p[1]*Math.round(V.y/p[1]));const H=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];u.current.length>1&&S&&!T.extent&&(H[0][0]=T.positionAbsolute.x-x.x+S[0][0],H[1][0]=T.positionAbsolute.x+(T.width??0)-x.x2+S[1][0],H[0][1]=T.positionAbsolute.y-x.y+S[0][1],H[1][1]=T.positionAbsolute.y+(T.height??0)-x.y2+S[1][1]);const O=Oc(T,V,P,H,w,I);return A=A||T.position.x!==O.position.x||T.position.y!==O.position.y,T.position=O.position,T.positionAbsolute=O.positionAbsolute,T}),!A)return;F(u.current,!0,!0),l(!0);const $=i?z:lr(D);if($&&m.current){const[T,V]=cr({nodeId:i,dragItems:u.current,nodeInternals:P});$(m.current,T,V)}},C=()=>{if(!h.current)return;const[q,M]=dc(g.current,h.current);if(q!==0||M!==0){const{transform:P,panBy:z}=a.getState();f.current.x=(f.current.x??0)-q/P[2],f.current.y=(f.current.y??0)-M/P[2],z({x:q,y:M})&&_(f.current)}d.current=requestAnimationFrame(C)},L=q=>{var w;const{nodeInternals:M,multiSelectionActive:P,nodesDraggable:z,unselectNodesAndEdges:D,onNodeDragStart:F,onSelectionDragStart:S}=a.getState();y.current=!0;const p=i?F:lr(S);(!o||!s)&&!P&&i&&((w=M.get(i))!=null&&w.selected||D()),i&&s&&o&&Ki({id:i,store:a,nodeRef:e});const b=E(q);if(f.current=b,u.current=wy(M,z,b,i),p&&u.current){const[I,A]=cr({nodeId:i,dragItems:u.current,nodeInternals:M});p(q.sourceEvent,I,A)}};if(t)k.on(".drag",null);else{const q=Tp().on("start",M=>{const{domNode:P,nodeDragThreshold:z}=a.getState();z===0&&L(M);const D=E(M);f.current=D,h.current=(P==null?void 0:P.getBoundingClientRect())||null,g.current=Qe(M.sourceEvent,h.current)}).on("drag",M=>{var F,S;const P=E(M),{autoPanOnNodeDrag:z,nodeDragThreshold:D}=a.getState();if(!v.current&&y.current&&z&&(v.current=!0,C()),!y.current){const p=P.xSnapped-(((F=f==null?void 0:f.current)==null?void 0:F.x)??0),b=P.ySnapped-(((S=f==null?void 0:f.current)==null?void 0:S.y)??0);Math.sqrt(p*p+b*b)>D&&L(M)}(f.current.x!==P.xSnapped||f.current.y!==P.ySnapped)&&u.current&&y.current&&(m.current=M.sourceEvent,g.current=Qe(M.sourceEvent,h.current),_(P))}).on("end",M=>{if(y.current&&(l(!1),v.current=!1,y.current=!1,cancelAnimationFrame(d.current),u.current)){const{updateNodePositions:P,nodeInternals:z,onNodeDragStop:D,onSelectionDragStop:F}=a.getState(),S=i?D:lr(F);if(P(u.current,!1,!1),S){const[p,b]=cr({nodeId:i,dragItems:u.current,nodeInternals:z});S(M.sourceEvent,p,b)}}}).filter(M=>{const P=M.target;return!M.button&&(!n||!ks(P,`.${n}`,e))&&(!r||ks(P,r,e))});return k.call(q),()=>{k.on(".drag",null)}}}},[e,t,n,r,s,a,i,o,E]),c}function Gc(){const e=ae();return N.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:c,onError:l,nodesDraggable:u}=e.getState(),f=o().filter(E=>E.selected&&(E.draggable||u&&typeof E.draggable>"u")),d=a?c[0]:5,h=a?c[1]:5,g=n.isShiftPressed?4:1,m=n.x*d*g,v=n.y*h*g,y=f.map(E=>{if(E.positionAbsolute){const k={x:E.positionAbsolute.x+m,y:E.positionAbsolute.y+v};a&&(k.x=c[0]*Math.round(k.x/c[0]),k.y=c[1]*Math.round(k.y/c[1]));const{positionAbsolute:_,position:C}=Oc(E,k,r,i,void 0,l);E.position=C,E.positionAbsolute=_}return E});s(y,!0,!1)},[])}const $t={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Yt=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:f,onMouseMove:d,onMouseLeave:h,onContextMenu:g,onDoubleClick:m,style:v,className:y,isDraggable:E,isSelectable:k,isConnectable:_,isFocusable:C,selectNodesOnDrag:L,sourcePosition:q,targetPosition:M,hidden:P,resizeObserver:z,dragHandle:D,zIndex:F,isParent:S,noDragClassName:p,noPanClassName:b,initialized:w,disableKeyboardA11y:I,ariaLabel:A,rfId:x,hasHandleBounds:$})=>{const T=ae(),V=N.useRef(null),H=N.useRef(null),O=N.useRef(q),X=N.useRef(M),Z=N.useRef(r),K=k||E||u||f||d||h,J=Gc(),oe=Gt(n,T.getState,f),ee=Gt(n,T.getState,d),pe=Gt(n,T.getState,h),ve=Gt(n,T.getState,g),_e=Gt(n,T.getState,m),Ie=te=>{const{nodeDragThreshold:Y}=T.getState();if(k&&(!L||!E||Y>0)&&Ki({id:n,store:T,nodeRef:V}),u){const me=T.getState().nodeInternals.get(n);me&&u(te,{...me})}},se=te=>{if(!Ui(te)&&!I)if(pc.includes(te.key)&&k){const Y=te.key==="Escape";Ki({id:n,store:T,unselect:Y,nodeRef:V})}else E&&l&&Object.prototype.hasOwnProperty.call($t,te.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),J({x:$t[te.key].x,y:$t[te.key].y,isShiftPressed:te.shiftKey}))};N.useEffect(()=>()=>{H.current&&(z==null||z.unobserve(H.current),H.current=null)},[]),N.useEffect(()=>{if(V.current&&!P){const te=V.current;(!w||!$||H.current!==te)&&(H.current&&(z==null||z.unobserve(H.current)),z==null||z.observe(te),H.current=te)}},[P,w,$]),N.useEffect(()=>{const te=Z.current!==r,Y=O.current!==q,me=X.current!==M;V.current&&(te||Y||me)&&(te&&(Z.current=r),Y&&(O.current=q),me&&(X.current=M),T.getState().updateNodeDimensions([{id:n,nodeElement:V.current,forceUpdate:!0}]))},[n,r,q,M]);const Ce=Bc({nodeRef:V,disabled:P||!E,noDragClassName:p,handleSelector:D,nodeId:n,isSelectable:k,selectNodesOnDrag:L});return P?null:R.createElement("div",{className:he(["react-flow__node",`react-flow__node-${r}`,{[b]:E},y,{selected:l,selectable:k,parent:S,dragging:Ce}]),ref:V,style:{zIndex:F,transform:`translate(${a}px,${c}px)`,pointerEvents:K?"all":"none",visibility:w?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:oe,onMouseMove:ee,onMouseLeave:pe,onContextMenu:ve,onClick:Ie,onDoubleClick:_e,onKeyDown:C?se:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":I?void 0:`${Mc}-${x}`,"aria-label":A},R.createElement(Lg,{value:n},R.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:o,selected:l,isConnectable:_,sourcePosition:q,targetPosition:M,dragging:Ce,dragHandle:D,zIndex:F})))};return t.displayName="NodeWrapper",N.memo(t)};const by=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ro(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Ey({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ae(),{width:i,height:s,x:o,y:a,transformString:c,userSelectionActive:l}=ie(by,ce),u=Gc(),f=N.useRef(null);if(N.useEffect(()=>{var g;n||(g=f.current)==null||g.focus({preventScroll:!0})},[n]),Bc({nodeRef:f}),l||!i||!s)return null;const d=e?g=>{const m=r.getState().getNodes().filter(v=>v.selected);e(g,m)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call($t,g.key)&&u({x:$t[g.key].x,y:$t[g.key].y,isShiftPressed:g.shiftKey})};return R.createElement("div",{className:he(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},R.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s,top:a,left:o}}))}var Ny=N.memo(Ey);const Sy=e=>e.nodesSelectionActive,Yc=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:f,selectionOnDrag:d,selectionMode:h,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:E,elementsSelectable:k,zoomOnScroll:_,zoomOnPinch:C,panOnScroll:L,panOnScrollSpeed:q,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:z,defaultViewport:D,translateExtent:F,minZoom:S,maxZoom:p,preventScrolling:b,onSelectionContextMenu:w,noWheelClassName:I,noPanClassName:A,disableKeyboardA11y:x})=>{const $=ie(Sy),T=sn(f),V=sn(y),H=V||z,O=V||L,X=T||d&&H!==!0;return ly({deleteKeyCode:a,multiSelectionKeyCode:v}),R.createElement(py,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:_,zoomOnPinch:C,panOnScroll:O,panOnScrollSpeed:q,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:!T&&H,defaultViewport:D,translateExtent:F,minZoom:S,maxZoom:p,zoomActivationKeyCode:E,preventScrolling:b,noWheelClassName:I,noPanClassName:A},R.createElement(Fc,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:H,isSelecting:!!X,selectionMode:h},e,$&&R.createElement(Ny,{onSelectionContextMenu:w,noPanClassName:A,disableKeyboardA11y:x})))};Yc.displayName="FlowRenderer";var ky=N.memo(Yc);function Iy(e){return ie(N.useCallback(n=>e?_c(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Cy(e){const t={input:Yt(e.input||Rc),default:Yt(e.default||Zi),output:Yt(e.output||Ac),group:Yt(e.group||$o)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Yt(e[s]||Zi),i),n);return{...t,...r}}const Ry=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Ty=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Uc=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=ie(Ty,ce),a=Iy(e.onlyRenderVisibleElements),c=N.useRef(),l=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const d=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(d)});return c.current=u,u},[]);return N.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.disconnect()},[]),R.createElement("div",{className:"react-flow__nodes",style:Mo},a.map(u=>{var C,L,q;let f=u.type||"default";e.nodeTypes[f]||(o==null||o("003",Be.error003(f)),f="default");const d=e.nodeTypes[f]||e.nodeTypes.default,h=!!(u.draggable||t&&typeof u.draggable>"u"),g=!!(u.selectable||i&&typeof u.selectable>"u"),m=!!(u.connectable||n&&typeof u.connectable>"u"),v=!!(u.focusable||r&&typeof u.focusable>"u"),y=e.nodeExtent?Eo(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,E=(y==null?void 0:y.x)??0,k=(y==null?void 0:y.y)??0,_=Ry({x:E,y:k,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return R.createElement(d,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||G.Bottom,targetPosition:u.targetPosition||G.Top,hidden:u.hidden,xPos:E,yPos:k,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:h,isSelectable:g,isConnectable:m,isFocusable:v,resizeObserver:l,dragHandle:u.dragHandle,zIndex:((C=u[re])==null?void 0:C.z)??0,isParent:!!((L=u[re])!=null&&L.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((q=u[re])!=null&&q.handleBounds)})}))};Uc.displayName="NodeRenderer";var Ay=N.memo(Uc);const $y=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,My=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,Cs="react-flow__edgeupdater",Rs=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>R.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:he([Cs,`${Cs}-${a}`]),cx:$y(t,r,e),cy:My(n,r,e),r,stroke:"transparent",fill:"transparent"}),Py=()=>!0;var kt=e=>{const t=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:c,animated:l,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:v,source:y,target:E,sourceX:k,sourceY:_,targetX:C,targetY:L,sourcePosition:q,targetPosition:M,elementsSelectable:P,hidden:z,sourceHandleId:D,targetHandleId:F,onContextMenu:S,onMouseEnter:p,onMouseMove:b,onMouseLeave:w,edgeUpdaterRadius:I,onEdgeUpdate:A,onEdgeUpdateStart:x,onEdgeUpdateEnd:$,markerEnd:T,markerStart:V,rfId:H,ariaLabel:O,isFocusable:X,isUpdatable:Z,pathOptions:K,interactionWidth:J,disableKeyboardA11y:oe})=>{const ee=N.useRef(null),[pe,ve]=N.useState(!1),[_e,Ie]=N.useState(!1),se=ae(),Ce=N.useMemo(()=>`url('#${ji(V,H)}')`,[V,H]),te=N.useMemo(()=>`url('#${ji(T,H)}')`,[T,H]);if(z)return null;const Y=ue=>{var Re;const{edges:be,addSelectedEdges:ot,unselectNodesAndEdges:st,multiSelectionActive:at}=se.getState(),Le=be.find(zt=>zt.id===n);Le&&(P&&(se.setState({nodesSelectionActive:!1}),Le.selected&&at?(st({nodes:[],edges:[Le]}),(Re=ee.current)==null||Re.blur()):ot([n])),o&&o(ue,Le))},me=Bt(n,se.getState,a),nt=Bt(n,se.getState,S),Dt=Bt(n,se.getState,p),vt=Bt(n,se.getState,b),wt=Bt(n,se.getState,w),Pe=(ue,be)=>{if(ue.button!==0)return;const{edges:ot,isValidConnection:st}=se.getState(),at=be?E:y,Le=(be?F:D)||null,Re=be?"target":"source",zt=st||Py,Kn=be,Ft=ot.find(ut=>ut.id===n);Ie(!0),x==null||x(ue,Ft,Re);const Qn=ut=>{Ie(!1),$==null||$(ut,Ft,Re)};Sc({event:ue,handleId:Le,nodeId:at,onConnect:ut=>A==null?void 0:A(Ft,ut),isTarget:Kn,getState:se.getState,setState:se.setState,isValidConnection:zt,edgeUpdaterType:Re,onEdgeUpdateEnd:Qn})},xt=ue=>Pe(ue,!0),rt=ue=>Pe(ue,!1),it=()=>ve(!0),_t=()=>ve(!1),bt=!P&&!o,Vt=ue=>{var be;if(!oe&&pc.includes(ue.key)&&P){const{unselectNodesAndEdges:ot,addSelectedEdges:st,edges:at}=se.getState();ue.key==="Escape"?((be=ee.current)==null||be.blur(),ot({edges:[at.find(Re=>Re.id===n)]})):st([n])}};return R.createElement("g",{className:he(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:l,inactive:bt,updating:pe}]),onClick:Y,onDoubleClick:me,onContextMenu:nt,onMouseEnter:Dt,onMouseMove:vt,onMouseLeave:wt,onKeyDown:X?Vt:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":O===null?void 0:O||`Edge from ${y} to ${E}`,"aria-describedby":X?`${Pc}-${H}`:void 0,ref:ee},!_e&&R.createElement(e,{id:n,source:y,target:E,selected:c,animated:l,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,data:s,style:v,sourceX:k,sourceY:_,targetX:C,targetY:L,sourcePosition:q,targetPosition:M,sourceHandleId:D,targetHandleId:F,markerStart:Ce,markerEnd:te,pathOptions:K,interactionWidth:J}),Z&&R.createElement(R.Fragment,null,(Z==="source"||Z===!0)&&R.createElement(Rs,{position:q,centerX:k,centerY:_,radius:I,onMouseDown:xt,onMouseEnter:it,onMouseOut:_t,type:"source"}),(Z==="target"||Z===!0)&&R.createElement(Rs,{position:M,centerX:C,centerY:L,radius:I,onMouseDown:rt,onMouseEnter:it,onMouseOut:_t,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function Ly(e){const t={default:kt(e.default||Pn),straight:kt(e.bezier||Io),step:kt(e.step||ko),smoothstep:kt(e.step||Xn),simplebezier:kt(e.simplebezier||So)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=kt(e[s]||Pn),i),n);return{...t,...r}}function Ts(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case G.Top:return{x:r+s/2,y:i};case G.Right:return{x:r+s,y:i+o/2};case G.Bottom:return{x:r+s/2,y:i+o};case G.Left:return{x:r,y:i+o/2}}}function As(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const qy=(e,t,n,r,i,s)=>{const o=Ts(n,e,t),a=Ts(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function Dy({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:c}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=No({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),f=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),d=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(f*d)>0}function $s(e){var r,i,s,o,a;const t=((r=e==null?void 0:e[re])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Vy=[{level:0,isMaxLevel:!0,edges:[]}];function zy(e,t,n=!1){let r=-1;const i=e.reduce((o,a)=>{var u,f;const c=we(a.zIndex);let l=c?a.zIndex:0;if(n){const d=t.get(a.target),h=t.get(a.source),g=a.selected||(d==null?void 0:d.selected)||(h==null?void 0:h.selected),m=Math.max(((u=h==null?void 0:h[re])==null?void 0:u.z)||0,((f=d==null?void 0:d[re])==null?void 0:f.z)||0,1e3);l=(c?a.zIndex:0)+(g?m:0)}return o[l]?o[l].push(a):o[l]=[a],r=l>r?l:r,o},{}),s=Object.entries(i).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===r}});return s.length===0?Vy:s}function Fy(e,t,n){const r=ie(N.useCallback(i=>e?i.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Dy({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return zy(r,t,n)}const Hy=({color:e="none",strokeWidth:t=1})=>R.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Oy=({color:e="none",strokeWidth:t=1})=>R.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ms={[on.Arrow]:Hy,[on.ArrowClosed]:Oy};function By(e){const t=ae();return N.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(Ms,e)?Ms[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Be.error009(e)),null)},[e])}const Gy=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=By(t);return c?R.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},R.createElement(c,{color:n,strokeWidth:o})):null},Yy=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=ji(o,t);r.includes(a)||(i.push({id:a,color:o.color||e,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},Xc=({defaultColor:e,rfId:t})=>{const n=ie(N.useCallback(Yy({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return R.createElement("defs",null,n.map(r=>R.createElement(Gy,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Xc.displayName="MarkerDefinitions";var Uy=N.memo(Xc);const Xy=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),jc=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeUpdate:o,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:h,onEdgeUpdateStart:g,onEdgeUpdateEnd:m,children:v,disableKeyboardA11y:y})=>{const{edgesFocusable:E,edgesUpdatable:k,elementsSelectable:_,width:C,height:L,connectionMode:q,nodeInternals:M,onError:P}=ie(Xy,ce),z=Fy(t,M,n);return C?R.createElement(R.Fragment,null,z.map(({level:D,edges:F,isMaxLevel:S})=>R.createElement("svg",{key:D,style:{zIndex:D},width:C,height:L,className:"react-flow__edges react-flow__container"},S&&R.createElement(Uy,{defaultColor:e,rfId:r}),R.createElement("g",null,F.map(p=>{const[b,w,I]=$s(M.get(p.source)),[A,x,$]=$s(M.get(p.target));if(!I||!$)return null;let T=p.type||"default";i[T]||(P==null||P("011",Be.error011(T)),T="default");const V=i[T]||i.default,H=q===mt.Strict?x.target:(x.target??[]).concat(x.source??[]),O=As(w.source,p.sourceHandle),X=As(H,p.targetHandle),Z=(O==null?void 0:O.position)||G.Bottom,K=(X==null?void 0:X.position)||G.Top,J=!!(p.focusable||E&&typeof p.focusable>"u"),oe=typeof o<"u"&&(p.updatable||k&&typeof p.updatable>"u");if(!O||!X)return P==null||P("008",Be.error008(O,p)),null;const{sourceX:ee,sourceY:pe,targetX:ve,targetY:_e}=qy(b,O,Z,A,X,K);return R.createElement(V,{key:p.id,id:p.id,className:he([p.className,s]),type:T,data:p.data,selected:!!p.selected,animated:!!p.animated,hidden:!!p.hidden,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,style:p.style,source:p.source,target:p.target,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerEnd:p.markerEnd,markerStart:p.markerStart,sourceX:ee,sourceY:pe,targetX:ve,targetY:_e,sourcePosition:Z,targetPosition:K,elementsSelectable:_,onEdgeUpdate:o,onContextMenu:a,onMouseEnter:c,onMouseMove:l,onMouseLeave:u,onClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:h,onEdgeUpdateStart:g,onEdgeUpdateEnd:m,rfId:r,ariaLabel:p.ariaLabel,isFocusable:J,isUpdatable:oe,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth,disableKeyboardA11y:y})})))),v):null};jc.displayName="EdgeRenderer";var jy=N.memo(jc);const Wy=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Zy({children:e}){const t=ie(Wy);return R.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Ky(e){const t=jn(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Qy={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top},Wc=({nodeId:e,handleType:t,style:n,type:r=Ve.Bezier,CustomComponent:i,connectionStatus:s})=>{var L,q,M;const{fromNode:o,handleId:a,toX:c,toY:l,connectionMode:u}=ie(N.useCallback(P=>({fromNode:P.nodeInternals.get(e),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[e]),ce),f=(L=o==null?void 0:o[re])==null?void 0:L.handleBounds;let d=f==null?void 0:f[t];if(u===mt.Loose&&(d=d||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!d)return null;const h=a?d.find(P=>P.id===a):d[0],g=h?h.x+h.width/2:(o.width??0)/2,m=h?h.y+h.height/2:o.height??0,v=(((q=o.positionAbsolute)==null?void 0:q.x)??0)+g,y=(((M=o.positionAbsolute)==null?void 0:M.y)??0)+m,E=h==null?void 0:h.position,k=E?Qy[E]:null;if(!E||!k)return null;if(i)return R.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:v,fromY:y,toX:c,toY:l,fromPosition:E,toPosition:k,connectionStatus:s});let _="";const C={sourceX:v,sourceY:y,sourcePosition:E,targetX:c,targetY:l,targetPosition:k};return r===Ve.Bezier?[_]=wc(C):r===Ve.Step?[_]=Xi({...C,borderRadius:0}):r===Ve.SmoothStep?[_]=Xi(C):r===Ve.SimpleBezier?[_]=vc(C):_=`M${v},${y} ${c},${l}`,R.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};Wc.displayName="ConnectionLine";const Jy=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function e0({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:c,connectionStatus:l}=ie(Jy,ce);return!(i&&s&&a&&o)?null:R.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},R.createElement("g",{className:he(["react-flow__connection",l])},R.createElement(Wc,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:l})))}function Ps(e,t){return N.useRef(null),ae(),N.useMemo(()=>t(e),[e])}const Zc=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:g,onSelectionStart:m,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:E,connectionLineComponent:k,connectionLineContainerStyle:_,selectionKeyCode:C,selectionOnDrag:L,selectionMode:q,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:z,deleteKeyCode:D,onlyRenderVisibleElements:F,elementsSelectable:S,selectNodesOnDrag:p,defaultViewport:b,translateExtent:w,minZoom:I,maxZoom:A,preventScrolling:x,defaultMarkerColor:$,zoomOnScroll:T,zoomOnPinch:V,panOnScroll:H,panOnScrollSpeed:O,panOnScrollMode:X,zoomOnDoubleClick:Z,panOnDrag:K,onPaneClick:J,onPaneMouseEnter:oe,onPaneMouseMove:ee,onPaneMouseLeave:pe,onPaneScroll:ve,onPaneContextMenu:_e,onEdgeUpdate:Ie,onEdgeContextMenu:se,onEdgeMouseEnter:Ce,onEdgeMouseMove:te,onEdgeMouseLeave:Y,edgeUpdaterRadius:me,onEdgeUpdateStart:nt,onEdgeUpdateEnd:Dt,noDragClassName:vt,noWheelClassName:wt,noPanClassName:Pe,elevateEdgesOnSelect:xt,disableKeyboardA11y:rt,nodeOrigin:it,nodeExtent:_t,rfId:bt})=>{const Vt=Ps(e,Cy),ue=Ps(t,Ly);return Ky(s),R.createElement(ky,{onPaneClick:J,onPaneMouseEnter:oe,onPaneMouseMove:ee,onPaneMouseLeave:pe,onPaneContextMenu:_e,onPaneScroll:ve,deleteKeyCode:D,selectionKeyCode:C,selectionOnDrag:L,selectionMode:q,onSelectionStart:m,onSelectionEnd:v,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:z,elementsSelectable:S,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:T,zoomOnPinch:V,zoomOnDoubleClick:Z,panOnScroll:H,panOnScrollSpeed:O,panOnScrollMode:X,panOnDrag:K,defaultViewport:b,translateExtent:w,minZoom:I,maxZoom:A,onSelectionContextMenu:g,preventScrolling:x,noDragClassName:vt,noWheelClassName:wt,noPanClassName:Pe,disableKeyboardA11y:rt},R.createElement(Zy,null,R.createElement(jy,{edgeTypes:ue,onEdgeClick:a,onEdgeDoubleClick:l,onEdgeUpdate:Ie,onlyRenderVisibleElements:F,onEdgeContextMenu:se,onEdgeMouseEnter:Ce,onEdgeMouseMove:te,onEdgeMouseLeave:Y,onEdgeUpdateStart:nt,onEdgeUpdateEnd:Dt,edgeUpdaterRadius:me,defaultMarkerColor:$,noPanClassName:Pe,elevateEdgesOnSelect:!!xt,disableKeyboardA11y:rt,rfId:bt},R.createElement(e0,{style:E,type:y,component:k,containerStyle:_})),R.createElement("div",{className:"react-flow__edgelabel-renderer"}),R.createElement(Ay,{nodeTypes:Vt,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:h,selectNodesOnDrag:p,onlyRenderVisibleElements:F,noPanClassName:Pe,noDragClassName:vt,disableKeyboardA11y:rt,nodeOrigin:it,nodeExtent:_t,rfId:bt})))};Zc.displayName="GraphView";var t0=N.memo(Zc);const Qi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ue={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Qi,nodeExtent:Qi,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:mt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Rg,isValidConnection:void 0},n0=()=>Od((e,t)=>({...Ue,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:ar(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?ar(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:l}=t(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((m,v)=>{const y=i.get(v.id);if(y!=null&&y.hidden)i.set(y.id,{...y,[re]:{...y[re],handleBounds:void 0}});else if(y){const E=bo(v.nodeElement);!!(E.width&&E.height&&(y.width!==E.width||y.height!==E.height||v.forceUpdate))&&(i.set(y.id,{...y,[re]:{...y[re],handleBounds:{source:Is(".source",v.nodeElement,d,l),target:Is(".target",v.nodeElement,d,l)}},...E}),m.push({id:y.id,type:"dimensions",dimensions:E}))}return m},[]);qc(i,l);const g=o||s&&!o&&Dc(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const c={id:a.id,type:"position",dragging:i};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const l=zc(n,a()),u=ar(l,i,o,c);e({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>We(c,!0)):(o=Ct(s(),n),a=Ct(i,[])),vn({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>We(c,!0)):(o=Ct(i,n),a=Ct(s(),[])),vn({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),o=n||s(),a=r||i,c=o.map(u=>(u.selected=!1,We(u.id,!1))),l=a.map(u=>We(u.id,!1));vn({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>We(a.id,!1)),o=n.filter(a=>a.selected).map(a=>We(a.id,!1));vn({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Eo(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!n.x&&!n.y)return!1;const l=Ke.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[i,s]],f=o==null?void 0:o.constrain()(l,u,c);return o.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Ue.connectionNodeId,connectionHandleId:Ue.connectionHandleId,connectionHandleType:Ue.connectionHandleType,connectionStatus:Ue.connectionStatus,connectionStartHandle:Ue.connectionStartHandle,connectionEndHandle:Ue.connectionEndHandle}),reset:()=>e({...Ue})}),Object.is),Po=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=n0()),R.createElement(_g,{value:t.current},e)};Po.displayName="ReactFlowProvider";const Kc=({children:e})=>N.useContext(Un)?R.createElement(R.Fragment,null,e):R.createElement(Po,null,e);Kc.displayName="ReactFlowWrapper";const r0={input:Rc,default:Zi,output:Ac,group:$o},i0={default:Pn,straight:Io,step:ko,smoothstep:Xn,simplebezier:So},o0=[0,0],s0=[15,15],a0={x:0,y:0,zoom:1},u0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Qc=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=r0,edgeTypes:o=i0,onNodeClick:a,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:y,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:_,onNodeContextMenu:C,onNodeDoubleClick:L,onNodeDragStart:q,onNodeDrag:M,onNodeDragStop:P,onNodesDelete:z,onEdgesDelete:D,onSelectionChange:F,onSelectionDragStart:S,onSelectionDrag:p,onSelectionDragStop:b,onSelectionContextMenu:w,onSelectionStart:I,onSelectionEnd:A,connectionMode:x=mt.Strict,connectionLineType:$=Ve.Bezier,connectionLineStyle:T,connectionLineComponent:V,connectionLineContainerStyle:H,deleteKeyCode:O="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Z=!1,selectionMode:K=rn.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:oe=Mn()?"Meta":"Control",zoomActivationKeyCode:ee=Mn()?"Meta":"Control",snapToGrid:pe=!1,snapGrid:ve=s0,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:Ie=!0,nodesDraggable:se,nodesConnectable:Ce,nodesFocusable:te,nodeOrigin:Y=o0,edgesFocusable:me,edgesUpdatable:nt,elementsSelectable:Dt,defaultViewport:vt=a0,minZoom:wt=.5,maxZoom:Pe=2,translateExtent:xt=Qi,preventScrolling:rt=!0,nodeExtent:it,defaultMarkerColor:_t="#b1b1b7",zoomOnScroll:bt=!0,zoomOnPinch:Vt=!0,panOnScroll:ue=!1,panOnScrollSpeed:be=.5,panOnScrollMode:ot=ft.Free,zoomOnDoubleClick:st=!0,panOnDrag:at=!0,onPaneClick:Le,onPaneMouseEnter:Re,onPaneMouseMove:zt,onPaneMouseLeave:Kn,onPaneScroll:Ft,onPaneContextMenu:Qn,children:Fo,onEdgeUpdate:ut,onEdgeContextMenu:Ol,onEdgeDoubleClick:Bl,onEdgeMouseEnter:Gl,onEdgeMouseMove:Yl,onEdgeMouseLeave:Ul,onEdgeUpdateStart:Xl,onEdgeUpdateEnd:jl,edgeUpdaterRadius:Wl=10,onNodesChange:Zl,onEdgesChange:Kl,noDragClassName:Ql="nodrag",noWheelClassName:Jl="nowheel",noPanClassName:Ho="nopan",fitView:ef=!1,fitViewOptions:tf,connectOnClick:nf=!0,attributionPosition:rf,proOptions:of,defaultEdgeOptions:sf,elevateNodesOnSelect:af=!0,elevateEdgesOnSelect:uf=!1,disableKeyboardA11y:Oo=!1,autoPanOnConnect:cf=!0,autoPanOnNodeDrag:lf=!0,connectionRadius:ff=20,isValidConnection:df,onError:hf,style:pf,id:Bo,nodeDragThreshold:mf,...gf},yf)=>{const Jn=Bo||"1";return R.createElement("div",{...gf,style:{...pf,...u0},ref:yf,className:he(["react-flow",i]),"data-testid":"rf__wrapper",id:Bo},R.createElement(Kc,null,R.createElement(t0,{onInit:l,onMove:u,onMoveStart:f,onMoveEnd:d,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:_,onNodeContextMenu:C,onNodeDoubleClick:L,nodeTypes:s,edgeTypes:o,connectionLineType:$,connectionLineStyle:T,connectionLineComponent:V,connectionLineContainerStyle:H,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:K,deleteKeyCode:O,multiSelectionKeyCode:oe,panActivationKeyCode:J,zoomActivationKeyCode:ee,onlyRenderVisibleElements:_e,selectNodesOnDrag:Ie,defaultViewport:vt,translateExtent:xt,minZoom:wt,maxZoom:Pe,preventScrolling:rt,zoomOnScroll:bt,zoomOnPinch:Vt,zoomOnDoubleClick:st,panOnScroll:ue,panOnScrollSpeed:be,panOnScrollMode:ot,panOnDrag:at,onPaneClick:Le,onPaneMouseEnter:Re,onPaneMouseMove:zt,onPaneMouseLeave:Kn,onPaneScroll:Ft,onPaneContextMenu:Qn,onSelectionContextMenu:w,onSelectionStart:I,onSelectionEnd:A,onEdgeUpdate:ut,onEdgeContextMenu:Ol,onEdgeDoubleClick:Bl,onEdgeMouseEnter:Gl,onEdgeMouseMove:Yl,onEdgeMouseLeave:Ul,onEdgeUpdateStart:Xl,onEdgeUpdateEnd:jl,edgeUpdaterRadius:Wl,defaultMarkerColor:_t,noDragClassName:Ql,noWheelClassName:Jl,noPanClassName:Ho,elevateEdgesOnSelect:uf,rfId:Jn,disableKeyboardA11y:Oo,nodeOrigin:Y,nodeExtent:it}),R.createElement(Qg,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:y,nodesDraggable:se,nodesConnectable:Ce,nodesFocusable:te,edgesFocusable:me,edgesUpdatable:nt,elementsSelectable:Dt,elevateNodesOnSelect:af,minZoom:wt,maxZoom:Pe,nodeExtent:it,onNodesChange:Zl,onEdgesChange:Kl,snapToGrid:pe,snapGrid:ve,connectionMode:x,translateExtent:xt,connectOnClick:nf,defaultEdgeOptions:sf,fitView:ef,fitViewOptions:tf,onNodesDelete:z,onEdgesDelete:D,onNodeDragStart:q,onNodeDrag:M,onNodeDragStop:P,onSelectionDrag:p,onSelectionDragStart:S,onSelectionDragStop:b,noPanClassName:Ho,nodeOrigin:Y,rfId:Jn,autoPanOnConnect:cf,autoPanOnNodeDrag:lf,onError:hf,connectionRadius:ff,isValidConnection:df,nodeDragThreshold:mf}),R.createElement(Zg,{onSelectionChange:F}),Fo,R.createElement(Eg,{proOptions:of,position:rf}),R.createElement(ry,{rfId:Jn,disableKeyboardA11y:Oo})))});Qc.displayName="ReactFlow";function Jc(e){return t=>{const[n,r]=N.useState(t),i=N.useCallback(s=>r(o=>e(s,o)),[]);return[n,r,i]}}const c0=Jc(zc),l0=Jc(yy);function f0(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},R.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function d0(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},R.createElement("path",{d:"M0 0h32v4.2H0z"}))}function h0(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},R.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function p0(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},R.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function m0(){return R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},R.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const jt=({children:e,className:t,...n})=>R.createElement("button",{type:"button",className:he(["react-flow__controls-button",t]),...n},e);jt.displayName="ControlButton";const g0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),el=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:l,children:u,position:f="bottom-left"})=>{const d=ae(),[h,g]=N.useState(!1),{isInteractive:m,minZoomReached:v,maxZoomReached:y}=ie(g0,ce),{zoomIn:E,zoomOut:k,fitView:_}=jn();if(N.useEffect(()=>{g(!0)},[]),!h)return null;const C=()=>{E(),s==null||s()},L=()=>{k(),o==null||o()},q=()=>{_(i),a==null||a()},M=()=>{d.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)};return R.createElement(fc,{className:he(["react-flow__controls",l]),position:f,style:e,"data-testid":"rf__controls"},t&&R.createElement(R.Fragment,null,R.createElement(jt,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},R.createElement(f0,null)),R.createElement(jt,{onClick:L,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},R.createElement(d0,null))),n&&R.createElement(jt,{className:"react-flow__controls-fitview",onClick:q,title:"fit view","aria-label":"fit view"},R.createElement(h0,null)),r&&R.createElement(jt,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},m?R.createElement(m0,null):R.createElement(p0,null)),u)};el.displayName="Controls";var y0=N.memo(el);const Ji=e=>{const t=Sf(kf(e.modifiedOn)),{name:n,description:r}=e;return N.useMemo(()=>B.jsxs(B.Fragment,{children:[n&&B.jsx(kn,{title:n,placement:"top",enterNextDelay:200,children:B.jsx("span",{children:B.jsx(qi,{variant:"smallText1",className:"name",children:n})})}),r&&B.jsx(kn,{title:r,placement:"top",enterNextDelay:200,children:B.jsx("span",{children:B.jsx(qi,{variant:"smallText1",className:"description",children:r})})}),B.jsx(If,{userId:e.modifiedBy}),B.jsx("div",{children:t})]}),[n,r,e.modifiedBy,t])};try{Ji.displayName="ActivityNodeLabel",Ji.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}}}catch{}const v0=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),eo=e=>{const{entityHeader:t}=e;if(t){const n=mu(t==null?void 0:t.type);if(n==Go.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const i=t.name.slice(r);if(v0.has(i.toLowerCase()))return B.jsx(lo,{icon:"code"})}}else return B.jsx(Yo,{type:n,includeTooltip:!1})}return B.jsx(Yo,{type:Go.FILE,includeTooltip:!1})};try{eo.displayName="ProvenanceEntityIcon",eo.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}}}catch{}const to=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return N.useMemo(()=>B.jsxs(B.Fragment,{children:[B.jsx("div",{children:B.jsx(eo,{entityHeader:e})}),B.jsxs(B.Fragment,{children:[B.jsx("div",{children:B.jsx(kn,{title:e.name,placement:"top",enterNextDelay:300,children:B.jsx(Cf,{href:`${vf.PORTAL}Synapse:${n}`,children:e.name})})}),bf(mu(e.type))&&B.jsxs("div",{children:[B.jsxs("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&B.jsx("div",{children:"(old version)"})]})]})]}),[e,n])};try{to.displayName="EntityNodeLabel",to.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.table.VirtualTable"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}}}catch{}const no=e=>{const{itemCount:t}=e;return N.useMemo(()=>B.jsx(B.Fragment,{children:B.jsxs("a",{children:["Show ",t," ",Rf("item",t),""]})}),[t])};try{no.displayName="ExpandGraphNodeLabel",no.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}}}catch{}const w0=/^(.+?\.)?github\.com$/,x0=/^(.+?\.)?githubusercontent\.com$/,ro=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:i}=r;return(i.match(w0)||i.match(x0))&&(n="github"),B.jsx(lo,{icon:n})};try{ro.displayName="ProvenanceExternalIcon",ro.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const io=e=>N.useMemo(()=>B.jsxs(B.Fragment,{children:[B.jsx("div",{children:B.jsx(ro,{url:e.url})}),B.jsx(kn,{title:e.name,placement:"top",enterNextDelay:300,children:B.jsx("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{io.displayName="ExternalGraphNodeLabel",io.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}}}catch{}var fr,Ls;function _0(){if(Ls)return fr;Ls=1;var e=Tf,t=4;function n(r){return e(r,t)}return fr=n,fr}var dr,qs;function tl(){return qs||(qs=1,dr=yu),dr}var hr,Ds;function b0(){if(Ds)return hr;Ds=1;var e=vu;function t(n,r){var i=[];return e(n,function(s,o,a){r(s,o,a)&&i.push(s)}),i}return hr=t,hr}var pr,Vs;function nl(){if(Vs)return pr;Vs=1;var e=Af(),t=b0(),n=tt,r=gt;function i(s,o){var a=r(s)?e:t;return a(s,n(o))}return pr=i,pr}var mr,zs;function E0(){if(zs)return mr;zs=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return mr=n,mr}var gr,Fs;function rl(){if(Fs)return gr;Fs=1;var e=E0(),t=$f();function n(r,i){return r!=null&&t(r,i,e)}return gr=n,gr}var yr,Hs;function N0(){if(Hs)return yr;Hs=1;var e=wu,t=xu,n=Mf,r=gt,i=ho,s=_u,o=Pf,a=bu,c="[object Map]",l="[object Set]",u=Object.prototype,f=u.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||s(h)||a(h)||n(h)))return!h.length;var g=t(h);if(g==c||g==l)return!h.size;if(o(h))return!e(h).length;for(var m in h)if(f.call(h,m))return!1;return!0}return yr=d,yr}var vr,Os;function il(){if(Os)return vr;Os=1;function e(t){return t===void 0}return vr=e,vr}var wr,Bs;function ol(){if(Bs)return wr;Bs=1;var e=Eu,t=tt,n=Lf,r=gt;function i(s,o){var a=r(s)?e:n;return a(s,t(o))}return wr=i,wr}var xr,Gs;function S0(){if(Gs)return xr;Gs=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return xr=e,xr}var _r,Ys;function k0(){if(Ys)return _r;Ys=1;function e(t,n,r,i,s){return s(t,function(o,a,c){r=i?(i=!1,o):n(r,o,a,c)}),r}return _r=e,_r}var br,Us;function sl(){if(Us)return br;Us=1;var e=S0(),t=vu,n=tt,r=k0(),i=gt;function s(o,a,c){var l=i(o)?e:r,u=arguments.length<3;return l(o,n(a),c,u,t)}return br=s,br}var Er,Xs;function I0(){if(Xs)return Er;Xs=1;var e=qf,t=gt,n=Df,r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return Er=i,Er}var Nr,js;function C0(){if(js)return Nr;js=1;var e=Vf,t=e("length");return Nr=t,Nr}var Sr,Ws;function R0(){if(Ws)return Sr;Ws=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function c(l){return a.test(l)}return Sr=c,Sr}var kr,Zs;function T0(){if(Zs)return kr;Zs=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",l="(?:"+a+"|"+c+")",u="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",g=l+"?",m="["+s+"]?",v="(?:"+h+"(?:"+[u,f,d].join("|")+")"+m+g+")*",y=m+g+v,E="(?:"+[u+a+"?",a,f,d,o].join("|")+")",k=RegExp(c+"(?="+c+")|"+E+y,"g");function _(C){for(var L=k.lastIndex=0;k.test(C);)++L;return L}return kr=_,kr}var Ir,Ks;function A0(){if(Ks)return Ir;Ks=1;var e=C0(),t=R0(),n=T0();function r(i){return t(i)?n(i):e(i)}return Ir=r,Ir}var Cr,Qs;function $0(){if(Qs)return Cr;Qs=1;var e=wu,t=xu,n=ho,r=I0(),i=A0(),s="[object Map]",o="[object Set]";function a(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var l=t(c);return l==s||l==o?c.size:e(c).length}return Cr=a,Cr}var Rr,Js;function M0(){if(Js)return Rr;Js=1;var e=zf,t=Ff,n=Nu,r=tt,i=Hf,s=gt,o=_u,a=Su,c=po,l=bu;function u(f,d,h){var g=s(f),m=g||o(f)||l(f);if(d=r(d),h==null){var v=f&&f.constructor;m?h=g?new v:[]:c(f)?h=a(v)?t(i(f)):{}:h={}}return(m?e:n)(f,function(y,E,k){return d(h,y,E,k)}),h}return Rr=u,Rr}var Tr,ea;function P0(){if(ea)return Tr;ea=1;var e=Of,t=Bf,n=Gf,r=Yf,i=t(function(s){return n(e(s,1,r,!0))});return Tr=i,Tr}var Ar,ta;function L0(){if(ta)return Ar;ta=1;var e=Eu;function t(n,r){return e(r,function(i){return n[i]})}return Ar=t,Ar}var $r,na;function al(){if(na)return $r;na=1;var e=L0(),t=mo;function n(r){return r==null?[]:e(r,t(r))}return $r=n,$r}var Mr,ra;function xe(){if(ra)return Mr;ra=1;var e;if(typeof fo=="function")try{e={clone:_0(),constant:ku(),each:tl(),filter:nl(),has:rl(),isArray:gt,isEmpty:N0(),isFunction:Su,isUndefined:il(),keys:mo,map:ol(),reduce:sl(),size:$0(),transform:M0(),union:P0(),values:al()}}catch{}return e||(e=window._),Mr=e,Mr}var Pr,ia;function Lo(){if(ia)return Pr;ia=1;var e=xe();Pr=i;var t="\0",n="\0",r="";function i(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(f){return e.isEmpty(u._in[f])})},i.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(f){return e.isEmpty(u._out[f])})},i.prototype.setNodes=function(u,f){var d=arguments,h=this;return e.each(u,function(g){d.length>1?h.setNode(g,f):h.setNode(g)}),this},i.prototype.setNode=function(u,f){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=f),this):(this._nodes[u]=arguments.length>1?f:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return e.has(this._nodes,u)},i.prototype.removeNode=function(u){var f=this;if(e.has(this._nodes,u)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(h){f.setParent(h)}),delete this._children[u]),e.each(e.keys(this._in[u]),d),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),d),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var d=f;!e.isUndefined(d);d=this.parent(d))if(d===u)throw new Error("Setting "+f+" as parent of "+u+" would create a cycle");this.setNode(f)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=f,this._children[f][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var f=this._parent[u];if(f!==n)return f}},i.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var f=this._children[u];if(f)return e.keys(f)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var f=this._preds[u];if(f)return e.keys(f)},i.prototype.successors=function(u){var f=this._sucs[u];if(f)return e.keys(f)},i.prototype.neighbors=function(u){var f=this.predecessors(u);if(f)return e.union(f,this.successors(u))},i.prototype.isLeaf=function(u){var f;return this.isDirected()?f=this.successors(u):f=this.neighbors(u),f.length===0},i.prototype.filterNodes=function(u){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;e.each(this._nodes,function(m,v){u(v)&&f.setNode(v,m)}),e.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,d.edge(m))});var h={};function g(m){var v=d.parent(m);return v===void 0||f.hasNode(v)?(h[m]=v,v):v in h?h[v]:g(v)}return this._isCompound&&e.each(f.nodes(),function(m){f.setParent(m,g(m))}),f},i.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(u,f){var d=this,h=arguments;return e.reduce(u,function(g,m){return h.length>1?d.setEdge(g,m,f):d.setEdge(g,m),m}),this},i.prototype.setEdge=function(){var u,f,d,h,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(u=m.v,f=m.w,d=m.name,arguments.length===2&&(h=arguments[1],g=!0)):(u=m,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],g=!0)),u=""+u,f=""+f,e.isUndefined(d)||(d=""+d);var v=a(this._isDirected,u,f,d);if(e.has(this._edgeLabels,v))return g&&(this._edgeLabels[v]=h),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(f),this._edgeLabels[v]=g?h:this._defaultEdgeLabelFn(u,f,d);var y=c(this._isDirected,u,f,d);return u=y.v,f=y.w,Object.freeze(y),this._edgeObjs[v]=y,s(this._preds[f],u),s(this._sucs[u],f),this._in[f][v]=y,this._out[u][v]=y,this._edgeCount++,this},i.prototype.edge=function(u,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,f,d);return this._edgeLabels[h]},i.prototype.hasEdge=function(u,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,f,d);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(u,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,f,d),g=this._edgeObjs[h];return g&&(u=g.v,f=g.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[f],u),o(this._sucs[u],f),delete this._in[f][h],delete this._out[u][h],this._edgeCount--),this},i.prototype.inEdges=function(u,f){var d=this._in[u];if(d){var h=e.values(d);return f?e.filter(h,function(g){return g.v===f}):h}},i.prototype.outEdges=function(u,f){var d=this._out[u];if(d){var h=e.values(d);return f?e.filter(h,function(g){return g.w===f}):h}},i.prototype.nodeEdges=function(u,f){var d=this.inEdges(u,f);if(d)return d.concat(this.outEdges(u,f))};function s(u,f){u[f]?u[f]++:u[f]=1}function o(u,f){--u[f]||delete u[f]}function a(u,f,d,h){var g=""+f,m=""+d;if(!u&&g>m){var v=g;g=m,m=v}return g+r+m+r+(e.isUndefined(h)?t:h)}function c(u,f,d,h){var g=""+f,m=""+d;if(!u&&g>m){var v=g;g=m,m=v}var y={v:g,w:m};return h&&(y.name=h),y}function l(u,f){return a(u,f.v,f.w,f.name)}return Pr}var Lr,oa;function q0(){return oa||(oa=1,Lr="2.1.8"),Lr}var qr,sa;function D0(){return sa||(sa=1,qr={Graph:Lo(),version:q0()}),qr}var Dr,aa;function V0(){if(aa)return Dr;aa=1;var e=xe(),t=Lo();Dr={write:n,read:s};function n(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function r(o){return e.map(o.nodes(),function(a){var c=o.node(a),l=o.parent(a),u={v:a};return e.isUndefined(c)||(u.value=c),e.isUndefined(l)||(u.parent=l),u})}function i(o){return e.map(o.edges(),function(a){var c=o.edge(a),l={v:a.v,w:a.w};return e.isUndefined(a.name)||(l.name=a.name),e.isUndefined(c)||(l.value=c),l})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(c){a.setNode(c.v,c.value),c.parent&&a.setParent(c.v,c.parent)}),e.each(o.edges,function(c){a.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),a}return Dr}var Vr,ua;function z0(){if(ua)return Vr;ua=1;var e=xe();Vr=t;function t(n){var r={},i=[],s;function o(a){e.has(r,a)||(r[a]=!0,s.push(a),e.each(n.successors(a),o),e.each(n.predecessors(a),o))}return e.each(n.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return Vr}var zr,ca;function ul(){if(ca)return zr;ca=1;var e=xe();zr=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r},zr}var Fr,la;function cl(){if(la)return Fr;la=1;var e=xe(),t=ul();Fr=r;var n=e.constant(1);function r(s,o,a,c){return i(s,String(o),a||n,c||function(l){return s.outEdges(l)})}function i(s,o,a,c){var l={},u=new t,f,d,h=function(g){var m=g.v!==f?g.v:g.w,v=l[m],y=a(g),E=d.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+y);E<v.distance&&(v.distance=E,v.predecessor=f,u.decrease(m,E))};for(s.nodes().forEach(function(g){var m=g===o?0:Number.POSITIVE_INFINITY;l[g]={distance:m},u.add(g,m)});u.size()>0&&(f=u.removeMin(),d=l[f],d.distance!==Number.POSITIVE_INFINITY);)c(f).forEach(h);return l}return Fr}var Hr,fa;function F0(){if(fa)return Hr;fa=1;var e=cl(),t=xe();Hr=n;function n(r,i,s){return t.transform(r.nodes(),function(o,a){o[a]=e(r,a,i,s)},{})}return Hr}var Or,da;function ll(){if(da)return Or;da=1;var e=xe();Or=t;function t(n){var r=0,i=[],s={},o=[];function a(c){var l=s[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(d){e.has(s,d)?s[d].onStack&&(l.lowlink=Math.min(l.lowlink,s[d].index)):(a(d),l.lowlink=Math.min(l.lowlink,s[d].lowlink))}),l.lowlink===l.index){var u=[],f;do f=i.pop(),s[f].onStack=!1,u.push(f);while(c!==f);o.push(u)}}return n.nodes().forEach(function(c){e.has(s,c)||a(c)}),o}return Or}var Br,ha;function H0(){if(ha)return Br;ha=1;var e=xe(),t=ll();Br=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Br}var Gr,pa;function O0(){if(pa)return Gr;pa=1;var e=xe();Gr=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(a){return i.outEdges(a)})}function r(i,s,o){var a={},c=i.nodes();return c.forEach(function(l){a[l]={},a[l][l]={distance:0},c.forEach(function(u){l!==u&&(a[l][u]={distance:Number.POSITIVE_INFINITY})}),o(l).forEach(function(u){var f=u.v===l?u.w:u.v,d=s(u);a[l][f]={distance:d,predecessor:l}})}),c.forEach(function(l){var u=a[l];c.forEach(function(f){var d=a[f];c.forEach(function(h){var g=d[l],m=u[h],v=d[h],y=g.distance+m.distance;y<v.distance&&(v.distance=y,v.predecessor=m.predecessor)})})}),a}return Gr}var Yr,ma;function fl(){if(ma)return Yr;ma=1;var e=xe();Yr=t,t.CycleException=n;function t(r){var i={},s={},o=[];function a(c){if(e.has(s,c))throw new n;e.has(i,c)||(s[c]=!0,i[c]=!0,e.each(r.predecessors(c),a),delete s[c],o.push(c))}if(e.each(r.sinks(),a),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Yr}var Ur,ga;function B0(){if(ga)return Ur;ga=1;var e=fl();Ur=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Ur}var Xr,ya;function dl(){if(ya)return Xr;ya=1;var e=xe();Xr=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],c={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,s==="post",c,o,a)}),a}function n(r,i,s,o,a,c){e.has(o,i)||(o[i]=!0,s||c.push(i),e.each(a(i),function(l){n(r,l,s,o,a,c)}),s&&c.push(i))}return Xr}var jr,va;function G0(){if(va)return jr;va=1;var e=dl();jr=t;function t(n,r){return e(n,r,"post")}return jr}var Wr,wa;function Y0(){if(wa)return Wr;wa=1;var e=dl();Wr=t;function t(n,r){return e(n,r,"pre")}return Wr}var Zr,xa;function U0(){if(xa)return Zr;xa=1;var e=xe(),t=Lo(),n=ul();Zr=r;function r(i,s){var o=new t,a={},c=new n,l;function u(d){var h=d.v===l?d.w:d.v,g=c.priority(h);if(g!==void 0){var m=s(d);m<g&&(a[h]=l,c.decrease(h,m))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(d){c.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),c.decrease(i.nodes()[0],0);for(var f=!1;c.size()>0;){if(l=c.removeMin(),e.has(a,l))o.setEdge(l,a[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(u)}return o}return Zr}var Kr,_a;function X0(){return _a||(_a=1,Kr={components:z0(),dijkstra:cl(),dijkstraAll:F0(),findCycles:H0(),floydWarshall:O0(),isAcyclic:B0(),postorder:G0(),preorder:Y0(),prim:U0(),tarjan:ll(),topsort:fl()}),Kr}var Qr,ba;function j0(){if(ba)return Qr;ba=1;var e=D0();return Qr={Graph:e.Graph,json:V0(),alg:X0(),version:e.version},Qr}var qn;if(typeof fo=="function")try{qn=j0()}catch{}qn||(qn=window.graphlib);var ke=qn,Jr,Ea;function W0(){if(Ea)return Jr;Ea=1;var e=tt,t=ho,n=mo;function r(i){return function(s,o,a){var c=Object(s);if(!t(s)){var l=e(o);s=n(s),o=function(f){return l(c[f],f,c)}}var u=i(s,o,a);return u>-1?c[l?s[u]:u]:void 0}}return Jr=r,Jr}var ei,Na;function Z0(){if(Na)return ei;Na=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return ei=t,ei}var ti,Sa;function K0(){if(Sa)return ti;Sa=1;var e=Z0(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return ti=n,ti}var ni,ka;function Q0(){if(ka)return ni;ka=1;var e=K0(),t=po,n=Iu,r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var f=s.test(l);return f||o.test(l)?a(l.slice(2),f?2:8):i.test(l)?r:+l}return ni=c,ni}var ri,Ia;function hl(){if(Ia)return ri;Ia=1;var e=Q0(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return ri=r,ri}var ii,Ca;function J0(){if(Ca)return ii;Ca=1;var e=hl();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ii=t,ii}var oi,Ra;function ev(){if(Ra)return oi;Ra=1;var e=Uf,t=tt,n=J0(),r=Math.max;function i(s,o,a){var c=s==null?0:s.length;if(!c)return-1;var l=a==null?0:n(a);return l<0&&(l=r(c+l,0)),e(s,t(o),l)}return oi=i,oi}var si,Ta;function tv(){if(Ta)return si;Ta=1;var e=W0(),t=ev(),n=e(t);return si=n,si}var ai,Aa;function nv(){if(Aa)return ai;Aa=1;var e=Xf(),t=jf,n=Wf;function r(i,s){return i==null?i:e(i,t(s),n)}return ai=r,ai}var ui,$a;function rv(){if($a)return ui;$a=1;var e=Zf(),t=Nu,n=tt;function r(i,s){var o={};return s=n(s),t(i,function(a,c,l){e(o,c,s(a,c,l))}),o}return ui=r,ui}var ci,Ma;function qo(){if(Ma)return ci;Ma=1;var e=Iu;function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var a=n[s],c=r(a);if(c!=null&&(l===void 0?c===c&&!e(c):i(c,l)))var l=c,u=a}return u}return ci=t,ci}var li,Pa;function iv(){if(Pa)return li;Pa=1;function e(t,n){return t>n}return li=e,li}var fi,La;function ov(){if(La)return fi;La=1;var e=qo(),t=iv(),n=Cu;function r(i){return i&&i.length?e(i,n,t):void 0}return fi=r,fi}var di,qa;function sv(){if(qa)return di;qa=1;var e=Qf,t=Kf,n=t(function(r,i,s){e(r,i,s)});return di=n,di}var hi,Da;function pl(){if(Da)return hi;Da=1;function e(t,n){return t<n}return hi=e,hi}var pi,Va;function av(){if(Va)return pi;Va=1;var e=qo(),t=pl(),n=Cu;function r(i){return i&&i.length?e(i,n,t):void 0}return pi=r,pi}var mi,za;function uv(){if(za)return mi;za=1;var e=qo(),t=tt,n=pl();function r(i,s){return i&&i.length?e(i,t(s),n):void 0}return mi=r,mi}var gi,Fa;function cv(){if(Fa)return gi;Fa=1;var e=Jf(),t=function(){return e.Date.now()};return gi=t,gi}var yi,Ha;function lv(){if(Ha)return yi;Ha=1;var e=Ru,t=Tu,n=ed,r=po,i=td;function s(o,a,c,l){if(!r(o))return o;a=t(a,o);for(var u=-1,f=a.length,d=f-1,h=o;h!=null&&++u<f;){var g=i(a[u]),m=c;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(u!=d){var v=h[g];m=l?l(v,g,h):void 0,m===void 0&&(m=r(v)?v:n(a[u+1])?[]:{})}e(h,g,m),h=h[g]}return o}return yi=s,yi}var vi,Oa;function fv(){if(Oa)return vi;Oa=1;var e=nd,t=lv(),n=Tu;function r(i,s,o){for(var a=-1,c=s.length,l={};++a<c;){var u=s[a],f=e(i,u);o(f,u)&&t(l,n(u,i),f)}return l}return vi=r,vi}var wi,Ba;function dv(){if(Ba)return wi;Ba=1;var e=fv(),t=rd;function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return wi=n,wi}var xi,Ga;function hv(){if(Ga)return xi;Ga=1;var e=Au,t=id,n=od;function r(i){return n(t(i,void 0,e),i+"")}return xi=r,xi}var _i,Ya;function pv(){if(Ya)return _i;Ya=1;var e=dv(),t=hv(),n=t(function(r,i){return r==null?{}:e(r,i)});return _i=n,_i}var bi,Ua;function mv(){if(Ua)return bi;Ua=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var a=-1,c=t(e((i-r)/(s||1)),0),l=Array(c);c--;)l[o?c:++a]=r,r+=s;return l}return bi=n,bi}var Ei,Xa;function gv(){if(Xa)return Ei;Xa=1;var e=mv(),t=sd,n=hl();function r(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),a=a===void 0?s<o?1:-1:n(a),e(s,o,a,i)}}return Ei=r,Ei}var Ni,ja;function yv(){if(ja)return Ni;ja=1;var e=gv(),t=e();return Ni=t,Ni}var Si,Wa;function vv(){if(Wa)return Si;Wa=1;var e=ad(),t=0;function n(r){var i=++t;return e(r)+i}return Si=n,Si}var ki,Za;function wv(){if(Za)return ki;Za=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,a={};++i<s;){var c=i<o?n[i]:void 0;r(a,t[i],c)}return a}return ki=e,ki}var Ii,Ka;function xv(){if(Ka)return Ii;Ka=1;var e=Ru,t=wv();function n(r,i){return t(r||[],i||[],e)}return Ii=n,Ii}var Dn;if(typeof fo=="function")try{Dn={cloneDeep:ud,constant:ku(),defaults:cd,each:tl(),filter:nl(),find:tv(),flatten:Au,forEach:yu,forIn:nv(),has:rl(),isUndefined:il(),last:ld,map:ol(),mapValues:rv(),max:ov(),merge:sv(),min:av(),minBy:uv(),now:cv(),pick:pv(),range:yv(),reduce:sl(),sortBy:fd,uniqueId:vv(),values:al(),zipObject:xv()}}catch{}Dn||(Dn=window._);var ne=Dn,_v=Wn;function Wn(){var e={};e._next=e._prev=e,this._sentinel=e}Wn.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return ml(t),t};Wn.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&ml(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Wn.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,bv)),n=n._prev;return"["+e.join(", ")+"]"};function ml(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function bv(e,t){if(e!=="_next"&&e!=="_prev")return t}var Fe=ne,Ev=ke.Graph,Nv=_v,Sv=Iv,kv=Fe.constant(1);function Iv(e,t){if(e.nodeCount()<=1)return[];var n=Rv(e,t||kv),r=Cv(n.graph,n.buckets,n.zeroIdx);return Fe.flatten(Fe.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function Cv(e,t,n){for(var r=[],i=t[t.length-1],s=t[0],o;e.nodeCount();){for(;o=s.dequeue();)Ci(e,t,n,o);for(;o=i.dequeue();)Ci(e,t,n,o);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){r=r.concat(Ci(e,t,n,o,!0));break}}}return r}function Ci(e,t,n,r,i){var s=i?[]:void 0;return Fe.forEach(e.inEdges(r.v),function(o){var a=e.edge(o),c=e.node(o.v);i&&s.push({v:o.v,w:o.w}),c.out-=a,oo(t,n,c)}),Fe.forEach(e.outEdges(r.v),function(o){var a=e.edge(o),c=o.w,l=e.node(c);l.in-=a,oo(t,n,l)}),e.removeNode(r.v),s}function Rv(e,t){var n=new Ev,r=0,i=0;Fe.forEach(e.nodes(),function(a){n.setNode(a,{v:a,in:0,out:0})}),Fe.forEach(e.edges(),function(a){var c=n.edge(a.v,a.w)||0,l=t(a),u=c+l;n.setEdge(a.v,a.w,u),i=Math.max(i,n.node(a.v).out+=l),r=Math.max(r,n.node(a.w).in+=l)});var s=Fe.range(i+r+3).map(function(){return new Nv}),o=r+1;return Fe.forEach(n.nodes(),function(a){oo(s,o,n.node(a))}),{graph:n,buckets:s,zeroIdx:o}}function oo(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var dt=ne,Tv=Sv,Av={run:$v,undo:Pv};function $v(e){var t=e.graph().acyclicer==="greedy"?Tv(e,n(e)):Mv(e);dt.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,dt.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function Mv(e){var t=[],n={},r={};function i(s){dt.has(r,s)||(r[s]=!0,n[s]=!0,dt.forEach(e.outEdges(s),function(o){dt.has(n,o.w)?t.push(o):i(o.w)}),delete n[s])}return dt.forEach(e.nodes(),i),t}function Pv(e){dt.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var Q=ne,gl=ke.Graph,de={addDummyNode:yl,simplify:Lv,asNonCompoundGraph:qv,successorWeights:Dv,predecessorWeights:Vv,intersectRect:zv,buildLayerMatrix:Fv,normalizeRanks:Hv,removeEmptyRanks:Ov,addBorderNode:Bv,maxRank:vl,partition:Gv,time:Yv,notime:Uv};function yl(e,t,n,r){var i;do i=Q.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function Lv(e){var t=new gl().setGraph(e.graph());return Q.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),Q.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function qv(e){var t=new gl({multigraph:e.isMultigraph()}).setGraph(e.graph());return Q.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),Q.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function Dv(e){var t=Q.map(e.nodes(),function(n){var r={};return Q.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return Q.zipObject(e.nodes(),t)}function Vv(e){var t=Q.map(e.nodes(),function(n){var r={};return Q.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return Q.zipObject(e.nodes(),t)}function zv(e,t){var n=e.x,r=e.y,i=t.x-n,s=t.y-r,o=e.width/2,a=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var c,l;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),c=a*i/s,l=a):(i<0&&(o=-o),c=o,l=o*s/i),{x:n+c,y:r+l}}function Fv(e){var t=Q.map(Q.range(vl(e)+1),function(){return[]});return Q.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;Q.isUndefined(i)||(t[i][r.order]=n)}),t}function Hv(e){var t=Q.min(Q.map(e.nodes(),function(n){return e.node(n).rank}));Q.forEach(e.nodes(),function(n){var r=e.node(n);Q.has(r,"rank")&&(r.rank-=t)})}function Ov(e){var t=Q.min(Q.map(e.nodes(),function(s){return e.node(s).rank})),n=[];Q.forEach(e.nodes(),function(s){var o=e.node(s).rank-t;n[o]||(n[o]=[]),n[o].push(s)});var r=0,i=e.graph().nodeRankFactor;Q.forEach(n,function(s,o){Q.isUndefined(s)&&o%i!==0?--r:r&&Q.forEach(s,function(a){e.node(a).rank+=r})})}function Bv(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),yl(e,"border",i,t)}function vl(e){return Q.max(Q.map(e.nodes(),function(t){var n=e.node(t).rank;if(!Q.isUndefined(n))return n}))}function Gv(e,t){var n={lhs:[],rhs:[]};return Q.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function Yv(e,t){var n=Q.now();try{return t()}finally{console.log(e+" time: "+(Q.now()-n)+"ms")}}function Uv(e,t){return t()}var wl=ne,Xv=de,jv={run:Wv,undo:Kv};function Wv(e){e.graph().dummyChains=[],wl.forEach(e.edges(),function(t){Zv(e,t)})}function Zv(e,t){var n=t.v,r=e.node(n).rank,i=t.w,s=e.node(i).rank,o=t.name,a=e.edge(t),c=a.labelRank;if(s!==r+1){e.removeEdge(t);var l,u,f;for(f=0,++r;r<s;++f,++r)a.points=[],u={width:0,height:0,edgeLabel:a,edgeObj:t,rank:r},l=Xv.addDummyNode(e,"edge",u,"_d"),r===c&&(u.width=a.width,u.height=a.height,u.dummy="edge-label",u.labelpos=a.labelpos),e.setEdge(n,l,{weight:a.weight},o),f===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:a.weight},o)}}function Kv(e){wl.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var xn=ne,Zn={longestPath:Qv,slack:Jv};function Qv(e){var t={};function n(r){var i=e.node(r);if(xn.has(t,r))return i.rank;t[r]=!0;var s=xn.min(xn.map(e.outEdges(r),function(o){return n(o.w)-e.edge(o).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}xn.forEach(e.sources(),n)}function Jv(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Vn=ne,ew=ke.Graph,zn=Zn.slack,xl=tw;function tw(e){var t=new ew({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,s;nw(t,e)<r;)i=rw(t,e),s=t.hasNode(i.v)?zn(e,i):-zn(e,i),iw(t,e,s);return t}function nw(e,t){function n(r){Vn.forEach(t.nodeEdges(r),function(i){var s=i.v,o=r===s?i.w:s;!e.hasNode(o)&&!zn(t,i)&&(e.setNode(o,{}),e.setEdge(r,o,{}),n(o))})}return Vn.forEach(e.nodes(),n),e.nodeCount()}function rw(e,t){return Vn.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return zn(t,n)})}function iw(e,t,n){Vn.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Ge=ne,ow=xl,sw=Zn.slack,aw=Zn.longestPath,uw=ke.alg.preorder,cw=ke.alg.postorder,lw=de.simplify,fw=yt;yt.initLowLimValues=Vo;yt.initCutValues=Do;yt.calcCutValue=_l;yt.leaveEdge=El;yt.enterEdge=Nl;yt.exchangeEdges=Sl;function yt(e){e=lw(e),aw(e);var t=ow(e);Vo(t),Do(t,e);for(var n,r;n=El(t);)r=Nl(t,e,n),Sl(t,e,n,r)}function Do(e,t){var n=cw(e,e.nodes());n=n.slice(0,n.length-1),Ge.forEach(n,function(r){dw(e,t,r)})}function dw(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=_l(e,t,n)}function _l(e,t,n){var r=e.node(n),i=r.parent,s=!0,o=t.edge(n,i),a=0;return o||(s=!1,o=t.edge(i,n)),a=o.weight,Ge.forEach(t.nodeEdges(n),function(c){var l=c.v===n,u=l?c.w:c.v;if(u!==i){var f=l===s,d=t.edge(c).weight;if(a+=f?d:-d,pw(e,n,u)){var h=e.edge(n,u).cutvalue;a+=f?-h:h}}}),a}function Vo(e,t){arguments.length<2&&(t=e.nodes()[0]),bl(e,{},1,t)}function bl(e,t,n,r,i){var s=n,o=e.node(r);return t[r]=!0,Ge.forEach(e.neighbors(r),function(a){Ge.has(t,a)||(n=bl(e,t,n,a,r))}),o.low=s,o.lim=n++,i?o.parent=i:delete o.parent,n}function El(e){return Ge.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Nl(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var s=e.node(r),o=e.node(i),a=s,c=!1;s.lim>o.lim&&(a=o,c=!0);var l=Ge.filter(t.edges(),function(u){return c===Qa(e,e.node(u.v),a)&&c!==Qa(e,e.node(u.w),a)});return Ge.minBy(l,function(u){return sw(t,u)})}function Sl(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),Vo(e),Do(e,t),hw(e,t)}function hw(e,t){var n=Ge.find(e.nodes(),function(i){return!t.node(i).parent}),r=uw(e,n);r=r.slice(1),Ge.forEach(r,function(i){var s=e.node(i).parent,o=t.edge(i,s),a=!1;o||(o=t.edge(s,i),a=!0),t.node(i).rank=t.node(s).rank+(a?o.minlen:-o.minlen)})}function pw(e,t,n){return e.hasEdge(t,n)}function Qa(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var mw=Zn,kl=mw.longestPath,gw=xl,yw=fw,vw=ww;function ww(e){switch(e.graph().ranker){case"network-simplex":Ja(e);break;case"tight-tree":_w(e);break;case"longest-path":xw(e);break;default:Ja(e)}}var xw=kl;function _w(e){kl(e),gw(e)}function Ja(e){yw(e)}var so=ne,bw=Ew;function Ew(e){var t=Sw(e);so.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,s=Nw(e,t,i.v,i.w),o=s.path,a=s.lca,c=0,l=o[c],u=!0;n!==i.w;){if(r=e.node(n),u){for(;(l=o[c])!==a&&e.node(l).maxRank<r.rank;)c++;l===a&&(u=!1)}if(!u){for(;c<o.length-1&&e.node(l=o[c+1]).minRank<=r.rank;)c++;l=o[c]}e.setParent(n,l),n=e.successors(n)[0]}})}function Nw(e,t,n,r){var i=[],s=[],o=Math.min(t[n].low,t[r].low),a=Math.max(t[n].lim,t[r].lim),c,l;c=n;do c=e.parent(c),i.push(c);while(c&&(t[c].low>o||a>t[c].lim));for(l=c,c=r;(c=e.parent(c))!==l;)s.push(c);return{path:i.concat(s.reverse()),lca:l}}function Sw(e){var t={},n=0;function r(i){var s=n;so.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return so.forEach(e.children(),r),t}var He=ne,ao=de,kw={run:Iw,cleanup:Tw};function Iw(e){var t=ao.addDummyNode(e,"root",{},"_root"),n=Cw(e),r=He.max(He.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,He.forEach(e.edges(),function(o){e.edge(o).minlen*=i});var s=Rw(e)+1;He.forEach(e.children(),function(o){Il(e,t,i,s,r,n,o)}),e.graph().nodeRankFactor=i}function Il(e,t,n,r,i,s,o){var a=e.children(o);if(!a.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}var c=ao.addBorderNode(e,"_bt"),l=ao.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(c,o),u.borderTop=c,e.setParent(l,o),u.borderBottom=l,He.forEach(a,function(f){Il(e,t,n,r,i,s,f);var d=e.node(f),h=d.borderTop?d.borderTop:f,g=d.borderBottom?d.borderBottom:f,m=d.borderTop?r:2*r,v=h!==g?1:i-s[o]+1;e.setEdge(c,h,{weight:m,minlen:v,nestingEdge:!0}),e.setEdge(g,l,{weight:m,minlen:v,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,c,{weight:0,minlen:i+s[o]})}function Cw(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&He.forEach(s,function(o){n(o,i+1)}),t[r]=i}return He.forEach(e.children(),function(r){n(r,1)}),t}function Rw(e){return He.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function Tw(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,He.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Ri=ne,Aw=de,$w=Mw;function Mw(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Ri.forEach(r,t),Ri.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,o=i.maxRank+1;s<o;++s)eu(e,"borderLeft","_bl",n,i,s),eu(e,"borderRight","_br",n,i,s)}}Ri.forEach(e.children(),t)}function eu(e,t,n,r,i,s){var o={width:0,height:0,rank:s,borderType:t},a=i[t][s-1],c=Aw.addDummyNode(e,"border",o,n);i[t][s]=c,e.setParent(c,r),a&&e.setEdge(a,c,{weight:1})}var Ae=ne,Pw={adjust:Lw,undo:qw};function Lw(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Cl(e)}function qw(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Dw(e),(t==="lr"||t==="rl")&&(Vw(e),Cl(e))}function Cl(e){Ae.forEach(e.nodes(),function(t){tu(e.node(t))}),Ae.forEach(e.edges(),function(t){tu(e.edge(t))})}function tu(e){var t=e.width;e.width=e.height,e.height=t}function Dw(e){Ae.forEach(e.nodes(),function(t){Ti(e.node(t))}),Ae.forEach(e.edges(),function(t){var n=e.edge(t);Ae.forEach(n.points,Ti),Ae.has(n,"y")&&Ti(n)})}function Ti(e){e.y=-e.y}function Vw(e){Ae.forEach(e.nodes(),function(t){Ai(e.node(t))}),Ae.forEach(e.edges(),function(t){var n=e.edge(t);Ae.forEach(n.points,Ai),Ae.has(n,"x")&&Ai(n)})}function Ai(e){var t=e.x;e.x=e.y,e.y=t}var De=ne,zw=Fw;function Fw(e){var t={},n=De.filter(e.nodes(),function(a){return!e.children(a).length}),r=De.max(De.map(n,function(a){return e.node(a).rank})),i=De.map(De.range(r+1),function(){return[]});function s(a){if(!De.has(t,a)){t[a]=!0;var c=e.node(a);i[c.rank].push(a),De.forEach(e.successors(a),s)}}var o=De.sortBy(n,function(a){return e.node(a).rank});return De.forEach(o,s),i}var Xe=ne,Hw=Ow;function Ow(e,t){for(var n=0,r=1;r<t.length;++r)n+=Bw(e,t[r-1],t[r]);return n}function Bw(e,t,n){for(var r=Xe.zipObject(n,Xe.map(n,function(l,u){return u})),i=Xe.flatten(Xe.map(t,function(l){return Xe.sortBy(Xe.map(e.outEdges(l),function(u){return{pos:r[u.w],weight:e.edge(u).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var o=2*s-1;s-=1;var a=Xe.map(new Array(o),function(){return 0}),c=0;return Xe.forEach(i.forEach(function(l){var u=l.pos+s;a[u]+=l.weight;for(var f=0;u>0;)u%2&&(f+=a[u+1]),u=u-1>>1,a[u]+=l.weight;c+=l.weight*f})),c}var nu=ne,Gw=Yw;function Yw(e,t){return nu.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=nu.reduce(r,function(s,o){var a=e.edge(o),c=e.node(o.v);return{sum:s.sum+a.weight*c.order,weight:s.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var ge=ne,Uw=Xw;function Xw(e,t){var n={};ge.forEach(e,function(i,s){var o=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};ge.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),ge.forEach(t.edges(),function(i){var s=n[i.v],o=n[i.w];!ge.isUndefined(s)&&!ge.isUndefined(o)&&(o.indegree++,s.out.push(n[i.w]))});var r=ge.filter(n,function(i){return!i.indegree});return jw(r)}function jw(e){var t=[];function n(s){return function(o){o.merged||(ge.isUndefined(o.barycenter)||ge.isUndefined(s.barycenter)||o.barycenter>=s.barycenter)&&Ww(s,o)}}function r(s){return function(o){o.in.push(s),--o.indegree===0&&e.push(o)}}for(;e.length;){var i=e.pop();t.push(i),ge.forEach(i.in.reverse(),n(i)),ge.forEach(i.out,r(i))}return ge.map(ge.filter(t,function(s){return!s.merged}),function(s){return ge.pick(s,["vs","i","barycenter","weight"])})}function Ww(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Wt=ne,Zw=de,Kw=Qw;function Qw(e,t){var n=Zw.partition(e,function(u){return Wt.has(u,"barycenter")}),r=n.lhs,i=Wt.sortBy(n.rhs,function(u){return-u.i}),s=[],o=0,a=0,c=0;r.sort(Jw(!!t)),c=ru(s,i,c),Wt.forEach(r,function(u){c+=u.vs.length,s.push(u.vs),o+=u.barycenter*u.weight,a+=u.weight,c=ru(s,i,c)});var l={vs:Wt.flatten(s,!0)};return a&&(l.barycenter=o/a,l.weight=a),l}function ru(e,t,n){for(var r;t.length&&(r=Wt.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function Jw(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Ze=ne,ex=Gw,tx=Uw,nx=Kw,rx=Rl;function Rl(e,t,n,r){var i=e.children(t),s=e.node(t),o=s?s.borderLeft:void 0,a=s?s.borderRight:void 0,c={};o&&(i=Ze.filter(i,function(g){return g!==o&&g!==a}));var l=ex(e,i);Ze.forEach(l,function(g){if(e.children(g.v).length){var m=Rl(e,g.v,n,r);c[g.v]=m,Ze.has(m,"barycenter")&&ox(g,m)}});var u=tx(l,n);ix(u,c);var f=nx(u,r);if(o&&(f.vs=Ze.flatten([o,f.vs,a],!0),e.predecessors(o).length)){var d=e.node(e.predecessors(o)[0]),h=e.node(e.predecessors(a)[0]);Ze.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+h.order)/(f.weight+2),f.weight+=2}return f}function ix(e,t){Ze.forEach(e,function(n){n.vs=Ze.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function ox(e,t){Ze.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Zt=ne,sx=ke.Graph,ax=ux;function ux(e,t,n){var r=cx(e),i=new sx({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return e.node(s)});return Zt.forEach(e.nodes(),function(s){var o=e.node(s),a=e.parent(s);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(s),i.setParent(s,a||r),Zt.forEach(e[n](s),function(c){var l=c.v===s?c.w:c.v,u=i.edge(l,s),f=Zt.isUndefined(u)?0:u.weight;i.setEdge(l,s,{weight:e.edge(c).weight+f})}),Zt.has(o,"minRank")&&i.setNode(s,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}function cx(e){for(var t;e.hasNode(t=Zt.uniqueId("_root")););return t}var lx=ne,fx=dx;function dx(e,t,n){var r={},i;lx.forEach(n,function(s){for(var o=e.parent(s),a,c;o;){if(a=e.parent(o),a?(c=r[a],r[a]=o):(c=i,i=o),c&&c!==o){t.setEdge(c,o);return}o=a}})}var Je=ne,hx=zw,px=Hw,mx=rx,gx=ax,yx=fx,vx=ke.Graph,iu=de,wx=xx;function xx(e){var t=iu.maxRank(e),n=ou(e,Je.range(1,t+1),"inEdges"),r=ou(e,Je.range(t-1,-1,-1),"outEdges"),i=hx(e);su(e,i);for(var s=Number.POSITIVE_INFINITY,o,a=0,c=0;c<4;++a,++c){_x(a%2?n:r,a%4>=2),i=iu.buildLayerMatrix(e);var l=px(e,i);l<s&&(c=0,o=Je.cloneDeep(i),s=l)}su(e,o)}function ou(e,t,n){return Je.map(t,function(r){return gx(e,r,n)})}function _x(e,t){var n=new vx;Je.forEach(e,function(r){var i=r.graph().root,s=mx(r,i,n,t);Je.forEach(s.vs,function(o,a){r.node(o).order=a}),yx(r,n,s.vs)})}function su(e,t){Je.forEach(t,function(n){Je.forEach(n,function(r,i){e.node(r).order=i})})}var U=ne,bx=ke.Graph,Ex=de,Nx={positionX:Ix,findType1Conflicts:Tl,findType2Conflicts:Al,addConflict:zo,hasConflict:$l,verticalAlignment:Ml,horizontalCompaction:Pl,alignCoordinates:ql,findSmallestWidthAlignment:Ll,balance:Dl};function Tl(e,t){var n={};function r(i,s){var o=0,a=0,c=i.length,l=U.last(s);return U.forEach(s,function(u,f){var d=Sx(e,u),h=d?e.node(d).order:c;(d||u===l)&&(U.forEach(s.slice(a,f+1),function(g){U.forEach(e.predecessors(g),function(m){var v=e.node(m),y=v.order;(y<o||h<y)&&!(v.dummy&&e.node(g).dummy)&&zo(n,m,g)})}),a=f+1,o=h)}),s}return U.reduce(t,r),n}function Al(e,t){var n={};function r(s,o,a,c,l){var u;U.forEach(U.range(o,a),function(f){u=s[f],e.node(u).dummy&&U.forEach(e.predecessors(u),function(d){var h=e.node(d);h.dummy&&(h.order<c||h.order>l)&&zo(n,d,u)})})}function i(s,o){var a=-1,c,l=0;return U.forEach(o,function(u,f){if(e.node(u).dummy==="border"){var d=e.predecessors(u);d.length&&(c=e.node(d[0]).order,r(o,l,f,a,c),l=f,a=c)}r(o,l,o.length,c,s.length)}),o}return U.reduce(t,i),n}function Sx(e,t){if(e.node(t).dummy)return U.find(e.predecessors(t),function(n){return e.node(n).dummy})}function zo(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function $l(e,t,n){if(t>n){var r=t;t=n,n=r}return U.has(e[t],n)}function Ml(e,t,n,r){var i={},s={},o={};return U.forEach(t,function(a){U.forEach(a,function(c,l){i[c]=c,s[c]=c,o[c]=l})}),U.forEach(t,function(a){var c=-1;U.forEach(a,function(l){var u=r(l);if(u.length){u=U.sortBy(u,function(m){return o[m]});for(var f=(u.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var g=u[d];s[l]===l&&c<o[g]&&!$l(n,l,g)&&(s[g]=l,s[l]=i[l]=i[g],c=o[g])}}})}),{root:i,align:s}}function Pl(e,t,n,r,i){var s={},o=kx(e,t,n,i),a=i?"borderLeft":"borderRight";function c(f,d){for(var h=o.nodes(),g=h.pop(),m={};g;)m[g]?f(g):(m[g]=!0,h.push(g),h=h.concat(d(g))),g=h.pop()}function l(f){s[f]=o.inEdges(f).reduce(function(d,h){return Math.max(d,s[h.v]+o.edge(h))},0)}function u(f){var d=o.outEdges(f).reduce(function(g,m){return Math.min(g,s[m.w]-o.edge(m))},Number.POSITIVE_INFINITY),h=e.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==a&&(s[f]=Math.max(s[f],d))}return c(l,o.predecessors.bind(o)),c(u,o.successors.bind(o)),U.forEach(r,function(f){s[f]=s[n[f]]}),s}function kx(e,t,n,r){var i=new bx,s=e.graph(),o=Cx(s.nodesep,s.edgesep,r);return U.forEach(t,function(a){var c;U.forEach(a,function(l){var u=n[l];if(i.setNode(u),c){var f=n[c],d=i.edge(f,u);i.setEdge(f,u,Math.max(o(e,l,c),d||0))}c=l})}),i}function Ll(e,t){return U.minBy(U.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return U.forIn(n,function(s,o){var a=Rx(e,o)/2;r=Math.max(s+a,r),i=Math.min(s-a,i)}),r-i})}function ql(e,t){var n=U.values(t),r=U.min(n),i=U.max(n);U.forEach(["u","d"],function(s){U.forEach(["l","r"],function(o){var a=s+o,c=e[a],l;if(c!==t){var u=U.values(c);l=o==="l"?r-U.min(u):i-U.max(u),l&&(e[a]=U.mapValues(c,function(f){return f+l}))}})})}function Dl(e,t){return U.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=U.sortBy(U.map(e,r));return(i[1]+i[2])/2})}function Ix(e){var t=Ex.buildLayerMatrix(e),n=U.merge(Tl(e,t),Al(e,t)),r={},i;U.forEach(["u","d"],function(o){i=o==="u"?t:U.values(t).reverse(),U.forEach(["l","r"],function(a){a==="r"&&(i=U.map(i,function(f){return U.values(f).reverse()}));var c=(o==="u"?e.predecessors:e.successors).bind(e),l=Ml(e,i,n,c),u=Pl(e,i,l.root,l.align,a==="r");a==="r"&&(u=U.mapValues(u,function(f){return-f})),r[o+a]=u})});var s=Ll(e,r);return ql(r,s),Dl(r,e.graph().align)}function Cx(e,t,n){return function(r,i,s){var o=r.node(i),a=r.node(s),c=0,l;if(c+=o.width/2,U.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=-o.width/2;break;case"r":l=o.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(o.dummy?t:e)/2,c+=(a.dummy?t:e)/2,c+=a.width/2,U.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=a.width/2;break;case"r":l=-a.width/2;break}return l&&(c+=n?l:-l),l=0,c}}function Rx(e,t){return e.node(t).width}var Kt=ne,Vl=de,Tx=Nx.positionX,Ax=$x;function $x(e){e=Vl.asNonCompoundGraph(e),Mx(e),Kt.forEach(Tx(e),function(t,n){e.node(n).x=t})}function Mx(e){var t=Vl.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Kt.forEach(t,function(i){var s=Kt.max(Kt.map(i,function(o){return e.node(o).height}));Kt.forEach(i,function(o){e.node(o).y=r+s/2}),r+=s+n})}var j=ne,au=Av,uu=jv,Px=vw,Lx=de.normalizeRanks,qx=bw,Dx=de.removeEmptyRanks,cu=kw,Vx=$w,lu=Pw,zx=wx,Fx=Ax,et=de,Hx=ke.Graph,Ox=Bx;function Bx(e,t){var n=t&&t.debugTiming?et.time:et.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return e_(e)});n("  runLayout",function(){Gx(r,n)}),n("  updateInputGraph",function(){Yx(e,r)})})}function Gx(e,t){t("    makeSpaceForEdgeLabels",function(){t_(e)}),t("    removeSelfEdges",function(){l_(e)}),t("    acyclic",function(){au.run(e)}),t("    nestingGraph.run",function(){cu.run(e)}),t("    rank",function(){Px(et.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){n_(e)}),t("    removeEmptyRanks",function(){Dx(e)}),t("    nestingGraph.cleanup",function(){cu.cleanup(e)}),t("    normalizeRanks",function(){Lx(e)}),t("    assignRankMinMax",function(){r_(e)}),t("    removeEdgeLabelProxies",function(){i_(e)}),t("    normalize.run",function(){uu.run(e)}),t("    parentDummyChains",function(){qx(e)}),t("    addBorderSegments",function(){Vx(e)}),t("    order",function(){zx(e)}),t("    insertSelfEdges",function(){f_(e)}),t("    adjustCoordinateSystem",function(){lu.adjust(e)}),t("    position",function(){Fx(e)}),t("    positionSelfEdges",function(){d_(e)}),t("    removeBorderNodes",function(){c_(e)}),t("    normalize.undo",function(){uu.undo(e)}),t("    fixupEdgeLabelCoords",function(){a_(e)}),t("    undoCoordinateSystem",function(){lu.undo(e)}),t("    translateGraph",function(){o_(e)}),t("    assignNodeIntersects",function(){s_(e)}),t("    reversePoints",function(){u_(e)}),t("    acyclic.undo",function(){au.undo(e)})}function Yx(e,t){j.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),j.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,j.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var Ux=["nodesep","edgesep","ranksep","marginx","marginy"],Xx={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},jx=["acyclicer","ranker","rankdir","align"],Wx=["width","height"],Zx={width:0,height:0},Kx=["minlen","weight","width","height","labeloffset"],Qx={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Jx=["labelpos"];function e_(e){var t=new Hx({multigraph:!0,compound:!0}),n=Mi(e.graph());return t.setGraph(j.merge({},Xx,$i(n,Ux),j.pick(n,jx))),j.forEach(e.nodes(),function(r){var i=Mi(e.node(r));t.setNode(r,j.defaults($i(i,Wx),Zx)),t.setParent(r,e.parent(r))}),j.forEach(e.edges(),function(r){var i=Mi(e.edge(r));t.setEdge(r,j.merge({},Qx,$i(i,Kx),j.pick(i,Jx)))}),t}function t_(e){var t=e.graph();t.ranksep/=2,j.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function n_(e){j.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-r.rank)/2+r.rank,e:t};et.addDummyNode(e,"edge-proxy",s,"_ep")}})}function r_(e){var t=0;j.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=j.max(t,r.maxRank))}),e.graph().maxRank=t}function i_(e){j.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function o_(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),o=s.marginx||0,a=s.marginy||0;function c(l){var u=l.x,f=l.y,d=l.width,h=l.height;t=Math.min(t,u-d/2),n=Math.max(n,u+d/2),r=Math.min(r,f-h/2),i=Math.max(i,f+h/2)}j.forEach(e.nodes(),function(l){c(e.node(l))}),j.forEach(e.edges(),function(l){var u=e.edge(l);j.has(u,"x")&&c(u)}),t-=o,r-=a,j.forEach(e.nodes(),function(l){var u=e.node(l);u.x-=t,u.y-=r}),j.forEach(e.edges(),function(l){var u=e.edge(l);j.forEach(u.points,function(f){f.x-=t,f.y-=r}),j.has(u,"x")&&(u.x-=t),j.has(u,"y")&&(u.y-=r)}),s.width=n-t+o,s.height=i-r+a}function s_(e){j.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),s,o;n.points?(s=n.points[0],o=n.points[n.points.length-1]):(n.points=[],s=i,o=r),n.points.unshift(et.intersectRect(r,s)),n.points.push(et.intersectRect(i,o))})}function a_(e){j.forEach(e.edges(),function(t){var n=e.edge(t);if(j.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function u_(e){j.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function c_(e){j.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(j.last(n.borderLeft)),o=e.node(j.last(n.borderRight));n.width=Math.abs(o.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),j.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function l_(e){j.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function f_(e){var t=et.buildLayerMatrix(e);j.forEach(t,function(n){var r=0;j.forEach(n,function(i,s){var o=e.node(i);o.order=s+r,j.forEach(o.selfEdges,function(a){et.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:s+ ++r,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function d_(e){j.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,s=r.y,o=n.x-i,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],n.label.x=n.x,n.label.y=n.y}})}function $i(e,t){return j.mapValues(j.pick(e,t),Number)}function Mi(e){var t={};return j.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var _n=ne,h_=de,p_=ke.Graph,m_={debugOrdering:g_};function g_(e){var t=h_.buildLayerMatrix(e),n=new p_({compound:!0,multigraph:!0}).setGraph({});return _n.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),_n.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),_n.forEach(t,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),_n.reduce(r,function(o,a){return n.setEdge(o,a,{style:"invis"}),a})}),n}var y_="0.8.5",v_={graphlib:ke,layout:Ox,debug:m_,util:{time:de.time,notime:de.notime},version:y_};const zl=gu(v_),w_=()=>B.jsxs(B.Fragment,{children:[B.jsx(qi,{variant:"smallText1",className:"description",children:"Undefined"}),B.jsx(dd,{placement:"top",markdownText:`Provenance tracks the relationship 
          between data, code and analytical results.`,helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),uo=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return N.useMemo(()=>B.jsxs(B.Fragment,{children:[B.jsx("div",{children:B.jsx(lo,{icon:"fileOutlined"})}),B.jsx("span",{children:n})]}),[n])};try{uo.displayName="EntityPlaceholderNodeLabel",uo.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}}}catch{}var le=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(le||{});const Fn=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=B.jsx(to,{...n});break;case"EntityPlaceholderNode":r=B.jsx(uo,{...n});break;case"ExternalNode":r=B.jsx(io,{...n});break;case"ActivityNode":r=B.jsx(Ji,{...n});break;case"ExpandNode":r=B.jsx(no,{...n});break;case"UndefinedNode":r=B.jsx(w_,{});break;default:r=B.jsxs("p",{children:["Unrecognized node type: ",t]});break}const i={label:r,props:n,type:t};return{id:Ye(e),position:{x:100,y:100},data:i,connectable:!1,draggable:!1,className:`${t}`}},Fl=(e,t)=>{const n=Ye(e),r=Ye(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:Ve.SimpleBezier,markerEnd:{type:on.ArrowClosed}}},Ye=e=>{const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${n.versionNumber??"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${n.targetVersionNumber??"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${n.entityHeader.versionNumber??"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${n.versionNumber??"latest"}`}},It=new zl.graphlib.Graph;It.setDefaultEdgeLabel(()=>({}));const fu=e=>e.data.type=="ExpandNode"?30:100,du=e=>e.data.type=="ExpandNode"?30:172,x_=(e,t,n)=>(It.setGraph({rankdir:n}),e.forEach(r=>{It.setNode(r.id,{width:du(r),height:fu(r)})}),t.forEach(r=>{It.setEdge(r.source,r.target)}),zl.layout(It),e.forEach(r=>{const i=It.node(r.id);return r.targetPosition=G.Top,r.sourcePosition=G.Bottom,r.position={x:i.x-du(r)/2,y:i.y-fu(r)/2},r}),{nodes:e,edges:t}),hu=(e,t)=>hd(e,t,pd).length==0;try{Fn.displayName="getProvenanceNode",Fn.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}try{Ye.displayName="getNodeId",Ye.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}}}catch{}const pu=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(i=>t.id==i.id&&t.versionNumber==i.versionNumber))!==void 0},Hl=(e,t)=>t.find(r=>r.id===Ye(e))===void 0,__=(e,t)=>{const n={type:le.ENTITY,data:e};return t.find(r=>r.id===Ye(n))},b_=(e,t,n)=>n.find(i=>i.source===Ye(e)&&i.target===Ye(t))===void 0,ln=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:i}=e;Hl(t,r)&&r.push(Fn(t)),b_(t,n,i)&&i.push(Fl(t,n))},E_=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:i}=e,s={type:le.ACTIVITY,data:t},o={type:le.ENTITY,data:n};ln({newNodeProps:s,existingNodeProps:o,nodesCopy:r,edgesCopy:i})},N_=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:i}=e,s={type:le.EXPAND,data:{itemCount:n,entityHeader:t}},o={type:le.ENTITY,data:t};ln({newNodeProps:s,existingNodeProps:o,nodesCopy:r,edgesCopy:i})},S_=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:i}=e,s={type:le.ENTITY_PLACEHOLDER,data:t},o={type:le.ACTIVITY,data:n};ln({newNodeProps:s,existingNodeProps:o,nodesCopy:r,edgesCopy:i})},k_=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,i={type:le.UNDEFINED,data:t},s={type:le.ENTITY,data:t};ln({newNodeProps:i,existingNodeProps:s,nodesCopy:n,edgesCopy:r})},I_=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:i}=e,s={type:le.ACTIVITY,data:n},o={type:le.EXTERNAL,data:t};ln({newNodeProps:o,existingNodeProps:s,nodesCopy:r,edgesCopy:i})},C_=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:i}=e,s={type:le.ENTITY,data:t};if(Hl(s,r)&&(r.push(Fn(s)),n)){const o={type:le.ACTIVITY,data:n};i.push(Fl(s,o))}},Pi=400,Li=.85,R_=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:i=[],onNodesChangedListener:s,onEdgesChangedListener:o}=e,{accessToken:a}=xf(),[c,l]=N.useState(r),[u,f]=N.useState(i),[d,h]=c0([]),[g,m]=l0([]),[v,y]=N.useState(),E=_f(),{data:k,isSuccess:_}=Ef(t,{throwOnError:!0});if(_&&k&&k.totalNumberOfResults==0){const S=t.map(p=>p.targetId).join(",");E(`Unable to load provenance for the given Synapse IDs: ${S}`)}const C=k==null?void 0:k.results,[L,q]=N.useState(!1),M=jn(),P=N.useCallback((S,p)=>{y(p)},[]),z=N.useCallback(async S=>{var A;const{entityHeader:p,nodesCopy:b,edgesCopy:w,usedInActivity:I}=S;C_({entityHeader:p,activity:I,nodesCopy:b,edgesCopy:w});try{const x=await er.getActivityForEntity(p.id,p.versionNumber,a);(!pu({entityHeader:p,rootEntityHeaders:C})||x.used&&x.used.length>=Pi)&&N_({entityHeader:p,itemCount:(A=x.used)==null?void 0:A.length,nodesCopy:b,edgesCopy:w})}catch(x){console.error(x),pu({entityHeader:p,rootEntityHeaders:C})&&k_({entityHeader:p,nodesCopy:b,edgesCopy:w})}},[a,C]);N.useEffect(()=>{!L&&d.length>0&&setTimeout(()=>{if(C){const S=__(C[0],d);if(S){const p=M.getZoom(),b=p>Li?Li:p;M==null||M.setCenter(S.position.x+150,S.position.y-30,{zoom:b,duration:0})}q(!0)}})},[L,d,M,C]);const D=N.useCallback(async S=>{const{entityHeader:p,nodesCopy:b,edgesCopy:w}=S;try{const I=await er.getActivityForEntity(p.id,p.versionNumber,a);if(E_({activity:I,entityHeader:p,nodesCopy:b,edgesCopy:w}),I.used&&I.used.length<Pi){const A=[];I.used.forEach(H=>{H.concreteType==gd?A.push(H.reference):I_({usedURL:H,activity:I,nodesCopy:b,edgesCopy:w})});const x=await er.getEntityHeaders(A,a),{results:$}=x;A.filter(H=>$.find(O=>O.id==H.targetId)==null).forEach(H=>{S_({ref:H,activity:I,nodesCopy:b,edgesCopy:w})});const V=[];$.forEach(H=>{V.push(z({entityHeader:H,nodesCopy:b,edgesCopy:w,usedInActivity:I}))}),await Promise.allSettled(V)}}catch(I){console.error(I)}},[a,z]);N.useEffect(()=>{if(C&&c.length==0){const S=[...c],p=[...u],b=[];C.forEach(w=>{const I=z({entityHeader:w,nodesCopy:S,edgesCopy:p});b.push(I);const A=D({entityHeader:w,nodesCopy:S,edgesCopy:p});b.push(A)}),Promise.allSettled(b).finally(()=>{l(S),f(p)})}},[z,E,D,C,t,u,c]),N.useEffect(()=>{const S=v==null?void 0:v.data;if(v&&(S==null?void 0:S.type)==le.EXPAND){const p=S.props;if(p.itemCount>Pi){Nf("Web visualization does not support expanding this many items at this time.","danger");return}else{S.label=B.jsx(md,{size:30});const b=c.filter(A=>A.id!=v.id),w=To([v],u)[0],I=u.filter(A=>A!=w);D({entityHeader:p.entityHeader,nodesCopy:b,edgesCopy:I}).finally(()=>{l(b),f(I)})}y(void 0)}},[v,c,u,D]),N.useEffect(()=>{const{nodes:S,edges:p}=x_(c,u,"TB");hu(S,d)||(h(S),s&&s(S)),hu(p,g)||(m(p),o&&o(p))},[c,u,d,g,h,m,L,M,t,s,o]);const F=N.useCallback(S=>{S&&typeof S.deltaX<"u"&&typeof S.deltaY<"u"&&window.scrollTo(window.scrollX+S.deltaX,window.scrollY+S.deltaY)},[]);return B.jsx("div",{className:"ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:B.jsx(Qc,{defaultViewport:{x:0,y:0,zoom:Li},nodes:d,edges:g,onNodeClick:P,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:F,children:B.jsx(y0,{})})})},co=e=>B.jsx(wf,{children:B.jsx(Po,{children:B.jsx(R_,{...e})})}),eb=co;try{co.displayName="ProvenanceGraph",co.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge[]) => void)"}}}}}catch{}export{eb as P};
