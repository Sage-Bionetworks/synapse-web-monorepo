import{g as j,j as m,B as f}from"./useFiles-DKRZIanE.js";import{h as u,H as n}from"./index-CL-LOsqj.js";import{B as J}from"./BasicMockedCrudService-uyvfddu0.js";const d=new J({idField:"id",autoGenerateId:!0});function h(p,y,g,a=j(f.REPO_ENDPOINT),i=201){return[u.post(`${a}${p}`,async({request:t})=>{const s={token:d.create({request:await t.json(),response:g}).id};return n.json(s,{status:201})}),u.get(`${a}${m(":id")}`,({params:t})=>{const e=t.id,s=d.getOneById(e);if(!e||!s)return n.json({message:"The mocked asynchronous job was not found"},{status:404});const{request:r,response:o}=s,c=typeof o=="function"?o(r):o,b=i<400?"COMPLETE":"FAILED";return n.json({jobState:b,jobCanceling:!1,requestBody:r,etag:"00000000-0000-0000-0000-000000000000",jobId:e,responseBody:c,startedByUserId:0,startedOn:"",changedOn:"",progressMessage:"",progressCurrent:100,progressTotal:100,exception:"",errorMessage:"",errorDetails:"",runtimeMS:100},{status:200})}),u.get(`${a}${y(":asyncJobToken")}`,({params:t})=>{const e=t.asyncJobToken,s=d.getOneById(e);if(!e||!s)return n.json({message:"The mocked asynchronous job was not found"},{status:404});const{request:r,response:o}=s,c=typeof o=="function"?o(r):o;return n.json(c,{status:i})})]}export{h as g};
