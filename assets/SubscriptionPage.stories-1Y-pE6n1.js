import{g as E}from"./handlers-qrSQyWyS.js";import{g as j,B as I,M as N}from"./useFiles-DHhpU89b.js";import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{a as h,b as R}from"./useSubscription-Drojb2RH.js";import{p as s,m as D}from"./VerificationSubmission-OWkqLMYZ.js";import{r as b}from"./index-1NdgpKeG.js";import{D as F}from"./DropdownSelect--vgDuEi8.js";import"./StringUtils-C5rFena9.js";import"./OrientationBanner-hTrQankP.js";import{u as v}from"./useEntity-Bc1Uq1Tb.js";import{c as M}from"./useForum-D1nTWiOw.js";import{T as P}from"./Topic-BUIQi1UM.js";import{c as C}from"./useThread-DeQBNJuG.js";import{B as k}from"./Box-fCUvLKal.js";import{T as A,a as T}from"./Tabs-CPeOvVen.js";import{S as B}from"./Stack-xSrw6zja.js";import{B as $}from"./Button-DBL5mfsL.js";import"./mockSchema-Cb4laXw7.js";import"./mockFileEntity-CM4rXD4h.js";import"./mock_file_handle-CidTpPtG.js";import"./mock_user_profile-CCzWeUML.js";import"./mockProject-DzpEZSz1.js";import"./mockTeam-V_ufsryL.js";import"./SynapseConstants-CB8Sz7dU.js";import"./uniqueId-DT2fq4XV.js";import"./toString-CaVOP7uL.js";import"./isArray-l4NiJBp5.js";import"./iframe-BVCs4XIv.js";import"./isSymbol-Cyd9Ke1A.js";import"./times-qLg_WE6p.js";import"./_Uint8Array-BWdg-OfF.js";import"./identity-DKeuBCMA.js";import"./toInteger-DzBN_K6s.js";import"./asyncJobHandlers-Ojue8Xr6.js";import"./index-CzkIbNfy.js";import"./BasicMockedCrudService-CVqitSBx.js";import"./cloneDeep-CCE_bhld.js";import"./_initCloneObject-D4cgbryH.js";import"./_getTag-CR8oz2FK.js";import"./isEqual-C5c0kD5A.js";import"./mockAnnotationColumns-B82nWIBE.js";import"./tableQueryHandlers-xDaAj3SL.js";import"./omit-6XmJVEQL.js";import"./_baseGet-Dzxx3DGf.js";import"./_baseUniq-_pOsj4Ic.js";import"./useQuery-C5B8DZnM.js";import"./QueryClientProvider-BAH_7CkU.js";import"./_baseSlice-F8doVSIJ.js";import"./merge-CNgcJE1c.js";import"./pick-C7SZkKHt.js";import"./_baseSet-BjCrbRIz.js";import"./hasIn-CE5Gdy6h.js";import"./accessRequirementAclHandlers-BdXNI5BO.js";import"./mockAccessRequirementAcls-yKUZag-i.js";import"./mockAccessRequirements-BBPIutQ_.js";import"./ACTAccessRequirement-WDpE4gfi.js";import"./LockAccessRequirement-B_A_PCc_.js";import"./SelfSignAccessRequirement-C_01XAIc.js";import"./mockWiki-DvmfJBaP.js";import"./accessRequirementHandlers-CjlZdKsh.js";import"./wikiHandlers-DJ3ovMtv.js";import"./mockWikiPageKey-CSipw8jH.js";import"./teamHandlers-DtxaF4O4.js";import"./dataAccessRequestHandlers-CoHcX6fa.js";import"./MockResearchProject-B4esWL9C.js";import"./mock_discussion-CFSmol5h.js";import"./fakerUtils-BqbJFGLm.js";import"./index-Ckybc6Cy.js";import"./mockTableEntity-CwuYb7OR.js";import"./mockFileEntityACLVariants-D7bHBt3b.js";import"./entityHandlers-D8PTcgLm.js";import"./mockEntity-BtlPpjbz.js";import"./mockEvaluationQueue-BMSrCpk8.js";import"./featureFlagHandlers-EwwSmPv0.js";import"./fileHandlers-ZzNbT_cm.js";import"./personalAccessTokenHandlers-BH2hsIOT.js";import"./researchProjectHandlers-7o2NUxBU.js";import"./resetTwoFactorAuthHandlers-DkqQxOu8.js";import"./userProfileHandlers-CEvbX1iz.js";import"./fetchWithExponentialTimeout-CXmnpl-T.js";import"./useTimeout--1Vup-x4.js";import"./FullWidthAlert-9D0dStMg.js";import"./spreadSx-CwcO6WA9.js";import"./Alert-DsiUbUNV.js";import"./createTheme-xVdgCG2Z.js";import"./DefaultPropsProvider-DtDVHnHW.js";import"./useSlot-19A78PIb.js";import"./useForkRef-CwsXTZjB.js";import"./createSimplePaletteValueFilter-B-K6kzC2.js";import"./createSvgIcon-CoM42d11.js";import"./Close-ra3sU-bD.js";import"./IconButton-Jqcl1FCR.js";import"./ButtonBase-CvfaG9fg.js";import"./isFocusVisible-B8k4qzLc.js";import"./CircularProgress-dOwNu9AC.js";import"./Paper-D7ecR47B.js";import"./useTheme-Cqv6EVU7.js";import"./useTheme-xJG0eZgW.js";import"./AlertTitle-BjKOMb4O.js";import"./Typography-Bfwzdonu.js";import"./index-Cw5x1M4E.js";import"./extendSxProp-IK5aZbjn.js";import"./ClickAwayListener-DKhLIoVT.js";import"./getReactElementRef-IrCKeVVF.js";import"./index-Cv_k6Nmf.js";import"./index-D9_WP2Ac.js";import"./ownerDocument-DW-IO8s5.js";import"./Grow-B-J8hTfc.js";import"./Tooltip-Baq19PiH.js";import"./index-f4EwjVcV.js";import"./useControlled-B_AhfMUd.js";import"./Popper-Bly56UTy.js";import"./Link-BkHcEeBu.js";import"./Collapse-DTAoykKm.js";import"./tinycolor-Begke6kS.js";import"./Fade-BmnT4nNM.js";import"./inputBaseClasses-C7EIIvr1.js";import"./calculateFriendlyFileSize-D8GRXzjx.js";import"./CheckCircleTwoTone-RZp-vcbP.js";import"./InfoTwoTone-DSSjfjZh.js";import"./useMutation-D0aueLVp.js";import"./dayjs.min-D5j6ikUT.js";import"./chunk-AYJ5UCUI-CRjBeq-S.js";import"./Skeleton-Cy5on4Og.js";import"./useInfiniteQuery-CSL57mfU.js";import"./IconSvg-zDef4RQA.js";import"./LayersTwoTone-DQI26pDL.js";import"./ContentCopyTwoTone-l244Qq_y.js";import"./HelpOutlineTwoTone-BF7AT2U-.js";import"./ErrorOutlined-CAbBIIda.js";import"./GetAppTwoTone-B6xmMiee.js";import"./InfoOutlined-ClWMC_PA.js";import"./PhoneTwoTone-nbcUAbGt.js";import"./DeleteTwoTone-DbCyYUAo.js";import"./getValidReactChildren-DLd5H2uY.js";import"./MenuList-DoVQ1x_M.js";import"./getScrollbarSize-CaCM53D3.js";import"./ownerWindow-HkKU3E4x.js";import"./List-Bp8xx8ZP.js";import"./MenuItem-BTvaZUMF.js";import"./dividerClasses-BfaplMem.js";import"./index-D0vu6z4F.js";import"./react-Bh3dHSQv.js";import"./pickBy-CTGhPPO6.js";import"./isString-BW8wSE2w.js";import"./_baseIteratee-2dtC6M63.js";import"./useQueries-r9fsHKIo.js";import"./InfiniteQueryUtils-CKlRW-xB.js";import"./useEntityBundle-3-s-iK0T.js";import"./ConditionalWrapper-CpBCX7_r.js";import"./debounce-Be36O1Ab.js";import"./KeyboardArrowRight-BzdGqNU1.js";import"./getThemeProps-BxhnPNvq.js";function g(i){const{subscription:e}=i,{data:o}=M(e.objectId),{data:m}=v(o==null?void 0:o.projectId,void 0,{enabled:!!o}),{isSubscribed:a,isLoading:n,toggleSubscribed:p}=h(e.objectId,s.FORUM);let c;return o&&(c=`${j(I.PORTAL_ENDPOINT)}Synapse:${o.projectId}/discussion`),t.jsx(P,{isLoading:n,isSubscribed:a,icon:"dashboard",name:m==null?void 0:m.name,nameHref:c,onToggleSubscribe:p})}try{g.displayName="ForumTopic",g.__docgenInfo={description:"",displayName:"ForumTopic",props:{subscription:{defaultValue:null,description:"",name:"subscription",required:!0,type:{name:"Subscription"}}}}}catch{}function H(i){const{subscription:e}=i,{threadData:o}=C(e.objectId),{isSubscribed:m,isLoading:a,toggleSubscribed:n}=h(e.objectId,s.THREAD);let p;return o&&(p=`${j(I.PORTAL_ENDPOINT)}Synapse:${o.projectId}/discussion/threadId=${e.objectId}`),t.jsx(P,{isLoading:a,isSubscribed:m,icon:"discussion",name:o==null?void 0:o.title,nameHref:p,onToggleSubscribe:n})}try{ThreadTopic.displayName="ThreadTopic",ThreadTopic.__docgenInfo={description:"",displayName:"ThreadTopic",props:{subscription:{defaultValue:null,description:"",name:"subscription",required:!0,type:{name:"Subscription"}}}}}catch{}function S(i){const{subscription:e}=i;switch(e.objectType){case s.FORUM:return t.jsx(g,{subscription:e});case s.THREAD:return t.jsx(H,{subscription:e});default:return console.warn(`Subscription type ${i.subscription.objectType} not supported in UI`),t.jsx(t.Fragment,{})}}try{S.displayName="SubscriptionItem",S.__docgenInfo={description:`Simple discriminator component that maps a {@link Subscription} rendered on the {@link SubscriptionPage } to
a {@link Topic } component`,displayName:"SubscriptionItem",props:{subscription:{defaultValue:null,description:"",name:"subscription",required:!0,type:{name:"Subscription"}}}}}catch{}const d=[{value:"ASC",label:"Date Posted"},{value:"DESC",label:"Most Recent"}];function w(){const[i,e]=b.useState(s.FORUM),[o,m]=b.useState(d[0]),a=b.useId(),n={objectType:i,sortBy:D.CREATED_ON,sortDirection:o.value},{data:p,hasNextPage:c,isFetchingNextPage:f,fetchNextPage:O}=R(n,{staleTime:1/0,select:r=>({pages:r.pages.flatMap(l=>l.results),pageParams:r.pageParams})},[`subscriptionPageFetch_${a}`,n]);return t.jsxs(t.Fragment,{children:[t.jsx(k,{sx:{float:"right"},children:t.jsx(F,{variant:"outlined",options:d.map(r=>r.label),selectedIndex:d.findIndex(r=>r.value===o.value),setSelectedIndex:r=>m(d[r])})}),t.jsxs(A,{sx:{mb:3},value:i,onChange:(r,l)=>{r.stopPropagation(),e(l)},textColor:"secondary",indicatorColor:"secondary",children:[t.jsx(T,{value:s.FORUM,label:"Project Forums"}),t.jsx(T,{value:s.THREAD,label:"Threads"})]}),t.jsx(B,{sx:{gap:.5},children:p==null?void 0:p.pages.map(r=>t.jsx(S,{subscription:r},r.subscriptionId))}),c&&t.jsx($,{variant:"contained",onClick:()=>{O()},disabled:f,sx:{mt:6},children:f?"Loading...":"Load More"})]})}const Mr={title:"Synapse/Following/SubscriptionPage",component:w,parameters:{stack:"mock"}},u={name:"SubscriptionPage",args:{},parameters:{msw:{handlers:{...E(N)}}}};var _,y,x;u.parameters={...u.parameters,docs:{...(_=u.parameters)==null?void 0:_.docs,source:{originalSource:`{
  name: 'SubscriptionPage',
  args: {},
  parameters: {
    msw: {
      handlers: {
        ...getHandlers(MOCK_REPO_ORIGIN)
      }
    }
  }
}`,...(x=(y=u.parameters)==null?void 0:y.docs)==null?void 0:x.source}}};const Cr=["Demo"];export{u as Demo,Cr as __namedExportsOrder,Mr as default};
