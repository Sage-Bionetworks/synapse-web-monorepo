import{l as s}from"./useFiles-lb8uXJha.js";import"./OrientationBanner-C_cI8Wdu.js";import"./index-CJTqbwg9.js";import{U as f}from"./VerificationSubmission-BDh1zA9f.js";import{E as g,G as i,w as c,x as E,P as l,y as a}from"./StringUtils-NPb0VexC.js";import{u}from"./useQuery-DccECcxJ.js";import"./jsx-runtime-D_zvdyIk.js";function C(e,t){const{keyFactory:r,synapseClient:o}=s();return u({...t,queryKey:r.getDefaultUploadDestinationQueryKey(e),queryFn:()=>o.fileServicesClient.getFileV1EntityIdUploadDestination({id:e})})}function k(e,t,r){const{synapseClient:o,keyFactory:y}=s();return u({...r,queryKey:y.getUploadDestinationForStorageLocationQueryKey(e,t),queryFn:()=>o.fileServicesClient.getFileV1EntityIdUploadDestinationStorageLocationId({id:e,storageLocationId:t})})}const p="Synapse Storage";function F(e,t){switch(e.concreteType){case a:return{endpoint:e.endpointUrl,bucket:e.bucket,fileKey:e.fileKey};case l:case E:return{url:n(e,t)};case c:case i:return{location:n(e,t)};default:throw new Error(`Couldn't determine location name for file handle: ${JSON.stringify(e)}`)}}function n(e,t){switch(e.concreteType){case l:return e.filePath;case a:case c:case i:return t?_(t):e.concreteType===a?e.bucket:e.bucketName;case E:return e.externalURL;default:throw new Error(`Couldn't determine location name for file handle: ${JSON.stringify(e)}`)}}function N(e){let t;return e.entityType===g.file&&(t=e.fileHandles.filter(r=>r.id===e.entity.dataFileHandleId)[0]),t}function _(e){let t="";if(e)switch(e.concreteType){case"org.sagebionetworks.repo.model.file.S3UploadDestination":t=p;break;case"org.sagebionetworks.repo.model.file.ExternalUploadDestination":if(t=e.url,e.uploadType===f.SFTP){const r=t.lastIndexOf("/");r&&(t=t.substring(0,r))}break;case"org.sagebionetworks.repo.model.file.ExternalS3UploadDestination":t="s3://"+e.bucket+"/",e.baseKey!=null&&(t+=e.baseKey);break;case"org.sagebionetworks.repo.model.file.ExternalGoogleCloudUploadDestination":t="gs://"+e.bucket+"/",e.baseKey!=null&&(t+=e.baseKey);break;case"org.sagebionetworks.repo.model.file.ExternalObjectStoreUploadDestination":t=e.endpointUrl+"/"+e.bucket;break}return t}export{C as a,_ as b,F as c,n as d,N as g,k as u};
