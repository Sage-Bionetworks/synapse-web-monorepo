import{ao as k,aa as j,hk as _,r as f,j as e,cu as N,cz as b,X as U,bX as R,am as F,bP as v}from"./iframe-CGmVaDjG.js";import{u as C}from"./useInfiniteQuery-BOwZO-RU.js";import{u as T}from"./index-BCwB7rkk.js";import{S as E}from"./SkeletonTable-DNeEDdIn.js";import{a as L}from"./useGetUserTeams-DL27gVdG.js";import{B as I}from"./Box-qShKgJii.js";function O(n,l){const{accessToken:u,keyFactory:a}=k();return C({...l,initialPageParam:void 0,queryKey:a.getUserChallengesQueryKey(n),queryFn:async o=>{const r=await j.getUserChallenges(u,n,o.pageParam,10);if(r.results.length>0){const s=Array.from(r.results,i=>i.projectId),c=await j.getEntityHeadersByIds(s);return{results:Array.from(r.results,(i,d)=>({challenge:i,projectHeader:c.results[d]})),totalNumberOfResults:r.totalNumberOfResults}}return{results:[],totalNumberOfResults:r.totalNumberOfResults}},getNextPageParam:(o,r)=>{if(o.results.length>0)return r.length*10}})}function S(n,l,u){const{accessToken:a,keyFactory:o}=k();return C({...u,queryKey:o.getUserProjectsQueryKey(n,l),queryFn:async r=>j.getUserProjects(n,{...l,nextPageToken:r.pageParam},a),initialPageParam:void 0,getNextPageParam:r=>r.nextPageToken})}function x({userId:n}){const l=_(),{ref:u,inView:a}=T(),{data:o,status:r,isFetching:s,isLoading:c,hasNextPage:g,fetchNextPage:i,isError:d,error:p}=O(n);f.useEffect(()=>{d&&p&&l(p)},[d,p,l]),f.useEffect(()=>{r==="success"&&!s&&g&&i&&a&&i()},[r,s,g,i,a]);const m=(o==null?void 0:o.pages.flatMap(t=>t.results))??[];return e.jsxs(e.Fragment,{children:[m.length>0&&e.jsxs(e.Fragment,{children:[m.map(t=>t&&t.challenge&&t.projectHeader?e.jsx("p",{children:e.jsx("a",{target:"_self",rel:"noopener noreferrer",href:`${N.PORTAL}Synapse:${t.challenge.projectId}/challenge`,children:t.projectHeader.name})},`user-challenge-list-item-${t.challenge.projectId}`):!1),e.jsx("div",{ref:u})]}),!s&&m.length==0&&e.jsx("div",{children:"Empty"}),c&&e.jsx(E,{numRows:5,numCols:1})]})}try{x.displayName="UserChallenges",x.__docgenInfo={description:"",displayName:"UserChallenges",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function y({userId:n}){const l=_(),{ref:u,inView:a}=T(),o={},{data:r,status:s,isFetching:c,isLoading:g,hasNextPage:i,fetchNextPage:d,isError:p,error:m}=S(n,o);f.useEffect(()=>{p&&m&&l(m)},[p,m,l]),f.useEffect(()=>{s==="success"&&!c&&i&&d&&a&&d()},[s,c,i,d,a]);const t=(r==null?void 0:r.pages.flatMap(h=>h.results))??[];return e.jsxs(e.Fragment,{children:[t.length>0&&e.jsxs(e.Fragment,{children:[t.map(h=>h?e.jsx("p",{children:e.jsx("a",{target:"_self",rel:"noopener noreferrer",href:`${N.PORTAL}Synapse:${h.id}`,children:h.name})},`user-project-list-item-${h.id}`):!1),e.jsx("div",{ref:u})]}),!c&&t.length==0&&e.jsx("div",{children:"Empty"}),g&&e.jsx(E,{numRows:5,numCols:1})]})}try{y.displayName="UserProjects",y.__docgenInfo={description:"",displayName:"UserProjects",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function P({userId:n}){const l=_(),{ref:u,inView:a}=T(),{data:o,status:r,isFetching:s,isLoading:c,hasNextPage:g,fetchNextPage:i,isError:d,error:p}=L(n);f.useEffect(()=>{d&&p&&l(p)},[d,p,l]),f.useEffect(()=>{r==="success"&&!s&&g&&i&&a&&i()},[r,s,g,i,a]);const m=(o==null?void 0:o.pages.flatMap(t=>t.results))??[];return e.jsxs(e.Fragment,{children:[m.length>0&&e.jsxs(e.Fragment,{children:[m.map(t=>t?e.jsx("p",{children:e.jsx("a",{target:"_self",rel:"noopener noreferrer",href:`${N.PORTAL}Team:${t.id}`,children:t.name})},`user-team-list-item-${t.id}`):!1),e.jsx("div",{ref:u})]}),!s&&m.length==0&&e.jsx("div",{children:"Empty"}),c&&e.jsx(E,{numRows:5,numCols:1})]})}try{P.displayName="UserTeams",P.__docgenInfo={description:"",displayName:"UserTeams",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function w({userId:n}){var r;const[l,u]=f.useState("Projects"),{data:a}=b(n),o=f.useMemo(()=>[{name:"Projects",iconName:"dashboard",render:e.jsx(y,{userId:n})},{name:"Teams",iconName:"peopleTwoTone",render:e.jsx(P,{userId:n})},{name:"Challenges",iconName:"challengesTwoTone",render:e.jsx(x,{userId:n})}],[n]);return e.jsxs("div",{className:"UserProfileLinks",children:[e.jsxs(U,{variant:"headline2",className:"title",children:[a&&e.jsxs(e.Fragment,{children:[a==null?void 0:a.userName,"'s Items"]}),!a&&e.jsx(R,{width:"75%"})]}),e.jsx(I,{className:"Tabs",sx:s=>({[s.breakpoints.down("sm")]:{flexDirection:"column",gap:"8px"}}),children:o.map(s=>e.jsx(I,{className:"Tab",role:"tab",sx:c=>({[c.breakpoints.down("sm")]:{minHeight:"45px"}}),onClick:c=>{c.stopPropagation(),u(s.name)},"aria-selected":l===s.name,children:e.jsxs(U,{variant:"buttonLink",children:[e.jsx(F,{icon:s.iconName})," ",s.name]})},s.name))}),e.jsx("div",{className:"TabContent",children:e.jsx(v,{children:(r=o.find(s=>l===s.name))==null?void 0:r.render})})]})}try{w.displayName="UserProfileLinks",w.__docgenInfo={description:"",displayName:"UserProfileLinks",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}export{w as U};
