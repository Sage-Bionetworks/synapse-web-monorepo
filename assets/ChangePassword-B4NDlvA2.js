import{j as e}from"./jsx-runtime-Du8NFWEI.js";import{r as t}from"./index-Dl6G-zuu.js";import{L as T}from"./react-router-dom-C7Y6Ey_O.js";import{k as N,I as E,M as L}from"./SynapseClient-Clzt7wA_.js";import"./OrientationBanner-Dih8CVog.js";import"./getEndpoint-CjoHA800.js";import{d as f}from"./ToastMessage-CsPwcNWl.js";import{u as q}from"./useChangePasswordFormState-C-UEMNOt.js";import{M as g}from"./Alert-HJYNNEvY.js";import{M as n}from"./TextField-BYBL0P0S.js";import{B as M}from"./Button-mb55Lwfk.js";import{L as W}from"./Link-EkQ0dGSu.js";const h="Your password was successfully changed.";function w(u){const{redirectToRoute:l,hideReset2FA:x=!1}=u,[i,P]=t.useState(""),[o,C]=t.useState(""),[d,y]=t.useState(""),[a,m]=t.useState(""),{accessToken:j}=N(),c=!!j,{data:r,isLoading:S}=E({enabled:c});t.useEffect(()=>{r&&a==""&&m(r.userName)},[a,r,r==null?void 0:r.userName]);const{promptForTwoFactorAuth:v,TwoFactorAuthPrompt:_,successfullyChangedPassword:b,isPending:A,handleChangePasswordWithCurrentPassword:F,error:p}=q({hideReset2FA:x}),R=s=>{s.preventDefault(),o!==d?f("Passwords do not match.","danger"):F(a,i,o)};return b?l?(f(h,"success"),e.jsx(L,{to:l})):e.jsx(g,{severity:"success",children:h}):e.jsxs("div",{children:[v?e.jsx(_,{}):e.jsxs("form",{onSubmit:s=>{R(s)},children:[!c&&e.jsx(n,{required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"username",label:"Username or Email Address",id:"username",type:"text",value:a,onChange:s=>m(s.target.value)}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"currentPassword",label:"Current password",onChange:s=>P(s.target.value),value:i}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"newPassword",label:"New password",onChange:s=>C(s.target.value),value:o}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"confirmPassword",label:"Confirm password",onChange:s=>y(s.target.value),value:d}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx(M,{sx:{marginRight:"26px"},disabled:!i||!o||!d||!a||S||A,variant:"contained",type:"submit",children:"Change Password"}),e.jsx(W,{component:T,to:"/resetPassword",sx:{display:"block",marginTop:"1em",marginLeft:"5px"},children:"Forgot password?"})]})]}),p&&e.jsx(g,{severity:"error",sx:{my:2},children:p.reason})]})}try{w.displayName="ChangePassword",w.__docgenInfo={description:"",displayName:"ChangePassword",props:{redirectToRoute:{defaultValue:null,description:"",name:"redirectToRoute",required:!1,type:{name:"string"}},hideReset2FA:{defaultValue:null,description:"",name:"hideReset2FA",required:!1,type:{name:"boolean"}}}}}catch{}export{w as C};
