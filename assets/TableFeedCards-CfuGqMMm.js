import{ao as N,r as c,dY as F,j as e,dI as v,ab as R,a2 as T}from"./iframe-QjK0KVVQ.js";import{L as _}from"./LargeButton-Br5e9DkT.js";import{M}from"./MarkdownSynapse-CdDnnKnp.js";function p({tableEntityId:r}){const{accessToken:l}=N(),[n,x]=c.useState(),[d,y]=c.useState(3);let m=!0;if(c.useEffect(()=>((()=>{if(m){if(n)return;const a={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT "categories", "date", "title", "mdDescription" FROM ${r} ORDER BY "date" desc`},entityId:r,partMask:T};R.getQueryTableResults(a,l).then(s=>{x(s.queryResult?.queryResults)})}})(),()=>{m=!1}),[r,l]),!n)return F;const o=n.headers,I=o.findIndex(t=>t.name==="categories"),h=o.findIndex(t=>t.name==="date"),f=o.findIndex(t=>t.name==="title"),g=o.findIndex(t=>t.name==="mdDescription");return e.jsxs("div",{className:"Feed",children:[e.jsx("div",{className:"FeedItems",children:n.rows.map((t,a)=>{if(a>d-1)return;const s=t.values;s.some(i=>i===null)&&console.warn("Row has null value(s) when no nulls expected");const u=JSON.parse(s[I]),w=s[h],C=s[f],S=s[g];return e.jsx("div",{className:"FeedItem",children:e.jsxs("div",{children:[u&&e.jsx("div",{className:"FeedItemCategories",children:u.map((i,j)=>e.jsx("div",{className:"FeedItemCategory",children:i},`row-${a},categoryIndex-${j}`))}),e.jsx("p",{className:"FeedItemDate",children:v(new Date(parseInt(w))).format("MMMM YYYY")}),e.jsx("p",{className:"FeedItemTitle",children:C}),e.jsx("div",{className:"FeedItemDescription",children:e.jsx(M,{markdown:S})})]})},`row-${a}`)})}),n.rows.length>d&&e.jsx("div",{className:"FeedViewAllNewsButtonContainer",children:e.jsx(_,{color:"primary",variant:"contained",onClick:()=>y(d+3),children:"View More News"})})]})}try{p.displayName="TableFeedCards",p.__docgenInfo={description:"",displayName:"TableFeedCards",props:{tableEntityId:{defaultValue:null,description:"",name:"tableEntityId",required:!0,type:{name:"string"}}}}}catch{}export{p as T};
