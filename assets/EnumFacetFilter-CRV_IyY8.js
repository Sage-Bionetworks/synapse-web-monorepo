import{eE as R,e$ as x,ch as q,f1 as P,j as p,r as y,eZ as g,fz as G,eQ as r,de as V}from"./iframe-Bv3225dD.js";import{u as I}from"./UserSearchBoxV2-dsjChIfY.js";import{u as Y}from"./QueryContext-0o5Rw1Qj.js";import{b as B,a as H}from"./QueryWrapper-DwFHDQw0.js";import{E as $}from"./EnumFacetFilterSkeleton-BPo4qG2-.js";import{E as z}from"./EnumFacetFilterUI-CWp11nhN.js";import{c as Z}from"./_createAggregator-p4_cw1yh.js";import{s as _}from"./useAccessRequirements-DzaPaYvw.js";var J=Z(function(s,e,n){s[n?0:1].push(e)},function(){return[[],[]]});function K(s,e=[],n=[],F=[]){const{value:o}=s;let c=o;if(o===q)return P;const i=e.find(u=>u.ownerId===o);e.length&&(c=i?i.userName:`unknown (${o})`);const f=n.find(u=>u.id===o);n.length&&(c=f?f.name:`unknown (${o})`);const d=F.find(u=>u.id===o);return d!=null&&d.name&&(c=d.name),c}function W(s,e){const n=R(e,s.query.selectedFacets);return n?x(n)?n.facetValues.length===0:(console.error("getAllIsSelected: matchingSelectedFacet is not a FacetColumnValuesRequest",n),!0):!0}function X(s){const{facet:e,containerAs:n="Collapsible",dropdownType:F="Icon",hideCollapsible:o=!1,defaultShowAllValues:c=!1}=s,{nextQueryRequest:i,addValueToSelectedFacet:f,removeSelectedFacet:d,removeValueFromSelectedFacet:u,resetDebounceTimer:w}=Y(),{data:S}=B(),{getColumnDisplayName:D}=H(),m=y.useMemo(()=>{const a=R(e,g(i.query.selectedFacets));if(a&&!x(a)){console.error("The facet rendered in EnumFacetFilter is not a FacetColumnValuesRequest",e);return}return a},[e,i.query.selectedFacets]),j=W(g(i),e),t=S.columnModels?G(e,S.columnModels):void 0,v=y.useMemo(()=>{switch(t==null?void 0:t.columnType){case r.DOUBLE:case r.DATE:case r.INTEGER:return!0;default:return!1}},[t]),L=(t==null?void 0:t.columnType)===r.USERID||(t==null?void 0:t.columnType)===r.USERID_LIST?e.facetValues.map(a=>a.value):[],A=I({ids:L,type:"USER_PROFILE"}),U=(t==null?void 0:t.columnType)===r.ENTITYID||(t==null?void 0:t.columnType)===r.ENTITYID_LIST?e.facetValues.map(a=>a.value):[],C=I({ids:U,type:"ENTITY_HEADER"}),O=(t==null?void 0:t.columnType)===r.EVALUATIONID?e.facetValues.map(a=>a.value):[],h=I({ids:O,type:"EVALUATION_QUEUE"}),Q=y.useMemo(()=>{const a=e.facetValues.map(l=>({...l,isSelected:(m==null?void 0:m.facetValues.includes(l.value))??!1,displayText:K(l,A,C,h)})),N=J(a,l=>l.value===q),k=N[0],E=N[1];let T=E;return(t==null||t.facetSortConfig==null)&&(v?T=_(E,l=>Number(l.value)):T=_(E,l=>l.displayText.toLowerCase())),[...T,...k]},[e.facetValues,t,m==null?void 0:m.facetValues,A,C,h,v]);return t?p.jsx(z,{facetTitle:D(e.columnName,e.jsonPath),filterIsActive:!j,facetValues:Q,containerAs:n,dropdownType:F,hideCollapsible:o,defaultShowAllValues:c,onHoverOverValue:()=>{w()},onAddValueToSelection:a=>{f(V(e,["columnName","jsonPath"]),a,{debounce:!0})},onRemoveValueFromSelection:a=>{u(V(e,["columnName","jsonPath"]),a,{debounce:!0})},onRemoveAllFacetSelections:()=>d(V(e,["columnName","jsonPath"])),canMultiSelect:!0}):p.jsx(p.Fragment,{})}function b(s){const{containerAs:e="Collapsible",dropdownType:n="Icon"}=s;return p.jsx(y.Suspense,{fallback:p.jsx($,{containerAs:e,dropdownType:n}),children:p.jsx(X,{...s})})}try{b.displayName="EnumFacetFilter",b.__docgenInfo={description:"",displayName:"EnumFacetFilter",props:{facet:{defaultValue:null,description:"",name:"facet",required:!0,type:{name:"FacetColumnResultValues"}},containerAs:{defaultValue:null,description:"",name:"containerAs",required:!1,type:{name:"enum",value:[{value:'"Collapsible"'},{value:'"Dropdown"'}]}},dropdownType:{defaultValue:null,description:"",name:"dropdownType",required:!1,type:{name:"enum",value:[{value:'"Icon"'},{value:'"SelectBox"'}]}},hideCollapsible:{defaultValue:null,description:"",name:"hideCollapsible",required:!1,type:{name:"boolean"}},defaultShowAllValues:{defaultValue:null,description:"",name:"defaultShowAllValues",required:!1,type:{name:"boolean"}}}}}catch{}export{b as E};
