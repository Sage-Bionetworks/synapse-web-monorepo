import{j as e}from"./jsx-runtime-DoxjgJx5.js";import{r as n}from"./index-Cu9bd8lq.js";import{L as Ie,c as Ae,R as Ce,N as Te}from"./index-DQUvFaS1.js";import{l as ve,S as ye,P as ne,s as le,v as je}from"./useFiles-DbwotS2P.js";import{S as Ne,b as ge,I as be}from"./IconSvg-y3SXZv3H.js";import{S as U}from"./LoadingScreen-Be03UZKS.js";import{O as De}from"./OrientationBanner-6TFYkqd5.js";import{u as ce,U as O}from"./UserSearchBoxV2-dn71VFqq.js";import{y,D as I,x as P,T as me,E as Pe,S as J}from"./VerificationSubmission-DL9jxYsQ.js";import{d as b}from"./dayjs.min-D1RcYm3-.js";import{u as qe}from"./useInfiniteQuery-BApf7BaC.js";import{T as pe,y as Oe,S as Me}from"./RegularExpressions-SKYrON-T.js";import{S as k}from"./Sort-BQO3gu_9.js";import{f as D}from"./DateFormatter-DfacTlal.js";import{U as de}from"./UserBadge-D3GrT4ct.js";import{T as ue}from"./Table-t2nUFP4U.js";import{a as he}from"./ThemesPlot-CxGsKMiQ.js";import{T as _}from"./Typography-D6GCV-CB.js";import{B as M}from"./Button-j3jTttn9.js";import{ad as we,a0 as Fe}from"./ConfirmationDialog-JG55-b-7.js";import{A as W}from"./SynapseConstants-binLeAzi.js";import{U as g}from"./UserOrTeamBadge-BHs7jJDh.js";import{S as Ue}from"./Stack-BbdlCzXz.js";import{A as Ee}from"./AccessRequirementSearchBox-EDAb5W7G.js";import{S as Le,F as Ve}from"./EntityTree-CdqkbCLL.js";import{f as $,e as K,O as ke,l as Be,n as Ye,k as Ge}from"./index-BP6kg9I3.js";import{o as X}from"./omitBy-Cg9U_OoE.js";import{E as He}from"./EntityFinderModal-CfuxR219.js";import{L as Se,a as Qe,A as fe,b as ze,M as Re,c as We,S as _e,d as $e}from"./SelfSignAccessRequirement-CEwndEoz.js";import{C as j,c as Ke,u as Xe,e as Je,g as Ze,S as er}from"./StyledTanStackTable-BODTB-J4.js";import{e as rr}from"./useAccessRequirements-DXQLaFdj.js";import{E as tr}from"./EntityLink-HoUGertE.js";import{L as sr}from"./Link-DPsc3TBb.js";import{n as xe}from"./noop-DX6rZLP_.js";import{I as ar}from"./InputSizedButton-B5-0MGjd.js";import{T as Z}from"./TextField-BM400Yg9.js";import{I as ir}from"./InputAdornment-CMpygKTp.js";import{B as or}from"./Box-Bt_N9PQN.js";import{S as nr}from"./SubmissionPage-hel62lIN.js";import"./index-zcEXKDIA.js";import"./useQuery-BEUP4ZKU.js";import"./utils-BECe8vEQ.js";import"./tinycolor-Begke6kS.js";import"./createSvgIcon-Dn0UJ7ef.js";import"./createTheme-BIBP8v0l.js";import"./index-GEGPABih.js";import"./extends-CF3RwP-h.js";import"./styled-DKRXvDfM.js";import"./InfoTwoTone-DHgeDUIO.js";import"./CheckCircleTwoTone-B0uYEdLD.js";import"./calculateFriendlyFileSize-DBeyIXBK.js";import"./Skeleton-DxEJ6_Wp.js";import"./inputBaseClasses-Db8tCxfW.js";import"./Fade-DPmnnOI3.js";import"./utils-B6ltzQPV.js";import"./TransitionGroupContext-C4KIfRep.js";import"./useForkRef-Bm_QQ74L.js";import"./index-Bn-p0IzE.js";import"./FullWidthAlert-BvVq9GNb.js";import"./spreadSx-CwcO6WA9.js";import"./Alert-B6PGsAkP.js";import"./mergeSlotProps-D9SyexBH.js";import"./isHostComponent-DVu5iVWx.js";import"./Paper-BxvgHMc4.js";import"./IconButton-DhHKwBf8.js";import"./ButtonBase-DSnjMKVu.js";import"./useIsFocusVisible-Lp1_y5xp.js";import"./AlertTitle-CCxKidd9.js";import"./Grow-Bb1htYw2.js";import"./ClickAwayListener-Ba-YFlDA.js";import"./ownerDocument-DW-IO8s5.js";import"./Tooltip-CTVx2uGI.js";import"./useControlled-JEQ1v-P8.js";import"./useId-g68bhPgm.js";import"./cloneDeep-C-OZ4saa.js";import"./_initCloneObject-CKp18hZk.js";import"./_baseTimes-36S_kd0L.js";import"./isArray-ggc3KxVp.js";import"./StringUtils-tKdMMErg.js";import"./merge-DLQdEICg.js";import"./identity-DKeuBCMA.js";import"./LayersTwoTone-CUigHRcz.js";import"./ErrorOutlined-BBoV-crm.js";import"./GetAppTwoTone-BoMaJ6Ug.js";import"./InfoOutlined-DE16MDj_.js";import"./DeleteTwoTone-dIAufepT.js";import"./Backdrop-CoMkdzxE.js";import"./LinearProgress-DB_pgUJr.js";import"./Select-49a62830.esm-DLOp93mK.js";import"./use-deep-compare-effect.esm-BJt8Qld_.js";import"./uniq-BqAUotud.js";import"./_baseSlice-F8doVSIJ.js";import"./toInteger-czOlq-ma.js";import"./isSymbol-BzKS7Qf1.js";import"./without-BlSAcJzz.js";import"./_baseIndexOf-DlmoT9Yo.js";import"./toString-CYyvKWOl.js";import"./timezone-ClTQq11v.js";import"./Popover-CC5r9hFJ.js";import"./Modal-lb1Ml_1a.js";import"./getScrollbarSize-Bqq2hMjQ.js";import"./ownerWindow-BN2rbQ_G.js";import"./createChainedFunction-BO_9K8Jh.js";import"./SkeletonTable-BZCRINy2.js";import"./times-Bw9geEsI.js";import"./ToastMessage-BzITCHuf.js";import"./CSSTransition-Brl35HA-.js";import"./hasClass-D5ZjVvBY.js";import"./uniqueId-CSw6ftlJ.js";import"./Menu-xRAbfX1G.js";import"./MenuList-Ckmb61NP.js";import"./List-BhKoI0Qm.js";import"./Divider-Buxfc7OL.js";import"./dividerClasses-wZ44pT98.js";import"./MenuItem-D3tilmmv.js";import"./Card-C3hcFJq7.js";import"./Avatar-DCROTjpC.js";import"./Dropdown-C1nIIVAr.js";import"./index-SDyqs4cU.js";import"./ElementWithTooltip-CH-bZgP7.js";import"./SynapseTableConstants-2qH3fDlQ.js";import"./Icon-Bnyr7zRP.js";import"./ShowMore-FUw6_H-Q.js";import"./SqlFunctions-Drr0XsQh.js";import"./factory-DQ_FQLjW.js";import"./sortBy-GMJwp6yM.js";import"./hasIn-K2TzidVw.js";import"./_baseIteratee-CnLjL4fG.js";import"./pick-65D9a81w.js";import"./isNumber-BM-UBS4N.js";import"./Close-D2xva80d.js";import"./createSvgIcon-n5rVXizw.js";import"./isMuiElement-yx-QWTmT.js";import"./SkeletonButton-Djog88RD.js";import"./SkeletonInlineBlock-93re9Qzh.js";import"./SkeletonParagraph-Xq_br2Sr.js";import"./ActionRequiredCard-DG0UtqJp.js";import"./useEntity-CMUmRRkl.js";import"./useQueries-CXm_8CG9.js";import"./useMutation-BUHlmdy0.js";import"./QueryFilterUtils-Do-YmQjc.js";import"./InfiniteQueryUtils-CKlRW-xB.js";import"./useTeamMembers-CXEMKjcb.js";import"./index-S6oMIluj.js";import"./EntityIcon-s3f5enDO.js";import"./pluralize-D3rOHoU0.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./index.modern-BSaf6tm9.js";import"./_getPrototype-DSx75BAr.js";import"./index-cwW-K0PN.js";import"./isPlainObject-BDeK4qKc.js";import"./toNumber-DDV9Xfgs.js";import"./now-3qigre4W.js";import"./DownloadConfirmationUI-2pJasCgv.js";import"./useDownloadList-BqdSoeTC.js";import"./StandaloneLoginForm-ZQ3cFfXx.js";import"./useTwoFactorEnrollment-VpK4C4U-.js";import"./TextField-CxQ_xk3E.js";import"./InputLabel-RHZu0c3g.js";import"./useFormControl-vG3XTiAH.js";import"./LoginMethodButton-Ddt4M8-a.js";import"./LastLoginInfo-DKxcwwhD.js";import"./TwoFactorEnrollmentForm-DILPBNne.js";import"./LeftRightPanel-CqinvOCV.js";import"./DialogContent-Bs2oSeTu.js";import"./TextFieldWithWordLimit-GXdqIZsQ.js";import"./Input-DkOuflLo.js";import"./Grid-zRSXpTvc.js";import"./RadioGroup-clYTL0Ek.js";import"./Radio-lcFkrfOW.js";import"./FormControlLabel-CARkfAdu.js";import"./FormGroup-FbDq9HHm.js";import"./UploadDocumentField-ClEHxWYd.js";import"./FileUpload-UsRz0TcT.js";import"./AuthenticatedRequirement-D4cE0i25.js";import"./RequirementItem-3L_abKkV.js";import"./ConditionalWrapper-C6_4TcM5.js";import"./CertificationRequirement-DHChsqbH.js";import"./ValidationRequirement-DRZ5TtPT.js";import"./TwoFactorAuthEnabledRequirement-nszVgrkO.js";import"./EnumFacetFilterUI-DqCC_zoe.js";import"./Checkbox-BnrBea29.js";import"./EnumFacetFilterSkeleton-qb1ntr2v.js";import"./Chip-C0KZG4C4.js";import"./IconList-BxTeY2Xl.js";import"./SelectionCriteriaPill-CVuQd0XU.js";import"./Close-Bxs-S91i.js";import"./UserCardList-CzVO3dJi.js";import"./OpenData-BAnv46mr.js";import"./AclEditor-D5IEE6YD.js";import"./IconSvgButton-D9yMJpuI.js";import"./useUpdateAcl-DlG9WSFq.js";import"./Box-CsPt-sI4.js";import"./NoSearchResults-B9722HCv.js";import"./NoData-C6O5T8E1.js";import"./Tabs-CVHgP4g-.js";import"./QueryCount-PVu6Rv2R.js";import"./UpsetPlot-qKmOQNCL.js";import"./lz-string-D345GCHL.js";import"./react-sizeme-Vw-aaS2E.js";import"./colorPalette-BSrfa2_g.js";import"./LargeButton-Bi_H3TB2.js";import"./RangeSlider-Dp63t0on.js";import"./Slider-DqbWnqel.js";import"./SynapseVideo-DQaZFsf_.js";import"./TeamBadge-BZG75f3m.js";import"./useFavorites--5drrwP5.js";import"./Renderers-B4415Bnb.js";import"./index.esm-WNoD1dMH.js";import"./EntityBadgeIcons-D9H1jNgD.js";import"./SchemaDrivenAnnotationEditor-VXgEdSE9.js";import"./MuiForm-BZFiLmIu.js";import"./ListItem-CA4Es91E.js";import"./listItemButtonClasses-DRAzHknr.js";import"./ListItemIcon-DVZmC2CJ.js";import"./ListItemText-DJt0e7Pw.js";import"./ContentCopy-C67malbr.js";import"./ErrorListTemplate-B66PF_Yk.js";import"./DateTimePicker-BkragEvC.js";import"./useMediaQuery-DetXi6Yl.js";import"./ArrowUpward-CHkJ3lDq.js";import"./EntityModal-CVPTpDR_.js";import"./FileHandleUtils-BS7CTKmU.js";import"./WarningDialog-OnWezCdV.js";import"./DropdownSelect-BpDExNZA.js";import"./EntityFinder-Cm8FjAGu.js";import"./Search-Cyfn2sgJ.js";import"./useEntitySelection-_18V9NL5.js";import"./immutable.es-DHy1u56X.js";import"./ErrorChip-B-VlFQet.js";import"./RejectDataAccessRequestModal-DNlh3Qrj.js";import"./CannedRejectionDialog-BXqg_sfV.js";function lr(r,s){const{accessToken:t,keyFactory:a}=ve();return qe({...s,queryKey:a.searchAccessApprovalsQueryKey(r),queryFn:l=>ye.searchAccessApprovals({...r,nextPageToken:l.pageParam},t),initialPageParam:void 0,getNextPageParam:l=>l.nextPageToken})}function L(r,s,t=0){const[a,l]=n.useState(r);return[a,we(l,[],s,t)]}function B({accessorId:r,accessRequirementId:s}){const[t,a]=n.useState({field:y.MODIFIED_ON,direction:I.DESC}),l=n.useMemo(()=>({accessorId:r,accessRequirementId:s,sort:[t]}),[r,s,t]),{data:c,hasNextPage:d,fetchNextPage:h,isLoading:o}=lr(l),u=(c==null?void 0:c.pages.flatMap(i=>i.results))??[],E=i=>{t.field===i?a({field:i,direction:t.direction===I.DESC?I.ASC:I.DESC}):a({field:i,direction:I.DESC})};return e.jsxs("div",{className:"AccessApprovalsTable bootstrap-4-backport",children:[e.jsxs(ue,{striped:!0,borderless:!0,bordered:!1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"AR ID"}),e.jsx("th",{children:"Access Requirement Name"}),e.jsx("th",{children:"Submitter"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:e.jsxs("span",{className:"SRC-split",children:[e.jsx("span",{children:"Modified Date"}),e.jsx(k,{role:"button",active:t.field===y.MODIFIED_ON,direction:t.field===y.MODIFIED_ON?t.direction==="DESC"?I.DESC:I.ASC:I.DESC,onClick:()=>E(y.MODIFIED_ON)})]})}),e.jsx("th",{children:e.jsxs("span",{className:"SRC-split",children:[e.jsx("span",{children:"Expires"}),e.jsx(k,{role:"button",active:t.field===y.EXPIRED_ON,direction:t.field===y.EXPIRED_ON?t.direction==="DESC"?I.DESC:I.ASC:I.DESC,onClick:()=>E(y.EXPIRED_ON)})]})})]})}),e.jsx("tbody",{children:u.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("a",{href:`${ne.PORTAL}AccessRequirement:AR_ID=${i.accessRequirementId}`,children:i.accessRequirementId})}),e.jsx("td",{children:i.accessRequirementName}),e.jsx("td",{children:e.jsx(de,{userId:i.submitterId})}),e.jsx("td",{children:he(i.state.toLocaleLowerCase())}),e.jsx("td",{children:D(b(i.modifiedOn))}),e.jsx("td",{className:`${i.expiredOn?new Date>new Date(i.expiredOn)?"expired":"":"non-expire"} remove-border`,children:i.expiredOn?D(b(i.expiredOn)):"Never"})]},i.id))})]}),o&&e.jsx("div",{className:"SRC-center-text",children:e.jsx(U,{size:40})}),!o&&u.length===0&&e.jsx(_,{className:"SRC-center-text",variant:"body1",children:"No Results"}),d&&e.jsx(M,{variant:"outlined",color:"primary",onClick:()=>{h()},children:"Show More"})]})}try{B.displayName="AccessApprovalsTable",B.__docgenInfo={description:"",displayName:"AccessApprovalsTable",props:{accessorId:{defaultValue:null,description:"",name:"accessorId",required:!0,type:{name:"string"}},accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!1,type:{name:"string"}}}}}catch{}function w({showSubmitter:r,showStatus:s,showRequesters:t,accessorId:a,accessRequirementId:l,reviewerId:c,submissionState:d,reviewerFilterType:h}){const[o,u]=n.useState({field:P.CREATED_ON,direction:I.DESC}),E=n.useMemo(()=>({accessorId:a,accessRequirementId:l,submissionState:d,reviewerId:c,reviewerFilterType:h,sort:[o]}),[a,l,d,c,h,o]),{data:i,hasNextPage:A,fetchNextPage:f,isLoading:S}=Fe(E),x=(i==null?void 0:i.pages.flatMap(m=>m.results))??[],C=m=>{o.field===m?u({field:m,direction:o.direction==="DESC"?"ASC":"DESC"}):u({field:m,direction:"DESC"})};return e.jsxs("div",{className:"bootstrap-4-backport AccessSubmissionTable",children:[e.jsxs(ue,{striped:!0,borderless:!0,bordered:!1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"REQUEST"}),e.jsx("th",{children:"Access Requirement Name"}),r&&e.jsx("th",{children:"Submitter"}),s&&e.jsx("th",{children:"Status"}),t&&e.jsx("th",{children:"Requesters"}),e.jsx("th",{children:"Reviewer(s)"}),e.jsxs("th",{children:["Created Date",e.jsx(k,{role:"button",style:{float:"right"},active:o.field===P.CREATED_ON,"aria-label":"Sort by Created On",direction:o.field===P.CREATED_ON?o.direction==="DESC"?"DESC":"ASC":"DESC",onClick:()=>C(P.CREATED_ON)})]})]})}),e.jsx("tbody",{children:x.map(m=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(Ie,{to:`/Submissions/${m.id}`,children:m.id})}),e.jsx("td",{children:m.accessRequirementName}),r&&e.jsx("td",{children:e.jsx(g,{principalId:m.submitterId})}),s&&e.jsx("td",{children:he(m.state.toLocaleLowerCase())}),t&&e.jsxs("td",{children:[e.jsx(g,{principalId:m.submitterId}),m.accessorChanges.filter(p=>m.submitterId!==p.userId).map(p=>e.jsx("li",{children:e.jsx(de,{userId:p.userId,className:"requester"})},p.userId))]}),e.jsx("td",{children:e.jsx(Ue,{gap:1,children:m.accessRequirementReviewerIds.length===0?e.jsx(g,{principalId:W}):m.accessRequirementReviewerIds.map(p=>e.jsx(g,{principalId:p},p))})}),e.jsx("td",{children:D(b(m.createdOn))})]},m.id))})]}),S&&e.jsx("div",{className:"SRC-center-text",children:e.jsx(U,{size:40})}),!S&&x.length==0&&e.jsx(_,{className:"SRC-center-text",variant:"body1",children:"No Results"}),A?e.jsx(M,{variant:"outlined",color:"primary",onClick:()=>{f()},children:"Show More"}):""]})}try{w.displayName="AccessRequestSubmissionTable",w.__docgenInfo={description:"",displayName:"AccessRequestSubmissionTable",props:{showSubmitter:{defaultValue:null,description:"",name:"showSubmitter",required:!1,type:{name:"boolean"}},showStatus:{defaultValue:null,description:"",name:"showStatus",required:!1,type:{name:"boolean"}},showRequesters:{defaultValue:null,description:"",name:"showRequesters",required:!1,type:{name:"boolean"}},accessorId:{defaultValue:null,description:"",name:"accessorId",required:!1,type:{name:"string"}},accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!1,type:{name:"string"}},reviewerId:{defaultValue:null,description:"",name:"reviewerId",required:!1,type:{name:"string"}},submissionState:{defaultValue:null,description:"",name:"submissionState",required:!1,type:{name:"enum",value:[{value:'"SUBMITTED"'},{value:'"APPROVED"'},{value:'"REJECTED"'},{value:'"CANCELLED"'}]}},reviewerFilterType:{defaultValue:null,description:"",name:"reviewerFilterType",required:!1,type:{name:"enum",value:[{value:'"ALL"'},{value:'"ACT_ONLY"'},{value:'"DELEGATED_ONLY"'}]}}}}}catch{}const cr=()=>e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"SearchPlaceholderImage",height:"167px"}),e.jsx(_,{variant:"body1Italic",children:"Select a user using the search field above to view their data access history"})]}),mr=()=>{const[r,s]=n.useState(),[t,a]=n.useState(""),[l,c]=n.useState({accessorId:t,accessRequirementId:r}),[d,h]=n.useState({showStatus:!0,showSubmitter:!0,accessorId:t,accessRequirementId:r}),{data:o}=le(),u=o==null?void 0:o.isACTMember,E=$(),i=K(),A=500,f=n.useCallback(S=>{a(S||"")},[]);return n.useEffect(()=>{(()=>{const x=new URLSearchParams(E.search);s(x.get("accessRequirementId")??void 0),a(x.get("accessorId")??"")})()},[E.search]),ce(()=>{((x,C)=>{const m=new URLSearchParams(X({accessRequirementId:x,accessorId:C},p=>p===void 0||p===""));i({pathname:E.pathname,search:m.toString()},{replace:!0})})(r,t),c({accessorId:t,accessRequirementId:r}),h({showStatus:!0,showSubmitter:!0,accessorId:t,accessRequirementId:r})},[r,t,i,E.pathname],A),e.jsxs("div",{className:"UserHistoryDashboard bootstrap-4-backport",children:[e.jsxs("div",{className:"InputPanel",children:[e.jsxs("div",{children:[e.jsx(_,{component:"label",variant:"smallText2",htmlFor:"user-filter",children:"Select a user to view their access history"}),e.jsx(O,{inputId:"user-filter",onChange:f,defaultValue:t,placeholder:"Search for a user name",typeFilter:me.USERS_ONLY})]}),t&&e.jsxs("div",{children:[e.jsx(_,{component:"label",variant:"smallText2",htmlFor:"arName-filter",children:"Filter by Access Requirement Name"}),e.jsx(Ee,{inputId:"arName-filter",placeholder:"Search for an Access Requirement Name ",onChange:s})]})]}),t?e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"headline3",children:["Submissions including ",e.jsx(g,{principalId:t})]}),e.jsx(w,{...d}),u&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"headline3",children:"Status in Access Requirements"}),e.jsx(B,{...l})]})]}):e.jsx(cr,{})]})};function F(r){switch(r){case pe:return Oe;case _e:return $e;case Re:return We;case fe:return ze;case Se:return Qe;default:return"Unknown"}}const pr=[pe,_e,Re,fe,Se],dr=r=>/^\d+$/.test(r),N=Ke(),ur=[N.accessor("id",{header:r=>e.jsx(j,{...r,title:"AR ID"}),cell:({getValue:r})=>e.jsx(sr,{href:`${ne.PORTAL}AccessRequirement:AR_ID=${r()}`,children:r()}),enableSorting:!1,enableColumnFilter:!1}),N.accessor("name",{header:r=>e.jsx(j,{...r,title:"Access Requirement Name"}),cell:({getValue:r})=>r(),enableSorting:!0,enableColumnFilter:!1}),N.accessor("type",{header:r=>e.jsx(j,{...r,title:"Type"}),cell:({getValue:r})=>F(r()),enableSorting:!1,enableColumnFilter:!0,meta:{filterVariant:"enumeration",getDisplayText:F,enableMultipleSelect:!1}}),N.accessor("relatedProjectIds",{header:r=>e.jsx(j,{...r,title:"Related to Projects"}),cell:({getValue:r})=>e.jsx(e.Fragment,{children:r().map(s=>e.jsxs(n.Fragment,{children:[e.jsx(tr,{entity:s})," ",e.jsxs(_,{component:"span",variant:"smallText1",color:"grey.700",children:["(",s,")"]}),e.jsx("br",{})]},s))}),enableSorting:!1,enableColumnFilter:!1}),N.accessor("reviewerIds",{header:r=>e.jsx(j,{...r,title:"Reviewer"}),cell:({getValue:r})=>e.jsx(e.Fragment,{children:r().length===0?e.jsx(g,{principalId:W}):r().map(s=>e.jsx(g,{principalId:s},s))}),enableSorting:!1,enableColumnFilter:!1}),N.accessor("modifiedOn",{header:r=>e.jsx(j,{...r,title:"Last Modified"}),cell:({getValue:r})=>D(b(r())),enableSorting:!1,enableColumnFilter:!1}),N.accessor("createdOn",{header:r=>e.jsx(j,{...r,title:"Created On"}),cell:({getValue:r})=>D(b(r())),enableSorting:!0,enableColumnFilter:!1})],hr=[{desc:!0,id:"createdOn"}];function Er(r){const s=r.desc?"DESC":"ASC";if(r.id=="createdOn")return{field:"CREATED_ON",direction:s};if(r.id=="name")return{field:"NAME",direction:s};throw new Error(`Could not map sort field ${r.id} to AccessRequirementSortField`)}function Sr(r){const s=(r||[]).find(a=>a.id==="type"),t=s==null?void 0:s.value;if(t)return t[0]}function Y(r){const{nameOrID:s,relatedProjectId:t,reviewerId:a,accessType:l,typeFilter:c,onTypeFilterChange:d=xe}=r,[h,o]=n.useState(hr),u=n.useMemo(()=>c?[{id:"type",value:[c]}]:[],[c]),E=n.useCallback(R=>{const T=typeof R=="function"?R(u):R,v=Sr(T);d(v)},[u,d]),i=n.useMemo(()=>h.map(Er),[h]),A=n.useMemo(()=>{let R,T;if(s!==void 0){const v=s.trim();dr(v)?T=[Number.parseInt(v)]:R=v}return{ids:T,nameContains:R,relatedProjectId:t,reviewerId:a,accessType:l,sort:i,type:c}},[s,t,a,l,i,c]),{data:f,hasNextPage:S,fetchNextPage:x,isLoading:C}=rr(A),m=n.useMemo(()=>(f==null?void 0:f.pages.flatMap(R=>R.results))??[],[f]);return{table:Xe({data:m,columns:ur,state:{sorting:h,columnFilters:u},getFacetedUniqueValues:(R,T)=>T==="type"?()=>new Map(pr.map(v=>[v,0])):Je()(R,T),onSortingChange:o,onColumnFiltersChange:E,getRowId:R=>R.id,getCoreRowModel:Ze(),columnResizeMode:"onChange",manualSorting:!0,enableMultiSort:!1,enableSortingRemoval:!1,manualFiltering:!0}),isLoading:C,hasNextPage:S,fetchNextPage:x}}try{F.displayName="accessRequirementConcreteTypeValueToDisplayValue",F.__docgenInfo={description:"",displayName:"accessRequirementConcreteTypeValueToDisplayValue",props:{}}}catch{}try{Y.displayName="useAccessRequirementTable",Y.__docgenInfo={description:"",displayName:"useAccessRequirementTable",props:{nameOrID:{defaultValue:null,description:"",name:"nameOrID",required:!1,type:{name:"string"}},relatedProjectId:{defaultValue:null,description:"",name:"relatedProjectId",required:!1,type:{name:"string"}},reviewerId:{defaultValue:null,description:"",name:"reviewerId",required:!1,type:{name:"string"}},accessType:{defaultValue:null,description:"",name:"accessType",required:!1,type:{name:"enum",value:[{value:'"CREATE"'},{value:'"READ"'},{value:'"UPDATE"'},{value:'"DELETE"'},{value:'"CHANGE_PERMISSIONS"'},{value:'"DOWNLOAD"'},{value:'"UPLOAD"'},{value:'"PARTICIPATE"'},{value:'"SUBMIT"'},{value:'"READ_PRIVATE_SUBMISSION"'},{value:'"UPDATE_SUBMISSION"'},{value:'"DELETE_SUBMISSION"'},{value:'"TEAM_MEMBERSHIP_UPDATE"'},{value:'"SEND_MESSAGE"'},{value:'"CHANGE_SETTINGS"'},{value:'"MODERATE"'},{value:'"REVIEW_SUBMISSIONS"'},{value:'"EXEMPTION_ELIGIBLE"'}]}},typeFilter:{defaultValue:null,description:"",name:"typeFilter",required:!1,type:{name:"string"}},onTypeFilterChange:{defaultValue:null,description:"",name:"onTypeFilterChange",required:!1,type:{name:"((typeFilter: string) => void)"}}}}}catch{}function G(r){const{nameOrID:s,relatedProjectId:t,reviewerId:a,accessType:l,onCreateNewAccessRequirementClicked:c,typeFilter:d,onTypeFilterChange:h=xe}=r,{table:o,isLoading:u,hasNextPage:E,fetchNextPage:i}=Y({nameOrID:s,relatedProjectId:t,reviewerId:a,accessType:l,typeFilter:d,onTypeFilterChange:h});return e.jsxs("div",{children:[e.jsxs("div",{className:"SRC-split",children:[e.jsx(_,{variant:"headline3",style:{marginBottom:0},children:"Access Requirements"}),c&&e.jsx(M,{variant:"outlined",color:"primary",onClick:c,startIcon:e.jsx(Ne,{}),children:"New Access Requirement"})]}),e.jsxs("div",{children:[e.jsx(er,{table:o,styledTableContainerProps:{sx:{my:2}}}),u&&e.jsx("div",{className:"SRC-center-text",children:e.jsx(U,{size:40})}),!u&&o.getRowModel().rows.length===0&&e.jsx(_,{className:"SRC-center-text",variant:"body1",children:"No Results"}),E?e.jsx(M,{variant:"outlined",color:"primary",onClick:()=>{i()},children:"Show More"}):e.jsx(e.Fragment,{})]})]})}try{G.displayName="AccessRequirementTable",G.__docgenInfo={description:"",displayName:"AccessRequirementTable",props:{nameOrID:{defaultValue:null,description:"",name:"nameOrID",required:!1,type:{name:"string"}},relatedProjectId:{defaultValue:null,description:"",name:"relatedProjectId",required:!1,type:{name:"string"}},reviewerId:{defaultValue:null,description:"",name:"reviewerId",required:!1,type:{name:"string"}},accessType:{defaultValue:null,description:"",name:"accessType",required:!1,type:{name:"enum",value:[{value:'"CREATE"'},{value:'"READ"'},{value:'"UPDATE"'},{value:'"DELETE"'},{value:'"CHANGE_PERMISSIONS"'},{value:'"DOWNLOAD"'},{value:'"UPLOAD"'},{value:'"PARTICIPATE"'},{value:'"SUBMIT"'},{value:'"READ_PRIVATE_SUBMISSION"'},{value:'"UPDATE_SUBMISSION"'},{value:'"DELETE_SUBMISSION"'},{value:'"TEAM_MEMBERSHIP_UPDATE"'},{value:'"SEND_MESSAGE"'},{value:'"CHANGE_SETTINGS"'},{value:'"MODERATE"'},{value:'"REVIEW_SUBMISSIONS"'},{value:'"EXEMPTION_ELIGIBLE"'}]}},onCreateNewAccessRequirementClicked:{defaultValue:null,description:"",name:"onCreateNewAccessRequirementClicked",required:!1,type:{name:"(() => void)"}},typeFilter:{defaultValue:null,description:"",name:"typeFilter",required:!1,type:{name:"string"}},onTypeFilterChange:{defaultValue:null,description:"",name:"onTypeFilterChange",required:!1,type:{name:"((typeFilter: string) => void)"}}}}}catch{}const ee="nameOrID",re="relatedProjectId",te="reviewerId",se="type";function H(r){const{onCreateNewAccessRequirementClicked:t}=r,a=$(),l=n.useMemo(()=>new URLSearchParams(a.search),[a.search]),c=K(),[d,h]=L(l.get(ee)??"",500),[o,u]=L(l.get(re)??void 0,500),[E,i]=L(l.get(te)??void 0,500),[A,f]=n.useState(l.get(se)??void 0),S=n.useMemo(()=>!!(o&&!Me.exec(o)),[o]),[x,C]=n.useState(!1);n.useEffect(()=>{const p=X({[ee]:d,[re]:o,[te]:E,[se]:A},T=>T===void 0||T===""),R=new URLSearchParams(p);c({pathname:a.pathname,search:R.toString()},{replace:!0})},[d,o,E,A,c,a.pathname]);const m=n.useCallback(p=>{i(p||void 0)},[i]);return e.jsxs("div",{className:"AccessRequirementDashboard",children:[e.jsx(He,{configuration:{initialScope:Ve.ALL_PROJECTS,initialContainer:null,selectMultiple:!1,selectableTypes:[Pe.PROJECT],treeOnly:!0},show:x,onCancel:()=>{C(!1)},title:"Select Project to Filter Access Requirements",promptCopy:"Select a project to find Access Requirements that are associated with that project. Access Requirements will be found if the Access Requirement is applied to the project, or if it is applied to any item inside the project.",onConfirm:p=>{u(p[0].targetId),C(!1)},confirmButtonCopy:"Select"}),e.jsxs("form",{className:"InputPanel",children:[e.jsx("div",{children:e.jsx(Z,{label:"Filter by Access Requirement Name or ID",id:"ar-name-filter",type:"text",fullWidth:!0,placeholder:"Search for an Access Requirement Name or ID",onChange:p=>{h(p.target.value)},InputProps:{endAdornment:e.jsx(ir,{position:"end",children:e.jsx(ge,{})})}})}),e.jsxs(or,{display:"flex",gap:"5px",alignItems:"stretch",children:[e.jsx(Z,{label:"Filter by Project",id:"project-id-filter",type:"text",fullWidth:!0,placeholder:"Enter a project SynID",error:S,helperText:S?'Value must be a Synapse ID, e.g. "syn1234"':void 0,onChange:p=>{const R=p.target.value;u(R===""?void 0:R)}}),e.jsx(ar,{variant:"outlined",color:"primary",onClick:()=>{C(!0)},children:"Browse"})]}),e.jsxs("div",{children:[e.jsx(_,{component:"label",variant:"smallText2",htmlFor:"reviewer-filter",children:"Filter by Reviewer"}),e.jsx(O,{inputId:"reviewer-filter",placeholder:"Search for a username or team name",defaultValue:E,onChange:m})]})]}),e.jsx(G,{nameOrID:d,relatedProjectId:o,reviewerId:E,onCreateNewAccessRequirementClicked:t,typeFilter:A,onTypeFilterChange:f})]})}try{H.displayName="AccessRequirementDashboard",H.__docgenInfo={description:"",displayName:"AccessRequirementDashboard",props:{onCreateNewAccessRequirementClicked:{defaultValue:null,description:"",name:"onCreateNewAccessRequirementClicked",required:!1,type:{name:"(() => void)"}}}}}catch{}const Q=r=>{if(r&&r!==W.toString())return r},fr=()=>{const[r,s]=n.useState(),[t,a]=n.useState(),[l,c]=n.useState(),[d,h]=n.useState({accessRequirementId:r,accessorId:t,reviewerId:l,showRequesters:!0,submissionState:J.SUBMITTED}),o=$(),u=K(),E=500;n.useEffect(()=>{(()=>{const S=new URLSearchParams(o.search);s(S.get("accessRequirementId")??void 0),a(S.get("accessorId")??void 0),c(S.get("reviewerId")??void 0)})()},[o.search]);const i=n.useCallback(f=>{a(f||void 0)},[]),A=n.useCallback(f=>{c(Q(f))},[]);return ce(()=>{((S,x,C)=>{const m=new URLSearchParams(X({accessRequirementId:S,accessorId:x,reviewerId:C},p=>p===void 0||p===""));u({pathname:o.pathname,search:m.toString()},{replace:!0})})(r,t,l),h({accessRequirementId:r,accessorId:t,reviewerId:l,showRequesters:!0,submissionState:J.SUBMITTED})},[r,t,l,u,o.pathname],E),e.jsxs("div",{className:"AccessSubmissionDashboard",children:[e.jsxs("div",{className:"InputPanel",children:[e.jsxs("div",{children:[e.jsx(_,{component:"label",variant:"smallText2",htmlFor:"arId-filter",children:"Filter by Access Requirement Name"}),e.jsx(Ee,{inputId:"arId-filter",onChange:s,placeholder:"Search for an Access Requirement Name "})]}),e.jsxs("div",{children:[e.jsx(_,{component:"label",variant:"smallText2",htmlFor:"requester-filter",children:"Filter by Requester"}),e.jsx(O,{inputId:"requester-filter",placeholder:"Search for a user name",defaultValue:t,onChange:i,typeFilter:me.USERS_ONLY})]}),e.jsxs("div",{children:[e.jsx(_,{component:"label",variant:"smallText2",htmlFor:"reviewer-filter",children:"Filter by Reviewer"}),e.jsx(O,{inputId:"reviewer-filter",placeholder:"Search for a user or team name",defaultValue:l,onChange:A})]})]}),e.jsx(_,{variant:"headline3",children:"Access Request Submissions"}),e.jsx(w,{...d})]})};try{Q.displayName="getReviewerFilterID",Q.__docgenInfo={description:"",displayName:"getReviewerFilterID",props:{}}}catch{}function V(r){const{href:s,children:t,icon:a}=r;return e.jsxs(Te,{className:"Tab",role:"tab",to:s,children:[e.jsx(be,{icon:a,sx:{paddingRight:"0.2rem"}}),e.jsx(_,{variant:"buttonLink",children:t})]})}function z(r){const{routerBaseName:s="/DataAccessManagement:default",useMemoryRouter:t=!1}=r,{data:a,isLoading:l}=le(),c=a==null?void 0:a.isACTMember,d=(a==null?void 0:a.isACTMember)||(a==null?void 0:a.isARReviewer),h=n.useMemo(()=>[{path:"/",element:e.jsxs("div",{className:"ReviewerDashboard",children:[e.jsxs("div",{className:"Tabs",role:"tablist",children:[c&&e.jsx(V,{href:"/AccessRequirements",icon:"accessClosed",children:"Access Requirements"}),d&&e.jsx(V,{href:"/Submissions",icon:"discussion",children:"Submissions"}),d&&e.jsx(V,{href:"/UserAccessHistory",icon:"history",children:"User Access History"})]}),e.jsx("div",{className:"TabContentContainer",children:e.jsx(je,{children:e.jsx(ke,{})})})]}),children:[{path:"AccessRequirements",element:c?e.jsx(H,{}):null},{path:"Submissions",element:d?e.jsxs(e.Fragment,{children:[!c&&e.jsx(De,{name:"DataAccessManagement",title:"Getting Started With Data Access Management",text:"When someone requests access to data, that request will show up here. Clicking on the Request ID will take you to a page where you can review the request.",sx:{margin:"-20px -30px 20px -30px",width:"auto"}}),e.jsx(fr,{})]}):null},{path:"Submissions/:id",element:d?e.jsx(Rr,{}):null},{path:"UserAccessHistory",element:e.jsx(mr,{})}]}],[c,d]),o=n.useMemo(()=>t?Be(h,{basename:s}):Ae(h,{basename:s}),[t,h,s]);return l?e.jsx(U,{size:50}):e.jsx(Ce,{router:o})}function Rr(){const{id:r}=Ye();return r?e.jsx(nr,{submissionId:r}):e.jsx(Ge,{to:"Submissions/"})}try{z.displayName="ReviewerDashboard",z.__docgenInfo={description:"",displayName:"ReviewerDashboard",props:{routerBaseName:{defaultValue:null,description:"Used to determine the base path for the component. Default is DataAccessManagement:default",name:"routerBaseName",required:!1,type:{name:"string"}},useMemoryRouter:{defaultValue:null,description:"If true use a MemoryRouter, which prevents the browser URL from updating. For demo purposes only.",name:"useMemoryRouter",required:!1,type:{name:"boolean"}}}}}catch{}const Mi={title:"Governance/ReviewerDashboard",component:z},q={args:{useMemoryRouter:!0,routerBaseName:"/"}};var ae,ie,oe;q.parameters={...q.parameters,docs:{...(ae=q.parameters)==null?void 0:ae.docs,source:{originalSource:`{
  args: {
    useMemoryRouter: true,
    routerBaseName: '/'
  }
}`,...(oe=(ie=q.parameters)==null?void 0:ie.docs)==null?void 0:oe.source}}};const wi=["Demo"];export{q as Demo,wi as __namedExportsOrder,Mi as default};
