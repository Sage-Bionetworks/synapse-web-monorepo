import{j as t}from"./jsx-runtime-Du8NFWEI.js";import{b as g}from"./index-DjsgxyLG.js";import{R as q,r as m}from"./index-Dl6G-zuu.js";import"./SynapseClient-DE-JFn_p.js";import"./OrientationBanner-D9iiRUAg.js";import"./EntityTypeUtils-Dx3hzu5j.js";import"./getEndpoint-CjoHA800.js";import{a as b,b as L,c as T,d as j}from"./useAccessRequirements-BLdteP2L.js";import{u as N}from"./useUpdateAcl-BKB2O1sM.js";import{A as B}from"./AclEditor-DlPIFiwq.js";import{i as M}from"./isEqual-fx5nODOB.js";import{S as O}from"./Stack-D3AEdRlD.js";import{B as P}from"./Box-DRYT9rh3.js";import{T as i}from"./Typography-DgBbIcOX.js";import{A as U}from"./Alert-Aa0bm5Nm.js";const u={variant:"body1",lineHeight:"20px",color:"grey.800"},w="Only ACT has permissions on this AR.",V=["CAN_REVIEW_SUBMISSIONS","IS_EXEMPTION_ELIGIBLE","CAN_REVIEW_SUBMISSIONS_AND_IS_EXEMPTION_ELIGIBLE"],f=q.forwardRef(function(R,I){const{accessRequirementId:o,onSaveComplete:n}=R,[d,c]=m.useState(null),a=()=>{c(null),n(!0)},l=e=>{c(e.reason),n(!1)},{data:s,isLoading:x}=b(o,{staleTime:1/0}),{resourceAccessList:r,setResourceAccessList:p,addResourceAccessItem:y,updateResourceAccessItem:_,removeResourceAccessItem:C,resetDirtyState:v}=N({onChange:()=>c(null),onError:c});m.useEffect(()=>{s&&(v(),p(s.resourceAccess))},[s,p]);const{mutate:A}=L({onSuccess:()=>a(),onError:e=>l(e)}),{mutate:E}=T({onSuccess:()=>a(),onError:e=>l(e)}),{mutate:S}=j({onSuccess:()=>a(),onError:e=>l(e)});return m.useImperativeHandle(I,()=>({save(){const e=r.length===0?null:{...s,id:(s==null?void 0:s.id)||o,resourceAccess:r};s===null&&e==null||M(s==null?void 0:s.resourceAccess,r)&&(s==null?void 0:s.id)===(e==null?void 0:e.id)?n(!0):s===null&&e!==null?E(e):e===null?A(o):S(e)}}),[o,s,r,E,A,n,S]),t.jsxs(O,{gap:"20px",direction:"column",children:[t.jsxs(P,{children:[t.jsx(i,{variant:"headline3",mb:"10px",children:"Guide to AR permissions"}),t.jsxs(i,{sx:u,mb:"10px",children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Can Review"})," means a user or team has access request review permission for this AR."]}),t.jsxs(i,{sx:u,mb:"10px",children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Exempt Eligible"}),' users and teams can bypass access requirements for entities they have been granted "edit and delete" permission on, via the "Sharing Settings" dialog in the Project Settings.']}),t.jsx(i,{sx:{...u,color:"grey.900"},children:"ACT members always retain the ability to review or modify Access Requirements."})]}),t.jsx(B,{resourceAccessList:r,availablePermissionLevels:V,isLoading:x,canEdit:!0,emptyText:w,onAddPrincipalToAcl:e=>y(e,[g.REVIEW_SUBMISSIONS]),updateResourceAccessItem:_,removeResourceAccessItem:C,showAddRemovePublicButton:!1,showNotifyCheckbox:!1}),d&&t.jsx(U,{severity:"error",children:d})]})});try{f.displayName="AccessRequirementAclEditor",f.__docgenInfo={description:"",displayName:"AccessRequirementAclEditor",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSaveComplete:{defaultValue:null,description:"",name:"onSaveComplete",required:!0,type:{name:"(saveSuccessful: boolean) => void"}}}}}catch{}export{f as A};
