import{j as p}from"./jsx-runtime-waCBpRoR.js";import{aW as _,aX as G}from"./useFiles-CljrymEZ.js";import{s as R,F as Y}from"./SynapseConstants-Dph5rBQn.js";import{r as F}from"./index-h_UnLfo6.js";import{g as l,D as B}from"./VerificationSubmission-DHPhgAH7.js";import{z as b}from"./StringUtils-Bj0SG9ce.js";import{u as T}from"./UserSearchBoxV2-EaSAjcxc.js";import"./OrientationBanner-CjgChWnG.js";import{u as H}from"./QueryContext-DB-QRNZ7.js";import{d as z,u as $}from"./QueryWrapper-DQwYQ1o_.js";import{E as W}from"./EnumFacetFilterSkeleton-Ck_nty2P.js";import{E as X}from"./EnumFacetFilterUI-pyQCifnF.js";import{c as h}from"./cloneDeep-D36itDQt.js";import{c as J}from"./_createAggregator-DQSDgCQ0.js";import{s as N}from"./useAccessRequirements-CtJ6PMW4.js";import{p as V}from"./pick-BmMZu3W8.js";var K=J(function(s,e,n){s[n?0:1].push(e)},function(){return[[],[]]});function Z(s,e=[],n=[],E=[]){const{value:o}=s;let u=o;if(o===R)return Y;const f=e.find(i=>i.ownerId===o);e.length&&(u=f?f.userName:`unknown (${o})`);const c=n.find(i=>i.id===o);n.length&&(u=c?c.name:`unknown (${o})`);const m=E.find(i=>i.id===o);return m!=null&&m.name&&(u=m.name),u}function M(s,e){const n=_(e,s.query.selectedFacets);return n?b(n)?n.facetValues.length===0:(console.error("getAllIsSelected: matchingSelectedFacet is not a FacetColumnValuesRequest",n),!0):!0}function ee(s){const{facet:e,containerAs:n="Collapsible",dropdownType:E="Icon",hideCollapsible:o=!1,sortConfig:u,defaultShowAllValues:f=!1}=s,{nextQueryRequest:c,addValueToSelectedFacet:m,removeSelectedFacet:i,removeValueFromSelectedFacet:q,resetDebounceTimer:x}=H(),{data:I}=z(),{getColumnDisplayName:w}=$(),d=F.useMemo(()=>{const a=_(e,h(c.query.selectedFacets));if(a&&!b(a)){console.error("The facet rendered in EnumFacetFilter is not a FacetColumnValuesRequest",e);return}return a},[e,c.query.selectedFacets]),j=M(h(c),e),t=I.columnModels?G(e,I.columnModels):void 0,L=F.useMemo(()=>{switch(t==null?void 0:t.columnType){case l.DOUBLE:case l.DATE:case l.INTEGER:return!0;default:return!1}},[t]),U=(t==null?void 0:t.columnType)===l.USERID||(t==null?void 0:t.columnType)===l.USERID_LIST?e.facetValues.map(a=>a.value):[],S=T({ids:U,type:"USER_PROFILE"}),O=(t==null?void 0:t.columnType)===l.ENTITYID||(t==null?void 0:t.columnType)===l.ENTITYID_LIST?e.facetValues.map(a=>a.value):[],v=T({ids:O,type:"ENTITY_HEADER"}),k=(t==null?void 0:t.columnType)===l.EVALUATIONID?e.facetValues.map(a=>a.value):[],g=T({ids:k,type:"EVALUATION_QUEUE"}),P=F.useMemo(()=>{const a=e.facetValues.map(r=>({...r,isSelected:(d==null?void 0:d.facetValues.includes(r.value))??!1,displayText:Z(r,S,v,g)})),C=K(a,r=>r.value===R),Q=C[0],A=C[1];let y;return L?y=N(A,r=>Number(r.value)):y=N(A,r=>r.displayText.toLowerCase()),[...u&&u.direction==B.DESC?y.reverse():y,...Q]},[d==null?void 0:d.facetValues,v,g,e.facetValues,S]);return t?p.jsx(X,{facetTitle:w(e.columnName,e.jsonPath),filterIsActive:!j,facetValues:P,containerAs:n,dropdownType:E,hideCollapsible:o,defaultShowAllValues:f,onHoverOverValue:()=>{x()},onAddValueToSelection:a=>{m(V(e,["columnName","jsonPath"]),a,{debounce:!0})},onRemoveValueFromSelection:a=>{q(V(e,["columnName","jsonPath"]),a,{debounce:!0})},onRemoveAllFacetSelections:()=>i(V(e,["columnName","jsonPath"])),canMultiSelect:!0}):p.jsx(p.Fragment,{})}function D(s){const{containerAs:e="Collapsible",dropdownType:n="Icon"}=s;return p.jsx(F.Suspense,{fallback:p.jsx(W,{containerAs:e,dropdownType:n}),children:p.jsx(ee,{...s})})}try{D.displayName="EnumFacetFilter",D.__docgenInfo={description:"",displayName:"EnumFacetFilter",props:{facet:{defaultValue:null,description:"",name:"facet",required:!0,type:{name:"FacetColumnResultValues"}},containerAs:{defaultValue:null,description:"",name:"containerAs",required:!1,type:{name:"enum",value:[{value:'"Collapsible"'},{value:'"Dropdown"'}]}},dropdownType:{defaultValue:null,description:"",name:"dropdownType",required:!1,type:{name:"enum",value:[{value:'"Icon"'},{value:'"SelectBox"'}]}},hideCollapsible:{defaultValue:null,description:"",name:"hideCollapsible",required:!1,type:{name:"boolean"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"FacetValueSortConfig"}},defaultShowAllValues:{defaultValue:null,description:"",name:"defaultShowAllValues",required:!1,type:{name:"boolean"}}}}}catch{}export{D as E};
