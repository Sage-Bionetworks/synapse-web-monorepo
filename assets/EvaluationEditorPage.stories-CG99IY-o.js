import{g as We}from"./userProfileHandlers-DDGVYFgS.js";import{M as Fe}from"./mock_user_profile-CCzWeUML.js";import{l as ne,S as N,k as ie,cb as Ue,cc as Ge,cd as Ke,ce as $e,M as B}from"./useFiles-CWzgJ9sH.js";import{f as Ye}from"./index-D90xtYr7.js";import{d as S}from"./dayjs.min-DMkylBgh.js";import{l as le}from"./index-aVTUN2kY.js";import{j as t}from"./jsx-runtime-CDD16J4I.js";import{r as l}from"./index-CTtGSwtz.js";import"./VerificationSubmission-DeH3Sb8D.js";import"./StringUtils-DnD65nWI.js";import{I as oe,C as Ze}from"./IconSvg-CHNax4qW.js";import{W as Te}from"./WarningDialog-CDiHB6mG.js";import{C as ze}from"./CreatedOnByUserDiv-LF2nhyDJ.js";import{B as y}from"./Box-BldPxOqU.js";import{S as He}from"./Stack-D5IlQnMa.js";import{T as C,S as Qe}from"./TextField-cufmUhwN.js";import{A as ae}from"./Alert-DlUFZ172.js";import{B as R}from"./Button-CSREDgQS.js";import{I as k}from"./IconButton-CFbw2MTT.js";import{M as _e}from"./Menu-6Fydzf43.js";import{M as q}from"./MenuItem-Dk9eSXYx.js";import{D as Ne}from"./Divider-DAH2AXIe.js";import{a as Je,g as Oe}from"./iframe-DHqncNvI.js";import{i as Xe}from"./index.browser-CtiQQ-iP.js";import{u as et}from"./utc-BWwt-reI.js";import{D as ce}from"./DateTimePicker-DMsUKare.js";import{S as tt}from"./StyledFormControl-CXYbbADQ.js";import{I as rt}from"./InputLabel-BDwxuGy1.js";import{c as nt}from"./createSvgIcon-D2nihEOR.js";import{C as it}from"./Card-y2kybE0s.js";import{C as ot}from"./CardContent-BO8JYb2u.js";import{G as P}from"./Grid-BCUE7ZhM.js";import{u as at}from"./upperFirst-BMmZhNCO.js";import"./mockEntity-gXMT8QsQ.js";import"./mockFileEntity-CJCU3286.js";import"./mock_file_handle-CnMBfpEV.js";import"./mockProject-CQ5VVhnj.js";import"./mockTeam-DWHlZIIV.js";import"./SynapseConstants-CxcbPKuN.js";import"./OrientationBanner-CDewlRHC.js";import"./index-6q9LD8_w.js";import"./spreadSx-CwcO6WA9.js";import"./react-Ck4mbq7a.js";import"./FullWidthAlert-Cgkxxv0P.js";import"./AlertTitle-iHGnMN1B.js";import"./createTheme-DtyqCcsW.js";import"./DefaultPropsProvider-Q55trC2F.js";import"./Typography-DfBcTN0P.js";import"./useTimeout-DCvpGNuJ.js";import"./useEventCallback-LaXwXmvX.js";import"./resolveComponentProps-yty8tDzr.js";import"./isHostComponent-DVu5iVWx.js";import"./useTheme-4fjKTJkR.js";import"./useTheme-BqMk1IzG.js";import"./Grow-DwKxzONN.js";import"./useForkRef-8EUHzdYl.js";import"./index-CXYQz1UQ.js";import"./index-DnAMs-MC.js";import"./utils-BT38eB9s.js";import"./TransitionGroupContext-D_AfR7Ts.js";import"./ClickAwayListener-DJDqohlz.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-D2Ya4jZy.js";import"./Tooltip-Bjl6zEeo.js";import"./index-DTKxd2xi.js";import"./useControlled-DrJNWWi-.js";import"./useId-Dl5Lr_f7.js";import"./useIsFocusVisible-DSE28IXe.js";import"./Popper-BEuA7c-9.js";import"./uniqueId-CZZxuA8y.js";import"./toString-BOPBFrFs.js";import"./isObjectLike-B2aI8r_K.js";import"./isArray-Dxzbedgu.js";import"./isSymbol-UPKfwsd0.js";import"./times-uUhR8ai2.js";import"./_baseTimes-36S_kd0L.js";import"./identity-DKeuBCMA.js";import"./toInteger-cOPt_qUD.js";import"./fetchWithExponentialTimeout-CXmnpl-T.js";import"./useQuery-DtswAvya.js";import"./utils-CwLPV75P.js";import"./Link-C2X9bszK.js";import"./Collapse-zM_t4339.js";import"./isNil-BtYaoqDt.js";import"./_Uint8Array-CNETH7XA.js";import"./_baseIsEqual-UnDsdCOv.js";import"./_getTag-B1tLmQft.js";import"./tinycolor-Begke6kS.js";import"./Fade-DGqyTv5e.js";import"./Skeleton-BZhHyFlz.js";import"./inputBaseClasses-C_hlAuoX.js";import"./calculateFriendlyFileSize-BMa6rFxO.js";import"./CheckCircleTwoTone-DaGpdtOL.js";import"./InfoTwoTone-D_LpKHwl.js";import"./useMutation-a2O88IgO.js";import"./isEqual-CycnANg8.js";import"./chunk-AYJ5UCUI-T8nVnVS8.js";import"./cloneDeep-DnuAzlve.js";import"./_initCloneObject-D8hJZdZ8.js";import"./merge-CsgEdur4.js";import"./util-CBb5T76a.js";import"./LayersTwoTone-Cox2COo8.js";import"./ContentCopyTwoTone-DpJ3sTrt.js";import"./HelpOutlineTwoTone-B8I1ewbD.js";import"./ErrorOutlined-CeY8g0k_.js";import"./GetAppTwoTone-DUhLpM7o.js";import"./InfoOutlined-VDAhc_tz.js";import"./DeleteTwoTone-CdnL2i3t.js";import"./ConfirmationDialog-DuD_jAal.js";import"./DialogBase-SgYHzfnt.js";import"./Close-DSpF_QyO.js";import"./createSvgIcon-B--pfNQZ.js";import"./createChainedFunction-BO_9K8Jh.js";import"./debounce-Be36O1Ab.js";import"./isMuiElement-U1oTOXEj.js";import"./ownerWindow-HkKU3E4x.js";import"./HelpPopover-Bfjk2SzV.js";import"./MarkdownPopover-DAwlTGAW.js";import"./LightTooltip-DCEzN9OI.js";import"./MarkdownSynapse-BtffcBq4.js";import"./SkeletonButton-B4kx90K3.js";import"./SkeletonInlineBlock-DkNe9F_c.js";import"./SkeletonTable-DeB5o58L.js";import"./SkeletonParagraph-O4k3IaE2.js";import"./DialogTitle-D1JBe5yR.js";import"./DialogContent-OOHk66y5.js";import"./Dialog-D6pEDzg2.js";import"./Modal-BpgqcaKB.js";import"./getScrollbarSize-Bqq2hMjQ.js";import"./Backdrop-CnI61w8e.js";import"./DateFormatter-CT-FGIKK.js";import"./localizedFormat-BFUxG7Rd.js";import"./UserBadge-BPkFf80D.js";import"./Popover-VwZrY-C2.js";import"./ToastMessage-C8ChTVd1.js";import"./ButtonBase-BX3py27C.js";import"./CSSTransition-CRIq4W69.js";import"./Avatar-BDU8sH8b.js";import"./Chip-D0aUGYWQ.js";import"./getThemeProps-DrtVxYpm.js";import"./useFormControl-C_IJic7Z.js";import"./formControlState-Dq1zat_P.js";import"./Input-lqlmT1bo.js";import"./FormControl-CxxLNTXs.js";import"./Close-CLUvZd8_.js";import"./MenuList-BdH5h1F4.js";import"./List-DZg-6MEU.js";import"./dividerClasses-CKAP4AHz.js";import"./useMobilePicker-CPN7_Qtb.js";import"./useThemeProps-DVuTFGPc.js";import"./index-Chjiymov.js";import"./InputAdornment-CqaVtigN.js";import"./useMediaQuery-Cihi_4_c.js";import"./ListItem-umxPASqE.js";import"./listItemButtonClasses-B_7vouOj.js";import"./Tabs-B2ue2VFF.js";import"./KeyboardArrowRight-CNZNHJHl.js";import"./FormLabel-DwzYRbVO.js";import"./_stringToArray-N8cAV6t0.js";import"./_baseSlice-F8doVSIJ.js";const Ae=e=>{const[r,n]=l.useState(e);return{list:r,handleListChange:u=>a=>{const d=[...r];d[u]=a,n(d)},handleListRemove:u=>()=>{const a=r.filter((d,c)=>u!==c);n(a)},appendToList:(...u)=>{const a=[...r];a.push(...u),n(a)},setList:n}},st=nt(t.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddBox");function H({evaluationId:e,entityId:r,onDeleteSuccess:n,onSaveSuccess:i}){if(e&&r)throw new Error("please use either evaluationId or entityId but not both");const{accessToken:o}=ne(),[s,u]=l.useState(),[a,d]=l.useState(!1);l.useEffect(()=>{s&&d(!1)},[s]);const[c,x]=l.useState(""),[j,b]=l.useState(""),[m,v]=l.useState(""),[g,E]=l.useState(""),[p,w]=l.useState({contentSource:r});l.useEffect(()=>{x(p.name??""),b(p.description??""),v(p.submissionInstructionsMessage??""),E(p.submissionReceiptMessage??"")},[p]),l.useEffect(()=>{e&&(u(void 0),N.getEvaluation(e,o).then(f=>{w(f)}).catch(f=>u(f)))},[e,o]);const T=()=>{u(void 0),d(!1);const f={...p,name:c,description:j,submissionInstructionsMessage:m,submissionReceiptMessage:g};(f.id?N.updateEvaluation(f,o):N.createEvaluation(f,o)).then(I=>{w(I),d(!0),i&&i(I.id)}).catch(I=>u(I))},L=p!=null&&p.id?()=>{u(void 0),N.deleteEvaluation(p.id,o).then(n).catch(f=>u(f))}:void 0;return t.jsxs("div",{className:"evaluation-editor",children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("h4",{children:[p.id?"Edit":"Create"," Evaluation Queue"]}),t.jsx(ut,{onClick:T,onDelete:L})]}),t.jsxs(He,{gap:2,children:[t.jsx(C,{label:"Name",fullWidth:!0,value:c,onChange:f=>x(f.target.value)}),t.jsx(C,{label:"Description",fullWidth:!0,multiline:!0,value:j,rows:2,onChange:f=>b(f.target.value)}),t.jsx(C,{fullWidth:!0,label:"Submission Instructions",value:m,multiline:!0,rows:2,onChange:f=>v(f.target.value)}),t.jsx(C,{label:"Submission Receipt Message",fullWidth:!0,value:g,onChange:f=>E(f.target.value)}),(p==null?void 0:p.createdOn)&&t.jsx(ze,{userId:p.ownerId,date:new Date(p.createdOn)}),s&&t.jsx(ie,{error:s}),a&&t.jsx(ae,{className:"save-success-alert",severity:"success",onClose:()=>d(!1),sx:{marginBottom:"20px"},children:"Successfully saved."}),t.jsx(y,{sx:{mb:3,alignSelf:"flex-end"},children:t.jsx(R,{variant:"contained",color:"primary",className:"save-button",onClick:T,children:"Save"})})]})]})}function ut({onClick:e,onDelete:r}){const[n,i]=l.useState(!1),[o,s]=l.useState(null),u=!!o,a=c=>{s(c.currentTarget)},d=()=>{s(null)};return t.jsxs(t.Fragment,{children:[r&&t.jsx(Te,{title:"Delete Evaluation Queue",content:"Are you sure you want to delete this Evaluation Queue?",open:n,confirmButtonText:"Delete",onConfirm:()=>{r(),i(!1)},onConfirmCallbackArgs:[],onCancel:()=>{i(!1)},confirmButtonColor:"error"}),t.jsx(k,{onClick:a,children:t.jsx(oe,{icon:"verticalEllipsis",wrap:!1})}),t.jsxs(_e,{anchorEl:o,open:u,onClose:d,slotProps:{paper:{sx:{minWidth:"120px"}}},children:[t.jsx(q,{onClick:()=>{d(),e()},children:"Save"}),r&&t.jsx(Ne,{}),r&&t.jsx(q,{onClick:()=>{d(),i(!0)},children:"Delete"})]})]})}try{H.displayName="EvaluationEditor",H.__docgenInfo={description:"Edits basic properties of an Evaluation",displayName:"EvaluationEditor",props:{evaluationId:{defaultValue:null,description:"Use if UPDATING an existing Evaluation. Id of the evaluation to edit",name:"evaluationId",required:!1,type:{name:"string"}},entityId:{defaultValue:null,description:"Use if CREATING a new Evaluation. Id of the Entity that will be associated with the Evaluation",name:"entityId",required:!1,type:{name:"string"}},onDeleteSuccess:{defaultValue:null,description:"Callback after successful deletion of the Evaluation",name:"onDeleteSuccess",required:!0,type:{name:"() => void"}},onSaveSuccess:{defaultValue:null,description:"Callback after successful save of the Evaluation",name:"onSaveSuccess",required:!1,type:{name:"(evaluationId: string) => void"}}}}}catch{}var W={exports:{}},F,me;function dt(){if(me)return F;me=1;var e=1;function r(){return e=(e*9301+49297)%233280,e/233280}function n(i){e=i}return F={nextValue:r,seed:n},F}var U,pe;function M(){if(pe)return U;pe=1;var e=dt(),r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",n,i,o;function s(){o=!1}function u(m){if(!m){n!==r&&(n=r,s());return}if(m!==n){if(m.length!==r.length)throw new Error("Custom alphabet for shortid must be "+r.length+" unique characters. You submitted "+m.length+" characters: "+m);var v=m.split("").filter(function(g,E,p){return E!==p.lastIndexOf(g)});if(v.length)throw new Error("Custom alphabet for shortid must be "+r.length+" unique characters. These characters were not unique: "+v.join(", "));n=m,s()}}function a(m){return u(m),n}function d(m){e.seed(m),i!==m&&(s(),i=m)}function c(){n||u(r);for(var m=n.split(""),v=[],g=e.nextValue(),E;m.length>0;)g=e.nextValue(),E=Math.floor(g*m.length),v.push(m.splice(E,1)[0]);return v.join("")}function x(){return o||(o=c(),o)}function j(m){var v=x();return v[m]}function b(){return n||r}return U={get:b,characters:a,seed:d,lookup:j,shuffled:x},U}var G,fe;function lt(){if(fe)return G;fe=1;var e=typeof window=="object"&&(window.crypto||window.msCrypto),r;return!e||!e.getRandomValues?r=function(n){for(var i=[],o=0;o<n;o++)i.push(Math.floor(Math.random()*256));return i}:r=function(n){return e.getRandomValues(new Uint8Array(n))},G=r,G}const ct=Je(Xe);var K,he;function mt(){if(he)return K;he=1;var e=M(),r=lt(),n=ct.customRandom;function i(o){for(var s=0,u,a="";!u;)a=a+n(e.get(),1,r)(),u=o<Math.pow(16,s+1),s++;return a}return K=i,K}var $,ve;function pt(){if(ve)return $;ve=1;var e=mt();M();var r=1567752802062,n=7,i,o;function s(u){var a="",d=Math.floor((Date.now()-r)*.001);return d===o?i++:(i=0,o=d),a=a+e(n),a=a+e(u),i>0&&(a=a+e(i)),a=a+e(d),a}return $=s,$}var Y,Se;function ft(){if(Se)return Y;Se=1;var e=M();function r(n){if(!n||typeof n!="string"||n.length<6)return!1;var i=new RegExp("[^"+e.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!i.test(n)}return Y=r,Y}var Z,xe;function ht(){return xe||(xe=1,Z=0),Z}var ge;function vt(){return ge||(ge=1,function(e){var r=M(),n=pt(),i=ft(),o=ht()||0;function s(c){return r.seed(c),e.exports}function u(c){return o=c,e.exports}function a(c){return c!==void 0&&r.characters(c),r.shuffled()}function d(){return n(o)}e.exports=d,e.exports.generate=d,e.exports.seed=s,e.exports.worker=u,e.exports.characters=a,e.exports.isValid=i}(W)),W.exports}var z,Ee;function St(){return Ee||(Ee=1,z=vt()),z}var xt=St();const De=Oe(xt);var D={exports:{}},gt=D.exports,ye;function Et(){return ye||(ye=1,function(e,r){(function(n,i){e.exports=i()})(gt,function(){return function(n,i){i.prototype.isSameOrAfter=function(o,s){return this.isSame(o,s)||this.isAfter(o,s)}}})}(D)),D.exports}var yt=Et();const bt=Oe(yt);function Q({onSave:e,onDelete:r}){const[n,i]=l.useState(!1),[o,s]=l.useState(null),u=!!o,a=c=>{s(c.currentTarget)},d=()=>{s(null)};return t.jsxs(t.Fragment,{children:[t.jsx(Te,{title:"Delete Evaluation Round",content:"Are you sure you want to delete this Evaluation Round?",open:n,confirmButtonText:"Delete",onConfirm:()=>{r(),i(!1)},onConfirmCallbackArgs:[],onCancel:()=>{i(!1)},confirmButtonColor:"error"}),t.jsx(k,{onClick:a,"aria-label":"Round Options",children:t.jsx(oe,{icon:"verticalEllipsis",wrap:!1})}),t.jsxs(_e,{"aria-label":"Round Options",anchorEl:o,open:u,onClose:d,slotProps:{paper:{sx:{minWidth:"120px"}}},children:[t.jsx(q,{onClick:()=>{d(),e()},children:"Save"}),t.jsx(Ne,{}),t.jsx(q,{onClick:()=>{d(),i(!0)},children:"Delete"})]})]})}try{Q.displayName="EvaluationRoundEditorDropdown",Q.__docgenInfo={description:"",displayName:"EvaluationRoundEditorDropdown",props:{onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"() => void"}}}}}catch{}const ke=(e,r)=>({reactListKey:r??De.generate(),evaluationId:e.evaluationId,id:e.id,etag:e.etag,roundStart:e.roundStart,roundEnd:e.roundEnd,totalSubmissionLimit:jt(e.limits),otherLimits:It(e.limits)}),jt=e=>(e||[]).filter(r=>r.limitType==="TOTAL").reduce((r,n)=>n.maximumSubmissions.toString(),""),It=e=>(e||[]).filter(r=>r.limitType!=="TOTAL").reduce((r,n)=>(r.push({type:n.limitType,maxSubmissionString:n.maximumSubmissions.toString()}),r),[]),qe={DAILY:"Daily Limit",WEEKLY:"Weekly Limit",MONTHLY:"Monthly Limit"};function J({limitInput:e,allSelectedTypes:r,onChange:n}){return t.jsxs(t.Fragment,{children:[t.jsxs(tt,{className:"limit-type",children:[t.jsx(rt,{children:"Limit Type"}),t.jsx(Qe,{fullWidth:!0,native:!0,value:e.type,onChange:i=>{n({type:i.target.value,maxSubmissionString:e.maxSubmissionString})},children:Object.entries(qe).map(([i,o])=>t.jsx("option",{value:i,disabled:r.has(i)&&i!==e.type,children:o},i))})]}),t.jsx(C,{fullWidth:!0,className:"limit-input",label:"Maximum Submissions",inputProps:{pattern:"[0-9]*"},value:e.maxSubmissionString,onChange:i=>{n({type:e.type,maxSubmissionString:i.target.value})}})]})}try{J.displayName="EvaluationRoundLimitOptions",J.__docgenInfo={description:"",displayName:"EvaluationRoundLimitOptions",props:{limitInput:{defaultValue:null,description:"",name:"limitInput",required:!0,type:{name:"EvaluationRoundLimitInput"}},allSelectedTypes:{defaultValue:null,description:"",name:"allSelectedTypes",required:!0,type:{name:"Set<EvaluationRoundLimitType>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(limitInput: EvaluationRoundLimitInput) => void"}}}}}catch{}const Me=Object.keys(qe),Ct=e=>Me.find(r=>!e.has(r));function X({limitInputs:e,handleChange:r,handleDeleteLimit:n,onAddNewLimit:i}){const o=new Set(e.map(u=>u.type)),s=l.useCallback(()=>{i({type:Ct(o),maxSubmissionString:""})},[i,o]);return l.useEffect(()=>{e.length===0&&s()},[e,s]),t.jsx("div",{"data-testid":"EvaluationRoundLimitOptionsList",className:"advanced-limits-grid",children:e.map((u,a)=>t.jsxs(l.Fragment,{children:[t.jsx(J,{limitInput:u,allSelectedTypes:o,onChange:r(a)}),t.jsx(k,{size:"small",color:"primary","aria-label":"Remove",className:"remove-button",onClick:n(a),sx:{height:"40px",width:"40px"},children:t.jsx(Ze,{})}),a===e.length-1&&e.length<Me.length&&t.jsx(k,{size:"small",color:"primary","aria-label":"Add",onClick:s,className:"add-button",sx:{height:"40px",width:"40px"},children:t.jsx(st,{})})]},u.type))})}try{X.displayName="EvaluationRoundLimitOptionsList",X.__docgenInfo={description:"",displayName:"EvaluationRoundLimitOptionsList",props:{limitInputs:{defaultValue:null,description:"",name:"limitInputs",required:!0,type:{name:"EvaluationRoundLimitInput[]"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(index: number) => (limitInput: EvaluationRoundLimitInput) => void"}},handleDeleteLimit:{defaultValue:null,description:"",name:"handleDeleteLimit",required:!0,type:{name:"(index: number) => () => void"}},onAddNewLimit:{defaultValue:null,description:"",name:"onAddNewLimit",required:!0,type:{name:"(limit: EvaluationRoundLimitInput) => void"}}}}}catch{}S.extend(et);S.extend(bt);const Lt=(e,r)=>{let n,i,o;const s=S();return s.isSameOrAfter(e)?s.isBefore(r)?(n="status-in-progress",i={icon:"sync"},o="IN PROGRESS"):(n="status-completed",i={icon:"clipboardCheck"},o="COMPLETED"):(n="status-not-yet-started",i=void 0,o="NOT YET STARTED"),t.jsx("div",{className:n,children:t.jsxs("div",{className:"status",children:[i&&t.jsx(oe,{...i}),t.jsx("span",{children:o})]})})},Rt=(e,r,n,i,o)=>{const s=[];if(i){const u=Number(i);if(Number.isNaN(u))throw TypeError("Total Submission is not an integer");s.push({limitType:"TOTAL",maximumSubmissions:u})}return o.forEach(u=>{if(u.maxSubmissionString){const a=Number(u.maxSubmissionString);if(Number.isNaN(a))throw TypeError(u.type+" Limit is not an integer");s.push({limitType:u.type,maximumSubmissions:a})}}),{id:e.id,etag:e.etag,evaluationId:e.evaluationId,roundStart:S.utc(r).toJSON(),roundEnd:S.utc(n).toJSON(),limits:s}};function be(e,r){if(r==null)return null;switch(r){case"disablePast":return`${at(e)} date cannot be in the past`;case"invalidDate":default:return"Invalid date"}}function ee({evaluationRoundInput:e,onSave:r,onDelete:n}){const{accessToken:i}=ne(),[o,s]=l.useState(),[u,a]=l.useState(!1);l.useEffect(()=>{o&&a(!1)},[o]);const[d,c]=l.useState(e.roundStart?S(e.roundStart):null),[x,j]=l.useState(e.roundEnd?S(e.roundEnd):null),[b,m]=l.useState(e.totalSubmissionLimit),[v,g]=l.useState(!1),[E,p]=l.useState(null),[w,T]=l.useState(null),{list:L,handleListRemove:f,handleListChange:se,appendToList:I}=Ae(e.otherLimits),Ve=h=>{const _=f(h);return()=>{_(),L.length===1&&g(!1)}},ue=()=>{a(!1);let h;try{h=Rt(e,d,x,b,L)}catch(_){s(_)}h&&(h.id?Ue(h,i):Ge(h,i)).then(V=>{const Pe=ke(V,e.reactListKey);s(void 0),a(!0),r(Pe)}).catch(V=>s(V))},Be=()=>{e.id?Ke(e.evaluationId,e.id,i).then(()=>n()).catch(h=>s(h)):n()},de=S().isSameOrAfter(e.roundStart);return t.jsx("div",{className:"evaluation-round-editor",children:t.jsx(it,{children:t.jsx(ot,{sx:{p:3},children:t.jsxs("form",{"aria-label":"Evaluation Round Form",children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("h5",{children:["ROUND STATUS",e.id&&" ("+e.id+")"]}),t.jsx(Q,{onDelete:Be,onSave:ue})]}),t.jsx(y,{className:"round-status",sx:{mb:2},children:Lt(e.roundStart,e.roundEnd)}),t.jsx("h5",{children:"DURATION"}),t.jsxs(P,{container:!0,children:[t.jsx(P,{item:!0,xs:6,children:t.jsx(ce,{label:"Round Start",value:d,onChange:c,onError:h=>p(h),disabled:de,disablePast:!de,slotProps:{textField:{helperText:be("start",E)}}})}),t.jsx(P,{item:!0,xs:6,children:t.jsx(ce,{label:"Round End",value:x,onChange:j,onError:h=>T(h),disablePast:!S(x).isSame(e.roundEnd),slotProps:{textField:{helperText:be("end",w)}}})})]}),t.jsx("h5",{style:{marginTop:"20px"},children:"SUBMISSION LIMITS"}),t.jsx(C,{fullWidth:!0,label:"Total Submissions / Round",inputProps:{pattern:"[0-9]*"},value:b,onChange:h=>m(h.target.value),autoComplete:"new-password"}),t.jsx(y,{sx:{my:2},children:t.jsx(R,{variant:"outlined",color:"primary",size:"small",onClick:()=>g(!v),children:"Advanced Limits"})}),v&&t.jsx(X,{limitInputs:L,handleChange:se,handleDeleteLimit:Ve,onAddNewLimit:I}),o&&t.jsx(y,{sx:{my:3},children:t.jsx(ie,{error:o})}),u&&t.jsx(y,{sx:{my:3},children:t.jsx(ae,{className:"save-success-alert",severity:"success",onClose:()=>a(!1),sx:{mb:"20px"},children:"Successfully saved."})}),t.jsx(y,{sx:{mt:3,textAlign:"right"},children:t.jsx(R,{variant:"contained",color:"primary",onClick:ue,children:"Save"})})]})})})})}try{ee.displayName="EvaluationRoundEditor",ee.__docgenInfo={description:"",displayName:"EvaluationRoundEditor",props:{evaluationRoundInput:{defaultValue:null,description:"",name:"evaluationRoundInput",required:!0,type:{name:"EvaluationRoundInput"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(evaluationRound: EvaluationRoundInput) => void"}}}}}catch{}const wt=(e,r,n,i)=>{const o=[],s=u=>{$e(e,{nextPageToken:u},r).then(a=>{const d=a.page.map(c=>ke(c));o.push(...d),i(void 0),a.nextPageToken?s(a.nextPageToken):n(o)}).catch(a=>{i(a)})};s(void 0)};function te({evaluationId:e}){const{accessToken:r}=ne(),[n,i]=l.useState(),{list:o,appendToList:s,handleListChange:u,handleListRemove:a,setList:d}=Ae([]);return l.useEffect(()=>{wt(e,r,d,i)},[r,e]),n?t.jsx(ie,{error:n}):t.jsxs("div",{className:"evaluation-round-editor-list",children:[t.jsx("div",{className:"evaluation-rounds",children:o.map((c,x)=>t.jsx(ee,{evaluationRoundInput:c,onSave:u(x),onDelete:a(x)},c.reactListKey))}),t.jsx("div",{children:t.jsx(R,{className:"add-round-button",variant:"contained",color:"primary",onClick:()=>{s({reactListKey:De(),evaluationId:e,roundStart:"",roundEnd:"",totalSubmissionLimit:"",otherLimits:[]})},children:"Add Round"})})]})}try{te.displayName="EvaluationRoundEditorList",te.__docgenInfo={description:"Edits EvaluationsRounds for an Evaluation.",displayName:"EvaluationRoundEditorList",props:{evaluationId:{defaultValue:null,description:"id of the Evaluation containing EvaluationRounds to edit",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}function re({evaluationId:e,entityId:r,onDeleteSuccess:n}){const[i,o]=l.useState(e);return t.jsxs("div",{children:[t.jsx(H,{evaluationId:i,entityId:i?void 0:r,onDeleteSuccess:n,onSaveSuccess:o}),t.jsx("div",{className:"my-4",children:i?t.jsx(te,{evaluationId:i}):t.jsx(Tt,{})})]})}function Tt(){const[e,r]=l.useState(!1);return t.jsx("div",{"data-testid":"FakeEvaluationRoundEditorList",children:e?t.jsx(ae,{severity:"info",children:"Evaluation Rounds can be edited once the Evaluation has been created."}):t.jsx(R,{className:"add-round-button",variant:"contained",color:"primary",onClick:()=>{r(!0)},children:"Add Round"})})}try{re.displayName="EvaluationEditorPage",re.__docgenInfo={description:"Combined editor that allows editing an Evaluation's data and also it's associated rounds (once the Evaluation exists on Synapse)",displayName:"EvaluationEditorPage",props:{evaluationId:{defaultValue:null,description:"Use if UPDATING an existing Evaluation. Id of the evaluation to edit",name:"evaluationId",required:!1,type:{name:"string"}},entityId:{defaultValue:null,description:"Use if CREATING a new Evaluation. Id of the Entity that will be associated with the Evaluation",name:"entityId",required:!1,type:{name:"string"}},onDeleteSuccess:{defaultValue:null,description:"Callback after successful deletion of the Evaluation",name:"onDeleteSuccess",required:!0,type:{name:"() => void"}}}}}catch{}const Ti={title:"Synapse/Challenge/EvaluationEditorPage",component:re,args:{onDeleteSuccess:Ye()}},O={args:{entityId:"syn5585645"}},A={parameters:{stack:"mock",msw:{handlers:[...We(B),le.rest.get(`${B}/repo/v1/evaluation/:id`,async(e,r,n)=>r(n.status(200),n.json({id:"9614712",etag:"a2b871cb-faa4-471a-8c23-b917c77fecb2",name:"a",description:"b",ownerId:Fe.toString(),createdOn:"2021-03-02T22:16:14.552Z",contentSource:"syn5585645",submissionInstructionsMessage:"c",submissionReceiptMessage:"c"}))),le.rest.post(`${B}/repo/v1/evaluation/:id/round/list`,async(e,r,n)=>r(n.status(200),n.json({page:[{id:"259",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:"2022-11-27T08:00:00.000Z",roundEnd:"2022-11-30T08:00:00.000Z"},{id:"260",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:S().subtract(1,"day").toISOString(),roundEnd:S().add(2,"day").toISOString()},{id:"261",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:S().add(1,"week").toISOString(),roundEnd:S().add(2,"week").toISOString()}]})))]}},args:{evaluationId:"9614712"}};var je,Ie,Ce;O.parameters={...O.parameters,docs:{...(je=O.parameters)==null?void 0:je.docs,source:{originalSource:`{
  args: {
    entityId: 'syn5585645'
  }
}`,...(Ce=(Ie=O.parameters)==null?void 0:Ie.docs)==null?void 0:Ce.source}}};var Le,Re,we;A.parameters={...A.parameters,docs:{...(Le=A.parameters)==null?void 0:Le.docs,source:{originalSource:`{
  parameters: {
    stack: 'mock',
    msw: {
      handlers: [...getUserProfileHandlers(MOCK_REPO_ORIGIN), rest.get(\`\${MOCK_REPO_ORIGIN}/repo/v1/evaluation/:id\`, async (req, res, ctx) => {
        return res(ctx.status(200), ctx.json({
          id: '9614712',
          etag: 'a2b871cb-faa4-471a-8c23-b917c77fecb2',
          name: 'a',
          description: 'b',
          ownerId: MOCK_USER_ID.toString(),
          createdOn: '2021-03-02T22:16:14.552Z',
          contentSource: 'syn5585645',
          submissionInstructionsMessage: 'c',
          submissionReceiptMessage: 'c'
        }));
      }), rest.post(\`\${MOCK_REPO_ORIGIN}/repo/v1/evaluation/:id/round/list\`, async (req, res, ctx) => {
        return res(ctx.status(200), ctx.json({
          page: [
          // Ended
          {
            id: '259',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: '2022-11-27T08:00:00.000Z',
            roundEnd: '2022-11-30T08:00:00.000Z'
          },
          // Ongoing
          {
            id: '260',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: dayjs().subtract(1, 'day').toISOString(),
            roundEnd: dayjs().add(2, 'day').toISOString()
          },
          // Future
          {
            id: '261',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: dayjs().add(1, 'week').toISOString(),
            roundEnd: dayjs().add(2, 'week').toISOString()
          }]
        }));
      })]
    }
  },
  args: {
    evaluationId: '9614712'
  }
}`,...(we=(Re=A.parameters)==null?void 0:Re.docs)==null?void 0:we.source}}};const _i=["Entity","Evaluation"];export{O as Entity,A as Evaluation,_i as __namedExportsOrder,Ti as default};
