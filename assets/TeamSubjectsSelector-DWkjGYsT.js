import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{R as g}from"./VerificationSubmission-NmfK1W18.js";import{r as T}from"./index-DFgyNqO_.js";import{I as w,A as O}from"./IconSvg-BABjtRTz.js";import"./useFiles-CvNgPb5D.js";import"./StringUtils-Dsx1COFf.js";import"./OrientationBanner-Kqq2yAK3.js";import{u as M}from"./useTeam-B40duzP8.js";import{T as L}from"./TeamBadge-BasCzaZK.js";import{S as x}from"./Stack-8Gefz3Vx.js";import{E as B}from"./calculateFriendlyFileSize-BxI9cL49.js";import{T as b}from"./Typography-CBiSjxZP.js";import{S as C}from"./Skeleton-Cz687Kkk.js";import{n as U}from"./useQuery-BXrbdaCG.js";import{B as k}from"./Box-C57trPRa.js";import{I as q}from"./IconButton-DMY6WtAo.js";import{I as P}from"./InputLabel-DdjoRFwB.js";import{T as V}from"./TextField-DPTPirbF.js";import{B as G}from"./Button-BWqBW9qC.js";import{T as $}from"./Tooltip-DH1bm0aC.js";import{H as F}from"./HelpOutlineTwoTone-CL6YwimB.js";import{A as H}from"./Alert-BfRhTEiC.js";function _(r){const{teamId:s}=r,{data:a,isLoading:m,error:o}=M(s);return o?e.jsxs(x,{direction:"row",role:"alert",sx:{gap:"5px",alignItems:"center"},children:[e.jsx(B,{color:"error"}),e.jsx(b,{variant:"smallText1",color:"error",children:(o==null?void 0:o.reason)||`Error: ${s}`})]}):m||!a?e.jsx(C,{width:125,height:30}):e.jsx(L,{teamId:a.id,teamName:a.name})}try{_.displayName="TeamBadgeOrError",_.__docgenInfo={description:"",displayName:"TeamBadgeOrError",props:{teamId:{defaultValue:null,description:"",name:"teamId",required:!0,type:{name:"string"}}}}}catch{}const f=r=>`Team ${r} has already been added to this AR.`,E=r=>`Parsing errors encountered. Invalid Team ID: ${r}`,Y="No teams selected.",W="Remove from Access Requirement",j="Enter Team IDs (i.e. 123, 456)",y="";function A(r){const{subjects:s,onUpdate:a,onUpdateTeamIDsTextbox:m=U}=r,[o,S]=T.useState(y),[I,l]=T.useState(null),n=T.useMemo(()=>s.filter(t=>t.type===g.TEAM?t:null),[s]),h=t=>{S(t),m(t)},R=t=>{const p=n.filter(i=>i.id!==t);a(p)},D=t=>{const p=t==null?void 0:t.split(",").map(c=>c.trim()),i=[...new Set(p)];if(i&&i.length>0){const c=[...n];for(const d of i){const v=/^\d+$/.test(d),N=n.some(u=>u.id===d);if(v)if(N){l(f(d));return}else{const u={id:d,type:g.TEAM};c.push(u)}else{l(E(d));return}}h(y),a(c)}l(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(k,{sx:{display:"flex",flexWrap:"wrap",gap:"0px 15px",pb:"10px"},children:[n.length===0&&e.jsx(b,{variant:"body1Italic",sx:{pb:2},children:Y}),n.map(t=>e.jsxs(x,{direction:"row","data-testid":"selected-team",sx:{alignItems:"center",pb:1},children:[e.jsx(_,{teamId:t.id}),e.jsx(q,{"aria-label":W,onClick:()=>R(t.id),sx:{"&:hover":{color:"error.main"}},children:e.jsx(w,{icon:"delete",fontSize:"inherit",wrap:!1})})]},t.id))]}),e.jsx(P,{htmlFor:"teamIDs",children:"Add Team IDs"}),e.jsxs(x,{direction:"row",sx:{gap:1,alignItems:"center",mb:2},children:[e.jsx(V,{id:"teamIDs",name:"teamIDs",placeholder:j,value:o,onChange:t=>h(t.target.value),fullWidth:!0}),e.jsx(G,{startIcon:e.jsx(O,{}),variant:"outlined",sx:{flexShrink:0,height:"53px"},onClick:()=>D(o),disabled:o==="",children:"Add Teams"}),e.jsx($,{title:j,placement:"right",children:e.jsx(F,{sx:{color:"grey.600"}})})]}),I&&e.jsx(H,{severity:"warning",children:I})]})}try{f.displayName="TEAM_ALREADY_SELECTED",f.__docgenInfo={description:"",displayName:"TEAM_ALREADY_SELECTED",props:{}}}catch{}try{E.displayName="TEAM_PARSING_ERROR",E.__docgenInfo={description:"",displayName:"TEAM_PARSING_ERROR",props:{}}}catch{}try{A.displayName="TeamSubjectsSelector",A.__docgenInfo={description:"",displayName:"TeamSubjectsSelector",props:{subjects:{defaultValue:null,description:"",name:"subjects",required:!0,type:{name:"RestrictableObjectDescriptor[]"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(subjects: RestrictableObjectDescriptor[]) => void"}},onUpdateTeamIDsTextbox:{defaultValue:null,description:"",name:"onUpdateTeamIDsTextbox",required:!1,type:{name:"(value: string) => void"}}}}}catch{}export{A as T};
