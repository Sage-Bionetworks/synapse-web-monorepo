import{j as P}from"./jsx-runtime-Du8NFWEI.js";import{_ as ce}from"./emotion-use-insertion-effect-with-fallbacks.browser.esm-Bpxk95mn.js";import{r as n}from"./index-Dl6G-zuu.js";import{_ as fe,a as p,h as Se,b as I,c as me,u as ve,S as ge,d as he}from"./Select-49a62830.esm-Cvip1TGN.js";import"./index-D1_ZHIBm.js";import{k as Oe,p as z}from"./SynapseClient-D4M9LQNp.js";import"./OrientationBanner-BV5RFxzC.js";import"./getEndpoint-CjoHA800.js";import{d as _e}from"./useAccessRequirements-DaFxdnki.js";import{S as ye}from"./Skeleton-C2B0Utez.js";var Ie=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Ce(t){var r=t.defaultOptions,e=r===void 0?!1:r,d=t.cacheOptions,l=d===void 0?!1:d,c=t.loadOptions;t.options;var i=t.isLoading,C=i===void 0?!1:i,h=t.onInputChange,a=t.filterOption,O=a===void 0?null:a,u=fe(t,Ie),S=u.inputValue,o=n.useRef(void 0),_=n.useRef(!1),H=n.useState(Array.isArray(e)?e:void 0),$=p(H,2),J=$[0],j=$[1],K=n.useState(typeof S<"u"?S:""),E=p(K,2),N=E[0],A=E[1],Q=n.useState(e===!0),w=p(Q,2),U=w[0],m=w[1],X=n.useState(void 0),B=p(X,2),x=B[0],L=B[1],Y=n.useState([]),D=p(Y,2),Z=D[0],V=D[1],ee=n.useState(!1),k=p(ee,2),te=k[0],y=k[1],ne=n.useState({}),M=p(ne,2),v=M[0],T=M[1],ae=n.useState(void 0),G=p(ae,2),se=G[0],re=G[1],oe=n.useState(void 0),W=p(oe,2),ie=W[0],ue=W[1];l!==ie&&(T({}),ue(l)),e!==se&&(j(Array.isArray(e)?e:void 0),re(e)),n.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var b=n.useCallback(function(g,f){if(!c)return f();var s=c(g,f);s&&typeof s.then=="function"&&s.then(f,function(){return f()})},[c]);n.useEffect(function(){e===!0&&b(N,function(g){_.current&&(j(g||[]),m(!!o.current))})},[]);var pe=n.useCallback(function(g,f){var s=Se(g,f,h);if(!s){o.current=void 0,A(""),L(""),V([]),m(!1),y(!1);return}if(l&&v[s])A(s),L(s),V(v[s]),m(!1),y(!1);else{var le=o.current={};A(s),m(!0),y(!x),b(s,function(R){_&&le===o.current&&(o.current=void 0,m(!1),L(s),V(R||[]),y(!1),T(R?I(I({},v),{},me({},s,R)):v))})}},[l,b,x,v,h]),de=te?[]:N&&x?Z:J||[];return I(I({},u),{},{options:de,isLoading:U||C,onInputChange:pe,filterOption:O})}var Ae=n.forwardRef(function(t,r){var e=Ce(t),d=ve(e);return n.createElement(ge,ce({ref:r},d))}),xe=Ae;function q(t,r){return t.toString()===r?r:`${r} (${t})`}const Le={Control:t=>P.jsx(he.Control,{...t,className:`form-control ${t.className??""}`})};function F(t){const{inputId:r,initialId:e,onChange:d,placeholder:l}=t,{accessToken:c}=Oe(),{data:i,isLoading:C}=_e(e,{enabled:!!e});async function h(a){var S;const O=parseInt(a);let u;return O&&(u=[await z.getAccessRequirementById(c,O)]),u||(u=(S=await z.searchAccessRequirements(c,{nameContains:a}))==null?void 0:S.results),(u==null?void 0:u.map(o=>({id:o.id.toString(),value:o.id.toString(),label:q(o.id,o.name)})))??[]}return e&&C?P.jsx(ye,{width:"100%"}):P.jsx(xe,{className:"bootstrap-4-backport AsyncSelect",defaultInputValue:e?q(e,(i==null?void 0:i.name)??e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:q(e,(i==null?void 0:i.name)??e.toString())}]:!0,inputId:r,cacheOptions:!0,isClearable:!0,styles:{control:a=>({...a,display:"flex !important"}),input:a=>({...a,input:{gridArea:"1 / 2 / 4 / 4 !important"}})},components:Le,loadOptions:h,onChange:a=>{d(a==null?void 0:a.id.toString())},placeholder:l})}try{F.displayName="AccessRequirementSearchBox",F.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string | undefined) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch{}export{F as A};
