{"version":3,"file":"QueryCount-c2ff7b3c.js","sources":["../../src/components/QueryCount/QueryCount.tsx"],"sourcesContent":["import React from 'react'\nimport { SynapseConstants } from '../../utils'\nimport { parseEntityIdFromSqlStatement } from '../../utils/functions/SqlFunctions'\nimport useGetQueryResultBundle from '../../synapse-queries/entity/useGetQueryResultBundle'\nimport { Query, QueryBundleRequest } from '@sage-bionetworks/synapse-types'\n\nexport type QueryCountProps = {\n  query: Query\n  parens?: boolean\n}\n\n/**\n * Shows the total count of results for a table query.\n */\nexport function QueryCount(props: QueryCountProps) {\n  const { query, parens } = props\n  const entityId = parseEntityIdFromSqlStatement(query.sql)\n\n  const request: QueryBundleRequest = {\n    concreteType: 'org.sagebionetworks.repo.model.table.QueryBundleRequest',\n    query: query,\n    entityId,\n    partMask: SynapseConstants.BUNDLE_MASK_QUERY_COUNT,\n  }\n\n  const { data: queryResult } = useGetQueryResultBundle(request)\n\n  const localCount = queryResult?.queryCount?.toLocaleString()\n  /* https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString#Using_toLocaleString */\n  return (\n    <React.Fragment>\n      {localCount && (parens ? `(${localCount})` : localCount)}\n    </React.Fragment>\n  )\n}\nexport default QueryCount\n"],"names":["QueryCount","props","query","parens","entityId","parseEntityIdFromSqlStatement","request","SynapseConstants.BUNDLE_MASK_QUERY_COUNT","queryResult","useGetQueryResultBundle","localCount","_a","jsx","React"],"mappings":"wTAcO,SAAAA,EAAAC,EAAA,OACL,KAAA,CAAA,MAAAC,EAAA,OAAAC,CAAA,EAAAF,EACAG,EAAAC,EAAAH,EAAA,GAAA,EAEAI,EAAA,CAAoC,aAAA,0DACpB,MAAAJ,EACd,SAAAE,EACA,SAAAG,CAC2B,EAG7B,CAAA,KAAAC,CAAA,EAAAC,EAAAH,CAAA,EAEAI,GAAAC,EAAAH,GAAA,YAAAA,EAAA,aAAA,YAAAG,EAAA,iBAEA,OAAAC,EAAAC,EAAA,SAAA,CAAA,SAAAH,IAAAP,EAAA,IAAAO,CAAA,IAAAA,EAAA,CAAA,CAKF"}