import{at as C,dy as O,d8 as k,de as U,r as b,j as e,X as _,_ as E,V as w,c4 as V,v as L}from"./iframe-DNJeJ5iA.js";import{f as M,e as B,p as D}from"./useAccessRequirements-BJL84sZ9.js";import{M as I}from"./MarkdownSynapse-DzSnHMfD.js";import{R as G,a as f}from"./RequirementItem-Cad26Shu.js";function v(A){const{accessRequirement:s,onHide:g}=A,{isAuthenticated:c}=C(),o=O(s),{data:r}=k(),{data:i}=U(),d=c&&i&&!o&&s.isCertifiedUserRequired&&!i.isCertified,l=c&&i&&!o&&s.isValidatedProfileRequired&&!i.isVerified,{data:u,isLoading:x}=M(String(s.id)),m=u==null?void 0:u.isApproved,{data:t}=B(s.id.toString()),[p,y]=b.useState(!1),{mutate:h,isPending:T,error:R}=D({onError:n=>{console.error("Error creating access approval: ",n)}}),j=()=>{const n={requirementId:s==null?void 0:s.id,submitterId:r==null?void 0:r.ownerId,accessorId:r==null?void 0:r.ownerId,state:L.APPROVED};h(n)};let a=e.jsx(e.Fragment,{});o&&s.termsOfUse?a=e.jsx(I,{markdown:s.termsOfUse}):t&&(a=e.jsx(I,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType}));let q;if(c&&!m){let n="I Accept Terms of Use",S=!1;(d||l)&&(S=!0,n=`You must ${d?"be certified":""}${d&&l?" and ":""}${l?"have a validated user profile":""} to accept`),q=[{variant:"outlined",onClick:j,children:n,disabled:T||S},{variant:"text",onClick:g,children:"I do not accept"}]}return e.jsxs(G,{"data-testid":"SelfSignAccessRequirementItem",status:x?f.LOADING:m?f.COMPLETE:f.LOCKED,actions:q,children:[m?e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"body1",children:["You have accepted the terms of use."," ",e.jsx(E,{role:"button",onClick:()=>y(!p),children:p?"Hide Terms":"View Terms"})]}),p&&e.jsx(w,{sx:{my:1},children:a})]}):a,R&&e.jsx(V,{severity:"error",children:R.reason})]})}try{v.displayName="SelfSignAccessRequirementItem",v.__docgenInfo={description:`Renders a {@link RequirementItem} for an self-sign Access Requirement, including {@link SelfSignAccessRequirement} or
{@link TermsOfUseAccessRequirement}.

For {@link ManagedACTAccessRequirement }s, see {@link RequestDataAccess }`,displayName:"SelfSignAccessRequirementItem",props:{accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}}}catch{}export{v as S};
