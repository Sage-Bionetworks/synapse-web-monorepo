import{j as e}from"./jsx-runtime-Du8NFWEI.js";import{r as t}from"./index-Dl6G-zuu.js";import{L as E}from"./react-router-dom-CYmLeRRT.js";import{k as A,I as F,M as L}from"./SynapseClient-BQQFMd7R.js";import"./OrientationBanner-BV5RFxzC.js";import"./getEndpoint-CjoHA800.js";import{d as g}from"./ToastMessage-CyCjbTLE.js";import{u as R}from"./useChangePasswordFormState-BrPYIFRK.js";import{M as w}from"./Alert-HJYNNEvY.js";import{M as n}from"./TextField-BYBL0P0S.js";import{B as M}from"./Button-mb55Lwfk.js";import{L as W}from"./Link-EkQ0dGSu.js";const f="Your password was successfully changed.";function h(u){const{redirectToRoute:l}=u,[i,x]=t.useState(""),[o,P]=t.useState(""),[d,C]=t.useState(""),[a,m]=t.useState(""),{accessToken:y}=A(),c=!!y,{data:r,isLoading:j}=F({enabled:c});t.useEffect(()=>{r&&a==""&&m(r.userName)},[a,r,r==null?void 0:r.userName]);const{promptForTwoFactorAuth:S,TwoFactorAuthPrompt:v,successfullyChangedPassword:_,isPending:T,handleChangePasswordWithCurrentPassword:b,error:p}=R(),N=s=>{s.preventDefault(),o!==d?g("Passwords do not match.","danger"):b(a,i,o)};return _?l?(g(f,"success"),e.jsx(L,{to:l})):e.jsx(w,{severity:"success",children:f}):e.jsxs("div",{children:[S?e.jsx(v,{}):e.jsxs("form",{onSubmit:s=>{N(s)},children:[!c&&e.jsx(n,{required:!0,fullWidth:!0,autoFocus:!0,autoComplete:"username",label:"Username or Email Address",id:"username",type:"text",value:a,onChange:s=>m(s.target.value)}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"currentPassword",label:"Current password",onChange:s=>x(s.target.value),value:i}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"newPassword",label:"New password",onChange:s=>P(s.target.value),value:o}),e.jsx(n,{fullWidth:!0,required:!0,margin:"normal",type:"password",id:"confirmPassword",label:"Confirm password",onChange:s=>C(s.target.value),value:d}),e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx(M,{sx:{marginRight:"26px"},disabled:!i||!o||!d||!a||j||T,variant:"contained",type:"submit",children:"Change Password"}),e.jsx(W,{component:E,to:"/resetPassword",sx:{display:"block",marginTop:"1em",marginLeft:"5px"},children:"Forgot password?"})]})]}),p&&e.jsx(w,{severity:"error",sx:{my:2},children:p.reason})]})}try{h.displayName="ChangePassword",h.__docgenInfo={description:"",displayName:"ChangePassword",props:{redirectToRoute:{defaultValue:null,description:"",name:"redirectToRoute",required:!1,type:{name:"string"}}}}}catch{}export{h as C};
