import{ao as o,aI as y,aJ as r,an as d}from"./iframe-Cb9YNozx.js";import{w as u}from"./waitForAsyncResult-B1wy4cLa.js";import{s as S}from"./useEntity-DyZqXoe_.js";import{u as p}from"./useInfiniteQuery-CgLSPwL6.js";async function l(e,s){const n=await e.gridServicesClient.postRepoV1GridSessionAsyncStart({createGridRequest:s});if(!n.token)throw new Error("No async job token returned from startGridSession");return(await u(()=>e.asynchronousJobServicesClient.getRepoV1AsynchronousJobJobId({jobId:n.token}))).responseBody}function b(e){const s=y(),{keyFactory:n,synapseClient:t}=o();return r({...e,mutationFn:i=>t.gridServicesClient.postRepoV1GridSessionSessionIdReplica({sessionId:i,createReplicaRequest:{gridSessionId:i}}),onSuccess:async(i,a,c)=>{await s.invalidateQueries({queryKey:n.getGridSessionListKey()})}})}function m(e){const s=y(),{keyFactory:n,synapseClient:t}=o();return r({...e,mutationFn:i=>t.gridServicesClient.deleteRepoV1GridSessionSessionId({sessionId:i}),onSuccess:async(i,a,c)=>{await s.invalidateQueries({queryKey:n.getGridSessionListKey()}),e?.onSuccess&&await e.onSuccess(i,a,c)}})}const f=(e,s)=>S({queryKey:s.keyFactory.getGridSessionListKey(e),queryFn:()=>s.synapseClient.gridServicesClient.postRepoV1GridSessionList({listGridSessionsRequest:e})});function q(e,s){const{keyFactory:n,synapseClient:t}=o();return p({...s,queryKey:n.getGridSessionListKey(e),queryFn:async i=>await t.gridServicesClient.postRepoV1GridSessionList({listGridSessionsRequest:{...e,nextPageToken:i.pageParam}}),initialPageParam:void 0,getNextPageParam:i=>i.nextPageToken})}function w(e,s){const{keyFactory:n,synapseClient:t}=o();return d({...s,queryKey:n.getGridSessionKey(e),queryFn:()=>t.gridServicesClient.getRepoV1GridSessionSessionId({sessionId:e})})}const F=e=>{const{synapseClient:s}=o();return r({...e,mutationFn:async n=>await l(s,n)})};function I(e){const{synapseClient:s}=o();return r({...e,mutationFn:async n=>{const t={...n,concreteType:"org.sagebionetworks.repo.model.grid.SynchronizeGridRequest"},i=await s.gridServicesClient.postRepoV1GridSynchronizeAsyncStart({synchronizeGridRequest:t});return(await u(()=>s.asynchronousJobServicesClient.getRepoV1AsynchronousJobJobId({jobId:i.token}))).responseBody}})}export{q as a,m as b,b as c,F as d,w as e,f as g,I as u};
