import{eE as R,e$ as q,ch as x,f1 as Y,j as f,r as F,eZ as _,fz as B,eQ as u,eg as H,de as V}from"./iframe-DslgKmO_.js";import{u as I}from"./UserSearchBoxV2-2Od06OU0.js";import{u as $}from"./QueryContext-Bg_ZCJhx.js";import{b as z,a as Z}from"./QueryWrapper-BnCDkLh0.js";import{E as J}from"./EnumFacetFilterSkeleton-DhGC0NGC.js";import{E as K}from"./EnumFacetFilterUI-DWpgOPPf.js";import{c as W}from"./_createAggregator-DFbLgwOP.js";import{s as D}from"./useAccessRequirements-C4EpNefd.js";var X=W(function(s,e,n){s[n?0:1].push(e)},function(){return[[],[]]});function M(s,e=[],n=[],E=[]){const{value:o}=s;let r=o;if(o===x)return Y;const p=e.find(c=>c.ownerId===o);e.length&&(r=p?p.userName:`unknown (${o})`);const i=n.find(c=>c.id===o);n.length&&(r=i?i.name:`unknown (${o})`);const d=E.find(c=>c.id===o);return d!=null&&d.name&&(r=d.name),r}function ee(s,e){const n=R(e,s.query.selectedFacets);return n?q(n)?n.facetValues.length===0:(console.error("getAllIsSelected: matchingSelectedFacet is not a FacetColumnValuesRequest",n),!0):!0}function te(s){const{facet:e,containerAs:n="Collapsible",dropdownType:E="Icon",hideCollapsible:o=!1,sortConfig:r,defaultShowAllValues:p=!1}=s,{nextQueryRequest:i,addValueToSelectedFacet:d,removeSelectedFacet:c,removeValueFromSelectedFacet:w,resetDebounceTimer:j}=$(),{data:S}=z(),{getColumnDisplayName:L}=Z(),m=F.useMemo(()=>{const a=R(e,_(i.query.selectedFacets));if(a&&!q(a)){console.error("The facet rendered in EnumFacetFilter is not a FacetColumnValuesRequest",e);return}return a},[e,i.query.selectedFacets]),U=ee(_(i),e),t=S.columnModels?B(e,S.columnModels):void 0,v=F.useMemo(()=>{switch(t==null?void 0:t.columnType){case u.DOUBLE:case u.DATE:case u.INTEGER:return!0;default:return!1}},[t]),O=(t==null?void 0:t.columnType)===u.USERID||(t==null?void 0:t.columnType)===u.USERID_LIST?e.facetValues.map(a=>a.value):[],C=I({ids:O,type:"USER_PROFILE"}),Q=(t==null?void 0:t.columnType)===u.ENTITYID||(t==null?void 0:t.columnType)===u.ENTITYID_LIST?e.facetValues.map(a=>a.value):[],g=I({ids:Q,type:"ENTITY_HEADER"}),k=(t==null?void 0:t.columnType)===u.EVALUATIONID?e.facetValues.map(a=>a.value):[],A=I({ids:k,type:"EVALUATION_QUEUE"}),P=F.useMemo(()=>{const a=e.facetValues.map(l=>({...l,isSelected:(m==null?void 0:m.facetValues.includes(l.value))??!1,displayText:M(l,C,g,A)})),h=X(a,l=>l.value===x),G=h[0],T=h[1];let y=T;const N=t==null||t.facetSortConfig==null;return N&&(v?y=D(T,l=>Number(l.value)):y=D(T,l=>l.displayText.toLowerCase())),[...(N?!1:r&&r.direction==H.DESC)?y.reverse():y,...G]},[e.facetValues,t,r,m==null?void 0:m.facetValues,C,g,A,v]);return t?f.jsx(K,{facetTitle:L(e.columnName,e.jsonPath),filterIsActive:!U,facetValues:P,containerAs:n,dropdownType:E,hideCollapsible:o,defaultShowAllValues:p,onHoverOverValue:()=>{j()},onAddValueToSelection:a=>{d(V(e,["columnName","jsonPath"]),a,{debounce:!0})},onRemoveValueFromSelection:a=>{w(V(e,["columnName","jsonPath"]),a,{debounce:!0})},onRemoveAllFacetSelections:()=>c(V(e,["columnName","jsonPath"])),canMultiSelect:!0}):f.jsx(f.Fragment,{})}function b(s){const{containerAs:e="Collapsible",dropdownType:n="Icon"}=s;return f.jsx(F.Suspense,{fallback:f.jsx(J,{containerAs:e,dropdownType:n}),children:f.jsx(te,{...s})})}try{b.displayName="EnumFacetFilter",b.__docgenInfo={description:"",displayName:"EnumFacetFilter",props:{facet:{defaultValue:null,description:"",name:"facet",required:!0,type:{name:"FacetColumnResultValues"}},containerAs:{defaultValue:null,description:"",name:"containerAs",required:!1,type:{name:"enum",value:[{value:'"Collapsible"'},{value:'"Dropdown"'}]}},dropdownType:{defaultValue:null,description:"",name:"dropdownType",required:!1,type:{name:"enum",value:[{value:'"Icon"'},{value:'"SelectBox"'}]}},hideCollapsible:{defaultValue:null,description:"",name:"hideCollapsible",required:!1,type:{name:"boolean"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"FacetValueSortConfig"}},defaultShowAllValues:{defaultValue:null,description:"",name:"defaultShowAllValues",required:!1,type:{name:"boolean"}}}}}catch{}export{b as E};
