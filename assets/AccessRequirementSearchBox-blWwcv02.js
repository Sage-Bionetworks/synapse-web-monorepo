import{r as t,cp as ce,aG as fe,ao as Se,j as W,c2 as ge,ab as z}from"./iframe-vUTu6M8D.js";import{r as ve}from"./useAccessRequirements-Oj0TN5gc.js";import{_ as me,a as u,h as he,b as C,u as Oe,S as _e}from"./Select-aab027f3.esm-BPCT0NNh.js";import{_ as ye}from"./defineProperty-Cp4flQ_6.js";var Ie=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Ce(a){var s=a.defaultOptions,e=s===void 0?!1:s,p=a.cacheOptions,d=p===void 0?!1:p,c=a.loadOptions;a.options;var f=a.isLoading,h=f===void 0?!1:f,O=a.onInputChange,_=a.filterOption,r=_===void 0?null:_,S=me(a,Ie),o=S.inputValue,i=t.useRef(void 0),y=t.useRef(!1),H=t.useState(Array.isArray(e)?e:void 0),P=u(H,2),J=P[0],E=P[1],K=t.useState(typeof o<"u"?o:""),$=u(K,2),j=$[0],A=$[1],Q=t.useState(e===!0),w=u(Q,2),U=w[0],g=w[1],X=t.useState(void 0),B=u(X,2),R=B[0],q=B[1],Y=t.useState([]),D=u(Y,2),Z=D[0],L=D[1],ee=t.useState(!1),N=u(ee,2),te=N[0],I=N[1],ae=t.useState({}),T=u(ae,2),v=T[0],k=T[1],ne=t.useState(void 0),G=u(ne,2),se=G[0],re=G[1],ie=t.useState(void 0),M=u(ie,2),ue=M[0],oe=M[1];d!==ue&&(k({}),oe(d)),e!==se&&(E(Array.isArray(e)?e:void 0),re(e)),t.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var x=t.useCallback(function(m,l){if(!c)return l();var n=c(m,l);n&&typeof n.then=="function"&&n.then(l,function(){return l()})},[c]);t.useEffect(function(){e===!0&&x(j,function(m){y.current&&(E(m||[]),g(!!i.current))})},[]);var pe=t.useCallback(function(m,l){var n=he(m,l,O);if(!n){i.current=void 0,A(""),q(""),L([]),g(!1),I(!1);return}if(d&&v[n])A(n),q(n),L(v[n]),g(!1),I(!1);else{var le=i.current={};A(n),g(!0),I(!R),x(n,function(V){y&&le===i.current&&(i.current=void 0,g(!1),q(n),L(V||[]),I(!1),k(V?C(C({},v),{},ye({},n,V)):v))})}},[d,x,R,v,O]),de=te?[]:j&&R?Z:J||[];return C(C({},S),{},{options:de,isLoading:U||h,onInputChange:pe,filterOption:r})}var Ae=t.forwardRef(function(a,s){var e=Ce(a),p=Oe(e);return t.createElement(_e,ce({ref:s},p))}),Re=Ae;function b(a,s){return a.toString()===s?s:`${s} (${a})`}function F(a){const{inputId:s,initialId:e,onChange:p,placeholder:d}=a,{palette:c}=fe(),{accessToken:f}=Se(),{data:h,isLoading:O}=ve(e,{enabled:!!e});async function _(r){const S=parseInt(r);let o;return S&&(o=[await z.getAccessRequirementById(f,S)]),o||(o=(await z.searchAccessRequirements(f,{nameContains:r}))?.results),o?.map(i=>({id:i.id.toString(),value:i.id.toString(),label:b(i.id,i.name)}))??[]}return e&&O?W.jsx(ge,{width:"100%"}):W.jsx(Re,{className:"AsyncSelect",defaultInputValue:e?b(e,h?.name??e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:b(e,h?.name??e.toString())}]:!0,inputId:s,cacheOptions:!0,isClearable:!0,styles:{control:r=>({...r,backgroundColor:c.grey[200]}),input:r=>({...r,input:{gridArea:"1 / 2 / 4 / 4 !important"}})},loadOptions:_,onChange:r=>{p(r?.id.toString())},placeholder:d})}try{F.displayName="AccessRequirementSearchBox",F.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}}}catch{}export{F as A};
