import{ao as N,d5 as l,fq as c,f5 as f,i5 as d,ia as D,ib as p,eN as e,r as T,dP as _,dO as v,j as r,c5 as A}from"./iframe-DkJtXMGY.js";import{J as g}from"./JSONArrayEditorModal-B4SqJ5lS.js";const y=[e.JSON];function x(a,t){return Object.values(e).filter(s=>a?!y.includes(s):!0).filter(s=>{if(t)switch(s){case e.JSON:case e.STRING_LIST:case e.INTEGER_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.USERID_LIST:case e.ENTITYID_LIST:return!1;default:return!0}return!0})}function B(a){switch(a){case"enumeration":return"Values";case"range":return"Range";default:return a}}function b(a){switch(a){case e.STRING:return"String";case e.DOUBLE:return"Double";case e.BOOLEAN:return"Boolean";case e.INTEGER:return"Integer";case e.DATE:return"Date";case e.FILEHANDLEID:return"File";case e.ENTITYID:return"Entity";case e.LINK:return"Link";case e.MEDIUMTEXT:return"MediumText";case e.LARGETEXT:return"LargeText";case e.USERID:return"User";case e.STRING_LIST:return"String List";case e.INTEGER_LIST:return"Integer List";case e.BOOLEAN_LIST:return"Boolean List";case e.DATE_LIST:return"Date List";case e.USERID_LIST:return"User ID List";case e.ENTITYID_LIST:return"Entity ID List";case e.EVALUATIONID:return"Evaluation";case e.SUBMISSIONID:return"Submission";case e.JSON:return"JSON";default:return a}}function C(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return!0;default:return!1}}function Y(a){switch(a){case e.STRING_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.INTEGER_LIST:case e.ENTITYID_LIST:return!0;default:return!1}}function k(a,t){let s;switch(a){case e.INTEGER:case e.INTEGER_LIST:s=["enumeration","range"];break;case e.STRING:case e.BOOLEAN:case e.USERID:case e.ENTITYID:case e.STRING_LIST:case e.BOOLEAN_LIST:case e.ENTITYID_LIST:case e.USERID_LIST:case e.EVALUATIONID:s=["enumeration"];break;case e.DOUBLE:case e.DATE:case e.DATE_LIST:s=["range"];break;default:s=null}return s&&!t&&(s=[void 0,...s]),s}function j(a,t,s){if(t)return!1;if(s)return!1;switch(a){case e.ENTITYID:case e.ENTITYID_LIST:case e.FILEHANDLEID:case e.USERID:case e.USERID_LIST:case e.MEDIUMTEXT:case e.LARGETEXT:case e.JSON:case e.SUBMISSIONID:case e.EVALUATIONID:return!1;default:return!0}}const J=50,R=1e3,z=100;function X(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return R;default:throw new Error(`Type is not known to have a max size: ${a}`)}}function H(a,t){if(t)return!1;switch(a){case e.STRING:case e.INTEGER:case e.ENTITYID:return!0;default:return!1}}function O(a,t){return t===e.INTEGER?a.map(s=>parseInt(s)):a}function P(a,t=[]){return a.map(s=>({...s,columnType:s.columnType,maximumSize:s.maximumSize==null?void 0:s.maximumSize.toString(),maximumListLength:s.maximumListLength==null?void 0:s.maximumListLength.toString(),isSelected:!1,isOriginallyDefaultColumn:t.some(n=>n.name===s.name),jsonSubColumns:s.jsonSubColumns?s.jsonSubColumns.map(n=>({...n,columnType:n.columnType,isSelected:!1})):void 0,defaultValue:s.defaultValue&&s.columnType.endsWith("_LIST")?JSON.parse(s.defaultValue):s.defaultValue,enumValues:s.enumValues!=null?O(s.enumValues,s.columnType):void 0}))}function K(a){if(N(a))return{scope:a.scopeIds,viewTypeMask:a.viewTypeMask,viewEntityType:l(a.concreteType)};if(c(a)||f(a)){const t=c(a)?d:D;return{scope:(a.items??[]).map(s=>`${s.entityId}.${s.versionNumber}`),viewTypeMask:t,viewEntityType:l(a.concreteType)}}else if(p(a))return{scope:a.scopeIds,viewTypeMask:void 0,viewEntityType:l(a.concreteType)}}function M(a){switch(a){case e.STRING:case e.STRING_LIST:return{type:"string",minLength:1};case e.DOUBLE:return{type:"number"};case e.BOOLEAN:case e.BOOLEAN_LIST:return{type:"boolean"};case e.INTEGER:case e.INTEGER_LIST:return{type:"integer"};case e.DATE:case e.DATE_LIST:return{type:"string",format:"datetime"};case e.FILEHANDLEID:case e.ENTITYID:case e.ENTITYID_LIST:case e.LINK:case e.MEDIUMTEXT:case e.LARGETEXT:case e.USERID:case e.USERID_LIST:case e.SUBMISSIONID:case e.JSON:case e.EVALUATIONID:default:return{type:"string",minLength:1}}}const h=(a,t)=>a.name===t.name&&a.columnType===t.columnType,G=(a,t)=>{let s;for(const n of a)if(h(n,t)){s=n;break}return s};function F(a){const t=a!==null?parseFloat(String(a)):null;return Number.isInteger(t)?t:null}const o=(a,t)=>{const s=F(a);return t!=null&&s!=null&&s>0?s<t:!1};function V(a,t){return t?!(o(a.maximumSize,t.maximumSize)||o(a.maximumListLength,t.maximumListLength)):!0}function q(a,t){return a.filter(s=>{const n=G(t,s);return!V(s,n)}).length}function I(a){const{columnType:t,onChange:s,value:n=[],TextFieldProps:E}=a,[S,u]=T.useState(!1),m=T.useMemo(()=>M(t),[t]),L=T.useMemo(()=>n==null?"":t===e.DATE_LIST?n.map(i=>_(v(i))).join(", "):n.join(", "),[n,t]);return r.jsxs(r.Fragment,{children:[r.jsx(g,{arrayItemDefinition:m,value:n??void 0,isShowingModal:S,onConfirm:i=>{s(i),u(!1)},onCancel:()=>u(!1)}),r.jsx(A,{...E,value:L,onClick:()=>{u(!0)}})]})}try{I.displayName="MultiValueField",I.__docgenInfo={description:"",displayName:"MultiValueField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T[]) => void"}},columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}},TextFieldProps:{defaultValue:null,description:"",name:"TextFieldProps",required:!1,type:{name:'Omit<TextFieldProps, "value" | "onChange">'}}}}}catch{}export{J as D,I as M,Y as a,k as b,C as c,x as d,b as e,G as f,F as g,X as h,o as i,j,H as k,B as l,q as m,z as n,R as o,K as p,P as t};
