import{j as t}from"./jsx-runtime-D_zvdyIk.js";import"./useFiles-DdzLlC9U.js";import{d as q}from"./VerificationSubmission-BDh1zA9f.js";import"./StringUtils-C95LMFI-.js";import"./OrientationBanner-BN07fH5k.js";import{r as c}from"./index-B1uhWlq_.js";import{i as L}from"./isEqual-Dx5MNSQ5.js";import{a as b,b as T,c as j,d as N}from"./useAccessRequirements-Bi9I3QwU.js";import{s as f}from"./spreadSx-CwcO6WA9.js";import{A as B}from"./AclEditor-B1OHbBM9.js";import{u as M}from"./useUpdateAcl-D1A0nMwy.js";import{S as O}from"./Stack-RIyXZZPo.js";import{B as P}from"./Box-BOKOlDky.js";import{T as a}from"./Typography-DG3oGzan.js";import{A as U}from"./Alert-BEvdQcEL.js";const u={variant:"body1",lineHeight:"20px",color:"grey.800"},w="Only ACT has permissions on this AR.",V=["CAN_REVIEW_SUBMISSIONS","IS_EXEMPTION_ELIGIBLE","CAN_REVIEW_SUBMISSIONS_AND_IS_EXEMPTION_ELIGIBLE"],h=c.forwardRef(function(I,R){const{accessRequirementId:o,onSaveComplete:i}=I,[d,n]=c.useState(null),l=()=>{n(null),i(!0)},m=e=>{n(e.reason),i(!1)},{data:s,isLoading:y}=b(o,{staleTime:1/0}),{resourceAccessList:r,setResourceAccessList:p,addResourceAccessItem:_,updateResourceAccessItem:C,removeResourceAccessItem:v,resetDirtyState:g}=M({onChange:()=>n(null),onError:n});c.useEffect(()=>{s&&(g(),p(s.resourceAccess))},[s,p]);const{mutate:A}=T({onSuccess:()=>l(),onError:e=>m(e)}),{mutate:E}=j({onSuccess:()=>l(),onError:e=>m(e)}),{mutate:S}=N({onSuccess:()=>l(),onError:e=>m(e)});return c.useImperativeHandle(R,()=>({save(){const e=r.length===0?null:{...s,id:(s==null?void 0:s.id)||o,resourceAccess:r};s===null&&e==null||L(s==null?void 0:s.resourceAccess,r)&&(s==null?void 0:s.id)===(e==null?void 0:e.id)?i(!0):s===null&&e!==null?E(e):e===null?A(o):S(e)}}),[o,s,r,E,A,i,S]),t.jsxs(O,{direction:"column",sx:{gap:"20px"},children:[t.jsxs(P,{children:[t.jsx(a,{variant:"headline3",sx:{mb:"10px"},children:"Guide to AR permissions"}),t.jsxs(a,{sx:f({mb:"10px"},u),children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Can Review"})," means a user or team has access request review permission for this AR."]}),t.jsxs(a,{sx:f({mb:"10px"},u),children:[t.jsx("span",{style:{fontStyle:"italic"},children:"Exempt Eligible"}),' users and teams can bypass access requirements for entities they have been granted "edit and delete" permission on, via the "Sharing Settings" dialog in the Project Settings.']}),t.jsx(a,{sx:{...u,color:"grey.900"},children:"ACT members always retain the ability to review or modify Access Requirements."})]}),t.jsx(B,{resourceAccessList:r,availablePermissionLevels:V,isLoading:y,canEdit:!0,emptyText:w,onAddPrincipalToAcl:e=>_(e,[q.REVIEW_SUBMISSIONS]),updateResourceAccessItem:C,removeResourceAccessItem:v,showAddRemovePublicButton:!1,showNotifyCheckbox:!1,isInherited:!1}),d&&t.jsx(U,{severity:"error",children:d})]})});try{h.displayName="AccessRequirementAclEditor",h.__docgenInfo={description:"",displayName:"AccessRequirementAclEditor",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}},onSaveComplete:{defaultValue:null,description:"",name:"onSaveComplete",required:!0,type:{name:"(saveSuccessful: boolean) => void"}}}}}catch{}export{h as A};
