import{j as e}from"./jsx-runtime-CqspjScI.js";import{l as v,S,u as I,aV as x,k}from"./useFiles-DzrQRRrm.js";import{I as _,J as E,K as R}from"./SynapseConstants-DDq6k8Bk.js";import{r as f}from"./index-DwELiOEm.js";import"./VerificationSubmission-dxY1kvC5.js";import"./StringUtils-lE31obNl.js";import"./OrientationBanner-2eG-FyEA.js";import{A as P}from"./AccountLevelBadge-BJy2gsHg.js";import{C as U}from"./ConfirmationDialog-Bw6zDJSA.js";import{u as A}from"./utils-Lg92kfS4.js";import{u as j}from"./useMutation-CHPAARnz.js";import{S as B}from"./LoadingScreen-oAOt9x7F.js";import{d as g}from"./ToastMessage-C55y7uYL.js";import{T as m}from"./Typography-c8mIpSFm.js";import{L as T}from"./Link-4I5wKCkj.js";import{B as D}from"./Box-DT2Sh8Hk.js";function F(o){const t=A(),{accessToken:i,keyFactory:a}=v();return j({...o,mutationFn:r=>S.revokeCertification(r,i),onSuccess:async(r,n,c)=>{await Promise.all([t.invalidateQueries({queryKey:a.getUserBundleQueryKey(n,_)})]),o!=null&&o.onSuccess&&await o.onSuccess(r,n,c)}})}function y(o){const{userId:t,buttonProps:i}=o,[a,r]=f.useState(!1),{data:n}=I(),{mutate:c,isPending:s}=F({onSettled:()=>{r(!1)},onSuccess:()=>{g("User certification revoked","success")},onError:u=>{g(u.message,"danger")}}),l=f.useMemo(()=>({children:"Revoke Certification",...i,disabled:s||i.disabled,onClick:()=>r(!0)}),[i,s]),d=f.useMemo(()=>({title:"Revoke user certification?",onCancel:()=>r(!1),open:a,content:e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"body1",sx:{fontWeight:"bold",mb:2.5},children:"This action can't be undone."}),e.jsx(m,{variant:"body1",sx:{my:2.5},children:"Revoking user certification means this user won’t be able to upload files or tables, or make new projects or folders. To become certified again, they’ll have to retake the certification quiz."}),e.jsx(m,{variant:"body1",sx:{mt:2.5},children:e.jsx(T,{href:"https://help.synapse.org/docs/Synapse-User-Account-Types.2007072795.html#SynapseUserAccountTypes-CertifiedUser",children:"More about certified users"})})]}),onConfirm:()=>{c(t)},confirmButtonProps:{children:"Revoke",disabled:s,startIcon:s?e.jsx(B,{}):null},cancelButtonProps:{disabled:s}}),[s,c,a,t]);return{showButton:n||!1,buttonProps:l,confirmationDialogProps:d}}try{y.displayName="useRevokeCertificationUI",y.__docgenInfo={description:"Hook that provides UI data and props related to revoking a user's certification.",displayName:"useRevokeCertificationUI",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}},buttonProps:{defaultValue:null,description:"",name:"buttonProps",required:!0,type:{name:'Omit<ButtonProps, "onClick">'}}}}}catch{}const L=_|E|R;function C({userId:o}){var d;const{data:t,isLoading:i,error:a}=x(o,L),r={certified:(t==null?void 0:t.isCertified)||!1,validated:(t==null?void 0:t.isVerified)||!1,enabledMFA:((d=t==null?void 0:t.userProfile)==null?void 0:d.twoFactorAuthEnabled)||!1},n=Object.values(r).some(u=>u),{showButton:c,buttonProps:s,confirmationDialogProps:l}=y({userId:o,buttonProps:{variant:"outlined"}});return i?e.jsx(e.Fragment,{}):a?e.jsx(k,{error:a}):e.jsxs(e.Fragment,{children:[e.jsx(U,{...l}),n&&e.jsx(D,{display:"flex",gap:"10px",justifyContent:"flex-start",flexWrap:"wrap",children:Object.entries(r).map(([u,h])=>{const p=u,b=p==="certified"&&c?s:void 0;return h&&e.jsx(P,{badgeType:p,buttonProps:b},p)})})]})}try{C.displayName="AccountLevelBadges",C.__docgenInfo={description:"",displayName:"AccountLevelBadges",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}export{C as A};
