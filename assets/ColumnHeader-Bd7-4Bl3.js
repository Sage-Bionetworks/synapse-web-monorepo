import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{I as h}from"./IconSvg-DFVD2HHN.js";import{r as c}from"./index-BdZx4xpj.js";import{E as S}from"./EnumFacetFilterUI-BzB7xJKs.js";import{n as I}from"./useQuery-C18MkqUz.js";import{i as _}from"./isEqual-B5hfnNhw.js";import{i as b}from"./_baseUniq-D51t2lVz.js";import{B as g}from"./Box-wTUucE8E.js";import{T as F}from"./Tooltip-CA5EjILG.js";import{I as y}from"./IconButton-CLIwP4E0.js";import{H as j}from"./HelpTwoTone-D8i0W1wQ.js";function v(r,e){var t;(t=r.columnDef.meta)!=null&&t.enableMultipleSelect?r.setFilterValue(o=>o?[...o,e]:[e]):r.setFilterValue([e])}function T(r,e){r.setFilterValue(t=>{if(t){const o=[...t.filter(a=>!_(a,e))];if(!b(o))return o}return null})}function w(r){if(r.getFacetedUniqueValues()){const e=Array.from(r.getFacetedUniqueValues().values()).some(t=>t!=0);return Array.from(r.getFacetedUniqueValues().entries()).map(t=>({value:t[0],count:e?t[1]:void 0}))}return[]}function m(r){var u;const{column:e,title:t}=r,o=((u=e.columnDef.meta)==null?void 0:u.enableMultipleSelect)||!1,a=e.getFilterValue(),s=c.useMemo(()=>a||[],[a]),d=c.useMemo(()=>w(e).map(n=>{var p,f;let i=n.value;(f=(p=e.columnDef)==null?void 0:p.meta)!=null&&f.getDisplayText&&(i=e.columnDef.meta.getDisplayText(n.value));const V=!!(s||[]).find(C=>C===n.value);return{...n,displayText:i,isSelected:V}}),[e,s]);return l.jsx(S,{facetTitle:t,facetValues:d,filterIsActive:e.getIsFiltered(),containerAs:"Dropdown",dropdownType:"Icon",defaultShowAllValues:!0,onAddValueToSelection:n=>{v(e,n)},onRemoveValueFromSelection:n=>{T(e,n)},onRemoveAllFacetSelections:()=>{e.setFilterValue(null)},onHoverOverValue:I,canMultiSelect:o})}try{m.displayName="ColumnHeaderEnumFilter",m.__docgenInfo={description:`Used to create {@link EnumFacetFilterUIProps} that can be used to create a control to filter column values based on
the provided`,displayName:"ColumnHeaderEnumFilter",props:{column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"Column<TData, TValue>"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}}}catch{}function x(r){const{column:e,title:t=r.column.id,helpText:o,filterControl:a,additionalButtons:s}=r,u=c.useCallback(()=>{var n,i;if(a)return a;if(e.getCanFilter()){if(((n=e.columnDef.meta)==null?void 0:n.filterVariant)==="enumeration")return l.jsx(m,{column:e,title:t});console.warn(`column.getCanFilter() was true for column ID: ${e.id} but no filterControlFromProps was passed and component for filterVariant: ${(i=e.columnDef.meta)==null?void 0:i.filterVariant} is not implemented`)}return l.jsx(l.Fragment,{})},[e,a,t])();return l.jsxs(g,{sx:{display:"flex",alignContent:"center",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("span",{style:{whiteSpace:"nowrap"},children:t}),l.jsxs(g,{role:"menubar",sx:{display:"flex",alignItems:"center",height:"22px",ml:2,gap:.25},children:[o&&l.jsx(F,{title:o,placement:"top",children:l.jsx(y,{size:"small",children:l.jsx(j,{fontSize:"inherit"})})}),e.getCanFilter()&&u,e.getCanSort()&&l.jsx(F,{title:`Sort by ${t}`,placement:"top",children:l.jsx(y,{role:"button",size:"small","aria-label":`Sort by ${t}`,tabIndex:0,onKeyPress:()=>e.toggleSorting(),onClick:()=>e.toggleSorting(),children:l.jsx(h,{icon:e.getIsSorted()==="asc"?"sortUp":"sortDown",wrap:!1,sx:{color:e.getIsSorted()?"primary.main":"grey.700",backgroundColor:"none"}})})}),s]})]})}try{x.displayName="ColumnHeader",x.__docgenInfo={description:"Styled table column header component for use with",displayName:"ColumnHeader",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},helpText:{defaultValue:null,description:"",name:"helpText",required:!1,type:{name:"ReactNode"}},additionalButtons:{defaultValue:null,description:"",name:"additionalButtons",required:!1,type:{name:"ReactNode"}},filterControl:{defaultValue:null,description:"",name:"filterControl",required:!1,type:{name:"ReactNode"}}}}}catch{}export{x as C};
