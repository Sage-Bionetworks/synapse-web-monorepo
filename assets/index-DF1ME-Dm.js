import{r as i}from"./index-chvr4nzo.js";import{u as a}from"./index-DM62uTsx.js";import{i as l}from"./const-Doag8klc.js";import{u as d}from"./index-C4Msuu4p.js";function R(e){const s=a(e),n=i.useRef(0),t=i.useCallback(()=>{l&&n.current&&(cancelAnimationFrame(n.current),n.current=0)},[]);return d(t),[i.useMemo(()=>{const r=(...u)=>{l&&(t(),n.current=requestAnimationFrame(()=>{s.current(...u),n.current=0}))};return Object.defineProperties(r,{length:{value:e.length},name:{value:`${e.name||"anonymous"}__raf`}}),r},[]),t]}function h(e,s,n){const t=a(s),r=a(n);return i.useMemo(()=>{let u=e;return{get current(){return r.current===void 0?u:r.current(u)},set current(c){u=t.current===void 0?c:t.current(c)}}},[])}let f;function p(){if(!l)return;if(f)return f;const e=new Map,s=new ResizeObserver(n=>{n.forEach(t=>{var r;return(r=e.get(t.target))==null?void 0:r.forEach(u=>setTimeout(()=>{u(t)},0))})});return f={observer:s,subscribe(n,t){let r=e.get(n);r||(r=new Set,e.set(n,r),s.observe(n)),r.add(t)},unsubscribe(n,t){const r=e.get(n);r&&(r.delete(t),r.size||(e.delete(n),s.unobserve(n)))}},f}function v(e,s,n=!0){const t=n&&p(),r=a(s),u=e&&"current"in e?e.current:e;i.useEffect(()=>{const c=e&&"current"in e?e.current:e;if(!t||!c)return;let o=!0;const b=(...m)=>{o&&r.current(...m)};return t.subscribe(c,b),()=>{o=!1,t.unsubscribe(c,b)}},[u,t])}function k(e=!0){const[s,n]=i.useState(null),t=h(null,o=>(n(o),o)),[r,u]=i.useState(),[c]=R(o=>{u({width:o.contentRect.width,height:o.contentRect.height})});return v(s,c,e),[r,t]}export{k as u};
