import{r as B,ar as h,aE as P,J as y,j as r,V as s,X as T,c3 as k,B as f}from"./iframe-SFoYirDz.js";import{M,v as N}from"./index-CoH3MwS5.js";import"./enums-a14lInQj.js";import"./index-r8ZA1smB.js";import"./SkeletonButton-Di0Yg_Uv.js";import"./SkeletonInlineBlock-DrZRW3Px.js";import"./SkeletonTable-Drqg7wxh.js";import{S as O}from"./SkeletonParagraph-D_k7-Stv.js";function x(n){const{schemaUrl:i,uiSchemaUrl:m,postUrl:g,mutateFormDataBeforePost:c,onCancel:u,onSubmit:l}=n,[S,b]=B.useState({}),p=e=>({queryFn:async()=>{const t=await fetch(e);if(!t.ok)throw new Error("Error fetching schema");return t.json()}}),{data:j,status:D,isError:E,error:F}=h({...p(i),queryKey:["DynamicForm","schema",i]}),{data:U,status:v,isError:q,error:w}=h({...p(m),queryKey:["DynamicForm","uiSchema",m]}),{mutate:C,isPending:d}=P({mutationFn:async e=>{const t=c?c(e):e,o=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!o.ok){const V=await o.text();throw new Error(V)}return o.json()},onSuccess:()=>{y("Form submitted successfully!","success"),l&&l()},onError:e=>{y(`Error submitting form: ${e.message}`,"danger")}}),_=e=>{C(e)};if(D=="pending"||v=="pending")return r.jsxs(s,{children:[r.jsx(T,{variant:"body1",children:"Loading form..."}),r.jsx(O,{numRows:20,rowHeight:"40px"})]});const a=[];return E&&a.push(`Unable to retrieve schema: ${F.message}`),q&&a.push(`Unable to retrieve UI schema: ${w.message}`),a.length>0?r.jsxs(k,{severity:"error",children:["Unable to retrieve schema(s):"," ",a.map(e=>r.jsx(s,{children:e},e))]}):r.jsx(s,{sx:{p:"30px 10px"},children:r.jsx(M,{schema:j,uiSchema:U,formData:S,validator:N,onChange:({formData:e})=>b(e),onSubmit:({formData:e})=>_(e),disabled:d,children:r.jsxs(s,{sx:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[u&&r.jsx(f,{variant:"outlined",color:"primary",size:"large",onClick:u,children:"Cancel"}),r.jsx(f,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:d,children:"Submit"})]})})})}try{x.displayName="DynamicForm",x.__docgenInfo={description:"",displayName:"DynamicForm",props:{schemaUrl:{defaultValue:null,description:"",name:"schemaUrl",required:!0,type:{name:"string"}},uiSchemaUrl:{defaultValue:null,description:"",name:"uiSchemaUrl",required:!0,type:{name:"string"}},postUrl:{defaultValue:null,description:"",name:"postUrl",required:!0,type:{name:"string"}},mutateFormDataBeforePost:{defaultValue:null,description:"",name:"mutateFormDataBeforePost",required:!1,type:{name:"(formData: any) => any"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"() => void"}}}}}catch{}export{x as D};
