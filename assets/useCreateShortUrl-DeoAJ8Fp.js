import{u as p}from"./QueryClientProvider-Drv3DDYU.js";import{u as d}from"./useMutation-CR2RaXsm.js";function a({shortIoPublicApiKey:e,domain:i,onSuccess:l,onError:u}){const t=p(),o=["shortUrl",window.location.href],n=t.getQueryData(o);return d({mutationFn:async()=>{if(n)return n;if(e){const r=await fetch("https://api.short.io/links/public",{method:"POST",headers:{Authorization:e,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({originalURL:window.location.href,domain:i})});if(!r.ok){const c=await r.text();throw new Error(c)}const s=(await r.json()).shortURL;return t.setQueryData(o,s),s}else return window.location.href},onSuccess:l,onError:u})}try{a.displayName="useCreateShortUrl",a.__docgenInfo={description:"",displayName:"useCreateShortUrl",props:{shortIoPublicApiKey:{defaultValue:null,description:"",name:"shortIoPublicApiKey",required:!1,type:{name:"string"}},domain:{defaultValue:null,description:"",name:"domain",required:!0,type:{name:"string"}},onSuccess:{defaultValue:null,description:"",name:"onSuccess",required:!1,type:{name:"(shortUrl: string) => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(error: Error) => void"}}}}}catch{}export{a as u};
