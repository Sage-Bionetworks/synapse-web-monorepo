import{d as R,e as g,E as l,a as f,f as T,b as _}from"./useFiles-D-hdekB1.js";import{O as C,S as I}from"./VerificationSubmission-BnFne12N.js";import{M as y}from"./SelfSignAccessRequirement-CEwndEoz.js";import{l as c}from"./index-1859C49g.js";import{g as E,h as q,i as M,j as w,a as $,k as S,l as j}from"./mockAccessRequirements-o1j8tsY1.js";import{m}from"./wikiHandlers-BJj255tg.js";import{M as p}from"./mock_user_profile-CyZOyNQ0.js";const d=new Map,N=e=>[c.rest.get(`${e}${R(":id")}`,async(n,t,r)=>{let s=404,a={reason:`Mock Service worker could not find an access requirement with ID ${n.params.id}`};const o=E.find(i=>i.id.toString()===n.params.id);return o&&(a=o,s=200),t(r.status(s),r.json(a))}),c.rest.get(`${e}${g(":id")}`,async(n,t,r)=>{let s=404,a={reason:`Mock Service worker could not find an access requirement wiki page key with AR ID ${n.params.id}`};const o=q.find(i=>i.ownerObjectType===C.ACCESS_REQUIREMENT&&String(i.ownerObjectId)===n.params.id);return o&&(a=o,s=200),t(r.status(s),r.json(a))})];function k(e){return c.rest.post(`${e}${T}`,async(n,t,r)=>{const s=await n.json();return t(r.status(201),r.json({...s,id:M,etag:w}))})}function B(e){return c.rest.put(`${e}${R(":id")}`,async(n,t,r)=>{const s=await n.json();return t(r.status(200),r.json(s))})}const U=(e,n=":entityId",t=E)=>[c.rest.get(`${e}${l(n)}`,async(r,s,a)=>{const i={results:t,totalNumberOfResults:t.length};return s(a.status(200),a.json(i))})],D=(e,n=[$])=>c.rest.get(`${e}/repo/v1/team/:teamId/accessRequirement`,async(t,r,s)=>{const o={results:n,totalNumberOfResults:n.length};return r(s.status(200),s.json(o))}),P=(e,n)=>(n&&n.forEach(t=>{d.set(t.accessRequirementId,t)}),[c.rest.get(`${e}${f(":id")}`,async(t,r,s)=>{let a;const o=E.find(u=>t.params.id===u.id.toString()),i=d.get(t.params.id);if(i&&(a=i),!a&&o){const u=o.concreteType===y;a={accessRequirementId:t.params.id,concreteType:u?"org.sagebionetworks.repo.model.dataaccess.ManagedACTAccessRequirementStatus":"org.sagebionetworks.repo.model.dataaccess.BasicAccessRequirementStatus",isApproved:!0,currentSubmissionStatus:u?{submissionId:m.id,submittedBy:m.submittedBy,modifiedOn:m.modifiedOn,state:I.APPROVED}:void 0}}const A=a?200:404;return r(s.status(A),s.json(a))})]);function b(e){return c.rest.post(`${e}/repo/v1/accessApproval`,async(n,t,r)=>{const s=await n.json(),a=200,o={...s,id:123,etag:"mock-etag",createdOn:new Date().toISOString(),modifiedOn:new Date().toISOString(),createdBy:String(p),modifiedBy:String(p)};return d.set(String(s.requirementId),{accessRequirementId:String(s.requirementId),concreteType:"org.sagebionetworks.repo.model.dataaccess.BasicAccessRequirementStatus",isApproved:!0}),t(r.status(a),r.json(o))})}function h(e){return c.rest.post(`${e}${_}`,async(n,t,r)=>{let s;return(await n.json()).nextPageToken===S.nextPageToken?s=j:s=S,t(r.status(200),r.json(s))})}function W(e){return[...N(e),k(e),B(e),...U(e),D(e),...P(e),b(e),h(e)]}export{U as a,P as b,W as c,N as g};
