import{r as P,an as h,aJ as T,K as y,j as r,W as s,Y as V,c5 as k,B as f}from"./iframe-BjUpq5xd.js";import{M,v as K}from"./index-D5Rm26Gg.js";import"./enums-DKtG3wd3.js";import"./index-Chi_LkuB.js";import"./SkeletonButton-CV3RH36o.js";import"./SkeletonInlineBlock-ANrbFXbS.js";import"./SkeletonTable-B-Y_KPUW.js";import{S as N}from"./SkeletonParagraph-C60Mi91l.js";function x(n){const{schemaUrl:i,uiSchemaUrl:m,postUrl:g,mutateFormDataBeforePost:c,onCancel:u,onSubmit:l}=n,[S,b]=P.useState({}),p=e=>({queryFn:async()=>{const t=await fetch(e);if(!t.ok)throw new Error("Error fetching schema");return t.json()}}),{data:j,status:D,isError:F,error:U}=h({...p(i),queryKey:["DynamicForm","schema",i]}),{data:E,status:v,isError:q,error:w}=h({...p(m),queryKey:["DynamicForm","uiSchema",m]}),{mutate:C,isPending:d}=T({mutationFn:async e=>{const t=c?c(e):e,o=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!o.ok){const B=await o.text();throw new Error(B)}return o.json()},onSuccess:()=>{y("Form submitted successfully!","success"),l&&l()},onError:e=>{y(`Error submitting form: ${e.message}`,"danger")}}),_=e=>{C(e)};if(D=="pending"||v=="pending")return r.jsxs(s,{children:[r.jsx(V,{variant:"body1",children:"Loading form..."}),r.jsx(N,{numRows:20,rowHeight:"40px"})]});const a=[];return F&&a.push(`Unable to retrieve schema: ${U.message}`),q&&a.push(`Unable to retrieve UI schema: ${w.message}`),a.length>0?r.jsxs(k,{severity:"error",children:["Unable to retrieve schema(s):"," ",a.map(e=>r.jsx(s,{children:e},e))]}):r.jsx(s,{sx:{p:"30px 10px"},children:r.jsx(M,{schema:j,uiSchema:E,formData:S,validator:K,onChange:({formData:e})=>b(e),onSubmit:({formData:e})=>_(e),disabled:d,children:r.jsxs(s,{sx:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[u&&r.jsx(f,{variant:"outlined",color:"primary",size:"large",onClick:u,children:"Cancel"}),r.jsx(f,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:d,children:"Submit"})]})})})}try{x.displayName="DynamicForm",x.__docgenInfo={description:"",displayName:"DynamicForm",props:{schemaUrl:{defaultValue:null,description:"",name:"schemaUrl",required:!0,type:{name:"string"}},uiSchemaUrl:{defaultValue:null,description:"",name:"uiSchemaUrl",required:!0,type:{name:"string"}},postUrl:{defaultValue:null,description:"",name:"postUrl",required:!0,type:{name:"string"}},mutateFormDataBeforePost:{defaultValue:null,description:"",name:"mutateFormDataBeforePost",required:!1,type:{name:"(formData: any) => any"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"() => void"}}}}}catch{}export{x as D};
