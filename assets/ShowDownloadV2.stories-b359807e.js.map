{"version":3,"file":"ShowDownloadV2.stories-b359807e.js","sources":["../../src/lib/containers/download_list_v2/ShowDownloadV2.tsx","../../stories/ShowDownloadV2.stories.ts"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { TOOLTIP_DELAY_SHOW } from '../table/SynapseTableConstants'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { useGetDownloadListStatistics } from '../../utils/hooks/SynapseAPI/download/useDownloadList'\nimport IconSvg from '../IconSvg'\nimport { Tooltip } from '@mui/material'\n\nexport type ShowDownloadV2Props = {\n  to: string\n  className?: string\n}\n\n/**\n * Nav bar item, displayed when files have been added to the Download Cart.\n * This must be configured with the URL of a page dedicated to showing the Download Cart.\n */\nfunction ShowDownloadV2({ to, className = '' }: ShowDownloadV2Props) {\n  const { accessToken } = useSynapseContext()\n  const handleError = useErrorHandler()\n  const tooltipText = 'Click to view items in your download cart.'\n\n  const {\n    data,\n    isLoading,\n    isError,\n    error: newError,\n  } = useGetDownloadListStatistics()\n\n  useEffect(() => {\n    if (isError && newError && accessToken) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError, accessToken])\n\n  if (!accessToken || isLoading) {\n    return <></>\n  }\n\n  const size = data?.totalNumberOfFiles ?? 0\n  if (size === 0) {\n    return <></>\n  }\n  const content = (\n    <Tooltip\n      title={tooltipText}\n      placement=\"bottom\"\n      enterNextDelay={TOOLTIP_DELAY_SHOW}\n    >\n      <span>\n        <span className=\"SRC-primary-text-color\">\n          <IconSvg icon=\"cart\" />\n        </span>\n        <span className={`download-cart-size`}>{size}</span>\n      </span>\n    </Tooltip>\n  )\n  return (\n    <a\n      className={`Download-Link v2 ${className}`}\n      href={to}\n      rel=\"noopener noreferrer\"\n    >\n      {content}\n    </a>\n  )\n}\n\nexport default ShowDownloadV2\n","import { Meta, StoryObj } from '@storybook/react';\nimport ShowDownloadV2 from '../src/lib/containers/download_list_v2/ShowDownloadV2';\nconst meta: Meta = ({\n  title: 'Download/ShowDownloadV2',\n  component: ShowDownloadV2\n} satisfies Meta);\nexport default meta;\ntype Story = StoryObj<typeof meta>;\nexport const Demo: Story = {\n  args: {\n    to: '/#/Other%20Components?id=downloadcartpage'\n  }\n};\nDemo.parameters = {\n  ...Demo.parameters,\n  docs: {\n    ...Demo.parameters?.docs,\n    source: {\n      originalSource: \"{\\n  args: {\\n    to: '/#/Other%20Components?id=downloadcartpage'\\n  }\\n}\",\n      ...Demo.parameters?.docs?.source\n    }\n  }\n};"],"names":["ShowDownloadV2","to","className","accessToken","useSynapseContext","handleError","useErrorHandler","tooltipText","data","isLoading","isError","newError","useGetDownloadListStatistics","useEffect","jsx","Fragment","size","content","Tooltip","TOOLTIP_DELAY_SHOW","jsxs","IconSvg","meta","Demo","_a","_c","_b"],"mappings":"q7CAiBA,SAAAA,EAAA,CAAA,GAAAC,EAAA,UAAAC,EAAA,EAAA,EAAA,CACE,KAAA,CAAA,YAAAC,GAAAC,IACAC,EAAAC,IACAC,EAAA,6CAEA,CAAM,KAAAC,EACJ,UAAAC,EACA,QAAAC,EACA,MAAAC,CACO,EAAAC,EAAA,EAST,GANAC,EAAAA,UAAA,IAAA,CACEH,GAAAC,GAAAR,GACEE,EAAAM,CAAA,CACF,EAAA,CAAAD,EAAAC,EAAAN,EAAAF,CAAA,CAAA,EAGF,CAAAA,GAAAM,EACE,OAAAK,EAAAC,EAAA,CAAA,CAAA,EAGF,MAAAC,GAAAR,GAAA,YAAAA,EAAA,qBAAA,EACA,GAAAQ,IAAA,EACE,OAAAF,EAAAC,EAAA,CAAA,CAAA,EAEF,MAAAE,EAAAH,EACEI,EAAC,CAAA,MAAAX,EACQ,UAAA,SACG,eAAAY,EACM,SAAAC,EAAA,OAAA,CAAA,SAAA,CAGdN,EAAA,OAAA,CAAA,UAAA,yBAAA,SAAAA,EAAAO,EAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,EAEAP,EAAA,OAAA,CAAA,UAAA,qBAAA,SAAAE,EAAA,CAC6C,EAAA,CAC/C,CAAA,EAGJ,OAAAF,EACE,IAAC,CAAA,UAAA,oBAAAZ,IACgC,KAAAD,EACzB,IAAA,sBACF,SAAAgB,CAEH,CAAA,CAGP;2TChEA,MAAMK,GAAc,CAClB,MAAO,0BACP,UAAWtB,CACb,EAGauB,EAAc,CACzB,KAAM,CACJ,GAAI,2CACN,CACF,YACAA,EAAK,WAAa,CAChB,GAAGA,EAAK,WACR,KAAM,CACJ,IAAGC,EAAAD,EAAK,aAAL,YAAAC,EAAiB,KACpB,OAAQ,CACN,eAAgB;AAAA;AAAA;AAAA;AAAA,GAChB,IAAGC,GAAAC,EAAAH,EAAK,aAAL,YAAAG,EAAiB,OAAjB,YAAAD,EAAuB,MAC5B,CACF,CACF"}