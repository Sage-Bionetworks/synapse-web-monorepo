import{r as n}from"./index-DBlnVwD8.js";import{j as k}from"./jsx-runtime-DBMcmXCa.js";import{u as C}from"./useForkRef-Dc8viUTi.js";import{g as T}from"./utils-BYTqi8xE.js";import{u as x}from"./useEventCallback-D9ysatRx.js";import{o as p}from"./ownerDocument-DW-IO8s5.js";function v(c){return c.substring(2).toLowerCase()}function w(c,s){return s.documentElement.clientWidth<c.clientX||s.documentElement.clientHeight<c.clientY}function M(c){const{children:s,disableReactTree:R=!1,mouseEvent:i="onClick",onClickAway:L,touchEvent:u="onTouchEnd"}=c,f=n.useRef(!1),o=n.useRef(null),l=n.useRef(!1),d=n.useRef(!1);n.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const g=C(T(s),o),a=x(e=>{const t=d.current;d.current=!1;const r=p(o.current);if(!l.current||!o.current||"clientX"in e&&w(e,r))return;if(f.current){f.current=!1;return}let E;e.composedPath?E=e.composedPath().indexOf(o.current)>-1:E=!r.documentElement.contains(e.target)||o.current.contains(e.target),!E&&(R||!t)&&L(e)}),h=e=>t=>{d.current=!0;const r=s.props[e];r&&r(t)},m={ref:g};return u!==!1&&(m[u]=h(u)),n.useEffect(()=>{if(u!==!1){const e=v(u),t=p(o.current),r=()=>{f.current=!0};return t.addEventListener(e,a),t.addEventListener("touchmove",r),()=>{t.removeEventListener(e,a),t.removeEventListener("touchmove",r)}}},[a,u]),i!==!1&&(m[i]=h(i)),n.useEffect(()=>{if(i!==!1){const e=v(i),t=p(o.current);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}},[a,i]),k.jsx(n.Fragment,{children:n.cloneElement(s,m)})}export{M as C};
