{"version":3,"file":"LoginPage.stories-bcb7d5fe.js","sources":["../../src/components/Authentication/LoginPage.tsx"],"sourcesContent":["import React from 'react'\nimport {\n  Box,\n  Stack,\n  styled,\n  Link,\n  Typography,\n  TypographyProps,\n  useTheme,\n} from '@mui/material'\nimport { LeftRightPanel } from '../styled/LeftRightPanel'\nimport useShowDesktop from '../../utils/hooks/useShowDesktop'\nimport LoginFlowBackButton from './LoginFlowBackButton'\nimport useLogin from '../../utils/hooks/useLogin'\nimport LoginForm from './LoginForm'\nimport { StyledComponent } from '@emotion/styled'\nimport SystemUseNotification from '../SystemUseNotification/SystemUseNotification'\n\nconst LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE = encodeURIComponent(\n  'Lost access to my Synapse account',\n)\nconst LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION = encodeURIComponent(\n  '<Please provide your username and/or email address associated with your account.>',\n)\nconst LOST_ACCOUNT_ACCESS_CONTACT_URL = `https://sagebionetworks.jira.com/servicedesk/customer/portal/9/group/16/create/85?summary=${LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE}&description=${LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION}`\n\nexport type LoginPageProps = {\n  ssoRedirectUrl?: string\n  sessionCallback: () => void // Callback is invoked after login\n}\n\nconst Tagline: StyledComponent<TypographyProps> = styled(Typography, {\n  label: 'Tagline',\n})(({ theme }) => ({\n  marginBottom: theme.spacing(2),\n  font: '300 24px/34px Lato, sans-serif',\n}))\n\nfunction BackupCodeInstructions(props: TypographyProps) {\n  return (\n    <>\n      <Typography {...props}>\n        Your backup code is a 16 digit code, with groups of 4 letters or numbers\n        separated by hyphens, like this:\n      </Typography>\n      <Typography\n        {...props}\n        component={'div' as any}\n        variant={'monospace'}\n        sx={{ my: 1, fontSize: '18px' }}\n      >\n        xxxx-xxxx-xxxx-xxxx\n      </Typography>\n      <Typography {...props}>\n        Each code can only be used once. If you donâ€™t have access to these\n        codes, please{' '}\n        <Link href={LOST_ACCOUNT_ACCESS_CONTACT_URL}>contact us</Link>.\n      </Typography>\n    </>\n  )\n}\n\nexport default function LoginPage(props: LoginPageProps) {\n  const { ssoRedirectUrl, sessionCallback } = props\n  const showDesktop = useShowDesktop(910)\n  const theme = useTheme()\n\n  const {\n    step,\n    onStepChange,\n    submitUsernameAndPassword,\n    submitOneTimePassword,\n    errorMessage,\n    isLoading,\n  } = useLogin(sessionCallback)\n\n  const loginForm = (\n    <Stack\n      alignItems={'stretch'}\n      sx={{ height: '100%', width: '325px', mx: 'auto' }}\n    >\n      {!showDesktop && (\n        <Stack flexDirection={'row'}>\n          <LoginFlowBackButton step={step} onStepChange={onStepChange} />\n        </Stack>\n      )}\n\n      <Box\n        sx={{\n          mb: 4,\n          textAlign: 'center',\n          maxWidth: '90vw',\n        }}\n      >\n        <img\n          alt={'Synapse logo'}\n          src={\n            'https://s3.amazonaws.com/static.synapse.org/images/synapse-logo-blue.svg'\n          }\n        />\n        {!showDesktop && (\n          <Typography variant=\"body1\" align=\"center\" sx={{ my: 1 }}>\n            Organize. Get credit. Collaborate.\n          </Typography>\n        )}\n      </Box>\n      {!showDesktop && step === 'VERIFICATION_CODE' && (\n        <Typography variant={'body1'} align={'center'} sx={{ my: 1 }}>\n          Enter the 6-digit, time-based verification code provided by your\n          authenticator app.\n        </Typography>\n      )}\n      {!showDesktop && step === 'RECOVERY_CODE' && (\n        <BackupCodeInstructions\n          variant={'body1'}\n          align={'center'}\n          sx={{ my: 1 }}\n        />\n      )}\n      <LoginForm\n        ssoRedirectUrl={ssoRedirectUrl}\n        step={step}\n        onStepChange={onStepChange}\n        submitUsernameAndPassword={submitUsernameAndPassword}\n        submitOneTimePassword={submitOneTimePassword}\n        errorMessage={errorMessage}\n        isLoading={isLoading}\n      />\n    </Stack>\n  )\n\n  if (showDesktop) {\n    return (\n      <LeftRightPanel\n        leftContent={\n          <>\n            <Box sx={{ py: 15, px: 8, height: '100%', position: 'relative' }}>\n              <LoginFlowBackButton\n                step={step}\n                onStepChange={onStepChange}\n                sx={{\n                  position: 'absolute',\n                  top: theme.spacing(2),\n                  left: theme.spacing(2),\n                }}\n              />\n              {loginForm}\n            </Box>\n          </>\n        }\n        rightContent={\n          <Box\n            sx={{\n              py: 15,\n              height: '100%',\n              background:\n                \"url('https://s3.amazonaws.com/static.synapse.org/images/login-panel-bg.svg') no-repeat right bottom 5px\",\n            }}\n          >\n            <Box\n              sx={{\n                px: 9,\n                color: '#1e4964',\n              }}\n            >\n              {step === 'VERIFICATION_CODE' && (\n                <>\n                  <Typography variant=\"headline1\" sx={{ mb: 4 }}>\n                    Enter your verification code\n                  </Typography>\n                  <Typography variant={'headline2'} sx={{ lineHeight: '30px' }}>\n                    Enter the 6-digit, time-based verification code provided by\n                    your authenticator app.\n                  </Typography>\n                </>\n              )}\n              {step === 'RECOVERY_CODE' && (\n                <>\n                  <Typography variant=\"headline1\" sx={{ mb: 4 }}>\n                    Enter your backup code\n                  </Typography>\n                  <BackupCodeInstructions\n                    variant={'body1'}\n                    sx={{ fontSize: '18px', lineHeight: '30px' }}\n                  />\n                </>\n              )}\n              {step !== 'VERIFICATION_CODE' && step !== 'RECOVERY_CODE' && (\n                <>\n                  <Tagline variant=\"headline2\">\n                    <strong>Organize</strong> your digital research assets.\n                  </Tagline>\n                  <Tagline variant=\"headline2\">\n                    <strong>Get credit</strong> for your research.\n                  </Tagline>\n                  <Tagline variant=\"headline2\">\n                    <strong>Collaborate</strong> with your colleagues and the\n                    public.\n                  </Tagline>\n                </>\n              )}\n              <SystemUseNotification />\n            </Box>\n          </Box>\n        }\n      />\n    )\n  } else {\n    return (\n      <Box\n        sx={{\n          px: 0,\n          py: 12,\n          height: '95vh',\n          background:\n            \"#fff url('https://s3.amazonaws.com/static.synapse.org/images/SynapseMobileLogInFull.svg') 50% 50%\",\n          backgroundSize: 'contain',\n        }}\n      >\n        {loginForm}\n        <SystemUseNotification />\n      </Box>\n    )\n  }\n}\n"],"names":["LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE","LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION","LOST_ACCOUNT_ACCESS_CONTACT_URL","Tagline","styled","Typography","theme","BackupCodeInstructions","props","jsxs","Fragment","jsx","Link","LoginPage","ssoRedirectUrl","sessionCallback","showDesktop","useShowDesktop","useTheme","step","onStepChange","submitUsernameAndPassword","submitOneTimePassword","errorMessage","isLoading","useLogin","loginForm","Stack","LoginFlowBackButton","Box","LoginForm","LeftRightPanel","SystemUseNotification"],"mappings":"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"}