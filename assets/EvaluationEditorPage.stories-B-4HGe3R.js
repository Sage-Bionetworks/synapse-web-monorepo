import{g as Ge}from"./userProfileHandlers-CuOZjVro.js";import{M as Ke}from"./mock_user_profile-CCzWeUML.js";import{l as ne,S as N,k as ie,b_ as $e,b$ as He,c0 as Ye,c1 as ze,M as B}from"./useFiles-DaYozhj8.js";import{f as Ze}from"./index-Li1rbyPN.js";import{d as S}from"./dayjs.min-CmsqEN2B.js";import{h as de,H as ce}from"./index-BvSm7KhP.js";import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{r as d}from"./index-BULbjeCJ.js";import"./VerificationSubmission-OWkqLMYZ.js";import"./StringUtils-C5rFena9.js";import{I as oe,C as Qe}from"./IconSvg-B9hfSZ8b.js";import{W as _e}from"./WarningDialog-DimkJ7pk.js";import{C as Je}from"./CreatedOnByUserDiv-DMOYN55r.js";import{B as y}from"./Box-DqnviQW6.js";import{S as Xe}from"./Stack-BFFoH8un.js";import{T as C}from"./TextField-DWqUXiXM.js";import{A as ae}from"./Alert-CClpx-g6.js";import{B as L}from"./Button-r_CHdG4P.js";import{I as k}from"./IconButton-DMIkHh5_.js";import{M as Ne}from"./Menu-CRXApges.js";import{M}from"./MenuItem-Bgzxc3eL.js";import{D as Oe}from"./Divider-ByveBpYk.js";import{a as et,g as Ae}from"./iframe-D8Kty_Cx.js";import{u as tt}from"./utc-2ERhW0do.js";import{D as me}from"./DateTimePicker-BBS0jf_m.js";import{S as rt}from"./StyledFormControl-DT9rcc2-.js";import{I as nt}from"./InputLabel-BQfg7ZrY.js";import{S as it}from"./Select-CB88SsIZ.js";import{c as ot}from"./createSvgIcon-C0GalzBE.js";import{C as at}from"./Card-CFdSTJ8U.js";import{C as st}from"./CardContent-G0Zq45ad.js";import{G as P}from"./Grid-brNDB5L9.js";import{u as ut}from"./upperFirst-CgSRJchM.js";import"./mockEntity-rwAKFgeD.js";import"./mockFileEntity-DQrGAgb2.js";import"./mock_file_handle-CidTpPtG.js";import"./mockProject-B5zS2fHz.js";import"./mockTeam-CNxiejhI.js";import"./SynapseConstants-CZPiPVFz.js";import"./OrientationBanner-B2DF_DFi.js";import"./index-B1UExM3p.js";import"./spreadSx-CwcO6WA9.js";import"./react-D4pAv_N3.js";import"./FullWidthAlert-EAoJPxu-.js";import"./AlertTitle-geORYhAF.js";import"./createTheme-ev_cnLba.js";import"./DefaultPropsProvider-BYuvptnG.js";import"./Typography-DitlkZyP.js";import"./index-ClN6qXii.js";import"./extendSxProp-Ce12OY0O.js";import"./useTheme-dcyxTKNU.js";import"./createSimplePaletteValueFilter-C5m0hHOH.js";import"./useTimeout-DWmVZNbT.js";import"./useForkRef-7bnDI6EI.js";import"./useSlot-BwDIOyOX.js";import"./useTheme-B5FTPKZL.js";import"./ClickAwayListener-BbaBQeHw.js";import"./getReactElementRef-D0uGMMsH.js";import"./index-fk2bcQrb.js";import"./index-Dct6V00c.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-Cx_w1032.js";import"./Grow-D5RDzHRC.js";import"./Tooltip-BLYw3Ezs.js";import"./index-B4uz7QPW.js";import"./useControlled-ByKzLjYb.js";import"./Popper-1vHQSSRm.js";import"./isFocusVisible-B8k4qzLc.js";import"./uniqueId-pXwkMJKM.js";import"./toString-C59pQWTJ.js";import"./isArray-tOqOrFMs.js";import"./isSymbol-Cy-jvChq.js";import"./times-DcD14I14.js";import"./_Uint8Array-Cji-Snuo.js";import"./identity-DKeuBCMA.js";import"./toInteger-B1OGm4wT.js";import"./fetchWithExponentialTimeout-CXmnpl-T.js";import"./useQuery-Mk4mN9q8.js";import"./QueryClientProvider-C83H8mhw.js";import"./Link-DxLeV4Tk.js";import"./Collapse-Cd_tDlUa.js";import"./_baseUniq-DnPxHH0Q.js";import"./_getTag-C3CHM0S0.js";import"./isEqual-BQ3mKdqC.js";import"./merge-Dr5C9d-b.js";import"./_initCloneObject-CM0Vu1zc.js";import"./tinycolor-Begke6kS.js";import"./Fade-7vaEf5cW.js";import"./inputBaseClasses-BsVVbgu8.js";import"./calculateFriendlyFileSize-aCuYBZYU.js";import"./CheckCircleTwoTone-CxOtohD-.js";import"./InfoTwoTone-CqaUMjXS.js";import"./useMutation-CZS0_A_1.js";import"./chunk-AYJ5UCUI-BnMQ8BOG.js";import"./cloneDeep-oCmGEZxM.js";import"./Skeleton-jbL9UTdY.js";import"./LayersTwoTone-BOldY-gg.js";import"./ContentCopyTwoTone-8iMl59pp.js";import"./HelpOutlineTwoTone-cEfGehVY.js";import"./ErrorOutlined-B2IUGmwu.js";import"./GetAppTwoTone-HQzW4G29.js";import"./InfoOutlined-Cuz6UmXs.js";import"./PhoneTwoTone-DvS3lZTo.js";import"./DeleteTwoTone-Uo3InDYw.js";import"./ConfirmationDialog-DCbMfNM-.js";import"./DialogBase-Cgo56woA.js";import"./Close-DldELmOF.js";import"./HelpPopover--ci_leld.js";import"./MarkdownPopover-Sj_H2cUK.js";import"./LightTooltip-C8snDZDr.js";import"./MarkdownSynapse-I4pwtJjs.js";import"./SkeletonButton-DogY7bbu.js";import"./SkeletonInlineBlock-Bgp2oViA.js";import"./SkeletonTable-BHD6Ddwk.js";import"./SkeletonParagraph-bNKAs0JR.js";import"./DialogTitle-OQaOV0OO.js";import"./DialogContent-D9JShryt.js";import"./Dialog-DEJoIf4Z.js";import"./Modal-CiOPvVDL.js";import"./getScrollbarSize-CaCM53D3.js";import"./ownerWindow-HkKU3E4x.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Backdrop-B74hGJY7.js";import"./DateFormatter-C2YJspTu.js";import"./localizedFormat-ClGAgTmU.js";import"./UserBadge-H42BVsi7.js";import"./Popover-Ba14RFVF.js";import"./isHostComponent-DVu5iVWx.js";import"./debounce-Be36O1Ab.js";import"./mergeSlotProps-D8hcFxdl.js";import"./ToastMessage-D0bfbfMg.js";import"./ButtonBase-CiAIFq4G.js";import"./CSSTransition-CgSQe5k1.js";import"./Avatar-qg9wzVAV.js";import"./Chip-CdlBsmoY.js";import"./getThemeProps-BORvnqwy.js";import"./Input-Cp_0rTjQ.js";import"./InputBase-DoXwf80h.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-BSvh4muO.js";import"./FormControl-DXT-fvAL.js";import"./isMuiElement-5XsBl8pu.js";import"./FormHelperText-Bahc3Gs1.js";import"./Close-CYhpPBds.js";import"./CircularProgress-BwBC6jxn.js";import"./MenuList-Dd4jdJLB.js";import"./List-B5DVtVKN.js";import"./dividerClasses-CnMYlE5n.js";import"./useMobilePicker-PPSg4zvj.js";import"./index-B-A2VHmG.js";import"./index-Chjiymov.js";import"./visuallyHidden-Dan1xhjv.js";import"./InputAdornment-rtGzNAtE.js";import"./index-CXmlWm6P.js";import"./ListItem-D2P90m3b.js";import"./listItemButtonClasses-D56xwOsp.js";import"./Tabs-5jM2ExvA.js";import"./KeyboardArrowRight-_gQzcVQP.js";import"./FormLabel-BV9Qfh4W.js";import"./_stringToArray-N8cAV6t0.js";import"./_baseSlice-F8doVSIJ.js";const De=e=>{const[r,n]=d.useState(e);return{list:r,handleListChange:s=>a=>{const l=[...r];l[s]=a,n(l)},handleListRemove:s=>()=>{const a=r.filter((l,c)=>s!==c);n(a)},appendToList:(...s)=>{const a=[...r];a.push(...s),n(a)},setList:n}},lt=ot(t.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}));function Z({evaluationId:e,entityId:r,onDeleteSuccess:n,onSaveSuccess:i}){if(e&&r)throw new Error("please use either evaluationId or entityId but not both");const{accessToken:o}=ne(),[u,s]=d.useState(),[a,l]=d.useState(!1);d.useEffect(()=>{u&&l(!1)},[u]);const[c,g]=d.useState(""),[j,b]=d.useState(""),[m,v]=d.useState(""),[E,x]=d.useState(""),[p,w]=d.useState({contentSource:r});d.useEffect(()=>{g(p.name??""),b(p.description??""),v(p.submissionInstructionsMessage??""),x(p.submissionReceiptMessage??"")},[p]),d.useEffect(()=>{e&&(s(void 0),N.getEvaluation(e,o).then(f=>{w(f)}).catch(f=>s(f)))},[e,o]);const T=()=>{s(void 0),l(!1);const f={...p,name:c,description:j,submissionInstructionsMessage:m,submissionReceiptMessage:E};(f.id?N.updateEvaluation(f,o):N.createEvaluation(f,o)).then(I=>{w(I),l(!0),i&&i(I.id)}).catch(I=>s(I))},R=p!=null&&p.id?()=>{s(void 0),N.deleteEvaluation(p.id,o).then(n).catch(f=>s(f))}:void 0;return t.jsxs("div",{className:"evaluation-editor",children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("h4",{children:[p.id?"Edit":"Create"," Evaluation Queue"]}),t.jsx(dt,{onClick:T,onDelete:R})]}),t.jsxs(Xe,{sx:{gap:2},children:[t.jsx(C,{label:"Name",fullWidth:!0,value:c,onChange:f=>g(f.target.value)}),t.jsx(C,{label:"Description",fullWidth:!0,multiline:!0,value:j,rows:2,onChange:f=>b(f.target.value)}),t.jsx(C,{fullWidth:!0,label:"Submission Instructions",value:m,multiline:!0,rows:2,onChange:f=>v(f.target.value)}),t.jsx(C,{label:"Submission Receipt Message",fullWidth:!0,value:E,onChange:f=>x(f.target.value)}),(p==null?void 0:p.createdOn)&&t.jsx(Je,{userId:p.ownerId,date:new Date(p.createdOn)}),u&&t.jsx(ie,{error:u}),a&&t.jsx(ae,{className:"save-success-alert",severity:"success",onClose:()=>l(!1),sx:{marginBottom:"20px"},children:"Successfully saved."}),t.jsx(y,{sx:{mb:3,alignSelf:"flex-end"},children:t.jsx(L,{variant:"contained",color:"primary",className:"save-button",onClick:T,children:"Save"})})]})]})}function dt({onClick:e,onDelete:r}){const[n,i]=d.useState(!1),[o,u]=d.useState(null),s=!!o,a=c=>{u(c.currentTarget)},l=()=>{u(null)};return t.jsxs(t.Fragment,{children:[r&&t.jsx(_e,{title:"Delete Evaluation Queue",content:"Are you sure you want to delete this Evaluation Queue?",open:n,confirmButtonText:"Delete",onConfirm:()=>{r(),i(!1)},onConfirmCallbackArgs:[],onCancel:()=>{i(!1)},confirmButtonColor:"error"}),t.jsx(k,{onClick:a,children:t.jsx(oe,{icon:"verticalEllipsis",wrap:!1})}),t.jsxs(Ne,{anchorEl:o,open:s,onClose:l,slotProps:{paper:{sx:{minWidth:"120px"}}},children:[t.jsx(M,{onClick:()=>{l(),e()},children:"Save"}),r&&t.jsx(Oe,{}),r&&t.jsx(M,{onClick:()=>{l(),i(!0)},children:"Delete"})]})]})}try{Z.displayName="EvaluationEditor",Z.__docgenInfo={description:"Edits basic properties of an Evaluation",displayName:"EvaluationEditor",props:{evaluationId:{defaultValue:null,description:"Use if UPDATING an existing Evaluation. Id of the evaluation to edit",name:"evaluationId",required:!1,type:{name:"string"}},entityId:{defaultValue:null,description:"Use if CREATING a new Evaluation. Id of the Entity that will be associated with the Evaluation",name:"entityId",required:!1,type:{name:"string"}},onDeleteSuccess:{defaultValue:null,description:"Callback after successful deletion of the Evaluation",name:"onDeleteSuccess",required:!0,type:{name:"() => void"}},onSaveSuccess:{defaultValue:null,description:"Callback after successful save of the Evaluation",name:"onSaveSuccess",required:!1,type:{name:"(evaluationId: string) => void"}}}}}catch{}var U={exports:{}},W,pe;function ct(){if(pe)return W;pe=1;var e=1;function r(){return e=(e*9301+49297)%233280,e/233280}function n(i){e=i}return W={nextValue:r,seed:n},W}var F,fe;function q(){if(fe)return F;fe=1;var e=ct(),r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",n,i,o;function u(){o=!1}function s(m){if(!m){n!==r&&(n=r,u());return}if(m!==n){if(m.length!==r.length)throw new Error("Custom alphabet for shortid must be "+r.length+" unique characters. You submitted "+m.length+" characters: "+m);var v=m.split("").filter(function(E,x,p){return x!==p.lastIndexOf(E)});if(v.length)throw new Error("Custom alphabet for shortid must be "+r.length+" unique characters. These characters were not unique: "+v.join(", "));n=m,u()}}function a(m){return s(m),n}function l(m){e.seed(m),i!==m&&(u(),i=m)}function c(){n||s(r);for(var m=n.split(""),v=[],E=e.nextValue(),x;m.length>0;)E=e.nextValue(),x=Math.floor(E*m.length),v.push(m.splice(x,1)[0]);return v.join("")}function g(){return o||(o=c(),o)}function j(m){var v=g();return v[m]}function b(){return n||r}return F={get:b,characters:a,seed:l,lookup:j,shuffled:g},F}var G,he;function mt(){if(he)return G;he=1;var e=typeof window=="object"&&(window.crypto||window.msCrypto),r;return!e||!e.getRandomValues?r=function(n){for(var i=[],o=0;o<n;o++)i.push(Math.floor(Math.random()*256));return i}:r=function(n){return e.getRandomValues(new Uint8Array(n))},G=r,G}let pt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ke=e=>crypto.getRandomValues(new Uint8Array(e)),Me=(e,r,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*r/e.length);return(u=r)=>{let s="";for(;;){let a=n(o),l=o|0;for(;l--;)if(s+=e[a[l]&i]||"",s.length===u)return s}}},ft=(e,r=21)=>Me(e,r,ke),ht=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((r,n)=>(n&=63,n<36?r+=n.toString(36):n<62?r+=(n-26).toString(36).toUpperCase():n>62?r+="-":r+="_",r),"");const vt=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:ft,customRandom:Me,nanoid:ht,random:ke,urlAlphabet:pt},Symbol.toStringTag,{value:"Module"})),St=et(vt);var K,ve;function gt(){if(ve)return K;ve=1;var e=q(),r=mt(),n=St.customRandom;function i(o){for(var u=0,s,a="";!s;)a=a+n(e.get(),1,r)(),s=o<Math.pow(16,u+1),u++;return a}return K=i,K}var $,Se;function Et(){if(Se)return $;Se=1;var e=gt();q();var r=1567752802062,n=7,i,o;function u(s){var a="",l=Math.floor((Date.now()-r)*.001);return l===o?i++:(i=0,o=l),a=a+e(n),a=a+e(s),i>0&&(a=a+e(i)),a=a+e(l),a}return $=u,$}var H,ge;function xt(){if(ge)return H;ge=1;var e=q();function r(n){if(!n||typeof n!="string"||n.length<6)return!1;var i=new RegExp("[^"+e.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!i.test(n)}return H=r,H}var Y,Ee;function yt(){return Ee||(Ee=1,Y=0),Y}var xe;function bt(){return xe||(xe=1,function(e){var r=q(),n=Et(),i=xt(),o=yt()||0;function u(c){return r.seed(c),e.exports}function s(c){return o=c,e.exports}function a(c){return c!==void 0&&r.characters(c),r.shuffled()}function l(){return n(o)}e.exports=l,e.exports.generate=l,e.exports.seed=u,e.exports.worker=s,e.exports.characters=a,e.exports.isValid=i}(U)),U.exports}var z,ye;function jt(){return ye||(ye=1,z=bt()),z}var It=jt();const qe=Ae(It);var D={exports:{}},Ct=D.exports,be;function Rt(){return be||(be=1,function(e,r){(function(n,i){e.exports=i()})(Ct,function(){return function(n,i){i.prototype.isSameOrAfter=function(o,u){return this.isSame(o,u)||this.isAfter(o,u)}}})}(D)),D.exports}var Lt=Rt();const wt=Ae(Lt);function Q({onSave:e,onDelete:r}){const[n,i]=d.useState(!1),[o,u]=d.useState(null),s=!!o,a=c=>{u(c.currentTarget)},l=()=>{u(null)};return t.jsxs(t.Fragment,{children:[t.jsx(_e,{title:"Delete Evaluation Round",content:"Are you sure you want to delete this Evaluation Round?",open:n,confirmButtonText:"Delete",onConfirm:()=>{r(),i(!1)},onConfirmCallbackArgs:[],onCancel:()=>{i(!1)},confirmButtonColor:"error"}),t.jsx(k,{onClick:a,"aria-label":"Round Options",children:t.jsx(oe,{icon:"verticalEllipsis",wrap:!1})}),t.jsxs(Ne,{"aria-label":"Round Options",anchorEl:o,open:s,onClose:l,slotProps:{paper:{sx:{minWidth:"120px"}}},children:[t.jsx(M,{onClick:()=>{l(),e()},children:"Save"}),t.jsx(Oe,{}),t.jsx(M,{onClick:()=>{l(),i(!0)},children:"Delete"})]})]})}try{Q.displayName="EvaluationRoundEditorDropdown",Q.__docgenInfo={description:"",displayName:"EvaluationRoundEditorDropdown",props:{onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"() => void"}}}}}catch{}const Ve=(e,r)=>({reactListKey:r??qe.generate(),evaluationId:e.evaluationId,id:e.id,etag:e.etag,roundStart:e.roundStart,roundEnd:e.roundEnd,totalSubmissionLimit:Tt(e.limits),otherLimits:_t(e.limits)}),Tt=e=>(e||[]).filter(r=>r.limitType==="TOTAL").reduce((r,n)=>n.maximumSubmissions.toString(),""),_t=e=>(e||[]).filter(r=>r.limitType!=="TOTAL").reduce((r,n)=>(r.push({type:n.limitType,maxSubmissionString:n.maximumSubmissions.toString()}),r),[]),Be={DAILY:"Daily Limit",WEEKLY:"Weekly Limit",MONTHLY:"Monthly Limit"};function J({limitInput:e,allSelectedTypes:r,onChange:n}){return t.jsxs(t.Fragment,{children:[t.jsxs(rt,{className:"limit-type",children:[t.jsx(nt,{children:"Limit Type"}),t.jsx(it,{fullWidth:!0,native:!0,value:e.type,onChange:i=>{n({type:i.target.value,maxSubmissionString:e.maxSubmissionString})},children:Object.entries(Be).map(([i,o])=>t.jsx("option",{value:i,disabled:r.has(i)&&i!==e.type,children:o},i))})]}),t.jsx(C,{fullWidth:!0,className:"limit-input",label:"Maximum Submissions",value:e.maxSubmissionString,onChange:i=>{n({type:e.type,maxSubmissionString:i.target.value})},slotProps:{htmlInput:{pattern:"[0-9]*"}}})]})}try{J.displayName="EvaluationRoundLimitOptions",J.__docgenInfo={description:"",displayName:"EvaluationRoundLimitOptions",props:{limitInput:{defaultValue:null,description:"",name:"limitInput",required:!0,type:{name:"EvaluationRoundLimitInput"}},allSelectedTypes:{defaultValue:null,description:"",name:"allSelectedTypes",required:!0,type:{name:"Set<EvaluationRoundLimitType>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(limitInput: EvaluationRoundLimitInput) => void"}}}}}catch{}const Pe=Object.keys(Be),Nt=e=>Pe.find(r=>!e.has(r));function X({limitInputs:e,handleChange:r,handleDeleteLimit:n,onAddNewLimit:i}){const o=new Set(e.map(s=>s.type)),u=d.useCallback(()=>{i({type:Nt(o),maxSubmissionString:""})},[i,o]);return d.useEffect(()=>{e.length===0&&u()},[e,u]),t.jsx("div",{"data-testid":"EvaluationRoundLimitOptionsList",className:"advanced-limits-grid",children:e.map((s,a)=>t.jsxs(d.Fragment,{children:[t.jsx(J,{limitInput:s,allSelectedTypes:o,onChange:r(a)}),t.jsx(k,{size:"small",color:"primary","aria-label":"Remove",className:"remove-button",onClick:n(a),sx:{height:"40px",width:"40px"},children:t.jsx(Qe,{})}),a===e.length-1&&e.length<Pe.length&&t.jsx(k,{size:"small",color:"primary","aria-label":"Add",onClick:u,className:"add-button",sx:{height:"40px",width:"40px"},children:t.jsx(lt,{})})]},s.type))})}try{X.displayName="EvaluationRoundLimitOptionsList",X.__docgenInfo={description:"",displayName:"EvaluationRoundLimitOptionsList",props:{limitInputs:{defaultValue:null,description:"",name:"limitInputs",required:!0,type:{name:"EvaluationRoundLimitInput[]"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(index: number) => (limitInput: EvaluationRoundLimitInput) => void"}},handleDeleteLimit:{defaultValue:null,description:"",name:"handleDeleteLimit",required:!0,type:{name:"(index: number) => () => void"}},onAddNewLimit:{defaultValue:null,description:"",name:"onAddNewLimit",required:!0,type:{name:"(limit: EvaluationRoundLimitInput) => void"}}}}}catch{}S.extend(tt);S.extend(wt);const Ot=(e,r)=>{let n,i,o;const u=S();return u.isSameOrAfter(e)?u.isBefore(r)?(n="status-in-progress",i={icon:"sync"},o="IN PROGRESS"):(n="status-completed",i={icon:"clipboardCheck"},o="COMPLETED"):(n="status-not-yet-started",i=void 0,o="NOT YET STARTED"),t.jsx("div",{className:n,children:t.jsxs("div",{className:"status",children:[i&&t.jsx(oe,{...i}),t.jsx("span",{children:o})]})})},At=(e,r,n,i,o)=>{const u=[];if(i){const s=Number(i);if(Number.isNaN(s))throw TypeError("Total Submission is not an integer");u.push({limitType:"TOTAL",maximumSubmissions:s})}return o.forEach(s=>{if(s.maxSubmissionString){const a=Number(s.maxSubmissionString);if(Number.isNaN(a))throw TypeError(s.type+" Limit is not an integer");u.push({limitType:s.type,maximumSubmissions:a})}}),{id:e.id,etag:e.etag,evaluationId:e.evaluationId,roundStart:S.utc(r).toJSON(),roundEnd:S.utc(n).toJSON(),limits:u}};function je(e,r){if(r==null)return null;switch(r){case"disablePast":return`${ut(e)} date cannot be in the past`;case"invalidDate":default:return"Invalid date"}}function ee({evaluationRoundInput:e,onSave:r,onDelete:n}){const{accessToken:i}=ne(),[o,u]=d.useState(),[s,a]=d.useState(!1);d.useEffect(()=>{o&&a(!1)},[o]);const[l,c]=d.useState(e.roundStart?S(e.roundStart):null),[g,j]=d.useState(e.roundEnd?S(e.roundEnd):null),[b,m]=d.useState(e.totalSubmissionLimit),[v,E]=d.useState(!1),[x,p]=d.useState(null),[w,T]=d.useState(null),{list:R,handleListRemove:f,handleListChange:se,appendToList:I}=De(e.otherLimits),Ue=h=>{const _=f(h);return()=>{_(),R.length===1&&E(!1)}},ue=()=>{a(!1);let h;try{h=At(e,l,g,b,R)}catch(_){u(_)}h&&(h.id?$e(h,i):He(h,i)).then(V=>{const Fe=Ve(V,e.reactListKey);u(void 0),a(!0),r(Fe)}).catch(V=>u(V))},We=()=>{e.id?Ye(e.evaluationId,e.id,i).then(()=>n()).catch(h=>u(h)):n()},le=S().isSameOrAfter(e.roundStart);return t.jsx("div",{className:"evaluation-round-editor",children:t.jsx(at,{children:t.jsx(st,{sx:{p:3},children:t.jsxs("form",{"aria-label":"Evaluation Round Form",children:[t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs("h5",{children:["ROUND STATUS",e.id&&" ("+e.id+")"]}),t.jsx(Q,{onDelete:We,onSave:ue})]}),t.jsx(y,{className:"round-status",sx:{mb:2},children:Ot(e.roundStart,e.roundEnd)}),t.jsx("h5",{children:"DURATION"}),t.jsxs(P,{container:!0,children:[t.jsx(P,{size:6,children:t.jsx(me,{label:"Round Start",value:l,onChange:c,onError:h=>p(h),disabled:le,disablePast:!le,slotProps:{textField:{helperText:je("start",x)}}})}),t.jsx(P,{size:6,children:t.jsx(me,{label:"Round End",value:g,onChange:j,onError:h=>T(h),disablePast:!S(g).isSame(e.roundEnd),slotProps:{textField:{helperText:je("end",w)}}})})]}),t.jsx("h5",{style:{marginTop:"20px"},children:"SUBMISSION LIMITS"}),t.jsx(C,{fullWidth:!0,label:"Total Submissions / Round",value:b,onChange:h=>m(h.target.value),autoComplete:"new-password",slotProps:{htmlInput:{pattern:"[0-9]*"}}}),t.jsx(y,{sx:{my:2},children:t.jsx(L,{variant:"outlined",color:"primary",size:"small",onClick:()=>E(!v),children:"Advanced Limits"})}),v&&t.jsx(X,{limitInputs:R,handleChange:se,handleDeleteLimit:Ue,onAddNewLimit:I}),o&&t.jsx(y,{sx:{my:3},children:t.jsx(ie,{error:o})}),s&&t.jsx(y,{sx:{my:3},children:t.jsx(ae,{className:"save-success-alert",severity:"success",onClose:()=>a(!1),sx:{mb:"20px"},children:"Successfully saved."})}),t.jsx(y,{sx:{mt:3,textAlign:"right"},children:t.jsx(L,{variant:"contained",color:"primary",onClick:ue,children:"Save"})})]})})})})}try{ee.displayName="EvaluationRoundEditor",ee.__docgenInfo={description:"",displayName:"EvaluationRoundEditor",props:{evaluationRoundInput:{defaultValue:null,description:"",name:"evaluationRoundInput",required:!0,type:{name:"EvaluationRoundInput"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(evaluationRound: EvaluationRoundInput) => void"}}}}}catch{}const Dt=(e,r,n,i)=>{const o=[],u=s=>{ze(e,{nextPageToken:s},r).then(a=>{const l=a.page.map(c=>Ve(c));o.push(...l),i(void 0),a.nextPageToken?u(a.nextPageToken):n(o)}).catch(a=>{i(a)})};u(void 0)};function te({evaluationId:e}){const{accessToken:r}=ne(),[n,i]=d.useState(),{list:o,appendToList:u,handleListChange:s,handleListRemove:a,setList:l}=De([]);return d.useEffect(()=>{Dt(e,r,l,i)},[r,e]),n?t.jsx(ie,{error:n}):t.jsxs("div",{className:"evaluation-round-editor-list",children:[t.jsx("div",{className:"evaluation-rounds",children:o.map((c,g)=>t.jsx(ee,{evaluationRoundInput:c,onSave:s(g),onDelete:a(g)},c.reactListKey))}),t.jsx("div",{children:t.jsx(L,{className:"add-round-button",variant:"contained",color:"primary",onClick:()=>{u({reactListKey:qe(),evaluationId:e,roundStart:"",roundEnd:"",totalSubmissionLimit:"",otherLimits:[]})},children:"Add Round"})})]})}try{te.displayName="EvaluationRoundEditorList",te.__docgenInfo={description:"Edits EvaluationsRounds for an Evaluation.",displayName:"EvaluationRoundEditorList",props:{evaluationId:{defaultValue:null,description:"id of the Evaluation containing EvaluationRounds to edit",name:"evaluationId",required:!0,type:{name:"string"}}}}}catch{}function re({evaluationId:e,entityId:r,onDeleteSuccess:n}){const[i,o]=d.useState(e);return t.jsxs("div",{children:[t.jsx(Z,{evaluationId:i,entityId:i?void 0:r,onDeleteSuccess:n,onSaveSuccess:o}),t.jsx("div",{className:"my-4",children:i?t.jsx(te,{evaluationId:i}):t.jsx(kt,{})})]})}function kt(){const[e,r]=d.useState(!1);return t.jsx("div",{"data-testid":"FakeEvaluationRoundEditorList",children:e?t.jsx(ae,{severity:"info",children:"Evaluation Rounds can be edited once the Evaluation has been created."}):t.jsx(L,{className:"add-round-button",variant:"contained",color:"primary",onClick:()=>{r(!0)},children:"Add Round"})})}try{re.displayName="EvaluationEditorPage",re.__docgenInfo={description:"Combined editor that allows editing an Evaluation's data and also it's associated rounds (once the Evaluation exists on Synapse)",displayName:"EvaluationEditorPage",props:{evaluationId:{defaultValue:null,description:"Use if UPDATING an existing Evaluation. Id of the evaluation to edit",name:"evaluationId",required:!1,type:{name:"string"}},entityId:{defaultValue:null,description:"Use if CREATING a new Evaluation. Id of the Entity that will be associated with the Evaluation",name:"entityId",required:!1,type:{name:"string"}},onDeleteSuccess:{defaultValue:null,description:"Callback after successful deletion of the Evaluation",name:"onDeleteSuccess",required:!0,type:{name:"() => void"}}}}}catch{}const Mi={title:"Synapse/Challenge/EvaluationEditorPage",component:re,args:{onDeleteSuccess:Ze()}},O={args:{entityId:"syn5585645"}},A={parameters:{stack:"mock",msw:{handlers:[...Ge(B),de.get(`${B}/repo/v1/evaluation/:id`,()=>ce.json({id:"9614712",etag:"a2b871cb-faa4-471a-8c23-b917c77fecb2",name:"a",description:"b",ownerId:Ke.toString(),createdOn:"2021-03-02T22:16:14.552Z",contentSource:"syn5585645",submissionInstructionsMessage:"c",submissionReceiptMessage:"c"},{status:200})),de.post(`${B}/repo/v1/evaluation/:id/round/list`,()=>ce.json({page:[{id:"259",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:"2022-11-27T08:00:00.000Z",roundEnd:"2022-11-30T08:00:00.000Z"},{id:"260",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:S().subtract(1,"day").toISOString(),roundEnd:S().add(2,"day").toISOString()},{id:"261",etag:"6f54c353-6c04-46b1-956d-096db1008bce",evaluationId:"9614712",roundStart:S().add(1,"week").toISOString(),roundEnd:S().add(2,"week").toISOString()}]},{status:200}))]}},args:{evaluationId:"9614712"}};var Ie,Ce,Re;O.parameters={...O.parameters,docs:{...(Ie=O.parameters)==null?void 0:Ie.docs,source:{originalSource:`{
  args: {
    entityId: 'syn5585645'
  }
}`,...(Re=(Ce=O.parameters)==null?void 0:Ce.docs)==null?void 0:Re.source}}};var Le,we,Te;A.parameters={...A.parameters,docs:{...(Le=A.parameters)==null?void 0:Le.docs,source:{originalSource:`{
  parameters: {
    stack: 'mock',
    msw: {
      handlers: [...getUserProfileHandlers(MOCK_REPO_ORIGIN), http.get(\`\${MOCK_REPO_ORIGIN}/repo/v1/evaluation/:id\`, () => {
        return HttpResponse.json({
          id: '9614712',
          etag: 'a2b871cb-faa4-471a-8c23-b917c77fecb2',
          name: 'a',
          description: 'b',
          ownerId: MOCK_USER_ID.toString(),
          createdOn: '2021-03-02T22:16:14.552Z',
          contentSource: 'syn5585645',
          submissionInstructionsMessage: 'c',
          submissionReceiptMessage: 'c'
        }, {
          status: 200
        });
      }), http.post(\`\${MOCK_REPO_ORIGIN}/repo/v1/evaluation/:id/round/list\`, () => {
        return HttpResponse.json({
          page: [
          // Ended
          {
            id: '259',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: '2022-11-27T08:00:00.000Z',
            roundEnd: '2022-11-30T08:00:00.000Z'
          },
          // Ongoing
          {
            id: '260',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: dayjs().subtract(1, 'day').toISOString(),
            roundEnd: dayjs().add(2, 'day').toISOString()
          },
          // Future
          {
            id: '261',
            etag: '6f54c353-6c04-46b1-956d-096db1008bce',
            evaluationId: '9614712',
            roundStart: dayjs().add(1, 'week').toISOString(),
            roundEnd: dayjs().add(2, 'week').toISOString()
          }]
        }, {
          status: 200
        });
      })]
    }
  },
  args: {
    evaluationId: '9614712'
  }
}`,...(Te=(we=A.parameters)==null?void 0:we.docs)==null?void 0:Te.source}}};const qi=["Entity","Evaluation"];export{O as Entity,A as Evaluation,qi as __namedExportsOrder,Mi as default};
