import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{f}from"./DateFormatter-D5AH8UYg.js";import{i as N,l as p,g as e}from"./VerificationSubmission-CDh9xETu.js";import{d}from"./dayjs.min-Bo9-7NDX.js";import{r as l}from"./index-Dv-Auh_6.js";import{J as D}from"./JSONArrayEditorModal-CRxHqsGK.js";import{i as _,c as o,j as T,k as v,y as A}from"./StringUtils-CsrYFBZo.js";import{T as g}from"./TextField-CxVGwVAj.js";const y=[e.JSON];function j(a,s){return Object.values(e).filter(t=>a?!y.includes(t):!0).filter(t=>{if(s)switch(t){case e.JSON:case e.STRING_LIST:case e.INTEGER_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.USERID_LIST:case e.ENTITYID_LIST:return!1;default:return!0}return!0})}function J(a){switch(a){case"enumeration":return"Values";case"range":return"Range";default:return a}}function z(a){switch(a){case e.STRING:return"String";case e.DOUBLE:return"Double";case e.BOOLEAN:return"Boolean";case e.INTEGER:return"Integer";case e.DATE:return"Date";case e.FILEHANDLEID:return"File";case e.ENTITYID:return"Entity";case e.LINK:return"Link";case e.MEDIUMTEXT:return"MediumText";case e.LARGETEXT:return"LargeText";case e.USERID:return"User";case e.STRING_LIST:return"String List";case e.INTEGER_LIST:return"Integer List";case e.BOOLEAN_LIST:return"Boolean List";case e.DATE_LIST:return"Date List";case e.USERID_LIST:return"User ID List";case e.ENTITYID_LIST:return"Entity ID List";case e.EVALUATIONID:return"Evaluation";case e.SUBMISSIONID:return"Submission";case e.JSON:return"JSON";default:return a}}function X(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return!0;default:return!1}}function H(a){switch(a){case e.STRING_LIST:case e.BOOLEAN_LIST:case e.DATE_LIST:case e.INTEGER_LIST:case e.ENTITYID_LIST:return!0;default:return!1}}function K(a,s){let t;switch(a){case e.INTEGER:case e.INTEGER_LIST:t=["enumeration","range"];break;case e.STRING:case e.BOOLEAN:case e.USERID:case e.ENTITYID:case e.STRING_LIST:case e.BOOLEAN_LIST:case e.ENTITYID_LIST:case e.USERID_LIST:case e.EVALUATIONID:t=["enumeration"];break;case e.DOUBLE:case e.DATE:case e.DATE_LIST:t=["range"];break;default:t=null}return t&&!s&&(t=[void 0,...t]),t}function P(a,s,t){if(s)return!1;if(t)return!1;switch(a){case e.ENTITYID:case e.ENTITYID_LIST:case e.FILEHANDLEID:case e.USERID:case e.USERID_LIST:case e.MEDIUMTEXT:case e.LARGETEXT:case e.JSON:case e.SUBMISSIONID:case e.EVALUATIONID:return!1;default:return!0}}const q=50,R=1e3,W=100;function $(a){switch(a){case e.STRING:case e.STRING_LIST:case e.LINK:return R;default:throw new Error(`Type is not known to have a max size: ${a}`)}}function Z(a,s){if(s)return!1;switch(a){case e.STRING:case e.INTEGER:case e.ENTITYID:return!0;default:return!1}}function O(a,s){return s===e.INTEGER?a.map(t=>parseInt(t)):a}function Q(a,s=[]){return a.map(t=>({...t,columnType:t.columnType,maximumSize:t.maximumSize==null?void 0:t.maximumSize.toString(),maximumListLength:t.maximumListLength==null?void 0:t.maximumListLength.toString(),isSelected:!1,isOriginallyDefaultColumn:s.some(n=>n.name===t.name),jsonSubColumns:t.jsonSubColumns?t.jsonSubColumns.map(n=>({...n,columnType:n.columnType,isSelected:!1})):void 0,defaultValue:t.defaultValue&&t.columnType.endsWith("_LIST")?JSON.parse(t.defaultValue):t.defaultValue,enumValues:t.enumValues!=null?O(t.enumValues,t.columnType):void 0}))}function ee(a){if(_(a))return{scope:a.scopeIds,viewTypeMask:a.viewTypeMask,viewEntityType:o(a.concreteType)};if(T(a)||v(a)){const s=T(a)?N:p;return{scope:(a.items??[]).map(t=>`${t.entityId}.${t.versionNumber}`),viewTypeMask:s,viewEntityType:o(a.concreteType)}}else if(A(a))return{scope:a.scopeIds,viewTypeMask:void 0,viewEntityType:o(a.concreteType)}}function M(a){switch(a){case e.STRING:case e.STRING_LIST:return{type:"string",minLength:1};case e.DOUBLE:return{type:"number"};case e.BOOLEAN:case e.BOOLEAN_LIST:return{type:"boolean"};case e.INTEGER:case e.INTEGER_LIST:return{type:"integer"};case e.DATE:case e.DATE_LIST:return{type:"string",format:"datetime"};case e.FILEHANDLEID:case e.ENTITYID:case e.ENTITYID_LIST:case e.LINK:case e.MEDIUMTEXT:case e.LARGETEXT:case e.USERID:case e.USERID_LIST:case e.SUBMISSIONID:case e.JSON:case e.EVALUATIONID:default:return{type:"string",minLength:1}}}const h=(a,s)=>a.name===s.name&&a.columnType===s.columnType,G=(a,s)=>{let t;for(const n of a)if(h(n,s)){t=n;break}return t};function F(a){const s=a!==null?parseFloat(String(a)):null;return Number.isInteger(s)?s:null}const c=(a,s)=>{const t=F(a);return s!=null&&t!=null&&t>0?t<s:!1};function V(a,s){return s?!(c(a.maximumSize,s.maximumSize)||c(a.maximumListLength,s.maximumListLength)):!0}function ae(a,s){return a.filter(t=>{const n=G(s,t);return!V(t,n)}).length}function I(a){const{columnType:s,onChange:t,value:n=[],TextFieldProps:E}=a,[S,u]=l.useState(!1),m=l.useMemo(()=>M(s),[s]),L=l.useMemo(()=>n==null?"":s===e.DATE_LIST?n.map(i=>f(d(i))).join(", "):n.join(", "),[n,s]);return r.jsxs(r.Fragment,{children:[r.jsx(D,{arrayItemDefinition:m,value:n??void 0,isShowingModal:S,onConfirm:i=>{t(i),u(!1)},onCancel:()=>u(!1)}),r.jsx(g,{...E,value:L,onClick:()=>{u(!0)}})]})}try{I.displayName="MultiValueField",I.__docgenInfo={description:"",displayName:"MultiValueField",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T[]) => void"}},columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"MEDIUMTEXT"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'},{value:'"SUBMISSIONID"'},{value:'"JSON"'}]}},TextFieldProps:{defaultValue:null,description:"",name:"TextFieldProps",required:!1,type:{name:'Omit<TextFieldProps, "onChange" | "value">'}}}}}catch{}export{q as D,I as M,F as a,H as b,X as c,K as d,j as e,G as f,ee as g,z as h,c as i,$ as j,P as k,Z as l,J as m,ae as n,W as o,R as p,Q as t};
