{"version":3,"file":"LoginPage.stories-b0b202bf.js","sources":["../../src/components/SystemUseNotification/SystemUseNotification.tsx","../../src/components/Authentication/LoginPage.tsx"],"sourcesContent":["import React from 'react'\nimport { Box, SxProps, Typography } from '@mui/material'\n\n/**\n * FISMA SAR V1-AC-8 System Use Notification, see https://sagebionetworks.jira.com/browse/SWC-6430\n */\nexport const SystemUseNotification: React.FunctionComponent<\n  SxProps\n> = sxProps => {\n  return (\n    <Box\n      sx={{\n        ...sxProps,\n        color: 'grey.700',\n        maxHeight: '110px',\n        overflow: 'auto',\n        margin: '20px 0px',\n      }}\n    >\n      <Typography\n        variant=\"smallText1\"\n        sx={{\n          fontWeight: 700,\n          marginBottom: '5px',\n        }}\n      >\n        System Use Notice\n      </Typography>\n      <Typography variant=\"smallText1\" sx={{ lineHeight: '21px' }}>\n        Sage Bionetworks actively monitors this system and activity to maintain\n        system security and availability and to ensure appropriate and\n        legitimate usage. Any individual who intentionally accesses a computer\n        or system without authorization, and who alters, damages, makes\n        unauthorized modifications to, or destroys information, or exceeds\n        authorized access, is in violation of applicable federal laws, Executive\n        Orders, directives, policies, regulations, standards, and guidance. Any\n        evidence of possible violations of proper use or applicable laws found\n        as a result of this monitoring may be turned over to law enforcement.\n        Any individual found to be in violation of the system&apos;s proper use\n        rules or law could be punished with loss of system access, fines, and/or\n        imprisonment. By proceeding, you hereby acknowledge your agreement with\n        these terms and the system&apos;s rules of behavior and consent to such\n        monitoring and information retrieval for law enforcement and other\n        official purposes.\n      </Typography>\n    </Box>\n  )\n}\n\nexport default SystemUseNotification\n","import React from 'react'\nimport {\n  Box,\n  Stack,\n  styled,\n  Link,\n  Typography,\n  TypographyProps,\n  useTheme,\n} from '@mui/material'\nimport { LeftRightPanel } from '../styled/LeftRightPanel'\nimport useShowDesktop from '../../utils/hooks/useShowDesktop'\nimport LoginFlowBackButton from './LoginFlowBackButton'\nimport useLogin from '../../utils/hooks/useLogin'\nimport LoginForm from './LoginForm'\nimport { StyledComponent } from '@emotion/styled'\nimport SystemUseNotification from '../SystemUseNotification/SystemUseNotification'\n\nconst LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE = encodeURIComponent(\n  'Lost access to my Synapse account',\n)\nconst LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION = encodeURIComponent(\n  '<Please provide your username and/or email address associated with your account.>',\n)\nconst LOST_ACCOUNT_ACCESS_CONTACT_URL = `https://sagebionetworks.jira.com/servicedesk/customer/portal/9/group/16/create/85?summary=${LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE}&description=${LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION}`\n\nexport type LoginPageProps = {\n  ssoRedirectUrl?: string\n  sessionCallback: () => void // Callback is invoked after login\n}\n\nconst Tagline: StyledComponent<TypographyProps> = styled(Typography, {\n  label: 'Tagline',\n})(({ theme }) => ({\n  marginBottom: theme.spacing(2),\n  font: '300 24px/34px Lato, sans-serif',\n}))\n\nfunction BackupCodeInstructions(props: TypographyProps) {\n  return (\n    <>\n      <Typography {...props}>\n        Your backup code is a 16 digit code, with groups of 4 letters or numbers\n        separated by hyphens, like this:\n      </Typography>\n      <Typography\n        {...props}\n        component={'div' as any}\n        variant={'monospace'}\n        sx={{ my: 1, fontSize: '18px' }}\n      >\n        xxxx-xxxx-xxxx-xxxx\n      </Typography>\n      <Typography {...props}>\n        Each code can only be used once. If you donâ€™t have access to these\n        codes, please{' '}\n        <Link href={LOST_ACCOUNT_ACCESS_CONTACT_URL}>contact us</Link>.\n      </Typography>\n    </>\n  )\n}\n\nexport default function LoginPage(props: LoginPageProps) {\n  const { ssoRedirectUrl, sessionCallback } = props\n  const showDesktop = useShowDesktop(910)\n  const theme = useTheme()\n\n  const {\n    step,\n    onStepChange,\n    submitUsernameAndPassword,\n    submitOneTimePassword,\n    errorMessage,\n    isLoading,\n  } = useLogin(sessionCallback)\n\n  const loginForm = (\n    <Stack\n      alignItems={'stretch'}\n      sx={{ height: '100%', width: '325px', mx: 'auto' }}\n    >\n      {!showDesktop && (\n        <Stack flexDirection={'row'}>\n          <LoginFlowBackButton step={step} onStepChange={onStepChange} />\n        </Stack>\n      )}\n\n      <Box\n        sx={{\n          mb: 4,\n          textAlign: 'center',\n          maxWidth: '90vw',\n        }}\n      >\n        <img\n          alt={'Synapse logo'}\n          src={\n            'https://s3.amazonaws.com/static.synapse.org/images/synapse-logo-blue.svg'\n          }\n        />\n        {!showDesktop && (\n          <Typography variant=\"body1\" align=\"center\" sx={{ my: 1 }}>\n            Organize. Get credit. Collaborate.\n          </Typography>\n        )}\n      </Box>\n      {!showDesktop && step === 'VERIFICATION_CODE' && (\n        <Typography variant={'body1'} align={'center'} sx={{ my: 1 }}>\n          Enter the 6-digit, time-based verification code provided by your\n          authenticator app.\n        </Typography>\n      )}\n      {!showDesktop && step === 'RECOVERY_CODE' && (\n        <BackupCodeInstructions\n          variant={'body1'}\n          align={'center'}\n          sx={{ my: 1 }}\n        />\n      )}\n      <LoginForm\n        ssoRedirectUrl={ssoRedirectUrl}\n        step={step}\n        onStepChange={onStepChange}\n        submitUsernameAndPassword={submitUsernameAndPassword}\n        submitOneTimePassword={submitOneTimePassword}\n        errorMessage={errorMessage}\n        isLoading={isLoading}\n      />\n    </Stack>\n  )\n\n  if (showDesktop) {\n    return (\n      <LeftRightPanel\n        leftContent={\n          <>\n            <Box sx={{ py: 15, px: 8, height: '100%', position: 'relative' }}>\n              <LoginFlowBackButton\n                step={step}\n                onStepChange={onStepChange}\n                sx={{\n                  position: 'absolute',\n                  top: theme.spacing(2),\n                  left: theme.spacing(2),\n                }}\n              />\n              {loginForm}\n            </Box>\n          </>\n        }\n        rightContent={\n          <Box\n            sx={{\n              py: 15,\n              height: '100%',\n              background:\n                \"url('https://s3.amazonaws.com/static.synapse.org/images/login-panel-bg.svg') no-repeat right bottom 5px\",\n            }}\n          >\n            <Box\n              sx={{\n                px: 9,\n                color: '#1e4964',\n              }}\n            >\n              {step === 'VERIFICATION_CODE' && (\n                <>\n                  <Typography variant=\"headline1\" sx={{ mb: 4 }}>\n                    Enter your verification code\n                  </Typography>\n                  <Typography variant={'headline2'} sx={{ lineHeight: '30px' }}>\n                    Enter the 6-digit, time-based verification code provided by\n                    your authenticator app.\n                  </Typography>\n                </>\n              )}\n              {step === 'RECOVERY_CODE' && (\n                <>\n                  <Typography variant=\"headline1\" sx={{ mb: 4 }}>\n                    Enter your backup code\n                  </Typography>\n                  <BackupCodeInstructions\n                    variant={'body1'}\n                    sx={{ fontSize: '18px', lineHeight: '30px' }}\n                  />\n                </>\n              )}\n              {step !== 'VERIFICATION_CODE' && step !== 'RECOVERY_CODE' && (\n                <>\n                  <Tagline variant=\"headline2\">\n                    <strong>Organize</strong> your digital research assets.\n                  </Tagline>\n                  <Tagline variant=\"headline2\">\n                    <strong>Get credit</strong> for your research.\n                  </Tagline>\n                  <Tagline variant=\"headline2\">\n                    <strong>Collaborate</strong> with your colleagues and the\n                    public.\n                  </Tagline>\n                </>\n              )}\n              <SystemUseNotification />\n            </Box>\n          </Box>\n        }\n      />\n    )\n  } else {\n    return (\n      <Box\n        sx={{\n          px: 0,\n          py: 12,\n          height: '95vh',\n          background:\n            \"#fff url('https://s3.amazonaws.com/static.synapse.org/images/SynapseMobileLogInFull.svg') 50% 50%\",\n          backgroundSize: 'contain',\n        }}\n      >\n        {loginForm}\n        <SystemUseNotification />\n      </Box>\n    )\n  }\n}\n"],"names":["SystemUseNotification","sxProps","jsxs","Box","jsx","Typography","LOST_ACCOUNT_SERVICE_DESK_ISSUE_TITLE","LOST_ACCOUNT_SERVICE_DESK_DESCRIPTION","LOST_ACCOUNT_ACCESS_CONTACT_URL","Tagline","styled","theme","BackupCodeInstructions","props","Fragment","Link","LoginPage","ssoRedirectUrl","sessionCallback","showDesktop","useShowDesktop","useTheme","step","onStepChange","submitUsernameAndPassword","submitOneTimePassword","errorMessage","isLoading","useLogin","loginForm","Stack","LoginFlowBackButton","LoginForm","LeftRightPanel"],"mappings":"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"}