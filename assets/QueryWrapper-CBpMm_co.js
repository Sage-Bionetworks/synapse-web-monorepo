import{r as u,an as z,aq as Ee,cb as Ne,f5 as Pe,eU as W,cc as De,ce as _e,cd as ve,j as p,$ as Ae,f1 as g,f6 as be,eR as ce,eS as de,bZ as V,f3 as ye,eH as J,fs as Qe,fr as ke,f7 as Oe,ao as Ue,ft as ze,fu as Me,di as Le,fv as me,fw as fe,fx as Be,fy as je,fz as Ke,c3 as We,fA as He,fB as te}from"./iframe-CvY4ZvuJ.js";import{u as Je}from"./unCamelCase-ZiU_emRy.js";import{a as Re,u as Ye,b as Ge}from"./use-deep-compare-effect.esm-5lSoDmix.js";import{u as le,a as $e}from"./QueryContext-DS-0rt2K.js";import{N as Ze}from"./NoSearchResults-Bf8WNt9W.js";import{s as Xe}from"./NoData-DAf98MPp.js";import{N as et}from"./NoContentAvailable-9H5EEwgM.js";import{u as tt}from"./index-k0aR29ad.js";import{C as nt}from"./ConfirmationDialog-yKbj63se.js";import{u as rt,i as st,c as at,r as ot,s as ut}from"./TableRowSelectionState-Rudwqj9A.js";import{u as lt}from"./useEntity-BgJsBnAy.js";import{a as it}from"./SynapseTableUtils-CVL_4RwB.js";function pe(e,n){return t=>{typeof t=="function"?e(s=>{const o=t(s);return o&&n(!1),o}):t?(e(!0),n(!1)):e(!1)}}function ct(e,n){const[t,s]=u.useState(e),[o,r]=u.useState(n),l=u.useMemo(()=>pe(s,r),[]),i=u.useMemo(()=>pe(r,s),[]);return[t,l,o,i]}function he(e){const{queryMetadataQueryOptions:n}=le(),t={...n,...e};return z(t)}function Zt(e){const{queryMetadataQueryOptions:n}=le(),t={...n,...e};return Ee(t)}const dt=()=>{try{return JSON.parse(sessionStorage.getItem(ve)||"")}catch{return[]}},yt=()=>{try{return JSON.parse(sessionStorage.getItem(_e)||"")}catch{return[]}},mt=()=>{try{return JSON.parse(sessionStorage.getItem(De)||"")}catch{return[]}},ft=e=>{const n=dt().find(t=>t.id===e);return(n==null?void 0:n.name)??e},pt=e=>{const n=mt().find(t=>t.id===e);return(n==null?void 0:n.name)||e},ht=e=>{const n=yt().find(t=>t.ownerId===e);return(n==null?void 0:n.userName)||e},Ct=(e,n)=>{if(e===Ne)return Pe;switch(n){case W.ENTITYID:case W.ENTITYID_LIST:return ft(e);case W.USERID:case W.USERID_LIST:return ht(e);case W.EVALUATIONID:return pt(e);default:return e}};var H=(e=>(e.INTERACTIVE="INTERACTIVE",e.STATIC="STATIC",e.HIDDEN="HIDDEN",e))(H||{});function gt(){return p.jsxs("div",{className:"text-center",children:[p.jsx(Ze,{className:"no-search-results",display:"block",height:"181px",sx:{pt:"40px",pb:"10px"}}),p.jsx("h4",{children:"No Matching Results"}),p.jsx("p",{children:"Try checking the spelling or removing filters."})]})}function qt(){return p.jsxs("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[Xe,p.jsx("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]})}function oe(e){const{type:n,hasResettableFilters:t}=e;switch(n){case H.INTERACTIVE:return t?p.jsx(gt,{}):p.jsx(qt,{});case H.HIDDEN:return p.jsx(p.Fragment,{});case H.STATIC:default:return p.jsx(et,{})}}try{oe.displayName="NoContentPlaceholder",oe.__docgenInfo={description:"",displayName:"NoContentPlaceholder",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},hasResettableFilters:{defaultValue:null,description:"",name:"hasResettableFilters",required:!0,type:{name:"boolean"}}}}}catch{}const Y=u.createContext(void 0),ue=({children:e,queryVisualizationContext:n})=>p.jsx(Y.Provider,{value:n,children:e});function Xt(){const e=u.useContext(Y);if(e===void 0)throw new Error("useQueryVisualizationContext must be used within a QueryVisualizationWrapper");return e}const Ce=Y.Consumer;try{Y.displayName="QueryVisualizationContext",Y.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"QueryVisualizationContext",props:{}}}catch{}try{ue.displayName="QueryVisualizationContextProvider",ue.__docgenInfo={description:"Provides fields and functions related to visualizing a Synapse table query. For actual query data, see QueryContextProvider.",displayName:"QueryVisualizationContextProvider",props:{queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}}}}}catch{}try{Ce.displayName="QueryVisualizationContextConsumer",Ce.__docgenInfo={description:"",displayName:"QueryVisualizationContextConsumer",props:{}}}catch{}const St=[];function ge(e){const{noContentPlaceholderType:n=H.INTERACTIVE,defaultShowSearchBar:t=!1,defaultShowPlots:s=!0,hideCopyToClipboard:o=!1,hideSearchBarControl:r=!1,unitDescription:l="result",helpConfiguration:i,hasCustomPlots:f=!1,visibleColumnCount:d=1/0,enabledExternalAnalysisPlatforms:a=St}=e,c=u.useMemo(()=>e.columnAliases??{},[e.columnAliases]),{getCurrentQueryRequest:S,hasFacetedSelectColumn:q,hasResettableFilters:I,rowDataQueryOptions:M}=le(),{data:b}=he(),{data:L}=z({...M,select:m=>{var h,R;return(R=(h=m.responseBody)==null?void 0:h.queryResult)==null?void 0:R.queryResults.headers},placeholderData:m=>m}),{data:F}=he({select:m=>{var h;return(h=m.responseBody)==null?void 0:h.selectColumns},placeholderData:m=>m}),x=Re(L??F??[]),[D,Q]=u.useState(!1),[T,B]=u.useState(s),[_,j]=u.useState(!o),[v,K]=u.useState(!0),[A,k,O,y]=ct(t&&!r,!1),[C,w]=u.useState(!1),[U,G]=u.useState([]),ne=u.useMemo(()=>S(),[S]);u.useEffect(()=>{G(x.slice(0,d).map(m=>m.name))},[x,ne.query.sql,d]);const $=u.useCallback((m,h)=>{var E;const R=localStorage.getItem("force-display-original-column-names")==="true";if(!m||R&&!h)return m;if(c[m])return c[m];if(h){const N=(E=b==null?void 0:b.columnModels)==null?void 0:E.find(P=>P.name===m);if(N!=null&&N.jsonSubColumns){const P=N.jsonSubColumns.find(ee=>ee.jsonPath===h);if(P)return P.name}}return Je(m)},[c,b==null?void 0:b.columnModels]),Z=u.useCallback((m,h)=>{if(Array.isArray(i)){const R=i.find(E=>E.columnName===m&&E.jsonPath===h);return R==null?void 0:R.helpText}},[i]),X=u.useCallback(()=>p.jsx(oe,{type:n,hasResettableFilters:I}),[n,I]),re=u.useMemo(()=>({columnsToShowInTable:U,setColumnsToShowInTable:G,rgbIndex:e.rgbIndex,unitDescription:l,showLastUpdatedOn:e.showLastUpdatedOn,getColumnDisplayName:$,getDisplayValue:Ct,getHelpText:Z,NoContentPlaceholder:X,isShowingExportToAnalysisPlatformModal:C,setIsShowingExportToAnalysisPlatformModal:w,showFacetFilter:q?v:!1,setShowFacetFilter:K,hideSearchBarControl:r,showSearchBar:A,setShowSearchBar:k,showDownloadConfirmation:O,setShowDownloadConfirmation:y,showSqlEditor:D,setShowSqlEditor:Q,showPlots:f||q?T:!1,setShowPlots:B,showCopyToClipboard:_,setShowCopyToClipboard:j,enabledExternalAnalysisPlatforms:a}),[X,$,Z,q,C,e.rgbIndex,e.showLastUpdatedOn,y,k,_,O,v,T,A,D,l,U,f,a]),{children:se}=e;return p.jsx(ue,{queryVisualizationContext:re,children:se})}try{ge.displayName="QueryVisualizationWrapper",ge.__docgenInfo={description:`QueryVisualizationWrapper manages UI state for components that query tables in Synapse. That state can be accessed
or updated using QueryVisualizationContext. A QueryVisualizationWrapper must be used within a QueryWrapper.`,displayName:"QueryVisualizationWrapper",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:'The singular word to use to describe a what a row represents (e.g. "file"). Defaults to "result"',name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},hiddenColumns:{defaultValue:null,description:"",name:"hiddenColumns",required:!1,type:{name:"string[]"}},defaultShowPlots:{defaultValue:null,description:"",name:"defaultShowPlots",required:!1,type:{name:"boolean"}},hideCopyToClipboard:{defaultValue:null,description:"",name:"hideCopyToClipboard",required:!1,type:{name:"boolean"}},hideSearchBarControl:{defaultValue:null,description:"",name:"hideSearchBarControl",required:!1,type:{name:"boolean"}},defaultShowSearchBar:{defaultValue:null,description:"",name:"defaultShowSearchBar",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},rowSelectionPrimaryKey:{defaultValue:null,description:`The set of columns that defines a uniqueness constraint on the table for the purposes of filtering based on row selection.
Note that Synapse tables have no internal concept of a primary key.`,name:"rowSelectionPrimaryKey",required:!1,type:{name:"string[]"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:`Look for additional filters using the given key.  If not provided, the entity ID will be used.
@deprecated - configure the filter before passing a query`,name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}},helpConfiguration:{defaultValue:null,description:"Configuration to add a help popover to each corresponding column header",name:"helpConfiguration",required:!1,type:{name:"ColumnOrFacetHelpConfig[]"}},hasCustomPlots:{defaultValue:null,description:"",name:"hasCustomPlots",required:!1,type:{name:"boolean"}},enabledExternalAnalysisPlatforms:{defaultValue:{value:"[] (no platforms are enabled)"},description:"The set of external analysis platform to which the UI will support exporting data.",name:"enabledExternalAnalysisPlatforms",required:!1,type:{name:"ExternalAnalysisPlatform[]"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}}}}}catch{}function Ve(e,n){return`${e}${n}`}function qe(e,n,t){const s=n!==void 0?Ve(e,n):e,o=new URLSearchParams(window.location.search);t?o.set(s,t):o.delete(s);const r=o.toString();window.history.replaceState(null,"",window.location.pathname+(Array.from(o).length>0?`?${r.toString()}`:""))}function bt(e,n){const t=Ve(e,n),s=new URLSearchParams(window.location.search).get(t);let o;if(s){const r=JSON.parse(s);r.sql&&(o={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:Ae(r.sql),query:r})}return o}function Qt(e,n){const t=g(n),{queryOrUpdater:s}=e;return typeof s=="function"?s(t):s}function Rt(e,n){const t=g(n),{facet:s,value:o}=e,r=t.query.selectedFacets??[],l=r.find(i=>i.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnValuesRequest"&&J(s,i));return l?l.facetValues.includes(o)||l.facetValues.push(o):r.push({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:s.columnName,jsonPath:s.jsonPath,facetValues:[o]}),t.query.selectedFacets=r,V(t,n)||(t.query.offset=0),t}function Vt(e,n){const t=g(n),{facetsToRemove:s}=e,o=Array.isArray(s);return t.query.selectedFacets=(t.query.selectedFacets??[]).filter(r=>o?!s.find(l=>J(l,r)):!J(s,r)),V(t,n)||(t.query.offset=0),t}function wt(e,n){const t=g(n),{facet:s,min:o,max:r}=e,l=g(t.query.selectedFacets??[]),i=l.find(f=>f.concreteType==="org.sagebionetworks.repo.model.table.FacetColumnRangeRequest"&&J(s,f));return i&&o==null&&r==null?l.splice(l.indexOf(i),1):i?(i.min=o,i.max=r):l.push({concreteType:"org.sagebionetworks.repo.model.table.FacetColumnRangeRequest",columnName:s.columnName,jsonPath:s.jsonPath,min:o,max:r}),t.query.selectedFacets=l,V(t,n)||(t.query.offset=0),t}function Ft(e,n){const t=g(n),{facet:s,value:o}=e;return t.query.selectedFacets=(t.query.selectedFacets??[]).map(r=>(ye(r)&&J(s,r)&&(r.facetValues=r.facetValues.filter(l=>l!==o)),r)).filter(r=>ye(r)?Array.isArray(r.facetValues)&&r.facetValues.length>0:!0),V(t,n)||(t.query.offset=0),t}function It(e,n){const t=g(n),{queryFilter:s}=e;return t.query.additionalFilters=(t.query.additionalFilters??[]).filter(o=>!V(o,s)),V(t,n)||(t.query.offset=0),t}function xt(e,n){const t=g(n),{queryFilter:s,value:o}=e;return t.query.additionalFilters=(t.query.additionalFilters??[]).map(r=>((ce(r)||de(r))&&V(r,s)&&(r.values=r.values.filter(l=>l!==o)),r)).filter(r=>ce(r)||de(r)?Array.isArray(r.values)&&r.values.length>0:!0),V(t,n)||(t.query.offset=0),t}function Tt(e,n){const t=g(n),{pageSize:s}=e;return t.query.limit=s,t}function Et(e,n){const t=g(n),{pageNumber:s}=e,o=n.query.limit??be;return t.query.offset=(s-1)*o,t}function Nt(e,n,t){const[s,o]=u.useState(0),[r,l]=u.useState(!1),[i,f]=u.useReducer((d,a)=>{let c=d.nextQueryRequest;switch(a.type){case"resetDebounce":return o(q=>q+1),d;case"setQuery":{c=Qt(a,d.nextQueryRequest);break}case"addValueToSelectedFacet":{c=Rt(a,d.nextQueryRequest);break}case"removeSelectedFacet":{c=Vt(a,d.nextQueryRequest);break}case"setRangeFacetValue":{c=wt(a,d.nextQueryRequest);break}case"removeValueFromSelectedFacet":{c=Ft(a,d.nextQueryRequest);break}case"removeQueryFilter":{c=It(a,d.nextQueryRequest);break}case"removeValueFromQueryFilter":{c=xt(a,d.nextQueryRequest);break}case"setPageSize":{c=Tt(a,d.nextQueryRequest);break}case"goToPage":{c=Et(a,d.nextQueryRequest);break}case"resetQuery":{c=e;break}case"cancelChanges":case"resetUncommittedChanges":{c=d.currentQueryRequest;break}case"confirmChanges":case"commitChanges":{c=g(d.nextQueryRequest);break}}c.query=Qe(c.query);const S=n&&!ke(d.currentQueryRequest.query,c.query);if(a.commitOptions&&"noCommit"in a.commitOptions||S&&a.type!=="confirmChanges"&&a.type!=="cancelChanges")return{currentQueryRequest:d.currentQueryRequest,nextQueryRequest:c,isConfirmingChange:S};if(a.commitOptions&&"debounce"in a.commitOptions)return l(!0),{currentQueryRequest:d.currentQueryRequest,nextQueryRequest:c,isConfirmingChange:S};if(l(!1),t&&!V(d.currentQueryRequest,c)){const q=JSON.stringify(c.query);t(q)}return{currentQueryRequest:c,nextQueryRequest:c,isConfirmingChange:!1}},{currentQueryRequest:e,nextQueryRequest:e,isConfirmingChange:!1});return tt(()=>{r&&(f({type:"commitChanges"}),l(!1))},[i.nextQueryRequest,r,l,s],Pt),u.useMemo(()=>({currentQueryRequest:i.currentQueryRequest,nextQueryRequest:i.nextQueryRequest,isConfirmingChange:i.isConfirmingChange,dispatch:f}),[i.currentQueryRequest,i.isConfirmingChange,i.nextQueryRequest])}const Pt=750;function Dt(e,n,t,s,o){u.useEffect(()=>{if(e){const r=bt("QueryWrapper",n);r&&r.query&&t(l=>({...l,...r,query:{...l.query,...r.query}}))}},[n]),u.useEffect(()=>{if(e)if(V(s,o))qe("QueryWrapper",n,null);else{const r=JSON.stringify(o.query);qe("QueryWrapper",n,r)}},[n,o,s,e])}function _t(e){const{initQueryRequest:n,componentIndex:t=0,shouldDeepLink:s=!1,onQueryChange:o,requireConfirmationOnChange:r=!1}=e,l=u.useMemo(()=>{const y=g(n);return y.query=Qe(y.query),y},[n]),{currentQueryRequest:i,nextQueryRequest:f,isConfirmingChange:d,dispatch:a}=Nt(l,r,o),c=u.useCallback(()=>{a({type:"confirmChanges"})},[a]),S=u.useCallback(()=>g(i),[i]),q=u.useCallback(()=>g(l),[l]),I=u.useCallback((y,C)=>{a({type:"setQuery",queryOrUpdater:y,commitOptions:C})},[a]);Dt(s,t,I,l,i);const M=u.useCallback(()=>{a({type:"cancelChanges"})},[a]),{entityId:b,versionNumber:L}=u.useMemo(()=>Oe(i.query.sql),[i.query.sql]),F=i.query.limit??be,x=Math.ceil(((i.query.offset??0)+Number(F))/F),D=u.useCallback(y=>{a({type:"setPageSize",pageSize:y})},[a]),Q=u.useCallback(y=>{a({type:"goToPage",pageNumber:y})},[a]),T=u.useCallback(()=>{a({type:"resetQuery"})},[a]);Ye(()=>{i!=l&&T()},[l]);const B=u.useCallback((y,C,w)=>{a({type:"addValueToSelectedFacet",facet:y,value:C,commitOptions:w})},[a]),_=u.useCallback((y,C,w,U)=>{a({type:"setRangeFacetValue",facet:y,min:C,max:w,commitOptions:U})},[a]),j=u.useCallback(y=>{a({type:"removeSelectedFacet",facetsToRemove:y})},[a]),v=u.useCallback((y,C,w)=>{a({type:"removeValueFromSelectedFacet",facet:y,value:C,commitOptions:w})},[a]),K=u.useCallback(y=>{a({type:"removeQueryFilter",queryFilter:y})},[a]),A=u.useCallback((y,C)=>{a({type:"removeValueFromQueryFilter",queryFilter:y,value:C})},[a]),k=u.useCallback(()=>{a({type:"commitChanges"})},[a]),O=u.useCallback(()=>{a({type:"resetDebounce"})},[a]);return{entityId:b,commitChanges:k,resetDebounceTimer:O,currentQueryRequest:i,nextQueryRequest:f,versionNumber:L,getInitQueryRequest:q,getCurrentQueryRequest:S,setQuery:I,pageSize:F,currentPage:x,setPageSize:D,goToPage:Q,resetQuery:T,removeSelectedFacet:j,removeValueFromSelectedFacet:v,removeQueryFilter:K,removeValueFromQueryFilter:A,isConfirmingChange:d,onConfirmChange:c,onCancelChange:M,addValueToSelectedFacet:B,setRangeFacetValue:_}}function vt(e,n,t,s){const{rowDataRequest:o,queryMetadataRequest:r}=ze(e),l={...fe,queryKey:t.getEntityTableQueryResultWithAsyncStatusQueryKey(o,!1),queryFn:()=>me(o,s),select:d=>{var a,c;return(c=(a=d.responseBody)==null?void 0:a.queryResult)==null?void 0:c.queryResults}},i={...Me(o,t,s)},f={...fe,queryKey:t.getEntityTableQueryResultWithAsyncStatusQueryKey(r,!1),queryFn:()=>me(r,s),select:d=>Le(Be(d.responseBody,n),"queryResults")};return{rowDataQueryOptions:l,rowDataInfiniteQueryOptions:i,queryMetadataQueryOptions:f}}function we(e,n){const{keyFactory:t,accessToken:s}=Ue();return u.useMemo(()=>vt(e,n,t,s),[t,s,e,n])}function At(e){const{rowSelectionPrimaryKeyFromProps:n,entityId:t,versionNumber:s,queryMetadataQueryOptions:o}=e,{data:r}=lt(t,s),{data:l}=z(o);return u.useMemo(()=>{if(n)return n;if(r&&(l!=null&&l.columnModels))return it(r,l.columnModels)},[n,r,l==null?void 0:l.columnModels])}function kt(e){const{data:n,isLoading:t}=z(e);return n?je(n.facets,n.selectColumns):t}function Ot(e){const{queryBundleRequest:n,onChange:t}=e,{rowDataQueryOptions:s,queryMetadataQueryOptions:o}=we(n),{data:r,isLoading:l}=z({...s,select:c=>c.responseBody}),{data:i,isLoading:f}=z(o),[d,a]=u.useState();u.useEffect(()=>{r&&i&&!l&&!f&&a({...i,...r})},[i,f,r,l]),Ge(()=>{d&&t&&t(d)},[d,t])}function Ut(e){const{initQueryRequest:n,onQueryChange:t,onQueryResultBundleChange:s=We,lockedColumn:o,componentIndex:r,shouldDeepLink:l,onViewSharingSettingsClicked:i,isRowSelectionVisible:f=!1,isRowSelectionUIFloating:d=!0,rowSelectionPrimaryKey:a,isInfinite:c=!1,combineRangeFacetConfig:S,fileIdColumnName:q,fileVersionColumnName:I,fileNameColumnName:M}=e,b=rt(),L=_t({initQueryRequest:n,shouldDeepLink:l,componentIndex:r,onQueryChange:t,requireConfirmationOnChange:b}),{entityId:F="",versionNumber:x,getInitQueryRequest:D,getCurrentQueryRequest:Q,setQuery:T,resetQuery:B,removeSelectedFacet:_,removeValueFromSelectedFacet:j,removeQueryFilter:v,removeValueFromQueryFilter:K,onConfirmChange:A,isConfirmingChange:k,onCancelChange:O,nextQueryRequest:y,currentQueryRequest:C,addValueToSelectedFacet:w,setRangeFacetValue:U,resetDebounceTimer:G,currentPage:ne,goToPage:$,pageSize:Z,setPageSize:X}=L,re=u.useMemo(()=>Q(),[Q]),{rowDataQueryOptions:se,rowDataInfiniteQueryOptions:m,queryMetadataQueryOptions:h}=we(re,o),R=kt(h),E=u.useMemo(()=>{const ae=Q();return He(ae.query,o)},[Q,o]),N=te(st);u.useEffect(()=>{N(f)},[f,N]);const P=te(at);u.useEffect(()=>{P(d)},[d,P]);const ee=At({entityId:F,versionNumber:x,rowSelectionPrimaryKeyFromProps:a,queryMetadataQueryOptions:h}),ie=te(ot);u.useEffect(()=>{ie(ee)},[ee,ie]);const Fe=te(ut),Ie=u.useCallback(ae=>s(JSON.stringify(ae)),[s]);Ot({queryBundleRequest:Q(),onChange:Ie});const xe=Re({isInfinite:c,entityId:F,versionNumber:x,nextQueryRequest:y,currentQueryRequest:C,getCurrentQueryRequest:Q,getInitQueryRequest:D,executeQueryRequest:T,hasFacetedSelectColumn:R,hasResettableFilters:E,removeSelectedFacet:_,removeValueFromSelectedFacet:j,resetQuery:B,removeQueryFilter:v,removeValueFromQueryFilter:K,onViewSharingSettingsClicked:i,addValueToSelectedFacet:w,combineRangeFacetConfig:S,setRangeFacetValue:U,resetDebounceTimer:G,rowDataQueryOptions:se,rowDataInfiniteQueryOptions:m,queryMetadataQueryOptions:h,currentPage:ne,goToPage:$,pageSize:Z,setPageSize:X,lockedColumn:o,fileIdColumnName:q,fileVersionColumnName:I,fileNameColumnName:M}),{children:Te}=e;return p.jsxs($e,{queryContext:xe,children:[p.jsx(nt,{open:k,title:"Change Query and Clear Selection?",content:"Changing the current query will cause your current selection to be lost. Are you sure you want to proceed?",confirmButtonProps:{children:"Clear Selection and Update Query"},onConfirm:()=>{Fe([]),A()},onCancel:()=>{O()}}),Te]})}function Se(e){return p.jsx(Ke,{children:p.jsx(Ut,{...e})})}try{Se.displayName="QueryWrapper",Se.__docgenInfo={description:"",displayName:"QueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"(newQueryJson: string) => void"}},onQueryResultBundleChange:{defaultValue:null,description:"Called when the query result rows change",name:"onQueryResultBundleChange",required:!1,type:{name:"(newQueryResultBundleJson: string) => void"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},onViewSharingSettingsClicked:{defaultValue:null,description:"",name:"onViewSharingSettingsClicked",required:!1,type:{name:"(benefactorId: string) => void"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},rowSelectionPrimaryKey:{defaultValue:null,description:`The set of columns that defines a uniqueness constraint on the table for the purposes of filtering based on row selection.
Note that Synapse tables have no internal concept of a primary key.`,name:"rowSelectionPrimaryKey",required:!1,type:{name:"string[]"}},isRowSelectionUIFloating:{defaultValue:null,description:"By default, the row selection UI will float at the bottom of the viewport.  Set to false to make it inline",name:"isRowSelectionUIFloating",required:!1,type:{name:"boolean"}},isInfinite:{defaultValue:null,description:"",name:"isInfinite",required:!1,type:{name:"boolean"}},combineRangeFacetConfig:{defaultValue:null,description:"",name:"combineRangeFacetConfig",required:!1,type:{name:"CombineRangeFacetConfig"}},fileIdColumnName:{defaultValue:null,description:"If provided, will use the value in this column instead of the rowID for the access column, download column, etc",name:"fileIdColumnName",required:!1,type:{name:"string"}},fileNameColumnName:{defaultValue:null,description:"",name:"fileNameColumnName",required:!1,type:{name:"string"}},fileVersionColumnName:{defaultValue:null,description:"If provided, will use the value in this column instead of the row version number for the access column, download column, etc",name:"fileVersionColumnName",required:!1,type:{name:"string"}}}}}catch{}export{H as N,Se as Q,Xt as a,Zt as b,ge as c,Ce as d,vt as e,Et as g,he as u};
