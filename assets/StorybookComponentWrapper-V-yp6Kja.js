import{j as a}from"./jsx-runtime-DoxjgJx5.js";import{Q as p}from"./utils-BECe8vEQ.js";import{d as m}from"./dayjs.min-D1RcYm3-.js";import{r as s}from"./index-Cu9bd8lq.js";import{X as f,Y as y,Z as k,S as c,D as C,_ as h,$ as g,W as S,a0 as x,a1 as b,a2 as w}from"./useFiles-DFdLn1TY.js";import"./VerificationSubmission-DL9jxYsQ.js";import"./RegularExpressions-SKYrON-T.js";import"./OrientationBanner-6TFYkqd5.js";import{S as E}from"./ToastMessage-BzITCHuf.js";var v=function(){return null};async function T(){let e=await h(),t;try{t=await g(e)}catch(n){throw n instanceof S&&n.status===401&&(console.error("Encountered error fetching profile: ",n,"Signing out..."),await x(),e=void 0),n}let o;return e&&b(e).then(n=>{o=m(n.authenticatedOn).format("L LT")}),{accessToken:e,profile:t,authenticatedOn:o}}const i=new f(y);function _(e){const t=w[e];window.SRC={OVERRIDE_ENDPOINT_CONFIG:t}}function d(e){const{storybookContext:t}=e,o=t.globals.stack||t.parameters.stack;s.useEffect(()=>{_(o)},[o]);const[n,l]=s.useState(void 0);k(),s.useEffect(()=>{T().then(r=>{l(r.accessToken)})}),s.useEffect(()=>{async function r(){await i.cancelQueries(),await i.resetQueries()}r()},[n,o]);const u=s.useMemo(()=>({accessToken:t.args.isAuthenticated&&o==="mock"?"fake token":!t.args.isAuthenticated&&o==="mock"?void 0:n,isInExperimentalMode:c.isInSynapseExperimentalMode(),utcTime:c.getUseUtcTimeFromCookie(),withErrorBoundary:!0,downloadCartPageUrl:"/?path=/story/download-downloadcartpage--demo"}),[n,o,t.args.isAuthenticated]);return a.jsx(s.Suspense,{fallback:"global suspense loading...",children:a.jsx(p,{client:i,children:a.jsxs(C,{synapseContext:u,children:[t.globals.showReactQueryDevtools&&a.jsx(v,{}),a.jsx(E,{}),a.jsx("main",{children:e.children})]},o)})})}try{d.displayName="StorybookComponentWrapper",d.__docgenInfo={description:"Wraps storybook story components to ensure that all components receive required context.",displayName:"StorybookComponentWrapper",props:{storybookContext:{defaultValue:null,description:"",name:"storybookContext",required:!0,type:{name:"{ args: { isAuthenticated?: boolean | undefined; }; globals: { stack?: SynapseStack | undefined; showReactQueryDevtools?: boolean | undefined; }; parameters: { stack?: SynapseStack | undefined; }; }"}}}}}catch{}export{d as S,T as s};
