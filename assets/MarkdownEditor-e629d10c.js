import{j as a,F as A,a as S}from"./jsx-runtime-095bf462.js";import{r as s}from"./index-8db94870.js";import{at as U,aM as W,aN as k}from"./SynapseClient-0de7e8d0.js";import{I as v}from"./IconSvg-6fc41b2c.js";import{D as V,b as D}from"./ConfirmationDialog-fb2440c3.js";import{U as $}from"./UserSearchBoxV2-dde5f812.js";import{s as q}from"./startCase-dc3c3bda.js";const T=({show:d,onClose:t,handleUserTag:i})=>{const u=s.useCallback((m,l)=>{m&&l&&i(l.userName),t()},[t,i]);return a(A,{children:a(V,{open:d,onCancel:t,title:"Find User or Team",content:a($,{placeholder:"Search for a user or team name",onChange:u,typeFilter:U.ALL,focusOnSelect:!0}),sx:{".MuiDialog-paperFullWidth":{overflowY:"visible",".MuiDialogContent-root":{overflowY:"visible"}}}})})};try{T.displayName="UserMentionModal",T.__docgenInfo={description:"",displayName:"UserMentionModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},handleUserTag:{defaultValue:null,description:"",name:"handleUserTag",required:!0,type:{name:"(user: string) => void"}}}}}catch{}const F=["WRITE","PREVIEW"],C=({placeholder:d,text:t,setText:i})=>{const[u,m]=s.useState("WRITE"),[l,M]=s.useState(0),[w,b]=s.useState(!1),[x,y]=s.useState(!1),o=s.useRef(null);s.useEffect(()=>{const e=o.current;e&&e.setSelectionRange(l,l)},[o,l]),s.useEffect(()=>{var e;(e=o.current)==null||e.focus()},[w]);const I=e=>{const r=[],n=o.current;if(n){const c=n==null?void 0:n.selectionStart,p=t.substring(0,c),g=t.substring(c,t.length);M(c+e.length),r.push(p,`${x?"":"@"}${e.replace(/\s/g,"")}`,g)}i(r.join("")),y(!1)},N=e=>{const r=o.current&&o.current.selectionStart;r&&r>0&&e.charAt(r-1)==="@"&&(y(!0),b(!0))},R=e=>{const r=o.current;if(r){const n=r.selectionStart,c=r.selectionEnd,p=t.substring(n,c),g=t.substring(0,n),E=t.substring(c,t.length),f=k[e].openSyntax,_=k[e].closeSyntax;switch(e){case"code":{const h=[];h.push(g,f,p,_,E),i(h.join(`\r
`)),r.focus(),M(n+f.length+2);break}case"title":case"bold":case"italic":case"strikethrough":case"latex":case"subscript":case"superscript":case"link":case"image":{const h=`${g}${f}${p}${_}${E}`;r.focus(),M(n+f.length),i(h)}}}};return S("div",{className:"bootstrap-4-backport MarkdownEditor",children:[S("div",{className:"MarkdownEditorControls",children:[a("div",{className:"Tabs",children:F.map(e=>a("button",{className:"Tab",role:"tab","aria-selected":e===u,onClick:r=>{r.stopPropagation(),m(e)},children:e},e))}),u==="WRITE"&&S("div",{className:"MarkdownEditorControlsToolbar",children:[W.map(e=>a("button",{onClick:()=>R(e),children:a(v,{icon:e,label:q(e)})},e)),a("button",{onClick:()=>b(!0),children:a(v,{icon:"tag",label:"Mention"})})]})]}),a("div",{children:u==="WRITE"?a("textarea",{onChange:e=>{i(e.target.value),N(e.target.value)},style:{width:"100%"},rows:6,value:t,ref:o,placeholder:d}):t?a(D,{markdown:t}):"Nothing to preview"}),a(T,{show:w,onClose:()=>b(!1),handleUserTag:I})]})};try{C.displayName="MarkdownEditor",C.__docgenInfo={description:"",displayName:"MarkdownEditor",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},setText:{defaultValue:null,description:"",name:"setText",required:!0,type:{name:"(text: string) => void"}}}}}catch{}export{C as M};
//# sourceMappingURL=MarkdownEditor-e629d10c.js.map
