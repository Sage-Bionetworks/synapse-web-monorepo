import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as g}from"./index-BvwUSpoE.js";import{aW as L,aX as T}from"./useFiles-C5IkgHKR.js";import{g as h,d as A,f as F,B as N,Q as V,i as b,h as D,N as I,j as v}from"./SynapseConstants-BZ1xM3T_.js";import{p as Q,g as U}from"./SqlFunctions-B8wRZva4.js";import"./StringUtils-C95LMFI-.js";import"./VerificationSubmission-BDh1zA9f.js";import"./OrientationBanner-CaftPmJ0.js";import{u as _}from"./QueryContext-BKWJUew3.js";import{c as x,u as O,Q as R,a as M,N as w}from"./QueryWrapper-BFUelelh.js";import{A as j}from"./Autocomplete-DszexaaK.js";import{T as P}from"./TextField-Dj0M01sS.js";import{S as B}from"./UserSearchBoxV2-CoB5XkCW.js";import{f as k}from"./JsonSchemaForm-B5F6pQfG.js";import{T as K}from"./Typography-BE4rHoNc.js";import{Q as Y}from"./QueryWrapperErrorBoundary-C2l3vO2u.js";import{R as W}from"./RowSetView-6-zd4YUi.js";function S(e){const f=_(),{getCurrentQueryRequest:p,addValueToSelectedFacet:c,removeSelectedFacet:a}=f,{data:s}=x(),{topLevelEnumeratedFacetToFilter:n}=e,u=p(),l=((s==null?void 0:s.facets)??[]).find(o=>L(o,n)),m=(l==null?void 0:l.facetValues.map(({value:o})=>o))??[],i=T(n,u.query.selectedFacets),d=(i==null?void 0:i.facetValues)||[],t=(o,y)=>{a(n),y.forEach(E=>c(n,E))};return r.jsx("div",{children:m.length>0&&r.jsx(j,{multiple:!0,options:m,value:d,onChange:t,renderInput:o=>r.jsx(P,{...o,placeholder:"Select Filter(s)"})})})}try{S.displayName="ColumnFilter",S.__docgenInfo={description:"",displayName:"ColumnFilter",props:{topLevelEnumeratedFacetToFilter:{defaultValue:null,description:"",name:"topLevelEnumeratedFacetToFilter",required:!0,type:{name:"UniqueFacetIdentifier"}}}}}catch{}function C({sortConfig:e}){const{defaultColumn:f,defaultDirection:p,sortableColumns:c}=e,{executeQueryRequest:a}=_(),{getColumnDisplayName:s}=O(),[n,u]=g.useState(f),[l,m]=g.useState(p),i=c.map(t=>({value:t,label:s(t)})),d=t=>{a(o=>{let y="ASC";return t===n&&(y=l==="ASC"?"DESC":"ASC"),o.query.sort=t?[{column:t,direction:y}]:void 0,u(t),m(y),o})};return r.jsxs("div",{className:"QuerySortSelector",children:[r.jsx(K,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),r.jsx(B,{className:"react-select-container SRC-inlineBlock",value:k(n,i),options:i,onChange:t=>d(t==null?void 0:t.value),styles:{control:t=>({...t,marginLeft:"15px"})}})]})}try{C.displayName="QuerySortSelector",C.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}}}catch{}function q(e){var i;const{sql:f}=e,p=((i=e.query)==null?void 0:i.sql)??f??"",c=Q(p),{sortConfig:a,columnAliases:s,topLevelEnumeratedFacetToFilter:n}=e,u=g.useMemo(()=>a?[{column:a.defaultColumn,direction:a.defaultDirection}]:void 0,[a]),l=g.useMemo(()=>{let d;if(e.query)d={sort:u,limit:h,...e.query};else{const t=U(e.searchParams,e.sqlOperator,e.additionalFiltersSessionStorageKey);d={sql:e.sql,limit:e.limit??h,sort:u,additionalFilters:t}}return{concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:c,query:d,partMask:A|F|N|V|b|D|I|v}},[u,c,e.additionalFiltersSessionStorageKey,e.limit,e.query,e.searchParams,e.sql,e.sqlOperator]),m=JSON.stringify(l);return g.createElement(R,{...e,initQueryRequest:l,isInfinite:!0,key:m},r.jsx(M,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:s,noContentPlaceholderType:e.noContentPlaceholderType??w.STATIC,children:r.jsxs(Y,{children:[a&&r.jsx(C,{sortConfig:a}),n&&r.jsx(S,{topLevelEnumeratedFacetToFilter:n}),r.jsx(W,{cardConfiguration:e.cardConfiguration,initialLimit:e.initialLimit,multiCardList:e.multiCardList})]})}))}try{q.displayName="CardContainerLogic",q.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{query:{defaultValue:null,description:"The initial SQL query which will be used to populate the data in the component",name:"query",required:!1,type:{name:"Query"}},sql:{defaultValue:null,description:"@deprecated use `query`",name:"sql",required:!1,type:{name:"string"}},limit:{defaultValue:null,description:"Optional limit for the number of cards shown per page\n@deprecated use `query",name:"limit",required:!1,type:{name:"number"}},searchParams:{defaultValue:null,description:"Applies filters to the query where the key is the column name and the value is the value to filter on.\nThe filter function is controlled by sqlOperator.\n@deprecated use `query`",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},sqlOperator:{defaultValue:null,description:"Operator used in the filter created using the searchParams prop\n@deprecated use `query`",name:"sqlOperator",required:!1,type:{name:"SQLOperator"}},title:{defaultValue:null,description:"Optional title to display above the component",name:"title",required:!1,type:{name:"string"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sortConfig:{defaultValue:null,description:"Provide a `SortConfiguration` that can be used to render UI to toggle the sorting of the cards.",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},topLevelEnumeratedFacetToFilter:{defaultValue:null,description:"Configuration used to render UI that can be used to alter a filter against a column with enumerated facets.",name:"topLevelEnumeratedFacetToFilter",required:!1,type:{name:"UniqueFacetIdentifier"}},lockedColumn:{defaultValue:null,description:"Optional column to 'lock'; Values and filter controls for a locked column will not be displayed in the UI.",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},initialLimit:{defaultValue:null,description:"Optionally limit the initial number of cards shown on the first page",name:"initialLimit",required:!1,type:{name:"number"}},multiCardList:{defaultValue:null,description:"",name:"multiCardList",required:!1,type:{name:"boolean"}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'},{value:'"HIDDEN"'}]}},unitDescription:{defaultValue:null,description:'The singular word to use to describe a what a row represents (e.g. "file"). Defaults to "result"',name:"unitDescription",required:!1,type:{name:"string"}},additionalFiltersSessionStorageKey:{defaultValue:null,description:`Look for additional filters using the given key.  If not provided, the entity ID will be used.
@deprecated - configure the filter before passing a query`,name:"additionalFiltersSessionStorageKey",required:!1,type:{name:"string"}}}}}catch{}export{q as C};
