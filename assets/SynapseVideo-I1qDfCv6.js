import{an as H,r as l,j as t,d6 as U,i0 as f,F as h,dB as b}from"./iframe-C4lSw8dA.js";function v({params:e}){const{accessToken:n,isAuthenticated:F}=H(),[d,p]=l.useState(),[y,m]=l.useState(),[S,x]=l.useState(),c=e.width??"",u=e.height??"";return l.useEffect(()=>{const V=async()=>{if(e.videoId)p(`https://www.youtube.com/embed/${e.videoId}`);else if(e.vimeoId)p(`https://player.vimeo.com/video/${e.vimeoId}`);else{const o=e.oggSynapseId||e.mp4SynapseId||e.webmSynapseId,a=await f(n,o),s=[{associateObjectId:o,associateObjectType:h.FileEntity,fileHandleId:a.dataFileHandleId}];let g;if(e.vttSynapseId){const i=await f(n,e.vttSynapseId);g=i.dataFileHandleId,s.push({associateObjectId:e.vttSynapseId,associateObjectType:h.FileEntity,fileHandleId:i.dataFileHandleId})}j(s,a.dataFileHandleId,g)}},j=(o,a,s)=>{b({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:o},n).then(i=>{const I=i.requestedFiles.find(r=>r.fileHandleId===a);if(I?.preSignedURL&&m(I.preSignedURL),s){const r=i.requestedFiles.find(w=>w.fileHandleId===s);r?.preSignedURL&&x(r.preSignedURL)}}).catch(i=>{console.error("Error on getting video ",i)})};V()},[d,e,n,u,c]),!F&&!d?t.jsxs("p",{children:["You will need to",t.jsx("button",{"data-testid":"video-login",className:`${U} sign-in-btn default
              `,children:"Sign in"}),"in for access to that resource."]}):y?t.jsxs("video",{controls:!0,width:c,height:u,"data-testid":"synapse-video-url",crossOrigin:"anonymous",children:[t.jsx("source",{src:y}),S&&t.jsx("track",{src:S,kind:"subtitles",default:!0}),"It does not support the HTML5 Video element."]}):d?t.jsx("iframe",{title:"video frame",src:d,width:c,height:u}):t.jsx(t.Fragment,{})}try{v.displayName="SynapseVideo",v.__docgenInfo={description:"",displayName:"SynapseVideo",props:{params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ width?: string; height?: string; videoId?: string; vimeoId?: string; oggSynapseId?: string; mp4SynapseId?: string; webmSynapseId?: string; vttSynapseId?: string; }"}}}}}catch{}export{v as S};
